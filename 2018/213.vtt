WEBVTT

00:00:07.516 --> 00:00:16.500 A:middle
[ Music ]

00:00:23.516 --> 00:00:28.500 A:middle
[ Applause ]

00:00:29.376 --> 00:00:31.346 A:middle
&gt;&gt; Welcome to CarPlay Audio and

00:00:31.346 --> 00:00:32.375 A:middle
Navigation Apps.

00:00:32.926 --> 00:00:34.656 A:middle
I'm Jonathan, an engineer on the

00:00:34.656 --> 00:00:36.356 A:middle
iOS Car Experience Team.

00:00:36.726 --> 00:00:38.726 A:middle
We are so excited to share some

00:00:38.726 --> 00:00:40.246 A:middle
updates with you today to help

00:00:40.246 --> 00:00:41.906 A:middle
you build a great experience in

00:00:41.906 --> 00:00:42.356 A:middle
CarPlay.

00:00:44.066 --> 00:00:46.156 A:middle
We'll start by reviewing CarPlay

00:00:46.156 --> 00:00:46.916 A:middle
Audio apps.

00:00:47.276 --> 00:00:48.886 A:middle
Then, we'll introduce the brand

00:00:48.886 --> 00:00:50.626 A:middle
new CarPlay framework for your

00:00:50.626 --> 00:00:51.456 A:middle
navigation apps.

00:00:52.086 --> 00:00:53.906 A:middle
And we'll drive a quick detour

00:00:54.246 --> 00:00:55.866 A:middle
to show you how easy it is to

00:00:55.866 --> 00:00:57.036 A:middle
build a great navigation

00:00:57.036 --> 00:00:58.256 A:middle
experience in CarPlay.

00:00:58.856 --> 00:01:00.486 A:middle
Let's start with a quick review


00:00:58.856 --> 00:01:00.486 A:middle
Let's start with a quick review

00:01:00.546 --> 00:01:02.936 A:middle
of CarPlay.

00:01:03.296 --> 00:01:05.696 A:middle
CarPlay is a smarter safer way

00:01:05.696 --> 00:01:07.206 A:middle
to use iPhone in the car.

00:01:07.746 --> 00:01:09.266 A:middle
You can seamlessly perform

00:01:09.266 --> 00:01:10.976 A:middle
common scenarios while driving

00:01:11.186 --> 00:01:12.486 A:middle
using your car's built-in

00:01:12.486 --> 00:01:12.946 A:middle
display.

00:01:13.556 --> 00:01:15.666 A:middle
You can make calls, send and

00:01:15.666 --> 00:01:17.446 A:middle
receive messages, listen to

00:01:17.446 --> 00:01:20.006 A:middle
audio, podcasts, and radio, and

00:01:20.006 --> 00:01:21.956 A:middle
now, get directions with your

00:01:21.956 --> 00:01:23.926 A:middle
navigation apps, all while

00:01:23.926 --> 00:01:25.136 A:middle
staying focused on the road.

00:01:25.976 --> 00:01:27.666 A:middle
You can think of the car screen

00:01:27.926 --> 00:01:29.896 A:middle
like a second external display

00:01:29.896 --> 00:01:31.206 A:middle
for your phone.

00:01:31.366 --> 00:01:33.176 A:middle
Your app can present a version

00:01:33.176 --> 00:01:35.486 A:middle
of itself on the car screen with

00:01:35.486 --> 00:01:37.816 A:middle
UI and features optimized for

00:01:37.816 --> 00:01:38.666 A:middle
use in the car.

00:01:39.456 --> 00:01:41.306 A:middle
There are some special design

00:01:41.306 --> 00:01:43.076 A:middle
considerations for your app when

00:01:43.076 --> 00:01:45.846 A:middle
presented in CarPlay.

00:01:46.406 --> 00:01:48.056 A:middle
CarPlay vehicles have a wide

00:01:48.056 --> 00:01:49.566 A:middle
variety of input styles.

00:01:49.836 --> 00:01:51.586 A:middle
Some cars have touchscreens.

00:01:51.896 --> 00:01:53.726 A:middle
Others have a rotary knob that

00:01:53.726 --> 00:01:55.296 A:middle
lets you move focus around and

00:01:55.296 --> 00:01:56.176 A:middle
select elements.

00:01:56.566 --> 00:01:58.156 A:middle
And some have a touchpad that

00:01:58.156 --> 00:01:59.856 A:middle
allows for swipe gestures, and

00:01:59.856 --> 00:02:01.346 A:middle
you can even do character entry


00:01:59.856 --> 00:02:01.346 A:middle
you can even do character entry

00:02:01.346 --> 00:02:02.616 A:middle
by tracing with your finger.

00:02:03.856 --> 00:02:05.796 A:middle
In a right-hand drive vehicle,

00:02:06.336 --> 00:02:08.455 A:middle
the CarPlay status bar and app

00:02:08.526 --> 00:02:09.966 A:middle
content will automatically

00:02:09.966 --> 00:02:11.846 A:middle
switch sides to be closest to

00:02:11.846 --> 00:02:12.376 A:middle
the driver.

00:02:13.846 --> 00:02:16.546 A:middle
Some cars, also, inform iOS when

00:02:16.546 --> 00:02:19.096 A:middle
to transition to a dark

00:02:19.096 --> 00:02:19.916 A:middle
interface mode.

00:02:19.976 --> 00:02:21.486 A:middle
Usually, when it's nighttime or

00:02:21.486 --> 00:02:22.656 A:middle
when the vehicle's headlights

00:02:22.656 --> 00:02:23.296 A:middle
are turned on.

00:02:24.716 --> 00:02:25.966 A:middle
Your app can use this as a

00:02:25.966 --> 00:02:27.966 A:middle
signal to, for example, update

00:02:27.966 --> 00:02:29.536 A:middle
your map tile display style.

00:02:29.946 --> 00:02:33.136 A:middle
CarPlay vehicles, also, support

00:02:33.136 --> 00:02:35.156 A:middle
a wide variety of screen sizes

00:02:35.156 --> 00:02:36.446 A:middle
and aspect ratios.

00:02:37.166 --> 00:02:38.986 A:middle
iOS handles all of these input

00:02:38.986 --> 00:02:40.646 A:middle
methods for you, so you can

00:02:40.646 --> 00:02:41.986 A:middle
write your app just once for

00:02:41.986 --> 00:02:43.716 A:middle
CarPlay and rest assured it'll

00:02:43.716 --> 00:02:45.116 A:middle
be supported on all of these

00:02:45.116 --> 00:02:46.006 A:middle
configurations.

00:02:46.506 --> 00:02:47.776 A:middle
So, what kind of apps can you

00:02:47.776 --> 00:02:48.606 A:middle
build in CarPlay?

00:02:49.106 --> 00:02:51.026 A:middle
These are the five categories of

00:02:51.026 --> 00:02:51.906 A:middle
CarPlay apps.

00:02:52.406 --> 00:02:54.566 A:middle
The car is a special place and

00:02:54.566 --> 00:02:55.896 A:middle
if you have an app in one of

00:02:55.896 --> 00:02:57.366 A:middle
these five categories you'll

00:02:57.366 --> 00:02:59.046 A:middle
need to apply for an entitlement

00:02:59.046 --> 00:03:00.546 A:middle
for your app to work in CarPlay.


00:02:59.046 --> 00:03:00.546 A:middle
for your app to work in CarPlay.

00:03:02.176 --> 00:03:03.526 A:middle
If you're unsure whether your

00:03:03.526 --> 00:03:05.086 A:middle
app fits into these categories

00:03:05.086 --> 00:03:05.736 A:middle
and you're here at the

00:03:05.736 --> 00:03:07.516 A:middle
conference, please come talk to

00:03:07.516 --> 00:03:08.866 A:middle
us in our lab, later today.

00:03:09.286 --> 00:03:10.456 A:middle
More details on that, soon.

00:03:11.066 --> 00:03:12.916 A:middle
You can, also, go to this URL to

00:03:12.916 --> 00:03:14.326 A:middle
request an entitlement for your

00:03:15.146 --> 00:03:15.256 A:middle
app.

00:03:15.476 --> 00:03:16.606 A:middle
Let's quickly review these

00:03:16.606 --> 00:03:17.966 A:middle
categories of CarPlay apps.

00:03:19.936 --> 00:03:21.596 A:middle
Auto maker apps are a special

00:03:21.596 --> 00:03:22.966 A:middle
category of CarPlay app.

00:03:23.296 --> 00:03:24.856 A:middle
These apps are built by the auto

00:03:24.856 --> 00:03:26.876 A:middle
maker and work only in vehicles

00:03:26.916 --> 00:03:28.146 A:middle
from that manufacturer.

00:03:28.766 --> 00:03:30.186 A:middle
They can display fully

00:03:30.186 --> 00:03:32.406 A:middle
customized UIs for scenarios

00:03:32.406 --> 00:03:34.076 A:middle
like heating and cooling, seat

00:03:34.106 --> 00:03:35.836 A:middle
controls, and other direct

00:03:35.836 --> 00:03:37.056 A:middle
integrations with the vehicle.

00:03:37.826 --> 00:03:39.376 A:middle
SiriKit integration into these

00:03:39.376 --> 00:03:41.006 A:middle
apps allows you to change all of

00:03:41.006 --> 00:03:43.436 A:middle
these settings with just your

00:03:43.916 --> 00:03:44.000 A:middle
voice.

00:03:45.266 --> 00:03:47.076 A:middle
Last year, we introduced

00:03:47.076 --> 00:03:48.546 A:middle
messaging and VoIP apps to

00:03:48.546 --> 00:03:49.036 A:middle
CarPlay.

00:03:49.586 --> 00:03:51.216 A:middle
Your messaging and VoIP app can

00:03:51.216 --> 00:03:52.406 A:middle
tap into SiriKit.

00:03:52.616 --> 00:03:54.416 A:middle
So, your users can perform many

00:03:54.416 --> 00:03:56.456 A:middle
common messaging tasks while

00:03:56.456 --> 00:03:58.266 A:middle
connected to CarPlay, again,

00:03:58.266 --> 00:03:59.346 A:middle
while staying focused on the

00:03:59.346 --> 00:03:59.656 A:middle
road.


00:04:00.476 --> 00:04:01.656 A:middle
Check out SiriKit for more

00:04:01.656 --> 00:04:03.296 A:middle
details and see our session from

00:04:03.296 --> 00:04:05.196 A:middle
last year, Enabling Your App for

00:04:05.196 --> 00:04:05.646 A:middle
CarPlay.

00:04:06.226 --> 00:04:10.106 A:middle
In a prior release of iOS, we

00:04:10.106 --> 00:04:11.826 A:middle
introduced third party audio

00:04:11.826 --> 00:04:12.796 A:middle
apps to CarPlay.

00:04:13.376 --> 00:04:14.706 A:middle
Audio apps use a template

00:04:14.706 --> 00:04:16.486 A:middle
interface optimized for the car,

00:04:16.646 --> 00:04:18.386 A:middle
where your app provides data and

00:04:18.386 --> 00:04:19.866 A:middle
metadata for the car's screen.

00:04:20.536 --> 00:04:21.636 A:middle
We have some exciting new

00:04:21.636 --> 00:04:23.186 A:middle
performance improvements and

00:04:23.186 --> 00:04:24.616 A:middle
optimizations to share with you

00:04:24.616 --> 00:04:26.086 A:middle
today for audio apps.

00:04:26.616 --> 00:04:29.436 A:middle
And last but not least, today

00:04:29.436 --> 00:04:30.936 A:middle
we're introducing the CarPlay

00:04:30.936 --> 00:04:33.066 A:middle
framework, a brand new iOS

00:04:33.066 --> 00:04:34.446 A:middle
framework for your navigation

00:04:34.446 --> 00:04:35.546 A:middle
apps in CarPlay.

00:04:37.516 --> 00:04:41.500 A:middle
[ Applause ]

00:04:42.566 --> 00:04:44.276 A:middle
Just like with audio apps, iOS

00:04:44.306 --> 00:04:45.846 A:middle
displays your app on the car's

00:04:45.846 --> 00:04:47.356 A:middle
screen and handles the interface

00:04:47.356 --> 00:04:47.926 A:middle
with the car.

00:04:48.446 --> 00:04:50.096 A:middle
Your app doesn't need to worry

00:04:50.126 --> 00:04:51.996 A:middle
about input hardware or many

00:04:51.996 --> 00:04:53.806 A:middle
vehicle specific considerations.

00:04:54.246 --> 00:04:55.746 A:middle
You only need to update your map

00:04:55.796 --> 00:04:57.016 A:middle
tile experience to be

00:04:57.016 --> 00:04:59.106 A:middle
appropriate for the car.

00:04:59.386 --> 00:05:00.866 A:middle
The CarPlay framework provides a


00:04:59.386 --> 00:05:00.866 A:middle
The CarPlay framework provides a

00:05:00.866 --> 00:05:03.406 A:middle
fixed set of UI templates that

00:05:03.406 --> 00:05:04.916 A:middle
iOS renders on the car screen.

00:05:05.736 --> 00:05:07.476 A:middle
Your app decides how to create

00:05:07.476 --> 00:05:08.766 A:middle
and configure these templates

00:05:08.996 --> 00:05:10.406 A:middle
and what actions to take in

00:05:10.406 --> 00:05:12.186 A:middle
response to the user interacting

00:05:12.186 --> 00:05:13.366 A:middle
with your app's templates.

00:05:13.786 --> 00:05:15.186 A:middle
We'll hear much more about the

00:05:15.186 --> 00:05:16.256 A:middle
CarPlay framework, soon.

00:05:16.806 --> 00:05:19.336 A:middle
Back to our CarPlay app

00:05:19.336 --> 00:05:20.886 A:middle
categories, today we'll be

00:05:20.886 --> 00:05:22.156 A:middle
focusing on two of these

00:05:22.156 --> 00:05:23.896 A:middle
categories; audio and

00:05:23.896 --> 00:05:24.626 A:middle
navigation.

00:05:24.986 --> 00:05:26.246 A:middle
Let's start with audio apps.

00:05:26.416 --> 00:05:26.806 A:middle
Albert.

00:05:28.516 --> 00:05:32.500 A:middle
[ Applause ]

00:05:33.506 --> 00:05:34.076 A:middle
&gt;&gt; Thanks, Jonathan.

00:05:35.256 --> 00:05:36.936 A:middle
I'm super stoked to talk to you

00:05:36.936 --> 00:05:38.666 A:middle
all today about CarPlay audio

00:05:38.666 --> 00:05:38.996 A:middle
apps.

00:05:39.176 --> 00:05:40.466 A:middle
We're going to go through a

00:05:40.466 --> 00:05:41.856 A:middle
brief overview of how to get

00:05:41.856 --> 00:05:43.006 A:middle
your audio app set up for

00:05:43.006 --> 00:05:43.496 A:middle
CarPlay.

00:05:44.136 --> 00:05:45.506 A:middle
Some performance improvements

00:05:45.506 --> 00:05:47.166 A:middle
and optimizations we've made for

00:05:47.166 --> 00:05:49.716 A:middle
iOS 12, and some best practices

00:05:49.716 --> 00:05:50.136 A:middle
to make.

00:05:50.136 --> 00:05:51.456 A:middle
And some common scenarios to

00:05:51.456 --> 00:05:53.066 A:middle
account for when developing your

00:05:53.066 --> 00:05:55.676 A:middle
audio app for CarPlay.

00:05:55.776 --> 00:05:58.206 A:middle
Now, driving and audio go hand

00:05:58.206 --> 00:05:58.696 A:middle
in hand.

00:05:58.856 --> 00:06:00.486 A:middle
It's very clear that when you're


00:05:58.856 --> 00:06:00.486 A:middle
It's very clear that when you're

00:06:00.486 --> 00:06:01.976 A:middle
driving you want to listen to

00:06:01.976 --> 00:06:03.576 A:middle
your favorite hits, your

00:06:03.576 --> 00:06:05.566 A:middle
classics, or even stream some

00:06:05.566 --> 00:06:08.076 A:middle
podcast episodes, or listen to

00:06:08.076 --> 00:06:09.676 A:middle
the latest news on radio.

00:06:10.646 --> 00:06:11.936 A:middle
We want to make sure that if

00:06:11.936 --> 00:06:13.046 A:middle
you're developing an audio app

00:06:13.396 --> 00:06:14.396 A:middle
that you want to provide the

00:06:14.466 --> 00:06:16.306 A:middle
best experience to your drivers.

00:06:17.226 --> 00:06:18.756 A:middle
Now, to illustrate this, I want

00:06:18.756 --> 00:06:20.026 A:middle
to let you guys in on a little

00:06:20.026 --> 00:06:20.976 A:middle
side project that I've been

00:06:20.976 --> 00:06:21.506 A:middle
working on.

00:06:21.586 --> 00:06:23.246 A:middle
It's a little app that I think

00:06:23.246 --> 00:06:24.476 A:middle
will be a great hit.

00:06:25.936 --> 00:06:27.186 A:middle
My app is called Srirocka.

00:06:28.706 --> 00:06:30.726 A:middle
It combines two of my most

00:06:30.726 --> 00:06:33.206 A:middle
favorite things; hot sauce and

00:06:33.206 --> 00:06:33.966 A:middle
hot tracks.

00:06:34.476 --> 00:06:36.586 A:middle
And with these synergies I think

00:06:36.586 --> 00:06:38.166 A:middle
it'll be one of the top audio

00:06:38.166 --> 00:06:39.416 A:middle
apps on the App Store when it

00:06:39.416 --> 00:06:39.976 A:middle
launches.

00:06:41.296 --> 00:06:43.006 A:middle
Now, Srirocka is already a fully

00:06:43.006 --> 00:06:45.186 A:middle
functioning audio app and we'll

00:06:45.186 --> 00:06:46.536 A:middle
need to add CarPlay support to

00:06:46.536 --> 00:06:46.696 A:middle
it.

00:06:46.696 --> 00:06:47.836 A:middle
So, let me illustrate how

00:06:47.836 --> 00:06:50.566 A:middle
this'll be done.

00:06:50.766 --> 00:06:52.476 A:middle
Like Jonathan mentioned, CarPlay

00:06:52.516 --> 00:06:53.946 A:middle
uses templates that will

00:06:53.946 --> 00:06:55.196 A:middle
abstract away many of the

00:06:55.196 --> 00:06:56.566 A:middle
different complexities CarPlay

00:06:56.566 --> 00:06:58.826 A:middle
has, such as input methods and

00:06:58.826 --> 00:07:00.196 A:middle
screen sizes, and so on.


00:06:58.826 --> 00:07:00.196 A:middle
screen sizes, and so on.

00:07:00.566 --> 00:07:02.426 A:middle
So, your audio app just needs to

00:07:02.426 --> 00:07:04.036 A:middle
be able to display information

00:07:04.416 --> 00:07:05.766 A:middle
onto the CarPlay display and

00:07:05.766 --> 00:07:06.916 A:middle
provide the best content.

00:07:07.546 --> 00:07:09.076 A:middle
This is, usually, done by using

00:07:09.076 --> 00:07:10.956 A:middle
a table view or tabs, depending

00:07:10.956 --> 00:07:12.216 A:middle
on how you want to present your

00:07:12.216 --> 00:07:12.566 A:middle
data.

00:07:13.826 --> 00:07:14.676 A:middle
You'll need to focus on

00:07:14.676 --> 00:07:15.546 A:middle
delivering the appropriate

00:07:15.546 --> 00:07:16.916 A:middle
content to a CarPlay user.

00:07:17.226 --> 00:07:18.636 A:middle
And if you're already developing

00:07:18.636 --> 00:07:20.516 A:middle
an audio app, it uses existing

00:07:20.516 --> 00:07:21.906 A:middle
APIs you may be already familiar

00:07:21.906 --> 00:07:22.136 A:middle
with.

00:07:22.836 --> 00:07:24.916 A:middle
So, let's take a look at this in

00:07:26.036 --> 00:07:26.226 A:middle
detail.

00:07:26.356 --> 00:07:27.726 A:middle
So, these are the three APIs

00:07:27.726 --> 00:07:28.966 A:middle
that you'll need to know to

00:07:28.966 --> 00:07:30.606 A:middle
launch your app in CarPlay.

00:07:31.576 --> 00:07:32.626 A:middle
If you want to learn more about

00:07:32.626 --> 00:07:34.366 A:middle
this in detail, we had a session

00:07:34.366 --> 00:07:35.476 A:middle
last year that goes through the

00:07:35.476 --> 00:07:36.956 A:middle
details of each single API.

00:07:36.956 --> 00:07:38.146 A:middle
But I'll go through a brief

00:07:38.146 --> 00:07:39.346 A:middle
summary of every single one of

00:07:39.346 --> 00:07:39.636 A:middle
these.

00:07:40.736 --> 00:07:42.036 A:middle
To browse your content on the

00:07:42.036 --> 00:07:43.496 A:middle
CarPlay display, you'll need to

00:07:43.496 --> 00:07:44.936 A:middle
use MPPlayableContent.

00:07:45.456 --> 00:07:47.366 A:middle
MPPlayableContent has a data

00:07:47.366 --> 00:07:48.946 A:middle
source and a delegate, so that

00:07:48.946 --> 00:07:50.226 A:middle
you or your audio app can

00:07:50.226 --> 00:07:51.826 A:middle
populate your app's information

00:07:51.826 --> 00:07:53.056 A:middle
onto the CarPlay display.

00:07:53.486 --> 00:07:55.086 A:middle
As well as a delegate to receive

00:07:55.086 --> 00:07:56.426 A:middle
callbacks whenever the user

00:07:56.426 --> 00:07:57.586 A:middle
selects something on the CarPlay

00:07:57.586 --> 00:07:58.046 A:middle
display.

00:07:59.436 --> 00:08:00.996 A:middle
Now, if you already set Now


00:07:59.436 --> 00:08:00.996 A:middle
Now, if you already set Now

00:08:00.996 --> 00:08:02.446 A:middle
Playing metadata to Control

00:08:02.446 --> 00:08:03.976 A:middle
Center or Lock Screen, or you're

00:08:03.976 --> 00:08:05.196 A:middle
already working on this on your

00:08:05.196 --> 00:08:06.696 A:middle
existing audio app, you're

00:08:06.696 --> 00:08:08.016 A:middle
already familiar with these two

00:08:08.096 --> 00:08:08.576 A:middle
APIs.

00:08:09.816 --> 00:08:12.706 A:middle
MPNowPlayingInfo Center allows

00:08:12.706 --> 00:08:14.006 A:middle
you to populate your now playing

00:08:14.006 --> 00:08:16.016 A:middle
metadata and things such as

00:08:16.016 --> 00:08:17.586 A:middle
title and album artwork and

00:08:17.586 --> 00:08:19.556 A:middle
etcetera onto the CarPlay's now

00:08:19.556 --> 00:08:20.276 A:middle
playing screen.

00:08:20.436 --> 00:08:21.676 A:middle
As well as Control Center and

00:08:21.676 --> 00:08:22.566 A:middle
Lock Screen if you've already

00:08:22.566 --> 00:08:23.176 A:middle
been doing so.

00:08:24.426 --> 00:08:26.006 A:middle
MPRemoteCommandCenter allows

00:08:26.006 --> 00:08:27.436 A:middle
your app to respond to remote

00:08:27.436 --> 00:08:29.246 A:middle
command events, such as the Play

00:08:29.246 --> 00:08:31.046 A:middle
command, Next Track, and so on.

00:08:32.116 --> 00:08:33.346 A:middle
We want to allow your CarPlay

00:08:33.346 --> 00:08:34.966 A:middle
app for a seamless Now Playing

00:08:34.966 --> 00:08:35.655 A:middle
experience.

00:08:35.796 --> 00:08:36.716 A:middle
Now, let's take a look at how

00:08:36.716 --> 00:08:38.885 A:middle
this is done in code.

00:08:39.076 --> 00:08:40.566 A:middle
So, when Srirocka is launched,

00:08:40.566 --> 00:08:41.506 A:middle
I'm going to use Srirocka as an

00:08:41.506 --> 00:08:42.166 A:middle
example, here.

00:08:42.546 --> 00:08:43.606 A:middle
This is what is needed at a

00:08:43.606 --> 00:08:45.226 A:middle
minimum to support CarPlay audio

00:08:45.226 --> 00:08:45.526 A:middle
apps.

00:08:46.036 --> 00:08:47.436 A:middle
Srirocka will provide a data

00:08:47.436 --> 00:08:49.366 A:middle
source and a delegate to

00:08:49.396 --> 00:08:51.086 A:middle
MPPlayableContentManager, so

00:08:51.086 --> 00:08:52.306 A:middle
that Srirocka can provide

00:08:52.406 --> 00:08:53.446 A:middle
information to the CarPlay

00:08:53.446 --> 00:08:55.076 A:middle
display and respond when

00:08:55.076 --> 00:08:55.986 A:middle
absolutely necessary.

00:08:57.436 --> 00:08:59.506 A:middle
Next, I've set

00:08:59.506 --> 00:09:00.916 A:middle
NowPlayingInfoCenter to let


00:08:59.506 --> 00:09:00.916 A:middle
NowPlayingInfoCenter to let

00:09:01.186 --> 00:09:02.756 A:middle
MPNowPlayingInfoCenter know that

00:09:02.756 --> 00:09:03.886 A:middle
my app will be providing

00:09:03.886 --> 00:09:05.386 A:middle
NowPlaying metadata when it

00:09:05.386 --> 00:09:06.386 A:middle
becomes a Now Playing app.

00:09:07.826 --> 00:09:09.506 A:middle
And finally, I've responded to

00:09:09.596 --> 00:09:10.916 A:middle
MPRemoteCommandCenter events.

00:09:10.956 --> 00:09:12.046 A:middle
Specifically, just a Play

00:09:12.046 --> 00:09:13.716 A:middle
command in this case, so that

00:09:14.096 --> 00:09:15.576 A:middle
when Srirocka becomes the Now

00:09:15.576 --> 00:09:16.856 A:middle
Playing app it can respond to

00:09:16.856 --> 00:09:17.476 A:middle
these events.

00:09:18.656 --> 00:09:21.216 A:middle
So, we can see here that the one

00:09:21.216 --> 00:09:23.256 A:middle
API that was needed for CarPlay

00:09:23.256 --> 00:09:24.426 A:middle
is MPPlayableContent.

00:09:24.906 --> 00:09:27.006 A:middle
And for iOS 12, we took a good

00:09:27.006 --> 00:09:28.316 A:middle
look at how to better optimize

00:09:28.316 --> 00:09:30.116 A:middle
this and we can safely say, for

00:09:30.116 --> 00:09:32.006 A:middle
iOS 12, we've remastered

00:09:32.006 --> 00:09:32.826 A:middle
MPPlayableContent.

00:09:34.516 --> 00:09:38.500 A:middle
[ Applause ]

00:09:39.156 --> 00:09:40.836 A:middle
We took a deep dive into

00:09:40.866 --> 00:09:42.566 A:middle
MPPlayableContent and we pushed

00:09:42.566 --> 00:09:43.866 A:middle
for performance improvements in

00:09:43.866 --> 00:09:45.396 A:middle
how the data source and delegate

00:09:45.396 --> 00:09:46.206 A:middle
calls are made.

00:09:47.066 --> 00:09:48.516 A:middle
Without changing your current

00:09:48.516 --> 00:09:49.726 A:middle
audio app's implementation in

00:09:49.726 --> 00:09:51.686 A:middle
CarPlay, we sped up the startup

00:09:51.686 --> 00:09:53.006 A:middle
sequence and provided much

00:09:53.006 --> 00:09:54.336 A:middle
smoother animations whenever

00:09:54.336 --> 00:09:55.546 A:middle
content is changed on the

00:09:55.546 --> 00:09:56.246 A:middle
CarPlay display.

00:09:57.326 --> 00:09:58.746 A:middle
We've also provided much better

00:09:58.746 --> 00:10:00.606 A:middle
communication to your app to


00:09:58.746 --> 00:10:00.606 A:middle
communication to your app to

00:10:00.606 --> 00:10:02.046 A:middle
anticipate whatever the user may

00:10:02.046 --> 00:10:03.736 A:middle
want to play or to browse on the

00:10:03.736 --> 00:10:04.506 A:middle
CarPlay display.

00:10:05.726 --> 00:10:06.876 A:middle
Now, there's lots of room to

00:10:06.876 --> 00:10:08.076 A:middle
improve on your audio app.

00:10:08.216 --> 00:10:09.226 A:middle
And let's see how we can do

00:10:09.226 --> 00:10:09.566 A:middle
this.

00:10:09.756 --> 00:10:11.006 A:middle
The first of which, is that we

00:10:11.006 --> 00:10:12.306 A:middle
looked into the implementation

00:10:12.306 --> 00:10:13.206 A:middle
of reloadData.

00:10:13.356 --> 00:10:14.186 A:middle
Which, is a call in

00:10:14.316 --> 00:10:15.656 A:middle
MPPlayableContent, and figured

00:10:15.656 --> 00:10:17.246 A:middle
out how to better optimize this

00:10:17.246 --> 00:10:18.286 A:middle
for your audio app.

00:10:19.076 --> 00:10:21.276 A:middle
What we found is that you should

00:10:21.276 --> 00:10:22.876 A:middle
really only call reloadData when

00:10:22.916 --> 00:10:23.956 A:middle
absolutely needed.

00:10:24.756 --> 00:10:26.236 A:middle
What it does is that it

00:10:26.236 --> 00:10:27.976 A:middle
deconstructs the entire apps'

00:10:27.976 --> 00:10:29.556 A:middle
hierarchy on the CarPlay display

00:10:29.836 --> 00:10:31.306 A:middle
and asks your audio app to

00:10:31.306 --> 00:10:32.636 A:middle
reconstruct everything again.

00:10:32.816 --> 00:10:34.056 A:middle
And this can be a very expensive

00:10:34.056 --> 00:10:35.706 A:middle
operation, leaving your app not

00:10:35.706 --> 00:10:36.486 A:middle
very responsive.

00:10:37.806 --> 00:10:38.996 A:middle
Instead, if you just have

00:10:38.996 --> 00:10:40.216 A:middle
content that just needs to be

00:10:40.216 --> 00:10:41.436 A:middle
updated, you should wrap them

00:10:41.436 --> 00:10:42.366 A:middle
together inside of a

00:10:42.366 --> 00:10:44.216 A:middle
beginUpdates and an endUpdates

00:10:44.216 --> 00:10:45.866 A:middle
call, so then that content can

00:10:45.866 --> 00:10:47.006 A:middle
be updated, appropriately.

00:10:48.356 --> 00:10:50.596 A:middle
Now, these calls that

00:10:50.596 --> 00:10:52.036 A:middle
MPPlayableContent has are

00:10:52.096 --> 00:10:53.636 A:middle
asynchronous operations when we

00:10:53.636 --> 00:10:55.006 A:middle
ask you app for your data.

00:10:55.436 --> 00:10:56.976 A:middle
So, keep an internal

00:10:56.976 --> 00:10:58.746 A:middle
representation or a cache of

00:10:58.746 --> 00:11:00.876 A:middle
your information on somewhere in


00:10:58.746 --> 00:11:00.876 A:middle
your information on somewhere in

00:11:00.876 --> 00:11:01.196 A:middle
your app.

00:11:01.426 --> 00:11:02.536 A:middle
So, then that when we ask for

00:11:02.536 --> 00:11:03.766 A:middle
your content information you're

00:11:03.766 --> 00:11:05.206 A:middle
able to provide us information

00:11:05.456 --> 00:11:06.826 A:middle
quickly and makes your app

00:11:06.826 --> 00:11:07.406 A:middle
responsive.

00:11:08.886 --> 00:11:10.416 A:middle
Next, let's discuss some ways to

00:11:10.416 --> 00:11:12.036 A:middle
further optimize your audio

00:11:12.036 --> 00:11:13.136 A:middle
app's performance in CarPlay.

00:11:14.426 --> 00:11:16.456 A:middle
So, Srirocka, already, has a bit

00:11:16.456 --> 00:11:17.626 A:middle
of an implementation and is

00:11:17.626 --> 00:11:18.556 A:middle
partially implemented.

00:11:18.556 --> 00:11:19.986 A:middle
And the user has decided to make

00:11:19.986 --> 00:11:21.386 A:middle
a selection on the Heating

00:11:21.386 --> 00:11:22.486 A:middle
Habaneros playlist.

00:11:22.686 --> 00:11:24.666 A:middle
It is one of the top playlists

00:11:24.666 --> 00:11:25.426 A:middle
that's super-hot.

00:11:26.276 --> 00:11:28.246 A:middle
But it seems to be stuck

00:11:28.246 --> 00:11:28.616 A:middle
loading.

00:11:28.616 --> 00:11:29.676 A:middle
We're not entirely sure what's

00:11:29.676 --> 00:11:30.346 A:middle
going on, here.

00:11:30.716 --> 00:11:32.046 A:middle
And CarPlay, actually, will

00:11:32.046 --> 00:11:33.486 A:middle
timeout if the app doesn't

00:11:33.486 --> 00:11:34.646 A:middle
provide content in time.

00:11:34.916 --> 00:11:35.796 A:middle
Because it doesn't call

00:11:35.796 --> 00:11:36.856 A:middle
completion handlers or just

00:11:36.856 --> 00:11:37.906 A:middle
simply isn't returning its

00:11:37.906 --> 00:11:38.496 A:middle
information.

00:11:38.716 --> 00:11:40.486 A:middle
But what's going on, on the

00:11:40.486 --> 00:11:41.016 A:middle
phone, here?

00:11:42.266 --> 00:11:44.166 A:middle
So, CarPlay users are, usually,

00:11:44.166 --> 00:11:46.066 A:middle
driving in areas where there's

00:11:46.066 --> 00:11:47.986 A:middle
not a speedy connection or their

00:11:47.986 --> 00:11:48.716 A:middle
screen is locked.

00:11:49.096 --> 00:11:50.666 A:middle
A vast majority of CarPlay users

00:11:50.666 --> 00:11:51.716 A:middle
are driving with the screen

00:11:51.716 --> 00:11:52.776 A:middle
locked and with a passcode.

00:11:52.926 --> 00:11:53.986 A:middle
After all, they're driving.

00:11:55.456 --> 00:11:57.016 A:middle
If your app has data protection

00:11:57.016 --> 00:11:58.466 A:middle
policies that are dependent on

00:11:58.466 --> 00:12:00.256 A:middle
the phone being unlocked, you


00:11:58.466 --> 00:12:00.256 A:middle
the phone being unlocked, you

00:12:00.256 --> 00:12:01.336 A:middle
won't be able to access your

00:12:01.336 --> 00:12:02.496 A:middle
app's information and,

00:12:02.606 --> 00:12:03.726 A:middle
ultimately, CarPlay will

00:12:03.726 --> 00:12:04.226 A:middle
timeout.

00:12:04.676 --> 00:12:06.196 A:middle
So, if your data needs to be

00:12:06.196 --> 00:12:07.106 A:middle
accessed while the phone is

00:12:07.106 --> 00:12:08.536 A:middle
unlocked, you'll need to audit

00:12:08.536 --> 00:12:10.066 A:middle
your app's data intergradation

00:12:10.066 --> 00:12:10.616 A:middle
policies.

00:12:12.466 --> 00:12:16.526 A:middle
The other issue is that you may

00:12:16.526 --> 00:12:18.246 A:middle
be driving in areas, or CarPlay

00:12:18.246 --> 00:12:19.686 A:middle
users are driving in areas with

00:12:19.686 --> 00:12:20.756 A:middle
little to no cellular

00:12:20.756 --> 00:12:21.406 A:middle
network-tivity [phonetic].

00:12:22.436 --> 00:12:23.776 A:middle
Drivers are driving everywhere,

00:12:23.776 --> 00:12:25.806 A:middle
from the country roads and rural

00:12:25.806 --> 00:12:27.146 A:middle
areas, to big cities.

00:12:27.396 --> 00:12:30.876 A:middle
And these are very varied areas

00:12:30.876 --> 00:12:31.976 A:middle
with different CarPlay,

00:12:32.236 --> 00:12:33.666 A:middle
different data service.

00:12:33.726 --> 00:12:35.286 A:middle
And you need to test for

00:12:35.286 --> 00:12:36.476 A:middle
situations that are not just the

00:12:36.476 --> 00:12:37.476 A:middle
constant WIFI network

00:12:37.476 --> 00:12:37.926 A:middle
connection.

00:12:39.086 --> 00:12:40.656 A:middle
Now, Srirocka does account for

00:12:40.656 --> 00:12:41.546 A:middle
all of this, as well.

00:12:41.546 --> 00:12:43.566 A:middle
But it uses some very advanced

00:12:43.566 --> 00:12:45.816 A:middle
machine learning to see what are

00:12:45.816 --> 00:12:46.686 A:middle
the hottest tracks.

00:12:46.686 --> 00:12:48.006 A:middle
And after all, all of this

00:12:48.006 --> 00:12:49.586 A:middle
happens on device, since privacy

00:12:49.586 --> 00:12:50.666 A:middle
is a very important issue.

00:12:50.936 --> 00:12:52.056 A:middle
And this just takes some time to

00:12:52.056 --> 00:12:52.656 A:middle
process.

00:12:53.286 --> 00:12:54.516 A:middle
Well, what happens in this case?

00:12:55.046 --> 00:12:57.186 A:middle
We have an API called

00:12:57.266 --> 00:12:58.676 A:middle
beginLoadingChildItems at

00:12:58.676 --> 00:13:00.546 A:middle
indexPath to initiate fetching


00:12:58.676 --> 00:13:00.546 A:middle
indexPath to initiate fetching

00:13:00.546 --> 00:13:01.046 A:middle
content.

00:13:01.906 --> 00:13:04.006 A:middle
This API will be called whenever

00:13:04.006 --> 00:13:05.316 A:middle
any of your index paths are

00:13:05.316 --> 00:13:06.856 A:middle
visible on the CarPlay display.

00:13:07.036 --> 00:13:08.406 A:middle
So, when the user is scrolling

00:13:08.406 --> 00:13:10.106 A:middle
through table cells or selecting

00:13:10.106 --> 00:13:10.906 A:middle
different tabs,

00:13:11.596 --> 00:13:12.946 A:middle
beginLoadingChildItems will be

00:13:12.946 --> 00:13:14.366 A:middle
called for every single index

00:13:14.366 --> 00:13:15.666 A:middle
path that shows on the display.

00:13:17.126 --> 00:13:18.626 A:middle
This gives your app a chance to

00:13:18.626 --> 00:13:20.136 A:middle
start loading before the user,

00:13:20.136 --> 00:13:21.536 A:middle
actually, selects the content.

00:13:22.436 --> 00:13:23.896 A:middle
And here's a code example inside

00:13:23.896 --> 00:13:26.036 A:middle
of Srirocka, where when the user

00:13:26.346 --> 00:13:28.116 A:middle
sees that the Heating Habaneros

00:13:28.116 --> 00:13:29.396 A:middle
playlist is visible on the

00:13:29.396 --> 00:13:31.086 A:middle
CarPlay display, we start

00:13:31.086 --> 00:13:32.726 A:middle
processing that playlist.

00:13:32.726 --> 00:13:33.876 A:middle
And when the user makes a

00:13:33.876 --> 00:13:35.426 A:middle
selection, will have either been

00:13:35.426 --> 00:13:36.496 A:middle
midway through the network

00:13:36.496 --> 00:13:39.036 A:middle
request or ready to go and able

00:13:39.036 --> 00:13:39.946 A:middle
to provide content.

00:13:41.176 --> 00:13:42.906 A:middle
So, let's take a look at some

00:13:42.906 --> 00:13:45.446 A:middle
app scenarios that may occur

00:13:45.766 --> 00:13:47.106 A:middle
when developing your app for

00:13:47.106 --> 00:13:47.516 A:middle
CarPlay.

00:13:48.776 --> 00:13:50.226 A:middle
Now, Srirocka provides a very

00:13:50.346 --> 00:13:52.926 A:middle
rich user experience when logged

00:13:52.926 --> 00:13:53.176 A:middle
out.

00:13:53.426 --> 00:13:54.646 A:middle
It's very clear here, with

00:13:54.816 --> 00:13:56.436 A:middle
beautiful typography and great

00:13:56.436 --> 00:13:58.826 A:middle
graphic design, that the user is

00:13:58.826 --> 00:14:00.246 A:middle
logged out and will need to log


00:13:58.826 --> 00:14:00.246 A:middle
logged out and will need to log

00:14:00.246 --> 00:14:00.496 A:middle
in.

00:14:01.526 --> 00:14:02.356 A:middle
But how does this look on

00:14:02.356 --> 00:14:02.836 A:middle
CarPlay?

00:14:04.136 --> 00:14:05.376 A:middle
Well, Srirocka, actually,

00:14:05.376 --> 00:14:06.716 A:middle
doesn't provide data when logged

00:14:06.716 --> 00:14:07.066 A:middle
out.

00:14:07.066 --> 00:14:08.986 A:middle
And this leads to a very poor

00:14:08.986 --> 00:14:10.026 A:middle
user experience.

00:14:10.266 --> 00:14:11.286 A:middle
The user doesn't really know

00:14:11.286 --> 00:14:13.226 A:middle
what's going on here and isn't

00:14:13.296 --> 00:14:15.716 A:middle
able to interact with your app.

00:14:16.666 --> 00:14:17.726 A:middle
You should make sure that you

00:14:17.726 --> 00:14:19.036 A:middle
should provide some type of

00:14:19.116 --> 00:14:20.966 A:middle
experience, so that the user can

00:14:21.126 --> 00:14:22.346 A:middle
at least interact with your app,

00:14:22.496 --> 00:14:23.826 A:middle
even if your app is logged out.

00:14:24.206 --> 00:14:25.456 A:middle
So, this leads to a very good

00:14:25.456 --> 00:14:26.936 A:middle
user experience for your audio

00:14:28.206 --> 00:14:28.286 A:middle
app.

00:14:28.556 --> 00:14:30.366 A:middle
So, wrapping all this up, we can

00:14:30.366 --> 00:14:31.696 A:middle
say that CarPlay audio apps have

00:14:31.696 --> 00:14:32.596 A:middle
its greatest hits.

00:14:33.676 --> 00:14:35.766 A:middle
MPPlayableContent allows your

00:14:35.766 --> 00:14:37.086 A:middle
app to provide templates to the

00:14:37.086 --> 00:14:38.686 A:middle
CarPlay display so that your app

00:14:38.686 --> 00:14:40.586 A:middle
can provide users a good user

00:14:40.586 --> 00:14:41.516 A:middle
experience to the CarPlay

00:14:41.516 --> 00:14:41.946 A:middle
display.

00:14:42.966 --> 00:14:43.916 A:middle
You should account for real

00:14:43.916 --> 00:14:45.096 A:middle
world scenarios, such as when

00:14:45.096 --> 00:14:46.556 A:middle
your app is logged out or your

00:14:46.556 --> 00:14:48.326 A:middle
screen is locked, so then that

00:14:48.326 --> 00:14:49.506 A:middle
your app can still function

00:14:49.506 --> 00:14:50.476 A:middle
beautifully in CarPlay.

00:14:51.756 --> 00:14:53.626 A:middle
And with iOS 12, we made some

00:14:53.626 --> 00:14:54.836 A:middle
great optimizations and

00:14:54.836 --> 00:14:56.366 A:middle
performance improvements to make

00:14:56.366 --> 00:14:57.826 A:middle
your app even better in CarPlay.

00:14:58.146 --> 00:14:59.126 A:middle
So, you should run your app

00:14:59.126 --> 00:15:00.516 A:middle
again and see if there's any


00:14:59.126 --> 00:15:00.516 A:middle
again and see if there's any

00:15:00.516 --> 00:15:01.636 A:middle
performance improvements you can

00:15:01.636 --> 00:15:02.706 A:middle
make to your app, to make it

00:15:02.706 --> 00:15:03.196 A:middle
even better.

00:15:04.386 --> 00:15:05.626 A:middle
Now, to make us sure that we're

00:15:05.626 --> 00:15:06.916 A:middle
steering in the right direction,

00:15:07.046 --> 00:15:08.226 A:middle
I'd like to invite my colleague,

00:15:08.226 --> 00:15:09.866 A:middle
Mike, to talk about navigating

00:15:09.866 --> 00:15:10.656 A:middle
with the CarPlay framework.

00:15:10.886 --> 00:15:11.366 A:middle
Thank you.

00:15:12.516 --> 00:15:16.500 A:middle
[ Applause ]

00:15:17.096 --> 00:15:17.466 A:middle
&gt;&gt; All right.

00:15:17.676 --> 00:15:18.356 A:middle
Thank you, Albert.

00:15:19.356 --> 00:15:20.796 A:middle
I am thrilled to share with you,

00:15:20.796 --> 00:15:22.246 A:middle
today, how to add CarPlay

00:15:22.246 --> 00:15:24.406 A:middle
support to your navigation apps.

00:15:24.966 --> 00:15:27.686 A:middle
Navigation is such a huge part

00:15:27.686 --> 00:15:29.466 A:middle
of the CarPlay experience and

00:15:29.466 --> 00:15:31.556 A:middle
your users will be so happy to

00:15:31.556 --> 00:15:33.176 A:middle
see their favorite apps on the

00:15:33.176 --> 00:15:33.726 A:middle
car screen.

00:15:34.926 --> 00:15:36.016 A:middle
As Jonathan and Albert have

00:15:36.016 --> 00:15:37.456 A:middle
previously mentioned, we've

00:15:37.456 --> 00:15:39.056 A:middle
employed a template based

00:15:39.056 --> 00:15:40.206 A:middle
approach for previous app

00:15:40.206 --> 00:15:40.896 A:middle
categories.

00:15:40.896 --> 00:15:42.946 A:middle
Your apps have been able to

00:15:42.946 --> 00:15:45.036 A:middle
provide data and metadata that

00:15:45.036 --> 00:15:46.386 A:middle
iOS will display on the car

00:15:46.386 --> 00:15:47.626 A:middle
screen and manage these

00:15:47.626 --> 00:15:48.826 A:middle
interactions on your app's

00:15:48.826 --> 00:15:49.246 A:middle
behalf.

00:15:49.486 --> 00:15:51.456 A:middle
And this has worked extremely

00:15:51.456 --> 00:15:51.836 A:middle
well.

00:15:52.546 --> 00:15:54.416 A:middle
But, we realize that navigation

00:15:54.416 --> 00:15:56.136 A:middle
apps are a little bit different.

00:15:56.816 --> 00:15:59.716 A:middle
Your apps have beautiful maps.


00:16:00.156 --> 00:16:01.376 A:middle
And such incredible and

00:16:01.376 --> 00:16:02.276 A:middle
immersive navigation

00:16:02.276 --> 00:16:02.916 A:middle
experiences.

00:16:03.376 --> 00:16:04.646 A:middle
And your users will expect to

00:16:04.646 --> 00:16:06.306 A:middle
see that on the car screen.

00:16:07.206 --> 00:16:09.356 A:middle
So, new in iOS 12, we're

00:16:09.356 --> 00:16:10.576 A:middle
introducing the CarPlay

00:16:10.576 --> 00:16:11.096 A:middle
framework.

00:16:11.716 --> 00:16:13.436 A:middle
The CarPlay framework is your

00:16:13.436 --> 00:16:15.196 A:middle
toolkit for building great

00:16:15.426 --> 00:16:17.216 A:middle
interactive experiences on the

00:16:17.216 --> 00:16:17.916 A:middle
car screen.

00:16:18.096 --> 00:16:20.246 A:middle
It uses a fixed set of template

00:16:20.246 --> 00:16:21.926 A:middle
objects that your apps can build

00:16:21.926 --> 00:16:23.726 A:middle
and use, and that iOS will

00:16:23.726 --> 00:16:25.766 A:middle
translate into a UI presented on

00:16:25.766 --> 00:16:26.556 A:middle
top of your app.

00:16:27.686 --> 00:16:28.916 A:middle
With this and a little bit of

00:16:28.916 --> 00:16:30.916 A:middle
effort on your part, your apps

00:16:30.916 --> 00:16:32.686 A:middle
will support all CarPlay

00:16:32.686 --> 00:16:33.236 A:middle
systems.

00:16:34.106 --> 00:16:35.606 A:middle
So, let's take a look at an app

00:16:35.606 --> 00:16:36.156 A:middle
in CarPlay.

00:16:36.906 --> 00:16:37.776 A:middle
We've been building our own

00:16:37.776 --> 00:16:39.226 A:middle
navigation app that we call

00:16:39.226 --> 00:16:40.166 A:middle
Country Roads.

00:16:40.506 --> 00:16:41.636 A:middle
It takes us to our favorite

00:16:41.636 --> 00:16:43.276 A:middle
destinations using the scenic

00:16:43.276 --> 00:16:43.496 A:middle
route.

00:16:44.056 --> 00:16:45.216 A:middle
And let's see what it looks like

00:16:45.216 --> 00:16:45.816 A:middle
on CarPlay.

00:16:47.216 --> 00:16:48.436 A:middle
We're looking at the CarPlay

00:16:48.436 --> 00:16:49.626 A:middle
home screen and you can see our

00:16:49.626 --> 00:16:51.266 A:middle
Country Roads app icon right

00:16:51.266 --> 00:16:52.486 A:middle
there with the rest of the apps

00:16:52.486 --> 00:16:53.096 A:middle
on iOS.

00:16:53.976 --> 00:16:55.566 A:middle
As we launch it, the first thing

00:16:55.566 --> 00:16:57.186 A:middle
you'll be greeted with is our

00:16:57.186 --> 00:16:58.356 A:middle
beautiful map tiles.

00:16:59.226 --> 00:17:00.496 A:middle
When connected to CarPlay, a


00:16:59.226 --> 00:17:00.496 A:middle
When connected to CarPlay, a

00:17:00.496 --> 00:17:01.826 A:middle
navigation app will be given a

00:17:01.826 --> 00:17:03.276 A:middle
window to draw content on the

00:17:03.276 --> 00:17:03.846 A:middle
car screen.

00:17:04.406 --> 00:17:06.576 A:middle
This window is your canvas for

00:17:06.576 --> 00:17:08.156 A:middle
displaying all that beautiful

00:17:08.215 --> 00:17:09.955 A:middle
noninteractive mapping and

00:17:09.955 --> 00:17:11.316 A:middle
navigation related content.

00:17:12.286 --> 00:17:14.086 A:middle
Then, as the app used templates

00:17:14.396 --> 00:17:16.136 A:middle
iOS will take those templates

00:17:16.136 --> 00:17:17.626 A:middle
and translate it into a UI

00:17:17.626 --> 00:17:19.606 A:middle
presented on top of your app.

00:17:20.326 --> 00:17:21.116 A:middle
So, let's take a look at the

00:17:21.116 --> 00:17:23.296 A:middle
code on what happens when your

00:17:23.296 --> 00:17:24.316 A:middle
app is connected to CarPlay.

00:17:25.746 --> 00:17:26.496 A:middle
The first thing you'll need to

00:17:26.496 --> 00:17:28.195 A:middle
note is that your application

00:17:28.195 --> 00:17:30.086 A:middle
delegate will need to conform to

00:17:30.086 --> 00:17:31.756 A:middle
the CarPlay application delegate

00:17:31.756 --> 00:17:33.466 A:middle
protocol, CP Application

00:17:33.466 --> 00:17:33.846 A:middle
Delegate.

00:17:35.106 --> 00:17:36.736 A:middle
One function in that protocol is

00:17:36.736 --> 00:17:38.496 A:middle
application didConnectCar

00:17:38.496 --> 00:17:40.106 A:middle
InterfaceController to window.

00:17:41.136 --> 00:17:42.426 A:middle
This function will provide two

00:17:42.426 --> 00:17:43.806 A:middle
very important objects to your

00:17:43.806 --> 00:17:44.216 A:middle
apps.

00:17:44.756 --> 00:17:46.396 A:middle
The first is an instance of

00:17:46.496 --> 00:17:47.846 A:middle
CPInterfaceController.

00:17:48.776 --> 00:17:50.416 A:middle
CPInterfaceController is your

00:17:50.416 --> 00:17:51.876 A:middle
connection to the template world

00:17:52.186 --> 00:17:53.276 A:middle
and what your apps will use to

00:17:53.276 --> 00:17:54.656 A:middle
manage what is displaying on the

00:17:54.656 --> 00:17:55.176 A:middle
car screen.

00:17:56.066 --> 00:17:57.096 A:middle
Additionally, you're given the

00:17:57.096 --> 00:17:58.426 A:middle
window I just mentioned, which

00:17:58.426 --> 00:17:59.686 A:middle
is where you can draw all your

00:17:59.686 --> 00:18:00.486 A:middle
mapping content.


00:17:59.686 --> 00:18:00.486 A:middle
mapping content.

00:18:01.376 --> 00:18:02.836 A:middle
You want to be sure to keep a

00:18:02.836 --> 00:18:03.776 A:middle
reference to both of these

00:18:03.776 --> 00:18:05.106 A:middle
objects throughout the duration

00:18:05.106 --> 00:18:05.986 A:middle
of the CarPlay session.

00:18:07.286 --> 00:18:08.786 A:middle
Next, you can create a new view

00:18:08.786 --> 00:18:10.236 A:middle
controller to populate that

00:18:10.236 --> 00:18:11.746 A:middle
window with content and assign

00:18:11.746 --> 00:18:12.906 A:middle
it to windows review controller.

00:18:13.296 --> 00:18:14.736 A:middle
And then, create a root

00:18:14.736 --> 00:18:15.166 A:middle
template.

00:18:15.416 --> 00:18:16.456 A:middle
And using that interface

00:18:16.456 --> 00:18:17.406 A:middle
controller object, you can

00:18:17.406 --> 00:18:18.696 A:middle
setRootTemplate on the car

00:18:18.696 --> 00:18:19.036 A:middle
screen.

00:18:19.806 --> 00:18:21.376 A:middle
So, let's talk about some of

00:18:21.376 --> 00:18:22.136 A:middle
these templates that are

00:18:22.136 --> 00:18:23.336 A:middle
available in the CarPlay

00:18:23.336 --> 00:18:23.826 A:middle
framework.

00:18:24.146 --> 00:18:26.156 A:middle
And we'll start with one you've

00:18:26.156 --> 00:18:27.816 A:middle
already seen and where your

00:18:27.816 --> 00:18:29.276 A:middle
users will spend a majority of

00:18:29.276 --> 00:18:29.856 A:middle
their time.

00:18:30.186 --> 00:18:31.956 A:middle
And that is on the map template.

00:18:33.016 --> 00:18:34.476 A:middle
The map template is unique from

00:18:34.476 --> 00:18:35.626 A:middle
all the other templates in that

00:18:35.626 --> 00:18:37.426 A:middle
it is transparent to your app

00:18:37.476 --> 00:18:37.916 A:middle
window.

00:18:38.566 --> 00:18:40.356 A:middle
So, the content that you draw on

00:18:40.356 --> 00:18:42.136 A:middle
that window will be displayed

00:18:42.206 --> 00:18:43.526 A:middle
underneath the content provided

00:18:43.526 --> 00:18:44.396 A:middle
by the map template.

00:18:45.186 --> 00:18:46.256 A:middle
The map template can be

00:18:46.256 --> 00:18:47.676 A:middle
configured in a few different

00:18:47.676 --> 00:18:48.176 A:middle
places.

00:18:48.616 --> 00:18:49.646 A:middle
You can place buttons in the

00:18:49.646 --> 00:18:50.446 A:middle
navigation bar.

00:18:51.076 --> 00:18:52.946 A:middle
You can place up to four; two on

00:18:52.946 --> 00:18:54.966 A:middle
the leading side and two on the

00:18:54.966 --> 00:18:55.606 A:middle
trailing side.

00:18:56.246 --> 00:18:57.836 A:middle
These are instances of

00:18:58.006 --> 00:19:00.216 A:middle
CPBarButton and are created


00:18:58.006 --> 00:19:00.216 A:middle
CPBarButton and are created

00:19:00.216 --> 00:19:02.526 A:middle
either with text or images and

00:19:02.526 --> 00:19:04.046 A:middle
are automatically sized and

00:19:04.046 --> 00:19:05.296 A:middle
styled by the system.

00:19:06.086 --> 00:19:08.186 A:middle
There's no notion of predefined

00:19:08.186 --> 00:19:09.536 A:middle
button actions in the CarPlay

00:19:09.536 --> 00:19:10.006 A:middle
framework.

00:19:10.366 --> 00:19:11.696 A:middle
But when you create a button,

00:19:11.696 --> 00:19:13.046 A:middle
you provide a custom action

00:19:13.046 --> 00:19:13.506 A:middle
handler.

00:19:13.836 --> 00:19:15.176 A:middle
And when the user interacts with

00:19:15.176 --> 00:19:16.716 A:middle
your button on the car screen

00:19:17.286 --> 00:19:18.566 A:middle
your custom action handler will

00:19:18.566 --> 00:19:20.386 A:middle
be called in your app.

00:19:20.806 --> 00:19:22.166 A:middle
You may also place up to four

00:19:22.166 --> 00:19:23.936 A:middle
buttons that appear above your

00:19:23.936 --> 00:19:24.626 A:middle
map window.

00:19:25.126 --> 00:19:26.476 A:middle
And these are map buttons.

00:19:26.856 --> 00:19:27.786 A:middle
You can create them with an

00:19:27.786 --> 00:19:29.526 A:middle
image, and unlike the bar

00:19:29.526 --> 00:19:31.366 A:middle
buttons, these are not styled by

00:19:31.366 --> 00:19:31.756 A:middle
the system.

00:19:32.656 --> 00:19:34.646 A:middle
The map template is also home to

00:19:34.646 --> 00:19:36.546 A:middle
a lot of other mapping and

00:19:36.546 --> 00:19:37.416 A:middle
navigational related

00:19:37.416 --> 00:19:38.056 A:middle
functionality.

00:19:38.496 --> 00:19:40.096 A:middle
Such as panning the map,

00:19:41.166 --> 00:19:42.666 A:middle
providing important contextual

00:19:42.666 --> 00:19:44.096 A:middle
information to your users using

00:19:44.096 --> 00:19:45.226 A:middle
navigation alerts.

00:19:45.716 --> 00:19:47.296 A:middle
And of course, turn by turn

00:19:47.386 --> 00:19:47.946 A:middle
guidance.

00:19:48.736 --> 00:19:49.426 A:middle
We're going to talk about

00:19:49.426 --> 00:19:50.416 A:middle
guidance in a little bit.

00:19:50.826 --> 00:19:51.826 A:middle
So, let's get started by going

00:19:51.826 --> 00:19:53.796 A:middle
over panning and navigation

00:19:53.796 --> 00:19:54.246 A:middle
alerts.

00:19:54.936 --> 00:19:56.596 A:middle
If your app supports panning the

00:19:56.596 --> 00:19:58.866 A:middle
map, we require that you present

00:19:58.866 --> 00:20:00.386 A:middle
a button on the map template,


00:19:58.866 --> 00:20:00.386 A:middle
a button on the map template,

00:20:00.806 --> 00:20:02.636 A:middle
either in the navigation bar or

00:20:02.636 --> 00:20:05.336 A:middle
as a map button that enters pan

00:20:05.336 --> 00:20:05.596 A:middle
mode.

00:20:06.406 --> 00:20:07.766 A:middle
When a map template enters pan

00:20:07.766 --> 00:20:09.146 A:middle
mode it will display four

00:20:09.146 --> 00:20:10.376 A:middle
directional buttons that your

00:20:10.376 --> 00:20:12.066 A:middle
users can interact with and are

00:20:12.066 --> 00:20:13.906 A:middle
translated into an API, where

00:20:13.906 --> 00:20:15.346 A:middle
your app only needs to know

00:20:15.346 --> 00:20:16.596 A:middle
which direction to pan the map.

00:20:17.526 --> 00:20:18.596 A:middle
This is an example of how the

00:20:18.596 --> 00:20:20.186 A:middle
CarPlay framework has abstracted

00:20:20.186 --> 00:20:21.366 A:middle
away a lot of the complexities

00:20:21.646 --> 00:20:22.746 A:middle
of all the various CarPlay

00:20:22.746 --> 00:20:23.266 A:middle
systems.

00:20:23.966 --> 00:20:25.056 A:middle
These buttons can be interacted

00:20:25.056 --> 00:20:27.056 A:middle
with using touch, both high

00:20:27.056 --> 00:20:28.506 A:middle
latency and low latency

00:20:28.506 --> 00:20:29.066 A:middle
touchscreens.

00:20:29.746 --> 00:20:31.686 A:middle
Using a rotary knob or touchpad

00:20:31.686 --> 00:20:33.126 A:middle
to select one of these buttons.

00:20:33.786 --> 00:20:35.016 A:middle
And additionally, for CarPlay

00:20:35.016 --> 00:20:36.876 A:middle
systems that have a rotary knob

00:20:37.246 --> 00:20:38.876 A:middle
that also supports joystick of

00:20:38.876 --> 00:20:40.736 A:middle
directional movement, those same

00:20:40.736 --> 00:20:41.926 A:middle
movements will be translated

00:20:41.926 --> 00:20:42.556 A:middle
into this API.

00:20:42.916 --> 00:20:44.216 A:middle
Your app does not need to worry

00:20:44.216 --> 00:20:45.596 A:middle
about where it came from.

00:20:46.116 --> 00:20:48.396 A:middle
While your users are driving,

00:20:48.756 --> 00:20:49.616 A:middle
you may want to present

00:20:49.616 --> 00:20:51.766 A:middle
information to them, such as a

00:20:51.766 --> 00:20:53.616 A:middle
road closure ahead or maybe, a

00:20:53.616 --> 00:20:54.866 A:middle
better route is available.

00:20:55.306 --> 00:20:56.966 A:middle
For this, you can use navigation

00:20:56.966 --> 00:20:57.586 A:middle
alerts.

00:20:58.206 --> 00:21:00.016 A:middle
Navigation alerts present on the


00:20:58.206 --> 00:21:00.016 A:middle
Navigation alerts present on the

00:21:00.016 --> 00:21:01.326 A:middle
map template and can be

00:21:01.326 --> 00:21:02.676 A:middle
configured with a title,

00:21:02.906 --> 00:21:05.916 A:middle
subtitle, image, primary and

00:21:05.916 --> 00:21:07.426 A:middle
secondary action, and if it

00:21:07.426 --> 00:21:08.466 A:middle
makes sense, you can use a

00:21:08.466 --> 00:21:10.106 A:middle
dismiss interval after which the

00:21:10.106 --> 00:21:11.596 A:middle
alert will self-dismiss.

00:21:12.106 --> 00:21:14.736 A:middle
Let's take a look at some code

00:21:14.736 --> 00:21:16.046 A:middle
on how we built our root

00:21:16.046 --> 00:21:16.366 A:middle
template.

00:21:16.606 --> 00:21:18.916 A:middle
And let's add a new button for a

00:21:18.916 --> 00:21:20.036 A:middle
missing feature on our Country

00:21:20.036 --> 00:21:22.266 A:middle
Roads app.

00:21:22.516 --> 00:21:23.666 A:middle
Since this was our function that

00:21:23.666 --> 00:21:24.706 A:middle
created out root template, the

00:21:24.706 --> 00:21:26.106 A:middle
first thing we're going to do is

00:21:26.106 --> 00:21:27.296 A:middle
create an instance of

00:21:27.296 --> 00:21:28.396 A:middle
CPMapTemplate.

00:21:28.976 --> 00:21:31.416 A:middle
We will then create a new button

00:21:31.526 --> 00:21:32.256 A:middle
for a missing feature.

00:21:33.606 --> 00:21:34.536 A:middle
One of the great things about

00:21:34.536 --> 00:21:36.096 A:middle
Country Roads is that our users

00:21:36.096 --> 00:21:37.256 A:middle
can search for their favorite

00:21:37.256 --> 00:21:37.836 A:middle
categories.

00:21:38.616 --> 00:21:39.826 A:middle
And we'll add a new button for

00:21:39.826 --> 00:21:40.036 A:middle
that.

00:21:40.226 --> 00:21:41.546 A:middle
So, let's create a CPBarButton

00:21:41.546 --> 00:21:42.406 A:middle
of type Image.

00:21:42.896 --> 00:21:44.396 A:middle
And in its custom action handler

00:21:44.536 --> 00:21:45.696 A:middle
we will call a function of our

00:21:45.696 --> 00:21:47.406 A:middle
own that is display our favorite

00:21:47.406 --> 00:21:47.936 A:middle
categories.

00:21:48.756 --> 00:21:50.306 A:middle
We'll then retrieve an image and

00:21:50.306 --> 00:21:51.336 A:middle
assign it to the button.

00:21:51.576 --> 00:21:52.936 A:middle
And we want this button to

00:21:52.936 --> 00:21:54.126 A:middle
appear in the trailing space

00:21:54.126 --> 00:21:55.576 A:middle
alongside our traffic button.

00:21:55.926 --> 00:21:57.116 A:middle
So, we'll assign those two

00:21:57.116 --> 00:21:58.136 A:middle
buttons to the trailing

00:21:58.136 --> 00:21:59.356 A:middle
navigation bar buttons on our

00:21:59.356 --> 00:21:59.916 A:middle
map template.


00:22:00.206 --> 00:22:01.476 A:middle
And then, return our map

00:22:01.476 --> 00:22:01.856 A:middle
template.

00:22:02.606 --> 00:22:03.786 A:middle
Great. Now, that we have a

00:22:03.786 --> 00:22:05.746 A:middle
button on our map template, we

00:22:05.746 --> 00:22:07.106 A:middle
want a way to display those

00:22:07.106 --> 00:22:08.006 A:middle
favorite categories to our

00:22:08.006 --> 00:22:08.466 A:middle
users.

00:22:09.036 --> 00:22:10.206 A:middle
The CarPlay framework has a

00:22:10.206 --> 00:22:11.416 A:middle
great template for this.

00:22:11.556 --> 00:22:12.896 A:middle
And that is the grid template.

00:22:13.556 --> 00:22:15.176 A:middle
The grid template will display

00:22:15.176 --> 00:22:17.276 A:middle
an array of up to eight buttons

00:22:17.566 --> 00:22:18.456 A:middle
in a grid format.

00:22:19.616 --> 00:22:22.036 A:middle
These buttons appear here and

00:22:22.036 --> 00:22:23.526 A:middle
can be configured with an image

00:22:23.636 --> 00:22:24.506 A:middle
and a title.

00:22:25.296 --> 00:22:27.246 A:middle
The grid template also has a

00:22:27.246 --> 00:22:28.586 A:middle
navigation bar, where you can

00:22:28.586 --> 00:22:29.906 A:middle
place the same leading and

00:22:29.906 --> 00:22:30.716 A:middle
trailing buttons.

00:22:31.186 --> 00:22:32.256 A:middle
But you can also create a grid

00:22:32.256 --> 00:22:34.126 A:middle
template with a title that will

00:22:34.126 --> 00:22:35.346 A:middle
appear in the navigation bar.

00:22:36.556 --> 00:22:37.756 A:middle
Let's jump over the code and

00:22:37.756 --> 00:22:39.366 A:middle
let's create a grid template.

00:22:41.476 --> 00:22:43.006 A:middle
We'll start by retrieving an

00:22:43.006 --> 00:22:44.656 A:middle
image for our grid button.

00:22:45.506 --> 00:22:47.266 A:middle
We're going to add a Parks

00:22:48.356 --> 00:22:48.526 A:middle
button.

00:22:48.676 --> 00:22:49.756 A:middle
We'll then create an instance of

00:22:49.816 --> 00:22:51.536 A:middle
CPGridButton with a title of

00:22:51.536 --> 00:22:53.286 A:middle
Parks and the image we just

00:22:53.286 --> 00:22:53.706 A:middle
retrieved.

00:22:55.276 --> 00:22:56.706 A:middle
That, with the other buttons,

00:22:56.706 --> 00:22:58.166 A:middle
we'll assign to an array.

00:22:58.376 --> 00:22:59.556 A:middle
And then, create an instance of

00:22:59.656 --> 00:23:01.926 A:middle
CPGridTemplate with a title of


00:22:59.656 --> 00:23:01.926 A:middle
CPGridTemplate with a title of

00:23:01.926 --> 00:23:03.016 A:middle
Favorites, since these are our

00:23:03.016 --> 00:23:04.976 A:middle
favorite categories, and the

00:23:04.976 --> 00:23:06.116 A:middle
array of grid buttons we've

00:23:06.116 --> 00:23:06.966 A:middle
created in code.

00:23:07.186 --> 00:23:09.126 A:middle
And this is where we jump back

00:23:09.276 --> 00:23:10.266 A:middle
to that interface controller

00:23:10.266 --> 00:23:11.436 A:middle
object I mentioned earlier.

00:23:12.116 --> 00:23:13.176 A:middle
That is how we manage what is

00:23:13.176 --> 00:23:14.656 A:middle
presenting on the car screen.

00:23:15.296 --> 00:23:16.526 A:middle
So, we would use that interface

00:23:16.526 --> 00:23:18.426 A:middle
controller to push this new grid

00:23:18.426 --> 00:23:20.226 A:middle
template onto the car screen.

00:23:20.696 --> 00:23:23.376 A:middle
Now, that we have a way to

00:23:23.406 --> 00:23:24.236 A:middle
search for our favorite

00:23:24.676 --> 00:23:25.796 A:middle
categories and our favorite

00:23:25.796 --> 00:23:27.536 A:middle
items, we need a way to display

00:23:27.536 --> 00:23:28.846 A:middle
the search results to our users.

00:23:29.156 --> 00:23:30.866 A:middle
For that, we can use a list

00:23:30.906 --> 00:23:31.286 A:middle
template.

00:23:32.616 --> 00:23:33.786 A:middle
The list template will display a

00:23:33.786 --> 00:23:35.346 A:middle
list of CPList items.

00:23:35.856 --> 00:23:37.006 A:middle
They can be configured with

00:23:37.196 --> 00:23:39.306 A:middle
text, detailed text, an image,

00:23:39.616 --> 00:23:40.726 A:middle
and a disclosure indicator.

00:23:41.036 --> 00:23:42.226 A:middle
You can provide multiple

00:23:42.226 --> 00:23:42.766 A:middle
sections.

00:23:42.936 --> 00:23:44.276 A:middle
And you also, have a navigation

00:23:44.276 --> 00:23:45.256 A:middle
bar where you can provide a

00:23:45.256 --> 00:23:46.736 A:middle
title and those same leading and

00:23:46.736 --> 00:23:47.426 A:middle
trailing buttons.

00:23:47.806 --> 00:23:49.016 A:middle
One of the nice things about the

00:23:49.016 --> 00:23:50.366 A:middle
CarPlay framework is that, when

00:23:50.366 --> 00:23:51.726 A:middle
appropriate, it will also

00:23:51.726 --> 00:23:53.346 A:middle
display a nice scroll bar on the

00:23:53.346 --> 00:23:55.286 A:middle
side that helps your users page

00:23:55.286 --> 00:23:56.156 A:middle
through their search results

00:23:56.156 --> 00:23:56.666 A:middle
while driving.

00:23:58.006 --> 00:23:59.396 A:middle
Let's build a list template.

00:23:59.916 --> 00:24:01.776 A:middle
The first thing we're going to


00:23:59.916 --> 00:24:01.776 A:middle
The first thing we're going to

00:24:01.776 --> 00:24:04.096 A:middle
need to do is take that array of

00:24:04.096 --> 00:24:05.686 A:middle
our own search results and

00:24:05.736 --> 00:24:07.126 A:middle
translate them into an array of

00:24:07.266 --> 00:24:08.806 A:middle
CPListItems.

00:24:09.356 --> 00:24:10.576 A:middle
So, we'll do that by using some

00:24:10.576 --> 00:24:11.986 A:middle
of the properties on our search

00:24:11.986 --> 00:24:13.156 A:middle
result class.

00:24:14.276 --> 00:24:16.116 A:middle
We will then initialize a new

00:24:16.266 --> 00:24:19.396 A:middle
CPListTemplate with one section

00:24:19.396 --> 00:24:21.676 A:middle
of those items, assign a title

00:24:21.676 --> 00:24:23.406 A:middle
of Parks, and also, assign a

00:24:23.406 --> 00:24:24.806 A:middle
delegate to manage interaction

00:24:24.806 --> 00:24:25.336 A:middle
from the user.

00:24:26.236 --> 00:24:27.376 A:middle
We, again, use the interface

00:24:27.376 --> 00:24:28.906 A:middle
controller to push our new

00:24:28.906 --> 00:24:30.246 A:middle
template onto the car screen.

00:24:31.496 --> 00:24:32.816 A:middle
When the user interacts with an

00:24:32.816 --> 00:24:36.256 A:middle
item on the screen listTemplate

00:24:36.256 --> 00:24:37.826 A:middle
didSelect item completion

00:24:37.826 --> 00:24:39.186 A:middle
handler will be called on your

00:24:39.186 --> 00:24:40.126 A:middle
list template delegate.

00:24:41.566 --> 00:24:43.136 A:middle
There are a few other items

00:24:43.136 --> 00:24:44.086 A:middle
available in the CarPlay

00:24:44.086 --> 00:24:45.096 A:middle
framework that I'd like to go

00:24:45.096 --> 00:24:45.706 A:middle
over, briefly.

00:24:47.156 --> 00:24:49.326 A:middle
The first is a great example of

00:24:49.326 --> 00:24:51.646 A:middle
how complex CarPlay can be and

00:24:51.646 --> 00:24:52.826 A:middle
how the CarPlay framework helps

00:24:52.826 --> 00:24:54.446 A:middle
you not have to worry about

00:24:54.476 --> 00:24:54.686 A:middle
that.

00:24:55.036 --> 00:24:56.516 A:middle
What we're looking at, right

00:24:56.516 --> 00:24:58.456 A:middle
now, is the search template

00:24:58.456 --> 00:24:59.246 A:middle
available in the CarPlay

00:24:59.246 --> 00:25:00.596 A:middle
framework presenting a


00:24:59.246 --> 00:25:00.596 A:middle
framework presenting a

00:25:00.596 --> 00:25:01.806 A:middle
touchscreen keyboard.

00:25:02.156 --> 00:25:03.546 A:middle
But one thing we've learned is

00:25:03.546 --> 00:25:05.156 A:middle
that not all CarPlay systems

00:25:05.236 --> 00:25:06.016 A:middle
have a touchscreen.

00:25:06.706 --> 00:25:08.596 A:middle
Many only have a rotary knob or

00:25:08.596 --> 00:25:10.126 A:middle
touchpad for user interaction.

00:25:10.966 --> 00:25:11.956 A:middle
On those systems, when

00:25:11.956 --> 00:25:13.436 A:middle
appropriate, the CarPlay

00:25:13.436 --> 00:25:14.886 A:middle
framework will display a linear

00:25:14.886 --> 00:25:15.666 A:middle
style keyboard.

00:25:16.636 --> 00:25:17.616 A:middle
And of course, for those

00:25:17.616 --> 00:25:18.716 A:middle
touchpads that do support

00:25:18.716 --> 00:25:20.366 A:middle
character recognition, through

00:25:20.366 --> 00:25:21.776 A:middle
the same search template API

00:25:22.366 --> 00:25:23.856 A:middle
your app will receive those

00:25:23.856 --> 00:25:25.746 A:middle
characters as entered for free.

00:25:26.956 --> 00:25:28.246 A:middle
You may, also, want to present

00:25:28.246 --> 00:25:29.396 A:middle
information to your users in a

00:25:29.396 --> 00:25:30.856 A:middle
way that demands a little bit

00:25:30.856 --> 00:25:31.776 A:middle
more of their attention.

00:25:32.446 --> 00:25:33.666 A:middle
For that, you can present a

00:25:33.666 --> 00:25:36.656 A:middle
CPAlert in ActionSheetStyle or

00:25:36.656 --> 00:25:38.076 A:middle
for information that truly

00:25:38.076 --> 00:25:39.166 A:middle
commands their attention, you

00:25:39.166 --> 00:25:41.086 A:middle
can use a full screen template.

00:25:42.296 --> 00:25:44.646 A:middle
And lastly, since voice is such

00:25:44.646 --> 00:25:47.436 A:middle
a huge part of your apps, we'll

00:25:47.436 --> 00:25:48.996 A:middle
be providing a template that

00:25:48.996 --> 00:25:50.166 A:middle
will help you manage voice

00:25:50.166 --> 00:25:50.566 A:middle
control.

00:25:50.976 --> 00:25:52.416 A:middle
And with that, I'd like to

00:25:52.416 --> 00:25:53.646 A:middle
invite Jonathan back up to give

00:25:53.646 --> 00:25:55.056 A:middle
you a demo of our Country Roads

00:25:55.056 --> 00:25:55.226 A:middle
app.

00:25:55.656 --> 00:25:55.976 A:middle
Jonathan.

00:25:56.516 --> 00:26:00.500 A:middle
[ Applause ]


00:25:56.516 --> 00:26:00.500 A:middle
[ Applause ]

00:26:01.906 --> 00:26:03.116 A:middle
&gt;&gt; Thanks, Mike.

00:26:03.306 --> 00:26:04.866 A:middle
Let's take a quick look at

00:26:04.866 --> 00:26:05.566 A:middle
Country Roads.

00:26:11.076 --> 00:26:13.316 A:middle
This is the CarPlay simulator.

00:26:13.316 --> 00:26:14.546 A:middle
It's included with Xcode.

00:26:15.496 --> 00:26:17.136 A:middle
Let's start on the CarPlay home

00:26:17.136 --> 00:26:18.616 A:middle
screen, where we can see our

00:26:18.616 --> 00:26:20.096 A:middle
custom navigation app enabled

00:26:20.096 --> 00:26:20.706 A:middle
for CarPlay.

00:26:21.226 --> 00:26:22.766 A:middle
Let's tap the icon to launch our

00:26:23.466 --> 00:26:23.546 A:middle
app.

00:26:24.436 --> 00:26:26.596 A:middle
When our app launches, we start

00:26:26.596 --> 00:26:27.516 A:middle
on the map template.

00:26:27.706 --> 00:26:29.576 A:middle
Here, the app overlay that Mike

00:26:29.576 --> 00:26:31.416 A:middle
mentioned is fully transparent

00:26:31.416 --> 00:26:32.596 A:middle
and it allows our app's

00:26:32.596 --> 00:26:34.226 A:middle
beautiful map tiles to show

00:26:34.226 --> 00:26:34.656 A:middle
through.

00:26:35.146 --> 00:26:36.536 A:middle
This map is really out of this

00:26:36.536 --> 00:26:36.886 A:middle
world.

00:26:37.486 --> 00:26:39.526 A:middle
I have some basic controls on

00:26:39.526 --> 00:26:41.596 A:middle
this map, like zooming in and

00:26:41.596 --> 00:26:43.626 A:middle
out with ECP Map buttons.

00:26:44.166 --> 00:26:47.326 A:middle
I can, also, switch in and out

00:26:47.326 --> 00:26:49.276 A:middle
of pan mode using this pan

00:26:49.796 --> 00:26:50.000 A:middle
button.

00:26:52.656 --> 00:26:54.316 A:middle
All of these buttons are simple

00:26:54.316 --> 00:26:56.236 A:middle
configurable template objects.

00:26:56.506 --> 00:26:58.426 A:middle
CarPlay tells my app when the

00:26:58.426 --> 00:26:59.586 A:middle
user has interacted with a

00:26:59.586 --> 00:27:01.606 A:middle
button and my app can zoom in or


00:26:59.586 --> 00:27:01.606 A:middle
button and my app can zoom in or

00:27:01.606 --> 00:27:03.026 A:middle
out or take any other

00:27:03.026 --> 00:27:04.586 A:middle
appropriate action in response.

00:27:05.756 --> 00:27:07.146 A:middle
That new Favorites button that

00:27:07.146 --> 00:27:08.656 A:middle
Mike just added shows up in the

00:27:08.656 --> 00:27:10.376 A:middle
navigation bar on the trailing

00:27:10.376 --> 00:27:10.726 A:middle
side.

00:27:11.476 --> 00:27:13.266 A:middle
When we tap it our app has

00:27:13.266 --> 00:27:15.496 A:middle
created, configured, and pushed

00:27:15.496 --> 00:27:17.316 A:middle
a grid template that lets us

00:27:17.316 --> 00:27:18.466 A:middle
navigate to certain very

00:27:18.466 --> 00:27:19.736 A:middle
important destinations.

00:27:20.516 --> 00:27:22.976 A:middle
If we select Parks our app

00:27:22.976 --> 00:27:24.826 A:middle
creates, configures, and pushes

00:27:24.826 --> 00:27:26.706 A:middle
a list template where we can

00:27:26.706 --> 00:27:27.966 A:middle
visualize search results for

00:27:27.966 --> 00:27:29.336 A:middle
interesting nearby parks.

00:27:29.916 --> 00:27:31.076 A:middle
We'll revisit Country Roads,

00:27:31.076 --> 00:27:31.536 A:middle
shortly.

00:27:31.836 --> 00:27:32.976 A:middle
But for now, back to Mike.

00:27:35.516 --> 00:27:39.500 A:middle
[ Applause ]

00:27:40.786 --> 00:27:41.126 A:middle
&gt;&gt; All right.

00:27:41.126 --> 00:27:41.716 A:middle
Thanks, Jonathan.

00:27:43.576 --> 00:27:44.886 A:middle
So, let's talk about one of the

00:27:44.886 --> 00:27:46.106 A:middle
most important functions that

00:27:46.106 --> 00:27:47.646 A:middle
your apps will provide to your

00:27:47.646 --> 00:27:48.586 A:middle
users while driving.

00:27:48.966 --> 00:27:50.236 A:middle
And that, of course, is

00:27:50.236 --> 00:27:51.346 A:middle
turn-by-turn guidance.

00:27:52.116 --> 00:27:53.516 A:middle
Let's start by walking through a

00:27:53.516 --> 00:27:56.016 A:middle
typical flow your users may see

00:27:56.436 --> 00:27:57.766 A:middle
while beginning a navigation

00:27:57.766 --> 00:27:58.166 A:middle
session.

00:27:58.926 --> 00:28:01.016 A:middle
The first thing they need is a


00:27:58.926 --> 00:28:01.016 A:middle
The first thing they need is a

00:28:01.016 --> 00:28:01.766 A:middle
destination.

00:28:02.486 --> 00:28:03.516 A:middle
This could be something that is

00:28:03.656 --> 00:28:05.146 A:middle
surfaced by your app through a

00:28:05.146 --> 00:28:05.986 A:middle
navigation alert.

00:28:06.786 --> 00:28:07.626 A:middle
Or perhaps, they've done a

00:28:07.626 --> 00:28:09.096 A:middle
search and found a destination

00:28:09.096 --> 00:28:09.876 A:middle
they want to travel to.

00:28:11.136 --> 00:28:12.606 A:middle
They may want to, then, preview

00:28:12.606 --> 00:28:13.686 A:middle
the route and see important

00:28:13.686 --> 00:28:14.926 A:middle
information about it, such as

00:28:15.136 --> 00:28:16.416 A:middle
how long it might take to get

00:28:16.416 --> 00:28:17.806 A:middle
there and what their estimated

00:28:17.806 --> 00:28:18.556 A:middle
arrival time is.

00:28:19.636 --> 00:28:20.806 A:middle
If there are multiple route

00:28:20.806 --> 00:28:21.866 A:middle
choices for the trip they're

00:28:21.866 --> 00:28:23.436 A:middle
about to take they'll probably

00:28:23.436 --> 00:28:24.566 A:middle
want to preview each of those

00:28:24.566 --> 00:28:26.116 A:middle
routes and make a choice that

00:28:26.116 --> 00:28:26.826 A:middle
suits them best.

00:28:28.176 --> 00:28:29.746 A:middle
They'll then select a route and

00:28:29.746 --> 00:28:30.796 A:middle
begin navigation.

00:28:31.376 --> 00:28:33.176 A:middle
This is when your app will begin

00:28:33.176 --> 00:28:35.066 A:middle
providing turn by turn updates

00:28:35.106 --> 00:28:35.606 A:middle
to the user.

00:28:36.706 --> 00:28:38.096 A:middle
Eventually, they'll arrive at

00:28:38.096 --> 00:28:39.686 A:middle
their destination or cancel

00:28:39.686 --> 00:28:40.246 A:middle
navigation.

00:28:41.356 --> 00:28:42.496 A:middle
And let's take a look at how you

00:28:42.496 --> 00:28:44.206 A:middle
can accomplish this same flow

00:28:44.206 --> 00:28:45.686 A:middle
using the CarPlay framework.

00:28:46.146 --> 00:28:48.316 A:middle
Let's start by talking about

00:28:48.316 --> 00:28:49.096 A:middle
Route Preview.

00:28:49.976 --> 00:28:51.666 A:middle
Your app can provide data that

00:28:52.226 --> 00:28:53.656 A:middle
will appear in a way that the

00:28:53.656 --> 00:28:56.776 A:middle
user can see and visualize all

00:28:56.776 --> 00:28:57.746 A:middle
the important details about

00:28:57.746 --> 00:28:58.556 A:middle
their upcoming trip.

00:28:59.166 --> 00:29:01.596 A:middle
You can provide destination


00:28:59.166 --> 00:29:01.596 A:middle
You can provide destination

00:29:01.596 --> 00:29:03.136 A:middle
names, information that is

00:29:03.136 --> 00:29:04.236 A:middle
pertinent to the route, such as

00:29:04.236 --> 00:29:05.206 A:middle
advisory notices.

00:29:05.976 --> 00:29:07.156 A:middle
You can, also, provide estimates

00:29:07.156 --> 00:29:08.336 A:middle
to let them know when they'll

00:29:08.336 --> 00:29:08.606 A:middle
arrive.

00:29:09.676 --> 00:29:11.136 A:middle
And if the trip has multiple

00:29:11.136 --> 00:29:12.546 A:middle
routes the CarPlay framework

00:29:12.546 --> 00:29:13.856 A:middle
will automatically display a

00:29:13.856 --> 00:29:14.846 A:middle
more routes button.

00:29:15.756 --> 00:29:17.076 A:middle
This will allow your users to

00:29:17.076 --> 00:29:19.096 A:middle
toggle between individual routes

00:29:19.636 --> 00:29:20.436 A:middle
and select the one that they

00:29:20.436 --> 00:29:22.306 A:middle
want to take.

00:29:22.506 --> 00:29:23.816 A:middle
Let's look at the classes and

00:29:23.816 --> 00:29:24.976 A:middle
methods you'll want to be

00:29:24.976 --> 00:29:26.256 A:middle
familiar with to build an

00:29:26.256 --> 00:29:27.406 A:middle
experience in the CarPlay

00:29:27.406 --> 00:29:28.356 A:middle
framework route preview.

00:29:29.876 --> 00:29:31.586 A:middle
The first is CPTrip.

00:29:32.126 --> 00:29:33.876 A:middle
This is a representation of the

00:29:33.876 --> 00:29:35.616 A:middle
upcoming trip for your users.

00:29:36.236 --> 00:29:37.426 A:middle
It includes items such as the

00:29:37.426 --> 00:29:39.416 A:middle
origin and destination, as well

00:29:39.416 --> 00:29:41.626 A:middle
as multiple CPRouteChoices for

00:29:41.626 --> 00:29:42.866 A:middle
each route that they may take.

00:29:44.166 --> 00:29:46.116 A:middle
CPTravelEstimates describes how

00:29:46.116 --> 00:29:47.746 A:middle
long it will take for an entire

00:29:47.746 --> 00:29:49.176 A:middle
trip, as well as for individual

00:29:49.176 --> 00:29:49.646 A:middle
maneuvers.

00:29:50.076 --> 00:29:51.916 A:middle
On your map template, when you

00:29:51.916 --> 00:29:53.706 A:middle
are ready to show a route

00:29:53.706 --> 00:29:55.696 A:middle
preview to your users, you call

00:29:55.696 --> 00:29:57.666 A:middle
ShowTripPreviews on your map

00:29:57.666 --> 00:29:59.116 A:middle
template with the CPTrip object

00:29:59.116 --> 00:29:59.726 A:middle
you've created.


00:30:00.126 --> 00:30:01.886 A:middle
As the user toggles through

00:30:01.886 --> 00:30:03.576 A:middle
individual routes you have an

00:30:03.576 --> 00:30:04.736 A:middle
opportunity to update the

00:30:04.736 --> 00:30:06.066 A:middle
content that is being displayed

00:30:06.066 --> 00:30:06.746 A:middle
in your window.

00:30:07.636 --> 00:30:09.396 A:middle
MapTemplate selectedPreviewFor

00:30:09.396 --> 00:30:11.056 A:middle
trip using routeChoice will be

00:30:11.056 --> 00:30:12.236 A:middle
called and you can change what

00:30:12.236 --> 00:30:12.916 A:middle
is being displayed.

00:30:13.776 --> 00:30:15.406 A:middle
This is a great opportunity to

00:30:15.406 --> 00:30:17.366 A:middle
mention how the map template is

00:30:17.396 --> 00:30:19.606 A:middle
drawing content that covers up

00:30:19.606 --> 00:30:20.286 A:middle
your window.

00:30:21.366 --> 00:30:22.276 A:middle
And you'll want to make sure

00:30:22.276 --> 00:30:23.556 A:middle
that the content you're drawing

00:30:23.556 --> 00:30:25.166 A:middle
is visible to your users.

00:30:26.096 --> 00:30:27.516 A:middle
For this, we've leveraged the

00:30:27.516 --> 00:30:29.436 A:middle
existing safeArea API you may

00:30:29.436 --> 00:30:30.466 A:middle
already be familiar with.

00:30:31.336 --> 00:30:33.226 A:middle
As the content changes from the

00:30:33.226 --> 00:30:35.146 A:middle
map template it will update the

00:30:35.146 --> 00:30:37.446 A:middle
safeArea insets on your window

00:30:37.666 --> 00:30:38.626 A:middle
to let you know where it is safe

00:30:38.626 --> 00:30:39.016 A:middle
to draw.

00:30:39.226 --> 00:30:40.496 A:middle
You'll just want to implement

00:30:40.496 --> 00:30:42.666 A:middle
safeAreaInsetsDidChange and pay

00:30:42.666 --> 00:30:44.036 A:middle
close attention to those insets

00:30:44.036 --> 00:30:45.456 A:middle
and make sure your content is

00:30:45.456 --> 00:30:47.546 A:middle
drawn within them.

00:30:47.756 --> 00:30:48.696 A:middle
Now, let's talk about turn by

00:30:48.696 --> 00:30:49.406 A:middle
turn guidance.

00:30:50.486 --> 00:30:52.226 A:middle
Similar to our preview, your app

00:30:52.256 --> 00:30:54.156 A:middle
can provide data to the CarPlay

00:30:54.156 --> 00:30:55.656 A:middle
framework that will cause it to

00:30:55.656 --> 00:30:58.256 A:middle
draw a guidance card populated

00:30:58.256 --> 00:30:59.366 A:middle
with information, such as an

00:30:59.396 --> 00:31:00.716 A:middle
image representing the maneuver.


00:30:59.396 --> 00:31:00.716 A:middle
image representing the maneuver.

00:31:01.226 --> 00:31:02.676 A:middle
How much farther it is until you

00:31:02.676 --> 00:31:03.136 A:middle
arrive there.

00:31:04.286 --> 00:31:05.936 A:middle
And of course, instructions on

00:31:05.936 --> 00:31:06.806 A:middle
what to do when you get there,

00:31:06.806 --> 00:31:08.366 A:middle
such as turn left or continue

00:31:08.366 --> 00:31:08.706 A:middle
straight.

00:31:09.186 --> 00:31:12.616 A:middle
Let's take a look at what you'll

00:31:12.616 --> 00:31:15.026 A:middle
need to learn to use turn by

00:31:15.026 --> 00:31:16.046 A:middle
turn guidance in the CarPlay

00:31:16.046 --> 00:31:16.416 A:middle
framework.

00:31:16.916 --> 00:31:20.826 A:middle
The CPMapTemplateDelegate and

00:31:20.826 --> 00:31:22.436 A:middle
the mapTemplate are two places

00:31:22.436 --> 00:31:23.126 A:middle
you'll need to start.

00:31:23.486 --> 00:31:24.716 A:middle
First, when the user hits that

00:31:24.716 --> 00:31:25.926 A:middle
go button from Route Preview

00:31:26.686 --> 00:31:28.426 A:middle
mapTemplate startedTrip using

00:31:28.426 --> 00:31:29.656 A:middle
routeChoice will be called on

00:31:29.656 --> 00:31:30.636 A:middle
your template delegate.

00:31:31.226 --> 00:31:33.166 A:middle
This is your indication to begin

00:31:33.166 --> 00:31:34.966 A:middle
navigation to that destination

00:31:34.966 --> 00:31:36.436 A:middle
using the route choice the user

00:31:36.436 --> 00:31:36.996 A:middle
has selected.

00:31:37.656 --> 00:31:39.276 A:middle
This is when you would begin

00:31:39.386 --> 00:31:41.276 A:middle
navigation in your app, and

00:31:41.276 --> 00:31:42.686 A:middle
also, begin providing turn by

00:31:42.686 --> 00:31:43.796 A:middle
turn updates to the CarPlay

00:31:43.796 --> 00:31:44.186 A:middle
framework.

00:31:44.686 --> 00:31:46.066 A:middle
You'll want to call

00:31:46.066 --> 00:31:48.126 A:middle
startNavigationSession for trip

00:31:48.356 --> 00:31:49.226 A:middle
on your map template.

00:31:49.456 --> 00:31:50.536 A:middle
And this will provide you with

00:31:50.536 --> 00:31:51.456 A:middle
an instance of

00:31:51.516 --> 00:31:52.886 A:middle
CPNavigationSession.

00:31:52.886 --> 00:31:54.636 A:middle
And this is where you manage

00:31:54.636 --> 00:31:55.966 A:middle
those upcoming maneuvers.

00:31:56.406 --> 00:31:59.836 A:middle
Using CPNavigationSession and

00:31:59.836 --> 00:32:01.896 A:middle
CPManeuver you will set upcoming


00:31:59.836 --> 00:32:01.896 A:middle
CPManeuver you will set upcoming

00:32:01.896 --> 00:32:03.726 A:middle
maneuvers and the system will

00:32:03.726 --> 00:32:05.076 A:middle
automatically display a primary

00:32:05.076 --> 00:32:05.526 A:middle
maneuver.

00:32:05.866 --> 00:32:07.306 A:middle
And if you provide a second

00:32:07.306 --> 00:32:08.476 A:middle
maneuver it can display a

00:32:08.476 --> 00:32:09.596 A:middle
secondary maneuver on that

00:32:09.596 --> 00:32:10.126 A:middle
guidance card.

00:32:11.096 --> 00:32:12.856 A:middle
You will then use update

00:32:12.856 --> 00:32:14.276 A:middle
estimates for maneuver to

00:32:14.276 --> 00:32:15.926 A:middle
continually update what is being

00:32:16.156 --> 00:32:17.436 A:middle
shown in that guidance card.

00:32:17.436 --> 00:32:19.286 A:middle
And let your users know when

00:32:19.386 --> 00:32:20.446 A:middle
their maneuver is approaching.

00:32:21.276 --> 00:32:22.786 A:middle
And most likely, your app will

00:32:22.786 --> 00:32:24.306 A:middle
be playing back audio prompts to

00:32:24.306 --> 00:32:25.186 A:middle
let them know, as well.

00:32:25.986 --> 00:32:27.246 A:middle
For this, you'll want to make

00:32:27.246 --> 00:32:28.496 A:middle
sure that your audio session is

00:32:28.496 --> 00:32:29.856 A:middle
configured appropriately for

00:32:29.856 --> 00:32:30.326 A:middle
CarPlay.

00:32:31.156 --> 00:32:32.966 A:middle
We have to remember that when in

00:32:32.966 --> 00:32:34.676 A:middle
the car your users may be

00:32:34.676 --> 00:32:35.686 A:middle
listening to an audio source

00:32:35.686 --> 00:32:37.596 A:middle
from iOS or they may be

00:32:37.596 --> 00:32:38.606 A:middle
listening to an audio source

00:32:38.606 --> 00:32:40.156 A:middle
from the car, such as FM radio.

00:32:41.036 --> 00:32:42.246 A:middle
You want to configure your audio

00:32:42.246 --> 00:32:43.066 A:middle
session with

00:32:43.066 --> 00:32:45.436 A:middle
AVAudioSessionModeVoicePrompt as

00:32:45.436 --> 00:32:47.366 A:middle
this will let the CarPlay system

00:32:47.766 --> 00:32:49.326 A:middle
know when to appropriately duck

00:32:49.376 --> 00:32:50.766 A:middle
the audio source, regardless of

00:32:50.766 --> 00:32:51.446 A:middle
where it's coming from.

00:32:51.776 --> 00:32:52.676 A:middle
You can, also, configure your

00:32:52.676 --> 00:32:54.496 A:middle
session with the category

00:32:54.496 --> 00:32:56.186 A:middle
options duckOthers and

00:32:56.186 --> 00:32:57.436 A:middle
interruptSpokenAudio

00:32:57.436 --> 00:32:58.126 A:middle
AndMixWithOthers.

00:32:58.186 --> 00:32:59.216 A:middle
And this will help ensure that

00:32:59.216 --> 00:33:01.136 A:middle
your audio plays well with other


00:32:59.216 --> 00:33:01.136 A:middle
your audio plays well with other

00:33:01.136 --> 00:33:02.146 A:middle
iOS audio sources.

00:33:03.346 --> 00:33:04.526 A:middle
So, what happens next?

00:33:04.996 --> 00:33:06.586 A:middle
Well, your users will continue

00:33:06.586 --> 00:33:07.106 A:middle
to drive.

00:33:08.066 --> 00:33:08.956 A:middle
You'll want to continue to

00:33:08.956 --> 00:33:10.746 A:middle
provide updated maneuvers and

00:33:10.746 --> 00:33:12.276 A:middle
estimates and help them make

00:33:12.276 --> 00:33:15.656 A:middle
those turns when they need to.

00:33:15.886 --> 00:33:16.916 A:middle
What happens if they veer off

00:33:16.916 --> 00:33:17.176 A:middle
route?

00:33:17.496 --> 00:33:18.976 A:middle
Well, you might want to

00:33:19.456 --> 00:33:20.596 A:middle
calculate a new route.

00:33:21.056 --> 00:33:22.496 A:middle
You can set a pause reason which

00:33:22.496 --> 00:33:23.946 A:middle
will display a rerouting status

00:33:23.946 --> 00:33:24.396 A:middle
to the user.

00:33:25.556 --> 00:33:26.646 A:middle
Perhaps, a new route is

00:33:26.646 --> 00:33:28.316 A:middle
available or something has

00:33:28.316 --> 00:33:29.346 A:middle
occurred along the route.

00:33:29.346 --> 00:33:30.326 A:middle
And you can use a navigation

00:33:30.326 --> 00:33:31.406 A:middle
alert to present that

00:33:31.406 --> 00:33:32.946 A:middle
information to them, right there

00:33:32.946 --> 00:33:33.706 A:middle
on the map template.

00:33:34.636 --> 00:33:36.716 A:middle
And ultimately, they'll arrive

00:33:36.716 --> 00:33:38.026 A:middle
at their destination, thanks to

00:33:38.026 --> 00:33:38.466 A:middle
your app.

00:33:39.696 --> 00:33:40.836 A:middle
So, we've talked a lot about

00:33:40.836 --> 00:33:42.146 A:middle
what your apps can look like

00:33:42.146 --> 00:33:43.496 A:middle
while frontmost on the car

00:33:43.496 --> 00:33:43.886 A:middle
screen.

00:33:43.996 --> 00:33:45.946 A:middle
But we know that our users in

00:33:45.946 --> 00:33:47.716 A:middle
CarPlay often switch between

00:33:47.716 --> 00:33:49.546 A:middle
their mapping app and an audio

00:33:49.546 --> 00:33:50.916 A:middle
app, like our favorite audio app

00:33:50.916 --> 00:33:51.406 A:middle
Srirocka.

00:33:52.566 --> 00:33:53.506 A:middle
What happens when your app is

00:33:53.506 --> 00:33:54.646 A:middle
backgrounded and you need to

00:33:54.646 --> 00:33:55.996 A:middle
present important information to

00:33:55.996 --> 00:33:56.626 A:middle
your users?

00:33:57.576 --> 00:33:58.866 A:middle
You will have an opportunity to

00:33:58.866 --> 00:34:00.356 A:middle
provide banner notifications


00:33:58.866 --> 00:34:00.356 A:middle
provide banner notifications

00:34:00.446 --> 00:34:02.276 A:middle
that will display when the user

00:34:02.276 --> 00:34:03.166 A:middle
is away from your app.

00:34:03.986 --> 00:34:06.036 A:middle
And this will work for maneuver

00:34:06.036 --> 00:34:07.966 A:middle
updates, as well as navigation

00:34:07.966 --> 00:34:08.426 A:middle
alerts.

00:34:09.656 --> 00:34:11.156 A:middle
On your map template delegate

00:34:11.156 --> 00:34:12.706 A:middle
there are three methods you'll

00:34:12.706 --> 00:34:13.366 A:middle
want to implement.

00:34:14.085 --> 00:34:15.386 A:middle
The first is mapTemplate,

00:34:15.386 --> 00:34:16.585 A:middle
ShouldShowNotificationFor

00:34:16.585 --> 00:34:16.996 A:middle
maneuver.

00:34:17.565 --> 00:34:19.696 A:middle
When you set a new maneuver and

00:34:19.696 --> 00:34:21.565 A:middle
your app is backgrounded this

00:34:21.565 --> 00:34:22.456 A:middle
method will be called.

00:34:22.686 --> 00:34:24.295 A:middle
And if you return true, the

00:34:24.295 --> 00:34:26.266 A:middle
system will take that maneuver

00:34:26.266 --> 00:34:27.576 A:middle
and translate it into a banner

00:34:27.576 --> 00:34:28.176 A:middle
notification.

00:34:29.366 --> 00:34:30.636 A:middle
If you're already presenting a

00:34:30.636 --> 00:34:31.666 A:middle
banner notification for a

00:34:31.666 --> 00:34:32.585 A:middle
maneuver, and simply are

00:34:32.585 --> 00:34:33.835 A:middle
updating the travel estimates,

00:34:34.306 --> 00:34:34.985 A:middle
mapTemplate

00:34:34.985 --> 00:34:36.556 A:middle
shouldUpdateNotificationFor

00:34:36.556 --> 00:34:38.106 A:middle
maneuver with travelEstimates

00:34:38.106 --> 00:34:38.636 A:middle
will be called.

00:34:38.896 --> 00:34:40.025 A:middle
Allowing you to update the

00:34:40.025 --> 00:34:41.206 A:middle
content that appears in that

00:34:41.206 --> 00:34:41.576 A:middle
banner.

00:34:41.996 --> 00:34:43.085 A:middle
So, instead of rolling a new

00:34:43.085 --> 00:34:45.016 A:middle
notification, you can simply

00:34:45.016 --> 00:34:46.206 A:middle
update the contents that are

00:34:46.206 --> 00:34:46.746 A:middle
already there.

00:34:47.545 --> 00:34:49.946 A:middle
And for navigation alerts, you

00:34:49.946 --> 00:34:51.025 A:middle
will have an opportunity to

00:34:51.025 --> 00:34:52.485 A:middle
display those, as well, using

00:34:52.485 --> 00:34:53.156 A:middle
mapTemplate

00:34:53.156 --> 00:34:54.696 A:middle
shouldShowNotificationFor

00:34:54.696 --> 00:34:55.505 A:middle
navigationAlert.

00:34:56.466 --> 00:34:57.846 A:middle
With that, I'd like to invite

00:34:57.846 --> 00:34:59.086 A:middle
Jonathan up one more time to

00:34:59.086 --> 00:35:00.566 A:middle
give you a demo of how we've


00:34:59.086 --> 00:35:00.566 A:middle
give you a demo of how we've

00:35:00.566 --> 00:35:01.886 A:middle
integrated our Country Roads app

00:35:01.886 --> 00:35:03.296 A:middle
with the CarPlay framework to do

00:35:03.296 --> 00:35:04.726 A:middle
route preview and turn-by-turn

00:35:04.726 --> 00:35:05.216 A:middle
guidance.

00:35:05.536 --> 00:35:05.906 A:middle
Jonathan.

00:35:06.516 --> 00:35:09.500 A:middle
[ Applause ]

00:35:10.866 --> 00:35:11.296 A:middle
&gt;&gt; Thanks, Mike.

00:35:12.066 --> 00:35:13.586 A:middle
Let's take a quick look at some

00:35:13.586 --> 00:35:15.326 A:middle
code for how your navigation

00:35:15.326 --> 00:35:16.676 A:middle
apps can provide guidance in

00:35:16.676 --> 00:35:18.596 A:middle
CarPlay using our sample Country

00:35:18.596 --> 00:35:19.116 A:middle
Roads app.

00:35:20.306 --> 00:35:21.766 A:middle
When the user selects a

00:35:21.766 --> 00:35:23.436 A:middle
destination, we're going to grab

00:35:23.436 --> 00:35:25.116 A:middle
that placemark and hand the

00:35:25.116 --> 00:35:27.156 A:middle
current location and destination

00:35:27.356 --> 00:35:28.826 A:middle
to our navigation engine to

00:35:28.826 --> 00:35:30.246 A:middle
calculate some route choices.

00:35:30.616 --> 00:35:32.546 A:middle
For our purposes here, we have

00:35:32.546 --> 00:35:34.256 A:middle
only a single route choice, but

00:35:34.256 --> 00:35:35.726 A:middle
your navigation engine can

00:35:35.726 --> 00:35:37.566 A:middle
provide multiple alternative

00:35:37.566 --> 00:35:38.986 A:middle
routing options when available.

00:35:39.346 --> 00:35:40.696 A:middle
Plus, we can include some extra

00:35:40.696 --> 00:35:42.476 A:middle
details to help the user make an

00:35:42.476 --> 00:35:44.706 A:middle
informed decision about a route.

00:35:44.786 --> 00:35:46.886 A:middle
We'll create a CPTrip and call

00:35:46.886 --> 00:35:49.116 A:middle
showTripPreviews to inform

00:35:49.116 --> 00:35:50.146 A:middle
CarPlay that we're starting

00:35:50.146 --> 00:35:51.256 A:middle
navigation guidance.

00:35:51.886 --> 00:35:53.376 A:middle
Lastly, we'll update the

00:35:53.376 --> 00:35:55.326 A:middle
estimates to provide our user an

00:35:55.326 --> 00:35:56.496 A:middle
ETA for this trip.

00:35:57.036 --> 00:35:58.166 A:middle
Let's take a quick look at how

00:35:58.166 --> 00:35:59.416 A:middle
we can provide the maneuvers

00:35:59.416 --> 00:36:00.356 A:middle
that CarPlay needs for


00:35:59.416 --> 00:36:00.356 A:middle
that CarPlay needs for

00:36:00.356 --> 00:36:01.006 A:middle
navigation.

00:36:01.486 --> 00:36:05.516 A:middle
When our user has selected a

00:36:05.516 --> 00:36:07.146 A:middle
route and started navigation,

00:36:07.316 --> 00:36:08.646 A:middle
first we can hide the route

00:36:08.696 --> 00:36:09.796 A:middle
previews that our user was

00:36:09.796 --> 00:36:10.266 A:middle
browsing.

00:36:10.956 --> 00:36:12.736 A:middle
We'll tell our map template to

00:36:12.736 --> 00:36:14.086 A:middle
start a navigation session.

00:36:14.446 --> 00:36:15.716 A:middle
And we can move the session to

00:36:15.716 --> 00:36:16.826 A:middle
the loading state while we're

00:36:16.826 --> 00:36:17.986 A:middle
calculating maneuvers.

00:36:18.576 --> 00:36:20.096 A:middle
We'll build a list of CP

00:36:20.096 --> 00:36:21.876 A:middle
maneuver objects from our

00:36:21.876 --> 00:36:22.856 A:middle
navigation engine.

00:36:23.206 --> 00:36:24.786 A:middle
And last but not least, we'll

00:36:24.786 --> 00:36:26.606 A:middle
provide the first instruction to

00:36:26.606 --> 00:36:27.736 A:middle
our navigation session.

00:36:27.876 --> 00:36:29.306 A:middle
And now, we're ready to drive.

00:36:29.576 --> 00:36:30.606 A:middle
Let's see it in action.

00:36:38.526 --> 00:36:38.986 A:middle
All right.

00:36:39.176 --> 00:36:40.546 A:middle
Let's browse to our Favorites

00:36:40.546 --> 00:36:42.826 A:middle
list and choose Parks.

00:36:43.326 --> 00:36:45.726 A:middle
When we tap one of these

00:36:45.726 --> 00:36:47.676 A:middle
locations we'll see our app pops

00:36:47.676 --> 00:36:49.346 A:middle
back to the map template and

00:36:49.346 --> 00:36:50.786 A:middle
presents a route guidance card.

00:36:51.616 --> 00:36:53.316 A:middle
If we choose to start guidance

00:36:53.316 --> 00:36:54.536 A:middle
by tapping on the Go button

00:36:54.536 --> 00:36:56.376 A:middle
here, we'll see the app enter

00:36:56.376 --> 00:36:57.296 A:middle
navigation mode.

00:36:58.076 --> 00:36:59.886 A:middle
Your app can also update the Nav

00:36:59.886 --> 00:37:01.826 A:middle
bar if needed to show custom


00:36:59.886 --> 00:37:01.826 A:middle
bar if needed to show custom

00:37:01.826 --> 00:37:03.136 A:middle
buttons for navigation mode,

00:37:03.326 --> 00:37:05.056 A:middle
like a Cancel button or a toggle

00:37:05.056 --> 00:37:05.896 A:middle
for voice prompts.

00:37:06.396 --> 00:37:07.326 A:middle
Looks like we're making pretty

00:37:07.326 --> 00:37:07.906 A:middle
good time, here.

00:37:09.156 --> 00:37:10.096 A:middle
When we arrive at our

00:37:10.096 --> 00:37:11.876 A:middle
destination our app transitions

00:37:11.876 --> 00:37:13.886 A:middle
back out of navigation mode.

00:37:14.956 --> 00:37:16.846 A:middle
That's it for maps with the

00:37:16.846 --> 00:37:17.686 A:middle
CarPlay framework.

00:37:18.316 --> 00:37:19.716 A:middle
Let's review the roads that

00:37:19.716 --> 00:37:21.176 A:middle
we've driven together today.

00:37:22.236 --> 00:37:24.056 A:middle
We've shown you some big CarPlay

00:37:24.056 --> 00:37:25.586 A:middle
audio performance improvements

00:37:25.616 --> 00:37:27.206 A:middle
and optimizations for a better

00:37:27.206 --> 00:37:28.576 A:middle
experience for your users.

00:37:29.266 --> 00:37:31.156 A:middle
We introduced the brand new

00:37:31.156 --> 00:37:33.326 A:middle
CarPlay framework for navigation

00:37:33.326 --> 00:37:34.816 A:middle
and guidance apps in CarPlay.

00:37:35.526 --> 00:37:37.406 A:middle
Your app can work seamlessly on

00:37:37.406 --> 00:37:38.646 A:middle
different strings and input

00:37:38.646 --> 00:37:39.266 A:middle
devices.

00:37:39.516 --> 00:37:41.056 A:middle
You're the navigation experts

00:37:41.136 --> 00:37:42.426 A:middle
and you only have to do what you

00:37:42.426 --> 00:37:44.686 A:middle
do best; draw beautiful maps in

00:37:44.686 --> 00:37:45.756 A:middle
your beautiful apps.

00:37:45.876 --> 00:37:47.546 A:middle
And we'll take care of the rest.

00:37:48.396 --> 00:37:49.836 A:middle
You can draw your map template,

00:37:50.066 --> 00:37:51.576 A:middle
use CPMapTemplate and

00:37:51.576 --> 00:37:53.366 A:middle
CPNavigationSession to manage

00:37:53.366 --> 00:37:54.076 A:middle
navigation.

00:37:54.366 --> 00:37:55.746 A:middle
And show other templates as

00:37:55.746 --> 00:37:57.506 A:middle
needed to present information

00:37:57.636 --> 00:37:59.036 A:middle
and handle user interactions.


00:38:00.246 --> 00:38:01.726 A:middle
If you have any questions for

00:38:01.726 --> 00:38:04.026 A:middle
us, please come meet our team at

00:38:04.026 --> 00:38:05.806 A:middle
the CarPlay lab, later today, in

00:38:05.806 --> 00:38:07.556 A:middle
Lab 11 at 2 p.m.

00:38:07.946 --> 00:38:08.896 A:middle
You can, also, check out

00:38:08.896 --> 00:38:11.226 A:middle
developer.apple.com/carplay for

00:38:11.226 --> 00:38:11.976 A:middle
more details.

00:38:12.496 --> 00:38:14.106 A:middle
Otherwise, you have everything

00:38:14.106 --> 00:38:15.476 A:middle
you need to build a great

00:38:15.476 --> 00:38:16.126 A:middle
CarPlay app.

00:38:16.356 --> 00:38:17.976 A:middle
And we are so excited to see

00:38:17.976 --> 00:38:18.656 A:middle
what you create.

00:38:19.216 --> 00:38:19.936 A:middle
Thank you so much.

00:38:20.516 --> 00:38:26.506 A:middle
[ Applause ]
