WEBVTT

00:00:07.016 --> 00:00:14.500 A:middle
[ Music ]

00:00:20.516 --> 00:00:27.186 A:middle
[ Applause ]

00:00:27.686 --> 00:00:28.656 A:middle
&gt;&gt; Good afternoon, everybody,

00:00:28.656 --> 00:00:30.936 A:middle
and welcome to Object Tracking

00:00:30.936 --> 00:00:31.636 A:middle
in Vision session.

00:00:32.375 --> 00:00:34.186 A:middle
Do you ever need to face and

00:00:34.186 --> 00:00:35.316 A:middle
solve various computer vision

00:00:35.316 --> 00:00:35.796 A:middle
problems?

00:00:36.716 --> 00:00:38.726 A:middle
If you do, and whether your Mac

00:00:39.406 --> 00:00:40.956 A:middle
and iOS, or each of you as

00:00:40.996 --> 00:00:42.416 A:middle
developer, you're in the right

00:00:42.416 --> 00:00:42.816 A:middle
place.

00:00:43.426 --> 00:00:44.586 A:middle
My name is Sergey Kamensky.

00:00:44.866 --> 00:00:46.186 A:middle
I'm excited to share with you

00:00:46.496 --> 00:00:47.646 A:middle
how Vision Framework can help.

00:00:51.356 --> 00:00:52.836 A:middle
Our agenda today consists of

00:00:52.836 --> 00:00:53.456 A:middle
four items.

00:00:53.836 --> 00:00:54.946 A:middle
First, we're going to talk about

00:00:54.946 --> 00:00:55.396 A:middle
Why Vision?

00:00:56.326 --> 00:00:57.596 A:middle
Second, we're going to look

00:00:57.596 --> 00:00:58.966 A:middle
about what's new that we're

00:00:58.966 --> 00:00:59.796 A:middle
introducing this year.


00:01:00.866 --> 00:01:02.016 A:middle
Third, we're going to have a

00:01:02.016 --> 00:01:03.506 A:middle
deeper dive into helping

00:01:03.506 --> 00:01:04.456 A:middle
throughout this Vision API.

00:01:04.906 --> 00:01:06.696 A:middle
And then, finally, we're going

00:01:06.696 --> 00:01:07.816 A:middle
to get to the main topic of our

00:01:07.816 --> 00:01:09.766 A:middle
presentation, which is Tracking

00:01:09.886 --> 00:01:11.006 A:middle
in Vision.

00:01:13.676 --> 00:01:15.626 A:middle
So, why Vision?

00:01:17.616 --> 00:01:19.166 A:middle
When we designed our framework,

00:01:19.416 --> 00:01:20.806 A:middle
we wanted it to be one central

00:01:20.806 --> 00:01:22.186 A:middle
stop to solve all of your

00:01:22.186 --> 00:01:24.366 A:middle
computer vision problems while

00:01:24.366 --> 00:01:26.026 A:middle
first in simple and consistent

00:01:26.026 --> 00:01:28.466 A:middle
interface, one multi-platform;

00:01:28.776 --> 00:01:31.336 A:middle
our framework runs on iOS,

00:01:31.676 --> 00:01:33.036 A:middle
macOS, and tvOS.

00:01:34.226 --> 00:01:35.296 A:middle
We're privacy oriented.

00:01:35.976 --> 00:01:37.376 A:middle
What that means is that your

00:01:37.376 --> 00:01:39.056 A:middle
data never leaves the device.

00:01:39.596 --> 00:01:40.496 A:middle
All the [inaudible] sync is

00:01:40.496 --> 00:01:43.206 A:middle
local, and we're continuously

00:01:43.206 --> 00:01:43.576 A:middle
working.

00:01:44.586 --> 00:01:46.006 A:middle
We're enhancing our existing

00:01:46.006 --> 00:01:48.246 A:middle
algorithms, and we're developing

00:01:48.326 --> 00:01:49.746 A:middle
new ones.

00:01:51.236 --> 00:01:52.786 A:middle
Let's look at the Vision basics.

00:01:53.526 --> 00:01:55.736 A:middle
When you think about how to

00:01:55.736 --> 00:01:57.526 A:middle
interact with Vision API, I want

00:01:57.526 --> 00:01:59.086 A:middle
you to think about in these

00:01:59.086 --> 00:02:01.686 A:middle
terms, what to process, how to


00:01:59.086 --> 00:02:01.686 A:middle
terms, what to process, how to

00:02:01.686 --> 00:02:03.016 A:middle
process, and where to look for

00:02:03.016 --> 00:02:03.326 A:middle
results.

00:02:04.776 --> 00:02:06.076 A:middle
What to process is about a

00:02:06.076 --> 00:02:07.056 A:middle
family of requests.

00:02:07.826 --> 00:02:09.006 A:middle
That is how you tell us what you

00:02:09.006 --> 00:02:09.395 A:middle
want to do.

00:02:10.476 --> 00:02:12.986 A:middle
How is about our request

00:02:12.986 --> 00:02:14.506 A:middle
handlers or engines-- our

00:02:14.506 --> 00:02:16.246 A:middle
request handlers, they're used

00:02:16.246 --> 00:02:18.156 A:middle
to process our requests.

00:02:19.146 --> 00:02:20.906 A:middle
And finally, the results; the

00:02:20.906 --> 00:02:22.546 A:middle
results in Vision come in forms

00:02:22.546 --> 00:02:23.406 A:middle
of observations.

00:02:24.556 --> 00:02:25.316 A:middle
Please take a look at this

00:02:25.316 --> 00:02:25.576 A:middle
slide.

00:02:26.296 --> 00:02:27.546 A:middle
If you were to remember anything

00:02:27.546 --> 00:02:28.986 A:middle
from this presentation, this

00:02:28.986 --> 00:02:29.956 A:middle
slide is probably one of the

00:02:29.956 --> 00:02:30.876 A:middle
more important ones.

00:02:31.326 --> 00:02:32.536 A:middle
This slide presents a

00:02:32.536 --> 00:02:33.866 A:middle
philosophy, how to interact with

00:02:33.866 --> 00:02:36.076 A:middle
Vision, requests, request

00:02:36.706 --> 00:02:37.346 A:middle
handlers,

00:02:38.236 --> 00:02:41.096 A:middle
and observations.

00:02:42.356 --> 00:02:43.186 A:middle
Let's look at the requests

00:02:43.186 --> 00:02:43.566 A:middle
first.

00:02:44.276 --> 00:02:46.126 A:middle
This is a collection of requests

00:02:46.126 --> 00:02:46.866 A:middle
that we offer today.

00:02:46.866 --> 00:02:49.386 A:middle
As you can see, we have various

00:02:49.386 --> 00:02:49.936 A:middle
detectors.

00:02:50.536 --> 00:02:51.696 A:middle
We have Image Registration

00:02:51.696 --> 00:02:52.096 A:middle
Request.

00:02:52.806 --> 00:02:54.626 A:middle
We have two trackers, and we

00:02:54.626 --> 00:02:55.826 A:middle
have a CoreML request.

00:02:56.366 --> 00:02:57.426 A:middle
If you're interested to learn

00:02:57.426 --> 00:02:59.116 A:middle
more about integration of Vision

00:02:59.116 --> 00:03:00.956 A:middle
and CoreML, I invite you to come


00:02:59.116 --> 00:03:00.956 A:middle
and CoreML, I invite you to come

00:03:00.956 --> 00:03:02.246 A:middle
to the next session in this room

00:03:02.516 --> 00:03:03.756 A:middle
where Fran, my colleague, will

00:03:03.756 --> 00:03:05.246 A:middle
cover details of that

00:03:05.246 --> 00:03:05.786 A:middle
integration.

00:03:07.426 --> 00:03:09.546 A:middle
Let's take a look at the request

00:03:09.546 --> 00:03:09.956 A:middle
handlers.

00:03:10.936 --> 00:03:12.226 A:middle
In Vision, we have two.

00:03:12.506 --> 00:03:13.896 A:middle
We have Image Request Handler,

00:03:13.896 --> 00:03:15.766 A:middle
and we have Sequence Request

00:03:15.766 --> 00:03:16.046 A:middle
Handler.

00:03:16.646 --> 00:03:18.446 A:middle
Let's compare the two using this

00:03:18.446 --> 00:03:18.826 A:middle
criteria.

00:03:20.066 --> 00:03:21.196 A:middle
First, we'll look at the Image

00:03:21.196 --> 00:03:21.736 A:middle
Request Handler.

00:03:23.796 --> 00:03:25.326 A:middle
Image request handler is used to

00:03:25.326 --> 00:03:27.996 A:middle
process one or more requests on

00:03:27.996 --> 00:03:28.666 A:middle
the same image.

00:03:30.126 --> 00:03:31.676 A:middle
What it doesn't say, it caches

00:03:31.676 --> 00:03:33.066 A:middle
certain information like image

00:03:33.066 --> 00:03:34.796 A:middle
derivatives and results of

00:03:34.796 --> 00:03:35.636 A:middle
posting requests.

00:03:35.956 --> 00:03:37.216 A:middle
So, other requests in the

00:03:37.216 --> 00:03:38.416 A:middle
pipeline can use that

00:03:38.416 --> 00:03:39.006 A:middle
information.

00:03:39.666 --> 00:03:40.526 A:middle
I'm going to give you an

00:03:40.526 --> 00:03:41.036 A:middle
example.

00:03:41.396 --> 00:03:43.116 A:middle
If a request depends on running

00:03:43.116 --> 00:03:44.606 A:middle
neural network, as you know,

00:03:44.606 --> 00:03:46.436 A:middle
neural network expects images in

00:03:46.436 --> 00:03:47.876 A:middle
certain sizes and certain colors

00:03:47.876 --> 00:03:48.276 A:middle
schemes.

00:03:48.606 --> 00:03:49.926 A:middle
Let's say your neural network

00:03:50.076 --> 00:03:52.706 A:middle
expects 500 by 500 black and

00:03:52.706 --> 00:03:52.906 A:middle
white.

00:03:53.926 --> 00:03:55.446 A:middle
It's very rare that you'll get

00:03:55.446 --> 00:03:57.006 A:middle
user input just in that format.

00:03:57.236 --> 00:03:58.786 A:middle
So, what we'll do inside, we'll

00:03:58.786 --> 00:03:59.626 A:middle
convert the image.

00:03:59.856 --> 00:04:01.066 A:middle
We'll feed it into that neural


00:03:59.856 --> 00:04:01.066 A:middle
We'll feed it into that neural

00:04:01.066 --> 00:04:02.186 A:middle
network to get results for the

00:04:02.186 --> 00:04:03.606 A:middle
current request, but we will

00:04:03.606 --> 00:04:05.286 A:middle
also cache that information on

00:04:05.286 --> 00:04:06.266 A:middle
the request handler object.

00:04:06.706 --> 00:04:07.916 A:middle
So, the next request, when it

00:04:07.916 --> 00:04:09.366 A:middle
comes, if it needs to use the

00:04:09.366 --> 00:04:10.946 A:middle
same format, it's already there,

00:04:11.016 --> 00:04:11.816 A:middle
and it doesn't need to be

00:04:11.816 --> 00:04:12.356 A:middle
recomputed.

00:04:13.246 --> 00:04:14.866 A:middle
We'll also cache results that we

00:04:14.866 --> 00:04:16.386 A:middle
get from the requests so other

00:04:16.386 --> 00:04:17.296 A:middle
requests can use it in

00:04:17.296 --> 00:04:18.416 A:middle
pipelines, and we're going to

00:04:18.416 --> 00:04:20.176 A:middle
look at pipelines going forward

00:04:20.176 --> 00:04:21.036 A:middle
in this presentation.

00:04:21.766 --> 00:04:23.636 A:middle
Let's take a look at the

00:04:23.636 --> 00:04:24.536 A:middle
Sequence Request Handler.

00:04:25.626 --> 00:04:26.906 A:middle
Sequence request handler is used

00:04:27.196 --> 00:04:28.366 A:middle
to process a particular

00:04:28.366 --> 00:04:30.626 A:middle
operation like tracking in a

00:04:30.626 --> 00:04:31.566 A:middle
sequence of frames.

00:04:32.506 --> 00:04:34.256 A:middle
What it does inside, it caches

00:04:34.256 --> 00:04:35.886 A:middle
the state of that operation from

00:04:35.886 --> 00:04:37.506 A:middle
frame to frame to frame for the

00:04:37.506 --> 00:04:38.256 A:middle
entire sequence.

00:04:39.656 --> 00:04:41.106 A:middle
In Vision, it's used to process

00:04:41.506 --> 00:04:43.016 A:middle
tracking and image registration

00:04:43.016 --> 00:04:43.476 A:middle
requests.

00:04:43.866 --> 00:04:45.516 A:middle
All other requests are processed

00:04:45.516 --> 00:04:46.576 A:middle
with our Image Request Handler.

00:04:50.856 --> 00:04:52.196 A:middle
Let's look at the results.

00:04:52.776 --> 00:04:53.996 A:middle
Results in Vision coming from

00:04:54.146 --> 00:04:54.876 A:middle
observations.

00:04:55.406 --> 00:04:57.186 A:middle
Observations is a collection of

00:04:57.236 --> 00:04:59.336 A:middle
classes derived from

00:04:59.946 --> 00:05:01.026 A:middle
VNObservation class.


00:04:59.946 --> 00:05:01.026 A:middle
VNObservation class.

00:05:01.616 --> 00:05:02.746 A:middle
How do we get an observation?

00:05:03.616 --> 00:05:04.886 A:middle
Well, first, the most natural

00:05:04.886 --> 00:05:06.566 A:middle
way is when the request is

00:05:06.566 --> 00:05:07.746 A:middle
processed, you're going to look

00:05:07.746 --> 00:05:08.886 A:middle
at the results property of that

00:05:08.886 --> 00:05:10.256 A:middle
request, and that results

00:05:10.256 --> 00:05:11.356 A:middle
property is a collection of

00:05:11.356 --> 00:05:11.966 A:middle
observations.

00:05:11.966 --> 00:05:13.516 A:middle
That's how we tell you results

00:05:13.726 --> 00:05:14.306 A:middle
of processing.

00:05:14.976 --> 00:05:18.606 A:middle
The second way is you create it

00:05:18.606 --> 00:05:18.996 A:middle
manually.

00:05:19.696 --> 00:05:20.866 A:middle
We're going to look at examples

00:05:20.866 --> 00:05:22.006 A:middle
for other presentations how to

00:05:22.006 --> 00:05:22.336 A:middle
do both.

00:05:26.636 --> 00:05:28.886 A:middle
Let's now look at what's new

00:05:28.886 --> 00:05:29.636 A:middle
coming this year.

00:05:30.476 --> 00:05:32.286 A:middle
First, we have our new face

00:05:32.286 --> 00:05:32.706 A:middle
detector.

00:05:33.206 --> 00:05:36.336 A:middle
Now, we can detect more faces,

00:05:37.196 --> 00:05:37.986 A:middle
and we're now

00:05:38.096 --> 00:05:39.096 A:middle
orientation-agnostic.

00:05:39.886 --> 00:05:40.726 A:middle
Let's look at example.

00:05:41.186 --> 00:05:42.256 A:middle
On the left-hand side, you can

00:05:42.256 --> 00:05:43.776 A:middle
see an image with seven faces in

00:05:43.776 --> 00:05:45.806 A:middle
it, and we could process that

00:05:45.806 --> 00:05:46.906 A:middle
image with the detector from

00:05:46.906 --> 00:05:48.236 A:middle
last year, we can detect only

00:05:48.236 --> 00:05:50.206 A:middle
three faces, and those faces are

00:05:50.406 --> 00:05:51.746 A:middle
the ones that are close to the

00:05:51.746 --> 00:05:52.596 A:middle
upright position.

00:05:53.966 --> 00:05:55.216 A:middle
If you process the same image

00:05:55.216 --> 00:05:56.596 A:middle
with the face detector that's

00:05:57.016 --> 00:05:58.426 A:middle
coming this year, as you can

00:05:58.426 --> 00:05:59.866 A:middle
see, all faces can be detected,

00:05:59.996 --> 00:06:01.256 A:middle
and orientation is not a problem


00:05:59.996 --> 00:06:01.256 A:middle
and orientation is not a problem

00:06:01.256 --> 00:06:01.556 A:middle
anymore.

00:06:01.556 --> 00:06:04.516 A:middle
Let's look a little bit more

00:06:04.516 --> 00:06:04.966 A:middle
into details.

00:06:05.136 --> 00:06:06.096 A:middle
Thank you.

00:06:07.176 --> 00:06:09.500 A:middle
[ Applause ]

00:06:15.186 --> 00:06:17.976 A:middle
So, first, our new face detector

00:06:18.356 --> 00:06:20.226 A:middle
uses the same API as from last

00:06:20.226 --> 00:06:20.456 A:middle
year.

00:06:20.836 --> 00:06:22.196 A:middle
The only difference is if you

00:06:22.196 --> 00:06:23.426 A:middle
want to specify revision, you

00:06:23.426 --> 00:06:24.636 A:middle
need to overwrite a revision

00:06:24.636 --> 00:06:26.236 A:middle
property of that request and set

00:06:26.236 --> 00:06:28.056 A:middle
it explicitly to User Vision #2.

00:06:28.496 --> 00:06:29.196 A:middle
Again, I'll talk about the

00:06:29.196 --> 00:06:30.336 A:middle
reasons right on the next slide.

00:06:31.556 --> 00:06:33.466 A:middle
We're also introducing two new

00:06:33.466 --> 00:06:34.116 A:middle
properties.

00:06:34.566 --> 00:06:36.516 A:middle
One is roll, which is when the

00:06:36.516 --> 00:06:38.126 A:middle
head rotates like this, and the

00:06:38.126 --> 00:06:39.856 A:middle
other one is yaw, which when the

00:06:39.856 --> 00:06:41.500 A:middle
head rotates around the neck.

00:06:45.116 --> 00:06:45.676 A:middle
Revisions.

00:06:46.616 --> 00:06:47.676 A:middle
What happens with Vision where

00:06:47.676 --> 00:06:48.696 A:middle
when we need to introducing a

00:06:48.696 --> 00:06:50.156 A:middle
new algorithm, we don't

00:06:50.156 --> 00:06:51.246 A:middle
deprecate the old one right

00:06:51.246 --> 00:06:51.516 A:middle
away.

00:06:52.146 --> 00:06:53.486 A:middle
Instead, we're going to keep for

00:06:53.486 --> 00:06:55.026 A:middle
some time both revisions or,

00:06:55.026 --> 00:06:56.396 A:middle
maybe going forward, even more,

00:06:56.956 --> 00:06:57.696 A:middle
simultaneously.

00:06:58.496 --> 00:06:59.896 A:middle
You tell us which one you want

00:06:59.896 --> 00:07:01.186 A:middle
to work with by specifying


00:06:59.896 --> 00:07:01.186 A:middle
to work with by specifying

00:07:01.186 --> 00:07:02.256 A:middle
revision property of the

00:07:02.256 --> 00:07:02.696 A:middle
request.

00:07:04.066 --> 00:07:04.966 A:middle
So, that's the explicit

00:07:04.966 --> 00:07:05.376 A:middle
behavior.

00:07:05.866 --> 00:07:06.936 A:middle
But we also have a default

00:07:06.936 --> 00:07:07.376 A:middle
behavior.

00:07:07.876 --> 00:07:09.156 A:middle
If you create a request object,

00:07:09.336 --> 00:07:10.566 A:middle
and you don't tell us anything

00:07:10.566 --> 00:07:12.326 A:middle
at all, and you start processing

00:07:12.326 --> 00:07:13.556 A:middle
that request, here's what's

00:07:13.556 --> 00:07:14.916 A:middle
going to happen.

00:07:14.916 --> 00:07:17.076 A:middle
By default, you're getting the

00:07:17.076 --> 00:07:18.956 A:middle
latest revision of the request

00:07:19.376 --> 00:07:20.436 A:middle
that your app is linked

00:07:20.436 --> 00:07:22.516 A:middle
against-- of the SDK that your

00:07:22.516 --> 00:07:23.596 A:middle
app is linked against.

00:07:23.986 --> 00:07:25.376 A:middle
This is important to understand,

00:07:25.376 --> 00:07:26.276 A:middle
and I'll give you an example.

00:07:27.116 --> 00:07:28.386 A:middle
Let's say your app is linked

00:07:28.386 --> 00:07:29.546 A:middle
against there's the SDK from the

00:07:29.546 --> 00:07:30.056 A:middle
last year.

00:07:30.696 --> 00:07:32.306 A:middle
Last year, we had only single

00:07:32.306 --> 00:07:32.746 A:middle
detector.

00:07:33.316 --> 00:07:34.406 A:middle
So, this is the detector you're

00:07:34.406 --> 00:07:36.436 A:middle
going to get, even if you take

00:07:36.436 --> 00:07:37.506 A:middle
that app and without a

00:07:37.506 --> 00:07:38.676 A:middle
compilation, run it on the

00:07:38.676 --> 00:07:39.366 A:middle
current OS.

00:07:40.586 --> 00:07:42.456 A:middle
If, on the other hand, you

00:07:42.456 --> 00:07:44.026 A:middle
recompile your app with the

00:07:44.026 --> 00:07:45.756 A:middle
current SDK without changing a

00:07:45.756 --> 00:07:47.466 A:middle
single line or coordinate, and

00:07:47.466 --> 00:07:48.806 A:middle
you run it on the current OS,

00:07:48.926 --> 00:07:49.986 A:middle
you're going to get by default

00:07:49.986 --> 00:07:51.436 A:middle
revision #2 because this is the

00:07:51.436 --> 00:07:54.716 A:middle
way this from the current SDK.

00:07:54.946 --> 00:07:56.016 A:middle
We highly recommend you to

00:07:56.016 --> 00:07:57.646 A:middle
future-proof your apps, but

00:07:57.646 --> 00:07:58.906 A:middle
again it's exclusive to Vision.

00:07:59.436 --> 00:08:01.246 A:middle
What you get is, first, you get


00:07:59.436 --> 00:08:01.246 A:middle
What you get is, first, you get

00:08:01.246 --> 00:08:02.416 A:middle
the deterministic behavior.

00:08:03.026 --> 00:08:04.846 A:middle
You know performance of the

00:08:04.846 --> 00:08:06.636 A:middle
algorithm that you're quoting

00:08:06.636 --> 00:08:06.976 A:middle
against.

00:08:07.356 --> 00:08:08.356 A:middle
You know what to expect.

00:08:08.846 --> 00:08:10.526 A:middle
We also can be-- you can get

00:08:10.526 --> 00:08:12.596 A:middle
your app to be future-proof from

00:08:12.596 --> 00:08:14.106 A:middle
the errors like, for example, if

00:08:14.106 --> 00:08:15.606 A:middle
we deprecate certain revision

00:08:15.796 --> 00:08:16.956 A:middle
going forward, like a couple of

00:08:16.956 --> 00:08:18.766 A:middle
years from now, then you can

00:08:18.836 --> 00:08:21.186 A:middle
[inaudible]against that

00:08:22.156 --> 00:08:22.306 A:middle
[inaudible] today.

00:08:25.176 --> 00:08:26.996 A:middle
Let's have a deeper dive into

00:08:27.106 --> 00:08:31.916 A:middle
how to interact with Vision API.

00:08:32.066 --> 00:08:32.866 A:middle
First, we're going to look at

00:08:32.866 --> 00:08:33.986 A:middle
the example with Image Request

00:08:33.986 --> 00:08:34.226 A:middle
Handler.

00:08:35.676 --> 00:08:36.716 A:middle
So, as you remember, image

00:08:36.716 --> 00:08:37.706 A:middle
request handler is used to

00:08:37.706 --> 00:08:39.996 A:middle
process one or more requests on

00:08:39.996 --> 00:08:40.676 A:middle
the same image.

00:08:41.316 --> 00:08:44.516 A:middle
It's optimized by caching some

00:08:44.516 --> 00:08:45.446 A:middle
information like image

00:08:45.446 --> 00:08:46.956 A:middle
derivatives and request results.

00:08:47.316 --> 00:08:49.206 A:middle
So, the consecutive requests

00:08:49.286 --> 00:08:50.636 A:middle
that are coming to be processed

00:08:51.136 --> 00:08:52.236 A:middle
can use this information.

00:08:53.446 --> 00:08:57.026 A:middle
Let's look at code sample.

00:08:57.026 --> 00:08:58.216 A:middle
Before we dive into the code

00:08:58.216 --> 00:08:59.286 A:middle
sample, I just want to emphasize

00:08:59.286 --> 00:09:00.546 A:middle
a couple of points about the


00:08:59.286 --> 00:09:00.546 A:middle
a couple of points about the

00:09:01.126 --> 00:09:01.866 A:middle
code samples in this

00:09:01.866 --> 00:09:02.506 A:middle
presentation.

00:09:03.376 --> 00:09:04.956 A:middle
The error handling is not a good

00:09:04.956 --> 00:09:06.136 A:middle
example how errors should be

00:09:06.136 --> 00:09:06.526 A:middle
handled.

00:09:06.526 --> 00:09:07.796 A:middle
I use a short version of try,

00:09:07.876 --> 00:09:09.026 A:middle
and I use [inaudible].

00:09:09.746 --> 00:09:11.136 A:middle
This is just to simplify the

00:09:11.136 --> 00:09:11.686 A:middle
examples.

00:09:11.996 --> 00:09:12.906 A:middle
When you code your apps, you

00:09:12.906 --> 00:09:14.356 A:middle
probably should use guards to

00:09:14.356 --> 00:09:15.526 A:middle
protect against unwanted

00:09:15.526 --> 00:09:15.946 A:middle
behavior.

00:09:17.186 --> 00:09:20.086 A:middle
I also use Image URL when I

00:09:20.256 --> 00:09:22.346 A:middle
create my image request handler

00:09:22.346 --> 00:09:24.416 A:middle
objects, and that is just a

00:09:24.416 --> 00:09:26.716 A:middle
place on the SSD where the file

00:09:26.716 --> 00:09:27.236 A:middle
is located.

00:09:28.516 --> 00:09:29.416 A:middle
Now, let's look at example.

00:09:30.746 --> 00:09:32.046 A:middle
First, I'm going to create my

00:09:32.206 --> 00:09:34.346 A:middle
detect faces request object.

00:09:35.136 --> 00:09:36.476 A:middle
Then, I'm going to create my

00:09:36.476 --> 00:09:38.036 A:middle
image request handler passing

00:09:38.036 --> 00:09:40.036 A:middle
the image URL with the file of

00:09:40.036 --> 00:09:41.866 A:middle
the image where the faces should

00:09:41.866 --> 00:09:42.336 A:middle
be located.

00:09:43.246 --> 00:09:44.526 A:middle
Then, I'm going to ask my

00:09:44.526 --> 00:09:45.716 A:middle
request handler to process my

00:09:45.716 --> 00:09:46.186 A:middle
request.

00:09:46.706 --> 00:09:47.796 A:middle
And finally, I'm going to look

00:09:47.796 --> 00:09:48.500 A:middle
at the results.

00:09:50.046 --> 00:09:50.506 A:middle
Very simple.

00:09:51.016 --> 00:09:52.276 A:middle
If I had an image with a single

00:09:52.276 --> 00:09:54.036 A:middle
face in it, my results would

00:09:54.036 --> 00:09:55.330 A:middle
look something like this.


00:10:00.136 --> 00:10:01.076 A:middle
So, what I get back?

00:10:01.076 --> 00:10:02.626 A:middle
I get back a face observation

00:10:02.626 --> 00:10:04.116 A:middle
object, and the one of the more

00:10:04.116 --> 00:10:05.496 A:middle
important fields in that object

00:10:05.496 --> 00:10:06.576 A:middle
is the bounding box where the

00:10:06.576 --> 00:10:07.336 A:middle
face is located.

00:10:09.116 --> 00:10:10.836 A:middle
Let's take a look at this slide

00:10:10.836 --> 00:10:11.156 A:middle
again.

00:10:11.156 --> 00:10:12.976 A:middle
The first three lines is pretty

00:10:12.976 --> 00:10:14.446 A:middle
much all you need to find all

00:10:14.446 --> 00:10:15.426 A:middle
the faces in the image.

00:10:15.636 --> 00:10:16.296 A:middle
Isn't that cool?

00:10:18.516 --> 00:10:22.306 A:middle
[ Applause ]

00:10:22.806 --> 00:10:23.656 A:middle
Let's now take a look at the

00:10:23.656 --> 00:10:25.246 A:middle
Sequence Request Handler.

00:10:27.636 --> 00:10:28.956 A:middle
Well, sequence request handler,

00:10:28.956 --> 00:10:29.846 A:middle
as you remember, is used to

00:10:29.846 --> 00:10:31.726 A:middle
process a particular operation

00:10:31.726 --> 00:10:33.566 A:middle
like tracking on a sequence of

00:10:33.566 --> 00:10:34.006 A:middle
frames.

00:10:35.486 --> 00:10:36.646 A:middle
Let's look at code sample, and

00:10:36.646 --> 00:10:38.406 A:middle
this code sample is pretty much

00:10:38.406 --> 00:10:40.646 A:middle
the simplest tracking sequence

00:10:40.646 --> 00:10:42.246 A:middle
we can imagine with Vision API.

00:10:43.556 --> 00:10:45.056 A:middle
First, I'm going to create my

00:10:45.226 --> 00:10:46.096 A:middle
Sequence Request Handler.

00:10:47.416 --> 00:10:49.116 A:middle
Then, I need to specify which

00:10:49.116 --> 00:10:50.436 A:middle
object I want to track, and I'm

00:10:50.436 --> 00:10:52.126 A:middle
going to do that by creating a

00:10:52.126 --> 00:10:53.926 A:middle
detected object observation,

00:10:53.926 --> 00:10:55.536 A:middle
which gets us a parameter

00:10:55.876 --> 00:10:57.496 A:middle
location, a bounding box.

00:10:58.806 --> 00:11:00.256 A:middle
Then, I'm going to start my


00:10:58.806 --> 00:11:00.256 A:middle
Then, I'm going to start my

00:11:00.256 --> 00:11:01.056 A:middle
tracking signals.

00:11:01.786 --> 00:11:03.486 A:middle
In this example, I'm going to

00:11:03.486 --> 00:11:04.676 A:middle
track my object for five

00:11:04.676 --> 00:11:05.626 A:middle
consecutive frames.

00:11:06.896 --> 00:11:07.876 A:middle
Let's look how the sequence

00:11:07.876 --> 00:11:08.236 A:middle
works.

00:11:08.826 --> 00:11:10.636 A:middle
First, I have a frame feeder

00:11:10.636 --> 00:11:11.946 A:middle
object, which in your case could

00:11:11.946 --> 00:11:13.206 A:middle
be like camera feed, for

00:11:13.206 --> 00:11:13.566 A:middle
example.

00:11:14.326 --> 00:11:15.546 A:middle
This is where I get my frames.

00:11:15.546 --> 00:11:18.416 A:middle
I get my frame, I create my

00:11:18.416 --> 00:11:19.666 A:middle
request object, passing the

00:11:19.666 --> 00:11:21.456 A:middle
detected object observation as a

00:11:21.456 --> 00:11:23.886 A:middle
parameter with its initializer.

00:11:24.326 --> 00:11:25.706 A:middle
And that's something that I just

00:11:25.706 --> 00:11:26.876 A:middle
created before the loop started.

00:11:27.496 --> 00:11:29.596 A:middle
Then, I'm going to ask my

00:11:29.596 --> 00:11:31.296 A:middle
request handler to process

00:11:31.296 --> 00:11:31.666 A:middle
request.

00:11:32.296 --> 00:11:34.396 A:middle
I'm going to look at the

00:11:34.396 --> 00:11:35.646 A:middle
results, and this is the place

00:11:35.646 --> 00:11:37.166 A:middle
where I should be analyzing

00:11:37.166 --> 00:11:38.376 A:middle
results and doing something with

00:11:38.376 --> 00:11:38.626 A:middle
them.

00:11:39.246 --> 00:11:41.766 A:middle
And the last step, which is very

00:11:41.766 --> 00:11:43.426 A:middle
important, what I'm doing here,

00:11:43.776 --> 00:11:44.956 A:middle
I'm taking the results from the

00:11:44.956 --> 00:11:46.196 A:middle
current iteration, and I'm

00:11:46.236 --> 00:11:47.376 A:middle
passing it to the next

00:11:47.376 --> 00:11:48.026 A:middle
iteration.

00:11:48.356 --> 00:11:49.426 A:middle
So, when the next iteration

00:11:49.426 --> 00:11:50.846 A:middle
request is created, I want to

00:11:50.846 --> 00:11:51.846 A:middle
see those results inside.

00:11:51.846 --> 00:11:53.456 A:middle
If I were to want it in a

00:11:53.606 --> 00:11:54.786 A:middle
sequence of five frames, my

00:11:54.786 --> 00:11:55.756 A:middle
results would look something

00:11:55.756 --> 00:11:55.976 A:middle
like this.


00:12:06.196 --> 00:12:07.726 A:middle
How to create a request object.

00:12:07.726 --> 00:12:10.616 A:middle
Well, first, it's important to

00:12:10.616 --> 00:12:11.846 A:middle
understand that our requests

00:12:11.846 --> 00:12:13.066 A:middle
have two types of properties.

00:12:13.416 --> 00:12:14.706 A:middle
There are mandatory properties

00:12:14.816 --> 00:12:15.766 A:middle
and there are optional

00:12:15.766 --> 00:12:16.346 A:middle
properties.

00:12:16.696 --> 00:12:18.406 A:middle
And mandatory properties, as the

00:12:18.406 --> 00:12:20.066 A:middle
name suggests, they need to be

00:12:20.066 --> 00:12:21.826 A:middle
provided via initializer in

00:12:21.826 --> 00:12:23.696 A:middle
order to be able to create a

00:12:23.696 --> 00:12:24.436 A:middle
request object.

00:12:24.436 --> 00:12:26.826 A:middle
Let's look at the example.

00:12:28.216 --> 00:12:29.766 A:middle
There is something that would

00:12:29.766 --> 00:12:30.926 A:middle
just go in the previous slide.

00:12:31.636 --> 00:12:33.046 A:middle
I detected object observation

00:12:33.046 --> 00:12:34.366 A:middle
that is passed into the

00:12:34.536 --> 00:12:35.686 A:middle
initializer of the [inaudible]

00:12:35.686 --> 00:12:37.676 A:middle
object request is an example of

00:12:37.676 --> 00:12:39.396 A:middle
a mandatory property.

00:12:40.356 --> 00:12:41.486 A:middle
We also have optional

00:12:41.486 --> 00:12:42.066 A:middle
properties.

00:12:43.466 --> 00:12:44.276 A:middle
By the way, both types of

00:12:44.276 --> 00:12:45.396 A:middle
properties are declared.

00:12:45.866 --> 00:12:47.026 A:middle
You can find them in the place

00:12:47.026 --> 00:12:49.906 A:middle
where the request object is

00:12:50.696 --> 00:12:50.946 A:middle
declared.

00:12:51.016 --> 00:12:53.076 A:middle
Optional properties is separate

00:12:53.076 --> 00:12:54.306 A:middle
properties where we have

00:12:54.336 --> 00:12:55.506 A:middle
meaningful defaults for them.

00:12:55.976 --> 00:12:57.306 A:middle
So, we'll initialize them for

00:12:57.306 --> 00:12:58.776 A:middle
you, but you can override them

00:12:58.776 --> 00:12:59.656 A:middle
later if you need to.


00:13:00.546 --> 00:13:05.906 A:middle
Let's look at the example.

00:13:05.906 --> 00:13:06.776 A:middle
What I'm doing here, I'm

00:13:06.776 --> 00:13:08.106 A:middle
breaking my detect barcodes

00:13:08.106 --> 00:13:08.756 A:middle
request object.

00:13:09.616 --> 00:13:11.256 A:middle
If I were to do nothing else and

00:13:11.256 --> 00:13:12.856 A:middle
just took my request object and

00:13:12.856 --> 00:13:15.256 A:middle
fed it into request handler, I

00:13:15.256 --> 00:13:16.586 A:middle
would be working on the entire

00:13:16.586 --> 00:13:18.416 A:middle
image, looking for my barcodes.

00:13:19.176 --> 00:13:20.066 A:middle
What I'm going to do here

00:13:20.066 --> 00:13:22.316 A:middle
instead, I'm going to specify a

00:13:22.316 --> 00:13:23.746 A:middle
small portion like a central

00:13:23.746 --> 00:13:24.516 A:middle
property image.

00:13:24.966 --> 00:13:25.716 A:middle
There's this where I want to

00:13:25.716 --> 00:13:27.506 A:middle
focus to look for my barcodes,

00:13:27.556 --> 00:13:29.186 A:middle
and I'm going to overwrite my

00:13:29.186 --> 00:13:30.466 A:middle
region of interest property with

00:13:30.466 --> 00:13:30.696 A:middle
that.

00:13:31.476 --> 00:13:32.886 A:middle
If I take my request object now

00:13:32.886 --> 00:13:33.976 A:middle
and feed it into request

00:13:33.976 --> 00:13:35.046 A:middle
handler, I'm going to be

00:13:35.046 --> 00:13:36.406 A:middle
focusing on the smaller portion

00:13:36.406 --> 00:13:37.116 A:middle
of the image only.

00:13:38.166 --> 00:13:39.586 A:middle
A region of interest property

00:13:39.776 --> 00:13:41.496 A:middle
here is an example of the

00:13:41.496 --> 00:13:42.646 A:middle
optional property that we have.

00:13:43.776 --> 00:13:45.026 A:middle
What's important to understand

00:13:45.026 --> 00:13:47.896 A:middle
here also that once you get a

00:13:47.896 --> 00:13:49.186 A:middle
request object in your hands,

00:13:49.436 --> 00:13:50.956 A:middle
it's a fully constructed object.

00:13:51.656 --> 00:13:52.546 A:middle
It's the object that you can

00:13:52.546 --> 00:13:54.226 A:middle
start working with whenever you

00:13:54.226 --> 00:13:55.366 A:middle
have constructed objects.

00:13:55.716 --> 00:13:56.736 A:middle
If you decide to overwrite

00:13:56.736 --> 00:13:58.396 A:middle
certain properties later on,

00:13:58.716 --> 00:13:59.766 A:middle
you're welcome to do so.


00:14:00.036 --> 00:14:01.076 A:middle
But whenever you have the

00:14:01.076 --> 00:14:02.816 A:middle
object, it's the object that you

00:14:02.816 --> 00:14:04.500 A:middle
can work with.

00:14:07.536 --> 00:14:08.526 A:middle
One thing that's not maybe on

00:14:08.526 --> 00:14:09.776 A:middle
this slide is, which will be

00:14:09.776 --> 00:14:10.866 A:middle
covered in more details in the

00:14:10.866 --> 00:14:14.556 A:middle
next session, is to look at the

00:14:14.556 --> 00:14:15.406 A:middle
bounding boxes.

00:14:16.046 --> 00:14:18.456 A:middle
As you can see, the coordinates

00:14:18.456 --> 00:14:20.306 A:middle
that we receive are normalized.

00:14:20.856 --> 00:14:22.576 A:middle
They are from 0 to 1 and they're

00:14:22.576 --> 00:14:23.976 A:middle
always relative to the lower

00:14:23.976 --> 00:14:24.446 A:middle
left corner.

00:14:25.146 --> 00:14:26.166 A:middle
The next session, which is

00:14:26.166 --> 00:14:27.506 A:middle
CoreML integration with Vision,

00:14:27.716 --> 00:14:29.196 A:middle
will cover this aspect in more

00:14:29.196 --> 00:14:29.686 A:middle
details.

00:14:33.336 --> 00:14:34.806 A:middle
Let's look at how to understand

00:14:34.806 --> 00:14:35.256 A:middle
results.

00:14:35.906 --> 00:14:38.616 A:middle
As we said, results in Vision

00:14:38.616 --> 00:14:40.266 A:middle
come in forms of observations.

00:14:41.766 --> 00:14:43.726 A:middle
Observations are populated

00:14:43.726 --> 00:14:45.046 A:middle
through results property of the

00:14:45.046 --> 00:14:45.696 A:middle
request object.

00:14:46.466 --> 00:14:47.526 A:middle
How many observations can you

00:14:47.526 --> 00:14:47.806 A:middle
get?

00:14:48.396 --> 00:14:51.726 A:middle
All the collection be 0 to N.

00:14:52.596 --> 00:14:53.726 A:middle
There's one more aspect here.

00:14:54.046 --> 00:14:55.796 A:middle
If you get results set to nil,

00:14:55.796 --> 00:14:57.096 A:middle
that means that the [inaudible]

00:14:57.096 --> 00:14:58.286 A:middle
single request failed.

00:14:58.806 --> 00:15:00.516 A:middle
This is different than getting 0


00:14:58.806 --> 00:15:00.516 A:middle
This is different than getting 0

00:15:00.516 --> 00:15:01.256 A:middle
observations met.

00:15:01.956 --> 00:15:03.666 A:middle
Getting 0 observations met means

00:15:03.666 --> 00:15:04.736 A:middle
that whatever you were looking

00:15:04.736 --> 00:15:05.946 A:middle
for is just not there.

00:15:05.946 --> 00:15:08.796 A:middle
As an example, let's say you run

00:15:08.796 --> 00:15:09.526 A:middle
a face detector.

00:15:10.816 --> 00:15:11.846 A:middle
If you feed an image with no

00:15:11.846 --> 00:15:13.306 A:middle
faces in it, naturally, you will

00:15:13.306 --> 00:15:14.476 A:middle
get 0 observations met.

00:15:15.416 --> 00:15:16.596 A:middle
On the other hand, if you feed

00:15:16.596 --> 00:15:18.336 A:middle
the image with one or more faces

00:15:18.726 --> 00:15:20.896 A:middle
in it, you'll get appropriate

00:15:20.896 --> 00:15:22.606 A:middle
number of observations met.

00:15:24.036 --> 00:15:25.506 A:middle
Another important property of

00:15:25.506 --> 00:15:27.196 A:middle
observations is that

00:15:27.326 --> 00:15:28.446 A:middle
observations are immutable.

00:15:28.446 --> 00:15:30.016 A:middle
We will look at the example

00:15:30.576 --> 00:15:31.696 A:middle
where it's used.

00:15:32.196 --> 00:15:34.286 A:middle
There are two more properties

00:15:34.286 --> 00:15:34.996 A:middle
that I want to pay your

00:15:34.996 --> 00:15:36.406 A:middle
attention to, and they are both

00:15:36.406 --> 00:15:37.566 A:middle
declared in the base [inaudible]

00:15:37.566 --> 00:15:38.846 A:middle
for all observations.

00:15:39.286 --> 00:15:40.416 A:middle
One is the unique ID.

00:15:41.056 --> 00:15:42.586 A:middle
This unique ID identifies the

00:15:42.586 --> 00:15:44.326 A:middle
processing step for this

00:15:44.326 --> 00:15:45.226 A:middle
particular-- where this

00:15:45.226 --> 00:15:46.666 A:middle
particular result was created.

00:15:47.576 --> 00:15:48.836 A:middle
Another one is the confidence

00:15:48.836 --> 00:15:49.136 A:middle
level.

00:15:50.376 --> 00:15:51.756 A:middle
Confidence level tells you how

00:15:51.756 --> 00:15:53.126 A:middle
confident the algorithm was

00:15:53.376 --> 00:15:54.316 A:middle
producing the results.

00:15:55.596 --> 00:15:57.756 A:middle
The confidence is in the range

00:15:57.756 --> 00:15:58.526 A:middle
from 0 to 1.

00:15:59.176 --> 00:16:00.646 A:middle
Again, this topic also will be


00:15:59.176 --> 00:16:00.646 A:middle
Again, this topic also will be

00:16:00.646 --> 00:16:02.166 A:middle
covered in the next session in

00:16:02.166 --> 00:16:03.366 A:middle
more details.

00:16:06.876 --> 00:16:08.086 A:middle
Let's look at the request

00:16:08.086 --> 00:16:08.706 A:middle
pipelines.

00:16:09.786 --> 00:16:10.666 A:middle
So, what is a pipeline?

00:16:11.736 --> 00:16:13.286 A:middle
Let's say I have three requests,

00:16:13.286 --> 00:16:14.266 A:middle
and it happens to be that

00:16:14.266 --> 00:16:16.476 A:middle
request #1 depends on execution

00:16:16.476 --> 00:16:18.136 A:middle
of request #2, which in turn

00:16:18.396 --> 00:16:20.226 A:middle
depends on execution of request

00:16:20.826 --> 00:16:21.936 A:middle
#3.

00:16:22.126 --> 00:16:23.456 A:middle
How do we process the sequence

00:16:23.966 --> 00:16:25.456 A:middle
while the processing is done in

00:16:25.456 --> 00:16:26.246 A:middle
the opposite order?

00:16:26.806 --> 00:16:27.676 A:middle
What I'm going to do here,

00:16:27.846 --> 00:16:29.246 A:middle
first, I'm going to process my

00:16:29.246 --> 00:16:30.106 A:middle
request #3.

00:16:30.476 --> 00:16:31.456 A:middle
I'm going to get the results

00:16:31.456 --> 00:16:32.876 A:middle
from that request and feed it

00:16:32.876 --> 00:16:33.876 A:middle
into request #2.

00:16:34.086 --> 00:16:35.556 A:middle
I'm going to do exactly the same

00:16:35.556 --> 00:16:36.516 A:middle
with request #2.

00:16:36.786 --> 00:16:38.316 A:middle
And finally, I will process my

00:16:38.316 --> 00:16:39.116 A:middle
request #1.

00:16:41.296 --> 00:16:43.036 A:middle
Let's look at the examples of

00:16:43.036 --> 00:16:45.976 A:middle
how to run request pipeline in

00:16:45.976 --> 00:16:47.636 A:middle
implicit and explicit order.

00:16:48.326 --> 00:16:49.196 A:middle
We're going to look at the next

00:16:49.196 --> 00:16:50.426 A:middle
two slides in these two use

00:16:50.426 --> 00:16:52.126 A:middle
cases, and we're going to run

00:16:52.126 --> 00:16:53.746 A:middle
our face landmarks detector.

00:16:54.386 --> 00:16:55.936 A:middle
As you probably know, landmarks,

00:16:55.996 --> 00:16:58.026 A:middle
face landmarks are the features

00:16:58.026 --> 00:16:58.526 A:middle
on the face.

00:16:58.526 --> 00:17:00.236 A:middle
It's both your eyes, eyebrows,


00:16:58.526 --> 00:17:00.236 A:middle
It's both your eyes, eyebrows,

00:17:00.236 --> 00:17:01.726 A:middle
nose, and mouth location on your

00:17:01.726 --> 00:17:02.016 A:middle
face.

00:17:02.996 --> 00:17:05.425 A:middle
Let's first look at how to do it

00:17:05.425 --> 00:17:05.955 A:middle
implicitly.

00:17:13.675 --> 00:17:14.955 A:middle
I have a simple [inaudible] a

00:17:14.955 --> 00:17:16.266 A:middle
bit similar to what we have seen

00:17:16.266 --> 00:17:16.646 A:middle
already.

00:17:17.195 --> 00:17:18.205 A:middle
First, I'm going to create my

00:17:18.205 --> 00:17:19.316 A:middle
face landmarks request.

00:17:20.566 --> 00:17:22.036 A:middle
Then, I'm going to create my

00:17:22.036 --> 00:17:22.846 A:middle
image request handler.

00:17:23.836 --> 00:17:25.006 A:middle
Then, I'm going to process my

00:17:25.006 --> 00:17:25.415 A:middle
request.

00:17:26.246 --> 00:17:27.256 A:middle
And finally, I'm going to look

00:17:27.256 --> 00:17:27.836 A:middle
at the results.

00:17:28.936 --> 00:17:30.136 A:middle
If I had an image with a single

00:17:30.136 --> 00:17:31.976 A:middle
face in it, my results would

00:17:31.976 --> 00:17:35.276 A:middle
look something like this.

00:17:35.406 --> 00:17:35.716 A:middle
Sorry.

00:17:36.066 --> 00:17:39.076 A:middle
N is for the sequence, and the

00:17:39.306 --> 00:17:39.836 A:middle
results.

00:17:40.846 --> 00:17:42.046 A:middle
So, I get the bounding box of

00:17:42.046 --> 00:17:42.536 A:middle
the face.

00:17:43.036 --> 00:17:43.866 A:middle
That's the location for the

00:17:43.866 --> 00:17:46.436 A:middle
face, and I get the landmarks

00:17:46.686 --> 00:17:47.166 A:middle
for the face.

00:17:48.576 --> 00:17:49.786 A:middle
What's important to understand

00:17:49.786 --> 00:17:51.376 A:middle
here is that when the processing

00:17:51.376 --> 00:17:52.726 A:middle
of the face landmark request

00:17:52.726 --> 00:17:54.776 A:middle
starts, face landmarks request

00:17:55.136 --> 00:17:56.906 A:middle
figures out that faces have not

00:17:56.906 --> 00:17:59.316 A:middle
been detected yet, and it runs

00:17:59.316 --> 00:18:01.136 A:middle
on our behalf inside face


00:17:59.316 --> 00:18:01.136 A:middle
on our behalf inside face

00:18:01.136 --> 00:18:01.546 A:middle
detector.

00:18:02.106 --> 00:18:03.686 A:middle
It gets results from that face

00:18:03.686 --> 00:18:05.306 A:middle
detector, and that's where

00:18:05.306 --> 00:18:06.536 A:middle
landmarks are being searched

00:18:06.536 --> 00:18:06.716 A:middle
for.

00:18:08.716 --> 00:18:10.896 A:middle
On the right-hand side, you can

00:18:11.306 --> 00:18:14.186 A:middle
see a snippet of what face

00:18:14.186 --> 00:18:15.386 A:middle
observation object would look

00:18:15.386 --> 00:18:15.566 A:middle
like.

00:18:15.816 --> 00:18:16.576 A:middle
These are just a couple of

00:18:16.576 --> 00:18:17.446 A:middle
fields from that object.

00:18:17.806 --> 00:18:19.296 A:middle
One is a unique ID that we

00:18:19.296 --> 00:18:20.376 A:middle
discussed that is set to some

00:18:20.376 --> 00:18:20.956 A:middle
unique number.

00:18:21.656 --> 00:18:23.316 A:middle
Then, the bounding box, that's

00:18:23.316 --> 00:18:25.216 A:middle
where the face is located, and

00:18:25.216 --> 00:18:26.436 A:middle
then, finally, the landmarks

00:18:26.436 --> 00:18:27.936 A:middle
field, which points to some

00:18:27.936 --> 00:18:29.216 A:middle
object where the landmarks are

00:18:29.216 --> 00:18:29.656 A:middle
described.

00:18:33.526 --> 00:18:35.236 A:middle
Now, let's take a look at the

00:18:35.236 --> 00:18:37.716 A:middle
same use case but now done

00:18:37.716 --> 00:18:38.336 A:middle
explicitly.

00:18:40.416 --> 00:18:41.556 A:middle
What I'm going to do here

00:18:41.556 --> 00:18:42.876 A:middle
first-- first, I'm going to

00:18:42.876 --> 00:18:44.486 A:middle
explicitly run my face detector.

00:18:45.116 --> 00:18:47.516 A:middle
You've seen these four lines of

00:18:47.516 --> 00:18:49.076 A:middle
code already several times in

00:18:49.076 --> 00:18:49.796 A:middle
the presentation.

00:18:49.856 --> 00:18:51.346 A:middle
When I run it, I get my bounding

00:18:51.346 --> 00:18:51.786 A:middle
box back.

00:18:52.606 --> 00:18:54.376 A:middle
As you can see, the results are

00:18:54.376 --> 00:18:56.016 A:middle
returned in the same type, face

00:18:56.016 --> 00:18:56.616 A:middle
observation.

00:18:57.276 --> 00:18:58.796 A:middle
The fields that we saw on the

00:18:58.796 --> 00:18:59.946 A:middle
previous slide may look like

00:18:59.946 --> 00:19:01.176 A:middle
this, so you get some unique


00:18:59.946 --> 00:19:01.176 A:middle
this, so you get some unique

00:19:01.176 --> 00:19:02.226 A:middle
number to identify this

00:19:02.226 --> 00:19:03.386 A:middle
particular processing step.

00:19:04.146 --> 00:19:05.326 A:middle
Then, you get the bounding box

00:19:05.326 --> 00:19:06.476 A:middle
location, which is the main

00:19:06.476 --> 00:19:08.326 A:middle
outcome of processing this

00:19:08.326 --> 00:19:08.716 A:middle
request.

00:19:08.946 --> 00:19:10.616 A:middle
And the landmarks field is set

00:19:10.616 --> 00:19:11.916 A:middle
to nil because face detector

00:19:11.916 --> 00:19:12.986 A:middle
doesn't know anything about

00:19:12.986 --> 00:19:13.496 A:middle
landmarks.

00:19:14.856 --> 00:19:16.246 A:middle
What I'm going to do next is I'm

00:19:16.336 --> 00:19:17.526 A:middle
going to create my landmarks

00:19:17.526 --> 00:19:19.266 A:middle
request, and then I'm going to

00:19:19.266 --> 00:19:20.096 A:middle
take the results from the

00:19:20.096 --> 00:19:22.166 A:middle
previous step and feed it into

00:19:22.166 --> 00:19:23.446 A:middle
the input object observation

00:19:23.496 --> 00:19:24.556 A:middle
property of that request.

00:19:25.996 --> 00:19:26.866 A:middle
Then, I'm going to ask my

00:19:27.066 --> 00:19:28.336 A:middle
request handler to process it.

00:19:29.306 --> 00:19:30.206 A:middle
And finally, I'm going to look

00:19:30.206 --> 00:19:30.836 A:middle
at the results.

00:19:31.726 --> 00:19:33.396 A:middle
If I run it in the same image, I

00:19:33.396 --> 00:19:35.146 A:middle
get exactly the same results as

00:19:35.146 --> 00:19:37.786 A:middle
I would on the previous slide.

00:19:38.726 --> 00:19:39.836 A:middle
But let's see what happens with

00:19:39.836 --> 00:19:40.486 A:middle
observations.

00:19:40.996 --> 00:19:41.826 A:middle
Remember, we said that

00:19:41.826 --> 00:19:43.906 A:middle
observations are immutable even

00:19:43.906 --> 00:19:45.876 A:middle
though both face detector and

00:19:45.876 --> 00:19:48.136 A:middle
face landmarks detector return

00:19:48.136 --> 00:19:50.006 A:middle
the same type, but we don't

00:19:50.036 --> 00:19:51.766 A:middle
override the observation that

00:19:51.976 --> 00:19:52.656 A:middle
was fed in.

00:19:53.296 --> 00:19:54.716 A:middle
What we do instead, we take the

00:19:54.716 --> 00:19:56.696 A:middle
first two fields and copy it

00:19:56.696 --> 00:19:58.776 A:middle
into a new object, and then we

00:19:58.776 --> 00:20:00.326 A:middle
calculate landmarks and populate


00:19:58.776 --> 00:20:00.326 A:middle
calculate landmarks and populate

00:20:00.326 --> 00:20:01.036 A:middle
the landmarks field.

00:20:02.246 --> 00:20:03.726 A:middle
Now, if you look now, you will

00:20:03.726 --> 00:20:05.246 A:middle
notice that the UID in most

00:20:05.246 --> 00:20:06.356 A:middle
cases is the same.

00:20:07.286 --> 00:20:07.796 A:middle
Why is that?

00:20:08.266 --> 00:20:09.366 A:middle
Because we're talking about the

00:20:09.366 --> 00:20:10.026 A:middle
same face.

00:20:10.026 --> 00:20:11.916 A:middle
It's the same processing step,

00:20:11.956 --> 00:20:14.046 A:middle
if you will.

00:20:14.266 --> 00:20:15.526 A:middle
Where would you use implicit

00:20:15.526 --> 00:20:16.326 A:middle
versus explicit?

00:20:17.406 --> 00:20:18.516 A:middle
Well, if your application is

00:20:18.516 --> 00:20:20.566 A:middle
very simple, you would probably

00:20:20.726 --> 00:20:22.006 A:middle
want to opt for implicit way.

00:20:22.406 --> 00:20:23.046 A:middle
It's very simple.

00:20:23.046 --> 00:20:24.106 A:middle
You create a single request;

00:20:24.106 --> 00:20:25.466 A:middle
everything else is done on your

00:20:25.466 --> 00:20:26.606 A:middle
behalf.

00:20:28.706 --> 00:20:30.236 A:middle
If, on the other hand, your

00:20:30.236 --> 00:20:31.686 A:middle
application is more complex, for

00:20:31.686 --> 00:20:33.106 A:middle
example, you want to process

00:20:33.106 --> 00:20:35.076 A:middle
faces first, detect them, then

00:20:35.076 --> 00:20:35.916 A:middle
do some filtering.

00:20:36.006 --> 00:20:37.186 A:middle
Let's say you don't care about

00:20:37.186 --> 00:20:38.366 A:middle
faces on the periphery, or you

00:20:38.366 --> 00:20:39.986 A:middle
want to just focus on the ones

00:20:39.986 --> 00:20:42.046 A:middle
that are in the center, you can

00:20:42.046 --> 00:20:44.026 A:middle
do that step, and then you can

00:20:44.026 --> 00:20:45.576 A:middle
do landmarks on the remaining

00:20:45.576 --> 00:20:46.436 A:middle
set of faces.

00:20:47.276 --> 00:20:48.476 A:middle
In this case, you probably want

00:20:48.476 --> 00:20:49.566 A:middle
to use the explicit version

00:20:50.626 --> 00:20:52.566 A:middle
because, in this case, landmarks

00:20:52.656 --> 00:20:54.236 A:middle
detector is not going to rerun

00:20:54.306 --> 00:20:54.936 A:middle
face detector inside.


00:21:02.566 --> 00:21:03.616 A:middle
We want your apps to have

00:21:03.866 --> 00:21:05.136 A:middle
optimal performance both in

00:21:05.136 --> 00:21:06.576 A:middle
terms of memory usage and

00:21:06.576 --> 00:21:07.356 A:middle
execution speed.

00:21:07.466 --> 00:21:08.486 A:middle
That's why it's important to

00:21:08.486 --> 00:21:09.586 A:middle
look at the next two slides.

00:21:11.696 --> 00:21:12.956 A:middle
How long should you keep your

00:21:12.956 --> 00:21:14.346 A:middle
objects in memory?

00:21:16.756 --> 00:21:17.956 A:middle
Well, for the image request

00:21:17.956 --> 00:21:19.356 A:middle
handler, you should keep it as

00:21:19.416 --> 00:21:21.066 A:middle
long as the image needs

00:21:21.066 --> 00:21:21.486 A:middle
processing.

00:21:22.356 --> 00:21:23.716 A:middle
This may sound like a very

00:21:23.716 --> 00:21:24.936 A:middle
innocent and simple statement,

00:21:25.296 --> 00:21:26.496 A:middle
but it is very important that

00:21:26.496 --> 00:21:28.296 A:middle
you do just that.

00:21:28.296 --> 00:21:29.736 A:middle
If you release the object early,

00:21:29.736 --> 00:21:31.066 A:middle
and you still have outstanding

00:21:31.066 --> 00:21:32.446 A:middle
requests to be processed, you

00:21:32.446 --> 00:21:33.716 A:middle
will have to recreate your image

00:21:33.716 --> 00:21:34.386 A:middle
to request handler.

00:21:34.716 --> 00:21:36.346 A:middle
But now you have lost all the

00:21:36.346 --> 00:21:37.676 A:middle
cache that was associated with

00:21:37.676 --> 00:21:39.066 A:middle
the previous object, and you'll

00:21:39.066 --> 00:21:40.636 A:middle
have to pay this performance to

00:21:40.636 --> 00:21:42.036 A:middle
recalculate these derivatives.

00:21:42.666 --> 00:21:45.386 A:middle
If you release it too late, on

00:21:45.386 --> 00:21:47.546 A:middle
the other hand, then, first

00:21:47.546 --> 00:21:48.486 A:middle
you're going to start causing

00:21:48.486 --> 00:21:50.196 A:middle
memory fragmentation, and then

00:21:50.196 --> 00:21:51.416 A:middle
the memory is not going to be

00:21:51.416 --> 00:21:53.006 A:middle
reclaimed by your app for other

00:21:53.006 --> 00:21:54.606 A:middle
meaningful things that you want

00:21:54.606 --> 00:21:55.500 A:middle
to do.

00:21:56.156 --> 00:21:57.696 A:middle
So, it's important to release

00:21:57.696 --> 00:21:59.236 A:middle
it, use it as long as you need

00:21:59.236 --> 00:22:00.176 A:middle
and release it right after.


00:21:59.236 --> 00:22:00.176 A:middle
and release it right after.

00:22:00.826 --> 00:22:02.316 A:middle
Remember, it caches the image

00:22:02.386 --> 00:22:03.896 A:middle
and multiple image derivatives

00:22:03.896 --> 00:22:04.226 A:middle
inside.

00:22:06.156 --> 00:22:08.116 A:middle
The situation with sequence

00:22:08.116 --> 00:22:09.396 A:middle
request handler is very similar

00:22:09.736 --> 00:22:11.196 A:middle
with the only difference is if

00:22:11.196 --> 00:22:12.526 A:middle
you release it too early, you

00:22:12.526 --> 00:22:13.536 A:middle
pretty much kill the entire

00:22:13.536 --> 00:22:14.846 A:middle
sequence because the entire

00:22:14.846 --> 00:22:18.176 A:middle
cache is gone by now.

00:22:18.406 --> 00:22:20.076 A:middle
What about requests and

00:22:20.076 --> 00:22:20.806 A:middle
observations?

00:22:21.686 --> 00:22:23.516 A:middle
Well, requests and observations

00:22:23.996 --> 00:22:25.206 A:middle
are very lightweight objects.

00:22:25.576 --> 00:22:26.656 A:middle
You can create them and release

00:22:26.656 --> 00:22:27.256 A:middle
them as needed.

00:22:27.556 --> 00:22:28.426 A:middle
There's no need to cache them.

00:22:35.596 --> 00:22:36.876 A:middle
Where should we process your

00:22:37.976 --> 00:22:38.236 A:middle
requests?

00:22:39.636 --> 00:22:41.366 A:middle
Well many requests in Vision

00:22:41.366 --> 00:22:42.856 A:middle
rely on running neural networks

00:22:42.856 --> 00:22:43.436 A:middle
on the device.

00:22:44.266 --> 00:22:45.996 A:middle
And, as we know, running neural

00:22:45.996 --> 00:22:47.616 A:middle
networks is usually faster on

00:22:47.616 --> 00:22:49.216 A:middle
GPU versus the CPU.

00:22:49.926 --> 00:22:53.066 A:middle
So, the natural question is

00:22:53.176 --> 00:22:54.706 A:middle
where should we run it?

00:22:55.476 --> 00:22:56.756 A:middle
Here's what we do in Vision.

00:22:57.716 --> 00:22:59.636 A:middle
If request is runnable in GPU,

00:22:59.636 --> 00:23:01.236 A:middle
we will try to do that first.


00:22:59.636 --> 00:23:01.236 A:middle
we will try to do that first.

00:23:01.996 --> 00:23:03.346 A:middle
If GPU is not available for

00:23:03.346 --> 00:23:04.616 A:middle
whatever reason at that point in

00:23:04.616 --> 00:23:06.176 A:middle
time, we will switch to CPU

00:23:06.766 --> 00:23:08.896 A:middle
because that's our default

00:23:08.896 --> 00:23:09.306 A:middle
behavior.

00:23:09.946 --> 00:23:12.846 A:middle
But let's say your application

00:23:13.326 --> 00:23:14.876 A:middle
is dependent on displaying a lot

00:23:14.876 --> 00:23:16.306 A:middle
of graphics on the screen, so

00:23:16.306 --> 00:23:18.276 A:middle
you may want to save the GPU for

00:23:18.276 --> 00:23:19.446 A:middle
that particular job.

00:23:20.176 --> 00:23:21.386 A:middle
In this case, you can override

00:23:21.766 --> 00:23:23.526 A:middle
user CPU on the property and set

00:23:23.526 --> 00:23:24.736 A:middle
it to true on the request

00:23:24.736 --> 00:23:25.036 A:middle
object.

00:23:25.576 --> 00:23:26.886 A:middle
This will tell us to process

00:23:26.886 --> 00:23:28.856 A:middle
your request directly on the

00:23:28.856 --> 00:23:29.000 A:middle
CPU.

00:23:35.316 --> 00:23:37.176 A:middle
Now that we've covered basic how

00:23:37.176 --> 00:23:39.236 A:middle
to interact with Vision, Vision

00:23:39.236 --> 00:23:41.276 A:middle
API, in particular, we've seen a

00:23:41.276 --> 00:23:43.136 A:middle
couple of examples, let's switch

00:23:43.136 --> 00:23:44.016 A:middle
to the main topic of our

00:23:44.016 --> 00:23:45.916 A:middle
presentation, which is tracking

00:23:46.046 --> 00:23:47.166 A:middle
in Vision.

00:23:48.616 --> 00:23:49.636 A:middle
So, what is tracking?

00:23:50.986 --> 00:23:52.746 A:middle
Tracking is defined as a problem

00:23:52.746 --> 00:23:54.406 A:middle
of finding an object of interest

00:23:54.756 --> 00:23:55.716 A:middle
in a sequence of frames.

00:23:56.166 --> 00:23:57.466 A:middle
Usually, you find that object in

00:23:57.466 --> 00:23:59.256 A:middle
the first frame, and you try to

00:23:59.426 --> 00:24:00.846 A:middle
look for it in the sequence of


00:23:59.426 --> 00:24:00.846 A:middle
look for it in the sequence of

00:24:00.846 --> 00:24:01.206 A:middle
frames.

00:24:02.256 --> 00:24:03.356 A:middle
What are the examples of such

00:24:03.356 --> 00:24:03.956 A:middle
application?

00:24:04.606 --> 00:24:06.036 A:middle
You will probably see many of

00:24:06.036 --> 00:24:06.206 A:middle
them.

00:24:06.946 --> 00:24:10.056 A:middle
It's live annotational sports

00:24:10.056 --> 00:24:11.136 A:middle
events, focus tracking with

00:24:11.136 --> 00:24:15.266 A:middle
camera, many, many others.

00:24:15.466 --> 00:24:16.976 A:middle
You may say why should they use

00:24:16.976 --> 00:24:18.496 A:middle
tracking if I can do detection

00:24:18.816 --> 00:24:20.006 A:middle
on every frame in the sequence?

00:24:20.826 --> 00:24:22.116 A:middle
Well, there are multiple reasons

00:24:22.116 --> 00:24:22.426 A:middle
for that.

00:24:23.196 --> 00:24:25.156 A:middle
First, you probably don't have a

00:24:25.156 --> 00:24:26.396 A:middle
specific tracker for every

00:24:26.396 --> 00:24:27.576 A:middle
single type of object that you

00:24:27.576 --> 00:24:29.056 A:middle
want to track.

00:24:29.056 --> 00:24:29.846 A:middle
Let's say if you're tracking

00:24:29.846 --> 00:24:31.296 A:middle
faces, you're lucky.

00:24:31.866 --> 00:24:32.866 A:middle
You have a face detector for

00:24:32.866 --> 00:24:33.436 A:middle
that purpose.

00:24:34.076 --> 00:24:35.306 A:middle
But if you need, for example, to

00:24:35.306 --> 00:24:37.126 A:middle
track a specific type of bird,

00:24:37.916 --> 00:24:39.236 A:middle
you probably don't have that

00:24:39.236 --> 00:24:40.306 A:middle
detector, and now you're in the

00:24:40.306 --> 00:24:41.516 A:middle
business to create that

00:24:41.516 --> 00:24:43.306 A:middle
particular detector, which you

00:24:43.306 --> 00:24:44.706 A:middle
may not want to do because of

00:24:44.706 --> 00:24:46.886 A:middle
the other things that you want

00:24:47.036 --> 00:24:48.036 A:middle
to have done with your

00:24:48.036 --> 00:24:48.456 A:middle
application.

00:24:49.106 --> 00:24:51.696 A:middle
But let's say you are lucky, and

00:24:51.696 --> 00:24:53.366 A:middle
you're tracking faces, should

00:24:53.366 --> 00:24:54.396 A:middle
you use detector then?

00:24:55.136 --> 00:24:56.966 A:middle
Well, probably not in this case

00:24:57.076 --> 00:24:57.196 A:middle
either.

00:24:58.176 --> 00:24:59.106 A:middle
So, let's look an example.


00:25:00.616 --> 00:25:01.406 A:middle
You start your tracking

00:25:01.406 --> 00:25:02.546 A:middle
sequence, and you run your face

00:25:02.546 --> 00:25:03.576 A:middle
detector on the first frame.

00:25:04.266 --> 00:25:05.236 A:middle
You get five faces back.

00:25:06.136 --> 00:25:07.146 A:middle
Then, you run it in the second

00:25:07.146 --> 00:25:08.516 A:middle
frame; you get another five

00:25:08.516 --> 00:25:08.976 A:middle
faces back.

00:25:09.676 --> 00:25:11.506 A:middle
How do you know that the faces

00:25:11.506 --> 00:25:12.546 A:middle
from the second frame are

00:25:12.546 --> 00:25:14.096 A:middle
exactly the same faces as from

00:25:14.096 --> 00:25:14.596 A:middle
the first frame?

00:25:15.306 --> 00:25:16.276 A:middle
One person could have stepped

00:25:16.276 --> 00:25:18.166 A:middle
out; another one showed up.

00:25:18.956 --> 00:25:20.446 A:middle
So, now, you're in the business

00:25:20.446 --> 00:25:22.316 A:middle
of matching objects that you

00:25:22.316 --> 00:25:23.736 A:middle
found, which is a completely

00:25:23.736 --> 00:25:25.326 A:middle
different task that you may not

00:25:25.326 --> 00:25:25.876 A:middle
want to deal with.

00:25:27.166 --> 00:25:30.716 A:middle
Trackers, on the other hand, use

00:25:30.716 --> 00:25:31.956 A:middle
[inaudible] information to match

00:25:31.956 --> 00:25:32.346 A:middle
objects.

00:25:32.516 --> 00:25:33.866 A:middle
They know the trajectory how the

00:25:33.866 --> 00:25:35.136 A:middle
objects move, and they can

00:25:35.136 --> 00:25:36.336 A:middle
slightly predict where they

00:25:36.336 --> 00:25:38.286 A:middle
would be moving in the next

00:25:38.546 --> 00:25:38.660 A:middle
frame.

00:25:39.336 --> 00:25:40.656 A:middle
But let's say you're lucky

00:25:40.656 --> 00:25:40.856 A:middle
again.

00:25:41.536 --> 00:25:43.296 A:middle
You're tracking faces, and your

00:25:43.296 --> 00:25:45.076 A:middle
use case is limited to a single

00:25:45.076 --> 00:25:45.806 A:middle
face in the frame.

00:25:46.196 --> 00:25:47.416 A:middle
Should you use detectors then?

00:25:48.376 --> 00:25:50.036 A:middle
Well, maybe not even in this

00:25:50.696 --> 00:25:51.000 A:middle
case.

00:25:56.556 --> 00:25:57.666 A:middle
Now, speed is a problem.

00:25:58.126 --> 00:26:00.116 A:middle
Trackers are usually lightweight


00:25:58.126 --> 00:26:00.116 A:middle
Trackers are usually lightweight

00:26:00.116 --> 00:26:01.706 A:middle
algorithms, while detectors

00:26:01.946 --> 00:26:03.586 A:middle
usually run your [inaudible],

00:26:03.676 --> 00:26:04.416 A:middle
which is much longer.

00:26:05.136 --> 00:26:07.146 A:middle
In addition, if you need to

00:26:07.146 --> 00:26:08.976 A:middle
display your tracking

00:26:08.976 --> 00:26:10.306 A:middle
information on a graphical user

00:26:10.306 --> 00:26:11.716 A:middle
interface, you may find that

00:26:11.976 --> 00:26:13.356 A:middle
trackers are smoother and not as

00:26:13.386 --> 00:26:14.000 A:middle
jittery.

00:26:17.366 --> 00:26:18.416 A:middle
Remember, in one of the first

00:26:18.416 --> 00:26:19.746 A:middle
slides, I asked you to remember

00:26:21.386 --> 00:26:24.476 A:middle
these three terms, what, how,

00:26:24.476 --> 00:26:25.016 A:middle
and results.

00:26:25.976 --> 00:26:28.206 A:middle
Let's see how this maps into the

00:26:28.206 --> 00:26:30.000 A:middle
track and use case.

00:26:31.046 --> 00:26:33.646 A:middle
First, request.

00:26:34.456 --> 00:26:36.156 A:middle
So, in Vision, we have two types

00:26:36.156 --> 00:26:37.736 A:middle
of requests for tracking.

00:26:38.226 --> 00:26:39.236 A:middle
There is a general purpose

00:26:39.236 --> 00:26:40.786 A:middle
object tracker, and there is a

00:26:40.786 --> 00:26:41.936 A:middle
rectangular object tracker.

00:26:43.046 --> 00:26:43.576 A:middle
How?

00:26:44.686 --> 00:26:45.556 A:middle
As you should have guessed by

00:26:45.556 --> 00:26:46.696 A:middle
now, we're going to use our

00:26:47.046 --> 00:26:49.836 A:middle
sequence request handler.

00:26:49.866 --> 00:26:50.386 A:middle
Results.

00:26:51.716 --> 00:26:52.556 A:middle
There are two types that are

00:26:52.556 --> 00:26:53.196 A:middle
important here.

00:26:53.306 --> 00:26:54.366 A:middle
There is a detected object

00:26:54.366 --> 00:26:55.766 A:middle
observation, which has an

00:26:55.766 --> 00:26:56.826 A:middle
important property in it,

00:26:57.096 --> 00:26:58.346 A:middle
bounding box, which tells you

00:26:58.346 --> 00:27:00.396 A:middle
where the object is located, and


00:26:58.346 --> 00:27:00.396 A:middle
where the object is located, and

00:27:00.396 --> 00:27:01.806 A:middle
there is a rectangular

00:27:01.806 --> 00:27:03.726 A:middle
observation, which has four

00:27:03.726 --> 00:27:04.926 A:middle
additional properties telling

00:27:04.926 --> 00:27:06.066 A:middle
you where the vertices of the

00:27:06.066 --> 00:27:07.136 A:middle
rectangle are.

00:27:07.956 --> 00:27:08.886 A:middle
Now, you say if I had my

00:27:08.886 --> 00:27:10.136 A:middle
bounding box, why do I need the

00:27:10.136 --> 00:27:11.166 A:middle
vertices of the rectangle?

00:27:12.406 --> 00:27:13.536 A:middle
Well, when you draw up

00:27:13.536 --> 00:27:15.626 A:middle
rectangles, they are rectangular

00:27:15.626 --> 00:27:16.716 A:middle
objects in the real life.

00:27:16.996 --> 00:27:18.106 A:middle
The way they are projected in

00:27:18.106 --> 00:27:19.116 A:middle
the frame, they may look

00:27:19.116 --> 00:27:19.586 A:middle
differently.

00:27:20.136 --> 00:27:21.556 A:middle
They may look like trapezoid,

00:27:21.556 --> 00:27:22.086 A:middle
for example.

00:27:22.666 --> 00:27:24.966 A:middle
So, the bounding box in this

00:27:24.966 --> 00:27:26.456 A:middle
case is not the rectangle

00:27:26.456 --> 00:27:26.926 A:middle
itself.

00:27:26.926 --> 00:27:28.206 A:middle
It [inaudible] the minimal box

00:27:28.206 --> 00:27:29.546 A:middle
that includes all the vertices

00:27:29.546 --> 00:27:32.026 A:middle
of the rectangle.

00:27:33.526 --> 00:27:36.000 A:middle
Let's look at the demo now.

00:27:47.466 --> 00:27:48.916 A:middle
So, what I have here, I have a

00:27:48.916 --> 00:27:50.116 A:middle
sample app that you, by the way,

00:27:50.116 --> 00:27:52.656 A:middle
can download from WWDC website

00:27:52.856 --> 00:27:54.136 A:middle
and the link is right next to

00:27:54.136 --> 00:27:54.616 A:middle
this session.

00:27:55.506 --> 00:27:57.456 A:middle
What the app does is it takes

00:27:57.456 --> 00:28:00.586 A:middle
the movie; it parses that movie


00:27:57.456 --> 00:28:00.586 A:middle
the movie; it parses that movie

00:28:00.586 --> 00:28:01.246 A:middle
into frames.

00:28:02.106 --> 00:28:03.186 A:middle
In the first frame, you select

00:28:03.186 --> 00:28:03.576 A:middle
an object.

00:28:03.696 --> 00:28:04.716 A:middle
You want to track a multiple

00:28:04.716 --> 00:28:06.276 A:middle
objects or you want to track,

00:28:06.276 --> 00:28:08.526 A:middle
and it does the tracking.

00:28:08.656 --> 00:28:10.446 A:middle
So, let's first use this movie.

00:28:11.516 --> 00:28:13.006 A:middle
The user interface is simple.

00:28:13.466 --> 00:28:14.436 A:middle
First, you can choose between

00:28:14.436 --> 00:28:15.956 A:middle
objects or rectangles, and

00:28:15.956 --> 00:28:17.526 A:middle
second, you can choose which

00:28:17.526 --> 00:28:19.016 A:middle
algorithm you want to use, fast

00:28:19.016 --> 00:28:19.486 A:middle
or accurate.

00:28:19.926 --> 00:28:21.056 A:middle
What happens in Vision that we

00:28:21.056 --> 00:28:23.586 A:middle
support two types, fast and

00:28:23.586 --> 00:28:24.756 A:middle
accurate, and this is a

00:28:24.756 --> 00:28:26.536 A:middle
trade-off between the speed and

00:28:26.536 --> 00:28:27.016 A:middle
the accuracy.

00:28:27.676 --> 00:28:29.776 A:middle
I'm going to show objects in

00:28:29.776 --> 00:28:30.926 A:middle
this case, and I'm going to use

00:28:30.926 --> 00:28:31.856 A:middle
my fast algorithm.

00:28:32.946 --> 00:28:33.766 A:middle
Let's select objects.

00:28:33.766 --> 00:28:36.026 A:middle
So, I'm going to track this

00:28:36.026 --> 00:28:38.436 A:middle
person under the red umbrella,

00:28:38.736 --> 00:28:40.136 A:middle
and I'm going to try to track

00:28:40.136 --> 00:28:41.000 A:middle
this group of people here.

00:28:46.156 --> 00:28:48.000 A:middle
Let's run it.

00:28:54.436 --> 00:28:55.856 A:middle
As you can see, we can

00:28:55.856 --> 00:28:58.706 A:middle
successfully track the object

00:28:58.706 --> 00:29:00.000 A:middle
that we selected.


00:29:06.756 --> 00:29:08.926 A:middle
Let's look at the more complex

00:29:08.926 --> 00:29:09.306 A:middle
example.

00:29:10.716 --> 00:29:12.066 A:middle
What I want to track here, I

00:29:12.066 --> 00:29:13.186 A:middle
want to track this wakeboarder

00:29:13.186 --> 00:29:15.616 A:middle
guy, and in this case, I'm going

00:29:15.616 --> 00:29:16.636 A:middle
to use my accurate algorithm.

00:29:17.966 --> 00:29:18.756 A:middle
So, I'm going to select my

00:29:18.756 --> 00:29:19.500 A:middle
object,

00:29:23.156 --> 00:29:25.000 A:middle
and I'm going to run it.

00:29:30.136 --> 00:29:31.566 A:middle
As you can see, this object

00:29:31.686 --> 00:29:33.626 A:middle
changes pretty much everything

00:29:33.626 --> 00:29:35.316 A:middle
about itself, its shape, the

00:29:35.316 --> 00:29:37.006 A:middle
location, the colors, everything

00:29:37.006 --> 00:29:37.316 A:middle
comes.

00:29:37.316 --> 00:29:38.686 A:middle
We're still able to track it.

00:29:39.156 --> 00:29:39.976 A:middle
I think this is pretty cool.

00:29:40.516 --> 00:29:46.686 A:middle
[ Applause ]

00:29:47.186 --> 00:29:48.736 A:middle
Now, we're going to switch to my

00:29:48.736 --> 00:29:50.086 A:middle
demo machine and see how the

00:29:50.086 --> 00:29:51.366 A:middle
actual tracking sequence is

00:29:51.366 --> 00:29:53.000 A:middle
implemented in this app.


00:30:01.236 --> 00:30:02.426 A:middle
So, I have the Xcode running,

00:30:02.706 --> 00:30:03.626 A:middle
and I have my headphones

00:30:03.626 --> 00:30:05.546 A:middle
connected to it, which is

00:30:05.546 --> 00:30:07.516 A:middle
running the same app as we just

00:30:07.516 --> 00:30:07.696 A:middle
saw.

00:30:08.356 --> 00:30:10.356 A:middle
I'm going to run it in the

00:30:10.356 --> 00:30:11.000 A:middle
debugger,

00:30:16.656 --> 00:30:18.446 A:middle
going to select my objects, and

00:30:19.006 --> 00:30:20.896 A:middle
it's not important what I select

00:30:20.896 --> 00:30:21.846 A:middle
because we just want to look at

00:30:21.846 --> 00:30:22.416 A:middle
the sequence.

00:30:23.396 --> 00:30:26.676 A:middle
And I'm going to run it.

00:30:26.806 --> 00:30:29.096 A:middle
So, I have a breakpoint set up

00:30:29.096 --> 00:30:30.256 A:middle
here and it breaks in the

00:30:30.256 --> 00:30:32.226 A:middle
perform tracking function, which

00:30:32.226 --> 00:30:33.536 A:middle
is the most important function

00:30:33.536 --> 00:30:34.056 A:middle
of this app.

00:30:34.746 --> 00:30:35.596 A:middle
That's the function that

00:30:35.596 --> 00:30:36.826 A:middle
implements the actual sequence.

00:30:37.396 --> 00:30:39.716 A:middle
Let's see what we do here.

00:30:40.466 --> 00:30:42.986 A:middle
First, we're creating our video

00:30:42.986 --> 00:30:43.236 A:middle
reader.

00:30:44.086 --> 00:30:45.216 A:middle
Then, we are reading first

00:30:45.216 --> 00:30:46.596 A:middle
frame, and we're discarding that

00:30:46.596 --> 00:30:47.836 A:middle
frame because that frame was

00:30:47.836 --> 00:30:48.916 A:middle
used to select the objects.

00:30:50.396 --> 00:30:51.436 A:middle
There's the cancellation flag

00:30:51.436 --> 00:30:51.676 A:middle
here.

00:30:52.466 --> 00:30:54.256 A:middle
Then, I'm going to initialize

00:30:54.256 --> 00:30:55.686 A:middle
the collection of my input

00:30:55.686 --> 00:30:56.406 A:middle
observations.

00:30:56.526 --> 00:30:57.716 A:middle
Remember, as we saw an example

00:30:57.716 --> 00:30:58.206 A:middle
in the slides.


00:31:01.016 --> 00:31:02.536 A:middle
Then, I have my bookkeeping to

00:31:02.536 --> 00:31:04.366 A:middle
be able to display results in a

00:31:04.366 --> 00:31:06.756 A:middle
graphical user interface, which

00:31:06.756 --> 00:31:09.566 A:middle
are kept in the trackedPolyRect

00:31:10.086 --> 00:31:10.186 A:middle
type.

00:31:10.776 --> 00:31:12.716 A:middle
Then, I'm going to run the

00:31:12.716 --> 00:31:14.686 A:middle
switch on the type, and the type

00:31:14.686 --> 00:31:15.766 A:middle
is something that comes from the

00:31:15.766 --> 00:31:16.896 A:middle
user interface, and in this

00:31:16.896 --> 00:31:17.816 A:middle
case, we're working with

00:31:17.996 --> 00:31:18.426 A:middle
objects.

00:31:19.856 --> 00:31:22.126 A:middle
Now, we selected two objects.

00:31:23.436 --> 00:31:24.676 A:middle
So, this is the information

00:31:24.676 --> 00:31:26.136 A:middle
coming from the user interface.

00:31:26.556 --> 00:31:27.936 A:middle
We should see these two objects

00:31:27.936 --> 00:31:28.330 A:middle
here.

00:31:32.046 --> 00:31:33.326 A:middle
Okay, there are two of them.

00:31:33.476 --> 00:31:35.656 A:middle
So, this loop will run two

00:31:35.656 --> 00:31:36.096 A:middle
times.

00:31:36.426 --> 00:31:37.676 A:middle
It will initialize input

00:31:37.676 --> 00:31:38.436 A:middle
observations.

00:31:38.716 --> 00:31:39.936 A:middle
It'll create detected object

00:31:39.936 --> 00:31:41.526 A:middle
observation as also shown in the

00:31:41.526 --> 00:31:44.766 A:middle
slides by passing bounding box

00:31:44.766 --> 00:31:44.926 A:middle
in.

00:31:46.316 --> 00:31:47.556 A:middle
And we initialize our

00:31:47.556 --> 00:31:49.536 A:middle
bookkeeping structures.

00:31:50.116 --> 00:31:51.266 A:middle
Let's run it.

00:31:58.116 --> 00:31:59.526 A:middle
Let's look at the observation

00:31:59.746 --> 00:32:00.826 A:middle
object.


00:31:59.746 --> 00:32:00.826 A:middle
object.

00:32:07.576 --> 00:32:09.006 A:middle
There are a couple of fields

00:32:09.006 --> 00:32:09.866 A:middle
that are important here.

00:32:10.106 --> 00:32:11.406 A:middle
This is the unique ID that we

00:32:11.406 --> 00:32:11.866 A:middle
discussed.

00:32:11.966 --> 00:32:14.236 A:middle
And then it's our bounding box

00:32:14.476 --> 00:32:15.606 A:middle
in normalize organize.

00:32:18.076 --> 00:32:19.716 A:middle
Now, if I run through, I'm going

00:32:19.716 --> 00:32:21.486 A:middle
to hit this breakpoint because

00:32:21.486 --> 00:32:23.256 A:middle
this case we're not using

00:32:23.286 --> 00:32:24.426 A:middle
[inaudible] rectangles.

00:32:26.116 --> 00:32:27.756 A:middle
This is where I create my

00:32:27.756 --> 00:32:28.726 A:middle
sequence request handler.

00:32:29.246 --> 00:32:32.126 A:middle
Now, I have my frame counter,

00:32:32.806 --> 00:32:35.276 A:middle
I have my flag if something has

00:32:35.276 --> 00:32:37.486 A:middle
failed, and I'm finally going to

00:32:37.486 --> 00:32:38.916 A:middle
start my tracking sequence.

00:32:39.226 --> 00:32:40.636 A:middle
As you can see, this is an

00:32:40.636 --> 00:32:42.006 A:middle
infinite loop, and the

00:32:42.006 --> 00:32:43.256 A:middle
conditions to get out of that

00:32:43.256 --> 00:32:44.656 A:middle
loop is if the cancellation was

00:32:44.656 --> 00:32:46.676 A:middle
requested, or if the movie has

00:32:46.676 --> 00:32:47.000 A:middle
ended.

00:32:51.046 --> 00:32:53.566 A:middle
I'm going to initialize my rect

00:32:54.976 --> 00:32:56.766 A:middle
structure to keep the

00:32:56.766 --> 00:32:57.876 A:middle
information for the graphical

00:32:57.876 --> 00:32:59.246 A:middle
user in this interface to be

00:32:59.246 --> 00:33:01.846 A:middle
displayed later, and I'm going


00:32:59.246 --> 00:33:01.846 A:middle
displayed later, and I'm going

00:33:01.846 --> 00:33:04.066 A:middle
to start iterating over my input

00:33:04.066 --> 00:33:05.606 A:middle
observations, which we have to.

00:33:06.396 --> 00:33:07.306 A:middle
For each one, I'm going to

00:33:07.306 --> 00:33:08.766 A:middle
create a track object request.

00:33:15.106 --> 00:33:16.676 A:middle
I'm going to advance my request

00:33:16.676 --> 00:33:17.486 A:middle
to the collection of all

00:33:17.486 --> 00:33:19.576 A:middle
requests, and we have to in this

00:33:19.916 --> 00:33:20.000 A:middle
case.

00:33:22.236 --> 00:33:24.606 A:middle
Going to break off the loop, and

00:33:24.606 --> 00:33:26.176 A:middle
finally, I'm ready to process my

00:33:26.176 --> 00:33:26.716 A:middle
requests.

00:33:27.346 --> 00:33:28.476 A:middle
Now, if you can see the

00:33:28.476 --> 00:33:29.676 A:middle
performed request, the perform

00:33:29.956 --> 00:33:31.986 A:middle
function accepts a collection of

00:33:31.986 --> 00:33:32.446 A:middle
requests.

00:33:33.206 --> 00:33:35.176 A:middle
In the slides, we only used a

00:33:35.176 --> 00:33:37.326 A:middle
single request to be passed into

00:33:37.326 --> 00:33:38.476 A:middle
that collection, but here we're

00:33:38.476 --> 00:33:39.916 A:middle
going to track two requests at

00:33:39.916 --> 00:33:40.446 A:middle
the same time.

00:33:40.876 --> 00:33:44.486 A:middle
I'm going to perform it.

00:33:44.756 --> 00:33:46.156 A:middle
Now, since the requests are

00:33:46.156 --> 00:33:48.186 A:middle
performed, I'm going to start

00:33:48.186 --> 00:33:49.596 A:middle
looking at the results, and I'm

00:33:49.596 --> 00:33:50.706 A:middle
going to do that by looking at

00:33:50.706 --> 00:33:52.606 A:middle
the results property of each

00:33:54.776 --> 00:33:54.896 A:middle
one.

00:33:55.096 --> 00:33:55.916 A:middle
So, I'm going to get results

00:33:55.916 --> 00:33:56.406 A:middle
property.

00:33:56.626 --> 00:33:57.876 A:middle
I'm going to get the first

00:33:57.876 --> 00:33:59.206 A:middle
object in that property because

00:33:59.206 --> 00:34:00.396 A:middle
we expect them, the single one


00:33:59.206 --> 00:34:00.396 A:middle
we expect them, the single one

00:34:00.396 --> 00:34:02.766 A:middle
in there as an observation.

00:34:03.806 --> 00:34:04.926 A:middle
What I'm going to do here, I'm

00:34:04.926 --> 00:34:06.936 A:middle
going to look at the confidence

00:34:06.936 --> 00:34:08.976 A:middle
property of my observation, and

00:34:08.976 --> 00:34:10.406 A:middle
I set an arbitrary threshold to

00:34:10.406 --> 00:34:11.036 A:middle
0.5.

00:34:12.156 --> 00:34:13.315 A:middle
So, if it's above the threshold,

00:34:13.596 --> 00:34:15.585 A:middle
I'm going to paint the bounding

00:34:15.585 --> 00:34:17.616 A:middle
box with solid line, and if it's

00:34:17.616 --> 00:34:18.846 A:middle
below the threshold, I'm going

00:34:18.846 --> 00:34:19.866 A:middle
to paint it with a dashed line.

00:34:19.866 --> 00:34:21.196 A:middle
So, I have, so I can have an

00:34:21.196 --> 00:34:22.856 A:middle
indication if something is going

00:34:23.036 --> 00:34:23.255 A:middle
wrong.

00:34:26.116 --> 00:34:27.616 A:middle
The rest is simple bookkeeping.

00:34:27.716 --> 00:34:30.216 A:middle
I'm just going to populate my

00:34:30.216 --> 00:34:32.636 A:middle
rect structure, and this is the

00:34:32.636 --> 00:34:33.795 A:middle
last step, which is very

00:34:33.795 --> 00:34:34.966 A:middle
important where I take the

00:34:34.966 --> 00:34:36.076 A:middle
observation from the current

00:34:36.076 --> 00:34:38.916 A:middle
iteration, and I assign it for

00:34:38.916 --> 00:34:39.686 A:middle
the next iteration.

00:34:43.596 --> 00:34:44.866 A:middle
I'm going to do it a second

00:34:44.866 --> 00:34:45.136 A:middle
time.

00:34:46.085 --> 00:34:47.106 A:middle
I'm going to get to this

00:34:47.106 --> 00:34:47.746 A:middle
breakpoint.

00:34:49.146 --> 00:34:50.346 A:middle
Going to display my frame.

00:34:51.946 --> 00:34:53.136 A:middle
I'm going to sleep for the frame

00:34:53.136 --> 00:34:54.966 A:middle
rate in seconds time to simulate

00:34:54.966 --> 00:34:55.746 A:middle
the actual movie.

00:34:56.186 --> 00:34:58.096 A:middle
And then, before you know it,

00:34:58.296 --> 00:34:59.816 A:middle
you're in the second iteration


00:35:00.176 --> 00:35:01.766 A:middle
of your tracking sequence.

00:35:03.736 --> 00:35:05.276 A:middle
So, let's get back to the slides

00:35:05.946 --> 00:35:06.000 A:middle
now.

00:35:11.516 --> 00:35:11.776 A:middle
Thank you.

00:35:12.516 --> 00:35:16.000 A:middle
[ Applause ]

00:35:18.636 --> 00:35:19.846 A:middle
So, let's look at what's

00:35:19.846 --> 00:35:21.096 A:middle
important to remember from what

00:35:21.096 --> 00:35:21.786 A:middle
we have just seen.

00:35:23.186 --> 00:35:25.966 A:middle
First, how to initialize initial

00:35:25.966 --> 00:35:28.416 A:middle
object for tracking, and we saw

00:35:28.416 --> 00:35:28.936 A:middle
two ways.

00:35:28.976 --> 00:35:30.266 A:middle
There's automatic way, which is

00:35:30.266 --> 00:35:31.666 A:middle
usually done by running certain

00:35:31.666 --> 00:35:33.356 A:middle
detectors and getting bounding

00:35:33.356 --> 00:35:33.946 A:middle
boxes out.

00:35:34.776 --> 00:35:36.056 A:middle
And the second is manual, which

00:35:36.056 --> 00:35:37.256 A:middle
usually comes from the user

00:35:37.256 --> 00:35:38.000 A:middle
input.

00:35:52.916 --> 00:35:54.926 A:middle
We also saw that we used a

00:35:54.926 --> 00:35:57.646 A:middle
single tracking request per

00:35:57.816 --> 00:35:58.456 A:middle
tracked object.

00:35:58.856 --> 00:35:59.966 A:middle
The relationship here is

00:35:59.966 --> 00:36:00.466 A:middle
one-to-one.


00:35:59.966 --> 00:36:00.466 A:middle
one-to-one.

00:36:03.396 --> 00:36:04.656 A:middle
We also saw that there are two

00:36:04.656 --> 00:36:05.506 A:middle
types of trackers.

00:36:05.806 --> 00:36:06.916 A:middle
One is the general purpose

00:36:06.916 --> 00:36:08.396 A:middle
tracker, and another one is

00:36:08.396 --> 00:36:10.216 A:middle
rectangular object tracker.

00:36:12.396 --> 00:36:13.576 A:middle
We also learned that there are

00:36:13.576 --> 00:36:15.636 A:middle
two algorithms for each tracker

00:36:15.636 --> 00:36:15.906 A:middle
type.

00:36:16.356 --> 00:36:18.116 A:middle
There is fast and accurate, and

00:36:18.116 --> 00:36:20.366 A:middle
this represents the tradeoff

00:36:20.366 --> 00:36:21.646 A:middle
between speed and accuracy.

00:36:21.966 --> 00:36:24.766 A:middle
And last but not least, we

00:36:24.866 --> 00:36:25.946 A:middle
looked at how to use a

00:36:25.946 --> 00:36:28.116 A:middle
confidence level property to

00:36:28.116 --> 00:36:29.586 A:middle
judge whether we should or

00:36:29.586 --> 00:36:30.716 A:middle
should not trust our results.

00:36:34.516 --> 00:36:35.796 A:middle
What are the limits of

00:36:35.796 --> 00:36:37.046 A:middle
implementing tracking sequence

00:36:37.046 --> 00:36:37.446 A:middle
in Vision?

00:36:38.006 --> 00:36:42.406 A:middle
First, let's talk about number

00:36:42.496 --> 00:36:43.646 A:middle
of trackers.

00:36:45.136 --> 00:36:46.866 A:middle
How many objects can you track

00:36:46.866 --> 00:36:47.546 A:middle
simultaneously?

00:36:48.446 --> 00:36:49.796 A:middle
Well, in Vision we have a limit

00:36:50.066 --> 00:36:53.186 A:middle
that is set to 16 trackers for

00:36:53.186 --> 00:36:53.666 A:middle
each type.

00:36:54.006 --> 00:36:55.346 A:middle
So, you can have 16 general

00:36:55.346 --> 00:36:57.446 A:middle
purpose object trackers and 16

00:36:58.076 --> 00:36:59.206 A:middle
rectangular object trackers.


00:37:00.306 --> 00:37:01.826 A:middle
If you try to allocate more,

00:37:01.826 --> 00:37:02.806 A:middle
you'll get an error back.

00:37:03.976 --> 00:37:06.556 A:middle
So, if it happens, you probably

00:37:06.556 --> 00:37:07.526 A:middle
need to release some of the

00:37:07.526 --> 00:37:08.446 A:middle
trackers that you're already

00:37:08.446 --> 00:37:08.776 A:middle
using.

00:37:09.506 --> 00:37:12.576 A:middle
How to do that?

00:37:12.576 --> 00:37:14.426 A:middle
First way is you can set a last

00:37:14.426 --> 00:37:16.576 A:middle
frame property under request and

00:37:16.576 --> 00:37:18.366 A:middle
feed that request into the

00:37:18.366 --> 00:37:19.716 A:middle
request handler for processing.

00:37:20.186 --> 00:37:21.436 A:middle
That way, the request handler

00:37:21.436 --> 00:37:23.006 A:middle
will know that the tracker

00:37:23.006 --> 00:37:24.206 A:middle
associated with this request

00:37:24.206 --> 00:37:25.416 A:middle
object should be released.

00:37:26.286 --> 00:37:27.936 A:middle
Another way is to release the

00:37:27.936 --> 00:37:29.196 A:middle
entire sequence request handler;

00:37:29.466 --> 00:37:31.136 A:middle
in this case, all the trackers

00:37:31.136 --> 00:37:32.396 A:middle
associated with that request

00:37:32.396 --> 00:37:34.000 A:middle
handler will be released.

00:37:38.086 --> 00:37:39.646 A:middle
Now, let's say you've

00:37:39.646 --> 00:37:40.566 A:middle
implemented the tracking

00:37:40.566 --> 00:37:41.046 A:middle
signals.

00:37:41.356 --> 00:37:42.206 A:middle
What are the potential

00:37:42.206 --> 00:37:43.456 A:middle
challenges that you may face?

00:37:44.486 --> 00:37:46.666 A:middle
Well, as you've seen, objects in

00:37:46.666 --> 00:37:47.836 A:middle
tracking sequence can change

00:37:47.836 --> 00:37:49.276 A:middle
pretty much everything about

00:37:49.276 --> 00:37:49.836 A:middle
themselves.

00:37:50.076 --> 00:37:50.966 A:middle
They can change their shape,

00:37:50.966 --> 00:37:53.616 A:middle
appearance, color, location, and

00:37:53.616 --> 00:37:54.566 A:middle
that represents a great

00:37:54.566 --> 00:37:55.606 A:middle
challenge for the algorithm.

00:37:56.606 --> 00:37:57.546 A:middle
So, what can you do here?

00:37:58.536 --> 00:38:00.066 A:middle
Well, one unfortunate answer is


00:37:58.536 --> 00:38:00.066 A:middle
Well, one unfortunate answer is

00:38:00.066 --> 00:38:01.246 A:middle
that there's no one size that

00:38:01.246 --> 00:38:02.916 A:middle
fits all solution here, but you

00:38:02.916 --> 00:38:03.846 A:middle
can try a couple of things.

00:38:04.326 --> 00:38:05.536 A:middle
First, you can play with fast or

00:38:05.536 --> 00:38:06.986 A:middle
accurate, and you can figure out

00:38:06.986 --> 00:38:09.186 A:middle
that your particular use case

00:38:09.266 --> 00:38:10.736 A:middle
works better with a particular

00:38:10.736 --> 00:38:11.176 A:middle
algorithm.

00:38:14.956 --> 00:38:16.546 A:middle
If you're in charge of selecting

00:38:16.546 --> 00:38:18.966 A:middle
bounding box, try to find a

00:38:18.966 --> 00:38:21.486 A:middle
select salient object in the

00:38:22.636 --> 00:38:22.766 A:middle
same.

00:38:22.976 --> 00:38:23.956 A:middle
Which confidence threshold to

00:38:23.956 --> 00:38:24.236 A:middle
use?

00:38:25.386 --> 00:38:26.676 A:middle
Again, there is no single answer

00:38:26.676 --> 00:38:26.936 A:middle
here.

00:38:27.266 --> 00:38:28.286 A:middle
You will find that some use

00:38:28.286 --> 00:38:29.366 A:middle
cases work with certain

00:38:29.366 --> 00:38:30.816 A:middle
thresholds while other use cases

00:38:30.816 --> 00:38:32.746 A:middle
work with other thresholds.

00:38:34.656 --> 00:38:36.106 A:middle
There's one more technique that

00:38:36.106 --> 00:38:36.836 A:middle
I could recommend.

00:38:37.146 --> 00:38:37.996 A:middle
Let's say you have a long

00:38:37.996 --> 00:38:39.086 A:middle
tracking sequence, and for the

00:38:39.086 --> 00:38:40.556 A:middle
sake of this example, 1,000

00:38:40.556 --> 00:38:40.936 A:middle
frames.

00:38:42.266 --> 00:38:43.616 A:middle
If you start that tracking

00:38:43.616 --> 00:38:45.486 A:middle
sequence, your object that you

00:38:45.486 --> 00:38:46.976 A:middle
selected in the first frame will

00:38:46.976 --> 00:38:48.236 A:middle
start deviating, and it'll

00:38:48.236 --> 00:38:50.496 A:middle
change everything about itself

00:38:50.996 --> 00:38:52.756 A:middle
the more you go off of that

00:38:52.756 --> 00:38:53.376 A:middle
initial frame.

00:38:54.356 --> 00:38:55.786 A:middle
What you can do instead, you can

00:38:55.786 --> 00:38:57.186 A:middle
break that sequence into smaller

00:38:57.186 --> 00:38:58.606 A:middle
subsequences, let's say 50

00:38:58.606 --> 00:38:59.136 A:middle
frames each.

00:38:59.706 --> 00:39:01.576 A:middle
You run your detector, you track


00:38:59.706 --> 00:39:01.576 A:middle
You run your detector, you track

00:39:01.576 --> 00:39:02.946 A:middle
that object for 50 frames.

00:39:03.356 --> 00:39:05.186 A:middle
You rerun the detector; you run

00:39:05.186 --> 00:39:06.546 A:middle
it again for 50 frames, and you

00:39:06.546 --> 00:39:08.766 A:middle
keep doing just like that.

00:39:08.886 --> 00:39:10.176 A:middle
From the end user point of view,

00:39:10.466 --> 00:39:12.036 A:middle
it'll look like you're tracking

00:39:12.086 --> 00:39:12.786 A:middle
a single object.

00:39:13.726 --> 00:39:15.336 A:middle
But what you do instead, what

00:39:15.336 --> 00:39:16.846 A:middle
you do inside instead, you're

00:39:16.846 --> 00:39:18.416 A:middle
tracking smaller sequences, and

00:39:18.416 --> 00:39:20.586 A:middle
that's a smarter way of running

00:39:20.586 --> 00:39:21.500 A:middle
and tracking sequence.

00:39:27.336 --> 00:39:28.356 A:middle
Let's summarize what we have

00:39:28.356 --> 00:39:28.756 A:middle
seen today.

00:39:30.306 --> 00:39:31.846 A:middle
First, we talked about why you'd

00:39:31.846 --> 00:39:33.526 A:middle
use Vision, and we talked about

00:39:33.526 --> 00:39:34.716 A:middle
a multi-platform framework,

00:39:35.346 --> 00:39:36.876 A:middle
privacy-oriented, which offers

00:39:36.876 --> 00:39:38.756 A:middle
simple and consistent interface.

00:39:41.176 --> 00:39:42.796 A:middle
Second, we talked about what's

00:39:42.796 --> 00:39:45.076 A:middle
new, and we introduced a new

00:39:45.386 --> 00:39:46.756 A:middle
orientation-agnostic face

00:39:46.756 --> 00:39:47.166 A:middle
detector.

00:39:48.126 --> 00:39:49.556 A:middle
We talked also about revisions.

00:39:50.976 --> 00:39:52.826 A:middle
Then, we talked about how to

00:39:52.826 --> 00:39:54.796 A:middle
interact with Vision API, and we

00:39:54.796 --> 00:39:56.546 A:middle
discussed requests, request

00:39:56.546 --> 00:39:58.446 A:middle
handlers, and observations.

00:39:58.656 --> 00:40:01.626 A:middle
And finally, we looked at how to


00:39:58.656 --> 00:40:01.626 A:middle
And finally, we looked at how to

00:40:01.626 --> 00:40:03.396 A:middle
implement tracking sequence in

00:40:03.856 --> 00:40:04.000 A:middle
Vision.

00:40:05.436 --> 00:40:06.886 A:middle
For more information, I

00:40:06.886 --> 00:40:08.046 A:middle
recommend you to refer to this

00:40:08.046 --> 00:40:09.976 A:middle
link on the slide.

00:40:10.556 --> 00:40:12.176 A:middle
I can also recommend you to stay

00:40:12.176 --> 00:40:13.226 A:middle
for the next session, which will

00:40:13.226 --> 00:40:14.396 A:middle
be at 3 o'clock in this room

00:40:14.646 --> 00:40:16.026 A:middle
where Frank will cover details

00:40:16.026 --> 00:40:17.116 A:middle
of integration of Vision and

00:40:17.116 --> 00:40:17.566 A:middle
CoreML.

00:40:17.896 --> 00:40:19.226 A:middle
This is especially important if

00:40:19.226 --> 00:40:20.086 A:middle
you want to deploy your own

00:40:20.086 --> 00:40:20.546 A:middle
models.

00:40:21.246 --> 00:40:22.396 A:middle
That session will also cover

00:40:22.396 --> 00:40:24.576 A:middle
some details about Vision

00:40:24.576 --> 00:40:25.736 A:middle
Framework that were not covered

00:40:25.736 --> 00:40:26.296 A:middle
by this session.

00:40:27.636 --> 00:40:28.676 A:middle
And we'll also have Vison Lab

00:40:28.706 --> 00:40:30.166 A:middle
tomorrow, which is 3 to 5.

00:40:31.176 --> 00:40:33.056 A:middle
Thank you and have a great rest

00:40:33.056 --> 00:40:34.000 A:middle
of your WWDC.

00:40:34.846 --> 00:40:38.500 A:middle
[ Applause ]
