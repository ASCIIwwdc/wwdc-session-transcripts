WEBVTT

00:00:07.241 --> 00:00:16.250 align:start position:43% line:-1
(音楽)

00:00:18.151 --> 00:00:21.154 align:start position:43% line:-1
(拍手)

00:00:21.421 --> 00:00:24.558 align:start position:32% line:-1
こんにちは ようこそ

00:00:24.992 --> 00:00:28.962 align:start position:21% line:-2
Apple Musicチーム
エンジニアのベティム･デーバです

00:00:29.129 --> 00:00:33.667 align:start position:21% line:-2
MusicKitのアップデートを
皆さんと共有できてうれしいです

00:00:35.035 --> 00:00:39.806 align:start position:18% line:-2
昨年発表されたMusicKitにより
アプリケーションで―

00:00:39.907 --> 00:00:43.810 align:start position:25% line:-2
カスタマイズされた音楽体験が
可能になりました

00:00:44.444 --> 00:00:45.379 align:start position:43% line:-1
今年は―

00:00:45.479 --> 00:00:49.783 align:start position:9% line:-2
Apple Music on the Webを
発表し ご自身のウェブサイト上で

00:00:49.883 --> 00:00:53.954 align:start position:32% line:-2
同じような音楽体験の
提供が可能になります

00:00:54.655 --> 00:00:58.158 align:start position:27% line:-2
最高の埋め込み型
Webプレイヤーを用意して

00:00:58.292 --> 00:01:02.863 align:start position:20% line:-2
Web用MusicKitを公開して
ご自身のウェブサイトに

00:00:58.292 --> 00:01:02.863 align:start position:20% line:-2
Web用MusicKitを公開して
ご自身のウェブサイトに

00:01:02.963 --> 00:01:06.633 align:start position:16% line:-2
Apple Musicを融合することが
できるようになりました

00:01:07.534 --> 00:01:10.771 align:start position:2% line:-2
Apple Music on the Webについては
のちほど解説しますが

00:01:10.938 --> 00:01:14.775 align:start position:23% line:-2
まずはMusicKitの
アップデートから見てみましょう

00:01:17.344 --> 00:01:20.914 align:start position:11% line:-2
AppのデベロッパがApple Musicを
アプリケーションに組み込み

00:01:21.114 --> 00:01:23.684 align:start position:32% line:-2
活用している状況を
大変うれしく思います

00:01:23.917 --> 00:01:29.923 align:start position:12% line:-2
例えばmusical.lyで楽しくビデオを
自作している方も多いでしょう

00:01:30.524 --> 00:01:34.962 align:start position:21% line:-2
このAppで新しい曲を見つけたら
簡単にプレイリストへ追加できます

00:01:36.463 --> 00:01:40.000 align:start position:12% line:-2
HoudiniはApple Musicへの
参加を簡単にします

00:01:40.200 --> 00:01:44.705 align:start position:14% line:-2
あなたのプレイリストを
Apple Musicへ移行してくれます

00:01:45.906 --> 00:01:50.777 align:start position:16% line:-2
Stationheadはプレイリストを
ラジオ局に変えます

00:01:50.944 --> 00:01:56.517 align:start position:23% line:-2
あなたの音楽そして声も
世界中に放送することができます

00:01:57.818 --> 00:02:02.689 align:start position:32% line:-2
Olaはインド最大の
配車サービス会社です

00:01:57.818 --> 00:02:02.689 align:start position:32% line:-2
Olaはインド最大の
配車サービス会社です

00:02:03.056 --> 00:02:07.528 align:start position:14% line:-2
業務用の乗用車でApple Musicを
体験してもらうために

00:02:07.794 --> 00:02:09.963 align:start position:30% line:-1
彼らと協力してきました

00:02:11.331 --> 00:02:14.401 align:start position:21% line:-1
昨年のMusicKitの発表以来

00:02:14.601 --> 00:02:19.473 align:start position:23% line:-2
国際標準レコーディングコード
ISRCを用いたコンテンツの―

00:02:19.606 --> 00:02:25.579 align:start position:21% line:-2
参照方法に関するフィードバックが
たくさん寄せられました

00:02:26.280 --> 00:02:27.915 align:start position:36% line:-1
うれしいことに―

00:02:28.015 --> 00:02:32.152 align:start position:27% line:-2
この機能が加わり
他のほとんどの音楽ソースと

00:02:32.252 --> 00:02:34.855 align:start position:14% line:-1
Apple Musicカタログ内の楽曲や

00:02:34.955 --> 00:02:39.393 align:start position:25% line:-2
音楽ビデオを一致させることが
できるようになりました

00:02:41.195 --> 00:02:43.463 align:start position:30% line:-2
MusicKitの
もう1つの強化策として

00:02:43.564 --> 00:02:47.134 align:start position:14% line:-2
iCloudミュージックライブラリAPI
が加えられました

00:02:48.035 --> 00:02:52.406 align:start position:29% line:-2
ユーザがあなたのAppの
アクセスを許可すれば―

00:02:52.506 --> 00:02:59.079 align:start position:23% line:-2
ミュージックライブラリの操作を
App内から行えます

00:03:00.881 --> 00:03:04.952 align:start position:29% line:-2
これらのAPIでユーザは
ミュージックライブラリを

00:03:05.385 --> 00:03:09.990 align:start position:23% line:-2
閲覧 検索したり コンテンツを
加えることができます

00:03:10.657 --> 00:03:14.695 align:start position:21% line:-2
またあなたのAppで
ユーザがプレイリストを作成したり

00:03:14.962 --> 00:03:19.366 align:start position:27% line:-2
既存のリストに
楽曲を加えることもできます

00:03:24.137 --> 00:03:28.709 align:start position:11% line:-2
昨年は私たちのカタログ用の
Apple Music APIを提供しました

00:03:29.476 --> 00:03:31.478 align:start position:39% line:-1
今年はそれに

00:03:31.578 --> 00:03:34.314 align:start position:14% line:-2
iCloudミュージックライブラリAPI
が加わりました

00:03:34.414 --> 00:03:37.651 align:start position:30% line:-2
すばらしい音楽APIが
そろいました

00:03:38.185 --> 00:03:42.856 align:start position:12% line:-2
既存のiTunes Search APIを
使用しているのであれば

00:03:43.023 --> 00:03:46.894 align:start position:12% line:-2
すぐにでもApple Music APIへ
移行しましょう

00:03:48.228 --> 00:03:51.331 align:start position:25% line:-1
さてここからは同僚のDJが―

00:03:51.431 --> 00:03:54.268 align:start position:9% line:-2
Apple Music on the Webを
解説します

00:03:54.568 --> 00:03:55.736 align:start position:32% line:-1
ありがとうございます

00:03:56.003 --> 00:04:00.007 align:start position:43% line:-1
(拍手)

00:03:56.003 --> 00:04:00.007 align:start position:43% line:-1
(拍手)

00:04:01.241 --> 00:04:02.409 align:start position:34% line:-1
ありがとうベティム

00:04:03.143 --> 00:04:06.146 align:start position:14% line:-2
MusicKit on the Webを
発表できて興奮してます

00:04:06.380 --> 00:04:08.348 align:start position:23% line:-1
昨年はApple Musicを

00:04:08.448 --> 00:04:11.585 align:start position:29% line:-2
iOSアプリケーションに
加える方法を紹介しました

00:04:12.019 --> 00:04:15.589 align:start position:25% line:-2
今年は そのすばらしい機能を
Webにもたらします

00:04:16.690 --> 00:04:20.060 align:start position:11% line:-2
まずMusicKit on the Webの
コンポーネントについてです

00:04:21.995 --> 00:04:23.530 align:start position:29% line:-1
昨年 REST APIで

00:04:23.630 --> 00:04:26.300 align:start position:18% line:-2
全Apple Musicカタログへの
アクセスを加えました

00:04:27.234 --> 00:04:29.670 align:start position:32% line:-1
今年はユーザのために

00:04:29.770 --> 00:04:35.309 align:start position:16% line:-2
iCloudミュージックライブラリへの
アクセスをREST APIに加えます

00:04:36.510 --> 00:04:39.213 align:start position:20% line:-2
MusicKit JSライブラリも
公開します

00:04:39.546 --> 00:04:43.617 align:start position:21% line:-2
ブラウザ内で両REST APIを
簡単に使用できるようになり―

00:04:44.351 --> 00:04:48.222 align:start position:27% line:-2
ユーザはブラウザ内で
Apple Musicと―

00:04:48.422 --> 00:04:53.393 align:start position:18% line:-2
iCloudミュージックライブラリの
曲を完全に再生できます

00:04:56.830 --> 00:04:58.866 align:start position:16% line:-1
MusicKit JSを掘り下げる前に

00:04:58.966 --> 00:05:01.268 align:start position:12% line:-2
Apple Music Webプレイヤーを
お見せします

00:04:58.966 --> 00:05:01.268 align:start position:12% line:-2
Apple Music Webプレイヤーを
お見せします

00:05:03.003 --> 00:05:06.006 align:start position:29% line:-2
数週間前 埋め込み型の
プレイヤーを公開しました

00:05:06.773 --> 00:05:10.577 align:start position:23% line:-2
デスクトップ上でも
モバイルブラウザでも機能します

00:05:12.212 --> 00:05:15.182 align:start position:27% line:-2
この埋め込み型プレイヤーは
ウェブサイト上で

00:05:15.282 --> 00:05:18.852 align:start position:16% line:-2
Apple Musicカタログから曲の
フル再生を簡単に実現します

00:05:19.486 --> 00:05:23.423 align:start position:23% line:-2
曲 アルバム プレイリスト用の
プレイヤーがあります

00:05:24.391 --> 00:05:28.095 align:start position:16% line:-2
埋め込みコードは
Apple Musicプレビューページ

00:05:28.262 --> 00:05:30.697 align:start position:25% line:-1
またはプレイヤー内にあります

00:05:31.498 --> 00:05:34.501 align:start position:30% line:-2
ウェブサイトにコピーし
ペーストするだけです

00:05:35.102 --> 00:05:39.573 align:start position:21% line:-2
このプレイヤーはサードパーティの
サイトでの楽曲再生に最適で

00:05:39.773 --> 00:05:43.310 align:start position:12% line:-2
Apple Musicプレビューページでも
同機能を有効にしています

00:05:46.113 --> 00:05:48.815 align:start position:29% line:-2
MusicKit JSが
埋め込みを可能にし

00:05:49.082 --> 00:05:52.553 align:start position:32% line:-2
すばらしい音楽体験も
提供してくれます

00:05:53.754 --> 00:05:55.923 align:start position:29% line:-1
機能性についてお話します

00:05:58.425 --> 00:06:01.862 align:start position:14% line:-2
まず最も重要なのは
ブラウザでApple Musicの楽曲を

00:05:58.425 --> 00:06:01.862 align:start position:14% line:-2
まず最も重要なのは
ブラウザでApple Musicの楽曲を

00:06:01.995 --> 00:06:03.697 align:start position:32% line:-1
フル再生できる点です

00:06:03.997 --> 00:06:07.234 align:start position:29% line:-2
プラグインや
外部システムに依存せず―

00:06:07.401 --> 00:06:09.136 align:start position:27% line:-1
最新のブラウザで機能します

00:06:09.570 --> 00:06:10.971 align:start position:39% line:-1
単独使用も―

00:06:11.104 --> 00:06:13.874 align:start position:14% line:-2
好みのJavaScriptフレームワーク
との使用も可能です

00:06:15.008 --> 00:06:17.511 align:start position:38% line:-2
再生にユーザの
許可が必要です

00:06:17.945 --> 00:06:22.082 align:start position:16% line:-2
Apple Musicの購読者か否かは
当方で確認します

00:06:22.850 --> 00:06:25.152 align:start position:21% line:-2
JavaScriptライブラリは
キューを保持して

00:06:25.285 --> 00:06:27.821 align:start position:25% line:-2
アルバムやプレイリスト全体の
再生を可能に

00:06:30.390 --> 00:06:34.394 align:start position:34% line:-2
楽曲キューがあれば
再生 一時停止

00:06:34.528 --> 00:06:37.297 align:start position:34% line:-2
前後へのスキップが
可能になります

00:06:38.932 --> 00:06:41.668 align:start position:34% line:-2
再生中または
ロードされた楽曲の

00:06:41.835 --> 00:06:46.874 align:start position:23% line:-2
「再生中」メタデータも保持され
UIのレンダに使用できます

00:06:48.842 --> 00:06:52.012 align:start position:25% line:-2
Web上に簡単なプレイヤーを
構築する方法を解説します

00:06:52.179 --> 00:06:54.381 align:start position:14% line:-1
JavaScriptライブラリを含めます

00:06:56.850 --> 00:06:58.752 align:start position:25% line:-1
デベロッパトークンが必要です

00:06:58.852 --> 00:07:01.455 align:start position:32% line:-2
これは秘密鍵を使って
生成できます

00:06:58.852 --> 00:07:01.455 align:start position:32% line:-2
これは秘密鍵を使って
生成できます

00:07:03.924 --> 00:07:07.461 align:start position:25% line:-2
宣言型HTMLマークアップを
うまく活用できます

00:07:07.728 --> 00:07:10.697 align:start position:29% line:-2
サインイン サインアウト
再生操作のボタンなど

00:07:10.797 --> 00:07:12.833 align:start position:30% line:-2
ページにマークアップを
加えることができます

00:07:13.967 --> 00:07:16.003 align:start position:29% line:-1
それらの要素と対応する―

00:07:16.103 --> 00:07:18.272 align:start position:25% line:-2
MusicKitの機能と
連携させるのは当方が行います

00:07:19.606 --> 00:07:20.874 align:start position:32% line:-1
そして再生ボタンです

00:07:20.974 --> 00:07:25.245 align:start position:21% line:-2
Apple Musicカタログの
コンテンツIDやURLを使って

00:07:25.512 --> 00:07:27.314 align:start position:25% line:-1
再生を開始できるようにします

00:07:30.684 --> 00:07:32.352 align:start position:30% line:-1
コードを見てみましょう

00:07:32.886 --> 00:07:37.024 align:start position:12% line:-2
JavaScriptライブラリを含めますが
これは当方CDNでホストします

00:07:38.091 --> 00:07:41.195 align:start position:27% line:-2
サインイン サインアウトの
ボタンを加えます

00:07:42.763 --> 00:07:44.131 align:start position:29% line:-1
再生をコントロールする―

00:07:44.298 --> 00:07:47.568 align:start position:34% line:-2
再生 一時停止
次曲ボタンなどです

00:07:49.236 --> 00:07:53.373 align:start position:21% line:-2
再生中の楽曲に関してメタデータで
レンダする要素を加えます

00:07:53.507 --> 00:07:57.311 align:start position:23% line:-2
プレイリスト名 タイトル
アーティスト名など入手できます

00:07:58.779 --> 00:08:03.617 align:start position:29% line:-2
また再生中の楽曲の進行を
表示する要素があります

00:07:58.779 --> 00:08:03.617 align:start position:29% line:-2
また再生中の楽曲の進行を
表示する要素があります

00:08:04.418 --> 00:08:07.521 align:start position:32% line:-2
曲時間 再生時間
再生進行状況などです

00:08:09.289 --> 00:08:13.293 align:start position:21% line:-2
ここからはジェイ･ヘスが
MusicKit JSを使って―

00:08:13.460 --> 00:08:15.829 align:start position:30% line:-2
プレイヤーの
構築について解説します

00:08:16.730 --> 00:08:20.200 align:start position:43% line:-1
(拍手)

00:08:20.434 --> 00:08:21.768 align:start position:38% line:-1
ありがとうDJ

00:08:22.736 --> 00:08:27.975 align:start position:18% line:-2
まず画面右側にXcodeによる
HTMLテンプレートを表示してますが

00:08:28.242 --> 00:08:32.346 align:start position:16% line:-2
既にMusicKit JSライブラリに
リンクしてあります

00:08:32.479 --> 00:08:34.481 align:start position:30% line:-1
左側はSafariで―

00:08:34.581 --> 00:08:37.384 align:start position:30% line:-2
ライブリロードサーバを
作動しています

00:08:37.551 --> 00:08:42.523 align:start position:25% line:-2
マークアップの変更が
直接左側に反映されていきます

00:08:44.358 --> 00:08:49.129 align:start position:11% line:-2
まずMusicKit JSを使用目的に応じて
設定していきます

00:08:49.329 --> 00:08:50.831 align:start position:30% line:-1
宣言型マークアップでは

00:08:50.931 --> 00:08:53.834 align:start position:25% line:-1
メタタグで簡単に設定できます

00:08:55.636 --> 00:08:58.906 align:start position:32% line:-2
アプリケーション名を
指定したり―

00:08:59.072 --> 00:09:01.375 align:start position:32% line:-2
デベロッパトークンを
供給したりできます

00:08:59.072 --> 00:09:01.375 align:start position:32% line:-2
デベロッパトークンを
供給したりできます

00:09:05.145 --> 00:09:07.781 align:start position:29% line:-1
欲しい機能を得るために―

00:09:07.881 --> 00:09:10.184 align:start position:25% line:-2
ユーザがクリックするボタンを
加えます

00:09:10.284 --> 00:09:15.055 align:start position:14% line:-2
クリックするとApple Musicより
プレイリストが引き出され―

00:09:15.222 --> 00:09:18.258 align:start position:25% line:-2
再生キューの設定後
ブラウザ上で再生が始まります

00:09:18.492 --> 00:09:22.763 align:start position:21% line:-2
デスクトップ上のiTunesから
コンテンツURLを与えて

00:09:22.963 --> 00:09:25.666 align:start position:27% line:-2
埋め込みたいプレイリストを
指定します

00:09:26.333 --> 00:09:29.303 align:start position:5% line:-2
これは“Today at Apple Music”
プレイリストです

00:09:34.374 --> 00:09:41.014 align:start position:43% line:-1
(音楽)

00:09:41.515 --> 00:09:44.952 align:start position:27% line:-2
このシンプルなコード１行で
ブラウザ上で―

00:09:45.052 --> 00:09:48.522 align:start position:11% line:-2
“Today at Apple Music”
プレイリストをフル再生できます

00:09:51.825 --> 00:09:55.295 align:start position:32% line:-2
すばらしい機能ですが
ユーザのために―

00:09:55.529 --> 00:09:59.333 align:start position:25% line:-2
より良いコントロールや
機能性を追加したいところです

00:10:00.067 --> 00:10:03.537 align:start position:14% line:-1
まず Apple Music購読ユーザの

00:10:03.637 --> 00:10:06.673 align:start position:30% line:-2
ログインとログアウトを
機能させます

00:10:06.907 --> 00:10:07.774 align:start position:39% line:-1
そのために―

00:10:07.875 --> 00:10:11.044 align:start position:30% line:-2
許可と非許可のボタンを
ページに加えます

00:10:13.247 --> 00:10:17.751 align:start position:11% line:-2
apple-music-authorizeと
unauthorizeの属性を使用

00:10:19.153 --> 00:10:22.689 align:start position:20% line:-2
ボタンの表示状態は
MusicKit JSが管理します

00:10:22.823 --> 00:10:24.491 align:start position:27% line:-1
以前ログインしていたので―

00:10:24.591 --> 00:10:27.628 align:start position:4% line:-2
“Sign Out of Apple Music”が
反映されています

00:10:32.199 --> 00:10:35.068 align:start position:29% line:-2
次に 再生コントロールを
付加します

00:10:35.402 --> 00:10:38.605 align:start position:14% line:-1
Apple Music属性で指定できます

00:10:38.972 --> 00:10:40.641 align:start position:36% line:-1
指定は 例えば―

00:10:40.774 --> 00:10:43.544 align:start position:27% line:-1
“前のアイテムにスキップ”

00:10:46.046 --> 00:10:47.114 align:start position:39% line:-1
“一時停止”

00:10:47.247 --> 00:10:48.348 align:start position:43% line:-1
“再生”

00:10:49.883 --> 00:10:51.685 align:start position:27% line:-2
“次のアイテムにスキップ”
などです

00:10:56.723 --> 00:11:01.361 align:start position:25% line:-2
再生中のアイテムを見るために
「再生中」情報も付加できます

00:10:56.723 --> 00:11:01.361 align:start position:25% line:-2
再生中のアイテムを見るために
「再生中」情報も付加できます

00:11:02.429 --> 00:11:04.832 align:start position:20% line:-2
“プレイリストアートワークURL”
を指定し―

00:11:04.932 --> 00:11:08.068 align:start position:30% line:-2
レンダしたい“高さ”と
“幅”も指定できます

00:11:08.302 --> 00:11:12.239 align:start position:23% line:-2
またメディアアイテム内の
データ属性にもアクセスできます

00:11:12.573 --> 00:11:16.210 align:start position:23% line:-1
それによって“プレイリスト名”

00:11:17.778 --> 00:11:21.181 align:start position:25% line:-2
“楽曲名”“アーティスト名”
など指定できます

00:11:21.615 --> 00:11:24.184 align:start position:34% line:-2
下層においては
現在の再生時間を―

00:11:24.284 --> 00:11:27.788 align:start position:20% line:-2
HTMLの時間要素にロードするよう
指定しています

00:11:28.889 --> 00:11:32.893 align:start position:25% line:-2
ページが再ロードされると
「再生中」には何もないですが

00:11:32.993 --> 00:11:34.761 align:start position:30% line:-1
再生していないためで―

00:11:34.862 --> 00:11:39.666 align:start position:21% line:-2
これを修正するために
プレイリスト再生待ちボタンを追加

00:11:42.569 --> 00:11:45.706 align:start position:20% line:-1
16のプレイリストをペーストします

00:11:47.875 --> 00:11:49.610 align:start position:36% line:-1
クリックすると…

00:11:51.011 --> 00:11:57.851 align:start position:43% line:-1
(音楽)

00:11:58.418 --> 00:12:01.154 align:start position:34% line:-2
再生コントローラで
一時停止できます

00:11:58.418 --> 00:12:01.154 align:start position:34% line:-2
再生コントローラで
一時停止できます

00:12:01.788 --> 00:12:03.757 align:start position:30% line:-1
次のアイテムに飛べます

00:12:06.493 --> 00:12:09.696 align:start position:43% line:-1
(音楽)

00:12:10.063 --> 00:12:12.166 align:start position:34% line:-1
戻ることもできます

00:12:18.138 --> 00:12:23.410 align:start position:23% line:-2
MusicKit JSは宣言型
マークアップで作業を容易にし

00:12:23.510 --> 00:12:25.746 align:start position:23% line:-2
JavaScript APIも
提供します

00:12:25.879 --> 00:12:30.517 align:start position:14% line:-2
ここで再びDJが
JavaScript APIを解説します

00:12:30.651 --> 00:12:31.685 align:start position:30% line:-1
ありがとうございました

00:12:31.818 --> 00:12:36.957 align:start position:43% line:-1
(拍手)

00:12:38.992 --> 00:12:40.294 align:start position:34% line:-1
ありがとう ジェイ

00:12:41.895 --> 00:12:46.833 align:start position:25% line:-2
宣言型マークアップは
直接的に基本機能を付加します

00:12:47.234 --> 00:12:49.636 align:start position:25% line:-1
もっと進んだ使い道もあります

00:12:50.103 --> 00:12:53.040 align:start position:21% line:-2
MusicKitと相互に作用する
JavaScriptを記述します

00:12:53.207 --> 00:12:54.808 align:start position:30% line:-1
いくつか例を見ましょう

00:12:55.676 --> 00:12:59.046 align:start position:25% line:-2
IDでカタログのメタデータを
取得できます

00:13:01.215 --> 00:13:04.751 align:start position:20% line:-2
Apple Musicカタログ内の
コンテンツを検索できます

00:13:06.386 --> 00:13:10.257 align:start position:18% line:-2
iCloudミュージックライブラリの
ブラウズが可能で

00:13:10.390 --> 00:13:13.360 align:start position:32% line:-2
ライブラリの範囲内で
検索も機能します

00:13:14.294 --> 00:13:17.698 align:start position:30% line:-2
楽曲キューも直接設定し
制御できます

00:13:19.399 --> 00:13:22.703 align:start position:32% line:-2
再生イベントに反応し
UIを駆動させます

00:13:25.973 --> 00:13:27.908 align:start position:25% line:-1
いくつかコードを見ていきます

00:13:28.775 --> 00:13:32.146 align:start position:5% line:-2
MusicKit getInstanceメソッドを
最初に使います

00:13:33.380 --> 00:13:37.151 align:start position:21% line:-2
MusicKitは１度に１曲しか
再生できないシングルトンです

00:13:37.484 --> 00:13:42.756 align:start position:20% line:-2
それをmusic変数にアサインして
今回の事例に使用していきます

00:13:44.124 --> 00:13:46.293 align:start position:30% line:-1
IDを頼りに楽曲を参照

00:13:47.561 --> 00:13:50.931 align:start position:23% line:-2
songメソッドがIDを取ると
コールバックの供給が必要

00:13:51.064 --> 00:13:52.266 align:start position:29% line:-1
これはpromiseです

00:13:52.366 --> 00:13:54.935 align:start position:20% line:-2
このpromiseモデルは
MusicKit全般で使用されます

00:13:56.970 --> 00:13:59.406 align:start position:29% line:-2
コンテンツオブジェクトが
返送され―

00:13:59.506 --> 00:14:03.043 align:start position:30% line:-2
これには楽曲の属性や
関係性が示されています

00:13:59.506 --> 00:14:03.043 align:start position:30% line:-2
これには楽曲の属性や
関係性が示されています

00:14:03.210 --> 00:14:06.246 align:start position:32% line:-2
例えばアーティストや
アルバム名です

00:14:09.383 --> 00:14:12.052 align:start position:29% line:-2
ベティムが言ったとおり
コンテンツIDがなければ

00:14:12.152 --> 00:14:17.257 align:start position:25% line:-2
ISRCへのクエリフィルタで
同様の参照ができます

00:14:17.724 --> 00:14:21.228 align:start position:29% line:-2
返送されたオブジェクトは
先の例と同じです

00:14:24.832 --> 00:14:26.600 align:start position:27% line:-1
１回のネットワークコールで

00:14:26.700 --> 00:14:29.403 align:start position:29% line:-2
多数の楽曲オブジェクトを
返送したい場合

00:14:29.503 --> 00:14:31.738 align:start position:30% line:-1
バッチAPIがあります

00:14:32.039 --> 00:14:34.608 align:start position:29% line:-2
これはアルバムや
プレイリストでも使えます

00:14:39.980 --> 00:14:43.617 align:start position:18% line:-2
iCloudミュージックライブラリの
コンテンツも再生できます

00:14:44.685 --> 00:14:47.621 align:start position:30% line:-2
これらのAPIは
ライブラリ範囲で機能し

00:14:47.888 --> 00:14:51.492 align:start position:23% line:-2
楽曲 アルバム
プレイリストなどを入手できます

00:14:52.292 --> 00:14:57.097 align:start position:23% line:-2
APIはページネートされていて
サブセットだけを取得できます

00:14:57.297 --> 00:15:03.136 align:start position:25% line:-2
各ページが閲覧されている間は
多くのアンロードが可能です

00:14:57.297 --> 00:15:03.136 align:start position:25% line:-2
各ページが閲覧されている間は
多くのアンロードが可能です

00:15:04.938 --> 00:15:07.241 align:start position:21% line:-2
Apple Musicカタログを
検索できます

00:15:08.208 --> 00:15:10.677 align:start position:30% line:-2
ここではまず楽曲だけを
検索して

00:15:10.811 --> 00:15:14.248 align:start position:29% line:-2
次に楽曲と
アルバム両方を検索します

00:15:14.882 --> 00:15:18.085 align:start position:25% line:-2
返送される結果数に
制限を設定することもできます

00:15:20.654 --> 00:15:22.990 align:start position:25% line:-1
同様のクエリを実行できますが

00:15:23.090 --> 00:15:25.792 align:start position:18% line:-2
iCloudミュージックライブラリの
範囲内とします

00:15:25.993 --> 00:15:29.897 align:start position:25% line:-2
同じパラメータでまったく同じ
検索メソッドを使っていますが

00:15:30.164 --> 00:15:32.633 align:start position:34% line:-2
ライブラリ範囲内の
検索となっています

00:15:36.169 --> 00:15:38.071 align:start position:32% line:-1
次は許可についてです

00:15:38.572 --> 00:15:41.475 align:start position:32% line:-1
許可が必要になるのは

00:15:41.708 --> 00:15:43.343 align:start position:39% line:-1
再生開始時や

00:15:43.443 --> 00:15:47.748 align:start position:18% line:-2
iCloudミュージックライブラリに
アクセスする前です

00:15:48.916 --> 00:15:51.018 align:start position:29% line:-1
自動的なトリガも可能です

00:15:51.118 --> 00:15:54.955 align:start position:27% line:-2
誰かがサイトを訪問した時に
強制的に適用できます

00:15:58.525 --> 00:16:01.828 align:start position:30% line:-2
ユーザがボタンを押すと
再生が始まります

00:15:58.525 --> 00:16:01.828 align:start position:30% line:-2
ユーザがボタンを押すと
再生が始まります

00:16:01.929 --> 00:16:04.565 align:start position:20% line:-2
これにはsetQueueメソッドを
使用します

00:16:04.965 --> 00:16:07.201 align:start position:25% line:-1
ここではアルバムIDを供給し

00:16:07.301 --> 00:16:11.638 align:start position:23% line:-2
MusicKitがメタデータの
取得をし キューを設定します

00:16:12.306 --> 00:16:14.741 align:start position:29% line:-2
コンテンツオブジェクトが
ある場合は

00:16:14.908 --> 00:16:17.544 align:start position:32% line:-2
それを直接渡すことで
処理がなされます

00:16:19.780 --> 00:16:21.815 align:start position:20% line:-2
setQueueはpromiseを
返送します

00:16:22.082 --> 00:16:24.151 align:start position:25% line:-2
キューが十分にロードされると
再生を開始

00:16:24.284 --> 00:16:27.855 align:start position:27% line:-2
“music.play”で
自動的に再生を始めます

00:16:31.091 --> 00:16:34.161 align:start position:30% line:-2
再生が始まったあと
コントロールも可能です

00:16:34.461 --> 00:16:38.232 align:start position:27% line:-2
前後のアイテムにスキップや
一時停止もできます

00:16:42.302 --> 00:16:46.273 align:start position:23% line:-2
UI内にアクションを設定すれば
楽曲 アルバムなどを

00:16:46.373 --> 00:16:50.677 align:start position:18% line:-2
iCloudミュージックライブラリへ
付加できるようにします

00:16:51.145 --> 00:16:53.680 align:start position:14% line:-2
ここにaddToLibraryメソッドが
あります

00:16:56.350 --> 00:17:00.487 align:start position:32% line:-2
これら３つのコールを
バッチで実行できます

00:16:56.350 --> 00:17:00.487 align:start position:32% line:-2
これら３つのコールを
バッチで実行できます

00:17:00.687 --> 00:17:05.592 align:start position:23% line:-2
最初の例と同じ４つのアイテムを
１つのコールで処理します

00:17:08.694 --> 00:17:10.297 align:start position:36% line:-1
次はイベントです

00:17:11.531 --> 00:17:15.002 align:start position:21% line:-2
MusicKitはイベントを発し
これはUIの駆動に使用されます

00:17:15.135 --> 00:17:17.671 align:start position:25% line:-2
このように設定するのは
MusicKitはフル再生に

00:17:17.771 --> 00:17:20.641 align:start position:27% line:-2
オーディオ要素を
保有する必要があるためです

00:17:21.675 --> 00:17:25.779 align:start position:9% line:-2
“addEventListener”を使います
DOM記述の経験があれば

00:17:25.878 --> 00:17:28.048 align:start position:32% line:-2
馴染み深いパターンと
なるでしょう

00:17:28.782 --> 00:17:32.186 align:start position:25% line:-2
ここではいくつかのイベントを
例として取り上げます

00:17:34.955 --> 00:17:38.392 align:start position:11% line:-2
“mediaItemWillChange”と
“mediaItemDidChange”が

00:17:38.525 --> 00:17:40.661 align:start position:27% line:-2
キューの
「再生中」アイテムが変わり

00:17:40.794 --> 00:17:43.730 align:start position:34% line:-2
曲が次に移行すると
発信されます

00:17:44.198 --> 00:17:46.867 align:start position:32% line:-2
これを再生中の楽曲を
表示するUIへの―

00:17:47.067 --> 00:17:49.369 align:start position:30% line:-2
アップデートのトリガに
利用できます

00:17:52.339 --> 00:17:53.640 align:start position:38% line:-1
再生を始めると

00:17:53.740 --> 00:17:56.076 align:start position:21% line:-2
“playbackState”の
変化イベントが発信

00:17:56.176 --> 00:17:58.679 align:start position:25% line:-2
ここでは再び
“Will”と“Did”です

00:17:59.847 --> 00:18:05.152 align:start position:21% line:-2
例えば楽曲がロードされたり
再生や一時停止したことを認知でき

00:17:59.847 --> 00:18:05.152 align:start position:21% line:-2
例えば楽曲がロードされたり
再生や一時停止したことを認知でき

00:18:05.419 --> 00:18:07.788 align:start position:23% line:-1
UIを適宜アップデートできます

00:18:08.322 --> 00:18:12.626 align:start position:29% line:-2
このイベントは古い状態と
移行先の状態を与えます

00:18:16.930 --> 00:18:20.868 align:start position:9% line:-2
楽曲再生中“playbackProgress”
変化イベントが与えられ

00:18:22.636 --> 00:18:26.240 align:start position:30% line:-2
現在の再生進行度が％で
表示され

00:18:26.373 --> 00:18:28.876 align:start position:25% line:-2
progress UIの
アップデートにも使用できます

00:18:31.845 --> 00:18:34.481 align:start position:30% line:-2
メディアの再生エラーも
生じるかもしれません

00:18:35.082 --> 00:18:38.318 align:start position:9% line:-2
mediaPlaybackErrorイベントが
発信します

00:18:38.952 --> 00:18:42.923 align:start position:21% line:-2
それを受けたら ユーザに
適切なエラーメッセージを伝えます

00:18:45.726 --> 00:18:47.561 align:start position:34% line:-2
再度ジェイに
登場してもらいます

00:18:47.694 --> 00:18:49.963 align:start position:25% line:-1
たった今構築したプレイヤーで

00:18:50.130 --> 00:18:53.433 align:start position:20% line:-2
JavaScript APIによる
Apple Musicカタログや

00:18:53.600 --> 00:18:58.138 align:start position:18% line:-2
iCloudミュージックライブラリの
検索を見せ―

00:18:58.505 --> 00:19:02.709 align:start position:27% line:-2
イベントを使って簡単な
プログレスバーを構築します

00:18:58.505 --> 00:19:02.709 align:start position:27% line:-2
イベントを使って簡単な
プログレスバーを構築します

00:19:03.377 --> 00:19:04.211 align:start position:38% line:-1
ジェイよろしく

00:19:05.078 --> 00:19:06.079 align:start position:38% line:-1
DJありがとう

00:19:06.513 --> 00:19:10.818 align:start position:43% line:-1
(拍手)

00:19:12.653 --> 00:19:18.659 align:start position:27% line:-2
では先の例を元に さらに
プレイリスト検索を加えます

00:19:18.959 --> 00:19:23.730 align:start position:25% line:-2
先の例で実演した
いくつかの設定を外しましたが

00:19:23.831 --> 00:19:27.067 align:start position:32% line:-2
いくつかの機能は
ページ内に残しました

00:19:27.301 --> 00:19:29.570 align:start position:21% line:-1
またJavaScriptを加える

00:19:29.670 --> 00:19:33.140 align:start position:18% line:-2
アプリケーションJavaScript
ファイルを追加しましたが

00:19:33.273 --> 00:19:36.176 align:start position:30% line:-2
その前にHTMLを
ざっと再確認しましょう

00:19:37.177 --> 00:19:41.448 align:start position:30% line:-2
最も大きな変更は
検索用input要素と

00:19:41.582 --> 00:19:46.520 align:start position:21% line:-2
検索結果を入れるDOMコンテナを
２つ加えたことでした

00:19:47.120 --> 00:19:50.791 align:start position:12% line:-2
MusicKit JSはアプリケーションと
合わせて使用するライブラリや

00:19:50.924 --> 00:19:52.893 align:start position:30% line:-2
フレームワークに関して
評価を下しません

00:19:53.093 --> 00:19:56.563 align:start position:29% line:-2
CSSはオフスクリーンで
既に構築され

00:19:56.830 --> 00:20:00.267 align:start position:25% line:-2
さらに別ファイルに
テンプレートヘルパもあります

00:19:56.830 --> 00:20:00.267 align:start position:25% line:-2
さらに別ファイルに
テンプレートヘルパもあります

00:20:00.801 --> 00:20:05.639 align:start position:27% line:-2
左側のマークアップが
少し妙な状態になっています

00:20:05.772 --> 00:20:11.044 align:start position:25% line:-2
ボタンがフローティング状態で
アートワークは明らかに空です

00:20:11.345 --> 00:20:15.916 align:start position:23% line:-2
これはMusicKit JSは
メタタグで設定が行われると

00:20:16.016 --> 00:20:21.088 align:start position:21% line:-2
宣言型マークアップの有効化が
求められていると判断するからです

00:20:21.255 --> 00:20:24.992 align:start position:18% line:-2
設定がなければ
JavaScriptの稼動を推定して

00:20:25.092 --> 00:20:27.027 align:start position:32% line:-2
宣言型マークアップは
不要と判断します

00:20:27.161 --> 00:20:30.697 align:start position:14% line:-2
しかしJavaScriptで再有効化する
フックを用意しています

00:20:33.100 --> 00:20:36.403 align:start position:18% line:-2
ドキュメントに発せられる
musicitloadedイベントを

00:20:36.503 --> 00:20:38.672 align:start position:18% line:-2
待機して
MusicKit JSを設定できます

00:20:38.939 --> 00:20:40.807 align:start position:18% line:-1
これによってMusicKit JSは

00:20:40.908 --> 00:20:44.545 align:start position:27% line:-2
設定済みの状態で
再生できることがわかります

00:20:45.546 --> 00:20:49.116 align:start position:21% line:-2
メタタグ同様に
アプリケーション名を設定できます

00:20:49.249 --> 00:20:53.153 align:start position:12% line:-2
declarativeMarkupと称する
属性を“true”に設定すると

00:20:53.554 --> 00:20:56.590 align:start position:11% line:-2
MusicKit JSは ミックスドモードで
稼動しているため

00:20:56.690 --> 00:20:59.927 align:start position:25% line:-2
宣言型マークアップの有効化が
必要と認識できます

00:21:05.532 --> 00:21:07.734 align:start position:27% line:-1
次に検索ハンドラを加えます

00:21:07.834 --> 00:21:09.570 align:start position:20% line:-1
これは端的なJavaScriptで

00:21:09.670 --> 00:21:12.506 align:start position:18% line:-2
MusicKit JS特有のものでは
ありませんが

00:21:12.639 --> 00:21:15.209 align:start position:29% line:-2
ユーザがサーチボックスの
Enterを押すと

00:21:15.342 --> 00:21:19.179 align:start position:23% line:-2
サーチを指示するコールバックが
発せられる仕組みです

00:21:20.581 --> 00:21:26.887 align:start position:11% line:-2
これはMusicKit API プロパティの
検索メソッドを使って適用できます

00:21:27.854 --> 00:21:30.858 align:start position:16% line:-2
Apple Music APIに対する
検索が実行されますが

00:21:30.958 --> 00:21:36.096 align:start position:12% line:-2
設定オブジェクトと合わせて
Apple Music APIが受け取る―

00:21:36.230 --> 00:21:38.899 align:start position:27% line:-2
クエリパラメータのどれでも
指定できます

00:21:39.266 --> 00:21:42.536 align:start position:27% line:-2
検索を指定して検索対象を
“プレイリスト”に限定して

00:21:43.036 --> 00:21:45.639 align:start position:30% line:-2
検索結果も“８”までに
限定します

00:21:47.074 --> 00:21:52.012 align:start position:21% line:-2
カスタムテンプレートがありますが
ハイライトしたこの３行は

00:21:52.279 --> 00:21:55.382 align:start position:30% line:-2
ユーザがクリックした
アートワークを取得して

00:21:55.482 --> 00:21:58.252 align:start position:20% line:-2
再生キューをこのプレイリストIDに
設定することを

00:21:58.352 --> 00:22:01.355 align:start position:23% line:-2
MusicKitインスタンスに
指示しています

00:21:58.352 --> 00:22:01.355 align:start position:23% line:-2
MusicKitインスタンスに
指示しています

00:22:01.722 --> 00:22:05.325 align:start position:18% line:-2
あとはpromiseが返送され
“music.play”をコールして

00:22:05.425 --> 00:22:07.261 align:start position:36% line:-1
再生が開始します

00:22:07.561 --> 00:22:09.763 align:start position:27% line:-2
“カスタムレンダリング”も
あります

00:22:13.767 --> 00:22:15.569 align:start position:25% line:-1
“Aリスト”検索を実行します

00:22:16.069 --> 00:22:20.874 align:start position:20% line:-2
Apple Musicカタログから
８のAリストが得られました

00:22:24.177 --> 00:22:26.346 align:start position:34% line:-1
同じような検索を―

00:22:26.447 --> 00:22:29.716 align:start position:23% line:-2
私のiCloudライブラリにも
適用したいところです

00:22:30.317 --> 00:22:34.388 align:start position:25% line:-2
ほぼ同じ手順で実行できますが
検索メソッドは

00:22:34.555 --> 00:22:36.490 align:start position:29% line:-1
APIプロパティではなく

00:22:36.590 --> 00:22:39.393 align:start position:30% line:-2
ライブラリプロパティの
ものとなります

00:22:39.693 --> 00:22:42.996 align:start position:20% line:-2
クラウドライブラリの検索を
MusicKit JSに知らせます

00:22:44.998 --> 00:22:47.935 align:start position:29% line:-2
同じようにプレイリストと
“８”を設定します

00:22:48.068 --> 00:22:53.474 align:start position:23% line:-2
キューや再生開始が設定され
コードはまったく同じに見えます

00:22:57.578 --> 00:23:01.949 align:start position:23% line:-2
先ほどと同じサーチを実行すると
カタログ検索結果とともに

00:22:57.578 --> 00:23:01.949 align:start position:23% line:-2
先ほどと同じサーチを実行すると
カタログ検索結果とともに

00:23:02.049 --> 00:23:06.186 align:start position:18% line:-2
iCloudミュージックライブラリも
表示されます

00:23:07.588 --> 00:23:09.122 align:start position:36% line:-1
クリックすると―

00:23:10.257 --> 00:23:13.293 align:start position:25% line:-2
クラウドライブラリアイテムが
再生されます

00:23:13.594 --> 00:23:17.998 align:start position:43% line:-1
(音楽)

00:23:18.499 --> 00:23:22.236 align:start position:27% line:-2
「再生中」スクリーンまたは
下部情報欄を見ると

00:23:22.336 --> 00:23:28.141 align:start position:23% line:-2
楽曲の進行を示すインジケータが
欠落しているのがわかります

00:23:29.309 --> 00:23:31.211 align:start position:20% line:-1
MusicKit JSが供給する―

00:23:31.311 --> 00:23:35.349 align:start position:2% line:-2
“playbackProgressDidChange”
イベントを待機することにより

00:23:35.449 --> 00:23:37.518 align:start position:25% line:-1
そのような機能を加えられます

00:23:42.289 --> 00:23:44.992 align:start position:20% line:-2
MusicKitインスタンスに対し
イベントリスナーを加えて

00:23:45.292 --> 00:23:48.462 align:start position:2% line:-2
“playbackProgressDidChange”
を待機させ イベントが生じると

00:23:48.595 --> 00:23:50.964 align:start position:34% line:-2
カスタムレンダラが
進行をレンダします

00:23:54.635 --> 00:23:56.803 align:start position:29% line:-1
またAリストを検索します

00:23:58.238 --> 00:24:02.609 align:start position:21% line:-2
今度は楽曲を再生すると
カスタム進行バーがレンダされます

00:23:58.238 --> 00:24:02.609 align:start position:21% line:-2
今度は楽曲を再生すると
カスタム進行バーがレンダされます

00:24:07.915 --> 00:24:10.751 align:start position:23% line:-2
MusicKit JSで
もっといろんなことができますが

00:24:10.851 --> 00:24:14.688 align:start position:23% line:-2
ここでDJに再登場してもらって
今日の内容を総括します

00:24:15.122 --> 00:24:19.760 align:start position:43% line:-1
(拍手)

00:24:20.160 --> 00:24:23.597 align:start position:29% line:-2
ウェブサイトにすばらしい
音楽体験をもたらせます

00:24:24.331 --> 00:24:28.969 align:start position:21% line:-2
宣言型マークアップを使って
簡単な機能を速やかに付加できます

00:24:29.937 --> 00:24:34.074 align:start position:12% line:-2
JavaScript APIを直接使用して
より高度なAppも作成できます

00:24:34.441 --> 00:24:37.144 align:start position:23% line:-2
皆さんがどのように活用されるか
楽しみです

00:24:37.377 --> 00:24:41.148 align:start position:27% line:-1
資料も豊富にそろえています

00:24:41.381 --> 00:24:44.484 align:start position:11% line:-2
このあとTechnology Lab 3にて
ラボを開催します

00:24:44.718 --> 00:24:46.687 align:start position:32% line:-2
ご質問のある方は
どうぞお越しください

00:24:47.688 --> 00:24:48.856 align:start position:30% line:-1
ありがとうございました

00:24:49.056 --> 00:24:50.390 align:start position:43% line:-1
(拍手)
