WEBVTT

00:00:07.107 --> 00:00:16.783 align:start position:43% line:-1
(音楽)

00:00:17.885 --> 00:00:18.986 align:start position:34% line:-1
おはようございます

00:00:19.086 --> 00:00:20.254 align:start position:43% line:-1
(拍手)

00:00:20.354 --> 00:00:20.988 align:start position:45% line:-1
すごい

00:00:22.689 --> 00:00:23.557 align:start position:45% line:-1
どうも

00:00:24.525 --> 00:00:26.393 align:start position:16% line:-2
Advanced Dark Modeへ
ようこそ

00:00:26.727 --> 00:00:30.697 align:start position:25% line:-2
マット･ジェイコブソンと
ジェフ･ナドーがお届けします

00:00:30.864 --> 00:00:33.634 align:start position:27% line:-2
私たちはAppleで
Cocoaを開発しています

00:00:34.401 --> 00:00:37.171 align:start position:30% line:-1
興奮して仕方ありません

00:00:37.271 --> 00:00:40.440 align:start position:23% line:-2
今日のテーマは
Mojaveのダークモードです

00:00:42.609 --> 00:00:43.243 align:start position:45% line:-1
さて…

00:00:44.978 --> 00:00:46.980 align:start position:30% line:-1
イントロセッションでは

00:00:47.381 --> 00:00:52.219 align:start position:27% line:-2
ダークモードの適用について
お伝えしました

00:00:52.452 --> 00:00:56.156 align:start position:20% line:-2
Mac OS 10.14 SDKを
使用すること

00:00:56.723 --> 00:01:01.261 align:start position:29% line:-2
ハードコードされていない
動的な色を活用すること

00:00:56.723 --> 00:01:01.261 align:start position:29% line:-2
ハードコードされていない
動的な色を活用すること

00:01:01.795 --> 00:01:05.132 align:start position:29% line:-2
テンプレート画像や
マテリアルの活用法もです

00:01:05.566 --> 00:01:11.271 align:start position:21% line:-2
Xcode 10の新機能を使えば
ダークモード向けの―

00:01:11.371 --> 00:01:14.541 align:start position:27% line:-2
カスタムカラーや
画像アセットも定義できます

00:01:16.343 --> 00:01:19.913 align:start position:32% line:-2
これらの項目について
復習したい方は

00:01:20.013 --> 00:01:22.583 align:start position:32% line:-2
イントロセッションを
ご覧ください

00:01:25.285 --> 00:01:29.389 align:start position:29% line:-2
これらのテクニックを
ダークモードで使うだけで

00:01:29.489 --> 00:01:33.660 align:start position:32% line:-2
インターフェイスは
グッと良くなるのです

00:01:34.528 --> 00:01:37.531 align:start position:27% line:-1
ただし このセッションでは

00:01:37.631 --> 00:01:40.067 align:start position:32% line:-2
もう少し
踏み込んでみましょう

00:01:45.005 --> 00:01:47.508 align:start position:32% line:-1
テーマは６つあります

00:01:47.608 --> 00:01:50.077 align:start position:30% line:-1
１つ目は アピアランス

00:01:50.177 --> 00:01:53.914 align:start position:30% line:-2
カスタムビューにおける
その活用法です

00:01:54.615 --> 00:01:56.683 align:start position:34% line:-2
２つ目は
マテリアルを使って

00:01:56.783 --> 00:02:01.121 align:start position:27% line:-2
インターフェイスを最大限に
良く見せる方法です

00:01:56.783 --> 00:02:01.121 align:start position:27% line:-2
インターフェイスを最大限に
良く見せる方法です

00:02:01.889 --> 00:02:05.726 align:start position:11% line:-2
次にVibrant Blendingについて
ジェフが話します

00:02:05.826 --> 00:02:08.794 align:start position:27% line:-1
これでビューを改善できます

00:02:09.562 --> 00:02:14.601 align:start position:9% line:-2
項目の選択時に有用な
Background Stylesも登場します

00:02:15.402 --> 00:02:20.107 align:start position:29% line:-2
最後にご紹介するのは
ダークモードを残しつつ―

00:02:20.207 --> 00:02:24.178 align:start position:25% line:-2
旧バージョンのMac OSを
デプロイする方法です

00:02:24.545 --> 00:02:29.082 align:start position:29% line:-2
ダークモードを使いこなす
秘けつもお伝えします

00:02:30.284 --> 00:02:31.618 align:start position:36% line:-1
では始めましょう

00:02:33.020 --> 00:02:35.322 align:start position:25% line:-1
Mojaveに求められるのは

00:02:35.756 --> 00:02:39.560 align:start position:34% line:-2
明暗をうまく
両立させることです

00:02:40.294 --> 00:02:44.398 align:start position:25% line:-2
それを可能にするのが
NSAppearanceです

00:02:45.399 --> 00:02:49.203 align:start position:23% line:-2
NSAppearanceは
Cocoaの開発に欠かせません

00:02:49.670 --> 00:02:53.941 align:start position:34% line:-2
単一のビュー階層を
維持しておくだけで

00:02:54.041 --> 00:02:57.911 align:start position:30% line:-2
ライトとダークが
うまく調整されるのです

00:02:59.079 --> 00:03:03.183 align:start position:29% line:-2
ダークモードの開発に
私たちは尽力してきました

00:02:59.079 --> 00:03:03.183 align:start position:29% line:-2
ダークモードの開発に
私たちは尽力してきました

00:03:03.283 --> 00:03:07.254 align:start position:27% line:-2
その中で使用してきた
NSAppearanceは

00:03:07.354 --> 00:03:10.257 align:start position:27% line:-2
高コントラストモードや
Touch Barのような

00:03:10.357 --> 00:03:15.596 align:start position:29% line:-2
様々なインターフェイスの
基盤となるものです

00:03:15.996 --> 00:03:16.663 align:start position:45% line:-1
さて…

00:03:18.732 --> 00:03:22.169 align:start position:30% line:-2
aquaのウインドウの
アピアランスは

00:03:22.269 --> 00:03:24.638 align:start position:32% line:-1
ライトがメインでした

00:03:24.738 --> 00:03:28.675 align:start position:30% line:-2
もちろん10.14では
ダークも用意しています

00:03:28.775 --> 00:03:31.311 align:start position:21% line:-1
darkAquaのウインドウです

00:03:32.212 --> 00:03:35.983 align:start position:27% line:-2
ビューを構成するアセットは
すべて含まれます

00:03:36.183 --> 00:03:40.587 align:start position:30% line:-2
つまり 動的なカラーや
標準のエフェクト

00:03:40.687 --> 00:03:43.590 align:start position:29% line:-2
名前付きの画像に
Cocoaのコントロール

00:03:43.690 --> 00:03:45.959 align:start position:30% line:-1
すべてが詰まっています

00:03:47.194 --> 00:03:52.866 align:start position:25% line:-2
さらにAppKitは自動的に
ユーザの好みに合わせて

00:03:52.966 --> 00:03:56.503 align:start position:36% line:-2
アピアランスを
調整してくれます

00:03:56.603 --> 00:03:59.673 align:start position:20% line:-2
macOS 10.14 SDKなら
可能です

00:03:59.940 --> 00:04:03.677 align:start position:12% line:-2
このアプリケーションは
Chameleon Wranglerですね

00:03:59.940 --> 00:04:03.677 align:start position:12% line:-2
このアプリケーションは
Chameleon Wranglerですね

00:04:03.777 --> 00:04:07.814 align:start position:30% line:-2
レイチェルとテイラーが
作ったものです

00:04:07.915 --> 00:04:11.652 align:start position:18% line:-2
これをmac OS 10.14の下で
リンクさせれば

00:04:11.752 --> 00:04:15.989 align:start position:21% line:-2
darkAquaのアピアランスが
自動で加えられます

00:04:16.757 --> 00:04:20.160 align:start position:32% line:-2
アピアランスを
さらに変えたい時は？

00:04:20.260 --> 00:04:23.130 align:start position:30% line:-2
例えば
メモ帳のアピアランスを

00:04:23.230 --> 00:04:26.300 align:start position:29% line:-1
変えたいと思ったとします

00:04:26.600 --> 00:04:29.603 align:start position:30% line:-1
現時点ではダークですが

00:04:29.703 --> 00:04:32.940 align:start position:36% line:-2
ライトの要素も
加えたいとします

00:04:33.740 --> 00:04:36.410 align:start position:30% line:-1
そんな時 役に立つのが

00:04:36.510 --> 00:04:39.079 align:start position:5% line:-2
NSAppearanceCustomization
です

00:04:39.847 --> 00:04:44.718 align:start position:30% line:-2
プロトコルの１つですが
インストールは不要です

00:04:45.152 --> 00:04:48.922 align:start position:18% line:-2
NSViewやNSWindowにより
すでに組み込まれています

00:04:49.022 --> 00:04:52.459 align:start position:12% line:-2
Mojaveでは
NSApplicationも対応しています

00:04:52.960 --> 00:04:56.296 align:start position:32% line:-2
記述するプロパティは
２つだけです

00:04:56.396 --> 00:04:58.599 align:start position:25% line:-1
１つ目はappearance

00:04:58.699 --> 00:05:02.803 align:start position:30% line:-2
これでアピアランスを
オーバーライドできます

00:04:58.699 --> 00:05:02.803 align:start position:30% line:-2
これでアピアランスを
オーバーライドできます

00:05:03.203 --> 00:05:06.373 align:start position:25% line:-2
これは任意の
NSAppearanceです

00:05:06.507 --> 00:05:08.442 align:start position:38% line:-2
無効にすると
オブジェクトは

00:05:08.542 --> 00:05:12.145 align:start position:32% line:-2
アピアランスを
親要素から継承します

00:05:13.680 --> 00:05:16.350 align:start position:12% line:-1
次にeffectiveAppearance

00:05:16.717 --> 00:05:20.020 align:start position:36% line:-2
アピアランスを
把握するための―

00:05:20.120 --> 00:05:23.423 align:start position:38% line:-2
読み取り専用の
プロパティです

00:05:26.026 --> 00:05:28.996 align:start position:16% line:-2
NSAppearanceオブジェクトを
正しく選べば

00:05:29.096 --> 00:05:31.298 align:start position:30% line:-1
難しいことはありません

00:05:31.398 --> 00:05:34.668 align:start position:27% line:-2
NSAppearanceの
イニシャライザは

00:05:34.768 --> 00:05:39.773 align:start position:23% line:-2
お好みに合わせて aquaか
darkAquaとしてください

00:05:41.775 --> 00:05:43.544 align:start position:21% line:-2
そして
appearanceプロパティに

00:05:43.644 --> 00:05:46.880 align:start position:29% line:-2
好きな方のアピアランスを
指定します

00:05:46.980 --> 00:05:50.717 align:start position:21% line:-2
この場合は メモ帳の
appearanceプロパティに

00:05:50.818 --> 00:05:53.053 align:start position:32% line:-1
aquaを指定します

00:05:53.153 --> 00:05:55.355 align:start position:29% line:-1
これでライトになりました

00:05:57.124 --> 00:05:59.226 align:start position:34% line:-1
とても簡単でしたね

00:05:59.526 --> 00:06:01.328 align:start position:30% line:-1
他の例を見てみましょう

00:05:59.526 --> 00:06:01.328 align:start position:30% line:-1
他の例を見てみましょう

00:06:02.095 --> 00:06:03.297 align:start position:36% line:-1
あるウインドウが

00:06:03.597 --> 00:06:07.367 align:start position:36% line:-2
ぶら下がるように
表示されています

00:06:07.868 --> 00:06:12.439 align:start position:27% line:-2
そのアピアランスを
ビューとマッチさせるには？

00:06:12.806 --> 00:06:18.145 align:start position:23% line:-2
先ほどと同じように aquaの
アピアランスを指定できます

00:06:18.612 --> 00:06:21.481 align:start position:29% line:-1
でも 今回はビューから―

00:06:21.582 --> 00:06:25.052 align:start position:27% line:-2
アピアランスを
継承できるようにしましょう

00:06:25.619 --> 00:06:27.321 align:start position:38% line:-1
AppKitは

00:06:27.421 --> 00:06:32.993 align:start position:27% line:-2
あらゆるウインドウに対し
これを自動で行ってくれます

00:06:33.093 --> 00:06:38.599 align:start position:29% line:-2
メニュー ポップオーバー
ツールチップなどです

00:06:39.166 --> 00:06:41.268 align:start position:27% line:-1
でも この例のような場合は

00:06:41.368 --> 00:06:45.772 align:start position:25% line:-2
Mojaveの新しいAPIが
役に立ちます

00:06:46.640 --> 00:06:48.575 align:start position:20% line:-2
その名も
Appearance Source

00:06:49.309 --> 00:06:53.747 align:start position:5% line:-2
NSAppearanceCustomization
プロトコルに対応していれば

00:06:53.847 --> 00:06:58.185 align:start position:27% line:-2
どのオブジェクトにも使える
プロパティです

00:06:58.719 --> 00:07:04.258 align:start position:16% line:-2
これをappearanceSource
プロパティに指定すると

00:06:58.719 --> 00:07:04.258 align:start position:16% line:-2
これをappearanceSource
プロパティに指定すると

00:07:04.691 --> 00:07:07.794 align:start position:29% line:-2
アピアランスを
継承させることができます

00:07:09.663 --> 00:07:13.967 align:start position:11% line:-2
この場合は
appearanceSourceプロパティに

00:07:14.067 --> 00:07:15.903 align:start position:21% line:-1
textViewを指定することで

00:07:16.003 --> 00:07:20.440 align:start position:30% line:-2
ビューのアピアランスが
常に継承されます

00:07:23.010 --> 00:07:27.681 align:start position:29% line:-2
階層で考えると
イメージしやすいでしょう

00:07:27.915 --> 00:07:30.784 align:start position:29% line:-2
ビュー階層と似ていますが
ウインドウや―

00:07:30.884 --> 00:07:34.087 align:start position:30% line:-2
アプリケーションにまで
範囲が及びます

00:07:34.788 --> 00:07:39.026 align:start position:12% line:-2
Effective Appearanceを
AppKitに要求すると―

00:07:40.093 --> 00:07:42.596 align:start position:23% line:-1
AppKitは階層を上っていき

00:07:42.696 --> 00:07:46.033 align:start position:32% line:-2
指定のオブジェクトに
たどり着きます

00:07:47.234 --> 00:07:48.869 align:start position:36% line:-1
そこが継承元です

00:07:50.704 --> 00:07:55.475 align:start position:30% line:-2
アピアランスの変え方を
ここまでお伝えしました

00:07:55.576 --> 00:07:59.012 align:start position:30% line:-2
次はカスタムビューでの
ケースをご紹介します

00:08:00.147 --> 00:08:01.315 align:start position:39% line:-1
ご覧ください

00:08:01.515 --> 00:08:03.917 align:start position:32% line:-1
ライトとダーク両方で

00:08:04.151 --> 00:08:08.288 align:start position:30% line:-2
こちらのヘッダーの色を
変えるとしましょう

00:08:09.122 --> 00:08:11.225 align:start position:32% line:-2
ご存じのとおり
Xcode 10では

00:08:11.325 --> 00:08:13.861 align:start position:34% line:-2
アセットカタログに
アクセスし

00:08:13.961 --> 00:08:17.931 align:start position:30% line:-2
特定のカラーアセットを
選ぶことができます

00:08:19.800 --> 00:08:22.402 align:start position:30% line:-2
それをカスタムビューで
行うには？

00:08:22.936 --> 00:08:27.875 align:start position:29% line:-2
一見よさそうですが
このコードは機能しません

00:08:28.375 --> 00:08:31.545 align:start position:21% line:-2
まず NSColorプロパティを
加えましょう

00:08:32.412 --> 00:08:36.149 align:start position:32% line:-2
次に 選んだ色を使い
initメソッドで

00:08:36.283 --> 00:08:38.051 align:start position:32% line:-1
レイヤーを追加します

00:08:39.820 --> 00:08:43.624 align:start position:27% line:-2
色が変わったら レイヤーを
アップデートします

00:08:44.525 --> 00:08:45.893 align:start position:38% line:-1
見てみましょう

00:08:46.827 --> 00:08:49.096 align:start position:29% line:-1
ライトでは いい感じです

00:08:50.397 --> 00:08:54.168 align:start position:30% line:-2
しかし ダークにしても
色が変わりませんね

00:08:55.035 --> 00:08:58.338 align:start position:21% line:-1
たとえ NSColorが動的でも

00:08:58.472 --> 00:09:03.177 align:start position:27% line:-2
CGカラーが静的であれば
アピアランスは変わりません

00:08:58.472 --> 00:09:03.177 align:start position:27% line:-2
CGカラーが静的であれば
アピアランスは変わりません

00:09:03.677 --> 00:09:07.714 align:start position:32% line:-2
イニシャライザの中に
レイヤーを配置すると

00:09:07.848 --> 00:09:11.752 align:start position:27% line:-2
アピアランスの変化時に
コードが実行されないのです

00:09:13.020 --> 00:09:17.191 align:start position:34% line:-2
特定のエリアで
コードを書くことが

00:09:17.424 --> 00:09:19.459 align:start position:34% line:-1
問題解決のカギです

00:09:19.560 --> 00:09:23.564 align:start position:12% line:-2
つまり updateConstraints
layout draw

00:09:23.664 --> 00:09:26.867 align:start position:20% line:-2
NSViewの
updateLayerメソッドです

00:09:27.501 --> 00:09:30.938 align:start position:34% line:-2
AppKitは
これらのメソッドを

00:09:31.038 --> 00:09:32.773 align:start position:34% line:-1
自動で呼び出します

00:09:33.240 --> 00:09:36.777 align:start position:29% line:-2
もちろん手動で行うことも
可能です

00:09:36.877 --> 00:09:39.646 align:start position:9% line:-2
needsUpdateConstraintsや
needsLayout

00:09:39.746 --> 00:09:43.884 align:start position:18% line:-2
needsDisplayプロパティも
AppKitは自動で呼び出します

00:09:46.019 --> 00:09:47.688 align:start position:36% line:-1
話を戻しましょう

00:09:48.822 --> 00:09:54.261 align:start position:18% line:-2
initをオーバーライドする代わりに
updateLayerを実行します

00:09:54.895 --> 00:09:58.365 align:start position:27% line:-2
NSColorに
CGカラーを要求することで

00:09:58.465 --> 00:10:01.134 align:start position:32% line:-2
レイヤーを
問題なく追加できます

00:09:58.465 --> 00:10:01.134 align:start position:32% line:-2
レイヤーを
問題なく追加できます

00:10:02.002 --> 00:10:06.240 align:start position:27% line:-2
色が変わったら レイヤーを
アップデートする代わりに

00:10:06.406 --> 00:10:09.276 align:start position:18% line:-2
needsDisplayプロパティを
trueに設定します

00:10:09.409 --> 00:10:13.180 align:start position:16% line:-2
AppKitがupdateLayerを
呼び出してくれます

00:10:14.214 --> 00:10:15.415 align:start position:38% line:-1
見てみましょう

00:10:16.383 --> 00:10:18.051 align:start position:36% line:-1
ライトは問題なし

00:10:20.020 --> 00:10:24.424 align:start position:29% line:-2
ダークにすると ちゃんと
色が変わっていますね

00:10:26.326 --> 00:10:29.096 align:start position:32% line:-2
もう少し
難易度を上げましょう

00:10:29.196 --> 00:10:33.033 align:start position:30% line:-2
動的な色や画像だけでは
表せないことです

00:10:33.634 --> 00:10:36.336 align:start position:27% line:-1
例えば クロエの顔の背景を

00:10:36.436 --> 00:10:41.008 align:start position:29% line:-2
薄く光らせるには
どうすればいいでしょう？

00:10:41.108 --> 00:10:44.044 align:start position:30% line:-2
ダークモードにおいての
話です

00:10:44.878 --> 00:10:48.615 align:start position:25% line:-2
この場合も
Mojaveの新しいAPIで

00:10:48.849 --> 00:10:52.986 align:start position:27% line:-2
ビューのアピアランスに
マッチさせることができます

00:10:53.954 --> 00:10:57.858 align:start position:25% line:-2
まず layoutメソッドを
オーバーライドし

00:10:58.492 --> 00:11:03.063 align:start position:0% line:-2
switch文でeffectiveAppearance.
bestMatch(from:を使います

00:10:58.492 --> 00:11:03.063 align:start position:0% line:-2
switch文でeffectiveAppearance.
bestMatch(from:を使います

00:11:04.231 --> 00:11:08.769 align:start position:27% line:-2
そしてアピアランスの名前を
すべて含む配列を渡します

00:11:08.869 --> 00:11:11.638 align:start position:23% line:-2
この場合は
aquaとdarkAquaです

00:11:12.973 --> 00:11:17.477 align:start position:29% line:-2
あとは それぞれの動作を
実行させるだけです

00:11:17.578 --> 00:11:19.513 align:start position:34% line:-1
aquaで使うのは

00:11:19.613 --> 00:11:24.218 align:start position:23% line:-2
imageViewと
subviewのクロエの顔です

00:11:26.153 --> 00:11:28.388 align:start position:25% line:-2
darkAquaでは
imageViewだけでなく

00:11:28.489 --> 00:11:31.325 align:start position:25% line:-1
glowViewも追加します

00:11:34.128 --> 00:11:37.297 align:start position:21% line:-1
最後にdefault文を書きます

00:11:37.397 --> 00:11:40.667 align:start position:29% line:-2
想定されていない
アピアランスのためですが

00:11:40.767 --> 00:11:44.805 align:start position:29% line:-2
これについては追々
発表があるかもしれません

00:11:46.373 --> 00:11:48.408 align:start position:30% line:-1
では確認してみましょう

00:11:48.509 --> 00:11:52.613 align:start position:30% line:-2
ライトでは
薄い光は見られませんね

00:11:52.713 --> 00:11:55.983 align:start position:30% line:-2
しかし
ダークにすると光ります

00:11:58.385 --> 00:12:01.054 align:start position:34% line:-2
次の話題は
高コントラストです

00:11:58.385 --> 00:12:01.054 align:start position:34% line:-2
次の話題は
高コントラストです

00:12:01.755 --> 00:12:04.691 align:start position:21% line:-2
これまで私たちは
NSAppearanceを使って

00:12:04.792 --> 00:12:07.961 align:start position:30% line:-2
高コントラストモードを
開発してきました

00:12:08.061 --> 00:12:11.832 align:start position:30% line:-2
高コントラストモードを
開発する上で

00:12:11.932 --> 00:12:16.370 align:start position:32% line:-2
ダークモードの開発は
一役 買っています

00:12:19.640 --> 00:12:22.209 align:start position:36% line:-2
高コントラストを
有効にするには

00:12:22.309 --> 00:12:25.846 align:start position:27% line:-2
“コントラストを上げる”を
選択します

00:12:27.114 --> 00:12:31.585 align:start position:29% line:-2
高コントラストモードでは
コントロールの枠内や

00:12:31.685 --> 00:12:34.488 align:start position:36% line:-2
その境界線が
見やすくなります

00:12:36.723 --> 00:12:41.094 align:start position:25% line:-2
AquaとdarkAquaの
アピアランスは

00:12:41.195 --> 00:12:44.998 align:start position:29% line:-2
自動的に高コントラストに
置き換えられます

00:12:45.098 --> 00:12:46.934 align:start position:30% line:-2
通常の
コントラストモードから

00:12:47.034 --> 00:12:50.671 align:start position:36% line:-2
アピアランスが
継承されるのです

00:12:50.871 --> 00:12:55.209 align:start position:29% line:-2
ダークモードを活用すべく
書いたコードは

00:12:55.309 --> 00:12:58.812 align:start position:29% line:-2
自動的に高コントラストで
適用されます

00:12:59.947 --> 00:13:02.015 align:start position:32% line:-1
さらに続きがあります

00:12:59.947 --> 00:13:02.015 align:start position:32% line:-1
さらに続きがあります

00:13:02.482 --> 00:13:07.721 align:start position:18% line:-2
Xcode 10のアセットカタログで
“高コントラスト”を選ぶと

00:13:08.288 --> 00:13:11.592 align:start position:30% line:-2
高コントラストモードに
マッチする―

00:13:11.692 --> 00:13:16.830 align:start position:29% line:-2
特定の色や画像アセットを
決めることができます

00:13:18.632 --> 00:13:22.035 align:start position:32% line:-2
アピアランスの名前も
コードで使用できます

00:13:23.203 --> 00:13:24.538 align:start position:34% line:-1
こう思うでしょうか

00:13:24.638 --> 00:13:27.274 align:start position:20% line:-2
“それらを
NSAppearanceに渡して”

00:13:27.374 --> 00:13:30.344 align:start position:38% line:-2
“動作を直接
実行させよう”

00:13:30.944 --> 00:13:32.212 align:start position:38% line:-1
それは無理です

00:13:32.746 --> 00:13:36.083 align:start position:30% line:-2
システム環境設定でのみ
可能だからです

00:13:36.283 --> 00:13:40.654 align:start position:27% line:-2
ただしカスタムプログラムを
実行したのと同じように

00:13:40.754 --> 00:13:45.592 align:start position:20% line:-2
bestMatch(from:)に
渡すことはできます

00:13:48.395 --> 00:13:50.831 align:start position:36% line:-2
サブレイヤの話に
移りましょう

00:13:51.164 --> 00:13:55.769 align:start position:27% line:-2
ビューによってサブレイヤを
管理をしている方なら

00:13:55.969 --> 00:13:59.540 align:start position:32% line:-2
知っておくべきことが
あります

00:14:01.408 --> 00:14:04.578 align:start position:27% line:-1
カスタムされたサブレイヤは

00:14:04.678 --> 00:14:08.215 align:start position:30% line:-2
ビューのアピアランスを
自動で継承しません

00:14:09.650 --> 00:14:11.985 align:start position:27% line:-1
これを克服する簡単な方法は

00:14:12.085 --> 00:14:15.422 align:start position:27% line:-2
サブレイヤからサブビューに
切り替えることです

00:14:15.522 --> 00:14:18.659 align:start position:21% line:-1
そうすれば AppKitによって

00:14:18.759 --> 00:14:24.164 align:start position:29% line:-2
アピアランスが自動的に
継承されるようになります

00:14:25.232 --> 00:14:28.569 align:start position:30% line:-2
もし レイヤーを手動で
管理する場合は

00:14:28.669 --> 00:14:31.071 align:start position:27% line:-1
テクニックが必要になります

00:14:31.171 --> 00:14:33.140 align:start position:14% line:-2
viewDidChange
EffectiveAppearanceや

00:14:33.240 --> 00:14:35.876 align:start position:16% line:-2
Current Appearanceの
概念です

00:14:37.845 --> 00:14:41.215 align:start position:16% line:-2
まずは viewDidChange
EffectiveAppearance

00:14:41.315 --> 00:14:45.853 align:start position:23% line:-2
NSViewの新しいメソッドで
これをオーバーライドすると

00:14:46.553 --> 00:14:50.057 align:start position:7% line:-2
Effective Appearanceが変わる
タイミングが分かります

00:14:51.058 --> 00:14:55.095 align:start position:29% line:-2
カスタムを無効にするには
いい機会です

00:14:55.195 --> 00:14:58.232 align:start position:27% line:-1
キャッシュの削除も同様です

00:14:58.665 --> 00:15:02.469 align:start position:32% line:-2
しかし ビュー自体の
無効化については

00:14:58.665 --> 00:15:02.469 align:start position:32% line:-2
しかし ビュー自体の
無効化については

00:15:02.703 --> 00:15:04.905 align:start position:32% line:-2
AppKitが
自動でやってくれます

00:15:07.107 --> 00:15:10.077 align:start position:12% line:-2
次はCurrent Appearanceの
概念です

00:15:10.477 --> 00:15:13.647 align:start position:27% line:-2
このスレッドローカル変数に
アクセスするには

00:15:13.747 --> 00:15:17.284 align:start position:23% line:-2
NSAppearanceの
classプロパティを使います

00:15:18.385 --> 00:15:23.624 align:start position:20% line:-2
最新のNSGraphicsや
NSProgressに詳しい方なら

00:15:23.724 --> 00:15:25.759 align:start position:34% line:-1
理解できるでしょう

00:15:25.859 --> 00:15:29.062 align:start position:29% line:-1
つまりは動的な色や画像を

00:15:29.163 --> 00:15:32.065 align:start position:36% line:-2
変化させるための
アピアランスです

00:15:34.301 --> 00:15:38.505 align:start position:4% line:-2
AppKitはCurrent Appearanceを
自動で設定します

00:15:38.605 --> 00:15:41.808 align:start position:7% line:-2
updateConstraintsやlayout
draw updateLayerといった―

00:15:41.909 --> 00:15:45.546 align:start position:29% line:-2
NSViewのメソッドを
呼び出す前にです

00:15:46.613 --> 00:15:49.817 align:start position:32% line:-2
自身で実行することも
できます

00:15:49.917 --> 00:15:52.386 align:start position:29% line:-1
その例をお見せしましょう

00:15:55.255 --> 00:15:58.892 align:start position:29% line:-2
サブレイヤを維持する
カスタムビューがあります

00:16:00.594 --> 00:16:03.163 align:start position:14% line:-2
viewDidChange
EffectiveAppearanceを

00:16:03.263 --> 00:16:04.832 align:start position:36% line:-1
オーバーライドし

00:16:05.799 --> 00:16:08.535 align:start position:14% line:-2
setNeedsDisplayメソッドを
使います

00:16:09.102 --> 00:16:10.304 align:start position:38% line:-1
これをしないと

00:16:10.404 --> 00:16:12.105 align:start position:12% line:-2
Effective Appearanceが
変化した際に

00:16:12.206 --> 00:16:15.442 align:start position:30% line:-2
サブレイヤが
アップデートされません

00:16:17.878 --> 00:16:19.880 align:start position:29% line:-1
次にデリゲートを用います

00:16:20.147 --> 00:16:22.816 align:start position:12% line:-2
ビューの
Effective Appearanceに

00:16:22.916 --> 00:16:27.754 align:start position:16% line:-2
Current Appearanceを
設定します

00:16:29.623 --> 00:16:32.092 align:start position:34% line:-2
そしてレイヤーを
アップデートします

00:16:32.192 --> 00:16:35.762 align:start position:7% line:-2
この時点でCurrent Appearanceを
設定していないと

00:16:35.996 --> 00:16:38.565 align:start position:30% line:-2
ビューのアピアランスが
使われず

00:16:38.665 --> 00:16:40.567 align:start position:36% line:-1
うまくいきません

00:16:41.768 --> 00:16:45.439 align:start position:20% line:-2
完了後 Old Current
Appearanceを元に戻します

00:16:48.609 --> 00:16:51.645 align:start position:32% line:-2
知っておくべきことは
他にもあります

00:16:52.579 --> 00:16:56.083 align:start position:30% line:-2
この２つのコードに
見覚えはあるでしょうか

00:16:56.183 --> 00:17:00.120 align:start position:30% line:-2
レイヤーのコンテンツを
NSImageに設定

00:16:56.183 --> 00:17:00.120 align:start position:30% line:-2
レイヤーのコンテンツを
NSImageに設定

00:17:00.487 --> 00:17:04.958 align:start position:4% line:-2
あるいはlayerContents
(forContentsScale: scale)で

00:17:05.058 --> 00:17:08.595 align:start position:29% line:-2
レイヤーコンテンツを
画像から作る時のものです

00:17:09.762 --> 00:17:11.964 align:start position:34% line:-1
この時 その画像は

00:17:12.065 --> 00:17:15.669 align:start position:32% line:-2
アピアランスを
自動的に継承しません

00:17:17.003 --> 00:17:20.073 align:start position:30% line:-2
解決法は
ビューを切り替えること

00:17:20.174 --> 00:17:22.242 align:start position:21% line:-1
ここではNSImageViewが

00:17:22.342 --> 00:17:27.013 align:start position:29% line:-2
様々な問題を
自動的に解決してくれます

00:17:27.381 --> 00:17:29.182 align:start position:34% line:-1
試してみてください

00:17:30.684 --> 00:17:36.123 align:start position:20% line:-2
NSImageからCGImageを
作るという方法もあります

00:17:36.456 --> 00:17:40.594 align:start position:5% line:-2
それをするには
cgImage(forProposedRect:や

00:17:40.694 --> 00:17:44.264 align:start position:21% line:-2
context: hints:が
必要になります

00:17:44.364 --> 00:17:47.000 align:start position:16% line:-2
Current Appearanceが
正しいかどうか

00:17:47.100 --> 00:17:49.536 align:start position:27% line:-1
注意するようにしてください

00:17:49.636 --> 00:17:52.806 align:start position:21% line:-2
updateLayerメソッドを
使うといいでしょう

00:17:54.474 --> 00:17:55.976 align:start position:34% line:-1
以上がアピアランス

00:17:56.476 --> 00:17:58.178 align:start position:34% line:-1
次はマテリアルです

00:17:58.679 --> 00:18:01.815 align:start position:29% line:-2
マテリアルは Macの
インターフェイスにおける

00:17:58.679 --> 00:18:01.815 align:start position:29% line:-2
マテリアルは Macの
インターフェイスにおける

00:18:02.149 --> 00:18:05.385 align:start position:30% line:-1
基本的な要素と言えます

00:18:05.719 --> 00:18:08.989 align:start position:32% line:-2
具体的には
どういったものなのか

00:18:09.089 --> 00:18:10.991 align:start position:32% line:-1
定義からご説明します

00:18:11.692 --> 00:18:14.261 align:start position:27% line:-2
マテリアルは
動的なバックグラウンドです

00:18:14.995 --> 00:18:18.298 align:start position:34% line:-2
コントラストや
色調 透明度などの

00:18:18.398 --> 00:18:20.734 align:start position:30% line:-1
エフェクトを活用します

00:18:21.301 --> 00:18:26.106 align:start position:30% line:-2
インターフェイスに
深みをもたらすとともに

00:18:26.206 --> 00:18:28.575 align:start position:30% line:-1
美しさを加えるものです

00:18:30.477 --> 00:18:33.046 align:start position:29% line:-2
この典型的な
Macのデスクトップには

00:18:33.146 --> 00:18:36.383 align:start position:32% line:-2
あらゆるマテリアルが
詰まっています

00:18:36.483 --> 00:18:38.452 align:start position:29% line:-1
すべてでは ないですがね

00:18:41.188 --> 00:18:45.893 align:start position:27% line:-2
AppKitは様々な場所に
マテリアルをもたらします

00:18:45.993 --> 00:18:49.496 align:start position:36% line:-2
タイトルバーや
ウインドウの背景

00:18:49.897 --> 00:18:51.865 align:start position:36% line:-2
テーブルビューに
サイドバー

00:18:51.965 --> 00:18:54.968 align:start position:32% line:-2
ポップオーバーや
メニューなどにもです

00:18:56.403 --> 00:19:00.774 align:start position:29% line:-2
しかし ユーザは自ら
マテリアルを追加できます

00:18:56.403 --> 00:19:00.774 align:start position:29% line:-2
しかし ユーザは自ら
マテリアルを追加できます

00:19:01.041 --> 00:19:04.044 align:start position:14% line:-2
使うのは
NSVisualEffectViewです

00:19:04.344 --> 00:19:09.817 align:start position:27% line:-2
マテリアルを作り出せる
とてもシンプルなビューです

00:19:10.584 --> 00:19:12.152 align:start position:39% line:-1
それを使う際

00:19:12.252 --> 00:19:16.256 align:start position:30% line:-2
主に３つのプロパティが
必要となります

00:19:16.523 --> 00:19:20.994 align:start position:18% line:-2
state blendingMode
そしてmaterialです

00:19:22.863 --> 00:19:24.565 align:start position:30% line:-1
まずは stateです

00:19:25.833 --> 00:19:30.037 align:start position:27% line:-2
アクティブな見た目を
採用するかどうかを決めます

00:19:30.137 --> 00:19:33.841 align:start position:27% line:-2
現状はウインドウに
合わせるよう設定されており

00:19:33.941 --> 00:19:36.343 align:start position:27% line:-1
ウインドウがアクティブなら

00:19:36.443 --> 00:19:39.446 align:start position:32% line:-2
マテリアルも
アクティブに見えます

00:19:39.580 --> 00:19:45.352 align:start position:27% line:-2
しかし アクティブとするか
インアクティブとするかは

00:19:45.452 --> 00:19:47.054 align:start position:36% line:-1
手動でも選べます

00:19:49.423 --> 00:19:52.793 align:start position:23% line:-2
次のblendingModeが
決定するのは

00:19:52.926 --> 00:19:56.763 align:start position:27% line:-2
マテリアルが
“突き抜ける”かどうかです

00:19:56.864 --> 00:19:58.432 align:start position:41% line:-1
解説します

00:19:59.566 --> 00:20:03.470 align:start position:27% line:-2
ここでは２つのマテリアルが
使われています

00:19:59.566 --> 00:20:03.470 align:start position:27% line:-2
ここでは２つのマテリアルが
使われています

00:20:04.605 --> 00:20:08.709 align:start position:34% line:-2
まずタイトルバーの
表面をめくると

00:20:08.942 --> 00:20:14.381 align:start position:27% line:-2
背景にあるウインドウ上の
画像が見えるのが分かります

00:20:14.815 --> 00:20:17.518 align:start position:34% line:-2
つまりウインドウを
突き抜けていません

00:20:19.253 --> 00:20:22.589 align:start position:36% line:-2
次にサイドバーの
表面をめくると

00:20:23.557 --> 00:20:28.829 align:start position:29% line:-2
ウインドウの後ろの
コンテンツが見えています

00:20:28.929 --> 00:20:32.232 align:start position:34% line:-2
つまりウインドウを
突き抜けています

00:20:40.541 --> 00:20:44.678 align:start position:30% line:-2
ウインドウを突き抜ける
デフォルトの設定は

00:20:44.912 --> 00:20:48.415 align:start position:23% line:-2
blendingModeにより
変えられます

00:20:49.817 --> 00:20:51.818 align:start position:27% line:-1
最後はmaterialです

00:20:52.152 --> 00:20:56.323 align:start position:29% line:-2
これはエフェクトの定義を
カプセル化します

00:20:56.723 --> 00:20:57.858 align:start position:39% line:-1
その意味は？

00:20:58.358 --> 00:21:00.327 align:start position:36% line:-1
いわばレシピです

00:20:58.358 --> 00:21:00.327 align:start position:36% line:-1
いわばレシピです

00:21:00.427 --> 00:21:03.530 align:start position:32% line:-2
コントラスト 透明度
色調など

00:21:03.630 --> 00:21:06.533 align:start position:23% line:-1
どれもmaterial次第です

00:21:07.401 --> 00:21:09.903 align:start position:25% line:-1
Yosemiteの開発当時―

00:21:10.537 --> 00:21:14.107 align:start position:30% line:-2
ライトとダーク ２つの
マテリアルを使いました

00:21:14.208 --> 00:21:16.376 align:start position:30% line:-1
非常に役立ったものです

00:21:16.777 --> 00:21:21.482 align:start position:27% line:-2
それ以来 あらゆる領域で
マテリアルを使ってきました

00:21:21.949 --> 00:21:23.116 align:start position:30% line:-1
ダークモードができた今

00:21:23.217 --> 00:21:25.786 align:start position:32% line:-2
マテリアルがライトか
ダークかという議論は

00:21:25.886 --> 00:21:27.821 align:start position:30% line:-1
もはや意味をなしません

00:21:28.956 --> 00:21:32.125 align:start position:27% line:-2
セマンティックマテリアルの
出番です

00:21:32.559 --> 00:21:35.195 align:start position:30% line:-2
セマンティックカラーの
名称は

00:21:35.362 --> 00:21:40.701 align:start position:29% line:-2
見た目というより
使われる場所に由来します

00:21:41.535 --> 00:21:43.704 align:start position:27% line:-2
セマンティックマテリアルも
同じです

00:21:44.371 --> 00:21:46.039 align:start position:29% line:-1
メニューのマテリアルでは

00:21:46.140 --> 00:21:51.044 align:start position:29% line:-2
常にコンテキストに応じて
見た目が変わります

00:21:52.846 --> 00:21:54.047 align:start position:36% line:-1
Mojaveでは

00:21:54.348 --> 00:21:58.051 align:start position:32% line:-2
豊富なセマンティック
マテリアルの中から

00:21:58.552 --> 00:22:02.856 align:start position:34% line:-2
最適なものを
選ぶことができます

00:21:58.552 --> 00:22:02.856 align:start position:34% line:-2
最適なものを
選ぶことができます

00:22:05.392 --> 00:22:10.297 align:start position:27% line:-2
セマンティックマテリアルが
主流になった今―

00:22:10.397 --> 00:22:13.200 align:start position:30% line:-2
そうでないマテリアルは
非推奨です

00:22:13.300 --> 00:22:15.002 align:start position:38% line:-1
ライト ダーク

00:22:15.102 --> 00:22:16.970 align:start position:30% line:-2
ミディアムライト
ウルトラダークなどです

00:22:17.771 --> 00:22:22.910 align:start position:27% line:-2
もし これらのマテリアルを
まだ使っておられる方は

00:22:23.010 --> 00:22:26.146 align:start position:27% line:-2
セマンティックマテリアルへ
切り替えましょう

00:22:29.716 --> 00:22:34.021 align:start position:30% line:-2
使われている場所の例を
お見せします

00:22:34.354 --> 00:22:37.791 align:start position:25% line:-2
タイトルバーと
サイドバー付きのFinder

00:22:39.593 --> 00:22:43.530 align:start position:27% line:-2
ヘッダービューなどが付いた
メール

00:22:45.899 --> 00:22:50.137 align:start position:12% line:-2
Chameleon Wranglerには
Under Page Background

00:22:53.140 --> 00:22:56.410 align:start position:14% line:-2
システム環境設定には
Window Backgroundを使用

00:22:57.211 --> 00:23:00.180 align:start position:18% line:-2
Window Backgroundは
Mojaveにおける―

00:22:57.211 --> 00:23:00.180 align:start position:18% line:-2
Window Backgroundは
Mojaveにおける―

00:23:00.280 --> 00:23:04.685 align:start position:20% line:-2
新しいDesktop-Tinted
マテリアルの１つです

00:23:05.485 --> 00:23:08.956 align:start position:29% line:-2
画面上における
ウインドウの位置に基づき

00:23:09.122 --> 00:23:13.093 align:start position:29% line:-2
デスクトップ画像の色調を
取り入れています

00:23:13.227 --> 00:23:18.499 align:start position:27% line:-2
他のシステム全体が
ウインドウと調和しています

00:23:21.869 --> 00:23:25.539 align:start position:14% line:-2
Desktop-Tintedマテリアルを
使うために

00:23:25.639 --> 00:23:27.841 align:start position:32% line:-2
有用なオブジェクトが
あります

00:23:27.941 --> 00:23:31.979 align:start position:0% line:-2
NSWindow NSScrollView
NSTableView NSCollectionView

00:23:32.079 --> 00:23:34.515 align:start position:30% line:-2
デフォルトでは
これらのオブジェクトは

00:23:34.615 --> 00:23:37.684 align:start position:14% line:-2
Desktop-Tintedエフェクトと
セットです

00:23:40.320 --> 00:23:44.391 align:start position:25% line:-2
NSBoxを設定する方法でも
いいでしょう

00:23:45.292 --> 00:23:50.097 align:start position:18% line:-2
タイプをカスタムに設定し
Fill Colorを１つ選択します

00:23:50.197 --> 00:23:53.734 align:start position:9% line:-2
対応するNSVisualEffectViewが
使われます

00:23:54.802 --> 00:23:56.103 align:start position:43% line:-1
例として

00:23:56.403 --> 00:23:59.172 align:start position:34% line:-2
ボックスのタイプを
カスタムに設定し

00:23:59.439 --> 00:24:03.076 align:start position:11% line:-2
fillColorをunderPage
BackgroundColorに設定しました

00:23:59.439 --> 00:24:03.076 align:start position:11% line:-2
fillColorをunderPage
BackgroundColorに設定しました

00:24:04.278 --> 00:24:08.048 align:start position:16% line:-2
NSVisualEffectViewの
materialプロパティを

00:24:08.148 --> 00:24:10.117 align:start position:14% line:-2
underPageBackgroundに
設定してもいいです

00:24:10.217 --> 00:24:12.085 align:start position:30% line:-1
NSBoxを使う利点は

00:24:12.186 --> 00:24:16.356 align:start position:21% line:-2
Leopardのバージョンですら
デプロイできることです

00:24:16.990 --> 00:24:20.260 align:start position:14% line:-2
一方 VisualEffectViewが
もたらすのは

00:24:20.527 --> 00:24:22.563 align:start position:32% line:-1
フレキシビリティです

00:24:25.199 --> 00:24:27.534 align:start position:32% line:-1
これらのマテリアルは

00:24:27.634 --> 00:24:31.004 align:start position:30% line:-1
ライトでは色はそのまま

00:24:32.105 --> 00:24:35.542 align:start position:14% line:-2
ダークではDesktop-Tinting
エフェクトを示します

00:24:35.642 --> 00:24:40.380 align:start position:29% line:-2
ただし このエフェクトは
無効になることもあります

00:24:42.649 --> 00:24:43.917 align:start position:36% line:-1
Mojaveでは

00:24:44.818 --> 00:24:47.721 align:start position:34% line:-2
アクセントカラーを
選択できます

00:24:50.724 --> 00:24:53.227 align:start position:27% line:-1
グラファイトに切り替えると

00:24:54.428 --> 00:24:58.665 align:start position:27% line:-2
アクセントカラーが
コントロールから失われます

00:24:59.166 --> 00:25:03.537 align:start position:14% line:-2
Desktop-Tintedマテリアルも
色味を失います

00:24:59.166 --> 00:25:03.537 align:start position:14% line:-2
Desktop-Tintedマテリアルも
色味を失います

00:25:04.505 --> 00:25:08.909 align:start position:29% line:-2
常にエフェクトが有効だと
思ってはいけません

00:25:12.012 --> 00:25:16.150 align:start position:18% line:-2
デフォルト設定の
VisualEffectViewでは

00:25:16.250 --> 00:25:19.820 align:start position:29% line:-2
長方形の枠内に
マテリアルが表示されます

00:25:19.920 --> 00:25:21.121 align:start position:41% line:-1
このように

00:25:21.688 --> 00:25:25.125 align:start position:36% line:-2
では チャットの
吹き出しのように

00:25:25.225 --> 00:25:28.395 align:start position:34% line:-2
カスタムしたUIを
使いたい場合は？

00:25:29.162 --> 00:25:33.233 align:start position:32% line:-2
この例は魅力的ですが
作動しません

00:25:33.333 --> 00:25:34.601 align:start position:39% line:-1
原因はこちら

00:25:35.502 --> 00:25:40.007 align:start position:32% line:-2
まず NSViewで
描画方法を実行します

00:25:41.842 --> 00:25:45.779 align:start position:36% line:-2
次にカスタムした
吹き出しを取得

00:25:46.880 --> 00:25:51.585 align:start position:5% line:-2
そのパスに
controlBackgroundColorを入力

00:25:52.886 --> 00:25:55.189 align:start position:30% line:-1
このように表示されます

00:25:55.289 --> 00:26:00.427 align:start position:32% line:-2
一見いい感じですが
吹き出しを拡大すると

00:25:55.289 --> 00:26:00.427 align:start position:32% line:-2
一見いい感じですが
吹き出しを拡大すると

00:26:00.794 --> 00:26:04.264 align:start position:12% line:-2
Desktop-Tintingエフェクトが
見えません

00:26:04.364 --> 00:26:06.033 align:start position:36% line:-1
普通のグレーです

00:26:06.967 --> 00:26:08.335 align:start position:38% line:-1
なぜでしょう？

00:26:09.403 --> 00:26:15.209 align:start position:25% line:-2
非同期的にアプリケーションを
アップデートする―

00:26:15.876 --> 00:26:19.746 align:start position:12% line:-2
Quartz Window Serverの
使用が理由です

00:26:19.847 --> 00:26:22.115 align:start position:27% line:-1
パフォーマンスはいいですが

00:26:22.783 --> 00:26:28.722 align:start position:29% line:-2
直接 その色で描画したり
RGB値を取得できません

00:26:29.756 --> 00:26:33.193 align:start position:21% line:-2
代わりに
maskImageのプロパティで

00:26:33.293 --> 00:26:36.130 align:start position:29% line:-1
類似の効果を演出できます

00:26:36.997 --> 00:26:42.069 align:start position:29% line:-2
イメージマスクは
任意のNSImageです

00:26:42.803 --> 00:26:45.305 align:start position:20% line:-1
VisualEffectViewが

00:26:45.405 --> 00:26:48.709 align:start position:30% line:-2
表示されるマテリアルを
マスクします

00:26:49.810 --> 00:26:52.846 align:start position:34% line:-2
標準のアート画像の
使用に加え

00:26:52.946 --> 00:26:57.417 align:start position:32% line:-2
描画ハンドラ画像でも
類似の描画が可能です

00:26:58.352 --> 00:26:59.753 align:start position:36% line:-1
例を見せましょう

00:27:00.454 --> 00:27:03.791 align:start position:36% line:-2
layoutを
オーバーライドし

00:27:04.424 --> 00:27:07.161 align:start position:20% line:-2
VisualEffectViewを
追加します

00:27:07.828 --> 00:27:11.432 align:start position:14% line:-2
materialに
contentBackgroundを入力

00:27:13.333 --> 00:27:15.669 align:start position:30% line:-1
描画ハンドラ画像を生成

00:27:15.769 --> 00:27:20.874 align:start position:23% line:-2
NSImageで初期化子の
sizeとflippedを入力

00:27:21.975 --> 00:27:24.711 align:start position:29% line:-1
色は白に設定していますが

00:27:24.812 --> 00:27:27.815 align:start position:34% line:-2
不透明なら
何色でも構いません

00:27:28.315 --> 00:27:30.450 align:start position:34% line:-1
パスを書き込みます

00:27:32.853 --> 00:27:37.224 align:start position:27% line:-2
これをmaskImageの
マスクに設定します

00:27:39.193 --> 00:27:40.494 align:start position:38% line:-1
見てみましょう

00:27:41.728 --> 00:27:44.965 align:start position:23% line:-2
Desktop-Tintedが
反映されました

00:27:45.599 --> 00:27:49.670 align:start position:30% line:-2
並べてみると
その違いが一目瞭然です

00:27:51.538 --> 00:27:54.641 align:start position:32% line:-2
どんなマテリアルにも
適用できますが

00:27:54.808 --> 00:28:00.814 align:start position:27% line:-2
マスクをかけられるのは
アルファチャンネルだけです

00:27:54.808 --> 00:28:00.814 align:start position:27% line:-2
マスクをかけられるのは
アルファチャンネルだけです

00:28:01.281 --> 00:28:04.852 align:start position:29% line:-2
また マスクがかかるのは
マテリアルだけで

00:28:04.952 --> 00:28:09.056 align:start position:27% line:-2
サブビューや派生ビューには
かかりません

00:28:09.990 --> 00:28:14.127 align:start position:36% line:-2
マスクイメージの
サイズ調整には

00:28:14.228 --> 00:28:20.000 align:start position:18% line:-2
NSImageのcapInsetsと
resizingModeが使えます

00:28:20.100 --> 00:28:22.970 align:start position:29% line:-1
パフォーマンスも最高です

00:28:24.137 --> 00:28:27.908 align:start position:36% line:-2
では ジェフに
場を譲りましょう

00:28:28.542 --> 00:28:30.744 align:start position:43% line:-1
(拍手)

00:28:30.844 --> 00:28:31.478 align:start position:45% line:-1
ジェフ

00:28:33.247 --> 00:28:34.748 align:start position:34% line:-1
ありがとう マット

00:28:35.349 --> 00:28:37.451 align:start position:27% line:-1
私からはマテリアルの前面に

00:28:37.551 --> 00:28:41.288 align:start position:32% line:-2
描画する効果について
お話します

00:28:41.388 --> 00:28:45.359 align:start position:29% line:-2
主に背景から
マテリアルを際立たせる―

00:28:45.459 --> 00:28:47.928 align:start position:32% line:-1
優れたぼかし効果です

00:28:48.662 --> 00:28:52.332 align:start position:16% line:-2
Chameleon Wranglerの
アプリケーションに戻ります

00:28:52.432 --> 00:28:54.635 align:start position:30% line:-2
Moodometerの
UIがありますね

00:28:54.735 --> 00:28:58.572 align:start position:29% line:-2
このUIは
記録された感情を示します

00:28:58.939 --> 00:29:05.012 align:start position:29% line:-2
自動的にポップオーバーの
背景素材を採用しています

00:28:58.939 --> 00:29:05.012 align:start position:29% line:-2
自動的にポップオーバーの
背景素材を採用しています

00:29:06.480 --> 00:29:09.249 align:start position:34% line:-1
私たちが求めるのは

00:29:09.349 --> 00:29:13.587 align:start position:29% line:-2
コンテンツを引き立たせる
背景です

00:29:13.687 --> 00:29:14.988 align:start position:38% line:-1
こんな感じです

00:29:15.489 --> 00:29:18.125 align:start position:30% line:-2
これが
“バイブランシー”です

00:29:19.493 --> 00:29:20.794 align:start position:39% line:-1
つまり何か？

00:29:21.662 --> 00:29:27.501 align:start position:30% line:-2
コンテンツ背面の輝度を
均一に調整することです

00:29:28.302 --> 00:29:30.737 align:start position:29% line:-1
写真編集などでよく見る―

00:29:30.838 --> 00:29:34.041 align:start position:32% line:-2
覆い焼きや焼き込みと
似ています

00:29:34.641 --> 00:29:36.076 align:start position:38% line:-1
こちらをどうぞ

00:29:36.643 --> 00:29:39.613 align:start position:29% line:-1
グレーを使ったグリフです

00:29:39.713 --> 00:29:43.217 align:start position:30% line:-2
グレーは50％
不透明度は100％です

00:29:44.117 --> 00:29:47.087 align:start position:12% line:-1
Vibrant Blendingをかけると

00:29:47.187 --> 00:29:50.524 align:start position:27% line:-2
“照明効果”が
暗いマテリアルを照らします

00:29:51.258 --> 00:29:54.695 align:start position:29% line:-1
透過率は下がっていません

00:29:54.795 --> 00:29:57.865 align:start position:36% line:-2
グレー値の輝度を
上げることで

00:29:57.965 --> 00:30:00.367 align:start position:32% line:-1
背後を照らしています

00:29:57.965 --> 00:30:00.367 align:start position:32% line:-1
背後を照らしています

00:30:02.102 --> 00:30:05.072 align:start position:27% line:-1
グレーを例に見てみましょう

00:30:05.172 --> 00:30:09.810 align:start position:34% line:-2
０％から100％の
不透明なグレーです

00:30:10.277 --> 00:30:14.181 align:start position:30% line:-2
照明効果で
このように変化しました

00:30:15.015 --> 00:30:18.352 align:start position:34% line:-2
右下にあるのは
輝度が100％です

00:30:18.452 --> 00:30:22.689 align:start position:32% line:-2
コンテンツ背面を白で
照らしたので

00:30:22.790 --> 00:30:25.692 align:start position:30% line:-1
何の変化も起こりません

00:30:26.360 --> 00:30:28.762 align:start position:29% line:-1
一方 左上は真っ黒なので

00:30:28.929 --> 00:30:31.698 align:start position:32% line:-1
明るさは加わりません

00:30:31.798 --> 00:30:35.836 align:start position:32% line:-2
線で囲まなければ
背景と区別できません

00:30:36.437 --> 00:30:39.473 align:start position:32% line:-2
ご覧のとおり
様々な輝度があるので

00:30:39.573 --> 00:30:43.577 align:start position:27% line:-2
アプリケーションの
コンテンツを階層化できます

00:30:44.678 --> 00:30:46.313 align:start position:39% line:-1
設定方法は？

00:30:47.147 --> 00:30:49.583 align:start position:25% line:-2
おなじみの
NSAppearanceです

00:30:50.250 --> 00:30:53.353 align:start position:27% line:-2
vibrantDarkと
vibrantLightの

00:30:53.453 --> 00:30:55.622 align:start position:30% line:-1
オブジェクトがあります

00:30:56.423 --> 00:30:58.492 align:start position:36% line:-1
この２つだけです

00:30:58.592 --> 00:31:03.964 align:start position:29% line:-2
ダークとライトで使用する
厳密式を含んでいます

00:30:58.592 --> 00:31:03.964 align:start position:29% line:-2
ダークとライトで使用する
厳密式を含んでいます

00:31:04.098 --> 00:31:07.267 align:start position:27% line:-1
一連のアート制御や鮮明度も

00:31:07.367 --> 00:31:10.437 align:start position:36% line:-2
ブレンドモードと
相性抜群です

00:31:11.738 --> 00:31:13.106 align:start position:36% line:-1
では コードは？

00:31:14.374 --> 00:31:15.776 align:start position:39% line:-1
シンプルです

00:31:16.243 --> 00:31:17.778 align:start position:29% line:-1
NSViewサブクラスで

00:31:17.878 --> 00:31:21.181 align:start position:23% line:-2
allowsVibrancyの
返り値をtrueに

00:31:21.949 --> 00:31:25.219 align:start position:29% line:-2
自動的に
ビューやその派生の描画に

00:31:25.319 --> 00:31:27.755 align:start position:30% line:-1
この効果が適用されます

00:31:29.823 --> 00:31:32.826 align:start position:29% line:-1
バイブランシーの描画には

00:31:32.926 --> 00:31:37.397 align:start position:32% line:-2
内蔵のカラーラベルの
使用を推薦します

00:31:37.898 --> 00:31:41.869 align:start position:32% line:-2
ライトもダークも
全４色が映える仕様で

00:31:41.969 --> 00:31:44.371 align:start position:30% line:-1
美しい階層を演出します

00:31:45.372 --> 00:31:48.709 align:start position:34% line:-2
お好みの色を
使ってもいいですが

00:31:48.809 --> 00:31:52.179 align:start position:32% line:-2
グレースケール以外を
お勧めします

00:31:52.446 --> 00:31:55.983 align:start position:29% line:-2
なぜなら
意図した色のデザインにも

00:31:56.083 --> 00:31:59.887 align:start position:32% line:-2
ブレンド効果が出る
可能性があるためです

00:31:59.987 --> 00:32:02.689 align:start position:30% line:-1
色彩が台無しになります

00:31:59.987 --> 00:32:02.689 align:start position:30% line:-1
色彩が台無しになります

00:32:03.257 --> 00:32:05.092 align:start position:34% line:-1
後ほど例を見せます

00:32:06.760 --> 00:32:12.800 align:start position:14% line:-2
それでは allowsVibrancyを
オーバーライドします

00:32:12.900 --> 00:32:17.037 align:start position:29% line:-2
指定するのは
すべてのポップオーバーの

00:32:17.337 --> 00:32:19.106 align:start position:36% line:-1
計測メーターです

00:32:19.206 --> 00:32:20.707 align:start position:39% line:-1
こうなります

00:32:22.142 --> 00:32:25.779 align:start position:27% line:-1
スライダーはいい感じですね

00:32:25.879 --> 00:32:27.681 align:start position:34% line:-1
顔はどうでしょう？

00:32:27.915 --> 00:32:29.083 align:start position:38% line:-1
ぼやけてますね

00:32:30.150 --> 00:32:31.452 align:start position:38% line:-1
原因はこれです

00:32:31.818 --> 00:32:35.789 align:start position:16% line:-2
該当ビューの
allowsVibrancy設定により

00:32:36.457 --> 00:32:41.361 align:start position:16% line:-2
サブビューにも
Vibrant Blendingが作動

00:32:42.129 --> 00:32:43.764 align:start position:34% line:-1
簡単に修正できます

00:32:43.897 --> 00:32:48.602 align:start position:32% line:-2
スライダー描画のみに
使用を限定すれば

00:32:48.869 --> 00:32:50.704 align:start position:36% line:-1
問題は解決します

00:32:50.804 --> 00:32:54.274 align:start position:27% line:-1
スライダーは際立ったままで

00:32:54.374 --> 00:32:56.176 align:start position:36% line:-1
顔の色も完璧です

00:32:57.277 --> 00:33:01.448 align:start position:29% line:-2
際立たせたいコンテンツの
ビューを限定し

00:32:57.277 --> 00:33:01.448 align:start position:29% line:-2
際立たせたいコンテンツの
ビューを限定し

00:33:01.548 --> 00:33:04.718 align:start position:36% line:-2
バイブランシーを
使ってください

00:33:05.352 --> 00:33:07.855 align:start position:30% line:-1
混成コンテンツの場合は

00:33:07.955 --> 00:33:12.192 align:start position:27% line:-2
まず ビューを分けることを
お勧めします

00:33:12.292 --> 00:33:15.963 align:start position:30% line:-2
その後で
個々に適用させましょう

00:33:17.798 --> 00:33:21.668 align:start position:30% line:-2
ブレンドモードの衝突も
避けてください

00:33:22.936 --> 00:33:25.472 align:start position:29% line:-1
バイブランシーのビューを

00:33:25.572 --> 00:33:29.776 align:start position:34% line:-2
そうでないビューに
重ねないでください

00:33:31.411 --> 00:33:35.782 align:start position:23% line:-2
Cocoa制御のサブクラス化も
注意が必要です

00:33:35.983 --> 00:33:39.186 align:start position:32% line:-2
前述のとおり
２つのオブジェクトは

00:33:39.286 --> 00:33:44.091 align:start position:27% line:-2
ブレンドモードを主眼に置き
設計されています

00:33:44.224 --> 00:33:49.396 align:start position:27% line:-2
ブレンドモードの目的は
マテリアルを際立たせること

00:33:49.530 --> 00:33:53.467 align:start position:30% line:-2
そのため 外すと
コントラストが崩れます

00:33:53.634 --> 00:33:57.771 align:start position:23% line:-2
allowsVibrancyの
オーバーライドは

00:33:57.871 --> 00:34:02.409 align:start position:27% line:-2
バイブランシーを
熟知した上で行ってください

00:33:57.871 --> 00:34:02.409 align:start position:27% line:-2
バイブランシーを
熟知した上で行ってください

00:34:03.443 --> 00:34:04.645 align:start position:43% line:-1
以上です

00:34:05.279 --> 00:34:07.614 align:start position:30% line:-1
次は背景のスタイルです

00:34:07.714 --> 00:34:11.051 align:start position:34% line:-2
特に選択用の背景に
焦点を当てます

00:34:11.784 --> 00:34:15.956 align:start position:30% line:-2
Aqua Cocoaで
よく目にしますね

00:34:16.489 --> 00:34:19.793 align:start position:38% line:-2
これはメールの
メッセージです

00:34:20.159 --> 00:34:25.833 align:start position:27% line:-2
選択するとテーブルの背景が
青色に変わるので

00:34:25.933 --> 00:34:29.969 align:start position:32% line:-2
この背景に引き立つ
コンテンツが必要です

00:34:31.271 --> 00:34:35.542 align:start position:30% line:-2
Dark Aquaでは
どうでしょうか？

00:34:35.809 --> 00:34:40.013 align:start position:30% line:-2
コンテンツだけ
単純に反転できないので

00:34:40.114 --> 00:34:42.882 align:start position:29% line:-1
この状態を意味付けします

00:34:44.351 --> 00:34:47.920 align:start position:27% line:-2
これは
Cocoaでよく目にする―

00:34:48.021 --> 00:34:50.290 align:start position:7% line:-1
NSView.BackgroundStyleです

00:34:50.389 --> 00:34:53.260 align:start position:36% line:-2
ライトやダークが
ある場所です

00:34:53.627 --> 00:34:58.465 align:start position:25% line:-2
またNSTableViewが
TableRowViewや

00:34:58.565 --> 00:35:02.736 align:start position:11% line:-2
TableCellViewやそのサブビューを
自動的に設定します

00:34:58.565 --> 00:35:02.736 align:start position:11% line:-2
TableCellViewやそのサブビューを
自動的に設定します

00:35:03.771 --> 00:35:07.207 align:start position:34% line:-2
従来なら
未選択にはライトを

00:35:07.307 --> 00:35:11.011 align:start position:32% line:-2
選択には
ダークを使用しました

00:35:12.212 --> 00:35:15.082 align:start position:29% line:-1
しかし ダークモードでは

00:35:15.182 --> 00:35:17.684 align:start position:32% line:-1
背景は常にダークです

00:35:17.784 --> 00:35:20.921 align:start position:34% line:-2
従来の名前は
意味を成さないので

00:35:21.021 --> 00:35:23.791 align:start position:16% line:-2
“normal”と
“emphasized”に変更しました

00:35:24.224 --> 00:35:27.928 align:start position:20% line:-2
最新のCocoaアプリケーションで
使用されている―

00:35:28.028 --> 00:35:31.465 align:start position:32% line:-2
列挙型とも
より互換性があります

00:35:32.833 --> 00:35:36.136 align:start position:29% line:-1
追加のアップデートにより

00:35:36.236 --> 00:35:40.474 align:start position:29% line:-2
TableViewは
再帰的に背景を設定します

00:35:40.574 --> 00:35:45.779 align:start position:23% line:-2
CellViewのサブビューや
テーブル列も含まれます

00:35:45.879 --> 00:35:50.184 align:start position:27% line:-2
そのため スタックビューや
レイアウトなどの

00:35:50.284 --> 00:35:53.053 align:start position:27% line:-1
全サブビューに適用できます

00:35:53.187 --> 00:35:55.756 align:start position:23% line:-1
Mojave上の設定は不要です

00:35:57.191 --> 00:36:00.327 align:start position:36% line:-2
マニュアルで
行ってた人ですね

00:35:57.191 --> 00:36:00.327 align:start position:36% line:-2
マニュアルで
行ってた人ですね

00:36:01.261 --> 00:36:06.700 align:start position:27% line:-2
また ４色すべてが自動的に
背景スタイルを採用します

00:36:07.134 --> 00:36:11.238 align:start position:36% line:-2
一度コンテンツの
階層を設定すれば

00:36:11.338 --> 00:36:14.141 align:start position:27% line:-1
両コンテンツに適用されます

00:36:16.143 --> 00:36:19.513 align:start position:34% line:-2
この強調変数は
手動設定もできます

00:36:19.613 --> 00:36:23.116 align:start position:32% line:-2
Finderの
アイコンみたいですね

00:36:23.717 --> 00:36:28.188 align:start position:27% line:-2
ラベルカラーと
副次ラベルカラーがあります

00:36:28.855 --> 00:36:33.394 align:start position:30% line:-2
背後にカスタムの
選択範囲を描画するため

00:36:33.494 --> 00:36:36.263 align:start position:21% line:-1
Bezier pathを使います

00:36:36.597 --> 00:36:39.933 align:start position:32% line:-2
異なる選択範囲制御の
色を使って

00:36:40.033 --> 00:36:44.004 align:start position:32% line:-2
ラベルを主要変数と
副次変数に合わせます

00:36:44.505 --> 00:36:46.273 align:start position:36% line:-1
やり方は簡単です

00:36:46.373 --> 00:36:50.444 align:start position:30% line:-2
背景のスタイルを
両方で強調に設定すれば

00:36:50.544 --> 00:36:53.680 align:start position:30% line:-2
自動的に
この効果が適用されます

00:36:54.147 --> 00:36:56.984 align:start position:29% line:-1
この方法の素晴らしい点は

00:36:57.851 --> 00:37:02.456 align:start position:30% line:-2
ダークモードにしても
自動で作動することです

00:36:57.851 --> 00:37:02.456 align:start position:30% line:-2
ダークモードにしても
自動で作動することです

00:37:04.291 --> 00:37:06.159 align:start position:34% line:-1
最後にもう１点だけ

00:37:06.793 --> 00:37:12.132 align:start position:27% line:-2
サイドバーやメニューにある
選択可能なマテリアルは

00:37:12.833 --> 00:37:15.903 align:start position:23% line:-1
Mojaveの色を引き継ぎます

00:37:16.203 --> 00:37:20.607 align:start position:27% line:-2
しかし 青色の
カスタム背景には適しません

00:37:21.341 --> 00:37:23.544 align:start position:14% line:-1
NSVisualEffectViewには

00:37:23.644 --> 00:37:26.346 align:start position:27% line:-1
特別なマテリアルがあります

00:37:26.447 --> 00:37:30.250 align:start position:27% line:-2
こちらなら
期待どおりの結果になります

00:37:33.620 --> 00:37:37.124 align:start position:29% line:-2
背景のスタイルについては
以上です

00:37:37.224 --> 00:37:42.963 align:start position:27% line:-2
次は旧バージョンの
デプロイについてお話します

00:37:43.063 --> 00:37:46.500 align:start position:30% line:-2
Macでは
特にこの要望が顕著です

00:37:46.600 --> 00:37:49.670 align:start position:30% line:-1
旧バージョンに戻しても

00:37:49.770 --> 00:37:52.806 align:start position:36% line:-2
ダークモードは
完璧に作動します

00:37:54.308 --> 00:37:57.644 align:start position:34% line:-2
旧バージョン用の
デプロイの説明です

00:37:57.744 --> 00:37:59.346 align:start position:30% line:-1
まずシステムカラーです

00:37:59.747 --> 00:38:03.984 align:start position:29% line:-2
サポートされている
動的なシステムカラーです

00:37:59.747 --> 00:38:03.984 align:start position:29% line:-2
サポートされている
動的なシステムカラーです

00:38:04.117 --> 00:38:05.619 align:start position:39% line:-1
この中でも―

00:38:05.719 --> 00:38:08.689 align:start position:32% line:-2
ハイライトされた色は
既存します

00:38:08.789 --> 00:38:10.991 align:start position:25% line:-1
OS X Yosemiteや

00:38:11.091 --> 00:38:13.327 align:start position:30% line:-1
それ以前の色もあります

00:38:14.361 --> 00:38:18.098 align:start position:30% line:-2
つまりユーザ
インターフェイスのため

00:38:18.198 --> 00:38:20.901 align:start position:32% line:-2
多くの色が
すでに存在しています

00:38:21.168 --> 00:38:24.938 align:start position:34% line:-2
旧版のデプロイにも
対応済みです

00:38:26.273 --> 00:38:27.474 align:start position:39% line:-1
カスタム色は

00:38:27.574 --> 00:38:31.411 align:start position:32% line:-2
選択色を
カタログにしています

00:38:31.745 --> 00:38:34.248 align:start position:29% line:-1
10.13からの仕様です

00:38:35.215 --> 00:38:39.419 align:start position:32% line:-2
使えない色を
指定していたとしても

00:38:39.520 --> 00:38:40.854 align:start position:36% line:-1
心配は要りません

00:38:40.954 --> 00:38:44.792 align:start position:29% line:-2
旧バージョンで使用すると
無視されます

00:38:44.892 --> 00:38:48.662 align:start position:34% line:-2
デプロイに
組み込まれています

00:38:48.996 --> 00:38:51.665 align:start position:34% line:-2
10.13より前の
バージョンでは

00:38:52.099 --> 00:38:53.901 align:start position:34% line:-1
こんな技が必要です

00:38:54.101 --> 00:38:57.137 align:start position:32% line:-1
色特性を書き込みます

00:38:57.738 --> 00:39:00.340 align:start position:27% line:-1
カラーカタログとの相互性を

00:38:57.738 --> 00:39:00.340 align:start position:27% line:-1
カラーカタログとの相互性を

00:39:00.440 --> 00:39:04.044 align:start position:29% line:-1
確認する処理が行われます

00:39:04.144 --> 00:39:07.247 align:start position:29% line:-1
そしてハードコードされた

00:39:07.347 --> 00:39:09.449 align:start position:32% line:-1
色の旧番を入力します

00:39:11.752 --> 00:39:14.788 align:start position:23% line:-2
Desktop-tintedも
新しい機能です

00:39:15.122 --> 00:39:18.625 align:start position:20% line:-2
VisualEffectViewに
取り込む場合は

00:39:18.725 --> 00:39:21.862 align:start position:27% line:-1
10.14でのみ対応します

00:39:22.796 --> 00:39:26.667 align:start position:27% line:-2
同じマテリアルを提供する
クラスは以前からありました

00:39:26.767 --> 00:39:29.336 align:start position:21% line:-2
ウインドウ ScrollView
TableViewなどです

00:39:29.436 --> 00:39:32.639 align:start position:27% line:-2
いくつかは
Mac OS 10.0など

00:39:32.740 --> 00:39:35.843 align:start position:38% line:-2
ずいぶん前から
利用可能でした

00:39:36.376 --> 00:39:39.246 align:start position:29% line:-1
構成が正しければ平気です

00:39:39.346 --> 00:39:41.348 align:start position:36% line:-1
旧バージョンでも

00:39:41.448 --> 00:39:45.452 align:start position:25% line:-2
NSColorを希望どおりに
表示できます

00:39:45.552 --> 00:39:50.157 align:start position:29% line:-2
Mojaveでは自動的に
マテリアルを表示します

00:39:50.858 --> 00:39:54.528 align:start position:23% line:-1
NSBoxの色のカスタム設定は

00:39:54.628 --> 00:39:57.631 align:start position:25% line:-2
Leopard 10.5から
展開されていました

00:39:57.731 --> 00:39:59.266 align:start position:20% line:-2
NSCollectionViewも
同様です

00:39:59.366 --> 00:40:02.970 align:start position:7% line:-2
古いNSCollectionView APIでも
使用可能ですが

00:39:59.366 --> 00:40:02.970 align:start position:7% line:-2
古いNSCollectionView APIでも
使用可能ですが

00:40:03.070 --> 00:40:06.273 align:start position:27% line:-1
最新版での使用を推奨します

00:40:08.308 --> 00:40:12.045 align:start position:36% line:-2
ダークモードを
有効にすることは

00:40:12.179 --> 00:40:16.283 align:start position:25% line:-2
10.14SDKにリンクする
ゲートになります

00:40:16.717 --> 00:40:22.723 align:start position:23% line:-2
ダークモードアプリケーションを
開発するツールは

00:40:22.823 --> 00:40:26.160 align:start position:25% line:-2
10.14SDKに厳密である
必要はありません

00:40:26.260 --> 00:40:30.497 align:start position:32% line:-2
10.13SDKでも
可能ではあります

00:40:31.431 --> 00:40:35.636 align:start position:30% line:-2
SDKを
アップデートしなくても

00:40:36.070 --> 00:40:39.606 align:start position:12% line:-2
Info.plistのキーでダークモードの
オプトアウトは可能です

00:40:39.873 --> 00:40:42.476 align:start position:14% line:-2
NSRequiresAquaSystem
Appearanceといい

00:40:42.576 --> 00:40:44.478 align:start position:32% line:-1
“NO”に設定すれば

00:40:44.578 --> 00:40:48.348 align:start position:23% line:-2
旧版のSDKでもダークモードを
有効にできます

00:40:48.448 --> 00:40:53.053 align:start position:25% line:-2
しかしSDKのアップデートは
強く推奨します

00:40:53.487 --> 00:40:56.823 align:start position:30% line:-2
“YES”を選んだ場合
無効にできますが

00:40:56.924 --> 00:40:59.126 align:start position:36% line:-1
これは一時的です

00:40:59.226 --> 00:41:01.428 align:start position:29% line:-1
これがダークモード対応の

00:40:59.226 --> 00:41:01.428 align:start position:29% line:-1
これがダークモード対応の

00:41:01.528 --> 00:41:04.832 align:start position:34% line:-2
アップデート版では
カギとなります

00:41:08.102 --> 00:41:09.870 align:start position:36% line:-2
最後にコツを
お伝えしましょう

00:41:11.338 --> 00:41:14.508 align:start position:29% line:-2
アプリケーションの
アップデート時に有効です

00:41:14.942 --> 00:41:18.812 align:start position:27% line:-2
使用中の
NSColorを調べる場合

00:41:19.680 --> 00:41:22.316 align:start position:32% line:-2
コードベースを使えば
使用箇所が分かります

00:41:23.417 --> 00:41:25.385 align:start position:38% line:-1
ダークモードで

00:41:25.486 --> 00:41:29.022 align:start position:34% line:-2
何が有効かも
知ることができます

00:41:29.123 --> 00:41:33.894 align:start position:30% line:-2
例えば
ここで使われている色は

00:41:33.994 --> 00:41:36.363 align:start position:32% line:-2
ハードコード構成では
ありません

00:41:36.463 --> 00:41:38.966 align:start position:34% line:-1
このような状況では

00:41:39.233 --> 00:41:42.236 align:start position:30% line:-1
２つの選択肢があります

00:41:42.336 --> 00:41:43.103 align:start position:43% line:-1
１つ目は

00:41:43.270 --> 00:41:47.041 align:start position:29% line:-2
動的なアピアランスを表す
システムカラー

00:41:47.141 --> 00:41:49.176 align:start position:32% line:-1
これの有無の確認です

00:41:49.276 --> 00:41:50.277 align:start position:43% line:-1
２つ目は

00:41:50.577 --> 00:41:54.848 align:start position:29% line:-2
アプリケーションに重要な
カスタムカラーの作成です

00:41:55.382 --> 00:41:58.852 align:start position:38% line:-2
１つ目は簡単で
黒のラベルを

00:41:58.952 --> 00:42:00.721 align:start position:29% line:-1
ラベルカラーに変更します

00:41:58.952 --> 00:42:00.721 align:start position:29% line:-1
ラベルカラーに変更します

00:42:00.821 --> 00:42:03.390 align:start position:29% line:-1
予想どおりの働きをします

00:42:04.291 --> 00:42:08.462 align:start position:30% line:-2
アプリケーション向けに
特別な色があり

00:42:08.695 --> 00:42:11.765 align:start position:29% line:-2
カタログに入れたい場合が
２つ目です

00:42:12.466 --> 00:42:14.301 align:start position:30% line:-1
コードの一掃だけでなく

00:42:14.435 --> 00:42:18.038 align:start position:29% line:-2
データ駆動型の
特別な番号を取得できます

00:42:18.305 --> 00:42:23.076 align:start position:29% line:-2
その色の濃いバージョンも
設定可能になります

00:42:23.210 --> 00:42:24.945 align:start position:32% line:-1
ダークモード対応です

00:42:28.348 --> 00:42:31.185 align:start position:32% line:-2
オフスクリーン描画も
難点です

00:42:31.418 --> 00:42:32.986 align:start position:30% line:-1
オフスクリーン描画では

00:42:33.320 --> 00:42:37.991 align:start position:29% line:-2
アピアランスや その他の
条件に注意しましょう

00:42:38.125 --> 00:42:42.029 align:start position:20% line:-2
一般的にはNSImage
lockFocus APIを使用し

00:42:42.129 --> 00:42:44.531 align:start position:23% line:-1
NSImageをカスタムします

00:42:45.132 --> 00:42:49.269 align:start position:36% line:-2
バッジイメージを
描いてみましょう

00:42:49.369 --> 00:42:53.607 align:start position:29% line:-2
ベースイメージにバッジが
適用されます

00:42:53.907 --> 00:42:57.211 align:start position:23% line:-2
この場合
lockFocusが含まれる―

00:42:57.344 --> 00:43:00.147 align:start position:27% line:-1
NSImageを作成します

00:42:57.344 --> 00:43:00.147 align:start position:27% line:-1
NSImageを作成します

00:43:00.781 --> 00:43:05.652 align:start position:21% line:-2
しかしlockFocusを使うと
多くのセマンティクスを失い

00:43:05.752 --> 00:43:08.255 align:start position:27% line:-1
ビットマップしか残りません

00:43:08.922 --> 00:43:10.557 align:start position:27% line:-1
アピアランスが変わる場合や

00:43:10.657 --> 00:43:13.927 align:start position:30% line:-1
ディスプレイの違いから

00:43:14.027 --> 00:43:17.698 align:start position:32% line:-2
スケールファクターが
後退する場合など

00:43:18.031 --> 00:43:20.000 align:start position:34% line:-1
描画が古くなります

00:43:20.868 --> 00:43:25.839 align:start position:29% line:-2
ブロックベースを使うのが
解決策の１つです

00:43:25.939 --> 00:43:29.143 align:start position:36% line:-2
NSImageの
描画ハンドラです

00:43:29.576 --> 00:43:34.848 align:start position:27% line:-2
先ほどと同じ描画を
このブロック内で作成します

00:43:35.082 --> 00:43:40.854 align:start position:20% line:-2
NSImageViewを適用すると
自動的に修正され

00:43:40.954 --> 00:43:46.260 align:start position:29% line:-2
アピアランス他
すべての変化に対応します

00:43:46.693 --> 00:43:50.964 align:start position:29% line:-2
このバッジは動的な色にも
適用しているので

00:43:51.064 --> 00:43:53.534 align:start position:29% line:-2
常に正しいアピアランスを
提供します

00:43:54.902 --> 00:43:57.571 align:start position:27% line:-1
他のオフスクリーン描画では

00:43:57.804 --> 00:44:00.140 align:start position:16% line:-2
NSGraphicsContextや
CGBitmapContextを使った

00:43:57.804 --> 00:44:00.140 align:start position:16% line:-2
NSGraphicsContextや
CGBitmapContextを使った

00:44:00.240 --> 00:44:03.610 align:start position:30% line:-2
カスタムグラフィックが
あります

00:44:03.744 --> 00:44:06.914 align:start position:21% line:-2
これも
ブロックベースのNSImageで

00:44:07.014 --> 00:44:09.449 align:start position:34% line:-1
置き換えが可能です

00:44:10.450 --> 00:44:14.455 align:start position:14% line:-2
RectでNSView
cacheDisplayを使っている場合

00:44:14.555 --> 00:44:16.590 align:start position:38% line:-1
注意が必要です

00:44:16.857 --> 00:44:20.794 align:start position:29% line:-2
Rectは マテリアルや
ぼかしなどの

00:44:20.894 --> 00:44:24.631 align:start position:30% line:-2
上級レンダリング技法を
キャプチャーしません

00:44:24.998 --> 00:44:30.704 align:start position:27% line:-2
さらにアピアランスの変化で
古くなるので要注意です

00:44:33.407 --> 00:44:36.043 align:start position:32% line:-1
他の問題も説明します

00:44:36.910 --> 00:44:39.947 align:start position:16% line:-2
NSAttributedStringや
NSTextStorageで

00:44:40.047 --> 00:44:43.116 align:start position:36% line:-2
手動で属性を
操作する場合です

00:44:43.283 --> 00:44:47.521 align:start position:25% line:-2
属性をDictionaryに
設定しました

00:44:48.055 --> 00:44:49.656 align:start position:38% line:-1
結果がこれです

00:44:49.857 --> 00:44:53.861 align:start position:36% line:-2
ダークモードでも
文字が暗い理由は

00:44:54.561 --> 00:44:57.331 align:start position:32% line:-2
フォアグラウンドの
カラー属性のせいです

00:44:57.664 --> 00:45:01.635 align:start position:7% line:-2
テキストエンジンが
NSAttributedStringに直面すると

00:44:57.664 --> 00:45:01.635 align:start position:7% line:-2
テキストエンジンが
NSAttributedStringに直面すると

00:45:01.735 --> 00:45:05.372 align:start position:27% line:-2
フォアグラウンド属性がなく
黒が規定値になります

00:45:05.472 --> 00:45:10.377 align:start position:29% line:-2
互換性では常に
この規定値が適用されます

00:45:11.145 --> 00:45:14.348 align:start position:21% line:-2
ForegroundColorを
明確にします

00:45:14.448 --> 00:45:18.652 align:start position:36% line:-2
動的な色を選べば
修正できます

00:45:19.520 --> 00:45:23.791 align:start position:27% line:-2
別の手段で属性付き文字列を
変える方法は

00:45:23.891 --> 00:45:27.427 align:start position:27% line:-2
Cocoaコントロールへの
変換です

00:45:27.528 --> 00:45:29.463 align:start position:23% line:-1
NSTextFieldにします

00:45:29.997 --> 00:45:33.500 align:start position:23% line:-2
textViewのストレージを
操作する場合

00:45:34.101 --> 00:45:35.702 align:start position:30% line:-1
新しいAPIを試します

00:45:36.036 --> 00:45:39.206 align:start position:7% line:-1
Validation Replacementです

00:45:39.406 --> 00:45:40.808 align:start position:38% line:-1
これが便利です

00:45:40.908 --> 00:45:43.110 align:start position:21% line:-1
textViewのStringを

00:45:43.210 --> 00:45:47.514 align:start position:20% line:-2
AttributedStringに
変えてみましょう

00:45:47.614 --> 00:45:52.252 align:start position:27% line:-2
textViewに属さない
属性を補います

00:45:52.953 --> 00:45:56.823 align:start position:27% line:-1
手動で属性をそろえなくても

00:45:56.924 --> 00:45:59.727 align:start position:14% line:-2
新しいAttributedStringを
含められます

00:46:03.597 --> 00:46:06.100 align:start position:34% line:-1
次も問題の一例です

00:46:06.200 --> 00:46:09.002 align:start position:9% line:-2
Interface Builderにセットした
アピアランスで

00:46:09.236 --> 00:46:12.039 align:start position:38% line:-2
組み立てると
バグが起きます

00:46:12.139 --> 00:46:15.175 align:start position:27% line:-1
ダークモードに対応しません

00:46:15.375 --> 00:46:18.479 align:start position:18% line:-2
Interface Builderに
ハードコードされた

00:46:18.979 --> 00:46:20.647 align:start position:30% line:-2
Aquaアピアランスが
あるからです

00:46:20.748 --> 00:46:23.450 align:start position:27% line:-2
今までは常に
Aquaで起動していたので

00:46:23.550 --> 00:46:26.820 align:start position:32% line:-1
つい見落としがちです

00:46:27.955 --> 00:46:29.523 align:start position:38% line:-1
修正は簡単です

00:46:29.757 --> 00:46:33.360 align:start position:30% line:-1
インヘリタンスの選択で

00:46:33.694 --> 00:46:36.463 align:start position:27% line:-1
自動的に親要素を継承します

00:46:38.966 --> 00:46:41.702 align:start position:14% line:-2
NSVisualEffectViewでは
少し違います

00:46:41.802 --> 00:46:44.338 align:start position:18% line:-2
Interface Builderや
コードに

00:46:44.438 --> 00:46:46.406 align:start position:12% line:-2
NSVisualEffectViewを含む
場合があります

00:46:46.507 --> 00:46:49.109 align:start position:38% line:-2
アピアランスの
設定が必要です

00:46:49.643 --> 00:46:53.414 align:start position:25% line:-2
この操作は
mac OS 10.14では

00:46:53.647 --> 00:46:55.249 align:start position:38% line:-1
不要になります

00:46:55.349 --> 00:46:58.986 align:start position:14% line:-2
NSVisualEffectViewでは
インヘリタンスを基に

00:46:59.086 --> 00:47:00.788 align:start position:27% line:-1
アピアランスが設定されます

00:46:59.086 --> 00:47:00.788 align:start position:27% line:-1
アピアランスが設定されます

00:47:00.954 --> 00:47:03.657 align:start position:30% line:-2
Dark Aquaなら
vibrantDark

00:47:03.757 --> 00:47:06.260 align:start position:16% line:-2
AquaならvibrantLightが
選ばれます

00:47:07.494 --> 00:47:11.265 align:start position:18% line:-2
Interface Builderで
inheritedを選び

00:47:11.365 --> 00:47:15.102 align:start position:36% line:-2
nilのコードを
入れるだけです

00:47:17.871 --> 00:47:21.675 align:start position:18% line:-1
Interface Builderは

00:47:21.775 --> 00:47:24.945 align:start position:30% line:-2
デザインを確かめるのに
役立ちます

00:47:25.646 --> 00:47:29.083 align:start position:20% line:-2
例題として
IBDesignableを使った―

00:47:29.183 --> 00:47:30.751 align:start position:36% line:-1
カスタム画面です

00:47:30.851 --> 00:47:34.354 align:start position:30% line:-2
キャンバスに
レンダリングしています

00:47:34.488 --> 00:47:38.358 align:start position:25% line:-2
デフォルトでは
アピアランスに沿ったビューで

00:47:38.458 --> 00:47:41.829 align:start position:32% line:-1
この場合はダークです

00:47:42.496 --> 00:47:44.565 align:start position:30% line:-1
新しいトグルがあります

00:47:44.665 --> 00:47:47.201 align:start position:30% line:-1
アピアランスを変更でき

00:47:47.301 --> 00:47:50.738 align:start position:36% line:-2
どちらの見え方も
確認できます

00:47:52.105 --> 00:47:55.742 align:start position:34% line:-2
アセットカタログの
色もサポートされ

00:47:56.076 --> 00:48:00.547 align:start position:27% line:-2
ダークとライトバリアントに
対応しています

00:47:56.076 --> 00:48:00.547 align:start position:27% line:-2
ダークとライトバリアントに
対応しています

00:48:00.647 --> 00:48:03.517 align:start position:34% line:-2
双方をキャンバスで
確認できます

00:48:03.617 --> 00:48:06.386 align:start position:27% line:-1
ポップアップの矢印を使うと

00:48:06.487 --> 00:48:10.357 align:start position:29% line:-2
アセットカタログの定義を
見られます

00:48:10.457 --> 00:48:12.526 align:start position:30% line:-1
変更を目で確認できます

00:48:14.027 --> 00:48:16.730 align:start position:36% line:-2
リコンパイルする
必要もありません

00:48:17.998 --> 00:48:21.769 align:start position:27% line:-2
Debug Barに新しい
アイテムがあります

00:48:22.336 --> 00:48:26.073 align:start position:30% line:-2
アプリケーションの
アピアランスを選べます

00:48:26.373 --> 00:48:29.810 align:start position:32% line:-2
見え方を確認する上で
便利な機能です

00:48:29.910 --> 00:48:32.679 align:start position:27% line:-2
システムを
再構成する必要がありません

00:48:33.580 --> 00:48:35.215 align:start position:29% line:-1
ライトやダークだけでなく

00:48:35.315 --> 00:48:39.186 align:start position:27% line:-1
ハイコントラストも選べます

00:48:40.020 --> 00:48:44.157 align:start position:20% line:-2
タッチバーでも
Debug Barから選択できます

00:48:44.258 --> 00:48:47.461 align:start position:34% line:-2
Xcodeに戻らず
確認ができます

00:48:50.264 --> 00:48:52.833 align:start position:32% line:-2
Xcodeのツールを
ご紹介します

00:48:52.933 --> 00:48:55.736 align:start position:34% line:-2
ダークモードの
デバッグに有効です

00:48:56.370 --> 00:48:58.405 align:start position:30% line:-1
このアプリケーションは

00:48:58.505 --> 00:49:01.842 align:start position:30% line:-1
問題ないように見えます

00:48:58.505 --> 00:49:01.842 align:start position:30% line:-1
問題ないように見えます

00:49:02.176 --> 00:49:05.479 align:start position:34% line:-2
でもラバーバンド
スクロールをすると

00:49:06.113 --> 00:49:08.148 align:start position:41% line:-1
現れたのは

00:49:08.248 --> 00:49:11.151 align:start position:29% line:-1
隠れていたライト背景です

00:49:11.318 --> 00:49:14.388 align:start position:27% line:-1
有無の確認が難しいですよね

00:49:14.822 --> 00:49:17.724 align:start position:25% line:-2
View Debuggerが
役に立ちます

00:49:18.592 --> 00:49:21.328 align:start position:30% line:-1
3Dビューに拡張すると

00:49:21.662 --> 00:49:24.932 align:start position:32% line:-2
意図しない箇所を
簡単に見つけられます

00:49:25.632 --> 00:49:30.504 align:start position:27% line:-2
コレクションビューの背景は
ダークですが

00:49:30.604 --> 00:49:33.874 align:start position:34% line:-2
スクロールの後ろが
ライト背景です

00:49:34.208 --> 00:49:38.212 align:start position:32% line:-2
Inspectorで
設定を確認します

00:49:38.312 --> 00:49:41.682 align:start position:34% line:-2
ハードコードされた
白が入っていました

00:49:41.782 --> 00:49:43.450 align:start position:38% line:-1
修正は簡単です

00:49:45.118 --> 00:49:47.454 align:start position:34% line:-2
ダークモード
アプリケーションの

00:49:47.554 --> 00:49:50.124 align:start position:29% line:-1
デバッグに有効な機能です

00:49:50.557 --> 00:49:52.960 align:start position:32% line:-1
色にも対応しています

00:49:53.060 --> 00:49:56.063 align:start position:38% line:-2
動的な色も含む
色の名前や

00:49:56.163 --> 00:49:57.865 align:start position:32% line:-1
アセットカタログの色

00:49:57.965 --> 00:50:01.435 align:start position:30% line:-2
RGB値を
特定することが可能です

00:49:57.965 --> 00:50:01.435 align:start position:30% line:-2
RGB値を
特定することが可能です

00:50:01.769 --> 00:50:05.038 align:start position:21% line:-1
NSAppearanceの構造も

00:50:05.138 --> 00:50:07.708 align:start position:39% line:-1
確認できます

00:50:07.808 --> 00:50:11.812 align:start position:29% line:-2
ローカルオーバーライドの
有無も確認できます

00:50:14.348 --> 00:50:19.386 align:start position:29% line:-2
最後に 今回学んだことの
復習をしましょう

00:50:19.820 --> 00:50:21.688 align:start position:21% line:-1
まずNSAppearanceです

00:50:21.789 --> 00:50:24.858 align:start position:36% line:-2
ベースのテーマに
順応した―

00:50:24.958 --> 00:50:26.760 align:start position:29% line:-1
カスタムビューに有効です

00:50:27.628 --> 00:50:29.697 align:start position:16% line:-2
NSVisualEffectViewを
使うことで

00:50:29.797 --> 00:50:33.767 align:start position:30% line:-2
UIに奥行きと美しさを
追加します

00:50:34.201 --> 00:50:36.837 align:start position:34% line:-2
描画では
バイブランシーと―

00:50:36.937 --> 00:50:39.439 align:start position:32% line:-1
セレクションをご紹介

00:50:39.940 --> 00:50:44.812 align:start position:29% line:-2
Xcodeでのデサインと
デバッグもお忘れなく

00:50:45.145 --> 00:50:47.147 align:start position:12% line:-1
developer.apple.comには

00:50:47.247 --> 00:50:50.718 align:start position:38% line:-2
ビデオや資料が
そろっています

00:50:50.818 --> 00:50:52.386 align:start position:38% line:-1
ラボもあります

00:50:52.486 --> 00:50:56.790 align:start position:32% line:-2
Cocoaと
ダークモードについて

00:50:57.357 --> 00:51:00.661 align:start position:38% line:-2
エンジニアが
質問に答えます

00:50:57.357 --> 00:51:00.661 align:start position:38% line:-2
エンジニアが
質問に答えます

00:51:00.761 --> 00:51:05.032 align:start position:12% line:-2
デサイン系の質問は
Human Interfaceデザイナーへ

00:51:05.132 --> 00:51:06.533 align:start position:43% line:-1
昼食後に

00:51:06.633 --> 00:51:09.970 align:start position:29% line:-1
ぜひ参加してみてください

00:51:10.571 --> 00:51:13.707 align:start position:27% line:-2
金曜にも
Cocoaラボを開催します

00:51:14.441 --> 00:51:15.776 align:start position:41% line:-1
ありがとう

00:51:15.876 --> 00:51:18.145 align:start position:43% line:-1
(拍手)
