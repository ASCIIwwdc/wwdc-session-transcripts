WEBVTT

00:00:07.007 --> 00:00:16.250 align:start position:43% line:-1
(音楽)

00:00:21.722 --> 00:00:28.128 align:start position:43% line:-1
(拍手)

00:00:28.228 --> 00:00:33.667 align:start position:21% line:-2
当セッション
“ユーザ通知の新機能”にようこそ

00:00:33.934 --> 00:00:37.638 align:start position:30% line:-2
私はiOS通知チームの
クリタース･ジェーン

00:00:37.738 --> 00:00:40.941 align:start position:32% line:-2
WWDCの場に戻れて
とてもうれしいです

00:00:41.041 --> 00:00:44.878 align:start position:23% line:-2
iOS 12で使えるようになる
ユーザ通知の―

00:00:44.978 --> 00:00:48.649 align:start position:27% line:-2
エキサイティングな新機能を
お話しします

00:00:49.650 --> 00:00:54.021 align:start position:29% line:-2
本日 お話しするテーマは
ご覧のとおりです

00:00:54.388 --> 00:00:57.457 align:start position:27% line:-1
まず最初は“グループ通知”

00:00:57.558 --> 00:01:01.061 align:start position:30% line:-2
iOSの通知に導入した
新パラダイムで

00:00:57.558 --> 00:01:01.061 align:start position:30% line:-2
iOSの通知に導入した
新パラダイムで

00:01:01.161 --> 00:01:04.063 align:start position:32% line:-2
ユーザの通知リストに
表示されます

00:01:04.498 --> 00:01:07.634 align:start position:18% line:-2
次は
“通知コンテンツExtension”

00:01:07.734 --> 00:01:10.304 align:start position:30% line:-1
既存の拡張ポイントです

00:01:10.404 --> 00:01:13.707 align:start position:32% line:-2
これらに追加された
新APIも検討します

00:01:14.441 --> 00:01:16.476 align:start position:36% line:-1
次は“通知管理”

00:01:16.577 --> 00:01:18.779 align:start position:34% line:-2
アプリケーションの
ユーザが―

00:01:18.879 --> 00:01:22.249 align:start position:32% line:-2
通知設定を調整できる
新しい方法と―

00:01:22.349 --> 00:01:26.019 align:start position:29% line:-2
それに対応する
必要な作業をご説明します

00:01:26.420 --> 00:01:28.789 align:start position:34% line:-1
次は“仮許可”です

00:01:28.889 --> 00:01:32.259 align:start position:29% line:-2
アプリケーションの
トライアルを可能にします

00:01:32.359 --> 00:01:34.528 align:start position:34% line:-2
ユーザの
明確な許可なしに―

00:01:34.628 --> 00:01:37.798 align:start position:34% line:-2
目立たない形で
通知を送れるのです

00:01:38.432 --> 00:01:40.767 align:start position:32% line:-1
最後は“重大な通知”

00:01:40.868 --> 00:01:45.539 align:start position:30% line:-2
ユーザが許可すれば
一定の設定を無視して―

00:01:46.240 --> 00:01:51.411 align:start position:32% line:-2
アプリケーションが
重要な通知を送れます

00:01:51.778 --> 00:01:54.047 align:start position:29% line:-1
以上を本日 取り上げます

00:01:54.181 --> 00:01:56.984 align:start position:29% line:-1
それではグループ通知から

00:01:59.052 --> 00:02:03.056 align:start position:30% line:-2
iOS 11までは
ユーザへの新着通知は―

00:01:59.052 --> 00:02:03.056 align:start position:30% line:-2
iOS 11までは
ユーザへの新着通知は―

00:02:03.156 --> 00:02:06.960 align:start position:34% line:-2
通知リストに
時系列で入りました

00:02:07.160 --> 00:02:10.464 align:start position:29% line:-2
多数のアプリケーションの
通知が入り交じり

00:02:10.564 --> 00:02:14.535 align:start position:27% line:-2
ユーザは特定の通知の発見や
複数の通知の―

00:02:14.635 --> 00:02:17.104 align:start position:34% line:-1
選別に苦労しました

00:02:17.638 --> 00:02:19.940 align:start position:29% line:-1
そこでiOS 12から―

00:02:20.040 --> 00:02:24.344 align:start position:29% line:-2
通知のグループ化を導入し
これを改善します

00:02:24.478 --> 00:02:28.615 align:start position:29% line:-2
ご覧のとおり 異なる
アプリケーションの通知が

00:02:28.749 --> 00:02:31.485 align:start position:27% line:-1
特定のグループに分かれます

00:02:32.219 --> 00:02:35.422 align:start position:32% line:-2
その仕組みを
詳しく見てみましょう

00:02:35.856 --> 00:02:39.459 align:start position:30% line:-2
グループ化は
自動的に行われるため―

00:02:39.560 --> 00:02:45.065 align:start position:27% line:-2
使用開始に当たり
特にすべきことはありません

00:02:45.299 --> 00:02:48.569 align:start position:34% line:-2
カスタムグループを
作りたい時は―

00:02:48.669 --> 00:02:51.305 align:start position:29% line:-1
スレッド識別子が使えます

00:02:51.405 --> 00:02:56.176 align:start position:12% line:-2
UNNotificationContent
オブジェクトのプロパティです

00:02:57.845 --> 00:03:00.781 align:start position:36% line:-2
皆さん もう
お使いでしょうか

00:02:57.845 --> 00:03:00.781 align:start position:36% line:-2
皆さん もう
お使いでしょうか

00:03:00.881 --> 00:03:02.316 align:start position:36% line:-1
ローカル通知は―

00:03:02.416 --> 00:03:07.087 align:start position:0% line:-2
UNMutableNotificationContent
オブジェクトで設定

00:03:08.255 --> 00:03:10.457 align:start position:38% line:-2
リモート通知の
ペイロードも―

00:03:10.557 --> 00:03:14.027 align:start position:30% line:-2
通知ペイロードの
一部として組み込めます

00:03:15.963 --> 00:03:20.067 align:start position:29% line:-2
スレッド識別子は
ご存じかもしれませんが―

00:03:21.201 --> 00:03:24.271 align:start position:18% line:-2
今日は
通知コンテンツExtensionに―

00:03:24.371 --> 00:03:26.607 align:start position:30% line:-1
通知を送るのに使います

00:03:26.707 --> 00:03:31.111 align:start position:27% line:-2
これで同じスレッド識別子の
アプリケーションは―

00:03:31.211 --> 00:03:36.149 align:start position:18% line:-2
コンテンツExtensionビューを
新着通知を基に更新できます

00:03:37.117 --> 00:03:38.519 align:start position:34% line:-1
iOS 11以降―

00:03:38.619 --> 00:03:43.357 align:start position:27% line:-2
通知プレビューが非表示の時
スレッド拡張子を使い

00:03:43.457 --> 00:03:46.627 align:start position:27% line:-1
通知をグループ化しています

00:03:46.960 --> 00:03:51.465 align:start position:29% line:-2
この概念をすべての通知に
適用するのです

00:03:52.933 --> 00:03:55.102 align:start position:32% line:-1
では その仕組みは？

00:03:55.335 --> 00:03:59.173 align:start position:29% line:-2
ユーザのデバイスに届いた
新着通知は―

00:03:59.273 --> 00:04:03.243 align:start position:34% line:-2
スレッド識別子が
全くなかった場合―

00:03:59.273 --> 00:04:03.243 align:start position:34% line:-2
スレッド識別子が
全くなかった場合―

00:04:03.410 --> 00:04:07.247 align:start position:27% line:-2
アプリケーションバンドルと
グループ化

00:04:08.048 --> 00:04:10.584 align:start position:38% line:-2
このサンプルで
ご覧のとおり―

00:04:10.684 --> 00:04:15.489 align:start position:29% line:-2
新着通知は同じグループに
まとめられ―

00:04:15.656 --> 00:04:18.725 align:start position:36% line:-2
そのコンテンツは
更新されます

00:04:18.959 --> 00:04:21.695 align:start position:30% line:-2
ユーザは
これを展開するだけで―

00:04:21.795 --> 00:04:25.032 align:start position:34% line:-2
グループ内の
全通知が見られます

00:04:27.167 --> 00:04:31.839 align:start position:30% line:-2
一方 スレッド識別子が
設定されている通知は―

00:04:31.939 --> 00:04:36.276 align:start position:27% line:-2
同じスレッド識別子を持つ
アプリケーションの通知と―

00:04:36.376 --> 00:04:38.478 align:start position:34% line:-1
グループ化されます

00:04:39.146 --> 00:04:41.582 align:start position:32% line:-2
また その
アプリケーションは―

00:04:41.682 --> 00:04:43.717 align:start position:32% line:-2
設定した
スレッド識別子から―

00:04:43.817 --> 00:04:47.287 align:start position:29% line:-2
複数のカスタムグループも
作れます

00:04:48.722 --> 00:04:51.625 align:start position:27% line:-2
例えば この
メッセージアプリケーション

00:04:51.725 --> 00:04:53.994 align:start position:30% line:-1
２つのスレッドがあり―

00:04:54.094 --> 00:04:58.765 align:start position:27% line:-2
新着通知は
各自のグループに移動します

00:05:00.801 --> 00:05:06.139 align:start position:29% line:-2
ユーザはグループを展開し
その全通知を見られます

00:05:06.807 --> 00:05:10.444 align:start position:30% line:-2
スレッド識別子の使用で
これが可能になる

00:05:12.379 --> 00:05:13.914 align:start position:36% line:-1
また ユーザは―

00:05:14.014 --> 00:05:17.684 align:start position:29% line:-2
通知のグループ化の設定を
調整できます

00:05:17.784 --> 00:05:21.021 align:start position:30% line:-2
アプリケーションごとの
通知設定のページで

00:05:21.288 --> 00:05:23.423 align:start position:34% line:-1
選択肢は この３つ

00:05:23.524 --> 00:05:27.694 align:start position:27% line:-2
“自動”は
ご説明したとおりの動作です

00:05:28.996 --> 00:05:33.033 align:start position:29% line:-2
“アプリケーションごとに
グループ化”も選べます

00:05:33.133 --> 00:05:35.836 align:start position:29% line:-2
システムが
スレッド識別子を無視し―

00:05:35.936 --> 00:05:38.872 align:start position:30% line:-2
全通知を
１つのグループにします

00:05:40.207 --> 00:05:44.344 align:start position:23% line:-2
現在のiOS 11の既存動作と
同じにしたければ―

00:05:44.478 --> 00:05:48.248 align:start position:34% line:-2
通知のグループを
“オフ”にするだけ

00:05:48.348 --> 00:05:51.351 align:start position:34% line:-2
カスタムグループは
通知の受信時に―

00:05:51.451 --> 00:05:54.755 align:start position:34% line:-2
十分なユーザ価値を
提供することを―

00:05:54.922 --> 00:05:57.257 align:start position:32% line:-1
覚えておいてください

00:05:58.959 --> 00:06:02.496 align:start position:32% line:-2
では 通知グループの
構成要素の違いは？

00:05:58.959 --> 00:06:02.496 align:start position:32% line:-2
では 通知グループの
構成要素の違いは？

00:06:03.330 --> 00:06:08.502 align:start position:27% line:-2
表示されるコンテンツは
そのグループの最新通知です

00:06:09.870 --> 00:06:12.940 align:start position:34% line:-2
そのグループを
タップするだけで―

00:06:13.040 --> 00:06:14.908 align:start position:34% line:-1
全通知を見られます

00:06:15.008 --> 00:06:17.678 align:start position:32% line:-2
全通知のコンテンツが
展開し―

00:06:17.811 --> 00:06:21.515 align:start position:34% line:-2
ユーザは通知を
個別に操作できます

00:06:22.149 --> 00:06:26.553 align:start position:30% line:-2
一番上の２つのボタンで
スタックの非表示と―

00:06:26.653 --> 00:06:29.890 align:start position:29% line:-1
通知の一括消去もできます

00:06:32.359 --> 00:06:36.797 align:start position:29% line:-2
グループ化で通知の選別も
一段と楽になります

00:06:36.897 --> 00:06:38.532 align:start position:32% line:-1
例えば この場合は―

00:06:38.632 --> 00:06:43.804 align:start position:25% line:-2
右スワイプと“すべて消去”で
通知をまとめて消せます

00:06:46.340 --> 00:06:51.211 align:start position:29% line:-2
コンテンツとは別に
概要テキストも表示します

00:06:51.311 --> 00:06:54.147 align:start position:36% line:-2
概要テキストは
デフォルトでは―

00:06:54.248 --> 00:06:57.484 align:start position:32% line:-2
そのグループの
通知の数を表示します

00:06:58.585 --> 00:07:01.355 align:start position:30% line:-2
しかし
カスタマイズできるので

00:06:58.585 --> 00:07:01.355 align:start position:30% line:-2
しかし
カスタマイズできるので

00:07:01.455 --> 00:07:04.424 align:start position:32% line:-2
そのグループの情報を
ユーザに―

00:07:04.525 --> 00:07:07.494 align:start position:29% line:-1
はるかによく伝えられます

00:07:09.229 --> 00:07:11.165 align:start position:38% line:-1
このAPIと―

00:07:11.265 --> 00:07:15.936 align:start position:30% line:-2
カスタムグループ生成の
ユースケースは―

00:07:16.036 --> 00:07:20.474 align:start position:32% line:-2
この後のセッションで
詳細に見ていきます

00:07:22.209 --> 00:07:25.979 align:start position:34% line:-2
ではグループ通知を
簡単にまとめます

00:07:26.580 --> 00:07:27.981 align:start position:34% line:-1
iOS 12以降―

00:07:28.081 --> 00:07:31.718 align:start position:30% line:-2
アプリケーション通知は
自動的にグループ化

00:07:33.187 --> 00:07:35.355 align:start position:29% line:-1
スレッド識別子を使って―

00:07:35.455 --> 00:07:39.026 align:start position:29% line:-2
独自のカスタムグループを
生成できます

00:07:39.960 --> 00:07:43.230 align:start position:29% line:-2
しかし通知のグループ化の
設定は―

00:07:43.330 --> 00:07:45.499 align:start position:30% line:-1
ユーザ側で変更できます

00:07:47.301 --> 00:07:49.303 align:start position:32% line:-2
最後に
概要テキストを使い―

00:07:49.403 --> 00:07:52.639 align:start position:30% line:-2
ユーザに提供したい
通知グループの情報を―

00:07:52.739 --> 00:07:55.275 align:start position:32% line:-1
カスタマイズできます

00:07:57.678 --> 00:07:59.513 align:start position:30% line:-1
以上がグループ通知です

00:07:59.746 --> 00:08:01.748 align:start position:38% line:-1
では次のテーマ

00:07:59.746 --> 00:08:01.748 align:start position:38% line:-1
では次のテーマ

00:08:01.882 --> 00:08:05.052 align:start position:18% line:-1
通知コンテンツExtensionです

00:08:06.253 --> 00:08:08.989 align:start position:21% line:-2
iOS 10の
コンテンツExtensionで―

00:08:09.089 --> 00:08:11.124 align:start position:32% line:-1
ご存じかもしれません

00:08:11.825 --> 00:08:16.797 align:start position:20% line:-2
コンテンツExtensionにより
アプリケーションの―

00:08:16.897 --> 00:08:19.433 align:start position:34% line:-2
リッチ通知ビューが
実現します

00:08:19.533 --> 00:08:23.237 align:start position:29% line:-2
一段とカスタマイズされた
対話型の―

00:08:23.337 --> 00:08:26.139 align:start position:30% line:-2
通知インターフェイスが
作れます

00:08:27.407 --> 00:08:30.410 align:start position:36% line:-2
設定の概要を
簡単に説明します

00:08:31.245 --> 00:08:33.145 align:start position:32% line:-2
Xcodeの
標準テンプレートで―

00:08:33.280 --> 00:08:36.950 align:start position:23% line:-2
コンテンツExtensionの
ターゲットを追加します

00:08:38.485 --> 00:08:42.890 align:start position:2% line:-2
NotificationViewControllerの
デフォルトクラスが生成され

00:08:42.990 --> 00:08:47.161 align:start position:0% line:-2
UNNotificationContentExtension
プロトコルを実装

00:08:47.494 --> 00:08:50.964 align:start position:21% line:-2
ここで重要なのは
didReceive通知メソッド

00:08:51.064 --> 00:08:54.201 align:start position:18% line:-2
コンテンツExtensionビューを
設定する―

00:08:54.301 --> 00:08:55.969 align:start position:32% line:-1
エントリポイントです

00:08:56.169 --> 00:08:58.839 align:start position:32% line:-2
ここで渡した
通知オブジェクトで―

00:08:58.972 --> 00:09:03.610 align:start position:32% line:-2
通知の全情報を取得し
カスタムビューを設定

00:08:58.972 --> 00:09:03.610 align:start position:32% line:-2
通知の全情報を取得し
カスタムビューを設定

00:09:05.612 --> 00:09:08.749 align:start position:29% line:-2
関連づけられた
Info.plistで―

00:09:08.849 --> 00:09:10.551 align:start position:30% line:-1
さらにオプションを取得

00:09:11.151 --> 00:09:14.254 align:start position:36% line:-2
ここで重要なのは
カテゴリ識別子

00:09:14.354 --> 00:09:17.791 align:start position:29% line:-2
通知リクエストに設定する
識別子と―

00:09:17.891 --> 00:09:20.294 align:start position:29% line:-1
一致させる必要があります

00:09:20.394 --> 00:09:23.263 align:start position:18% line:-2
どの通知の
どのコンテンツExtensionか―

00:09:23.363 --> 00:09:25.032 align:start position:30% line:-1
システムに把握させます

00:09:26.466 --> 00:09:31.405 align:start position:23% line:-2
コンテンツExtensionの
簡易設定も同時に可能です

00:09:31.505 --> 00:09:35.475 align:start position:25% line:-2
初期のサイズ比や
デフォルトコンテンツの非表示

00:09:35.576 --> 00:09:38.946 align:start position:34% line:-2
そしてタイトルの
オーバーライドです

00:09:39.980 --> 00:09:44.484 align:start position:21% line:-2
ユーザは主に これらの
コンテンツExtensionを―

00:09:44.585 --> 00:09:46.487 align:start position:27% line:-1
通知アクションで操作します

00:09:46.587 --> 00:09:51.191 align:start position:23% line:-2
コンテンツExtensionの
コンテンツの下に表示されます

00:09:52.326 --> 00:09:55.229 align:start position:34% line:-2
このアクションの
設定の仕方も簡単に

00:09:56.029 --> 00:09:58.298 align:start position:29% line:-1
コードは かなり単純です

00:09:58.398 --> 00:10:02.202 align:start position:27% line:-2
likeとcommentの
２つのアクションがあり―

00:09:58.398 --> 00:10:02.202 align:start position:27% line:-2
likeとcommentの
２つのアクションがあり―

00:10:02.436 --> 00:10:05.839 align:start position:11% line:-2
likeの単純な
UNNotificationActionと―

00:10:06.607 --> 00:10:09.343 align:start position:25% line:-2
commentの
テキスト入力アクションを生成

00:10:11.778 --> 00:10:14.982 align:start position:32% line:-2
次に新しいカテゴリを
作成します

00:10:15.082 --> 00:10:18.285 align:start position:21% line:-2
アクションを表示する
コンテンツExtensionと―

00:10:18.385 --> 00:10:20.654 align:start position:32% line:-1
同じ識別子を与えます

00:10:21.855 --> 00:10:25.025 align:start position:27% line:-2
次に 生成した
２つのアクションを渡します

00:10:27.528 --> 00:10:29.296 align:start position:27% line:-1
次に クラスに関連づけた―

00:10:29.396 --> 00:10:32.099 align:start position:7% line:-2
UNUserNotificationCenter
オブジェクトの―

00:10:32.199 --> 00:10:36.003 align:start position:4% line:-2
setNotificationCategoriesを
呼び出し

00:10:36.103 --> 00:10:38.539 align:start position:29% line:-1
生成した新カテゴリを登録

00:10:41.041 --> 00:10:45.145 align:start position:21% line:-2
これでユーザは次回から
コンテンツExtensionで―

00:10:45.245 --> 00:10:48.215 align:start position:32% line:-2
これらのアクションを
実行でき―

00:10:48.315 --> 00:10:50.784 align:start position:36% line:-2
通知コンテンツを
操作できます

00:10:51.418 --> 00:10:55.756 align:start position:29% line:-2
アクションのレスポンスの
ハンドルの仕方は―

00:10:55.856 --> 00:10:57.691 align:start position:39% line:-1
２つあります

00:10:58.525 --> 00:11:01.828 align:start position:23% line:-2
まずはAppDelegateで
これは―

00:10:58.525 --> 00:11:01.828 align:start position:23% line:-2
まずはAppDelegateで
これは―

00:11:01.929 --> 00:11:04.898 align:start position:7% line:-2
UNUserNotificationCenter
デリゲートプロトコルを―

00:11:04.998 --> 00:11:08.268 align:start position:27% line:-2
実装したアプリケーションに
関連づけられています

00:11:08.368 --> 00:11:14.608 align:start position:5% line:-2
関数userNotificationCenterの
didReceiveレスポンスに―

00:11:14.708 --> 00:11:17.277 align:start position:30% line:-2
ユーザが
アクションを実行した―

00:11:17.377 --> 00:11:20.480 align:start position:30% line:-2
通知リクエストの情報を
組み込みます

00:11:21.315 --> 00:11:26.019 align:start position:29% line:-2
しかし このレスポンスに
インターセプトして―

00:11:26.119 --> 00:11:28.255 align:start position:36% line:-1
ビューを更新し―

00:11:28.355 --> 00:11:33.026 align:start position:29% line:-2
より対話的で動的な
ユーザ体験を実現できます

00:11:33.460 --> 00:11:37.865 align:start position:14% line:-2
didReceiveレスポンスメソッドを
入力し―

00:11:38.265 --> 00:11:41.368 align:start position:27% line:-2
likeの
アクション識別子をチェック

00:11:42.069 --> 00:11:44.905 align:start position:32% line:-2
そしてUIを
新しいラベルで更新し

00:11:45.005 --> 00:11:47.341 align:start position:30% line:-2
アプリケーション状態も
更新します

00:11:48.642 --> 00:11:51.712 align:start position:12% line:-2
doNotDismissの
completionブロックを呼び出します

00:11:51.812 --> 00:11:54.581 align:start position:18% line:-2
コンテンツExtensionビューを
閉じたければ―

00:11:54.681 --> 00:11:59.620 align:start position:20% line:-2
completionブロックに渡す
パラメータをdismissに

00:12:00.487 --> 00:12:02.256 align:start position:16% line:-2
または
dismissAndForwardで―

00:12:02.356 --> 00:12:05.726 align:start position:25% line:-2
AppDelegate関数に
レスポンスを転送します

00:12:06.293 --> 00:12:10.964 align:start position:25% line:-2
これで Likeアクションを
ユーザが実行すると―

00:12:11.064 --> 00:12:14.701 align:start position:27% line:-2
コンテンツは
その場ですぐに更新されます

00:12:14.835 --> 00:12:19.706 align:start position:27% line:-2
ユーザはリアルタイムの
フィードバックが得られます

00:12:21.341 --> 00:12:25.746 align:start position:18% line:-2
ただ コンテンツExtensionの
現在の状態を見ると―

00:12:25.846 --> 00:12:28.582 align:start position:32% line:-1
冗長な情報があります

00:12:28.916 --> 00:12:31.318 align:start position:32% line:-2
Likeアクションは
実行済みで―

00:12:31.418 --> 00:12:34.888 align:start position:29% line:-2
そのアクションがあっても
無駄です

00:12:36.390 --> 00:12:40.527 align:start position:27% line:-2
通知アクションは原則として
一定の制限があります

00:12:41.461 --> 00:12:43.063 align:start position:34% line:-1
あまり動的でなく―

00:12:43.163 --> 00:12:47.467 align:start position:23% line:-2
コンテントExtensionの
コンテキストによる更新は不可

00:12:49.069 --> 00:12:52.372 align:start position:29% line:-2
アプリケーション設定時に
定義する―

00:12:52.472 --> 00:12:56.176 align:start position:29% line:-2
通知カテゴリに
関連づけられることも多い

00:12:56.810 --> 00:12:59.079 align:start position:38% line:-2
こうした問題に
我々は対処し―

00:12:59.179 --> 00:13:03.116 align:start position:30% line:-2
通知アクションの
新APIを導入しました

00:12:59.179 --> 00:13:03.116 align:start position:30% line:-2
通知アクションの
新APIを導入しました

00:13:03.217 --> 00:13:05.886 align:start position:11% line:-2
そのnotificationActionsを
公開します

00:13:05.986 --> 00:13:07.988 align:start position:23% line:-2
コンテンツExtensionに
関連づけた―

00:13:08.088 --> 00:13:10.123 align:start position:16% line:-2
NSExtensionContextの
一部です

00:13:10.524 --> 00:13:13.293 align:start position:29% line:-2
このAPIで
ユーザに表示されている―

00:13:13.393 --> 00:13:16.463 align:start position:36% line:-2
通知アクションに
アクセスできます

00:13:16.563 --> 00:13:18.298 align:start position:27% line:-1
アクションの差し替えも可能

00:13:18.398 --> 00:13:23.303 align:start position:11% line:-2
このnotificationActionsの
新しい配列を設定します

00:13:25.439 --> 00:13:26.907 align:start position:34% line:-1
サンプルで言うと―

00:13:27.007 --> 00:13:29.409 align:start position:32% line:-2
Likeアクションが
実行された後―

00:13:29.510 --> 00:13:32.212 align:start position:29% line:-2
Unlikeアクションに
差し替えるには？

00:13:32.312 --> 00:13:35.182 align:start position:36% line:-2
逆のアクションを
実行できるように

00:13:36.850 --> 00:13:41.054 align:start position:32% line:-2
この新APIを使って
設定してみましょう

00:13:41.255 --> 00:13:44.391 align:start position:18% line:-2
やはりdidReceiveレスポンス
メソッドで―

00:13:44.491 --> 00:13:48.262 align:start position:27% line:-2
Likeアクションを識別し
アプリケーション状態を更新

00:13:49.129 --> 00:13:52.699 align:start position:23% line:-2
今度はUnlikeアクションも
生成します

00:13:52.799 --> 00:13:55.903 align:start position:32% line:-2
タイトルと
一意識別子をつけます

00:13:57.704 --> 00:14:01.074 align:start position:36% line:-2
また 表示中の
アクションから―

00:13:57.704 --> 00:14:01.074 align:start position:36% line:-2
また 表示中の
アクションから―

00:14:01.174 --> 00:14:05.746 align:start position:16% line:-2
commentActionを抽出すれば
再度 生成せずに済みます

00:14:07.481 --> 00:14:11.185 align:start position:18% line:-2
次に 生成したnewActionsの
新しい配列を生成し―

00:14:11.752 --> 00:14:15.355 align:start position:11% line:-2
notificationActions変数を
設定するだけ

00:14:17.691 --> 00:14:21.128 align:start position:25% line:-2
これで Likeアクションを
ユーザが実行すると―

00:14:21.228 --> 00:14:25.599 align:start position:30% line:-2
UIが自動更新し
新しいアクションを表示

00:14:25.999 --> 00:14:28.368 align:start position:27% line:-2
この状態を
どうハンドルするかにより―

00:14:28.469 --> 00:14:31.839 align:start position:27% line:-2
ユーザは２つのアクションを
切り替えられます

00:14:32.773 --> 00:14:36.276 align:start position:30% line:-2
このAPIは
複数の使い方ができます

00:14:36.443 --> 00:14:39.213 align:start position:18% line:-1
didReceive通知メソッドで―

00:14:39.313 --> 00:14:42.249 align:start position:20% line:-2
コンテンツExtensionビュー
設定時に―

00:14:42.349 --> 00:14:44.785 align:start position:27% line:-2
アクションを
設定できるようになりました

00:14:44.918 --> 00:14:49.590 align:start position:27% line:-2
通知リクエストがカテゴリに
関連づけられることなく―

00:14:49.690 --> 00:14:53.360 align:start position:30% line:-2
表示したいアクションを
定義できます

00:14:55.562 --> 00:14:58.532 align:start position:27% line:-2
また 表示中のアクションを
差し替えて―

00:14:58.665 --> 00:15:01.001 align:start position:29% line:-2
アクションの２次セットを
表示できます

00:14:58.665 --> 00:15:01.001 align:start position:29% line:-2
アクションの２次セットを
表示できます

00:15:01.101 --> 00:15:04.371 align:start position:29% line:-2
例えば先行のアクションが
“評価”だったら―

00:15:04.471 --> 00:15:06.573 align:start position:29% line:-1
ユーザに実行してほしい―

00:15:06.673 --> 00:15:10.143 align:start position:29% line:-2
各種の“評価”の
２次リストを提供できます

00:15:12.379 --> 00:15:15.782 align:start position:29% line:-2
これらの通知アクションの
全消去も可能です

00:15:15.883 --> 00:15:18.652 align:start position:32% line:-2
これらのアクションを
表示していても―

00:15:18.752 --> 00:15:21.188 align:start position:36% line:-2
もう意味がないと
感じた時です

00:15:23.624 --> 00:15:26.527 align:start position:30% line:-2
以上が通知アクションの
新APIです

00:15:26.627 --> 00:15:29.596 align:start position:30% line:-2
さまざまなアクションを
表示でき―

00:15:29.696 --> 00:15:33.300 align:start position:23% line:-2
コンテンツExtentionの
ユーザ体験を―

00:15:33.400 --> 00:15:36.303 align:start position:29% line:-1
高めるのに役立つでしょう

00:15:39.072 --> 00:15:42.976 align:start position:21% line:-2
次はユーザの
コンテンツExtension操作

00:15:43.710 --> 00:15:48.849 align:start position:34% line:-2
通知アクションは
今までは重要でした

00:15:49.383 --> 00:15:50.350 align:start position:34% line:-1
iOS 11まで―

00:15:50.451 --> 00:15:54.955 align:start position:18% line:-2
コンテンツExtensionビューは
タッチ操作できなかったので

00:15:56.256 --> 00:15:58.692 align:start position:30% line:-2
多くのフィードバックを
頂きました

00:15:58.792 --> 00:16:03.564 align:start position:25% line:-2
iOS 12では この制限を
なくすことをご報告します

00:15:58.792 --> 00:16:03.564 align:start position:25% line:-2
iOS 12では この制限を
なくすことをご報告します

00:16:03.697 --> 00:16:07.701 align:start position:43% line:-1
(拍手)

00:16:07.801 --> 00:16:11.505 align:start position:23% line:-2
コンテンツExtentionは
ユーザのタッチ操作を―

00:16:11.605 --> 00:16:14.107 align:start position:29% line:-1
受けつける選択ができます

00:16:15.676 --> 00:16:17.878 align:start position:27% line:-1
この設定は かなり簡単です

00:16:17.978 --> 00:16:21.014 align:start position:32% line:-2
新たな
キー値オプションを―

00:16:21.114 --> 00:16:23.784 align:start position:23% line:-2
Info.plistファイルに
足すだけ

00:16:25.085 --> 00:16:26.386 align:start position:36% line:-1
追加するキーは―

00:16:26.487 --> 00:16:30.891 align:start position:2% line:-2
UNNotificationExtensionUser
InteractionEnabled

00:16:32.759 --> 00:16:34.528 align:start position:34% line:-1
サンプルに戻って―

00:16:34.628 --> 00:16:38.966 align:start position:25% line:-2
通知アクションから
Likeアクションを削除し―

00:16:39.066 --> 00:16:43.504 align:start position:27% line:-2
ビューのUIのタッチ操作に
したい場合は？

00:16:44.371 --> 00:16:46.974 align:start position:23% line:-2
Info.plistファイルを
設定したら―

00:16:47.074 --> 00:16:49.810 align:start position:18% line:-2
コンテンツExtensionビューに
戻り―

00:16:49.910 --> 00:16:53.714 align:start position:21% line:-2
likeジェスチャをハンドルする
カスタムボタンを生成

00:16:54.915 --> 00:16:57.551 align:start position:30% line:-2
プライベートメソッドの
ターゲットを追加し

00:16:59.019 --> 00:17:04.191 align:start position:27% line:-2
この関数内でUIと
アプリケーション状態を更新

00:16:59.019 --> 00:17:04.191 align:start position:27% line:-2
この関数内でUIと
アプリケーション状態を更新

00:17:05.459 --> 00:17:09.229 align:start position:34% line:-2
独自のユーザ操作を
実装するので―

00:17:09.329 --> 00:17:12.499 align:start position:27% line:-2
ユーザのアクション
レスポンス コールバックを

00:17:12.598 --> 00:17:15.636 align:start position:27% line:-1
すべてハンドルできるのです

00:17:18.137 --> 00:17:19.807 align:start position:34% line:-1
これを設定すると―

00:17:20.174 --> 00:17:25.179 align:start position:16% line:-2
コンテンツExtensionのUI上に
Likeボタンが表示され―

00:17:25.279 --> 00:17:29.016 align:start position:30% line:-2
ユーザはその場ですぐに
ボタンを操作できます

00:17:33.187 --> 00:17:37.191 align:start position:18% line:-2
以上がコンテンツExtentionで
追加した新機能

00:17:37.291 --> 00:17:41.094 align:start position:29% line:-2
通知アクションと
タッチ操作の合わせ技です

00:17:41.195 --> 00:17:43.864 align:start position:32% line:-2
豊富なツールで
通知のユーザに対し―

00:17:43.997 --> 00:17:47.668 align:start position:23% line:-2
コンテンツExtentionの
対話的で動的な―

00:17:47.768 --> 00:17:50.737 align:start position:29% line:-1
ユーザ体験を生み出せます

00:17:52.739 --> 00:17:54.942 align:start position:16% line:-2
次は
通知コンテンツExtentionから―

00:17:55.075 --> 00:17:57.244 align:start position:34% line:-2
アプリケーションを
起動する方法

00:17:58.712 --> 00:18:02.182 align:start position:34% line:-2
現在はタッチ操作が
できなくても―

00:17:58.712 --> 00:18:02.182 align:start position:34% line:-2
現在はタッチ操作が
できなくても―

00:18:02.282 --> 00:18:06.820 align:start position:18% line:-2
コンテンツExtensionビューを
タップして起動できます

00:18:08.222 --> 00:18:12.626 align:start position:21% line:-2
または左上隅の
アプリケーションアイコンをタップ

00:18:14.127 --> 00:18:19.666 align:start position:25% line:-2
フォアグラウンドアクションを
生成して起動させることも可能

00:18:21.101 --> 00:18:24.738 align:start position:29% line:-2
カスタムコントロールから
起動したい場合は？

00:18:25.839 --> 00:18:28.542 align:start position:34% line:-2
プログラムで
起動したい場合は？

00:18:29.076 --> 00:18:31.478 align:start position:16% line:-2
NSExtensionContextの
新API―

00:18:31.578 --> 00:18:37.684 align:start position:4% line:-2
performNotificationDefault
Actionが これを可能にします

00:18:40.521 --> 00:18:42.923 align:start position:27% line:-1
デフォルトアクションとは？

00:18:43.023 --> 00:18:45.993 align:start position:34% line:-2
アプリケーションを
起動しますが―

00:18:46.393 --> 00:18:49.329 align:start position:7% line:-2
アプリケーションデリゲートの
userNotificationCenterの―

00:18:49.429 --> 00:18:52.900 align:start position:14% line:-2
didReceiveレスポンスメソッドも
呼び出します

00:18:54.034 --> 00:18:56.670 align:start position:11% line:-2
UNNotificationResponse
オブジェクトは―

00:18:56.770 --> 00:18:59.039 align:start position:32% line:-2
ユーザの通知の情報を
収容します

00:18:59.139 --> 00:19:03.811 align:start position:27% line:-2
アプリケーション状態を
この通知を基に更新できます

00:18:59.139 --> 00:19:03.811 align:start position:27% line:-2
アプリケーション状態を
この通知を基に更新できます

00:19:04.611 --> 00:19:06.413 align:start position:29% line:-1
ここで渡された識別子は―

00:19:06.513 --> 00:19:10.117 align:start position:12% line:-2
UNNotificationDefault
ActionIdentifier

00:19:11.285 --> 00:19:15.589 align:start position:27% line:-2
カスタムコントロールの
設定の仕方を見てみましょう

00:19:17.291 --> 00:19:21.495 align:start position:25% line:-2
全コメントを見るための
UIButtonを生成します

00:19:22.829 --> 00:19:26.633 align:start position:30% line:-2
次にプライベート関数と
関連づけて―

00:19:27.434 --> 00:19:29.436 align:start position:16% line:-2
performNotification
DefaultActionを―

00:19:29.536 --> 00:19:31.438 align:start position:32% line:-1
関数内で呼び出すだけ

00:19:31.705 --> 00:19:34.441 align:start position:30% line:-2
これで このメソッドを
プログラムで―

00:19:34.541 --> 00:19:38.812 align:start position:18% line:-2
コンテンツExtensionコードの
どこからでも呼び出せます

00:19:40.614 --> 00:19:43.050 align:start position:29% line:-2
以上がアプリケーションの
起動です

00:19:43.350 --> 00:19:45.886 align:start position:18% line:-2
コンテンツExtensionビューを
閉じるには？

00:19:48.422 --> 00:19:51.425 align:start position:29% line:-2
現行では
ユーザはどうやっているか

00:19:51.525 --> 00:19:54.795 align:start position:25% line:-2
右上隅の
Dismissボタンをタップ

00:19:56.196 --> 00:19:59.466 align:start position:27% line:-2
独自に生成した
カスタム通知アクションで―

00:19:59.566 --> 00:20:02.302 align:start position:32% line:-2
ビューを閉じることも
できます

00:19:59.566 --> 00:20:02.302 align:start position:32% line:-2
ビューを閉じることも
できます

00:20:02.669 --> 00:20:07.007 align:start position:20% line:-2
completionブロックに
dismissを渡せば設定できます

00:20:08.642 --> 00:20:13.213 align:start position:29% line:-2
独自のカスタムボタンで
ビューを閉じたい場合は？

00:20:13.313 --> 00:20:15.215 align:start position:34% line:-1
しかもプログラムで

00:20:15.315 --> 00:20:18.685 align:start position:25% line:-2
例えばユーザが“Like”を
タップすると閉じる

00:20:18.786 --> 00:20:22.523 align:start position:18% line:-2
コンテンツExtentionの操作を
終えたという解釈です

00:20:23.624 --> 00:20:26.093 align:start position:25% line:-1
これを可能にするのも新API

00:20:26.193 --> 00:20:28.462 align:start position:14% line:-1
NSExtensionContextの―

00:20:28.562 --> 00:20:30.898 align:start position:16% line:-2
dismissNotification
ContentExtension

00:20:33.066 --> 00:20:36.770 align:start position:25% line:-2
Likeボタンの設定の仕方に
戻りますが 今度は―

00:20:36.870 --> 00:20:40.574 align:start position:20% line:-2
コンテンツExtensonビューを
閉じるために追加した―

00:20:40.674 --> 00:20:42.643 align:start position:29% line:-1
新しい関数も呼び出します

00:20:44.978 --> 00:20:48.382 align:start position:21% line:-2
これでユーザが
Likeアクションを実行すると―

00:20:48.482 --> 00:20:50.984 align:start position:18% line:-2
コンテンツExtensionビューが
閉じます

00:20:52.686 --> 00:20:55.656 align:start position:25% line:-2
１つ注意なのが
このメソッドを呼び出しても―

00:20:55.756 --> 00:20:59.193 align:start position:32% line:-2
ユーザに送った通知は
取り消されません

00:20:59.726 --> 00:21:02.896 align:start position:30% line:-2
取り消したい場合
既存のAPIを使います

00:20:59.726 --> 00:21:02.896 align:start position:30% line:-2
取り消したい場合
既存のAPIを使います

00:21:02.996 --> 00:21:07.568 align:start position:0% line:-2
removeDeliveredNotifications
(withIdentifiers:)

00:21:09.870 --> 00:21:13.774 align:start position:20% line:-2
通知コンテンツExtensionの
新APIについて―

00:21:13.874 --> 00:21:16.276 align:start position:32% line:-1
ここでまとめましょう

00:21:18.745 --> 00:21:21.515 align:start position:34% line:-2
最初にご説明した
通知アクションは―

00:21:21.615 --> 00:21:24.318 align:start position:29% line:-2
これらの通知アクションに
アクセスでき―

00:21:24.418 --> 00:21:28.622 align:start position:30% line:-2
コードのどこからでも
動的に差し替えられます

00:21:31.558 --> 00:21:34.828 align:start position:16% line:-2
コンテンツExtensionビュー内の
ユーザのタッチ操作を―

00:21:34.928 --> 00:21:36.930 align:start position:30% line:-1
選べるようになりました

00:21:38.999 --> 00:21:41.802 align:start position:32% line:-2
コードのどこからでも
アプリケーションを―

00:21:41.902 --> 00:21:43.804 align:start position:29% line:-1
プログラムで起動できます

00:21:44.571 --> 00:21:47.207 align:start position:16% line:-1
コンテンツExtensionビューを―

00:21:47.307 --> 00:21:52.813 align:start position:29% line:-2
ユーザ体験を最も高めると
思われる所で閉じられます

00:21:54.448 --> 00:21:57.518 align:start position:30% line:-2
こうした多様なAPIが
皆さんの―

00:21:57.618 --> 00:22:02.489 align:start position:23% line:-2
コンテンツExtensionの
ユーザ体験向上に―

00:21:57.618 --> 00:22:02.489 align:start position:23% line:-2
コンテンツExtensionの
ユーザ体験向上に―

00:22:02.589 --> 00:22:04.558 align:start position:32% line:-1
お役に立てば幸いです

00:22:05.392 --> 00:22:07.661 align:start position:16% line:-1
通知コンテンツExtensionでした

00:22:07.761 --> 00:22:11.999 align:start position:34% line:-2
本日の次のテーマは
通知管理です

00:22:12.099 --> 00:22:16.270 align:start position:29% line:-2
ここからは同僚のテジャが
ご説明します

00:22:16.537 --> 00:22:22.509 align:start position:43% line:-1
(拍手)

00:22:22.976 --> 00:22:23.911 align:start position:41% line:-1
ありがとう

00:22:24.011 --> 00:22:26.880 align:start position:30% line:-2
こんにちは
テジャ･コンダパリです

00:22:26.980 --> 00:22:30.350 align:start position:30% line:-2
私もiOS通知チームの
技術者です

00:22:30.450 --> 00:22:34.955 align:start position:27% line:-2
我々の新APIのいくつかを
ご説明したいと思います

00:22:35.055 --> 00:22:38.892 align:start position:27% line:-1
まず最初は“通知管理”です

00:22:39.092 --> 00:22:41.094 align:start position:29% line:-1
ただ このAPIの前に―

00:22:41.195 --> 00:22:44.464 align:start position:36% line:-2
ユーザ向け機能を
取り上げて―

00:22:45.666 --> 00:22:49.436 align:start position:27% line:-2
解説を加えてから
このAPIに取り掛かります

00:22:52.973 --> 00:22:55.809 align:start position:32% line:-2
増える一方の
アプリケーションを―

00:22:55.909 --> 00:22:59.947 align:start position:30% line:-2
ユーザは主に通知で
操作するようになります

00:23:00.380 --> 00:23:04.852 align:start position:29% line:-2
しかし ユーザは
こんな状況に陥りがちです

00:23:05.052 --> 00:23:07.554 align:start position:30% line:-1
通知があまりにも多く―

00:23:07.654 --> 00:23:11.625 align:start position:34% line:-2
重要な通知の選別が
難しくなります

00:23:12.859 --> 00:23:16.763 align:start position:30% line:-2
このユーザの場合
より楽に選別するため―

00:23:16.864 --> 00:23:21.034 align:start position:27% line:-2
Podcastからの通知を
ロック画面に表示しません

00:23:21.368 --> 00:23:25.472 align:start position:25% line:-2
これは現行では
設定アプリケーションを起動し

00:23:25.572 --> 00:23:27.307 align:start position:38% line:-1
通知を見つけ―

00:23:27.407 --> 00:23:29.276 align:start position:21% line:-1
Podcast Appを見つけ―

00:23:29.376 --> 00:23:31.879 align:start position:32% line:-1
ようやく設定できます

00:23:32.679 --> 00:23:34.414 align:start position:29% line:-1
これを簡単にしたいので―

00:23:34.515 --> 00:23:38.685 align:start position:30% line:-2
iOS 12では
新たに管理ビューを導入

00:23:39.620 --> 00:23:41.054 align:start position:41% line:-1
ユーザは―

00:23:41.155 --> 00:23:45.159 align:start position:30% line:-2
設定Appを起動せずに
ここで直接―

00:23:45.259 --> 00:23:47.728 align:start position:32% line:-1
通知の設定ができます

00:23:51.064 --> 00:23:54.234 align:start position:30% line:-2
この管理ビューに
簡単に入れる方法が３つ

00:23:54.334 --> 00:23:56.270 align:start position:30% line:-1
１つはご覧のとおりです

00:23:56.370 --> 00:23:58.705 align:start position:38% line:-2
単純に通知を
スワイプして―

00:23:58.872 --> 00:24:02.242 align:start position:30% line:-2
“管理”をタップすれば
管理ビューが出ます

00:23:58.872 --> 00:24:02.242 align:start position:30% line:-2
“管理”をタップすれば
管理ビューが出ます

00:24:03.977 --> 00:24:05.345 align:start position:41% line:-1
２つ目は―

00:24:06.113 --> 00:24:10.284 align:start position:32% line:-2
リッチ通知に入れれば
右隅をタップして―

00:24:10.384 --> 00:24:12.486 align:start position:29% line:-1
管理ビューを起動できます

00:24:14.288 --> 00:24:16.990 align:start position:38% line:-2
そして３つ目は
リストそのもの

00:24:17.090 --> 00:24:20.527 align:start position:29% line:-2
通知の操作方法によっては
ユーザに対し―

00:24:20.627 --> 00:24:23.530 align:start position:32% line:-2
時々 こういう提案が
なされます

00:24:23.630 --> 00:24:27.634 align:start position:29% line:-2
Podcastの通知を
受信し続けるか 聞きます

00:24:27.768 --> 00:24:30.604 align:start position:30% line:-2
ここからも
“管理”をタップして―

00:24:30.704 --> 00:24:32.539 align:start position:32% line:-1
管理ビューを出せます

00:24:34.308 --> 00:24:36.610 align:start position:32% line:-1
詳しく見てみましょう

00:24:36.743 --> 00:24:38.912 align:start position:29% line:-1
もちろん選択肢があって―

00:24:39.012 --> 00:24:43.383 align:start position:29% line:-2
ユーザは このビューから
直接 通知を設定できます

00:24:44.017 --> 00:24:49.490 align:start position:29% line:-2
ですが設定Appに入って
詳細な設定をしたい時は―

00:24:49.823 --> 00:24:54.895 align:start position:21% line:-2
クイックリンクでPodcastの
通知の設定に飛べます

00:24:57.064 --> 00:25:00.901 align:start position:29% line:-2
ここから直接 実行できる
アクションもあります

00:24:57.064 --> 00:25:00.901 align:start position:29% line:-2
ここから直接 実行できる
アクションもあります

00:25:01.101 --> 00:25:03.570 align:start position:30% line:-2
１つ目は
“目立たない形で配信”

00:25:03.670 --> 00:25:06.740 align:start position:30% line:-2
おそらく皆さんが未知の
概念です

00:25:07.341 --> 00:25:12.412 align:start position:23% line:-2
これが“目立つ形で配信”となる
管理ビューもあります

00:25:12.513 --> 00:25:14.081 align:start position:39% line:-1
ご説明します

00:25:16.483 --> 00:25:20.587 align:start position:29% line:-2
iOSには
ユーザができる設定が多く

00:25:20.687 --> 00:25:23.056 align:start position:29% line:-1
パワーユーザには最高です

00:25:23.156 --> 00:25:26.093 align:start position:32% line:-2
設定を細部まで
カスタマイズできます

00:25:26.360 --> 00:25:30.731 align:start position:29% line:-2
しかし我々は一般ユーザも
支援できると思います

00:25:30.831 --> 00:25:35.569 align:start position:30% line:-2
大きく２つのカテゴリに
通知設定を分けるのです

00:25:35.903 --> 00:25:38.472 align:start position:30% line:-1
“目立つ形で配信”と―

00:25:38.572 --> 00:25:41.241 align:start position:27% line:-1
“目立たない形で配信”です

00:25:43.277 --> 00:25:46.847 align:start position:25% line:-2
通知を目立つ形で配信するのは
慣れています

00:25:46.947 --> 00:25:48.816 align:start position:29% line:-1
ロック画面に表示されます

00:25:49.817 --> 00:25:51.685 align:start position:14% line:-2
Notification Centerに
表示されます

00:25:51.952 --> 00:25:53.654 align:start position:30% line:-1
バナーとして表示され―

00:25:54.087 --> 00:25:57.724 align:start position:23% line:-2
Appアイコンにバッジを表示し
サウンドを鳴らす

00:25:59.259 --> 00:26:01.662 align:start position:29% line:-2
目立たない形で配信される
通知は―

00:25:59.259 --> 00:26:01.662 align:start position:29% line:-2
目立たない形で配信される
通知は―

00:26:01.762 --> 00:26:05.999 align:start position:7% line:-2
Notification Centerに表示され
サウンドは鳴りません

00:26:08.135 --> 00:26:10.804 align:start position:38% line:-2
管理ビューでは
通知の配信を―

00:26:10.904 --> 00:26:16.276 align:start position:32% line:-2
目立たせるかどうか
設定できるだけなく―

00:26:16.376 --> 00:26:20.547 align:start position:29% line:-2
ユーザは通知を
オフにする選択もできます

00:26:21.515 --> 00:26:24.618 align:start position:29% line:-2
自分のアプリケーションの
通知を―

00:26:24.718 --> 00:26:27.454 align:start position:34% line:-2
オフにするのではと
心配ですよね

00:26:27.654 --> 00:26:30.824 align:start position:30% line:-2
“オフにする”を
タップした場合に備え―

00:26:30.924 --> 00:26:33.594 align:start position:36% line:-2
この確認シートを
追加しました

00:26:33.694 --> 00:26:37.231 align:start position:29% line:-2
ここから通知を
オフにすることもできます

00:26:37.331 --> 00:26:39.333 align:start position:36% line:-2
しかし我々は
APIを追加し―

00:26:39.433 --> 00:26:43.136 align:start position:34% line:-2
この確認シートに
第２の選択肢を追加

00:26:43.237 --> 00:26:46.507 align:start position:27% line:-2
Podcastが
このAPIを利用しています

00:26:46.607 --> 00:26:48.976 align:start position:25% line:-1
“Podcastで設定する”

00:26:49.476 --> 00:26:53.881 align:start position:18% line:-2
このリンクはPodcast Appの
カスタム設定ビューへの―

00:26:53.981 --> 00:26:55.983 align:start position:34% line:-1
ディープリンクです

00:26:56.083 --> 00:26:58.986 align:start position:30% line:-1
どんな通知が欲しいか―

00:26:59.086 --> 00:27:02.956 align:start position:32% line:-2
ユーザがより細かく
コントロールできます

00:26:59.086 --> 00:27:02.956 align:start position:32% line:-2
ユーザがより細かく
コントロールできます

00:27:04.291 --> 00:27:08.862 align:start position:29% line:-2
アプリケーションの通知は
数も種類も多くなります

00:27:08.962 --> 00:27:11.565 align:start position:34% line:-1
そこで重要なのは―

00:27:11.665 --> 00:27:14.635 align:start position:29% line:-2
どんな通知が重要なのかを
ユーザが―

00:27:14.735 --> 00:27:18.272 align:start position:27% line:-2
細かく
コントロールできることです

00:27:21.675 --> 00:27:25.812 align:start position:34% line:-2
アプリケーションの
通知設定からも―

00:27:25.913 --> 00:27:28.382 align:start position:36% line:-2
このリンクに
アクセスできます

00:27:28.482 --> 00:27:31.518 align:start position:21% line:-1
Podcastの場合 一番下の―

00:27:31.618 --> 00:27:34.454 align:start position:23% line:-1
“Podcast通知設定”です

00:27:35.923 --> 00:27:37.925 align:start position:30% line:-1
コードを見てみましょう

00:27:39.226 --> 00:27:44.097 align:start position:7% line:-2
UNUserNotificationCenter
Delegateに準拠しているクラスの

00:27:44.198 --> 00:27:46.333 align:start position:30% line:-2
新しい
デリゲートメソッドです

00:27:46.433 --> 00:27:49.603 align:start position:0% line:-1
openSettingsFor notification

00:27:49.703 --> 00:27:52.773 align:start position:29% line:-2
このデリゲートメソッドを
実装していれば―

00:27:52.906 --> 00:27:56.877 align:start position:25% line:-2
この 設定アプリケーションや
管理ビューからのリンクは―

00:27:56.977 --> 00:28:00.647 align:start position:32% line:-2
システムにより
自動的に追加されます

00:27:56.977 --> 00:28:00.647 align:start position:32% line:-2
システムにより
自動的に追加されます

00:28:01.615 --> 00:28:05.786 align:start position:25% line:-2
リンクをタップすると
このメソッドが呼び出されます

00:28:06.820 --> 00:28:09.022 align:start position:29% line:-1
そして非常に重要なのは―

00:28:09.122 --> 00:28:13.260 align:start position:25% line:-2
このメソッドによって
すぐにビューへ飛べることです

00:28:13.360 --> 00:28:17.831 align:start position:25% line:-2
ユーザはアプリケーション内で
通知設定できます

00:28:19.233 --> 00:28:21.435 align:start position:27% line:-1
そして お気づきでしょうか

00:28:21.535 --> 00:28:26.006 align:start position:25% line:-2
これにはパラメータがあります
notificationです

00:28:26.106 --> 00:28:28.542 align:start position:32% line:-2
リンクがタップされた
場所により…

00:28:28.642 --> 00:28:31.044 align:start position:34% line:-2
管理ビューから
タップされた場合―

00:28:31.145 --> 00:28:35.415 align:start position:14% line:-2
そこから出されたという
notificationの値が得られます

00:28:35.916 --> 00:28:38.418 align:start position:27% line:-2
設定アプリケーションからの
場合―

00:28:38.519 --> 00:28:41.221 align:start position:23% line:-2
notificationの値は
nilになります

00:28:41.321 --> 00:28:45.826 align:start position:25% line:-2
このメソッドが呼び出された時
この情報を使って―

00:28:45.926 --> 00:28:48.161 align:start position:36% line:-2
適切な通知設定を
表示できます

00:28:50.731 --> 00:28:53.467 align:start position:34% line:-1
以上が通知管理です

00:28:53.567 --> 00:28:56.370 align:start position:36% line:-2
この新しい方法で
ユーザは―

00:28:56.470 --> 00:29:01.575 align:start position:23% line:-2
通知の配信を目立たせるかどうか
設定できます

00:28:56.470 --> 00:29:01.575 align:start position:23% line:-2
通知の配信を目立たせるかどうか
設定できます

00:29:01.675 --> 00:29:06.113 align:start position:30% line:-2
通知をオフにすることも
アプリケーション内で―

00:29:06.980 --> 00:29:08.782 align:start position:29% line:-1
細かく設定することも可能

00:29:09.516 --> 00:29:14.488 align:start position:27% line:-2
また ユーザに通知の受信を
継続してもらうには―

00:29:14.588 --> 00:29:19.660 align:start position:27% line:-2
通知内のコンテンツを
関連性の高いものにすること

00:29:20.794 --> 00:29:25.532 align:start position:27% line:-2
また スレッド識別子を使い
通知をグループ化すること

00:29:25.632 --> 00:29:27.468 align:start position:34% line:-1
これをお勧めします

00:29:27.901 --> 00:29:31.071 align:start position:34% line:-2
ユーザがリストを
整理しやすくなり―

00:29:31.171 --> 00:29:36.176 align:start position:27% line:-2
アプリケーションの通知に
圧倒されないようになります

00:29:37.945 --> 00:29:42.649 align:start position:25% line:-2
また さまざまな通知を
アプリケーションは送信します

00:29:42.750 --> 00:29:46.720 align:start position:23% line:-2
カスタム設定ビューを
アプリケーション内で提供すれば

00:29:47.387 --> 00:29:49.656 align:start position:32% line:-2
ユーザは
どれが重要な通知か―

00:29:49.756 --> 00:29:52.860 align:start position:32% line:-2
より細かく
コントロールできます

00:29:54.228 --> 00:29:56.597 align:start position:34% line:-1
以上が通知管理です

00:29:57.531 --> 00:30:02.202 align:start position:27% line:-2
次にお話ししたい
重要な機能は“仮許可”です

00:29:57.531 --> 00:30:02.202 align:start position:27% line:-2
次にお話ししたい
重要な機能は“仮許可”です

00:30:04.137 --> 00:30:07.841 align:start position:30% line:-2
今はアプリケーションを
インストールすると―

00:30:07.941 --> 00:30:10.043 align:start position:32% line:-1
通知を受信する前に―

00:30:10.144 --> 00:30:14.214 align:start position:30% line:-2
こういうプロンプトに
応答する必要があります

00:30:14.748 --> 00:30:17.284 align:start position:30% line:-2
その通知が必要かどうか
聞かれます

00:30:17.451 --> 00:30:20.120 align:start position:38% line:-2
これに関する
最大の問題は―

00:30:20.220 --> 00:30:22.923 align:start position:32% line:-2
この時点では
どんな通知が来るか―

00:30:23.023 --> 00:30:25.659 align:start position:27% line:-1
ユーザが分からないことです

00:30:25.759 --> 00:30:28.395 align:start position:36% line:-2
必要な通知なのか
分かりません

00:30:28.762 --> 00:30:33.767 align:start position:29% line:-2
そこで iOS 12では
仮許可を導入します

00:30:33.867 --> 00:30:39.139 align:start position:30% line:-2
アプリケーションからの
通知の自動トライアルで

00:30:39.239 --> 00:30:42.676 align:start position:29% line:-2
ユーザは
その通知が必要かどうか―

00:30:42.776 --> 00:30:45.746 align:start position:32% line:-2
情報に基づいた判断が
できます

00:30:46.346 --> 00:30:49.082 align:start position:32% line:-1
これを選んだ場合は―

00:30:50.217 --> 00:30:53.620 align:start position:29% line:-2
先ほどの許可プロンプトは
なくなり―

00:30:53.720 --> 00:30:58.192 align:start position:30% line:-2
アプリケーションからの
通知は自動配信されます

00:30:58.425 --> 00:31:02.963 align:start position:27% line:-2
ただし これらの通知は
目立たない形で配信されます

00:30:58.425 --> 00:31:02.963 align:start position:27% line:-2
ただし これらの通知は
目立たない形で配信されます

00:31:03.063 --> 00:31:07.434 align:start position:30% line:-2
そして 目立たない形で
配信される通知は―

00:31:07.534 --> 00:31:10.003 align:start position:11% line:-2
Notification Centerでのみ
表示され―

00:31:10.104 --> 00:31:12.072 align:start position:30% line:-1
サウンドを鳴らしません

00:31:15.909 --> 00:31:19.713 align:start position:29% line:-2
仮許可で配信される通知は
それ自体が―

00:31:19.813 --> 00:31:23.650 align:start position:32% line:-2
こういうプロンプトを
出します

00:31:25.052 --> 00:31:27.387 align:start position:32% line:-1
これによりユーザは―

00:31:27.855 --> 00:31:30.958 align:start position:29% line:-2
通知を何回か受信した後で
判断できます

00:31:31.058 --> 00:31:33.827 align:start position:27% line:-1
その通知の受信を継続するか

00:31:34.561 --> 00:31:37.664 align:start position:30% line:-2
それとも
その通知をオフにするか

00:31:38.899 --> 00:31:42.669 align:start position:30% line:-2
そして この
オフの確認シートには―

00:31:42.770 --> 00:31:47.040 align:start position:27% line:-2
カスタム設定のリンクも
提供していれば表示されます

00:31:49.443 --> 00:31:51.578 align:start position:30% line:-1
コードを見てみましょう

00:31:52.312 --> 00:31:56.016 align:start position:11% line:-2
通常の
requestAuthorizationの―

00:31:56.450 --> 00:31:59.753 align:start position:38% line:-2
要求している
オプションに―

00:31:59.853 --> 00:32:05.993 align:start position:12% line:-2
ドット修飾のオプション
“.provisional”を追加できます

00:31:59.853 --> 00:32:05.993 align:start position:12% line:-2
ドット修飾のオプション
“.provisional”を追加できます

00:32:06.093 --> 00:32:08.462 align:start position:34% line:-1
これを組み込むと―

00:32:09.963 --> 00:32:13.567 align:start position:29% line:-2
自動的に
トライアル参加となります

00:32:14.701 --> 00:32:17.237 align:start position:32% line:-1
ここで注意すべきは―

00:32:17.971 --> 00:32:23.210 align:start position:18% line:-2
.provisionalオプションは
他のオプションに追加するのです

00:32:23.510 --> 00:32:27.247 align:start position:32% line:-2
ユーザが通知の配信の
継続を決めた場合―

00:32:27.347 --> 00:32:29.683 align:start position:36% line:-2
配信の仕方を
知りたいからです

00:32:29.783 --> 00:32:32.753 align:start position:25% line:-2
バッジ表示か サウンドつきか
アラートか

00:32:34.454 --> 00:32:36.256 align:start position:36% line:-1
以上が仮許可です

00:32:36.356 --> 00:32:39.827 align:start position:30% line:-2
アプリケーションからの
通知の自動トライアルで

00:32:39.927 --> 00:32:42.930 align:start position:29% line:-2
ユーザは
その通知が必要かどうか―

00:32:43.030 --> 00:32:45.465 align:start position:27% line:-1
情報に基づいて判断できます

00:32:46.366 --> 00:32:51.171 align:start position:27% line:-2
また ユーザに通知の配信を
継続させるためには―

00:32:51.271 --> 00:32:56.276 align:start position:21% line:-2
通知のコンテンツを
関連性の高いものにすることが重要

00:32:57.110 --> 00:33:02.449 align:start position:21% line:-2
修飾子オプションとして
.provisionalを使い―

00:32:57.110 --> 00:33:02.449 align:start position:21% line:-2
修飾子オプションとして
.provisionalを使い―

00:33:02.549 --> 00:33:06.086 align:start position:27% line:-2
リクエストするオプションに
追加することも重要です

00:33:06.687 --> 00:33:09.690 align:start position:36% line:-1
以上が仮許可です

00:33:12.760 --> 00:33:16.063 align:start position:34% line:-2
最後にお話ししたい
重要な機能は―

00:33:16.163 --> 00:33:17.965 align:start position:38% line:-1
“重大な通知”

00:33:20.334 --> 00:33:24.505 align:start position:29% line:-2
会議中や重要なイベントの
参加中は―

00:33:24.605 --> 00:33:26.273 align:start position:36% line:-1
私の電話は こう

00:33:26.373 --> 00:33:29.376 align:start position:32% line:-2
“おやすみモード”に
しています

00:33:29.576 --> 00:33:32.079 align:start position:32% line:-2
少なくとも
通知音をオフにします

00:33:32.179 --> 00:33:35.949 align:start position:36% line:-2
通知が来ても
音は聞こえません

00:33:36.383 --> 00:33:40.020 align:start position:32% line:-2
通常は
これでいいのですが―

00:33:41.655 --> 00:33:44.825 align:start position:32% line:-2
こんな重要な通知にも
気づかないでしょう

00:33:45.492 --> 00:33:47.795 align:start position:34% line:-1
健康関連の通知です

00:33:47.895 --> 00:33:52.099 align:start position:30% line:-2
グルコースモニタからの
低血糖の警告で

00:33:52.432 --> 00:33:54.935 align:start position:32% line:-1
すぐに見たい通知です

00:33:55.736 --> 00:33:57.571 align:start position:34% line:-1
こういう仮定から―

00:33:57.671 --> 00:34:01.775 align:start position:27% line:-2
新しい種類の通知が必要だと
気づきました

00:33:57.671 --> 00:34:01.775 align:start position:27% line:-2
新しい種類の通知が必要だと
気づきました

00:34:02.109 --> 00:34:04.378 align:start position:32% line:-1
それが重大な通知です

00:34:05.746 --> 00:34:09.917 align:start position:29% line:-2
これは例えば
医療関連 健康関連の通知

00:34:10.583 --> 00:34:13.320 align:start position:30% line:-2
あるいは
ホームセキュリティ関連

00:34:14.188 --> 00:34:16.657 align:start position:30% line:-1
あるいは治安関連の通知

00:34:16.757 --> 00:34:18.792 align:start position:29% line:-1
そして重大な通知の鍵は―

00:34:20.094 --> 00:34:23.797 align:start position:34% line:-2
ユーザの即時対応が
求められることです

00:34:26.467 --> 00:34:28.469 align:start position:30% line:-1
重大な通知の動作では―

00:34:28.569 --> 00:34:32.272 align:start position:30% line:-2
おやすみモードも
通知音オフも無視され―

00:34:32.371 --> 00:34:34.475 align:start position:34% line:-1
サウンドが鳴ります

00:34:34.574 --> 00:34:36.844 align:start position:34% line:-2
カスタムサウンドも
鳴らせます

00:34:37.311 --> 00:34:40.547 align:start position:34% line:-2
ただ そうなると
非常にうるさいです

00:34:40.647 --> 00:34:42.916 align:start position:29% line:-1
そのため 重大な通知は―

00:34:43.016 --> 00:34:48.554 align:start position:29% line:-2
送れるアプリケーションを
限るべきと我々は考えます

00:34:49.523 --> 00:34:52.458 align:start position:30% line:-2
重大な通知を
送れるようになるには―

00:34:52.559 --> 00:34:54.795 align:start position:32% line:-1
資格の申請が必要です

00:34:54.962 --> 00:34:58.632 align:start position:14% line:-2
developer.apple.comで
申請できます

00:34:59.900 --> 00:35:02.135 align:start position:36% line:-2
重大な通知は
こういう感じです

00:34:59.900 --> 00:35:02.135 align:start position:36% line:-2
重大な通知は
こういう感じです

00:35:02.736 --> 00:35:06.306 align:start position:29% line:-2
重大であることを示す
固有アイコンが表示され―

00:35:06.540 --> 00:35:09.610 align:start position:32% line:-2
着信時に
サウンドも鳴らします

00:35:12.546 --> 00:35:17.084 align:start position:27% line:-2
通知設定に重大な通知専用の
セクションもあります

00:35:18.152 --> 00:35:20.053 align:start position:34% line:-1
ユーザは ここで―

00:35:20.154 --> 00:35:24.124 align:start position:29% line:-2
特定のアプリケーションに
重要な通知を許可し―

00:35:24.224 --> 00:35:27.728 align:start position:29% line:-2
それ以外の通知を
許可しないことを選べます

00:35:30.264 --> 00:35:33.233 align:start position:32% line:-2
ユーザは重大な通知を
受信する前に―

00:35:33.333 --> 00:35:36.470 align:start position:32% line:-2
こういうプロンプトに
応答せねばなりません

00:35:36.570 --> 00:35:40.607 align:start position:27% line:-2
そのアプリケーションからの
重大な通知を―

00:35:40.708 --> 00:35:42.476 align:start position:32% line:-1
受信するか聞かれます

00:35:43.410 --> 00:35:48.982 align:start position:27% line:-2
当然 重大な通知を送るには
許可のリクエストが必要です

00:35:49.083 --> 00:35:51.952 align:start position:38% line:-2
資格を申請し
認められたら―

00:35:52.853 --> 00:35:55.722 align:start position:7% line:-2
通常のrequestAuthorizationの
場所の―

00:35:56.356 --> 00:36:00.561 align:start position:29% line:-2
他の
リクエストオプションに―

00:35:56.356 --> 00:36:00.561 align:start position:29% line:-2
他の
リクエストオプションに―

00:36:00.661 --> 00:36:04.498 align:start position:14% line:-2
.criticalAlertオプションを
追加できます

00:36:04.965 --> 00:36:08.102 align:start position:34% line:-2
これでプロンプトが
表示されます

00:36:12.906 --> 00:36:15.809 align:start position:27% line:-1
設定の仕方を見てみましょう

00:36:15.943 --> 00:36:19.813 align:start position:30% line:-2
その動作は普通の通知と
ほぼ同じです

00:36:20.180 --> 00:36:25.185 align:start position:0% line:-2
title body categoryIdentifierの
設定をしたところです

00:36:25.285 --> 00:36:29.356 align:start position:32% line:-2
重大な通知の違いは
サウンドを鳴らすこと

00:36:29.456 --> 00:36:32.526 align:start position:29% line:-2
サウンドを設定する必要が
あります

00:36:32.693 --> 00:36:34.895 align:start position:29% line:-1
ここでは ご覧のとおり―

00:36:34.995 --> 00:36:40.033 align:start position:27% line:-2
フレームワークが提供する
デフォルトのサウンドを設定

00:36:41.902 --> 00:36:44.204 align:start position:34% line:-2
カスタムサウンドの
設定も―

00:36:44.605 --> 00:36:48.308 align:start position:27% line:-2
音量レベルのカスタマイズも
可能です

00:36:48.942 --> 00:36:50.410 align:start position:34% line:-1
そして もちろん―

00:36:52.146 --> 00:36:55.115 align:start position:25% line:-2
重大な通知はプッシュ通知にも
なりうるので―

00:36:55.215 --> 00:36:56.950 align:start position:34% line:-1
この情報はすべて―

00:36:57.051 --> 00:37:00.187 align:start position:30% line:-2
プッシュペイロードにも
設定できます

00:36:57.051 --> 00:37:00.187 align:start position:30% line:-2
プッシュペイロードにも
設定できます

00:37:00.921 --> 00:37:03.156 align:start position:32% line:-1
以上が重大な通知です

00:37:03.257 --> 00:37:06.260 align:start position:29% line:-1
新しい種類の通知であり―

00:37:06.427 --> 00:37:09.863 align:start position:27% line:-1
即時対応をユーザに求めます

00:37:10.264 --> 00:37:12.299 align:start position:32% line:-1
そして非常にうるさい

00:37:12.399 --> 00:37:15.135 align:start position:27% line:-1
送信するには資格が必要です

00:37:18.605 --> 00:37:22.743 align:start position:20% line:-2
今日 ご紹介する
エキサイティングなAPIは以上です

00:37:22.843 --> 00:37:26.480 align:start position:29% line:-2
簡単に ひと通り
おさらいしたいと思います

00:37:29.016 --> 00:37:33.587 align:start position:29% line:-2
スレッド識別子を使って
通知をグループ化すれば―

00:37:33.687 --> 00:37:37.624 align:start position:32% line:-2
ユーザがリストを
整理しやすくなります

00:37:38.792 --> 00:37:43.497 align:start position:14% line:-2
通知コンテンツExtensionに関する
優れたAPIは―

00:37:43.597 --> 00:37:46.233 align:start position:34% line:-2
アプリケーションの
リッチ通知を―

00:37:46.333 --> 00:37:48.168 align:start position:32% line:-1
より対話的にできます

00:37:49.603 --> 00:37:53.807 align:start position:29% line:-2
アプリケーション内の
カスタム設定ビューにより

00:37:53.907 --> 00:37:56.777 align:start position:27% line:-1
どんな通知を受信したいか―

00:37:56.877 --> 00:38:00.647 align:start position:27% line:-2
ユーザが
細かくコントロールできます

00:37:56.877 --> 00:38:00.647 align:start position:27% line:-2
ユーザが
細かくコントロールできます

00:38:03.016 --> 00:38:05.452 align:start position:30% line:-1
仮許可も取り上げました

00:38:05.552 --> 00:38:09.389 align:start position:30% line:-2
アプリケーションからの
自動トライアルの通知で

00:38:09.490 --> 00:38:12.659 align:start position:38% line:-2
これらの通知が
必要かどうか―

00:38:12.760 --> 00:38:15.863 align:start position:32% line:-2
情報に基づいた判断を
ユーザは下せます

00:38:16.930 --> 00:38:19.333 align:start position:30% line:-1
そして最後は重大な通知

00:38:19.600 --> 00:38:22.102 align:start position:32% line:-1
新しい種類の通知で―

00:38:22.202 --> 00:38:25.372 align:start position:30% line:-2
ユーザは
即時対応を求められます

00:38:25.472 --> 00:38:27.141 align:start position:36% line:-1
そして うるさい

00:38:27.307 --> 00:38:30.944 align:start position:30% line:-2
これらの優れたAPIを
ぜひ活用して―

00:38:31.044 --> 00:38:34.882 align:start position:34% line:-2
ユーザの通知体験を
向上させてください

00:38:35.449 --> 00:38:37.451 align:start position:30% line:-2
このセッションの情報は
すべて―

00:38:37.551 --> 00:38:40.854 align:start position:14% line:-2
developer.apple.comの
セッションのページで見られます

00:38:40.954 --> 00:38:42.689 align:start position:32% line:-1
セッション710です

00:38:43.290 --> 00:38:46.727 align:start position:29% line:-2
この後 ホール３で
別のセッションがあります

00:38:46.827 --> 00:38:49.263 align:start position:36% line:-2
“グループ通知の
使い方について”

00:38:49.363 --> 00:38:54.134 align:start position:32% line:-2
最適なグループ通知の
決め方をご説明します

00:38:54.601 --> 00:38:58.272 align:start position:27% line:-2
通知ラボが
今日と明日の２回 あります

00:38:58.372 --> 00:39:03.177 align:start position:25% line:-2
我々のチームの技術者が
あらゆるご質問にお答えします

00:38:58.372 --> 00:39:03.177 align:start position:25% line:-2
我々のチームの技術者が
あらゆるご質問にお答えします

00:39:03.277 --> 00:39:04.945 align:start position:34% line:-1
金曜日の午前には―

00:39:05.045 --> 00:39:08.382 align:start position:32% line:-2
通知のデザインという
面白いセッションが

00:39:08.549 --> 00:39:12.953 align:start position:23% line:-2
これらのデザインを一緒に考えた
デザイナーが主催し―

00:39:13.053 --> 00:39:17.191 align:start position:27% line:-2
通知のベストプラクティスに
ついて語ります

00:39:17.357 --> 00:39:19.059 align:start position:30% line:-1
ありがとうございました

00:39:19.159 --> 00:39:22.596 align:start position:43% line:-1
(拍手)
