WEBVTT

00:00:06.516 --> 00:00:16.516 A:middle
[ Cheering ]

00:00:17.516 --> 00:00:23.166 A:middle
[ Applause ]

00:00:23.666 --> 00:00:26.806 A:middle
&gt;&gt; Good morning and welcome to

00:00:26.806 --> 00:00:28.016 A:middle
Auto Layout techniques in

00:00:28.016 --> 00:00:29.066 A:middle
Interface Builder.

00:00:29.726 --> 00:00:30.826 A:middle
I'm Jonathon Mah.

00:00:31.056 --> 00:00:32.516 A:middle
I'm an engineer on the Interface

00:00:32.516 --> 00:00:34.026 A:middle
Builder team, and I'll be joined

00:00:34.026 --> 00:00:36.176 A:middle
onstage shortly by my colleague

00:00:36.176 --> 00:00:36.776 A:middle
Jason Yao.

00:00:37.506 --> 00:00:39.056 A:middle
In this session, we'll be

00:00:39.056 --> 00:00:41.576 A:middle
starting with a partly built iOS

00:00:41.576 --> 00:00:43.496 A:middle
app and use that to demonstrate

00:00:43.836 --> 00:00:45.626 A:middle
a series of layout and

00:00:45.626 --> 00:00:46.596 A:middle
interaction techniques.

00:00:47.166 --> 00:00:51.506 A:middle
Now it seems like every few

00:00:51.506 --> 00:00:53.726 A:middle
months there's a new app to help

00:00:53.826 --> 00:00:57.126 A:middle
people find dates, and this is

00:00:57.126 --> 00:00:58.226 A:middle
another one of those months.

00:00:58.786 --> 00:01:01.546 A:middle
So this is the app we're

00:00:58.786 --> 00:01:01.546 A:middle
So this is the app we're

00:01:01.546 --> 00:01:01.976 A:middle
starting with.

00:01:02.516 --> 00:01:04.516 A:middle
[ Laughter ]

00:01:05.516 --> 00:01:08.936 A:middle
[ Applause ]

00:01:09.436 --> 00:01:12.066 A:middle
Like other dating apps using

00:01:12.066 --> 00:01:14.086 A:middle
Auto Layout is about building

00:01:14.086 --> 00:01:16.186 A:middle
relationships, relationships

00:01:16.186 --> 00:01:16.896 A:middle
between views.

00:01:18.136 --> 00:01:20.196 A:middle
And building relationships does

00:01:20.196 --> 00:01:20.626 A:middle
take work.

00:01:20.626 --> 00:01:24.006 A:middle
But it's the kind of work that's

00:01:24.006 --> 00:01:26.706 A:middle
rewarding because having laid

00:01:26.706 --> 00:01:27.786 A:middle
out our interface using

00:01:27.786 --> 00:01:31.116 A:middle
constraints, our app can scale

00:01:31.116 --> 00:01:34.086 A:middle
across a variety of screen sizes

00:01:34.236 --> 00:01:35.796 A:middle
and adaptations, including ones

00:01:35.796 --> 00:01:37.056 A:middle
which might not exist yet.

00:01:39.966 --> 00:01:40.946 A:middle
Now, if you've never used Auto

00:01:40.946 --> 00:01:41.886 A:middle
Layout before, there's some

00:01:41.886 --> 00:01:44.486 A:middle
great resources online and past

00:01:45.096 --> 00:01:46.886 A:middle
sessions from WWDCs.

00:01:47.576 --> 00:01:48.476 A:middle
But today we've got a lot of

00:01:48.476 --> 00:01:49.616 A:middle
content to get through, so we're

00:01:49.616 --> 00:01:50.656 A:middle
not going to cover the basics.

00:01:51.856 --> 00:01:54.566 A:middle
In fact, we have six techniques

00:01:54.596 --> 00:01:55.606 A:middle
that we'll be walking through.

00:01:56.746 --> 00:01:58.886 A:middle
You can use these in your own

00:01:59.566 --> 00:02:00.826 A:middle
apps, either as is or combine

00:01:59.566 --> 00:02:00.826 A:middle
apps, either as is or combine

00:02:00.826 --> 00:02:02.286 A:middle
them together to form a larger

00:02:02.286 --> 00:02:02.476 A:middle
effect.

00:02:03.196 --> 00:02:04.566 A:middle
And with that, let's just jump

00:02:04.566 --> 00:02:06.196 A:middle
right into the first one, which

00:02:06.196 --> 00:02:08.856 A:middle
is changing layout at runtime.

00:02:11.536 --> 00:02:13.826 A:middle
Now at the top of our app we

00:02:13.826 --> 00:02:16.736 A:middle
have a slider area where the

00:02:16.736 --> 00:02:18.316 A:middle
user can set a distance.

00:02:18.356 --> 00:02:21.086 A:middle
And usually, we expect the user

00:02:21.086 --> 00:02:23.426 A:middle
to set this once and then not

00:02:23.426 --> 00:02:24.506 A:middle
need to change it for a while.

00:02:24.506 --> 00:02:27.836 A:middle
So we'd like for this area to be

00:02:27.836 --> 00:02:29.416 A:middle
able to collapse away and reduce

00:02:29.416 --> 00:02:30.456 A:middle
clutter in our interface.

00:02:31.086 --> 00:02:35.076 A:middle
Now, if we think about this from

00:02:35.076 --> 00:02:37.196 A:middle
a layout perspective, what we're

00:02:37.196 --> 00:02:39.066 A:middle
trying to do is collapse the

00:02:39.066 --> 00:02:40.866 A:middle
height of this area to 0.

00:02:40.866 --> 00:02:42.676 A:middle
So, if we add a height

00:02:42.726 --> 00:02:44.756 A:middle
constraint and then set the

00:02:44.756 --> 00:02:46.226 A:middle
constant to 0.

00:02:46.226 --> 00:02:47.156 A:middle
If we did this in Interface

00:02:47.156 --> 00:02:49.406 A:middle
Builder, we'd get something like

00:02:50.126 --> 00:02:50.666 A:middle
this.

00:02:51.076 --> 00:02:53.376 A:middle
So what we're seeing here is our

00:02:53.376 --> 00:02:55.256 A:middle
layout with a bunch of red lines

00:02:55.256 --> 00:02:57.486 A:middle
indicating that our layout

00:02:57.486 --> 00:02:58.766 A:middle
doesn't have a solution.

00:02:58.766 --> 00:02:59.576 A:middle
We have what's called a

00:02:59.576 --> 00:02:59.996 A:middle
conflict.

00:03:00.786 --> 00:03:02.396 A:middle
So a conflict means that we've

00:03:02.396 --> 00:03:04.716 A:middle
asked the layout engine to do

00:03:05.206 --> 00:03:07.036 A:middle
multiple incompatible things.

00:03:07.036 --> 00:03:08.996 A:middle
In this case, set the height of

00:03:08.996 --> 00:03:10.846 A:middle
this area to 0 while also

00:03:10.846 --> 00:03:12.016 A:middle
keeping the height large enough

00:03:12.016 --> 00:03:14.326 A:middle
to fit the content inside of it.

00:03:14.916 --> 00:03:17.226 A:middle
The technique that we'll use to

00:03:17.226 --> 00:03:20.886 A:middle
solve this is to take the view

00:03:20.886 --> 00:03:22.156 A:middle
that contains our control, our

00:03:22.156 --> 00:03:23.696 A:middle
slider, and our labels, and

00:03:23.696 --> 00:03:25.576 A:middle
we'll wrap it in another view,

00:03:26.516 --> 00:03:27.786 A:middle
here indicated in orange.

00:03:29.326 --> 00:03:30.896 A:middle
Now instead of just collapsing

00:03:30.896 --> 00:03:32.606 A:middle
the view containing our

00:03:32.606 --> 00:03:34.956 A:middle
controls, we'll collapse this

00:03:34.956 --> 00:03:35.536 A:middle
outer view.

00:03:36.196 --> 00:03:38.506 A:middle
The inner view maintains its

00:03:38.506 --> 00:03:41.076 A:middle
full height and satisfies all

00:03:41.076 --> 00:03:41.696 A:middle
its constraints.

00:03:41.696 --> 00:03:43.446 A:middle
But the outer view clips the

00:03:43.446 --> 00:03:44.436 A:middle
inner view because clips

00:03:44.436 --> 00:03:45.526 A:middle
ToBounds is enabled.

00:03:47.236 --> 00:03:49.466 A:middle
And this gets the effect of

00:03:49.466 --> 00:03:50.976 A:middle
hiding the interface elements.

00:03:54.696 --> 00:03:56.556 A:middle
Let's see how this looks in

00:03:56.556 --> 00:03:56.996 A:middle
Xcode.

00:03:57.406 --> 00:04:00.296 A:middle
So we have the slider area

00:03:57.406 --> 00:04:00.296 A:middle
So we have the slider area

00:04:00.296 --> 00:04:02.116 A:middle
designed in Interface Builder

00:04:02.116 --> 00:04:03.086 A:middle
right here, and we're designing

00:04:03.086 --> 00:04:04.526 A:middle
it in the expanded state, so we

00:04:04.526 --> 00:04:06.166 A:middle
can work with it more easily.

00:04:06.586 --> 00:04:07.806 A:middle
So since it's expanded in

00:04:07.806 --> 00:04:09.426 A:middle
Interface Builder, we'll be

00:04:09.906 --> 00:04:13.256 A:middle
collapsing it at runtime.

00:04:13.256 --> 00:04:14.366 A:middle
So we'll create a constraint at

00:04:14.366 --> 00:04:16.486 A:middle
runtime to set this, the outer

00:04:16.555 --> 00:04:18.136 A:middle
wrapping view height to 0.

00:04:18.745 --> 00:04:21.505 A:middle
And then, at some point, in

00:04:21.505 --> 00:04:24.016 A:middle
response to the user touching

00:04:24.016 --> 00:04:26.506 A:middle
the button, we'll activate that

00:04:26.506 --> 00:04:26.976 A:middle
constraint.

00:04:28.096 --> 00:04:29.006 A:middle
Now if that were the only thing

00:04:29.006 --> 00:04:30.026 A:middle
we did we'd still hit the

00:04:30.026 --> 00:04:31.416 A:middle
conflict situation that we saw

00:04:31.416 --> 00:04:34.256 A:middle
before, so we'll deactivate a

00:04:34.256 --> 00:04:35.476 A:middle
different constraint, the bottom

00:04:35.476 --> 00:04:38.126 A:middle
edge of the control container to

00:04:38.126 --> 00:04:38.926 A:middle
the wrapping view.

00:04:39.526 --> 00:04:41.536 A:middle
So this will allow the outer

00:04:41.536 --> 00:04:42.286 A:middle
view to collapse.

00:04:42.286 --> 00:04:45.386 A:middle
Let's look at the full code for

00:04:45.906 --> 00:04:46.000 A:middle
this.

00:04:47.076 --> 00:04:48.136 A:middle
This is in our view controller

00:04:48.136 --> 00:04:50.796 A:middle
subclass and so we have three

00:04:50.796 --> 00:04:51.236 A:middle
properties.

00:04:51.236 --> 00:04:52.836 A:middle
Two of them are outlets to both

00:04:52.836 --> 00:04:54.896 A:middle
that wrapping view and the lower

00:04:54.896 --> 00:04:56.146 A:middle
constraint, and we have a

00:04:56.146 --> 00:04:57.816 A:middle
property to store our 0 height

00:04:58.116 --> 00:04:59.000 A:middle
constraint.

00:05:01.966 --> 00:05:04.406 A:middle
In response to touching the

00:05:04.686 --> 00:05:08.026 A:middle
button, the first thing we'll do

00:05:08.026 --> 00:05:09.096 A:middle
is ensure that the 0 height

00:05:09.096 --> 00:05:10.176 A:middle
constraint is created, if we

00:05:10.176 --> 00:05:10.916 A:middle
haven't made it already.

00:05:12.556 --> 00:05:13.606 A:middle
And then because we want the

00:05:13.606 --> 00:05:16.126 A:middle
behavior to toggle between shown

00:05:16.126 --> 00:05:17.876 A:middle
and hidden, we'll figure out

00:05:17.876 --> 00:05:19.726 A:middle
which direction we're going.

00:05:24.336 --> 00:05:26.596 A:middle
With that done, we'll then

00:05:26.906 --> 00:05:28.046 A:middle
deactivate and activate the

00:05:28.046 --> 00:05:29.696 A:middle
constraint that we want to have

00:05:30.006 --> 00:05:32.176 A:middle
-- that we want to get our

00:05:32.176 --> 00:05:33.386 A:middle
interface into the final state.

00:05:34.896 --> 00:05:38.526 A:middle
Now, if you notice carefully,

00:05:38.526 --> 00:05:40.156 A:middle
we're deactivating one

00:05:40.156 --> 00:05:41.506 A:middle
constraint before activating

00:05:41.506 --> 00:05:42.206 A:middle
another constraint.

00:05:43.376 --> 00:05:44.706 A:middle
We're not simply toggling both.

00:05:44.706 --> 00:05:46.386 A:middle
And the reason for that is that

00:05:46.386 --> 00:05:48.106 A:middle
Auto Layout tries to help us

00:05:48.106 --> 00:05:49.896 A:middle
avoid the conflict situation.

00:05:50.926 --> 00:05:52.256 A:middle
Because, as soon as we get into

00:05:52.256 --> 00:05:54.176 A:middle
a conflict, it'll log a message

00:05:54.176 --> 00:05:55.786 A:middle
to the console saying hey, I've

00:05:55.816 --> 00:05:57.846 A:middle
detected that these constraints

00:05:57.846 --> 00:05:58.856 A:middle
are conflicting with each other.

00:06:00.176 --> 00:06:01.626 A:middle
So if we activated, for example,

00:06:01.626 --> 00:06:03.216 A:middle
0 height while the bottom

00:06:03.216 --> 00:06:04.266 A:middle
constraint was still activated,

00:06:04.266 --> 00:06:05.076 A:middle
we'd get that message.

00:06:06.046 --> 00:06:07.486 A:middle
By deactivating first, we avoid

00:06:07.486 --> 00:06:07.726 A:middle
that.

00:06:09.166 --> 00:06:11.026 A:middle
So this is what we need to get

00:06:11.026 --> 00:06:11.976 A:middle
our interface in the final

00:06:11.976 --> 00:06:13.666 A:middle
state, but we also would like to

00:06:15.076 --> 00:06:16.776 A:middle
animate the results so that the

00:06:16.776 --> 00:06:19.786 A:middle
user can see -- maintain some

00:06:19.786 --> 00:06:21.276 A:middle
context in the application as

00:06:21.276 --> 00:06:22.336 A:middle
the transition happens.

00:06:23.256 --> 00:06:24.736 A:middle
So to do that we'll use a UIView

00:06:24.736 --> 00:06:26.546 A:middle
animation block, and we'll wrap

00:06:26.546 --> 00:06:27.926 A:middle
a call to layout if needed.

00:06:28.196 --> 00:06:29.056 A:middle
So this evaluates the

00:06:29.056 --> 00:06:31.966 A:middle
constraints, gets frame values

00:06:32.046 --> 00:06:33.106 A:middle
and applies to them to a view,

00:06:33.316 --> 00:06:35.196 A:middle
and then UIView animation will

00:06:35.196 --> 00:06:35.796 A:middle
capture that and animate the

00:06:35.796 --> 00:06:35.976 A:middle
result.

00:06:41.476 --> 00:06:42.786 A:middle
So we're deactivating the bottom

00:06:42.786 --> 00:06:43.806 A:middle
constraint and that gives us

00:06:43.856 --> 00:06:45.166 A:middle
this animation effect.

00:06:46.236 --> 00:06:48.476 A:middle
This isn't quite the effect that

00:06:48.476 --> 00:06:50.146 A:middle
I want, but I can change that

00:06:50.146 --> 00:06:51.056 A:middle
simply by keeping the code

00:06:51.056 --> 00:06:53.626 A:middle
exactly the same and changing

00:06:53.626 --> 00:06:56.406 A:middle
which constraint our edge

00:06:56.496 --> 00:06:57.726 A:middle
constraint outlet is connected

00:06:57.726 --> 00:06:57.916 A:middle
to.

00:06:58.846 --> 00:07:00.456 A:middle
If I had said connected to the

00:06:58.846 --> 00:07:00.456 A:middle
If I had said connected to the

00:07:00.456 --> 00:07:04.676 A:middle
top constraint, then the

00:07:04.676 --> 00:07:06.486 A:middle
animation changes and it gets

00:07:06.486 --> 00:07:07.626 A:middle
the effect that actually I think

00:07:07.626 --> 00:07:07.976 A:middle
I prefer.

00:07:11.836 --> 00:07:13.456 A:middle
So we just saw an example of

00:07:13.456 --> 00:07:14.856 A:middle
changing the layout in our app

00:07:15.246 --> 00:07:17.006 A:middle
by changing the constraints.

00:07:17.266 --> 00:07:20.436 A:middle
Now let's look at another way to

00:07:20.436 --> 00:07:21.846 A:middle
change the layout, and we'll use

00:07:21.846 --> 00:07:22.916 A:middle
that to track touch.

00:07:23.506 --> 00:07:26.326 A:middle
So we have this central card

00:07:26.326 --> 00:07:28.106 A:middle
area in our app, and we'd like

00:07:28.106 --> 00:07:30.316 A:middle
it to follow a touch around the

00:07:30.316 --> 00:07:33.326 A:middle
screen and add a little rotation

00:07:33.326 --> 00:07:35.496 A:middle
as you get close to the edge and

00:07:35.496 --> 00:07:36.676 A:middle
snap back once you let it go.

00:07:42.116 --> 00:07:44.206 A:middle
So the view's position onscreen

00:07:44.206 --> 00:07:45.916 A:middle
is generally defined by its

00:07:45.916 --> 00:07:47.566 A:middle
frame and when we're using

00:07:47.566 --> 00:07:49.326 A:middle
constraints and have constraints

00:07:49.326 --> 00:07:50.956 A:middle
to this view, the layout engine

00:07:51.306 --> 00:07:52.576 A:middle
owns the value of this frame.

00:07:53.946 --> 00:07:55.706 A:middle
So the value itself is computed

00:07:55.766 --> 00:07:56.656 A:middle
from the constraints.

00:07:57.726 --> 00:07:58.636 A:middle
But there's another property

00:07:58.636 --> 00:07:59.866 A:middle
that affects the view's position

00:07:59.866 --> 00:08:01.466 A:middle
onscreen and that is the

00:07:59.866 --> 00:08:01.466 A:middle
onscreen and that is the

00:08:01.466 --> 00:08:03.576 A:middle
transform, and this applies an

00:08:03.626 --> 00:08:04.786 A:middle
offset from the frame.

00:08:04.866 --> 00:08:06.056 A:middle
So the type of this is a

00:08:06.196 --> 00:08:07.316 A:middle
CGAffineTransform.

00:08:07.666 --> 00:08:08.876 A:middle
And this lets us add a

00:08:08.876 --> 00:08:10.886 A:middle
translation, a rotation, and a

00:08:10.956 --> 00:08:13.646 A:middle
scale that gets applied after

00:08:14.076 --> 00:08:15.496 A:middle
the frame has been computed from

00:08:15.496 --> 00:08:16.006 A:middle
constraints.

00:08:17.556 --> 00:08:18.526 A:middle
So we can use this to get the

00:08:18.526 --> 00:08:20.596 A:middle
effect that we're after, and

00:08:21.336 --> 00:08:22.446 A:middle
I'll jump over to a demo and

00:08:22.446 --> 00:08:22.976 A:middle
show you how it's done.

00:08:29.776 --> 00:08:31.486 A:middle
Okay. So here is our app in

00:08:31.486 --> 00:08:32.086 A:middle
Interface Builder.

00:08:33.576 --> 00:08:35.166 A:middle
And we'd like to make the

00:08:35.285 --> 00:08:36.885 A:middle
central card area move around

00:08:37.056 --> 00:08:37.846 A:middle
with the touch.

00:08:38.996 --> 00:08:40.616 A:middle
Now I've just added a gesture

00:08:40.616 --> 00:08:42.775 A:middle
recognizer, a pan gesture

00:08:42.775 --> 00:08:43.916 A:middle
recognizer, from the object

00:08:43.916 --> 00:08:44.936 A:middle
library to this area.

00:08:45.266 --> 00:08:46.536 A:middle
And when I add a gesture

00:08:46.536 --> 00:08:48.056 A:middle
recognizer, it appears at the

00:08:48.056 --> 00:08:50.726 A:middle
top level of the scene, so

00:08:51.406 --> 00:08:52.566 A:middle
[inaudible] and in the outline

00:08:54.046 --> 00:08:54.156 A:middle
view.

00:08:54.356 --> 00:08:56.226 A:middle
I'll open the assistant editor,

00:08:56.226 --> 00:08:57.556 A:middle
so we can see our view

00:08:57.556 --> 00:08:57.976 A:middle
controller code.

00:09:01.426 --> 00:09:03.096 A:middle
And I'll control drag from that

00:09:03.096 --> 00:09:05.636 A:middle
pan gesture recognizer to a spot

00:09:05.636 --> 00:09:06.646 A:middle
in our source code.

00:09:06.646 --> 00:09:08.726 A:middle
And this will let me add an

00:09:08.726 --> 00:09:09.176 A:middle
outlet.

00:09:09.356 --> 00:09:10.426 A:middle
Or, in this case, I want to

00:09:10.426 --> 00:09:12.496 A:middle
connect an action, and I'll call

00:09:12.496 --> 00:09:13.866 A:middle
it panCard.

00:09:15.076 --> 00:09:18.056 A:middle
I'll switch the type from any to

00:09:18.056 --> 00:09:19.176 A:middle
pan gesture recognizer.

00:09:19.216 --> 00:09:20.456 A:middle
This is the type of the

00:09:20.456 --> 00:09:20.936 A:middle
parameter.

00:09:21.596 --> 00:09:23.256 A:middle
And specifying pan gesture

00:09:23.256 --> 00:09:24.776 A:middle
recognizer let's me use

00:09:25.216 --> 00:09:26.226 A:middle
properties of that gesture

00:09:26.226 --> 00:09:27.776 A:middle
recognizer within the action

00:09:27.776 --> 00:09:27.976 A:middle
method.

00:09:31.436 --> 00:09:31.956 A:middle
All right.

00:09:31.956 --> 00:09:34.066 A:middle
So we have our method stub here.

00:09:34.486 --> 00:09:36.076 A:middle
And I also have an outlet that's

00:09:36.076 --> 00:09:36.936 A:middle
connected to that card view,

00:09:36.936 --> 00:09:37.976 A:middle
which is what we want to move.

00:09:42.426 --> 00:09:45.476 A:middle
So, in this method, I'm first

00:09:47.156 --> 00:09:49.566 A:middle
going to ask the sender, which

00:09:49.566 --> 00:09:51.126 A:middle
is the gesture recognizer, for

00:09:51.126 --> 00:09:52.296 A:middle
its translation.

00:09:53.076 --> 00:09:56.666 A:middle
In effect, how far the user has

00:09:56.726 --> 00:09:57.746 A:middle
panned or dragged.

00:09:58.376 --> 00:10:00.066 A:middle
And then I'm going to use the

00:09:58.376 --> 00:10:00.066 A:middle
And then I'm going to use the

00:10:00.066 --> 00:10:02.566 A:middle
result to apply a transform to

00:10:02.566 --> 00:10:03.236 A:middle
this card view.

00:10:03.576 --> 00:10:04.796 A:middle
Now the transform's computed by

00:10:04.796 --> 00:10:06.166 A:middle
this helper method right here,

00:10:07.136 --> 00:10:09.166 A:middle
which generates both a

00:10:09.166 --> 00:10:12.036 A:middle
translation and adds a little

00:10:12.036 --> 00:10:13.066 A:middle
rotation, depending on the

00:10:13.066 --> 00:10:14.376 A:middle
exposition of the card.

00:10:14.376 --> 00:10:17.626 A:middle
So I'm going to hit build and

00:10:17.626 --> 00:10:18.756 A:middle
run, and we'll see how this

00:10:18.756 --> 00:10:18.966 A:middle
looks.

00:10:28.376 --> 00:10:28.956 A:middle
All right.

00:10:28.956 --> 00:10:29.776 A:middle
And so we have our app.

00:10:29.986 --> 00:10:31.876 A:middle
And now, if I touch and move, we

00:10:31.876 --> 00:10:34.866 A:middle
get a rotation, and it will

00:10:34.936 --> 00:10:35.856 A:middle
follow the touch.

00:10:35.856 --> 00:10:38.576 A:middle
And then if I let go, now the

00:10:38.576 --> 00:10:39.946 A:middle
card just stays where it is,

00:10:39.946 --> 00:10:41.306 A:middle
because we're never resetting

00:10:41.306 --> 00:10:41.876 A:middle
the transform.

00:10:41.876 --> 00:10:44.286 A:middle
It's just staying the last value

00:10:44.286 --> 00:10:46.166 A:middle
that we gave it.

00:10:46.206 --> 00:10:47.606 A:middle
If I touch and move again, we'll

00:10:47.606 --> 00:10:49.096 A:middle
see that it will snap back to

00:10:49.096 --> 00:10:50.776 A:middle
the original position.

00:10:51.386 --> 00:10:52.836 A:middle
That's because the transform

00:10:52.836 --> 00:10:53.926 A:middle
isn't offset from that.

00:10:53.966 --> 00:10:58.726 A:middle
So, as soon as we go back with a

00:10:58.726 --> 00:11:01.346 A:middle
new translation, we're going to

00:10:58.726 --> 00:11:01.346 A:middle
new translation, we're going to

00:11:01.616 --> 00:11:03.366 A:middle
be relative to the original

00:11:03.896 --> 00:11:04.146 A:middle
frame.

00:11:05.276 --> 00:11:06.866 A:middle
So we'd like the card to return

00:11:06.866 --> 00:11:08.026 A:middle
back to the center once we're

00:11:08.026 --> 00:11:08.396 A:middle
done with it.

00:11:08.556 --> 00:11:11.446 A:middle
Once we let go of the touch.

00:11:12.316 --> 00:11:13.696 A:middle
Now we can do that by looking at

00:11:13.966 --> 00:11:15.476 A:middle
the state of the gesture

00:11:15.476 --> 00:11:15.976 A:middle
recognizer.

00:11:19.356 --> 00:11:20.696 A:middle
So we have the same code here.

00:11:20.896 --> 00:11:22.466 A:middle
And then, when the state is

00:11:22.586 --> 00:11:24.376 A:middle
ended, we'll reset the transform

00:11:24.866 --> 00:11:26.486 A:middle
back to the identity transform.

00:11:27.836 --> 00:11:28.776 A:middle
Let's build and run again.

00:11:34.836 --> 00:11:38.006 A:middle
So now when we release the card

00:11:38.176 --> 00:11:40.366 A:middle
snaps back.

00:11:40.896 --> 00:11:42.016 A:middle
So, of course, we'd like to

00:11:42.016 --> 00:11:43.196 A:middle
animate that snapping back, so

00:11:43.256 --> 00:11:43.946 A:middle
let's just do that.

00:11:47.196 --> 00:11:49.206 A:middle
So we have the same reset to

00:11:49.206 --> 00:11:50.286 A:middle
identity code.

00:11:51.126 --> 00:11:53.766 A:middle
And I'm using the UIView animate

00:11:54.216 --> 00:11:56.806 A:middle
variant with the spring options.

00:11:56.996 --> 00:11:57.936 A:middle
So this will give us a different

00:11:57.936 --> 00:11:58.086 A:middle
effect.

00:11:58.796 --> 00:11:59.846 A:middle
So I'll build and run again.

00:12:05.436 --> 00:12:07.556 A:middle
So now, if I release the card,

00:12:08.436 --> 00:12:10.196 A:middle
it will bounce back to the

00:12:10.196 --> 00:12:11.246 A:middle
original position, and I kind of

00:12:11.246 --> 00:12:11.946 A:middle
like this playful behavior.

00:12:12.516 --> 00:12:16.176 A:middle
[ Applause ]

00:12:16.676 --> 00:12:18.786 A:middle
Thanks. Yeah, I think people are

00:12:18.786 --> 00:12:19.436 A:middle
going to show their friends

00:12:19.436 --> 00:12:19.596 A:middle
this.

00:12:19.656 --> 00:12:22.676 A:middle
So I think we're in a good spot.

00:12:22.676 --> 00:12:22.916 A:middle
All right.

00:12:30.666 --> 00:12:32.916 A:middle
So we just saw that the view

00:12:32.916 --> 00:12:34.546 A:middle
position is a combination of

00:12:34.546 --> 00:12:35.736 A:middle
multiple properties.

00:12:35.736 --> 00:12:37.256 A:middle
Not only the frame, which is

00:12:37.256 --> 00:12:38.226 A:middle
derived from the constraints,

00:12:38.266 --> 00:12:40.286 A:middle
but we can also use the

00:12:40.286 --> 00:12:41.666 A:middle
transform to affect where the

00:12:41.666 --> 00:12:42.636 A:middle
view is onscreen.

00:12:42.636 --> 00:12:45.316 A:middle
And that was just a couple lines

00:12:45.316 --> 00:12:46.586 A:middle
of code to add this fun

00:12:46.586 --> 00:12:47.266 A:middle
interaction.

00:12:47.266 --> 00:12:49.706 A:middle
So I hope that you guys will

00:12:49.706 --> 00:12:50.576 A:middle
play around with that in your

00:12:50.576 --> 00:12:52.906 A:middle
own apps, because it's a lot of

00:12:53.836 --> 00:12:53.956 A:middle
fun.

00:12:54.066 --> 00:12:55.206 A:middle
So transform is great for

00:12:55.206 --> 00:12:56.516 A:middle
temporary changes, like we saw.

00:12:56.516 --> 00:12:58.446 A:middle
Like tracking a touch or an

00:12:58.446 --> 00:13:00.076 A:middle
animation between states in your

00:12:58.446 --> 00:13:00.076 A:middle
animation between states in your

00:13:00.076 --> 00:13:00.426 A:middle
interface.

00:13:01.326 --> 00:13:02.726 A:middle
And then we reset back to the

00:13:02.726 --> 00:13:04.426 A:middle
identity transform when we're

00:13:04.426 --> 00:13:04.576 A:middle
done.

00:13:06.606 --> 00:13:08.406 A:middle
So now that we have our app

00:13:09.126 --> 00:13:11.296 A:middle
acting playfully, let's talk

00:13:11.296 --> 00:13:13.036 A:middle
about making the text look

00:13:13.036 --> 00:13:13.256 A:middle
great.

00:13:14.116 --> 00:13:15.256 A:middle
To do that, we'll support

00:13:15.256 --> 00:13:15.886 A:middle
dynamic type.

00:13:18.206 --> 00:13:19.786 A:middle
Dynamic type is a technology on

00:13:19.926 --> 00:13:22.256 A:middle
iOS that provides both a set of

00:13:22.896 --> 00:13:23.936 A:middle
text styles.

00:13:23.936 --> 00:13:25.396 A:middle
For example, headline, body,

00:13:25.396 --> 00:13:25.906 A:middle
caption.

00:13:26.586 --> 00:13:28.526 A:middle
And user control over the size

00:13:28.526 --> 00:13:29.446 A:middle
of those styles.

00:13:29.936 --> 00:13:34.006 A:middle
Here's a few example apps, and

00:13:34.006 --> 00:13:35.666 A:middle
this is with a default text size

00:13:35.826 --> 00:13:36.000 A:middle
set.

00:13:37.046 --> 00:13:38.286 A:middle
Now, if the user preferred a

00:13:38.286 --> 00:13:39.836 A:middle
larger text size, for example,

00:13:40.586 --> 00:13:42.296 A:middle
we'd see messages adjust.

00:13:42.296 --> 00:13:43.756 A:middle
So the text increases, and then

00:13:43.756 --> 00:13:45.546 A:middle
all the graphic around -- the

00:13:45.546 --> 00:13:46.896 A:middle
bubbles around the messages

00:13:46.896 --> 00:13:47.456 A:middle
increase.

00:13:47.536 --> 00:13:49.386 A:middle
Also the input field gets

00:13:49.386 --> 00:13:49.696 A:middle
larger.

00:13:51.326 --> 00:13:54.186 A:middle
Similarly, with calendar, an

00:13:54.186 --> 00:13:54.606 A:middle
event layer.

00:13:55.376 --> 00:13:57.986 A:middle
And our app looks like this.

00:13:59.266 --> 00:14:00.016 A:middle
Yeah, nothing changed.

00:13:59.266 --> 00:14:00.016 A:middle
Yeah, nothing changed.

00:14:00.936 --> 00:14:02.856 A:middle
Or, depending on how we created

00:14:02.856 --> 00:14:04.406 A:middle
our app, it might look like

00:14:04.406 --> 00:14:04.916 A:middle
this.

00:14:05.166 --> 00:14:07.336 A:middle
Where some text increases but

00:14:07.336 --> 00:14:09.916 A:middle
our layout is not right, and its

00:14:10.006 --> 00:14:10.486 A:middle
unreadable.

00:14:13.586 --> 00:14:14.646 A:middle
Fortunately, Interface Builder

00:14:14.646 --> 00:14:16.646 A:middle
makes it easy to fix this up for

00:14:16.646 --> 00:14:16.876 A:middle
us.

00:14:17.046 --> 00:14:18.586 A:middle
So let's take a look at how to

00:14:18.586 --> 00:14:18.976 A:middle
do that right now.

00:14:25.056 --> 00:14:26.316 A:middle
All right.

00:14:26.756 --> 00:14:28.706 A:middle
Back to our app, and let's take

00:14:28.706 --> 00:14:30.116 A:middle
a look at making these two

00:14:30.116 --> 00:14:32.786 A:middle
labels respect the system font

00:14:32.786 --> 00:14:33.006 A:middle
size.

00:14:33.006 --> 00:14:35.186 A:middle
Some I'm going to select this

00:14:35.186 --> 00:14:35.966 A:middle
lower label here.

00:14:37.376 --> 00:14:38.946 A:middle
And over in the inspector, I'll

00:14:38.946 --> 00:14:40.756 A:middle
check the automatically adjust

00:14:40.756 --> 00:14:42.166 A:middle
font checkbox.

00:14:42.786 --> 00:14:45.626 A:middle
Now, if you've got a keen eye,

00:14:45.626 --> 00:14:46.666 A:middle
you'll notice as soon as I did

00:14:46.666 --> 00:14:48.046 A:middle
that, I had this little warning

00:14:48.046 --> 00:14:48.826 A:middle
icon pop up.

00:14:49.166 --> 00:14:50.686 A:middle
And this reminds us that for

00:14:50.686 --> 00:14:53.056 A:middle
this property to take effect, we

00:14:53.056 --> 00:14:55.436 A:middle
need to specify a text style for

00:14:55.436 --> 00:14:55.816 A:middle
the label.

00:14:57.876 --> 00:14:59.976 A:middle
So right now the font for this

00:14:59.976 --> 00:15:02.046 A:middle
label is a fixed value of system

00:14:59.976 --> 00:15:02.046 A:middle
label is a fixed value of system

00:15:02.046 --> 00:15:02.326 A:middle
12.

00:15:02.586 --> 00:15:03.896 A:middle
And I'll change it to a text

00:15:03.896 --> 00:15:06.536 A:middle
style by opening the inspector

00:15:06.876 --> 00:15:08.336 A:middle
and selecting an appropriate

00:15:08.336 --> 00:15:08.796 A:middle
style.

00:15:08.796 --> 00:15:09.676 A:middle
In this case, I'll choose

00:15:09.676 --> 00:15:10.366 A:middle
caption one.

00:15:10.886 --> 00:15:14.746 A:middle
So this happened to correspond

00:15:14.746 --> 00:15:16.346 A:middle
to system 12 at the default text

00:15:16.346 --> 00:15:17.416 A:middle
style, so our canvas looks the

00:15:17.416 --> 00:15:17.706 A:middle
same.

00:15:19.496 --> 00:15:22.316 A:middle
I'll do the same with the upper

00:15:22.316 --> 00:15:22.786 A:middle
label.

00:15:22.856 --> 00:15:24.116 A:middle
This already had a text style

00:15:24.116 --> 00:15:24.396 A:middle
set.

00:15:24.996 --> 00:15:27.946 A:middle
And I'll build and run again.

00:15:36.906 --> 00:15:38.546 A:middle
Okay. So this comes up and it

00:15:38.546 --> 00:15:40.746 A:middle
looks the same because we

00:15:40.746 --> 00:15:41.736 A:middle
haven't changed the text size

00:15:41.736 --> 00:15:41.926 A:middle
yet.

00:15:42.446 --> 00:15:43.736 A:middle
Now we can change the text size

00:15:43.966 --> 00:15:46.706 A:middle
by using the settings app on the

00:15:46.706 --> 00:15:48.396 A:middle
simulator, but it's a little

00:15:48.396 --> 00:15:49.416 A:middle
cumbersome to switch back and

00:15:49.416 --> 00:15:51.666 A:middle
forth between settings and our

00:15:51.666 --> 00:15:51.876 A:middle
app.

00:15:51.876 --> 00:15:52.916 A:middle
So I want to show you another

00:15:52.916 --> 00:15:54.626 A:middle
way to do that.

00:15:54.626 --> 00:15:56.276 A:middle
If I jump back to Xcode, I can

00:15:56.276 --> 00:15:58.086 A:middle
use the application menu to open

00:15:58.086 --> 00:16:00.336 A:middle
develop a tool accessibility

00:15:58.086 --> 00:16:00.336 A:middle
develop a tool accessibility

00:16:00.336 --> 00:16:00.786 A:middle
inspector.

00:16:01.366 --> 00:16:04.356 A:middle
So, from here, I can choose to

00:16:04.356 --> 00:16:05.926 A:middle
target the simulator.

00:16:05.926 --> 00:16:09.946 A:middle
And on the settings tab I get

00:16:09.946 --> 00:16:10.946 A:middle
this font size slider.

00:16:11.536 --> 00:16:12.876 A:middle
So I'll pull up the simulator

00:16:12.876 --> 00:16:14.876 A:middle
side by side, and now I can

00:16:14.876 --> 00:16:16.356 A:middle
change this slider and see our

00:16:16.356 --> 00:16:17.706 A:middle
app react in real time.

00:16:17.706 --> 00:16:18.876 A:middle
This makes it a lot easier to

00:16:18.876 --> 00:16:20.736 A:middle
test dynamic type changes.

00:16:21.516 --> 00:16:25.796 A:middle
[ Applause ]

00:16:26.296 --> 00:16:27.516 A:middle
By the way, if I had an iPhone

00:16:27.586 --> 00:16:29.466 A:middle
plugged in or set up for

00:16:29.466 --> 00:16:30.546 A:middle
development here, I can also

00:16:30.826 --> 00:16:32.166 A:middle
choose to target that connected

00:16:32.166 --> 00:16:32.446 A:middle
phone.

00:16:33.086 --> 00:16:36.396 A:middle
So we see our app adjusting --

00:16:36.586 --> 00:16:38.246 A:middle
reacting to the font size, but

00:16:38.246 --> 00:16:40.546 A:middle
if it gets too large then our

00:16:40.546 --> 00:16:42.766 A:middle
labels are running into each

00:16:42.766 --> 00:16:43.696 A:middle
other and overlapping.

00:16:44.436 --> 00:16:45.876 A:middle
So let's go fix that.

00:16:50.296 --> 00:16:51.826 A:middle
So, in Interface Builder,

00:16:52.356 --> 00:16:53.816 A:middle
whoops, I'm going to jump back

00:16:53.816 --> 00:16:53.986 A:middle
here.

00:16:54.336 --> 00:16:57.016 A:middle
I want to get that out the way.

00:16:57.756 --> 00:16:59.596 A:middle
The text area, down here, the

00:16:59.596 --> 00:17:03.186 A:middle
size of that is defined by a

00:16:59.596 --> 00:17:03.186 A:middle
size of that is defined by a

00:17:03.236 --> 00:17:04.856 A:middle
fixed height constraint

00:17:05.126 --> 00:17:06.156 A:middle
[inaudible] constant over here.

00:17:07.646 --> 00:17:08.756 A:middle
Now, instead, we'd like this

00:17:08.915 --> 00:17:11.036 A:middle
size to vary depending on the

00:17:11.036 --> 00:17:12.646 A:middle
size of the labels within it.

00:17:13.296 --> 00:17:14.215 A:middle
So we have the bottom label

00:17:14.215 --> 00:17:15.236 A:middle
constrained to the bottom and

00:17:15.236 --> 00:17:16.366 A:middle
the top constrained to the top.

00:17:16.366 --> 00:17:18.556 A:middle
So, if we added a vertical

00:17:18.556 --> 00:17:19.746 A:middle
constraint between the two,

00:17:20.276 --> 00:17:21.286 A:middle
there'd be enough information to

00:17:21.366 --> 00:17:24.116 A:middle
size this area from the

00:17:24.116 --> 00:17:26.016 A:middle
constraints of the labels and

00:17:26.016 --> 00:17:26.736 A:middle
the size of the labels

00:17:26.736 --> 00:17:27.126 A:middle
themselves.

00:17:29.136 --> 00:17:29.896 A:middle
So let's do that.

00:17:29.896 --> 00:17:31.296 A:middle
I'll control drag from label to

00:17:31.296 --> 00:17:31.646 A:middle
another.

00:17:32.646 --> 00:17:33.956 A:middle
And I can choose to add a

00:17:34.036 --> 00:17:35.456 A:middle
vertical spacing constraint, so

00:17:35.456 --> 00:17:36.276 A:middle
this will keep the labels

00:17:36.276 --> 00:17:37.946 A:middle
separated by the same distance

00:17:37.946 --> 00:17:38.936 A:middle
they are in the canvas right

00:17:38.936 --> 00:17:39.116 A:middle
now.

00:17:39.936 --> 00:17:41.316 A:middle
I can choose to add a vertical

00:17:41.316 --> 00:17:43.006 A:middle
baseline standard spacing.

00:17:43.806 --> 00:17:45.696 A:middle
So this is similar to vertical

00:17:45.696 --> 00:17:48.536 A:middle
spacing except UIKit will adjust

00:17:48.536 --> 00:17:50.056 A:middle
the constant of this constraint,

00:17:50.056 --> 00:17:53.036 A:middle
depending on the text style and

00:17:53.036 --> 00:17:54.386 A:middle
the current font sizes of the

00:17:54.386 --> 00:17:55.286 A:middle
labels involved.

00:17:56.616 --> 00:17:57.356 A:middle
So I'll choose to add one of

00:17:57.356 --> 00:17:57.676 A:middle
those.

00:17:58.816 --> 00:18:00.886 A:middle
And now I can select and remove

00:17:58.816 --> 00:18:00.886 A:middle
And now I can select and remove

00:18:01.326 --> 00:18:03.106 A:middle
the fixed type constraint and

00:18:04.176 --> 00:18:04.976 A:middle
then build and run again.

00:18:14.216 --> 00:18:15.946 A:middle
So now things are looking a lot

00:18:15.946 --> 00:18:16.336 A:middle
better.

00:18:16.336 --> 00:18:18.076 A:middle
Our content area is adjusting

00:18:18.076 --> 00:18:19.936 A:middle
for larger sizes and also

00:18:19.936 --> 00:18:20.856 A:middle
shrinking down for smaller

00:18:20.856 --> 00:18:22.596 A:middle
sizes, if people want larger

00:18:22.816 --> 00:18:24.556 A:middle
information density on their

00:18:24.556 --> 00:18:24.886 A:middle
displays.

00:18:34.046 --> 00:18:37.366 A:middle
So, using two properties in the

00:18:37.366 --> 00:18:39.296 A:middle
label inspector, both the font

00:18:39.296 --> 00:18:40.456 A:middle
and the dynamic type property,

00:18:41.056 --> 00:18:43.426 A:middle
we can make our labels adjust

00:18:43.426 --> 00:18:44.926 A:middle
dynamically as the font size

00:18:44.926 --> 00:18:45.436 A:middle
changes.

00:18:45.746 --> 00:18:47.286 A:middle
And we saw using accessibility

00:18:47.286 --> 00:18:49.626 A:middle
inspector to test different

00:18:49.626 --> 00:18:49.966 A:middle
sizes.

00:18:51.046 --> 00:18:52.826 A:middle
There's a talk later this

00:18:52.826 --> 00:18:54.166 A:middle
afternoon, Building Apps With

00:18:54.166 --> 00:18:55.336 A:middle
Dynamic Type, with a lot more

00:18:55.336 --> 00:18:58.666 A:middle
information, and after this

00:18:58.666 --> 00:18:59.796 A:middle
session, if you want to try out

00:18:59.796 --> 00:19:01.616 A:middle
how your own apps looks, if you

00:18:59.796 --> 00:19:01.616 A:middle
how your own apps looks, if you

00:19:01.616 --> 00:19:03.806 A:middle
change the font size, you can

00:19:03.806 --> 00:19:05.356 A:middle
also get to the setting directly

00:19:05.426 --> 00:19:07.126 A:middle
on your phone.

00:19:07.366 --> 00:19:08.506 A:middle
If you go through accessibility,

00:19:08.506 --> 00:19:10.156 A:middle
you get the larger accessibility

00:19:10.156 --> 00:19:12.646 A:middle
sizes' option, which gives a

00:19:12.646 --> 00:19:14.266 A:middle
large range of values for the

00:19:14.266 --> 00:19:15.636 A:middle
type to vary on.

00:19:15.756 --> 00:19:19.806 A:middle
So check that out.

00:19:20.066 --> 00:19:22.266 A:middle
Now it's time to add some more

00:19:22.266 --> 00:19:25.466 A:middle
views to our app.

00:19:25.736 --> 00:19:27.946 A:middle
And I'd like to bring up Jason

00:19:28.016 --> 00:19:29.906 A:middle
to introduce you to this safe

00:19:29.906 --> 00:19:30.226 A:middle
area.

00:19:30.826 --> 00:19:30.976 A:middle
Jason.

00:19:31.516 --> 00:19:37.806 A:middle
[ Applause ]

00:19:38.306 --> 00:19:39.016 A:middle
&gt;&gt; Hello, everyone.

00:19:40.296 --> 00:19:41.336 A:middle
My name's Jason Yao.

00:19:41.336 --> 00:19:42.226 A:middle
I'm an Interface Builder

00:19:42.226 --> 00:19:43.526 A:middle
engineer, and it's a pleasure to

00:19:43.526 --> 00:19:44.586 A:middle
be with you here today.

00:19:45.076 --> 00:19:46.106 A:middle
We're going to continue on with

00:19:46.106 --> 00:19:47.116 A:middle
our dating app journey and talk

00:19:47.116 --> 00:19:48.826 A:middle
about three more techniques.

00:19:49.896 --> 00:19:51.446 A:middle
And so, the first thing I want

00:19:51.446 --> 00:19:52.696 A:middle
to talk to you about is what do

00:19:52.696 --> 00:19:55.616 A:middle
you do when you got a view

00:19:55.616 --> 00:19:56.636 A:middle
controller and you've got a

00:19:56.636 --> 00:19:58.806 A:middle
navigation bar and a tab bar and

00:19:58.806 --> 00:20:01.586 A:middle
you want to make sure your views

00:19:58.806 --> 00:20:01.586 A:middle
you want to make sure your views

00:20:01.586 --> 00:20:02.876 A:middle
are positioned so that they're

00:20:02.876 --> 00:20:04.306 A:middle
not covered up by those bars?

00:20:05.346 --> 00:20:06.876 A:middle
As you may have heard, there's a

00:20:06.916 --> 00:20:09.166 A:middle
new layout guide on iOS 11

00:20:09.166 --> 00:20:10.376 A:middle
called the Safe Area Layout

00:20:10.376 --> 00:20:10.576 A:middle
Guide.

00:20:10.576 --> 00:20:12.756 A:middle
It is a new property on UIView.

00:20:13.316 --> 00:20:16.886 A:middle
It works with Auto Layout and

00:20:16.886 --> 00:20:19.166 A:middle
what it is is a rectangle that

00:20:19.166 --> 00:20:20.956 A:middle
is around the bars and container

00:20:20.956 --> 00:20:22.526 A:middle
edges and then you can constrain

00:20:22.526 --> 00:20:24.006 A:middle
your views as you expect.

00:20:24.476 --> 00:20:27.676 A:middle
If you had to do this thing in

00:20:27.676 --> 00:20:30.046 A:middle
the past, you may remember the

00:20:30.046 --> 00:20:31.286 A:middle
Top and Bottom Layer Guide on

00:20:31.286 --> 00:20:32.296 A:middle
UIViewController.

00:20:32.666 --> 00:20:34.016 A:middle
Those are deprecated in favor of

00:20:34.016 --> 00:20:35.166 A:middle
this new safe area.

00:20:35.616 --> 00:20:36.706 A:middle
The Safe Area Layout Guide is

00:20:36.706 --> 00:20:37.696 A:middle
easier to use.

00:20:37.776 --> 00:20:39.646 A:middle
It's more expressive and allows

00:20:39.646 --> 00:20:41.516 A:middle
you to do a few new things, like

00:20:41.516 --> 00:20:43.056 A:middle
be able to center vertically

00:20:43.056 --> 00:20:43.786 A:middle
between your bars.

00:20:43.786 --> 00:20:46.256 A:middle
And that way as the [inaudible]

00:20:46.256 --> 00:20:48.176 A:middle
and the size of your height

00:20:48.356 --> 00:20:50.026 A:middle
changes, say if you rotate in

00:20:50.026 --> 00:20:51.666 A:middle
landscape, your layout will

00:20:51.666 --> 00:20:52.306 A:middle
adjust accordingly.

00:20:53.696 --> 00:20:55.306 A:middle
The Safe Area Layout Guide is

00:20:55.306 --> 00:20:57.736 A:middle
also something that can apply to

00:20:57.736 --> 00:20:57.956 A:middle
tvOS.

00:20:59.226 --> 00:21:00.606 A:middle
When you target your app and

00:20:59.226 --> 00:21:00.606 A:middle
When you target your app and

00:21:00.606 --> 00:21:01.396 A:middle
your content for tvOS, you're

00:21:01.396 --> 00:21:04.136 A:middle
going to want to fill the big

00:21:04.136 --> 00:21:04.786 A:middle
screen.

00:21:05.036 --> 00:21:06.136 A:middle
The thing you have to consider

00:21:06.796 --> 00:21:07.916 A:middle
is that you're going to be on a

00:21:07.916 --> 00:21:09.096 A:middle
wide variety of displays from

00:21:09.096 --> 00:21:11.366 A:middle
small ones to big ones, flat

00:21:11.366 --> 00:21:13.246 A:middle
screens to projectors, and you

00:21:13.826 --> 00:21:15.336 A:middle
need to worry, in video terms,

00:21:15.336 --> 00:21:16.596 A:middle
of something called the overscan

00:21:16.596 --> 00:21:16.886 A:middle
region.

00:21:18.276 --> 00:21:20.046 A:middle
On some displays, my title here

00:21:20.046 --> 00:21:22.086 A:middle
can be cut off because it's too

00:21:22.536 --> 00:21:23.346 A:middle
close to the top.

00:21:23.346 --> 00:21:24.366 A:middle
And so you want to adjust your

00:21:24.366 --> 00:21:26.176 A:middle
content so that it's within the

00:21:26.176 --> 00:21:26.686 A:middle
safe area.

00:21:26.686 --> 00:21:28.336 A:middle
And the Safe Area Layout Guide

00:21:28.336 --> 00:21:29.406 A:middle
is going to represent this

00:21:29.406 --> 00:21:33.056 A:middle
region in iOS 11 for your tvOS

00:21:33.056 --> 00:21:33.686 A:middle
storyboards.

00:21:34.116 --> 00:21:37.556 A:middle
Just constrain your views to the

00:21:37.556 --> 00:21:39.496 A:middle
content and set it into the safe

00:21:39.496 --> 00:21:41.306 A:middle
area and then fill the rest of

00:21:41.306 --> 00:21:42.716 A:middle
your view with the beautiful

00:21:42.716 --> 00:21:44.306 A:middle
background imagery for your

00:21:44.306 --> 00:21:44.676 A:middle
users.

00:21:45.936 --> 00:21:47.806 A:middle
It's really easy to enable Safe

00:21:47.806 --> 00:21:50.056 A:middle
Area Layout Guide in iOS 11 and

00:21:50.056 --> 00:21:50.616 A:middle
Interface Builder.

00:21:51.426 --> 00:21:52.576 A:middle
You can go into your storyboard,

00:21:52.576 --> 00:21:55.516 A:middle
go to the file inspector, find

00:21:55.516 --> 00:21:57.116 A:middle
that box that says use Safe Area

00:21:57.116 --> 00:21:58.156 A:middle
Layout Guides and check it.

00:21:58.986 --> 00:22:00.636 A:middle
What's going to happen is that

00:21:58.986 --> 00:22:00.636 A:middle
What's going to happen is that

00:22:00.636 --> 00:22:01.816 A:middle
the top level view of each of

00:22:01.816 --> 00:22:03.316 A:middle
your scenes is going to have the

00:22:03.316 --> 00:22:04.516 A:middle
new Safe Area Layout Guide, and

00:22:04.636 --> 00:22:06.196 A:middle
then you constrain to it just

00:22:06.196 --> 00:22:07.286 A:middle
like you would to other things

00:22:07.286 --> 00:22:07.976 A:middle
inside the canvas.

00:22:13.076 --> 00:22:14.626 A:middle
The Safe Area Layout Guide is a

00:22:14.626 --> 00:22:16.266 A:middle
new property on UIView for

00:22:16.266 --> 00:22:18.186 A:middle
keeping your content unobscured

00:22:18.186 --> 00:22:20.966 A:middle
and title safe, and, if you use

00:22:20.966 --> 00:22:24.446 A:middle
it on iOS 11 with -- for iOS

00:22:24.446 --> 00:22:27.126 A:middle
storyboards, will automatically

00:22:27.126 --> 00:22:28.336 A:middle
upgrade your constraints for you

00:22:28.336 --> 00:22:31.196 A:middle
when you check that box.

00:22:31.376 --> 00:22:33.906 A:middle
Thank you [applause] and that is

00:22:33.936 --> 00:22:35.516 A:middle
because the geometry between the

00:22:35.516 --> 00:22:36.986 A:middle
old Top and Bottom Layout Guides

00:22:37.426 --> 00:22:40.216 A:middle
will match the new Safe Area

00:22:40.216 --> 00:22:40.656 A:middle
Layout Guide.

00:22:40.656 --> 00:22:42.376 A:middle
And best of all, that also means

00:22:42.376 --> 00:22:43.316 A:middle
when you use Safe Area Layout

00:22:43.316 --> 00:22:46.276 A:middle
Guides on storyboards in Xcode 9

00:22:47.026 --> 00:22:47.876 A:middle
we'll make it sure it's

00:22:47.876 --> 00:22:49.116 A:middle
backwards deployable to previous

00:22:49.116 --> 00:22:49.476 A:middle
iOSs.

00:22:50.516 --> 00:22:53.500 A:middle
[ Applause ]

00:22:56.346 --> 00:22:57.446 A:middle
Now I want to talk about a

00:22:57.446 --> 00:22:58.916 A:middle
layout technique for being able

00:22:58.916 --> 00:23:00.346 A:middle
to position yourself relative to

00:22:58.916 --> 00:23:00.346 A:middle
to position yourself relative to

00:23:00.346 --> 00:23:00.966 A:middle
your superview.

00:23:02.386 --> 00:23:03.466 A:middle
This is called proportional

00:23:03.466 --> 00:23:03.946 A:middle
positioning.

00:23:04.266 --> 00:23:05.866 A:middle
And the idea is say if I have a

00:23:05.866 --> 00:23:07.476 A:middle
dates' card in my dating app and

00:23:07.476 --> 00:23:08.906 A:middle
I want to be able to position it

00:23:08.906 --> 00:23:10.316 A:middle
about 70% down from the

00:23:10.316 --> 00:23:10.826 A:middle
superview.

00:23:11.446 --> 00:23:12.196 A:middle
How do I do this?

00:23:12.766 --> 00:23:13.516 A:middle
There are a few techniques

00:23:13.516 --> 00:23:14.046 A:middle
available.

00:23:14.096 --> 00:23:15.726 A:middle
The one I want to show you today

00:23:15.726 --> 00:23:17.006 A:middle
is the idea of using a spacer

00:23:17.006 --> 00:23:17.216 A:middle
view.

00:23:18.316 --> 00:23:20.096 A:middle
Dragging out a view, just a

00:23:20.096 --> 00:23:21.346 A:middle
normal UIView from the object

00:23:21.346 --> 00:23:21.786 A:middle
library.

00:23:21.996 --> 00:23:23.276 A:middle
Constraining it but not

00:23:23.276 --> 00:23:23.966 A:middle
rendering it.

00:23:24.556 --> 00:23:26.516 A:middle
And allowing it to be the

00:23:26.576 --> 00:23:28.326 A:middle
scaffolding for positioning your

00:23:28.326 --> 00:23:29.016 A:middle
view in place.

00:23:29.436 --> 00:23:31.166 A:middle
And this technique also applies

00:23:32.076 --> 00:23:33.516 A:middle
to other type of layouts that

00:23:33.516 --> 00:23:34.406 A:middle
are used in proportion.

00:23:34.606 --> 00:23:36.096 A:middle
Here's another example, where

00:23:36.096 --> 00:23:37.186 A:middle
I've got a landscape view, with

00:23:37.186 --> 00:23:39.836 A:middle
a 1/5, 2/5, and 2/5 proportion.

00:23:40.126 --> 00:23:41.466 A:middle
And then they're centered along

00:23:42.076 --> 00:23:42.736 A:middle
those proportions.

00:23:43.286 --> 00:23:44.146 A:middle
So let's go ahead and take a

00:23:44.146 --> 00:23:45.296 A:middle
look at how to do this inside of

00:23:45.296 --> 00:23:45.806 A:middle
Interface Builder.

00:23:57.956 --> 00:23:59.816 A:middle
So I've got a basic layout

00:23:59.816 --> 00:24:00.516 A:middle
already here.

00:23:59.816 --> 00:24:00.516 A:middle
already here.

00:24:00.516 --> 00:24:01.826 A:middle
And, in this case here, I want

00:24:01.826 --> 00:24:03.406 A:middle
to be able to position my date

00:24:03.406 --> 00:24:03.706 A:middle
card.

00:24:04.166 --> 00:24:06.576 A:middle
And it's being pushed in by a

00:24:06.576 --> 00:24:08.046 A:middle
form sheet with the modal segue.

00:24:08.516 --> 00:24:09.486 A:middle
So we're going to zoom in a

00:24:09.486 --> 00:24:11.076 A:middle
little closer over here, and

00:24:11.076 --> 00:24:11.966 A:middle
I've got two elements that

00:24:11.966 --> 00:24:12.916 A:middle
already have some initial

00:24:12.916 --> 00:24:13.456 A:middle
constraints.

00:24:13.456 --> 00:24:15.706 A:middle
I've got a label and I've got an

00:24:15.706 --> 00:24:16.056 A:middle
image.

00:24:16.166 --> 00:24:17.536 A:middle
And if we select them both, if

00:24:17.536 --> 00:24:19.096 A:middle
you look really carefully,

00:24:19.386 --> 00:24:20.916 A:middle
you'll notice that it's blue on

00:24:20.916 --> 00:24:22.066 A:middle
the left and right edges but the

00:24:22.066 --> 00:24:23.326 A:middle
top and bottom are red.

00:24:23.986 --> 00:24:24.826 A:middle
That means there's some work

00:24:24.826 --> 00:24:25.436 A:middle
that we need to do.

00:24:26.026 --> 00:24:27.046 A:middle
Whenever you see red in the

00:24:27.046 --> 00:24:28.296 A:middle
Interface Builder canvas, it can

00:24:28.296 --> 00:24:29.316 A:middle
be one or two things.

00:24:29.496 --> 00:24:30.386 A:middle
Either you have too few

00:24:30.386 --> 00:24:31.166 A:middle
constraints and you're

00:24:31.166 --> 00:24:32.646 A:middle
ambiguous, or you have too many

00:24:32.646 --> 00:24:33.286 A:middle
constraints and you're

00:24:33.286 --> 00:24:33.746 A:middle
conflicting.

00:24:34.306 --> 00:24:35.706 A:middle
I just set this up so I know I

00:24:35.706 --> 00:24:36.736 A:middle
haven't positioned myself

00:24:36.736 --> 00:24:38.196 A:middle
vertically in the superview.

00:24:39.206 --> 00:24:40.206 A:middle
So let's go ahead and do that.

00:24:40.206 --> 00:24:41.846 A:middle
And we'll do it by creating the

00:24:41.846 --> 00:24:42.366 A:middle
spacer view.

00:24:42.596 --> 00:24:44.726 A:middle
So I'm going to type UIView in

00:24:44.726 --> 00:24:45.726 A:middle
the object library.

00:24:46.036 --> 00:24:47.666 A:middle
Just drag out the view and

00:24:47.666 --> 00:24:47.976 A:middle
position it.

00:24:51.196 --> 00:24:53.586 A:middle
We'll give it just roughly the

00:24:53.586 --> 00:24:55.136 A:middle
place that I want to see it in

00:24:55.816 --> 00:24:57.216 A:middle
the canvas.

00:24:57.216 --> 00:24:58.586 A:middle
Next, let's do a few setup

00:24:58.586 --> 00:24:58.896 A:middle
things.

00:24:59.116 --> 00:25:00.066 A:middle
First I'm going to mark it as

00:24:59.116 --> 00:25:00.066 A:middle
First I'm going to mark it as

00:25:00.066 --> 00:25:00.326 A:middle
hidden.

00:25:00.326 --> 00:25:01.536 A:middle
This is going to [inaudible] a

00:25:01.536 --> 00:25:03.666 A:middle
layout in runtime but we don't

00:25:03.666 --> 00:25:04.356 A:middle
want [inaudible] and that way

00:25:04.356 --> 00:25:05.356 A:middle
you don't incur the cost of

00:25:05.356 --> 00:25:05.616 A:middle
drawing.

00:25:06.366 --> 00:25:07.386 A:middle
The other thing I want to do to

00:25:07.386 --> 00:25:09.186 A:middle
recognize it is, in the object

00:25:09.186 --> 00:25:11.106 A:middle
library, rename it to spacer

00:25:12.116 --> 00:25:12.796 A:middle
70%.

00:25:13.386 --> 00:25:15.866 A:middle
Now we need to add constraints.

00:25:17.106 --> 00:25:18.146 A:middle
So I'm going to click on the pin

00:25:18.146 --> 00:25:18.616 A:middle
menu.

00:25:19.266 --> 00:25:20.396 A:middle
We're going to add a top

00:25:20.396 --> 00:25:22.646 A:middle
constraint, a leading

00:25:22.646 --> 00:25:25.316 A:middle
constraint, and then maybe give

00:25:25.316 --> 00:25:27.126 A:middle
it a width so I can do

00:25:27.126 --> 00:25:28.906 A:middle
constraint connections to it.

00:25:29.936 --> 00:25:32.006 A:middle
Add that. And you can see that

00:25:32.006 --> 00:25:33.606 A:middle
it's already moved horizontally.

00:25:33.606 --> 00:25:34.756 A:middle
But we still have the top and

00:25:34.756 --> 00:25:36.536 A:middle
bottom edges that are still red,

00:25:36.536 --> 00:25:37.416 A:middle
and that's because we haven't

00:25:37.416 --> 00:25:38.426 A:middle
specified a height yet.

00:25:38.806 --> 00:25:39.946 A:middle
We want to make this proportion

00:25:39.946 --> 00:25:40.886 A:middle
of the superview, so let's go

00:25:40.886 --> 00:25:41.576 A:middle
ahead and do that.

00:25:41.926 --> 00:25:43.256 A:middle
I'm going to add a equal height

00:25:43.256 --> 00:25:45.216 A:middle
constraint by dragging out from

00:25:45.216 --> 00:25:48.446 A:middle
the spacer to the superview and

00:25:48.446 --> 00:25:50.066 A:middle
choosing equal heights.

00:25:50.776 --> 00:25:53.126 A:middle
Now it's using equal heights to

00:25:53.126 --> 00:25:54.966 A:middle
my superview, but I realize I've

00:25:54.966 --> 00:25:56.526 A:middle
got a navigation bar up there.

00:25:57.136 --> 00:25:59.856 A:middle
And I actually wanted equal

00:25:59.856 --> 00:26:01.646 A:middle
heights to -- well, actually,

00:25:59.856 --> 00:26:01.646 A:middle
heights to -- well, actually,

00:26:01.646 --> 00:26:02.366 A:middle
let's go ahead and set the

00:26:02.366 --> 00:26:02.946 A:middle
proportion.

00:26:03.946 --> 00:26:08.126 A:middle
And the thing is I'm still

00:26:08.126 --> 00:26:09.176 A:middle
relative to my superview, and I

00:26:09.176 --> 00:26:10.936 A:middle
want to be relative to my safe

00:26:10.936 --> 00:26:11.326 A:middle
area.

00:26:11.386 --> 00:26:13.576 A:middle
And so normally you'd have to

00:26:13.576 --> 00:26:14.796 A:middle
rebuild the constraint to do

00:26:14.796 --> 00:26:15.006 A:middle
this.

00:26:15.006 --> 00:26:16.136 A:middle
But I want to show you something

00:26:16.136 --> 00:26:16.346 A:middle
new.

00:26:16.346 --> 00:26:18.026 A:middle
If you go up into the attribute

00:26:18.026 --> 00:26:19.326 A:middle
inspector, which is a really

00:26:19.326 --> 00:26:21.036 A:middle
powerful thing, and you click on

00:26:21.036 --> 00:26:22.786 A:middle
the item, we list now the

00:26:22.786 --> 00:26:24.616 A:middle
neighbors that you can retarget

00:26:24.616 --> 00:26:25.926 A:middle
your constraint items --

00:26:26.516 --> 00:26:31.506 A:middle
[ Applause ]

00:26:32.006 --> 00:26:33.586 A:middle
And so if I hit safe area, you

00:26:33.586 --> 00:26:35.696 A:middle
can see it's now 70% to my safe

00:26:35.696 --> 00:26:35.896 A:middle
area.

00:26:36.806 --> 00:26:37.896 A:middle
Now let's go ahead and align our

00:26:37.896 --> 00:26:38.356 A:middle
content.

00:26:38.786 --> 00:26:39.946 A:middle
And so I'm going to take my

00:26:39.946 --> 00:26:41.746 A:middle
dates' label, drag it over --

00:26:41.746 --> 00:26:43.856 A:middle
create a connection using

00:26:43.856 --> 00:26:46.896 A:middle
control drag and align it to the

00:26:46.896 --> 00:26:47.326 A:middle
bottom.

00:26:48.516 --> 00:26:50.096 A:middle
Now I wanted [inaudible] nicely

00:26:50.096 --> 00:26:51.916 A:middle
along the baseline and so again,

00:26:52.086 --> 00:26:53.746 A:middle
all I need to do is click on the

00:26:53.746 --> 00:26:54.746 A:middle
constraint I just added.

00:26:55.066 --> 00:26:56.426 A:middle
Go to the attributes inspector.

00:26:57.226 --> 00:26:59.636 A:middle
And go ahead and set this to the

00:26:59.636 --> 00:27:00.246 A:middle
other attribute.

00:26:59.636 --> 00:27:00.246 A:middle
other attribute.

00:27:00.246 --> 00:27:01.456 A:middle
The really neat thing about Auto

00:27:01.456 --> 00:27:02.506 A:middle
Layout is you don't have to do

00:27:02.506 --> 00:27:03.416 A:middle
just bottom to bottom.

00:27:03.606 --> 00:27:04.596 A:middle
You can do something like bottom

00:27:04.596 --> 00:27:05.066 A:middle
to top.

00:27:05.306 --> 00:27:06.566 A:middle
Or, in this case, since I have a

00:27:06.566 --> 00:27:07.536 A:middle
single line label, I'll do

00:27:07.536 --> 00:27:09.606 A:middle
bottom to first baseline and

00:27:09.606 --> 00:27:12.796 A:middle
that way, now we're 70% sitting

00:27:12.796 --> 00:27:13.796 A:middle
right along the baseline.

00:27:14.126 --> 00:27:15.056 A:middle
Let's test it out in a few

00:27:15.056 --> 00:27:15.836 A:middle
configurations.

00:27:15.836 --> 00:27:18.596 A:middle
So iPhone seven plus portrait

00:27:19.696 --> 00:27:21.066 A:middle
using the device bar.

00:27:21.426 --> 00:27:22.846 A:middle
And let's take a look in

00:27:22.846 --> 00:27:25.306 A:middle
landscape and we're 70% there.

00:27:25.306 --> 00:27:25.976 A:middle
And so this is what I want.

00:27:34.816 --> 00:27:35.726 A:middle
So when you need to do this

00:27:35.726 --> 00:27:38.106 A:middle
proportional technique in

00:27:38.106 --> 00:27:40.926 A:middle
Interface Builder, use spacer

00:27:40.926 --> 00:27:43.156 A:middle
views to be able to get you

00:27:43.156 --> 00:27:43.376 A:middle
there.

00:27:43.776 --> 00:27:46.296 A:middle
And you be sure to mark those

00:27:46.296 --> 00:27:48.156 A:middle
views as hidden so that they're

00:27:48.156 --> 00:27:50.186 A:middle
not [inaudible] rendering but

00:27:50.186 --> 00:27:53.036 A:middle
are assisting you at layout to

00:27:53.036 --> 00:27:53.956 A:middle
be able to position your

00:27:53.956 --> 00:27:54.376 A:middle
content.

00:27:55.346 --> 00:27:56.646 A:middle
And if you're doing your layout

00:27:56.646 --> 00:27:59.436 A:middle
programmatically, the thing you

00:27:59.436 --> 00:28:01.586 A:middle
can use is the UILayout Guide.

00:27:59.436 --> 00:28:01.586 A:middle
can use is the UILayout Guide.

00:28:01.586 --> 00:28:03.506 A:middle
And so programmatically, you can

00:28:03.686 --> 00:28:05.406 A:middle
use this as the equivalent to

00:28:05.406 --> 00:28:06.746 A:middle
the spacer views.

00:28:07.316 --> 00:28:10.196 A:middle
Next. Let's go ahead and talk

00:28:10.196 --> 00:28:11.556 A:middle
about another type of view that

00:28:11.556 --> 00:28:12.106 A:middle
we want to layout.

00:28:12.396 --> 00:28:13.386 A:middle
In this case, we're going to

00:28:13.386 --> 00:28:14.926 A:middle
show you an example of adaptive

00:28:14.926 --> 00:28:16.416 A:middle
layout in our dating app, where

00:28:16.416 --> 00:28:19.106 A:middle
we've got this view of a 4 x 4

00:28:19.106 --> 00:28:20.856 A:middle
grid giving me a selection, and

00:28:20.856 --> 00:28:21.766 A:middle
then it's got a label at the

00:28:21.766 --> 00:28:22.056 A:middle
bottom.

00:28:23.316 --> 00:28:24.816 A:middle
But when I rotate my phone, it's

00:28:24.816 --> 00:28:26.506 A:middle
actually going to give me

00:28:26.506 --> 00:28:27.296 A:middle
something a little different.

00:28:27.296 --> 00:28:28.026 A:middle
It's still going to give me the

00:28:28.026 --> 00:28:30.256 A:middle
4 x 4 grid of my dates, but it's

00:28:30.256 --> 00:28:31.516 A:middle
going to have a text view over

00:28:31.516 --> 00:28:31.996 A:middle
on the right.

00:28:32.976 --> 00:28:34.386 A:middle
So let's go ahead and see how we

00:28:34.386 --> 00:28:35.516 A:middle
could do adaptive layout using

00:28:35.516 --> 00:28:37.366 A:middle
stack views in Interface

00:28:37.406 --> 00:28:37.636 A:middle
Builder.

00:28:50.786 --> 00:28:52.446 A:middle
Okay. So I've got my dates

00:28:52.576 --> 00:28:55.176 A:middle
storyboard over here and pretty

00:28:55.176 --> 00:28:56.206 A:middle
much I've got this grid with an

00:28:56.206 --> 00:28:57.156 A:middle
initial layout set up.

00:28:57.156 --> 00:28:58.286 A:middle
I'm going to go ahead and first

00:28:58.286 --> 00:29:00.036 A:middle
expand the object outline.

00:28:58.286 --> 00:29:00.036 A:middle
expand the object outline.

00:29:00.036 --> 00:29:01.296 A:middle
I can hold down option and kind

00:29:01.296 --> 00:29:02.476 A:middle
of expand everything all at

00:29:02.476 --> 00:29:02.756 A:middle
once.

00:29:03.146 --> 00:29:04.646 A:middle
And [inaudible] give you a tour

00:29:04.716 --> 00:29:06.636 A:middle
of the setup.

00:29:06.806 --> 00:29:08.436 A:middle
We have a vertical stack view

00:29:08.656 --> 00:29:10.206 A:middle
and it's tied with four

00:29:10.206 --> 00:29:11.416 A:middle
constraints to the superview.

00:29:11.906 --> 00:29:14.596 A:middle
And then it's got three rows,

00:29:14.596 --> 00:29:15.086 A:middle
essentially.

00:29:15.416 --> 00:29:17.226 A:middle
The first row is a nested

00:29:17.226 --> 00:29:19.066 A:middle
horizontal stack view of the two

00:29:19.066 --> 00:29:19.536 A:middle
images.

00:29:20.356 --> 00:29:21.876 A:middle
Second row is also a nested

00:29:21.876 --> 00:29:23.826 A:middle
stack view of the two images.

00:29:24.136 --> 00:29:25.326 A:middle
And then the third row is a

00:29:25.326 --> 00:29:25.686 A:middle
label.

00:29:25.686 --> 00:29:27.146 A:middle
Now you can see that

00:29:27.146 --> 00:29:28.086 A:middle
everything's kind of equally

00:29:28.086 --> 00:29:29.956 A:middle
sized and that is because stack

00:29:29.956 --> 00:29:31.576 A:middle
view has these great properties

00:29:31.576 --> 00:29:32.796 A:middle
like alignment, distribution,

00:29:32.796 --> 00:29:33.466 A:middle
and spacing.

00:29:33.916 --> 00:29:35.326 A:middle
And there are a lot of options

00:29:35.326 --> 00:29:37.056 A:middle
for being able to configure your

00:29:37.056 --> 00:29:38.906 A:middle
layout using stack views and

00:29:38.906 --> 00:29:39.736 A:middle
nests of stack views.

00:29:40.546 --> 00:29:41.786 A:middle
The great part about stack view

00:29:41.786 --> 00:29:42.716 A:middle
is that it manages your

00:29:42.716 --> 00:29:44.426 A:middle
constraints for you so there are

00:29:44.426 --> 00:29:45.446 A:middle
very few constraints that you

00:29:45.446 --> 00:29:45.906 A:middle
have to add.

00:29:46.416 --> 00:29:47.246 A:middle
If you want to find out more

00:29:47.246 --> 00:29:50.496 A:middle
about the other, distribution

00:29:50.496 --> 00:29:52.066 A:middle
and alignments options, be sure

00:29:52.066 --> 00:29:53.376 A:middle
to check out the documentation.

00:29:53.756 --> 00:29:54.726 A:middle
Right now we're using fill

00:29:54.726 --> 00:29:55.456 A:middle
equally to make sure

00:29:55.456 --> 00:29:56.456 A:middle
everything's properly sized.

00:29:56.456 --> 00:29:57.776 A:middle
And let's go ahead and tune this

00:29:57.776 --> 00:29:58.666 A:middle
closer to what I want.

00:29:59.816 --> 00:30:01.356 A:middle
Okay. So let's first adjust for

00:29:59.816 --> 00:30:01.356 A:middle
Okay. So let's first adjust for

00:30:01.356 --> 00:30:01.796 A:middle
spacing.

00:30:02.146 --> 00:30:05.116 A:middle
So I'm going to select all

00:30:05.116 --> 00:30:06.186 A:middle
[inaudible] command and select

00:30:06.186 --> 00:30:06.996 A:middle
all my stack views.

00:30:07.686 --> 00:30:08.706 A:middle
And then we're going to give it

00:30:08.706 --> 00:30:10.096 A:middle
a slightly larger spacing here

00:30:10.096 --> 00:30:11.096 A:middle
in the attribute inspector.

00:30:11.526 --> 00:30:12.946 A:middle
I'll set it to maybe 30.

00:30:13.356 --> 00:30:14.776 A:middle
That's a little too big.

00:30:14.956 --> 00:30:17.836 A:middle
So a new to Xcode 9 and iOS 11,

00:30:17.836 --> 00:30:19.676 A:middle
we have a standard spacing

00:30:19.676 --> 00:30:21.526 A:middle
option that allows the system to

00:30:21.526 --> 00:30:22.106 A:middle
choose for you.

00:30:22.106 --> 00:30:24.036 A:middle
I'm going to use that.

00:30:24.636 --> 00:30:26.256 A:middle
Now, if you remember back to

00:30:26.256 --> 00:30:27.686 A:middle
Jonathon's talk about dynamic

00:30:27.686 --> 00:30:29.436 A:middle
type, be sure to check out

00:30:29.436 --> 00:30:30.726 A:middle
standard spacing for vertical

00:30:30.726 --> 00:30:32.856 A:middle
stack views using content that's

00:30:32.856 --> 00:30:34.686 A:middle
using text styles and checking

00:30:34.686 --> 00:30:35.726 A:middle
this baseline relative.

00:30:35.856 --> 00:30:37.116 A:middle
You'll get the same effect of

00:30:37.116 --> 00:30:38.466 A:middle
dynamic type that you just saw.

00:30:39.816 --> 00:30:40.966 A:middle
For us, since we have images and

00:30:40.966 --> 00:30:41.986 A:middle
labels, we're going to go ahead

00:30:41.986 --> 00:30:43.726 A:middle
and just leave it unchecked.

00:30:43.726 --> 00:30:45.266 A:middle
And the next thing I want to do

00:30:45.266 --> 00:30:46.766 A:middle
is I want to really make sure

00:30:46.976 --> 00:30:48.056 A:middle
these images are square.

00:30:48.856 --> 00:30:49.936 A:middle
Now they may look square to you

00:30:49.936 --> 00:30:51.166 A:middle
but they really aren't, and I'll

00:30:51.166 --> 00:30:51.666 A:middle
prove it to you.

00:30:51.666 --> 00:30:53.206 A:middle
I'm going to control drag from

00:30:53.206 --> 00:30:56.286 A:middle
the image to itself and select

00:30:56.286 --> 00:30:57.446 A:middle
the aspect ratio constraint.

00:30:57.826 --> 00:30:58.866 A:middle
And you can see when I pop this

00:30:58.866 --> 00:31:00.406 A:middle
open it actually says a

00:30:58.866 --> 00:31:00.406 A:middle
open it actually says a

00:31:00.666 --> 00:31:03.416 A:middle
multiplier of 193 to 226.

00:31:03.766 --> 00:31:04.976 A:middle
Let's go ahead and make it 1:1.

00:31:09.136 --> 00:31:11.516 A:middle
Okay. But something didn't quite

00:31:11.516 --> 00:31:11.886 A:middle
happen there.

00:31:11.996 --> 00:31:13.486 A:middle
Nothing happened in canvas and,

00:31:13.486 --> 00:31:15.726 A:middle
in fact, my aspect ratio is red.

00:31:15.726 --> 00:31:17.376 A:middle
And what's worse, if you take a

00:31:17.376 --> 00:31:19.126 A:middle
look over here, there's a little

00:31:19.126 --> 00:31:19.756 A:middle
red dot.

00:31:19.756 --> 00:31:21.016 A:middle
And so, when we click on that,

00:31:21.016 --> 00:31:21.756 A:middle
we have a whole bunch of

00:31:21.756 --> 00:31:22.646 A:middle
conflicting constraints.

00:31:22.916 --> 00:31:23.366 A:middle
What happened?

00:31:23.936 --> 00:31:25.356 A:middle
Well, let's go ahead and debug

00:31:25.356 --> 00:31:25.876 A:middle
this together.

00:31:25.876 --> 00:31:27.106 A:middle
And I'll give you -- we'll show

00:31:27.106 --> 00:31:28.406 A:middle
you a technique for how to

00:31:28.406 --> 00:31:29.376 A:middle
approach this type of problem

00:31:29.886 --> 00:31:30.616 A:middle
within the canvas.

00:31:31.066 --> 00:31:33.256 A:middle
So I've got the aspect ratio and

00:31:33.256 --> 00:31:34.336 A:middle
I want to, first of all,

00:31:34.336 --> 00:31:35.966 A:middle
validate that this is the thing

00:31:35.966 --> 00:31:37.136 A:middle
that introduced error.

00:31:37.926 --> 00:31:39.416 A:middle
Some I'm going to go to the

00:31:39.416 --> 00:31:41.376 A:middle
attribute inspector for the

00:31:41.376 --> 00:31:43.436 A:middle
constraint and then toggle the

00:31:43.436 --> 00:31:45.256 A:middle
installed button on and off to

00:31:45.256 --> 00:31:45.876 A:middle
see what happens.

00:31:46.386 --> 00:31:48.836 A:middle
And so, when I toggle it off, my

00:31:48.966 --> 00:31:49.836 A:middle
issues disappear.

00:31:49.836 --> 00:31:51.776 A:middle
And when I toggle it on, they

00:31:51.776 --> 00:31:52.346 A:middle
appear again.

00:31:52.346 --> 00:31:53.476 A:middle
But nothing's really happening

00:31:53.476 --> 00:31:55.056 A:middle
in the canvas, so the next

00:31:55.056 --> 00:31:56.016 A:middle
strategy I'd like to do is I

00:31:56.016 --> 00:31:57.326 A:middle
like to poke around in my

00:31:57.326 --> 00:31:57.726 A:middle
layout.

00:31:57.726 --> 00:32:00.136 A:middle
And the thing I care about is

00:31:57.726 --> 00:32:00.136 A:middle
And the thing I care about is

00:32:00.196 --> 00:32:01.416 A:middle
probably the other red

00:32:01.416 --> 00:32:03.136 A:middle
constraints that are nearby.

00:32:03.136 --> 00:32:04.566 A:middle
Let's go ahead and take a look

00:32:04.566 --> 00:32:05.776 A:middle
at the one from the outermost

00:32:05.776 --> 00:32:07.136 A:middle
stack view to the top.

00:32:07.646 --> 00:32:10.656 A:middle
And when we uninstall that, the

00:32:10.896 --> 00:32:12.876 A:middle
issues disappear but we're no

00:32:12.876 --> 00:32:14.216 A:middle
longer fitting in the superview.

00:32:14.566 --> 00:32:16.516 A:middle
But the images are nice and

00:32:16.516 --> 00:32:17.066 A:middle
square.

00:32:17.616 --> 00:32:18.726 A:middle
That's kind of an interesting

00:32:18.806 --> 00:32:19.156 A:middle
effect.

00:32:19.156 --> 00:32:20.696 A:middle
Let's go ahead and do another

00:32:20.696 --> 00:32:20.956 A:middle
one.

00:32:20.956 --> 00:32:22.096 A:middle
So I'm going to reinstall this

00:32:22.096 --> 00:32:22.276 A:middle
one.

00:32:23.026 --> 00:32:24.576 A:middle
And I'm going uninstall the

00:32:24.576 --> 00:32:25.836 A:middle
trailing constraint.

00:32:26.376 --> 00:32:28.556 A:middle
And you can see again we're

00:32:28.556 --> 00:32:29.996 A:middle
square but this time we're

00:32:29.996 --> 00:32:31.066 A:middle
overflowing our superview.

00:32:31.916 --> 00:32:33.276 A:middle
And so what's actually happening

00:32:33.276 --> 00:32:35.186 A:middle
is that we can't satisfy both

00:32:35.186 --> 00:32:38.516 A:middle
the aspect ratio constraint, the

00:32:38.516 --> 00:32:40.426 A:middle
fill equally distribution on the

00:32:40.426 --> 00:32:41.896 A:middle
stack views, and then have it

00:32:41.986 --> 00:32:42.926 A:middle
fit into the superview.

00:32:43.486 --> 00:32:44.996 A:middle
Luckily, for my case, I don't

00:32:44.996 --> 00:32:45.726 A:middle
need to fill the entire

00:32:45.726 --> 00:32:46.276 A:middle
superview.

00:32:46.506 --> 00:32:47.846 A:middle
What I really want is actually

00:32:47.846 --> 00:32:49.226 A:middle
to just stick to the top.

00:32:49.226 --> 00:32:50.766 A:middle
So if I uninstall this, this is

00:32:50.766 --> 00:32:51.726 A:middle
closer to what I want.

00:32:52.266 --> 00:32:53.346 A:middle
But supposing we rotate in a

00:32:53.346 --> 00:32:54.416 A:middle
landscape and my height gets

00:32:54.416 --> 00:32:55.826 A:middle
smaller, I still want this

00:32:55.826 --> 00:32:57.276 A:middle
constraint so [inaudible] that

00:32:57.276 --> 00:32:57.556 A:middle
either.

00:32:57.856 --> 00:32:58.776 A:middle
And so what I'm going to do is

00:32:58.776 --> 00:32:59.716 A:middle
I'm going to leave it installed

00:33:00.216 --> 00:33:01.606 A:middle
and set it to greater than or

00:33:01.606 --> 00:33:03.836 A:middle
equal to, and then this is more

00:33:03.836 --> 00:33:05.296 A:middle
of what I want in portrait.

00:33:06.356 --> 00:33:09.096 A:middle
Let's go ahead back to the

00:33:09.096 --> 00:33:11.686 A:middle
object outline and we're now

00:33:11.686 --> 00:33:12.766 A:middle
going to look at landscape.

00:33:13.876 --> 00:33:15.396 A:middle
When I click the device bar on

00:33:15.396 --> 00:33:18.416 A:middle
landscape, you can see there's

00:33:18.416 --> 00:33:19.716 A:middle
some work that we have to do

00:33:19.716 --> 00:33:19.926 A:middle
here.

00:33:20.056 --> 00:33:22.436 A:middle
The first thing we need to do is

00:33:22.986 --> 00:33:24.536 A:middle
we want to get closer to the

00:33:24.536 --> 00:33:26.566 A:middle
look that we were wanting.

00:33:26.566 --> 00:33:27.936 A:middle
And, if you remember, the top

00:33:27.936 --> 00:33:28.706 A:middle
[inaudible] label needs to

00:33:28.706 --> 00:33:29.946 A:middle
disappear, and then we're going

00:33:29.946 --> 00:33:31.466 A:middle
to eventually put a text view

00:33:31.466 --> 00:33:32.246 A:middle
over on the right.

00:33:32.946 --> 00:33:34.366 A:middle
So let's first work on the top

00:33:34.426 --> 00:33:34.926 A:middle
[inaudible] label.

00:33:35.426 --> 00:33:38.076 A:middle
I'm going to click on it and a

00:33:38.076 --> 00:33:40.046 A:middle
stack view -- the thing we could

00:33:40.046 --> 00:33:41.056 A:middle
do is we could use the hidden

00:33:41.056 --> 00:33:41.406 A:middle
property.

00:33:41.556 --> 00:33:43.046 A:middle
Stack view is really great with

00:33:43.146 --> 00:33:44.996 A:middle
hidden subviews because it will

00:33:44.996 --> 00:33:46.786 A:middle
also collapse their layout but

00:33:46.786 --> 00:33:47.796 A:middle
keep them in the arranged

00:33:47.796 --> 00:33:48.506 A:middle
subviews array.

00:33:49.936 --> 00:33:51.366 A:middle
Now, we'll go over to hidden

00:33:51.366 --> 00:33:53.016 A:middle
property, and actually new to

00:33:53.016 --> 00:33:55.036 A:middle
Xcode 9, we also allow you to

00:33:55.036 --> 00:33:56.236 A:middle
vary this by size class.

00:33:56.236 --> 00:33:56.946 A:middle
And so you can see --

00:33:57.516 --> 00:34:01.406 A:middle
[ Applause ]

00:33:57.516 --> 00:34:01.406 A:middle
[ Applause ]

00:34:01.906 --> 00:34:02.856 A:middle
There's a plus button to make

00:34:02.856 --> 00:34:03.306 A:middle
that easier.

00:34:03.306 --> 00:34:04.566 A:middle
And so I'm going to pop it up

00:34:05.136 --> 00:34:07.056 A:middle
and choose any width.

00:34:07.596 --> 00:34:09.505 A:middle
And in this case, because it's

00:34:09.505 --> 00:34:11.656 A:middle
landscape, it is compact type.

00:34:11.926 --> 00:34:13.516 A:middle
You could also verify that with

00:34:13.516 --> 00:34:14.636 A:middle
the device bar on the bottom.

00:34:14.686 --> 00:34:16.416 A:middle
Right now we're in landscape

00:34:16.416 --> 00:34:17.585 A:middle
iPhone seven plus with regular

00:34:17.585 --> 00:34:18.426 A:middle
width and compact type.

00:34:18.466 --> 00:34:20.176 A:middle
So for any width compact type,

00:34:20.176 --> 00:34:21.406 A:middle
I'm going to add a variation,

00:34:22.096 --> 00:34:23.436 A:middle
mark it as hidden, and there we

00:34:23.436 --> 00:34:23.616 A:middle
go.

00:34:24.376 --> 00:34:25.545 A:middle
And, if we switch over to

00:34:25.545 --> 00:34:26.936 A:middle
portrait, it appears.

00:34:28.146 --> 00:34:29.525 A:middle
Going back to landscape, it's

00:34:29.525 --> 00:34:29.926 A:middle
disappeared.

00:34:30.585 --> 00:34:32.646 A:middle
Okay. We need to add our text

00:34:32.686 --> 00:34:33.005 A:middle
view now.

00:34:33.186 --> 00:34:34.045 A:middle
And, in order to do that, we

00:34:34.045 --> 00:34:36.226 A:middle
need a outer horizontal view.

00:34:36.275 --> 00:34:38.005 A:middle
We need some sort of horizontal

00:34:38.005 --> 00:34:39.516 A:middle
stack view for being able to

00:34:39.516 --> 00:34:40.636 A:middle
host the text view.

00:34:40.996 --> 00:34:41.976 A:middle
So I'm going to select

00:34:41.976 --> 00:34:42.556 A:middle
everything here.

00:34:43.106 --> 00:34:45.226 A:middle
And then I'm going to type text

00:34:45.226 --> 00:34:46.946 A:middle
view in the object outline

00:34:47.446 --> 00:34:48.706 A:middle
because I want to add that in.

00:34:49.076 --> 00:34:50.476 A:middle
Let's go ahead and embed the

00:34:50.476 --> 00:34:53.186 A:middle
outer view using the embed and

00:34:53.186 --> 00:34:54.485 A:middle
stack button.

00:34:54.886 --> 00:34:56.416 A:middle
So it created a new stack view,

00:34:56.666 --> 00:34:58.516 A:middle
and we need to switch it over to

00:34:58.516 --> 00:34:59.686 A:middle
be -- that's vertical.

00:34:59.686 --> 00:35:00.636 A:middle
We need to switch it over to be

00:34:59.686 --> 00:35:00.636 A:middle
We need to switch it over to be

00:35:00.636 --> 00:35:01.266 A:middle
horizontal.

00:35:02.696 --> 00:35:04.216 A:middle
Everything shrunk down because

00:35:04.216 --> 00:35:05.606 A:middle
also, since I embedded it into

00:35:05.606 --> 00:35:06.906 A:middle
new view, it got rid of my

00:35:06.906 --> 00:35:07.886 A:middle
constraints to the superview.

00:35:08.516 --> 00:35:10.426 A:middle
So we need to make it

00:35:10.426 --> 00:35:11.236 A:middle
horizontal.

00:35:11.506 --> 00:35:13.296 A:middle
Let's go ahead and give it a

00:35:13.296 --> 00:35:14.376 A:middle
standard spacing for the

00:35:14.376 --> 00:35:15.676 A:middle
outermost one we just created.

00:35:16.096 --> 00:35:19.896 A:middle
And then we can add a new text

00:35:19.896 --> 00:35:20.146 A:middle
view.

00:35:20.336 --> 00:35:22.466 A:middle
So we'll just go ahead and drag

00:35:23.796 --> 00:35:24.086 A:middle
that in.

00:35:24.086 --> 00:35:24.656 A:middle
There it is.

00:35:25.136 --> 00:35:26.406 A:middle
And then we need to rebuild the

00:35:26.406 --> 00:35:27.906 A:middle
constraints to our superview for

00:35:27.906 --> 00:35:29.176 A:middle
the outermost one.

00:35:29.546 --> 00:35:30.816 A:middle
So I'm going to go back to the

00:35:30.816 --> 00:35:35.266 A:middle
pinning menu 10, 10, 10, 10.

00:35:35.856 --> 00:35:38.496 A:middle
And then the bottommost

00:35:38.496 --> 00:35:40.006 A:middle
constraint, if you remember --

00:35:40.456 --> 00:35:43.106 A:middle
I'll zoom in here -- is going to

00:35:43.106 --> 00:35:45.706 A:middle
be greater than or equal to.

00:35:45.966 --> 00:35:49.026 A:middle
Okay. And so this is what I want

00:35:49.026 --> 00:35:49.606 A:middle
for landscape.

00:35:49.606 --> 00:35:51.386 A:middle
When we switch back to portrait,

00:35:52.076 --> 00:35:56.086 A:middle
we actually have to do a similar

00:35:56.086 --> 00:35:57.886 A:middle
thing and hide the text view by

00:35:57.886 --> 00:35:58.466 A:middle
a size class.

00:35:58.576 --> 00:36:00.626 A:middle
And so we can click on this.

00:35:58.576 --> 00:36:00.626 A:middle
And so we can click on this.

00:36:00.626 --> 00:36:02.326 A:middle
Go over to the hidden menu again

00:36:02.326 --> 00:36:02.976 A:middle
and add a variation --

00:36:06.576 --> 00:36:09.556 A:middle
Of any width, regular height,

00:36:09.556 --> 00:36:11.736 A:middle
and then mark it as hidden.

00:36:11.736 --> 00:36:14.606 A:middle
And now we have the look that we

00:36:14.816 --> 00:36:14.976 A:middle
want.

00:36:15.516 --> 00:36:21.500 A:middle
[ Applause ]

00:36:27.006 --> 00:36:28.146 A:middle
So use the stack view, when you

00:36:28.146 --> 00:36:29.956 A:middle
can, for all your layouts.

00:36:30.316 --> 00:36:32.066 A:middle
Alignment, distribution,

00:36:32.316 --> 00:36:32.866 A:middle
spacing.

00:36:32.866 --> 00:36:33.716 A:middle
Those are properties that will

00:36:33.716 --> 00:36:34.686 A:middle
get you there, including

00:36:34.686 --> 00:36:34.976 A:middle
nesting.

00:36:38.466 --> 00:36:39.876 A:middle
Add just a few constraints.

00:36:39.876 --> 00:36:41.866 A:middle
We only noticed it needed aspect

00:36:41.866 --> 00:36:42.856 A:middle
ratio constraint to get the

00:36:42.856 --> 00:36:43.466 A:middle
proportion.

00:36:43.466 --> 00:36:44.306 A:middle
So you only need a few

00:36:44.306 --> 00:36:46.366 A:middle
constraints to get you a little

00:36:46.366 --> 00:36:48.766 A:middle
bit extra if you have some

00:36:48.766 --> 00:36:49.576 A:middle
requirements like the

00:36:49.576 --> 00:36:50.126 A:middle
proportion.

00:36:50.676 --> 00:36:55.426 A:middle
The hidden property in Xcode 9

00:36:55.426 --> 00:36:57.076 A:middle
is size classable, which is

00:36:57.076 --> 00:36:57.386 A:middle
great.

00:36:57.386 --> 00:36:59.826 A:middle
You can go ahead and use it, and

00:36:59.826 --> 00:37:01.026 A:middle
it works great with stack view,

00:36:59.826 --> 00:37:01.026 A:middle
it works great with stack view,

00:37:01.476 --> 00:37:03.006 A:middle
because stack view will collapse

00:37:03.296 --> 00:37:04.116 A:middle
hidden subviews.

00:37:04.866 --> 00:37:07.276 A:middle
And best of all, varying by size

00:37:07.336 --> 00:37:09.326 A:middle
class with the hidden property

00:37:09.326 --> 00:37:10.376 A:middle
is backwards deployable.

00:37:11.516 --> 00:37:16.896 A:middle
[ Applause ]

00:37:17.396 --> 00:37:21.316 A:middle
So, in summary, we've looked at

00:37:21.316 --> 00:37:22.776 A:middle
six techniques today, and this

00:37:22.776 --> 00:37:24.186 A:middle
is going to add to your arsenal

00:37:24.186 --> 00:37:25.306 A:middle
for being able to build out your

00:37:25.306 --> 00:37:25.766 A:middle
apps.

00:37:26.046 --> 00:37:28.036 A:middle
We cannot wait to see what you

00:37:28.036 --> 00:37:28.376 A:middle
build.

00:37:28.836 --> 00:37:30.716 A:middle
And today we looked at some

00:37:30.806 --> 00:37:32.346 A:middle
techniques for being able to do

00:37:32.346 --> 00:37:33.876 A:middle
dynamic layout within the

00:37:33.876 --> 00:37:34.356 A:middle
runtime.

00:37:34.836 --> 00:37:36.066 A:middle
Things like dynamic type, as

00:37:36.296 --> 00:37:37.696 A:middle
well as layout techniques, for

00:37:37.696 --> 00:37:38.986 A:middle
being able to handle and make

00:37:38.986 --> 00:37:40.826 A:middle
your content look great,

00:37:41.106 --> 00:37:43.456 A:middle
unobscured, and handle adaptive

00:37:43.456 --> 00:37:43.756 A:middle
layout.

00:37:44.526 --> 00:37:45.626 A:middle
For more information, you could

00:37:45.626 --> 00:37:46.536 A:middle
check out the

00:37:46.596 --> 00:37:48.246 A:middle
developerapple.com.

00:37:49.656 --> 00:37:51.116 A:middle
If you want to learn more about

00:37:51.116 --> 00:37:52.136 A:middle
dynamic type, you could check

00:37:52.136 --> 00:37:54.136 A:middle
out the session this afternoon

00:37:54.316 --> 00:37:55.426 A:middle
and there are also links to past

00:37:55.426 --> 00:37:55.816 A:middle
videos.

00:37:55.816 --> 00:37:57.976 A:middle
Have a wonderful WWDC, everyone.

00:37:58.516 --> 00:38:02.500 A:middle
[ Applause ]
