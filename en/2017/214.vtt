WEBVTT

00:00:23.516 --> 00:00:25.926 A:middle
[ Applause ]

00:00:26.426 --> 00:00:27.236 A:middle
&gt;&gt; Welcome.

00:00:27.566 --> 00:00:28.896 A:middle
Good afternoon everyone.

00:00:29.396 --> 00:00:31.066 A:middle
I'm Sirisha from SiriKit

00:00:31.066 --> 00:00:31.726 A:middle
Engineering.

00:00:32.095 --> 00:00:33.516 A:middle
I'm joined by my colleague and

00:00:33.516 --> 00:00:36.046 A:middle
friend Tin to talk about all the

00:00:36.046 --> 00:00:37.176 A:middle
cool new features we are

00:00:37.176 --> 00:00:39.626 A:middle
bringing this year in SiriKit.

00:00:41.106 --> 00:00:42.746 A:middle
SiriKit was introduced last

00:00:42.746 --> 00:00:44.636 A:middle
year, a brand new way for

00:00:44.636 --> 00:00:46.456 A:middle
everyone to do things in their

00:00:46.456 --> 00:00:47.876 A:middle
apps using their voice.

00:00:48.886 --> 00:00:50.686 A:middle
The main goal of the release was

00:00:50.686 --> 00:00:51.966 A:middle
to make sure to give you the

00:00:51.966 --> 00:00:54.516 A:middle
ability so your services and

00:00:54.516 --> 00:00:56.126 A:middle
content can be integrated with

00:00:56.126 --> 00:00:58.536 A:middle
our SiriKit so users can now

00:00:58.826 --> 00:01:00.776 A:middle
talk to their apps using Siri.

00:00:58.826 --> 00:01:00.776 A:middle
talk to their apps using Siri.

00:01:01.436 --> 00:01:05.116 A:middle
To make this happen, we've

00:01:05.116 --> 00:01:07.406 A:middle
opened up numerous domains like

00:01:07.716 --> 00:01:10.196 A:middle
Workouts, Messages, Ride

00:01:10.196 --> 00:01:12.126 A:middle
Booking, just to name a few.

00:01:12.806 --> 00:01:14.876 A:middle
Every domain had one or more

00:01:14.876 --> 00:01:15.406 A:middle
intents.

00:01:15.936 --> 00:01:18.386 A:middle
And intents had a specific task

00:01:18.986 --> 00:01:21.416 A:middle
like the Messaging domain.

00:01:21.896 --> 00:01:23.676 A:middle
Users were able to send a

00:01:23.676 --> 00:01:25.836 A:middle
message or search a message.

00:01:26.316 --> 00:01:28.266 A:middle
Ride Booking, everybody were

00:01:28.266 --> 00:01:29.806 A:middle
able to book ride in their

00:01:29.806 --> 00:01:30.656 A:middle
preferred apps.

00:01:31.206 --> 00:01:34.236 A:middle
Or paying bills in Payments

00:01:34.476 --> 00:01:35.076 A:middle
domain.

00:01:36.516 --> 00:01:38.746 A:middle
Because of these intents, we

00:01:38.746 --> 00:01:40.676 A:middle
gave you the ability to pick and

00:01:40.676 --> 00:01:42.596 A:middle
choose the intents that you want

00:01:42.596 --> 00:01:44.706 A:middle
to register that best suited

00:01:44.706 --> 00:01:45.906 A:middle
your app capabilities.

00:01:47.836 --> 00:01:51.896 A:middle
In our release Watch 3.2 we

00:01:51.986 --> 00:01:53.866 A:middle
started supporting SiriKit on

00:01:53.866 --> 00:01:54.976 A:middle
watchOS platform.

00:01:55.526 --> 00:01:57.896 A:middle
By writing a Watch extension you

00:01:57.896 --> 00:01:59.976 A:middle
were able to take all the

00:01:59.976 --> 00:02:01.616 A:middle
advantages of SiriKit Intent

00:01:59.976 --> 00:02:01.616 A:middle
advantages of SiriKit Intent

00:02:01.686 --> 00:02:02.996 A:middle
framework on the Watch.

00:02:03.556 --> 00:02:07.056 A:middle
As our ongoing effort to make

00:02:07.056 --> 00:02:09.826 A:middle
your experience seamless and

00:02:09.826 --> 00:02:12.516 A:middle
easy, we've added our support to

00:02:12.516 --> 00:02:13.196 A:middle
simulator.

00:02:13.946 --> 00:02:17.716 A:middle
Starting iOS 10.3 and watchOS

00:02:17.746 --> 00:02:20.836 A:middle
3.2, you were able to debug and

00:02:20.836 --> 00:02:22.326 A:middle
test while writing SiriKit

00:02:22.326 --> 00:02:22.966 A:middle
extension.

00:02:24.356 --> 00:02:26.456 A:middle
This is a big year for us.

00:02:27.096 --> 00:02:29.256 A:middle
Great reception and amazing

00:02:29.256 --> 00:02:30.806 A:middle
feedback made this happen.

00:02:31.446 --> 00:02:32.796 A:middle
Let's take a sneak peek about

00:02:32.956 --> 00:02:33.876 A:middle
all the cool things we are

00:02:33.876 --> 00:02:34.876 A:middle
bringing this year.

00:02:36.076 --> 00:02:39.646 A:middle
A lot of new domains and many

00:02:39.646 --> 00:02:40.386 A:middle
more intents.

00:02:41.446 --> 00:02:43.936 A:middle
Brand new APIs to give you move

00:02:43.936 --> 00:02:46.156 A:middle
control to customize the feel

00:02:46.156 --> 00:02:49.006 A:middle
and look at your apps view in

00:02:49.006 --> 00:02:49.626 A:middle
Siri.

00:02:50.936 --> 00:02:52.696 A:middle
And lots of enhancements to our

00:02:52.696 --> 00:02:54.746 A:middle
systems and APIs for a much

00:02:54.746 --> 00:02:56.436 A:middle
improved user experience.

00:02:57.996 --> 00:02:59.776 A:middle
So, let's talk through the

00:02:59.776 --> 00:03:00.656 A:middle
domains first.

00:02:59.776 --> 00:03:00.656 A:middle
domains first.

00:03:01.726 --> 00:03:03.566 A:middle
We've added new intents to our

00:03:03.566 --> 00:03:04.746 A:middle
Payments domain.

00:03:05.216 --> 00:03:08.396 A:middle
We've add our support to Lists

00:03:08.396 --> 00:03:10.626 A:middle
and Notes functionality.

00:03:11.576 --> 00:03:14.086 A:middle
If your app uses visual codes,

00:03:14.436 --> 00:03:15.876 A:middle
you can start integrating with

00:03:15.876 --> 00:03:17.986 A:middle
SiriKit starting this fall.

00:03:19.736 --> 00:03:22.546 A:middle
Payments was introduced in iOS

00:03:22.546 --> 00:03:22.896 A:middle
10.

00:03:23.286 --> 00:03:25.356 A:middle
When we introduced, we added our

00:03:25.356 --> 00:03:27.646 A:middle
support to sending money and

00:03:27.646 --> 00:03:28.466 A:middle
requesting money.

00:03:28.466 --> 00:03:33.156 A:middle
In our 10.3 release we've added

00:03:33.156 --> 00:03:34.276 A:middle
the support for bills.

00:03:34.826 --> 00:03:36.476 A:middle
Users were able to search for

00:03:36.476 --> 00:03:37.986 A:middle
bills and pay bills.

00:03:39.036 --> 00:03:40.876 A:middle
We are extending our support

00:03:40.976 --> 00:03:43.276 A:middle
further this year by adding our

00:03:43.276 --> 00:03:44.716 A:middle
support for accounts.

00:03:45.476 --> 00:03:47.026 A:middle
Users will now be able to

00:03:47.886 --> 00:03:49.466 A:middle
transfer money from one account

00:03:49.466 --> 00:03:52.336 A:middle
to another, or search for

00:03:52.336 --> 00:03:53.406 A:middle
account information.

00:03:54.366 --> 00:03:55.576 A:middle
Let's take a look at these.

00:03:56.406 --> 00:03:57.636 A:middle
First I'm going to talk about

00:03:57.636 --> 00:03:58.626 A:middle
the transfer intent.

00:03:58.626 --> 00:04:01.966 A:middle
If you look at the screen, Siri

00:03:58.626 --> 00:04:01.966 A:middle
If you look at the screen, Siri

00:04:01.966 --> 00:04:04.476 A:middle
is very capable and powerful to

00:04:04.476 --> 00:04:06.166 A:middle
understand such long requests.

00:04:06.776 --> 00:04:08.116 A:middle
For right now I'm just going to

00:04:08.116 --> 00:04:09.526 A:middle
walk through line by line.

00:04:10.256 --> 00:04:12.166 A:middle
Transfer $10 tomorrow.

00:04:12.226 --> 00:04:18.046 A:middle
$10 will be mapped as amount.

00:04:19.166 --> 00:04:22.166 A:middle
And tomorrow is converted to the

00:04:22.166 --> 00:04:22.906 A:middle
exact date.

00:04:24.166 --> 00:04:26.026 A:middle
Easy. The transaction properties

00:04:26.026 --> 00:04:27.856 A:middle
are simple and map rightly.

00:04:28.686 --> 00:04:30.006 A:middle
What about accounts?

00:04:31.016 --> 00:04:32.526 A:middle
Accounts can be referred in many

00:04:32.526 --> 00:04:32.796 A:middle
ways.

00:04:33.256 --> 00:04:35.336 A:middle
I sometimes like to use it just

00:04:35.336 --> 00:04:36.616 A:middle
by organization name.

00:04:37.206 --> 00:04:39.086 A:middle
Or, like an account type like

00:04:39.086 --> 00:04:40.426 A:middle
I've used here: checking,

00:04:40.896 --> 00:04:42.166 A:middle
savings, credit.

00:04:43.006 --> 00:04:45.036 A:middle
Siri understands all times of

00:04:45.136 --> 00:04:47.826 A:middle
accounts and makes sure that it

00:04:47.826 --> 00:04:49.906 A:middle
infers rightly and then gives it

00:04:49.906 --> 00:04:51.646 A:middle
to your app.

00:04:51.646 --> 00:04:53.976 A:middle
Well and good.

00:04:54.176 --> 00:04:55.556 A:middle
What is this Rainbow Savings?

00:04:56.036 --> 00:04:58.386 A:middle
This is the name I have used

00:04:58.666 --> 00:05:00.696 A:middle
when registering my account in

00:04:58.666 --> 00:05:00.696 A:middle
when registering my account in

00:05:00.696 --> 00:05:01.926 A:middle
one of my apps.

00:05:02.466 --> 00:05:03.906 A:middle
And I want to make sure that

00:05:03.906 --> 00:05:05.756 A:middle
Siri understands my account

00:05:05.756 --> 00:05:06.556 A:middle
nicknames, too.

00:05:07.066 --> 00:05:08.446 A:middle
And how is this possible?

00:05:08.976 --> 00:05:10.216 A:middle
When you registered

00:05:10.506 --> 00:05:13.056 A:middle
user-specific data using our IN

00:05:13.056 --> 00:05:15.446 A:middle
Vocabulary API, we will be able

00:05:15.446 --> 00:05:18.776 A:middle
to understand user's specific

00:05:19.036 --> 00:05:19.836 A:middle
information.

00:05:21.706 --> 00:05:22.826 A:middle
You can look for more

00:05:22.826 --> 00:05:26.066 A:middle
information of IN Vocabulary API

00:05:26.896 --> 00:05:28.916 A:middle
in this link.

00:05:28.976 --> 00:05:30.746 A:middle
So, let's talk about Search.

00:05:31.086 --> 00:05:33.336 A:middle
Our second intent is a Search

00:05:33.336 --> 00:05:35.956 A:middle
for Accounts intent, which will

00:05:36.026 --> 00:05:38.816 A:middle
be able to list all the account

00:05:38.816 --> 00:05:41.176 A:middle
types if the user just asks to

00:05:41.176 --> 00:05:42.366 A:middle
list all the accounts.

00:05:42.986 --> 00:05:45.326 A:middle
Just enough information to

00:05:45.326 --> 00:05:46.366 A:middle
distinguish between the

00:05:46.366 --> 00:05:47.646 A:middle
accounts, along with the

00:05:47.646 --> 00:05:48.266 A:middle
balance.

00:05:48.836 --> 00:05:50.516 A:middle
And if the user wants to know

00:05:50.516 --> 00:05:52.386 A:middle
more about each account, they

00:05:52.386 --> 00:05:53.686 A:middle
can just click on any of the

00:05:53.686 --> 00:05:55.636 A:middle
item to get a detailed view.

00:05:56.446 --> 00:05:58.746 A:middle
Search for Accounts intent, not

00:05:58.746 --> 00:06:00.756 A:middle
just shows all the accounts, but

00:05:58.746 --> 00:06:00.756 A:middle
just shows all the accounts, but

00:06:00.756 --> 00:06:02.836 A:middle
also can be used to query for

00:06:02.836 --> 00:06:04.326 A:middle
specific account information.

00:06:04.866 --> 00:06:05.856 A:middle
Like here.

00:06:06.076 --> 00:06:08.536 A:middle
What is the balance on my

00:06:08.536 --> 00:06:09.746 A:middle
Rainbow Checking account?

00:06:10.586 --> 00:06:12.706 A:middle
I'm asking specifically my

00:06:12.706 --> 00:06:14.706 A:middle
balance on a specific account.

00:06:15.256 --> 00:06:17.746 A:middle
And Siri perfectly understands

00:06:17.746 --> 00:06:20.196 A:middle
it and then gives the user the

00:06:20.196 --> 00:06:21.256 A:middle
required information.

00:06:21.756 --> 00:06:24.116 A:middle
We don't only support the normal

00:06:24.116 --> 00:06:26.456 A:middle
balance, but also we've added a

00:06:26.456 --> 00:06:27.776 A:middle
couple of balance types.

00:06:28.106 --> 00:06:29.976 A:middle
Like if your app supports

00:06:30.036 --> 00:06:32.356 A:middle
airline mileages or reward

00:06:32.456 --> 00:06:32.866 A:middle
points.

00:06:33.476 --> 00:06:36.006 A:middle
Siri can understand them as

00:06:36.006 --> 00:06:36.296 A:middle
well.

00:06:36.826 --> 00:06:38.656 A:middle
How many miles do I have on my

00:06:38.656 --> 00:06:39.456 A:middle
Sparkle card?

00:06:39.916 --> 00:06:41.706 A:middle
Siri understands it and then

00:06:41.706 --> 00:06:42.686 A:middle
passes it to your app.

00:06:43.156 --> 00:06:45.056 A:middle
And thus giving the user the

00:06:45.056 --> 00:06:46.146 A:middle
required information.

00:06:46.716 --> 00:06:51.976 A:middle
So, INTransferMoneyIntent can be

00:06:51.976 --> 00:06:54.896 A:middle
used to transfer money from one

00:06:55.316 --> 00:06:58.166 A:middle
account to another.

00:06:58.166 --> 00:07:00.606 A:middle
INSearchForAccountsIntent can be

00:06:58.166 --> 00:07:00.606 A:middle
INSearchForAccountsIntent can be

00:07:00.606 --> 00:07:03.566 A:middle
used to check balances, to list

00:07:03.566 --> 00:07:05.566 A:middle
all the accounts or to check any

00:07:05.566 --> 00:07:07.226 A:middle
specific account information.

00:07:07.716 --> 00:07:09.496 A:middle
That's all we have for Payments

00:07:09.496 --> 00:07:10.066 A:middle
this year.

00:07:10.186 --> 00:07:15.906 A:middle
With our analysis, we found out

00:07:15.906 --> 00:07:18.386 A:middle
that managing lists and notes is

00:07:18.386 --> 00:07:20.246 A:middle
one of the very popular use

00:07:20.246 --> 00:07:22.126 A:middle
cases in Siri users.

00:07:22.496 --> 00:07:24.796 A:middle
And so, this year we're

00:07:24.796 --> 00:07:27.266 A:middle
extending our support to support

00:07:27.526 --> 00:07:29.346 A:middle
lists and notes.

00:07:29.406 --> 00:07:31.296 A:middle
We've added all the APIs to make

00:07:31.296 --> 00:07:34.176 A:middle
sure that users can create,

00:07:34.686 --> 00:07:37.396 A:middle
edit, manage, their lists,

00:07:37.556 --> 00:07:39.356 A:middle
notes, and reminders.

00:07:40.396 --> 00:07:42.816 A:middle
Not just that, but also users

00:07:42.816 --> 00:07:44.556 A:middle
will be able to search in their

00:07:44.556 --> 00:07:46.086 A:middle
lists and notes.

00:07:46.456 --> 00:07:49.936 A:middle
Let's take a look at them.

00:07:50.366 --> 00:07:52.266 A:middle
This is an example to create a

00:07:52.266 --> 00:07:52.676 A:middle
list.

00:07:53.216 --> 00:07:56.206 A:middle
I can ask Siri to create a list

00:07:56.586 --> 00:07:58.826 A:middle
by giving a title and also the

00:07:58.826 --> 00:07:59.336 A:middle
contents.

00:07:59.726 --> 00:08:01.876 A:middle
And Siri is powerful enough to

00:07:59.726 --> 00:08:01.876 A:middle
And Siri is powerful enough to

00:08:01.876 --> 00:08:03.106 A:middle
distinguish between them,

00:08:03.446 --> 00:08:05.396 A:middle
understand them, and pass on the

00:08:05.396 --> 00:08:06.986 A:middle
right information, filling in

00:08:06.986 --> 00:08:09.276 A:middle
the intent, giving it to you to

00:08:09.276 --> 00:08:10.466 A:middle
create the view.

00:08:11.006 --> 00:08:15.606 A:middle
This is one of my favorite

00:08:15.606 --> 00:08:17.546 A:middle
intents: the joys of marking

00:08:17.596 --> 00:08:18.426 A:middle
tasks done.

00:08:19.326 --> 00:08:21.416 A:middle
SetTaskAttributeIntent can be

00:08:21.416 --> 00:08:22.836 A:middle
used for this.

00:08:23.026 --> 00:08:25.256 A:middle
This has a task type, which is

00:08:25.256 --> 00:08:27.176 A:middle
completed, not completed.

00:08:27.176 --> 00:08:29.336 A:middle
And that carries the information

00:08:29.336 --> 00:08:31.646 A:middle
between Siri and the app to make

00:08:31.646 --> 00:08:34.015 A:middle
sure that we do the action

00:08:34.176 --> 00:08:34.726 A:middle
correctly.

00:08:35.296 --> 00:08:39.186 A:middle
We've added brand new intent to

00:08:39.186 --> 00:08:40.376 A:middle
support reminders.

00:08:41.046 --> 00:08:42.655 A:middle
We can create reminders in many

00:08:42.655 --> 00:08:42.926 A:middle
ways.

00:08:43.416 --> 00:08:45.396 A:middle
Siri supports two types of

00:08:45.446 --> 00:08:48.556 A:middle
reminders: spatial and temporal.

00:08:49.176 --> 00:08:50.956 A:middle
Let's talk about spatial first.

00:08:50.956 --> 00:08:53.866 A:middle
An example here: Remind me to

00:08:53.866 --> 00:08:55.656 A:middle
leave work at 5 p.m. in

00:08:55.656 --> 00:08:56.556 A:middle
UnicornNote.

00:08:56.556 --> 00:08:59.176 A:middle
I'm asking Siri to remind me to

00:08:59.176 --> 00:09:00.676 A:middle
print slide when I get to work.

00:08:59.176 --> 00:09:00.676 A:middle
print slide when I get to work.

00:09:00.676 --> 00:09:03.826 A:middle
I'm making -- I want Siri to

00:09:04.166 --> 00:09:05.676 A:middle
make sure that it understands

00:09:05.676 --> 00:09:07.296 A:middle
the geolocation of the word and

00:09:07.546 --> 00:09:09.056 A:middle
then pass on the information to

00:09:09.056 --> 00:09:11.266 A:middle
you so you can create the right

00:09:11.266 --> 00:09:13.526 A:middle
reminder for the geolocation.

00:09:14.076 --> 00:09:17.786 A:middle
The next example: Remind me to

00:09:17.786 --> 00:09:21.456 A:middle
leave work at 5 p.m. This is to

00:09:21.456 --> 00:09:24.426 A:middle
make sure that the date trigger

00:09:24.426 --> 00:09:25.156 A:middle
is created.

00:09:25.156 --> 00:09:27.566 A:middle
If you look at both the

00:09:27.566 --> 00:09:29.596 A:middle
examples, Siri is powerful

00:09:29.596 --> 00:09:31.616 A:middle
enough to understand when I said

00:09:31.696 --> 00:09:33.496 A:middle
"leave work at 5 p.m."

00:09:33.806 --> 00:09:36.146 A:middle
to create a date reminder, but

00:09:36.146 --> 00:09:38.056 A:middle
not a location reminder for

00:09:38.056 --> 00:09:38.806 A:middle
leaving work.

00:09:39.256 --> 00:09:42.076 A:middle
And in the before example, Siri

00:09:42.076 --> 00:09:44.036 A:middle
created a location trigger when

00:09:44.036 --> 00:09:45.626 A:middle
I said "arrive at work."

00:09:46.226 --> 00:09:48.336 A:middle
Siri is very powerful in parsing

00:09:48.336 --> 00:09:50.236 A:middle
these use cases and

00:09:50.236 --> 00:09:52.286 A:middle
understanding them to create the

00:09:52.286 --> 00:09:54.646 A:middle
right intent and pass it over to

00:09:55.176 --> 00:09:55.256 A:middle
you.

00:09:57.356 --> 00:10:00.856 A:middle
So, CreateTaskIntent can be used

00:09:57.356 --> 00:10:00.856 A:middle
So, CreateTaskIntent can be used

00:10:01.236 --> 00:10:03.266 A:middle
to create tasks, lists.

00:10:04.706 --> 00:10:07.406 A:middle
AddTasksIntent for the reminders

00:10:07.676 --> 00:10:09.476 A:middle
and adding tasks to the existing

00:10:09.476 --> 00:10:09.776 A:middle
ones.

00:10:11.606 --> 00:10:14.516 A:middle
SetTaskAttributeIntent to set a

00:10:14.516 --> 00:10:17.646 A:middle
task or to mark it completed or

00:10:17.646 --> 00:10:18.976 A:middle
to update it to a reminder.

00:10:22.716 --> 00:10:24.016 A:middle
Let's talk about the notes.

00:10:25.006 --> 00:10:26.496 A:middle
Notes can be created in many

00:10:26.496 --> 00:10:26.876 A:middle
ways.

00:10:27.266 --> 00:10:29.186 A:middle
I can create by using the title,

00:10:29.526 --> 00:10:31.816 A:middle
the content and even under a

00:10:31.816 --> 00:10:32.366 A:middle
folder.

00:10:32.776 --> 00:10:34.376 A:middle
And Siri supports all these

00:10:34.376 --> 00:10:34.926 A:middle
options.

00:10:35.326 --> 00:10:37.166 A:middle
So when I ask Siri to create a

00:10:37.166 --> 00:10:39.976 A:middle
note with just given title, it

00:10:39.976 --> 00:10:41.216 A:middle
just creates a blank note.

00:10:42.056 --> 00:10:45.846 A:middle
I can also ask Siri to create a

00:10:45.846 --> 00:10:47.656 A:middle
note under a specific folder

00:10:47.796 --> 00:10:49.256 A:middle
along with its content.

00:10:49.936 --> 00:10:52.076 A:middle
Siri parses the whole user

00:10:52.076 --> 00:10:54.896 A:middle
intent and then maps the

00:10:54.926 --> 00:10:57.106 A:middle
appropriate title, group name,

00:10:57.186 --> 00:10:59.296 A:middle
and content into the intent and

00:10:59.336 --> 00:11:01.116 A:middle
then pass it over to you to

00:10:59.336 --> 00:11:01.116 A:middle
then pass it over to you to

00:11:01.116 --> 00:11:02.926 A:middle
create the right note.

00:11:06.296 --> 00:11:07.816 A:middle
And adding to an existing note.

00:11:08.376 --> 00:11:10.036 A:middle
This is possible with Siri, too.

00:11:11.226 --> 00:11:13.566 A:middle
Here, Siri understands the

00:11:13.566 --> 00:11:14.696 A:middle
target note as WWDC.

00:11:14.696 --> 00:11:17.666 A:middle
And then the actual content.

00:11:17.946 --> 00:11:19.746 A:middle
And then passes the information

00:11:20.006 --> 00:11:23.246 A:middle
over to you to create the note.

00:11:23.976 --> 00:11:24.916 A:middle
Let's take a look at the

00:11:24.916 --> 00:11:25.436 A:middle
intents.

00:11:26.196 --> 00:11:28.516 A:middle
CreateNoteIntent to create brand

00:11:28.516 --> 00:11:28.996 A:middle
new notes.

00:11:30.376 --> 00:11:33.056 A:middle
AppendToNoteIntent to add to an

00:11:33.056 --> 00:11:33.916 A:middle
existing one.

00:11:34.626 --> 00:11:38.486 A:middle
The next big intent in the Lists

00:11:38.486 --> 00:11:40.346 A:middle
and Notes is Search.

00:11:41.666 --> 00:11:43.646 A:middle
When you get asked to just show

00:11:43.646 --> 00:11:46.086 A:middle
all the information, Siri

00:11:46.086 --> 00:11:48.376 A:middle
understands and then passes the

00:11:48.376 --> 00:11:49.996 A:middle
intent to your app.

00:11:50.096 --> 00:11:52.676 A:middle
And Siri lists all the notes,

00:11:52.676 --> 00:11:55.156 A:middle
lists, reminder, passed on by

00:11:55.156 --> 00:11:56.326 A:middle
the app to us.

00:11:57.466 --> 00:11:59.486 A:middle
We can display as is if you want

00:11:59.486 --> 00:12:00.106 A:middle
us to.

00:11:59.486 --> 00:12:00.106 A:middle
us to.

00:12:00.356 --> 00:12:02.816 A:middle
Or, you also have the option of

00:12:02.886 --> 00:12:04.746 A:middle
mentioning it to be sorted by

00:12:04.746 --> 00:12:06.866 A:middle
date, where Siri will go ahead

00:12:06.866 --> 00:12:08.796 A:middle
and sort all the items by date.

00:12:09.126 --> 00:12:10.836 A:middle
And then show it to the user.

00:12:10.946 --> 00:12:14.026 A:middle
Not just showing all the items,

00:12:14.316 --> 00:12:17.106 A:middle
but user can also query using a

00:12:17.106 --> 00:12:21.106 A:middle
specific type, like show just

00:12:21.146 --> 00:12:23.536 A:middle
the notes or just the lists.

00:12:24.026 --> 00:12:26.066 A:middle
Or show the notes I created

00:12:26.066 --> 00:12:26.616 A:middle
yesterday.

00:12:27.406 --> 00:12:29.456 A:middle
Or even show my completed tasks.

00:12:30.076 --> 00:12:32.836 A:middle
There are many types we support

00:12:32.836 --> 00:12:33.866 A:middle
under this intent.

00:12:34.456 --> 00:12:37.016 A:middle
And the intent itself is called

00:12:37.136 --> 00:12:39.566 A:middle
SearchForNotebookItemIntent.

00:12:40.646 --> 00:12:42.926 A:middle
And it supports all these types.

00:12:43.756 --> 00:12:46.386 A:middle
So user can ask if using any one

00:12:46.386 --> 00:12:47.646 A:middle
of these and Siri will

00:12:47.646 --> 00:12:49.926 A:middle
understand perfectly and thus

00:12:49.986 --> 00:12:51.126 A:middle
completing the action.

00:12:51.646 --> 00:12:55.026 A:middle
And that's all the Notes and

00:12:55.026 --> 00:12:58.806 A:middle
Lists new APIs we have.

00:12:59.296 --> 00:13:02.046 A:middle
Visual codes like QR codes, Bar

00:12:59.296 --> 00:13:02.046 A:middle
Visual codes like QR codes, Bar

00:13:02.046 --> 00:13:04.326 A:middle
Codes, are becoming very popular

00:13:04.326 --> 00:13:04.906 A:middle
these days.

00:13:05.376 --> 00:13:07.466 A:middle
They're being used in numerous

00:13:07.466 --> 00:13:09.066 A:middle
ways in the apps.

00:13:09.166 --> 00:13:12.906 A:middle
Like they're used to just open a

00:13:12.906 --> 00:13:14.866 A:middle
web page instead of typing a

00:13:14.966 --> 00:13:17.266 A:middle
tedious URL, especially they're

00:13:17.266 --> 00:13:18.466 A:middle
in foreign languages.

00:13:19.296 --> 00:13:21.076 A:middle
Just showing a QR code opens a

00:13:21.076 --> 00:13:21.726 A:middle
web page.

00:13:22.396 --> 00:13:24.846 A:middle
Or using them to send payment or

00:13:24.846 --> 00:13:26.836 A:middle
request payment just by showing

00:13:26.836 --> 00:13:27.246 A:middle
a code.

00:13:27.866 --> 00:13:29.456 A:middle
Paying at a gas station or

00:13:29.456 --> 00:13:30.406 A:middle
paying to friends.

00:13:30.836 --> 00:13:32.986 A:middle
Apps are using bar codes to

00:13:32.986 --> 00:13:34.146 A:middle
perform specific tasks.

00:13:34.936 --> 00:13:38.116 A:middle
And not just bar codes or QR

00:13:38.116 --> 00:13:38.576 A:middle
codes.

00:13:38.946 --> 00:13:40.646 A:middle
We are also having codes as

00:13:40.706 --> 00:13:43.566 A:middle
contacts in networking apps to

00:13:43.566 --> 00:13:45.676 A:middle
connect to each other instead of

00:13:45.676 --> 00:13:47.946 A:middle
going finding a person and then

00:13:47.946 --> 00:13:48.576 A:middle
connecting.

00:13:48.866 --> 00:13:50.746 A:middle
By just showing a contact code,

00:13:51.306 --> 00:13:52.976 A:middle
we are able to connect easily.

00:13:53.576 --> 00:13:56.466 A:middle
And starting iOS 11 Siri will be

00:13:56.466 --> 00:13:58.356 A:middle
supporting visual codes.

00:13:59.186 --> 00:14:01.166 A:middle
Users will now be able to say

00:13:59.186 --> 00:14:01.166 A:middle
Users will now be able to say

00:14:01.656 --> 00:14:03.726 A:middle
"Show my UnicornChat code,"

00:14:03.996 --> 00:14:06.266 A:middle
which means Siri understands

00:14:06.266 --> 00:14:07.416 A:middle
that this is a visual code

00:14:07.416 --> 00:14:09.106 A:middle
intent, and then pass on the

00:14:09.106 --> 00:14:11.036 A:middle
information to your app.

00:14:11.326 --> 00:14:12.746 A:middle
Whereas if the code could -- we

00:14:12.746 --> 00:14:14.006 A:middle
support different types of

00:14:14.116 --> 00:14:16.516 A:middle
codes, depending upon what app

00:14:16.576 --> 00:14:18.246 A:middle
gives us, we share it back to

00:14:18.246 --> 00:14:18.756 A:middle
the user.

00:14:18.866 --> 00:14:21.986 A:middle
And the intent that can be used

00:14:22.056 --> 00:14:23.696 A:middle
to this functionality is

00:14:24.076 --> 00:14:26.226 A:middle
INGetVisualCodeIntent.

00:14:26.916 --> 00:14:28.936 A:middle
It has one property type,

00:14:29.296 --> 00:14:31.926 A:middle
visualCodeType, which supports

00:14:32.186 --> 00:14:34.076 A:middle
-- it could be a contact or a

00:14:34.076 --> 00:14:36.586 A:middle
request payment or send payment.

00:14:37.516 --> 00:14:39.846 A:middle
By registering to this intent

00:14:40.146 --> 00:14:42.746 A:middle
users will be able to ask Siri

00:14:42.746 --> 00:14:44.346 A:middle
to show the visual codes of any

00:14:44.346 --> 00:14:46.246 A:middle
of these types in their favorite

00:14:47.756 --> 00:14:47.856 A:middle
apps.

00:14:48.266 --> 00:14:49.826 A:middle
Now I invite my colleague and

00:14:49.826 --> 00:14:52.886 A:middle
friend Tin over to show you this

00:14:52.886 --> 00:14:53.486 A:middle
in action.

00:14:55.516 --> 00:14:58.936 A:middle
[ Applause ]

00:14:59.436 --> 00:15:00.286 A:middle
&gt;&gt; Thank you Sirisha.

00:14:59.436 --> 00:15:00.286 A:middle
&gt;&gt; Thank you Sirisha.

00:15:01.186 --> 00:15:01.776 A:middle
Hi everybody.

00:15:01.906 --> 00:15:02.686 A:middle
My name is Tim.

00:15:02.686 --> 00:15:04.106 A:middle
And I'm engineer on the Siri

00:15:04.106 --> 00:15:04.736 A:middle
Client Team.

00:15:05.556 --> 00:15:07.546 A:middle
So last year at WWDC we

00:15:07.946 --> 00:15:09.076 A:middle
introduced an app called

00:15:09.226 --> 00:15:10.076 A:middle
UnicornChat.

00:15:10.156 --> 00:15:10.906 A:middle
It was great.

00:15:11.296 --> 00:15:13.196 A:middle
Let our unicorn friends, like

00:15:13.196 --> 00:15:15.036 A:middle
Celestra here, send messages to

00:15:15.036 --> 00:15:15.976 A:middle
Sparkle Sparkly.

00:15:16.436 --> 00:15:17.046 A:middle
And it was great.

00:15:17.626 --> 00:15:18.796 A:middle
This year we want to add the

00:15:18.796 --> 00:15:20.436 A:middle
brand new Visual Code Intent

00:15:20.436 --> 00:15:21.446 A:middle
support to the app.

00:15:21.496 --> 00:15:22.846 A:middle
And it's super simple.

00:15:23.516 --> 00:15:24.906 A:middle
So the first thing we want to do

00:15:25.086 --> 00:15:25.926 A:middle
is we want to make sure to

00:15:25.926 --> 00:15:27.806 A:middle
modify our info.plist.

00:15:28.956 --> 00:15:30.816 A:middle
If your app hasn't yet adopted

00:15:30.816 --> 00:15:32.996 A:middle
SiriKit, all you need to do is

00:15:32.996 --> 00:15:34.106 A:middle
to go and create in it

00:15:34.106 --> 00:15:35.946 A:middle
IntentsExtensionTarget in your

00:15:35.946 --> 00:15:37.366 A:middle
project, and you'll have the

00:15:37.366 --> 00:15:39.266 A:middle
info.plist, which you can edit.

00:15:39.976 --> 00:15:42.016 A:middle
Once you have it, go ahead and

00:15:42.016 --> 00:15:43.516 A:middle
add under the Intents Support

00:15:43.516 --> 00:15:45.926 A:middle
Key the new visuaCodeIntent.

00:15:47.716 --> 00:15:49.926 A:middle
The next thing that's important

00:15:49.926 --> 00:15:51.366 A:middle
to notice is your principal

00:15:51.366 --> 00:15:51.896 A:middle
class.

00:15:52.396 --> 00:15:53.896 A:middle
The principal class is where

00:15:54.096 --> 00:15:55.666 A:middle
Siri will call into your app and

00:15:55.666 --> 00:15:57.136 A:middle
ask you to begin handling your

00:15:57.136 --> 00:15:57.556 A:middle
intent.

00:15:57.846 --> 00:15:58.726 A:middle
And that's where we're going to

00:15:58.726 --> 00:16:00.456 A:middle
begin modifying our application.

00:15:58.726 --> 00:16:00.456 A:middle
begin modifying our application.

00:16:01.716 --> 00:16:04.706 A:middle
I'm also going to modify the

00:16:04.856 --> 00:16:07.086 A:middle
intents extension scheme and

00:16:07.126 --> 00:16:08.976 A:middle
fill out this field Siri Intent

00:16:08.976 --> 00:16:09.376 A:middle
Query.

00:16:09.506 --> 00:16:11.386 A:middle
I can prepopulate it with text

00:16:11.546 --> 00:16:13.126 A:middle
to show my UnicornChat code.

00:16:13.686 --> 00:16:15.316 A:middle
This way every single time I

00:16:15.316 --> 00:16:16.896 A:middle
build and run, Siri will

00:16:16.896 --> 00:16:18.086 A:middle
prepopulate that text.

00:16:18.086 --> 00:16:19.076 A:middle
I don't need to speak to it

00:16:19.076 --> 00:16:19.926 A:middle
every single time.

00:16:20.016 --> 00:16:21.356 A:middle
This will make debugging and

00:16:21.356 --> 00:16:22.786 A:middle
development much faster.

00:16:23.696 --> 00:16:24.326 A:middle
Let's code now.

00:16:24.946 --> 00:16:25.346 A:middle
Thank you.

00:16:26.081 --> 00:16:28.081 A:middle
[ Applause ]

00:16:28.146 --> 00:16:30.976 A:middle
Let's take a look at the demo.

00:16:36.786 --> 00:16:39.026 A:middle
So here I am in my principal

00:16:39.026 --> 00:16:40.616 A:middle
class of my intents extension

00:16:40.676 --> 00:16:41.596 A:middle
for UnicornChat.

00:16:41.656 --> 00:16:42.926 A:middle
And we're already hailing the

00:16:42.926 --> 00:16:43.886 A:middle
SendMessageIntent.

00:16:44.336 --> 00:16:45.736 A:middle
So let's go ahead now and handle

00:16:45.736 --> 00:16:47.246 A:middle
that VisualCodeIntent.

00:16:51.176 --> 00:16:52.886 A:middle
It's pretty easy.

00:16:53.576 --> 00:16:55.136 A:middle
If you're handling multiple

00:16:55.136 --> 00:16:56.696 A:middle
intents within your application,

00:16:57.066 --> 00:16:58.426 A:middle
it's a great idea to split them

00:16:58.426 --> 00:17:00.076 A:middle
up across multiple classes.

00:16:58.426 --> 00:17:00.076 A:middle
up across multiple classes.

00:17:00.646 --> 00:17:01.986 A:middle
This separates your logic and

00:17:01.986 --> 00:17:03.526 A:middle
makes things easier to test and

00:17:03.526 --> 00:17:03.916 A:middle
debug.

00:17:03.916 --> 00:17:05.886 A:middle
So let's go now into our

00:17:05.886 --> 00:17:07.496 A:middle
VisualCodeIntentHandler class.

00:17:13.306 --> 00:17:14.866 A:middle
As a reminder, you need to do

00:17:15.195 --> 00:17:16.215 A:middle
three things when you're

00:17:16.215 --> 00:17:18.705 A:middle
handling a SiriKit intent.

00:17:19.435 --> 00:17:20.665 A:middle
The first thing you want to do

00:17:20.665 --> 00:17:21.955 A:middle
is to resolve your intent.

00:17:22.486 --> 00:17:23.425 A:middle
Resolving gives you an

00:17:23.425 --> 00:17:25.886 A:middle
opportunity to customize Siri's

00:17:25.886 --> 00:17:27.076 A:middle
properties and how it handles

00:17:27.116 --> 00:17:28.246 A:middle
the properties of the intent.

00:17:29.256 --> 00:17:30.896 A:middle
Second, is Confirm.

00:17:31.546 --> 00:17:33.276 A:middle
Confirm gives you the place to

00:17:33.276 --> 00:17:35.616 A:middle
tell Siri a ready signal, that

00:17:35.616 --> 00:17:36.356 A:middle
you're ready to handle the

00:17:36.356 --> 00:17:37.566 A:middle
intent, as well as do

00:17:37.566 --> 00:17:38.246 A:middle
validation.

00:17:39.226 --> 00:17:40.656 A:middle
Finally, you'll just go ahead

00:17:40.656 --> 00:17:41.636 A:middle
and handle your intent.

00:17:42.086 --> 00:17:44.016 A:middle
For this VisualCodeIntent, we'll

00:17:44.016 --> 00:17:45.566 A:middle
return an image and tell Siri to

00:17:45.566 --> 00:17:46.376 A:middle
display it.

00:17:47.126 --> 00:17:48.186 A:middle
So let's go ahead and get

00:17:48.186 --> 00:17:48.556 A:middle
started.

00:17:52.396 --> 00:17:55.346 A:middle
I'll make my class conform to

00:17:55.346 --> 00:17:56.906 A:middle
the INGetVisualCodeIntent

00:17:56.906 --> 00:17:57.706 A:middle
handling protocol.

00:17:58.006 --> 00:18:00.266 A:middle
And the compiler's telling me I

00:17:58.006 --> 00:18:00.266 A:middle
And the compiler's telling me I

00:18:00.266 --> 00:18:01.846 A:middle
need to implement some required

00:18:01.846 --> 00:18:02.306 A:middle
methods.

00:18:02.946 --> 00:18:05.226 A:middle
Go ahead and do that.

00:18:07.396 --> 00:18:09.326 A:middle
So the only required method is

00:18:09.326 --> 00:18:10.166 A:middle
the Handle method.

00:18:10.166 --> 00:18:12.146 A:middle
But we strongly recommend you

00:18:12.146 --> 00:18:13.596 A:middle
implement both Resolve and

00:18:13.596 --> 00:18:14.156 A:middle
Confirm.

00:18:14.156 --> 00:18:15.426 A:middle
This is going to give you the

00:18:15.426 --> 00:18:17.116 A:middle
most control and customization

00:18:17.216 --> 00:18:18.846 A:middle
over your user's behavior within

00:18:18.846 --> 00:18:19.266 A:middle
Siri.

00:18:23.146 --> 00:18:23.986 A:middle
I'm going to move this out of

00:18:23.986 --> 00:18:24.546 A:middle
the way for now.

00:18:24.546 --> 00:18:26.236 A:middle
And we'll implement Resolve

00:18:26.236 --> 00:18:26.676 A:middle
first.

00:18:30.616 --> 00:18:32.806 A:middle
Again, resolution is where you

00:18:32.806 --> 00:18:34.656 A:middle
customize your behavior for

00:18:34.656 --> 00:18:36.196 A:middle
Siri's properties of the intent.

00:18:36.646 --> 00:18:38.076 A:middle
For the VisualCodeIntent,

00:18:38.186 --> 00:18:39.576 A:middle
there's only one property, and

00:18:39.656 --> 00:18:40.886 A:middle
that's the VisualCodeType.

00:18:41.556 --> 00:18:42.866 A:middle
As Sirisha mentioned, it could

00:18:42.866 --> 00:18:44.946 A:middle
be a contact code, a payment

00:18:44.946 --> 00:18:47.446 A:middle
request code, payment send code.

00:18:48.266 --> 00:18:49.586 A:middle
So let's implement our custom

00:18:49.586 --> 00:18:51.000 A:middle
logic now.

00:19:01.826 --> 00:19:03.706 A:middle
Here, if the user asks for a

00:19:03.746 --> 00:19:05.486 A:middle
contact code, we'll tell Siri

00:19:05.486 --> 00:19:06.346 A:middle
we're going to handle it

00:19:06.346 --> 00:19:08.176 A:middle
successfully as a contact code

00:19:08.176 --> 00:19:08.466 A:middle
type.

00:19:09.416 --> 00:19:10.856 A:middle
If the user doesn't specify

00:19:10.856 --> 00:19:12.366 A:middle
which kind of code they want,

00:19:12.906 --> 00:19:14.906 A:middle
like they say "Show my code"

00:19:14.906 --> 00:19:16.826 A:middle
using UnicornChat, Siri will

00:19:16.826 --> 00:19:19.196 A:middle
populate the type as unknown.

00:19:19.566 --> 00:19:20.856 A:middle
And here we can customize the

00:19:20.856 --> 00:19:22.796 A:middle
behavior and also tell Siri we

00:19:22.796 --> 00:19:24.206 A:middle
want to handle that as a contact

00:19:24.206 --> 00:19:24.656 A:middle
code type.

00:19:25.936 --> 00:19:27.556 A:middle
We won't support Payment Send or

00:19:27.556 --> 00:19:29.246 A:middle
Payment Request in our demo app.

00:19:29.696 --> 00:19:30.816 A:middle
So we'll tell Siri it's

00:19:30.816 --> 00:19:31.596 A:middle
unsupported.

00:19:31.856 --> 00:19:33.816 A:middle
And when we do so, if the user

00:19:33.816 --> 00:19:35.556 A:middle
asks for a payment code, Siri

00:19:35.556 --> 00:19:36.866 A:middle
will intelligently dial out to

00:19:36.866 --> 00:19:38.586 A:middle
the user in all the languages

00:19:38.706 --> 00:19:39.566 A:middle
that Siri supports.

00:19:39.856 --> 00:19:41.006 A:middle
We don't have to write a single

00:19:41.006 --> 00:19:41.326 A:middle
line.

00:19:41.326 --> 00:19:42.996 A:middle
So that's the power of SiriKit.

00:19:45.016 --> 00:19:46.206 A:middle
Now we're done resolving the

00:19:46.206 --> 00:19:46.706 A:middle
properties.

00:19:47.266 --> 00:19:49.166 A:middle
Let's go ahead and confirm this.

00:19:54.036 --> 00:19:56.036 A:middle
So confirmation, again, is where

00:19:56.036 --> 00:19:57.586 A:middle
we give Siri that ready signal.

00:19:57.726 --> 00:19:59.066 A:middle
And it's a great place to do

00:19:59.066 --> 00:19:59.736 A:middle
validation.

00:20:00.816 --> 00:20:02.436 A:middle
So we want to make sure that our

00:20:02.636 --> 00:20:04.896 A:middle
Unicorn user has a valid and

00:20:04.896 --> 00:20:06.246 A:middle
active account before we show

00:20:06.246 --> 00:20:07.186 A:middle
that contact code.

00:20:07.806 --> 00:20:09.376 A:middle
If they do, we'll go ahead and

00:20:09.376 --> 00:20:11.606 A:middle
return Ready response code to

00:20:11.606 --> 00:20:12.006 A:middle
Siri.

00:20:12.006 --> 00:20:14.466 A:middle
But what happens if the user

00:20:14.466 --> 00:20:15.636 A:middle
doesn't have a valid account?

00:20:16.316 --> 00:20:17.846 A:middle
Well, it'd be great to launch

00:20:17.846 --> 00:20:19.596 A:middle
our app and be able to perhaps

00:20:19.636 --> 00:20:20.896 A:middle
ask them to sign up or

00:20:20.896 --> 00:20:21.936 A:middle
reactivate their account.

00:20:21.936 --> 00:20:23.526 A:middle
And we can do that using a

00:20:23.526 --> 00:20:24.706 A:middle
custom user activity.

00:20:29.106 --> 00:20:30.326 A:middle
So we'll create a custom user

00:20:30.326 --> 00:20:31.876 A:middle
activity with a custom user info

00:20:31.876 --> 00:20:33.166 A:middle
dictionary with our error

00:20:33.166 --> 00:20:33.806 A:middle
specified.

00:20:33.806 --> 00:20:35.356 A:middle
And we'll turn to Siri

00:20:35.576 --> 00:20:37.346 A:middle
failureRequiringAppLaunch and

00:20:37.346 --> 00:20:38.386 A:middle
pass the user activity.

00:20:39.046 --> 00:20:41.666 A:middle
Now, if the user asks for a code

00:20:41.666 --> 00:20:42.936 A:middle
and they haven't signed up or

00:20:42.936 --> 00:20:45.086 A:middle
their account's inactive, Siri

00:20:45.086 --> 00:20:47.036 A:middle
will show an error and give the

00:20:47.036 --> 00:20:48.546 A:middle
user an opportunity to launch

00:20:48.546 --> 00:20:49.196 A:middle
the app.

00:20:49.196 --> 00:20:50.986 A:middle
And if they launch the app, the

00:20:51.366 --> 00:20:53.036 A:middle
user activity is passed on to

00:20:53.036 --> 00:20:53.346 A:middle
the app.

00:20:53.386 --> 00:20:54.726 A:middle
And then you can extract that

00:20:54.726 --> 00:20:56.286 A:middle
information, ask them to sign

00:20:56.286 --> 00:20:56.496 A:middle
up.

00:20:56.746 --> 00:20:57.896 A:middle
Make sure they can connect with

00:20:57.896 --> 00:20:59.006 A:middle
their Unicorn friends.

00:20:59.686 --> 00:21:02.926 A:middle
So now we're done with Confirm.

00:20:59.686 --> 00:21:02.926 A:middle
So now we're done with Confirm.

00:21:03.336 --> 00:21:10.226 A:middle
Let's go and handle this.

00:21:10.426 --> 00:21:12.236 A:middle
Handle's very straightforward.

00:21:12.406 --> 00:21:13.246 A:middle
We're just going to return a

00:21:13.246 --> 00:21:15.246 A:middle
success code to Siri in the

00:21:15.246 --> 00:21:15.926 A:middle
response.

00:21:15.926 --> 00:21:17.146 A:middle
And we'll set the visual code

00:21:17.216 --> 00:21:18.776 A:middle
image property on that response

00:21:19.026 --> 00:21:20.626 A:middle
to be our contact code image.

00:21:21.486 --> 00:21:22.526 A:middle
So this looks pretty good.

00:21:23.166 --> 00:21:24.966 A:middle
Let's build and run now.

00:21:35.366 --> 00:21:36.866 A:middle
It's prepopulated my request.

00:21:39.596 --> 00:21:40.396 A:middle
And there we have it.

00:21:40.666 --> 00:21:41.886 A:middle
Our brand new visual code.

00:21:42.016 --> 00:21:43.426 A:middle
Looks great.

00:21:44.516 --> 00:21:46.676 A:middle
[ Applause ]

00:21:47.176 --> 00:21:48.336 A:middle
So let's switch back now to

00:21:48.336 --> 00:21:50.626 A:middle
slides and recap.

00:22:06.046 --> 00:22:07.476 A:middle
So when supporting intents, all

00:22:07.476 --> 00:22:08.886 A:middle
you need to do is remember to

00:22:08.886 --> 00:22:10.356 A:middle
modify your info.plist.

00:22:10.746 --> 00:22:12.226 A:middle
Again, if you don't have an

00:22:12.226 --> 00:22:13.696 A:middle
info.plist, just go ahead and

00:22:13.696 --> 00:22:15.256 A:middle
create a new Intents Extension

00:22:15.256 --> 00:22:16.616 A:middle
Target in your app and you can

00:22:16.616 --> 00:22:17.136 A:middle
edit it.

00:22:17.826 --> 00:22:19.876 A:middle
Next, make sure to modify your

00:22:19.876 --> 00:22:21.606 A:middle
principal class, handle that

00:22:21.606 --> 00:22:22.046 A:middle
intent.

00:22:22.866 --> 00:22:25.686 A:middle
Finally, Resolve, Confirm and

00:22:25.686 --> 00:22:26.456 A:middle
Handle your intent.

00:22:27.016 --> 00:22:27.726 A:middle
Super simple.

00:22:27.726 --> 00:22:29.126 A:middle
All right.

00:22:30.046 --> 00:22:32.346 A:middle
I'd like to switch gears a

00:22:32.346 --> 00:22:33.426 A:middle
little bit and talk about

00:22:33.816 --> 00:22:35.986 A:middle
customizing your UI within Siri.

00:22:37.386 --> 00:22:39.896 A:middle
As a reminder, there's two types

00:22:39.896 --> 00:22:40.916 A:middle
of extensions in Siri.

00:22:41.626 --> 00:22:43.096 A:middle
The first type is the Intents

00:22:43.096 --> 00:22:44.636 A:middle
Extension, which you just saw.

00:22:44.946 --> 00:22:46.026 A:middle
It's where you do your Resolve,

00:22:46.266 --> 00:22:47.926 A:middle
Confirm, Handle, handle your

00:22:47.926 --> 00:22:48.576 A:middle
business logic.

00:22:49.326 --> 00:22:50.186 A:middle
This is required.

00:22:50.926 --> 00:22:52.826 A:middle
The second type is an Intent UI

00:22:52.826 --> 00:22:54.506 A:middle
extension where you can use to

00:22:54.506 --> 00:22:55.506 A:middle
configure your view.

00:22:55.666 --> 00:22:56.656 A:middle
And this is what we're going to

00:22:56.656 --> 00:23:00.646 A:middle
be talking about now.

00:22:56.656 --> 00:23:00.646 A:middle
be talking about now.

00:23:00.816 --> 00:23:02.606 A:middle
So, in iOS 10, we let you

00:23:02.606 --> 00:23:04.046 A:middle
customize parts of your view.

00:23:04.516 --> 00:23:06.116 A:middle
Here's a RequestWriteIntent.

00:23:07.446 --> 00:23:09.786 A:middle
And we allowed you to customize

00:23:09.836 --> 00:23:11.196 A:middle
certain parts of the view like

00:23:11.236 --> 00:23:12.966 A:middle
replacing the map with your own

00:23:12.966 --> 00:23:13.756 A:middle
custom view here.

00:23:13.896 --> 00:23:15.476 A:middle
We really like unicorns here.

00:23:16.956 --> 00:23:18.456 A:middle
So, this was great.

00:23:18.856 --> 00:23:20.196 A:middle
It lets you show additional

00:23:20.196 --> 00:23:22.746 A:middle
information, your own style.

00:23:23.026 --> 00:23:24.846 A:middle
But we noticed sometimes there

00:23:24.846 --> 00:23:25.446 A:middle
are issues.

00:23:25.706 --> 00:23:26.996 A:middle
There's duplicate information,

00:23:27.236 --> 00:23:29.096 A:middle
like this pickup location, drop

00:23:29.096 --> 00:23:30.606 A:middle
off location are duplicated.

00:23:31.236 --> 00:23:32.156 A:middle
Same with the fare.

00:23:32.686 --> 00:23:34.086 A:middle
This is because you didn't have

00:23:34.086 --> 00:23:36.016 A:middle
full control over all the visual

00:23:36.016 --> 00:23:37.046 A:middle
elements within Siri.

00:23:37.946 --> 00:23:39.476 A:middle
Well, this year in iOS 11 we're

00:23:39.566 --> 00:23:40.716 A:middle
going to give you that full

00:23:40.716 --> 00:23:41.216 A:middle
control.

00:23:41.346 --> 00:23:42.986 A:middle
And in order to do that, I'm

00:23:42.986 --> 00:23:43.846 A:middle
going to explain it to you a

00:23:43.846 --> 00:23:45.956 A:middle
little bit how Siri draws its

00:23:45.956 --> 00:23:46.396 A:middle
views.

00:23:46.916 --> 00:23:50.966 A:middle
Siri represents its views as a

00:23:50.966 --> 00:23:53.116 A:middle
stacked series of UI elements,

00:23:53.676 --> 00:23:55.736 A:middle
each of which is backed by data

00:23:55.996 --> 00:23:57.116 A:middle
called a parameter.

00:23:57.356 --> 00:23:58.986 A:middle
So for example, the map is

00:23:58.986 --> 00:24:00.646 A:middle
backed by a pickup location

00:23:58.986 --> 00:24:00.646 A:middle
backed by a pickup location

00:24:00.646 --> 00:24:02.486 A:middle
parameter, so on and so forth

00:24:02.576 --> 00:24:03.596 A:middle
for the rest of their views.

00:24:04.136 --> 00:24:05.886 A:middle
The ride option name, drop off

00:24:05.886 --> 00:24:07.516 A:middle
location and so on.

00:24:08.916 --> 00:24:10.126 A:middle
Here's another example.

00:24:11.906 --> 00:24:13.916 A:middle
Here Sparkle Sparkly is coming

00:24:13.916 --> 00:24:15.226 A:middle
to pick us up in a majestic

00:24:15.226 --> 00:24:15.756 A:middle
unicorn.

00:24:15.846 --> 00:24:17.986 A:middle
And he's represented by -- this

00:24:17.986 --> 00:24:19.096 A:middle
view is represented by two

00:24:19.096 --> 00:24:21.056 A:middle
parameters, a ride driver and a

00:24:21.056 --> 00:24:22.066 A:middle
ride vehicle parameter.

00:24:22.606 --> 00:24:24.526 A:middle
So some views can be represented

00:24:24.526 --> 00:24:26.026 A:middle
by multiple parameters or sets

00:24:26.026 --> 00:24:26.696 A:middle
of parameters.

00:24:27.256 --> 00:24:32.506 A:middle
In iOS 11 we expose this as a

00:24:32.506 --> 00:24:34.326 A:middle
new class called INParameter.

00:24:34.656 --> 00:24:36.326 A:middle
And this is a class representing

00:24:36.326 --> 00:24:36.846 A:middle
that data.

00:24:37.906 --> 00:24:39.426 A:middle
So here's the pickup location

00:24:39.516 --> 00:24:40.116 A:middle
INParameter.

00:24:41.916 --> 00:24:43.196 A:middle
It's constructed using a

00:24:43.196 --> 00:24:44.036 A:middle
parameter class.

00:24:44.376 --> 00:24:45.006 A:middle
In this case the

00:24:45.006 --> 00:24:45.916 A:middle
RequestRideIntent.

00:24:47.066 --> 00:24:48.716 A:middle
And then a key path which is a

00:24:48.716 --> 00:24:50.766 A:middle
property -- a location to a

00:24:50.766 --> 00:24:52.726 A:middle
property on that class.

00:24:52.726 --> 00:24:55.616 A:middle
So the parameter represents a

00:24:55.616 --> 00:24:57.036 A:middle
sort of key to the value.

00:24:57.036 --> 00:24:59.146 A:middle
And we want to be able to get

00:24:59.146 --> 00:25:00.276 A:middle
the actual value, too.

00:24:59.146 --> 00:25:00.276 A:middle
the actual value, too.

00:25:00.976 --> 00:25:02.926 A:middle
So there's a new method also on

00:25:02.926 --> 00:25:04.126 A:middle
the INInteraction called

00:25:04.486 --> 00:25:05.416 A:middle
parameterValue.

00:25:06.486 --> 00:25:08.546 A:middle
When you pass the parameter into

00:25:08.546 --> 00:25:10.646 A:middle
the interaction, you'll get back

00:25:10.646 --> 00:25:11.516 A:middle
the actual value.

00:25:11.596 --> 00:25:13.516 A:middle
For the pickup location, it

00:25:13.516 --> 00:25:15.756 A:middle
would be a CL placemark object.

00:25:17.306 --> 00:25:18.536 A:middle
Different parameters will have

00:25:18.536 --> 00:25:20.136 A:middle
different parameter value types.

00:25:20.476 --> 00:25:21.536 A:middle
For example, the price range

00:25:21.536 --> 00:25:22.386 A:middle
parameter would have an

00:25:22.566 --> 00:25:25.026 A:middle
INPriceRange type.

00:25:27.126 --> 00:25:29.346 A:middle
So, with this concept of

00:25:29.346 --> 00:25:30.606 A:middle
parameters, we can go from

00:25:30.606 --> 00:25:32.496 A:middle
giving you control over a single

00:25:32.496 --> 00:25:35.656 A:middle
view to all of the views,

00:25:35.956 --> 00:25:38.076 A:middle
customizing them for parameters.

00:25:38.076 --> 00:25:39.436 A:middle
And we'll walk through that now.

00:25:40.026 --> 00:25:43.876 A:middle
This is the principal class of

00:25:43.876 --> 00:25:45.266 A:middle
the intents UI extension.

00:25:45.686 --> 00:25:47.206 A:middle
It conforms to

00:25:47.206 --> 00:25:48.706 A:middle
INUIHostedViewControlling.

00:25:48.866 --> 00:25:49.986 A:middle
This is the same as before.

00:25:51.056 --> 00:25:52.556 A:middle
And our new method is called

00:25:52.606 --> 00:25:54.236 A:middle
configureViewFor parameters.

00:25:54.726 --> 00:25:56.106 A:middle
So you'll be asked to configure

00:25:56.106 --> 00:25:58.586 A:middle
your view for a set of

00:25:58.736 --> 00:25:59.366 A:middle
parameters.

00:26:00.666 --> 00:26:02.336 A:middle
You'll be given an interaction

00:26:02.336 --> 00:26:02.756 A:middle
object.

00:26:03.776 --> 00:26:05.086 A:middle
This will let you resolve those

00:26:05.086 --> 00:26:05.946 A:middle
parameter values.

00:26:06.466 --> 00:26:09.336 A:middle
You'll be given a context.

00:26:09.516 --> 00:26:10.676 A:middle
This will tell you whether

00:26:10.676 --> 00:26:11.916 A:middle
you're being drawn within maps

00:26:11.946 --> 00:26:12.666 A:middle
or within Siri.

00:26:13.246 --> 00:26:15.686 A:middle
And then finally, you'll be

00:26:15.686 --> 00:26:16.886 A:middle
given a completion block.

00:26:17.426 --> 00:26:18.626 A:middle
And you'll call this and it has

00:26:18.866 --> 00:26:19.696 A:middle
three parameters.

00:26:20.906 --> 00:26:22.316 A:middle
The first is a Boolean.

00:26:22.766 --> 00:26:24.516 A:middle
You'll return True or False

00:26:24.516 --> 00:26:24.736 A:middle
here.

00:26:25.076 --> 00:26:26.956 A:middle
True meaning you wish to draw a

00:26:26.956 --> 00:26:28.656 A:middle
custom view for this set of

00:26:28.656 --> 00:26:29.206 A:middle
parameters.

00:26:29.606 --> 00:26:31.556 A:middle
False means you want to let Siri

00:26:31.556 --> 00:26:32.776 A:middle
draw its default view.

00:26:33.956 --> 00:26:36.156 A:middle
Second is the set of parameters

00:26:36.156 --> 00:26:37.256 A:middle
that you're handling if you

00:26:37.256 --> 00:26:38.436 A:middle
choose to return True.

00:26:39.486 --> 00:26:41.316 A:middle
Finally, you return a size for

00:26:41.316 --> 00:26:42.796 A:middle
your view for Siri to draw.

00:26:44.216 --> 00:26:45.206 A:middle
Let's walk through a concrete

00:26:45.206 --> 00:26:48.516 A:middle
example and show you how we can

00:26:48.516 --> 00:26:50.116 A:middle
customize a Request Ride

00:26:50.116 --> 00:26:52.076 A:middle
Interaction using parameters.

00:26:52.226 --> 00:26:54.016 A:middle
We'll make more unicorns.

00:26:56.226 --> 00:26:58.736 A:middle
So, on top is Siri.

00:26:59.376 --> 00:27:00.686 A:middle
Bottom is your Intents

00:26:59.376 --> 00:27:00.686 A:middle
Bottom is your Intents

00:27:00.686 --> 00:27:01.456 A:middle
UIExtension.

00:27:02.516 --> 00:27:03.656 A:middle
You're first going to get called

00:27:03.986 --> 00:27:05.506 A:middle
with an empty set of parameters.

00:27:06.296 --> 00:27:07.366 A:middle
This will give you a chance to

00:27:07.366 --> 00:27:08.786 A:middle
draw additional information,

00:27:09.076 --> 00:27:11.226 A:middle
handle parameters up front, and

00:27:12.606 --> 00:27:15.986 A:middle
for this case in our example,

00:27:15.986 --> 00:27:17.396 A:middle
will return False.

00:27:17.396 --> 00:27:19.286 A:middle
Meaning we want to let Siri draw

00:27:19.286 --> 00:27:20.566 A:middle
the default view for this

00:27:20.816 --> 00:27:21.276 A:middle
parameter.

00:27:21.716 --> 00:27:22.936 A:middle
And the default view for an

00:27:22.936 --> 00:27:24.326 A:middle
empty set of parameters is

00:27:24.326 --> 00:27:25.126 A:middle
actually no view.

00:27:25.646 --> 00:27:28.186 A:middle
This is how it looks like in

00:27:28.186 --> 00:27:28.486 A:middle
code.

00:27:36.416 --> 00:27:38.346 A:middle
Now, Siri needs to keep calling

00:27:38.346 --> 00:27:39.946 A:middle
configureView until it resolves

00:27:39.946 --> 00:27:41.976 A:middle
all the parameters for the

00:27:41.976 --> 00:27:42.566 A:middle
interaction.

00:27:43.016 --> 00:27:44.726 A:middle
So the next view -- or the next

00:27:44.726 --> 00:27:45.856 A:middle
set of parameters is the pickup

00:27:45.856 --> 00:27:46.416 A:middle
location.

00:27:46.416 --> 00:27:47.656 A:middle
So it's going to ask you to

00:27:47.656 --> 00:27:48.766 A:middle
configure your view for this

00:27:48.816 --> 00:27:49.226 A:middle
section.

00:27:49.836 --> 00:27:51.246 A:middle
This time we're going to turn

00:27:51.386 --> 00:27:51.716 A:middle
True.

00:27:51.866 --> 00:27:53.976 A:middle
We're going to tell Siri we're

00:27:53.976 --> 00:27:54.856 A:middle
going to handle that pickup

00:27:54.856 --> 00:27:55.406 A:middle
location.

00:27:55.546 --> 00:27:57.226 A:middle
And then the size for our custom

00:27:57.226 --> 00:27:57.496 A:middle
view.

00:27:58.146 --> 00:28:00.356 A:middle
When we do this, Siri will

00:27:58.146 --> 00:28:00.356 A:middle
When we do this, Siri will

00:28:00.356 --> 00:28:02.396 A:middle
replace its default view with

00:28:02.396 --> 00:28:03.206 A:middle
our custom view.

00:28:03.896 --> 00:28:06.096 A:middle
And it will remove all instances

00:28:06.096 --> 00:28:07.316 A:middle
of the default view it would

00:28:07.316 --> 00:28:07.966 A:middle
have drawn.

00:28:09.236 --> 00:28:10.856 A:middle
Finally, it will respect the

00:28:10.856 --> 00:28:12.256 A:middle
size that we asked for.

00:28:12.836 --> 00:28:15.576 A:middle
So here's how it looks like in

00:28:15.576 --> 00:28:15.796 A:middle
code.

00:28:17.706 --> 00:28:18.686 A:middle
We'll go ahead and define our

00:28:18.776 --> 00:28:19.916 A:middle
pickup location parameter.

00:28:20.516 --> 00:28:24.576 A:middle
We configure our view when we're

00:28:24.576 --> 00:28:25.646 A:middle
asked to configure for the

00:28:25.646 --> 00:28:26.426 A:middle
pickup location.

00:28:26.866 --> 00:28:28.686 A:middle
And tell Siri True, and we're

00:28:28.686 --> 00:28:29.186 A:middle
handling it.

00:28:29.186 --> 00:28:32.486 A:middle
And finally we'll move our False

00:28:32.486 --> 00:28:34.306 A:middle
completion to an else block.

00:28:38.476 --> 00:28:40.256 A:middle
So Siri, again, is going to keep

00:28:40.256 --> 00:28:41.856 A:middle
calling configureView until it

00:28:41.856 --> 00:28:42.886 A:middle
resolves all the parameters.

00:28:43.316 --> 00:28:44.806 A:middle
Then next is the ride option

00:28:44.806 --> 00:28:45.076 A:middle
name.

00:28:45.676 --> 00:28:47.406 A:middle
And not only can you tell Siri

00:28:47.506 --> 00:28:49.426 A:middle
False, to let it draw a default

00:28:49.426 --> 00:28:51.086 A:middle
view, or configure one parameter

00:28:51.086 --> 00:28:52.656 A:middle
at a time, you can actually tell

00:28:52.656 --> 00:28:54.106 A:middle
Siri you want to configure

00:28:54.516 --> 00:28:55.766 A:middle
multiple parameters at a time.

00:28:55.816 --> 00:28:56.746 A:middle
Or all the rest of the

00:28:56.746 --> 00:28:57.246 A:middle
parameters.

00:28:57.896 --> 00:28:59.366 A:middle
So here we're going to tell Siri

00:28:59.406 --> 00:29:00.256 A:middle
we're going to handle the ride

00:28:59.406 --> 00:29:00.256 A:middle
we're going to handle the ride

00:29:00.256 --> 00:29:01.846 A:middle
option name and then all the

00:29:01.846 --> 00:29:02.666 A:middle
rest of the parameters in the

00:29:02.666 --> 00:29:02.956 A:middle
view.

00:29:03.866 --> 00:29:05.556 A:middle
And Siri will place all those

00:29:05.556 --> 00:29:07.556 A:middle
parameters with our custom view.

00:29:08.216 --> 00:29:10.046 A:middle
And Siri will no longer ask us

00:29:10.046 --> 00:29:11.306 A:middle
to configure the view any

00:29:11.306 --> 00:29:12.956 A:middle
further because we've told it

00:29:12.956 --> 00:29:16.906 A:middle
we're handling the parameters.

00:29:17.456 --> 00:29:18.416 A:middle
Here's how it looks like in

00:29:18.416 --> 00:29:18.676 A:middle
code.

00:29:19.636 --> 00:29:21.116 A:middle
We configure our parameters.

00:29:22.006 --> 00:29:24.026 A:middle
We've commented this part out.

00:29:25.736 --> 00:29:27.106 A:middle
Pick up location's just like

00:29:27.106 --> 00:29:27.486 A:middle
before.

00:29:29.236 --> 00:29:31.436 A:middle
Here we're handling the ride

00:29:31.436 --> 00:29:33.326 A:middle
option name and all the rest of

00:29:33.326 --> 00:29:33.946 A:middle
the parameters.

00:29:34.526 --> 00:29:38.486 A:middle
And then our completion, False.

00:29:39.626 --> 00:29:42.036 A:middle
So we go from this view, which

00:29:42.036 --> 00:29:44.296 A:middle
has duplicate methods to be able

00:29:44.576 --> 00:29:47.626 A:middle
to control all of the views and

00:29:47.626 --> 00:29:48.676 A:middle
all the parameters for those

00:29:48.676 --> 00:29:49.116 A:middle
views.

00:29:50.586 --> 00:29:52.066 A:middle
And not only can we do this type

00:29:52.066 --> 00:29:54.286 A:middle
of layout, we can do any type of

00:29:54.286 --> 00:29:55.346 A:middle
custom layout we want.

00:29:55.856 --> 00:29:57.616 A:middle
We can draw some custom views.

00:29:57.696 --> 00:29:59.166 A:middle
We can have Siri draw the rest.

00:29:59.166 --> 00:30:01.286 A:middle
You can draw all custom views.

00:29:59.166 --> 00:30:01.286 A:middle
You can draw all custom views.

00:30:01.406 --> 00:30:02.386 A:middle
Have a custom header.

00:30:02.686 --> 00:30:03.866 A:middle
So, it's super powerful.

00:30:05.066 --> 00:30:06.416 A:middle
So let's take a look at this

00:30:06.766 --> 00:30:07.906 A:middle
live in Xcode.

00:30:08.476 --> 00:30:10.836 A:middle
Customize our Unicorn Ride app.

00:30:11.486 --> 00:30:13.906 A:middle
We're going to use a pink theme.

00:30:14.116 --> 00:30:16.026 A:middle
Unicorns love pink.

00:30:16.746 --> 00:30:18.736 A:middle
And we're going to handle two

00:30:18.736 --> 00:30:19.126 A:middle
views.

00:30:19.256 --> 00:30:20.496 A:middle
We're going to handle the fare

00:30:20.496 --> 00:30:21.786 A:middle
and special pricing parameters

00:30:21.906 --> 00:30:22.596 A:middle
on the top view.

00:30:23.046 --> 00:30:24.436 A:middle
And then pickup location, drop

00:30:24.436 --> 00:30:25.976 A:middle
off location, ride option name

00:30:26.046 --> 00:30:26.676 A:middle
on the bottom.

00:30:27.206 --> 00:30:30.736 A:middle
And again, I'll use the Siri

00:30:30.736 --> 00:30:32.616 A:middle
Intent Query feature to

00:30:32.616 --> 00:30:34.086 A:middle
prepopulate a request.

00:30:34.086 --> 00:30:38.396 A:middle
So let's take a look at a demo

00:30:38.396 --> 00:30:38.626 A:middle
again.

00:30:48.416 --> 00:30:51.146 A:middle
So here I am in my principal

00:30:51.146 --> 00:30:52.156 A:middle
class for my Intents UI

00:30:52.156 --> 00:30:52.716 A:middle
Extension.

00:30:53.266 --> 00:30:54.216 A:middle
It conforms to the

00:30:54.256 --> 00:30:55.826 A:middle
INUIHostedViewControlling

00:30:55.826 --> 00:30:56.336 A:middle
protocol.

00:30:56.336 --> 00:30:58.956 A:middle
And let's go ahead and implement

00:30:58.956 --> 00:31:00.966 A:middle
that new configureView method.

00:30:58.956 --> 00:31:00.966 A:middle
that new configureView method.

00:31:03.056 --> 00:31:05.276 A:middle
The first time around, I'll

00:31:05.276 --> 00:31:06.786 A:middle
return False to every single

00:31:06.786 --> 00:31:07.096 A:middle
thing.

00:31:07.276 --> 00:31:08.466 A:middle
So Siri is going to draw its

00:31:08.466 --> 00:31:09.966 A:middle
default views for all the

00:31:09.966 --> 00:31:10.496 A:middle
parameters.

00:31:10.956 --> 00:31:12.476 A:middle
We can also put brake points

00:31:12.476 --> 00:31:14.156 A:middle
here during debugging to see

00:31:14.656 --> 00:31:15.746 A:middle
which sets of parameters we're

00:31:15.746 --> 00:31:16.786 A:middle
getting called for in which

00:31:16.786 --> 00:31:17.876 A:middle
order for the interaction as

00:31:17.876 --> 00:31:18.226 A:middle
well.

00:31:19.316 --> 00:31:20.866 A:middle
Let's build and run this.

00:31:40.096 --> 00:31:40.716 A:middle
All right.

00:31:41.166 --> 00:31:42.716 A:middle
We've got our default view here

00:31:42.716 --> 00:31:44.546 A:middle
because we've told Siri False to

00:31:44.546 --> 00:31:45.326 A:middle
all the parameters.

00:31:46.126 --> 00:31:47.946 A:middle
This isn't very Unicorny, so

00:31:47.946 --> 00:31:49.376 A:middle
let's get started and make it

00:31:49.946 --> 00:31:50.606 A:middle
more pink.

00:31:51.096 --> 00:31:52.246 A:middle
Let's take care of that fare and

00:31:52.246 --> 00:31:53.546 A:middle
special pricing parameters.

00:31:54.126 --> 00:31:57.366 A:middle
So back in our controller.

00:31:58.816 --> 00:32:02.376 A:middle
We'll define parameters that

00:31:58.816 --> 00:32:02.376 A:middle
We'll define parameters that

00:32:02.376 --> 00:32:03.666 A:middle
we're handling, fare and special

00:32:03.666 --> 00:32:04.036 A:middle
pricing.

00:32:16.136 --> 00:32:16.916 A:middle
We'll handle our parameters and

00:32:17.006 --> 00:32:18.376 A:middle
then extract the real values for

00:32:18.376 --> 00:32:19.936 A:middle
these parameters from the

00:32:19.936 --> 00:32:22.896 A:middle
interaction object on that first

00:32:22.896 --> 00:32:24.136 A:middle
call when Siri asks us to

00:32:24.136 --> 00:32:26.076 A:middle
configure for an empty set of

00:32:27.436 --> 00:32:27.706 A:middle
parameters.

00:32:35.136 --> 00:32:36.476 A:middle
Next, we'll take our parameter

00:32:36.476 --> 00:32:38.456 A:middle
values, go ahead and use it to

00:32:38.456 --> 00:32:39.966 A:middle
configure our Unicorn Ride View.

00:32:40.506 --> 00:32:41.916 A:middle
And then we'll tell Siri we're

00:32:41.916 --> 00:32:43.176 A:middle
handling the custom view for

00:32:43.176 --> 00:32:44.756 A:middle
these parameters, and then the

00:32:44.756 --> 00:32:45.216 A:middle
size.

00:32:48.206 --> 00:32:50.636 A:middle
Go ahead and move this to an

00:32:50.636 --> 00:32:51.196 A:middle
else block.

00:32:51.666 --> 00:32:56.166 A:middle
Let's build it around this.

00:33:12.316 --> 00:33:13.966 A:middle
And it's looking a lot better.

00:33:14.056 --> 00:33:15.616 A:middle
We got our pink view here

00:33:15.786 --> 00:33:16.906 A:middle
handling the fare and special

00:33:16.906 --> 00:33:17.376 A:middle
pricing.

00:33:17.796 --> 00:33:19.266 A:middle
And because we've returned False

00:33:19.266 --> 00:33:20.306 A:middle
to the rest of the parameters,

00:33:20.566 --> 00:33:22.146 A:middle
Siri's drawing the default views

00:33:22.326 --> 00:33:24.106 A:middle
for pickup location, drop off

00:33:24.106 --> 00:33:25.596 A:middle
location, ride option name.

00:33:26.026 --> 00:33:27.496 A:middle
So to fully customize our view,

00:33:27.766 --> 00:33:28.636 A:middle
let's go ahead and take care of

00:33:28.636 --> 00:33:29.616 A:middle
the rest of the parameters.

00:33:39.476 --> 00:33:41.316 A:middle
Here we're just defining the

00:33:41.316 --> 00:33:43.146 A:middle
rest of our parameters, just

00:33:43.196 --> 00:33:44.696 A:middle
like before.

00:33:51.566 --> 00:33:52.746 A:middle
Once again, we're configuring

00:33:52.746 --> 00:33:53.156 A:middle
our view.

00:33:53.466 --> 00:33:54.546 A:middle
When Siri asks for the pickup

00:33:54.546 --> 00:33:56.466 A:middle
location, extracting the real

00:33:56.466 --> 00:33:58.266 A:middle
values using the parameterValue

00:33:58.266 --> 00:33:59.396 A:middle
method for the interaction.

00:34:08.686 --> 00:34:09.985 A:middle
Finally we'll use those values,

00:34:10.266 --> 00:34:11.746 A:middle
again, configure our Unicorn

00:34:11.746 --> 00:34:12.795 A:middle
Ride View for these last

00:34:12.795 --> 00:34:14.326 A:middle
parameters and tell Siri we're

00:34:14.326 --> 00:34:15.936 A:middle
handling them with our custom

00:34:15.936 --> 00:34:16.315 A:middle
size.

00:34:17.275 --> 00:34:18.096 A:middle
This looks pretty good.

00:34:18.716 --> 00:34:20.396 A:middle
So let's build and run this one

00:34:21.406 --> 00:34:21.476 A:middle
now.

00:34:35.496 --> 00:34:37.456 A:middle
And now we've got our fully

00:34:37.616 --> 00:34:39.985 A:middle
Unicorny custom ride view.

00:34:40.996 --> 00:34:41.815 A:middle
So that looks great.

00:34:43.516 --> 00:34:48.666 A:middle
[ Applause ]

00:34:49.166 --> 00:34:50.335 A:middle
Let's go back to the slides.

00:34:51.196 --> 00:34:55.246 A:middle
Just to recap, when configuring

00:34:55.246 --> 00:34:57.696 A:middle
your view for parameters, know

00:34:57.696 --> 00:34:59.036 A:middle
that you'll be called multiple

00:34:59.036 --> 00:35:01.306 A:middle
times to configure your view.

00:34:59.036 --> 00:35:01.306 A:middle
times to configure your view.

00:35:01.686 --> 00:35:02.766 A:middle
You're first going to be called

00:35:03.046 --> 00:35:04.316 A:middle
with an empty set of parameters.

00:35:04.656 --> 00:35:06.456 A:middle
So again, you can draw

00:35:06.456 --> 00:35:08.346 A:middle
additional info, your own custom

00:35:08.346 --> 00:35:08.686 A:middle
header.

00:35:08.816 --> 00:35:09.566 A:middle
Or you can even handle

00:35:09.566 --> 00:35:10.666 A:middle
parameters up front here.

00:35:12.216 --> 00:35:13.966 A:middle
You'll be called in order for a

00:35:13.966 --> 00:35:15.476 A:middle
set of parameters for a given

00:35:15.476 --> 00:35:16.146 A:middle
interaction.

00:35:16.686 --> 00:35:17.966 A:middle
You'll be able to find the set

00:35:17.966 --> 00:35:19.346 A:middle
of parameters in the order in an

00:35:19.346 --> 00:35:20.536 A:middle
upcoming update to the

00:35:20.536 --> 00:35:21.876 A:middle
documentation.

00:35:23.216 --> 00:35:25.056 A:middle
Finally, just go ahead and

00:35:25.056 --> 00:35:26.756 A:middle
handle your parameters, return

00:35:26.756 --> 00:35:28.166 A:middle
the size up to Siri and draw

00:35:28.166 --> 00:35:28.506 A:middle
your view.

00:35:29.676 --> 00:35:34.186 A:middle
In an upcoming seed we're going

00:35:34.186 --> 00:35:34.876 A:middle
to add a parameter to the

00:35:34.876 --> 00:35:36.776 A:middle
configureView method called

00:35:36.776 --> 00:35:37.816 A:middle
Interactive Behavior.

00:35:38.606 --> 00:35:40.216 A:middle
So certain views and certain

00:35:40.216 --> 00:35:41.646 A:middle
parameters have interactivity

00:35:41.646 --> 00:35:42.516 A:middle
associated with them.

00:35:42.566 --> 00:35:44.396 A:middle
So for example, the map, you can

00:35:44.396 --> 00:35:46.026 A:middle
tap it, you'll get another view.

00:35:46.296 --> 00:35:47.346 A:middle
That's like a next view.

00:35:48.066 --> 00:35:49.496 A:middle
Certain views may launch your

00:35:49.496 --> 00:35:49.746 A:middle
app.

00:35:50.326 --> 00:35:51.546 A:middle
So the Interactive Behavior

00:35:51.546 --> 00:35:52.966 A:middle
parameter will give you hints

00:35:53.086 --> 00:35:55.066 A:middle
about the type of interaction

00:35:55.066 --> 00:35:56.136 A:middle
that's available for these

00:35:56.176 --> 00:35:56.686 A:middle
parameters.

00:35:56.846 --> 00:35:58.016 A:middle
And you can use that to

00:35:58.256 --> 00:35:59.846 A:middle
customize your view as well.

00:36:00.366 --> 00:36:02.776 A:middle
There will also be another

00:36:02.776 --> 00:36:04.666 A:middle
method called Description of

00:36:04.666 --> 00:36:06.166 A:middle
Interface Parameters on your

00:36:06.166 --> 00:36:07.906 A:middle
Intents UIExtension Context,

00:36:08.236 --> 00:36:09.176 A:middle
which you can use during

00:36:09.176 --> 00:36:11.056 A:middle
debugging in order to printout

00:36:11.406 --> 00:36:12.766 A:middle
the order of parameters and the

00:36:12.766 --> 00:36:15.626 A:middle
set of parameters during a give

00:36:16.416 --> 00:36:16.746 A:middle
interaction.

00:36:16.746 --> 00:36:18.726 A:middle
So, this is the brand new

00:36:19.216 --> 00:36:20.246 A:middle
INInteraction API.

00:36:20.766 --> 00:36:21.706 A:middle
It's super powerful.

00:36:21.706 --> 00:36:23.126 A:middle
And we can't wait to see what

00:36:23.126 --> 00:36:24.136 A:middle
you guys build with it.

00:36:24.526 --> 00:36:25.576 A:middle
I'm going to hand it back to

00:36:25.576 --> 00:36:26.746 A:middle
Sirisha to talk about some

00:36:26.746 --> 00:36:27.636 A:middle
additional enhancements.

00:36:28.016 --> 00:36:28.346 A:middle
Thank you.

00:36:29.516 --> 00:36:33.676 A:middle
[ Applause ]

00:36:34.176 --> 00:36:34.896 A:middle
&gt;&gt; Thank you, Tin.

00:36:35.886 --> 00:36:37.636 A:middle
Along with adding more domains

00:36:38.076 --> 00:36:39.696 A:middle
and the powerful parameters Tin

00:36:39.696 --> 00:36:41.296 A:middle
just introduced, we've spent a

00:36:41.296 --> 00:36:43.286 A:middle
lot of time enhancing our

00:36:43.286 --> 00:36:44.426 A:middle
systems and APIs.

00:36:44.426 --> 00:36:47.256 A:middle
I'm not going to go over all of

00:36:47.326 --> 00:36:48.816 A:middle
them, but I want to talk about

00:36:48.896 --> 00:36:49.706 A:middle
two of them.

00:36:50.586 --> 00:36:52.576 A:middle
First, I'll cover Background

00:36:52.576 --> 00:36:54.176 A:middle
Workout App Intent Handling, an

00:36:54.476 --> 00:36:57.406 A:middle
ability to start workout apps in

00:36:57.406 --> 00:36:57.976 A:middle
background.

00:36:59.336 --> 00:37:01.796 A:middle
And Alternative App Names.

00:36:59.336 --> 00:37:01.796 A:middle
And Alternative App Names.

00:37:02.176 --> 00:37:03.506 A:middle
We'll get to it in a minute.

00:37:05.106 --> 00:37:06.846 A:middle
Workouts are very popular

00:37:06.846 --> 00:37:07.406 A:middle
intents.

00:37:08.096 --> 00:37:09.866 A:middle
Users love to use Siri to

00:37:09.866 --> 00:37:11.086 A:middle
control their workouts.

00:37:11.556 --> 00:37:12.526 A:middle
It's very easy.

00:37:13.036 --> 00:37:15.446 A:middle
The current implementation when

00:37:15.446 --> 00:37:17.276 A:middle
user requests any action on a

00:37:17.276 --> 00:37:18.916 A:middle
workout, Siri calls the

00:37:18.916 --> 00:37:19.656 A:middle
extension.

00:37:20.186 --> 00:37:22.286 A:middle
And then the extension hands it

00:37:22.286 --> 00:37:23.836 A:middle
over to the app.

00:37:23.836 --> 00:37:26.046 A:middle
And thus Siri asking permission

00:37:26.046 --> 00:37:27.836 A:middle
for the user if the device is

00:37:27.836 --> 00:37:29.896 A:middle
locked before launching the app.

00:37:30.966 --> 00:37:32.676 A:middle
We changed this a bit this year.

00:37:33.366 --> 00:37:35.076 A:middle
We wanted to make sure that

00:37:35.076 --> 00:37:37.146 A:middle
before launching the app we

00:37:37.146 --> 00:37:38.936 A:middle
launched the app instead of in

00:37:39.096 --> 00:37:40.066 A:middle
the foreground, but in the

00:37:40.066 --> 00:37:40.696 A:middle
background.

00:37:41.206 --> 00:37:43.336 A:middle
So users can now just talk to

00:37:43.336 --> 00:37:45.236 A:middle
Siri and have the app launched.

00:37:45.846 --> 00:37:47.266 A:middle
And this is for the Workout

00:37:47.266 --> 00:37:49.146 A:middle
Intents starting iOS 11.

00:37:49.896 --> 00:37:50.786 A:middle
Let's look in the code.

00:37:51.916 --> 00:37:52.696 A:middle
This is the current

00:37:52.696 --> 00:37:53.616 A:middle
implementation.

00:37:53.946 --> 00:37:55.826 A:middle
A sample code for a start

00:37:55.826 --> 00:37:57.366 A:middle
workout intent response.

00:37:57.976 --> 00:38:00.226 A:middle
The extension usually returns

00:37:57.976 --> 00:38:00.226 A:middle
The extension usually returns

00:38:00.296 --> 00:38:03.156 A:middle
continuing app, which when Siri

00:38:03.156 --> 00:38:05.266 A:middle
calls the application method in

00:38:05.266 --> 00:38:06.886 A:middle
the UI application delegate,

00:38:08.086 --> 00:38:10.126 A:middle
passing the NS userActivity,

00:38:10.496 --> 00:38:12.266 A:middle
prompting an app launch.

00:38:13.686 --> 00:38:15.516 A:middle
We've added two new things to

00:38:15.516 --> 00:38:17.026 A:middle
change the flow.

00:38:18.176 --> 00:38:22.076 A:middle
We have added a new intent

00:38:22.076 --> 00:38:24.896 A:middle
response code Handle an App.

00:38:24.896 --> 00:38:27.126 A:middle
So, you have a choice to return

00:38:27.226 --> 00:38:29.276 A:middle
Handle an App response code to

00:38:29.276 --> 00:38:31.286 A:middle
make sure that we call a new

00:38:31.286 --> 00:38:32.376 A:middle
application method.

00:38:33.736 --> 00:38:35.116 A:middle
We've added a new application

00:38:35.116 --> 00:38:36.776 A:middle
method on the UI Application

00:38:36.776 --> 00:38:37.246 A:middle
Delegate.

00:38:37.556 --> 00:38:41.376 A:middle
This takes IN Intent and a

00:38:41.446 --> 00:38:42.586 A:middle
completion handler.

00:38:43.596 --> 00:38:45.576 A:middle
So, when you pass in Handle an

00:38:45.886 --> 00:38:47.276 A:middle
App as an intent response code,

00:38:47.576 --> 00:38:48.626 A:middle
and implement the new

00:38:48.626 --> 00:38:50.836 A:middle
application method, we will call

00:38:50.836 --> 00:38:52.236 A:middle
the new application method,

00:38:52.536 --> 00:38:54.406 A:middle
prompting to launch the app in

00:38:54.406 --> 00:38:55.066 A:middle
the background.

00:38:55.666 --> 00:38:57.046 A:middle
This is very useful when the

00:38:57.046 --> 00:38:59.826 A:middle
users just want to start Workout

00:38:59.826 --> 00:39:01.876 A:middle
or pause, even through airports.

00:38:59.826 --> 00:39:01.876 A:middle
or pause, even through airports.

00:39:02.026 --> 00:39:03.316 A:middle
They don't even have to touch

00:39:03.346 --> 00:39:03.916 A:middle
the device.

00:39:07.046 --> 00:39:07.866 A:middle
Let's take a quick look at the

00:39:07.866 --> 00:39:08.206 A:middle
flow.

00:39:08.206 --> 00:39:09.026 A:middle
How does this look?

00:39:09.806 --> 00:39:11.836 A:middle
User wants to start a workout.

00:39:12.576 --> 00:39:14.796 A:middle
We launch the extension, call

00:39:14.796 --> 00:39:15.676 A:middle
the handle method.

00:39:16.266 --> 00:39:19.286 A:middle
And the extension returns the

00:39:19.286 --> 00:39:21.346 A:middle
new intent response code, Handle

00:39:21.346 --> 00:39:23.116 A:middle
an App.

00:39:23.316 --> 00:39:25.006 A:middle
And then Siri calls the

00:39:25.006 --> 00:39:27.296 A:middle
application, the new application

00:39:27.436 --> 00:39:30.266 A:middle
method, passing the IN Intent

00:39:30.266 --> 00:39:31.826 A:middle
and the completion handler.

00:39:31.976 --> 00:39:33.416 A:middle
And that completion block

00:39:33.416 --> 00:39:35.316 A:middle
inserts the intent response

00:39:35.406 --> 00:39:35.656 A:middle
code.

00:39:36.436 --> 00:39:38.586 A:middle
And then application will be

00:39:38.586 --> 00:39:40.586 A:middle
launched in the background and

00:39:40.806 --> 00:39:42.656 A:middle
passing the success back to Siri

00:39:42.966 --> 00:39:44.196 A:middle
with the completion of the

00:39:44.296 --> 00:39:44.766 A:middle
activity.

00:39:45.406 --> 00:39:47.466 A:middle
We believe this will make user's

00:39:47.466 --> 00:39:49.516 A:middle
experience more easy, more

00:39:49.516 --> 00:39:51.546 A:middle
seamless while controlling their

00:39:51.546 --> 00:39:52.166 A:middle
workouts.

00:39:52.366 --> 00:39:53.766 A:middle
And we're very excited for this.

00:39:54.896 --> 00:39:57.296 A:middle
The second enhancement I'm going

00:39:57.296 --> 00:40:00.566 A:middle
to talk about today is

00:39:57.296 --> 00:40:00.566 A:middle
to talk about today is

00:40:00.896 --> 00:40:04.186 A:middle
alternative app names.

00:40:04.806 --> 00:40:07.996 A:middle
Usually user can actually call

00:40:07.996 --> 00:40:09.616 A:middle
an app in different names,

00:40:10.076 --> 00:40:11.266 A:middle
different varieties.

00:40:12.056 --> 00:40:13.696 A:middle
Like UnicornPay can be just

00:40:13.696 --> 00:40:14.726 A:middle
called as Unicorn.

00:40:15.256 --> 00:40:17.336 A:middle
UnicornPay or CornPay.

00:40:17.856 --> 00:40:19.816 A:middle
We want to make sure that we

00:40:19.816 --> 00:40:21.596 A:middle
understand all the variations of

00:40:21.596 --> 00:40:24.686 A:middle
the app names the user uses and

00:40:25.366 --> 00:40:28.606 A:middle
invoke the right app.

00:40:28.816 --> 00:40:31.056 A:middle
So, to make this happen, we've

00:40:31.056 --> 00:40:32.446 A:middle
introduced a new field

00:40:32.866 --> 00:40:34.526 A:middle
AlternativeAppName in the

00:40:34.526 --> 00:40:34.876 A:middle
.plist.

00:40:35.386 --> 00:40:38.246 A:middle
While registering in the .plist

00:40:38.246 --> 00:40:39.826 A:middle
you have the ability to fill in

00:40:40.086 --> 00:40:41.916 A:middle
all the app names that you think

00:40:41.916 --> 00:40:43.756 A:middle
a user might use to refer to

00:40:43.756 --> 00:40:45.196 A:middle
your app.

00:40:45.196 --> 00:40:46.146 A:middle
There is a field called

00:40:46.146 --> 00:40:47.756 A:middle
AlternativeAppNames which takes

00:40:47.756 --> 00:40:49.336 A:middle
the actual names and then the

00:40:49.336 --> 00:40:51.276 A:middle
pronunciation hint you can also

00:40:51.276 --> 00:40:52.796 A:middle
fill in, if you think that's

00:40:52.796 --> 00:40:53.396 A:middle
necessary.

00:40:53.396 --> 00:40:56.016 A:middle
This will help Siri understand

00:40:56.086 --> 00:40:57.446 A:middle
all the variation of the app

00:40:57.446 --> 00:40:59.966 A:middle
names and make sure to invoke

00:41:00.226 --> 00:41:02.276 A:middle
and call the right app the user

00:41:02.276 --> 00:41:03.216 A:middle
is expecting.

00:41:06.556 --> 00:41:09.896 A:middle
So far we've introduced new

00:41:09.896 --> 00:41:13.086 A:middle
domains, Lists and Notes, and

00:41:13.086 --> 00:41:13.836 A:middle
visual codes.

00:41:14.976 --> 00:41:17.246 A:middle
And new intents in our Payments

00:41:17.246 --> 00:41:19.096 A:middle
domain to support accounts.

00:41:20.616 --> 00:41:23.486 A:middle
Brand new APIs to give you more

00:41:23.486 --> 00:41:25.536 A:middle
control to customize the views.

00:41:26.066 --> 00:41:27.926 A:middle
My colleague Tin introduced

00:41:27.926 --> 00:41:28.276 A:middle
this.

00:41:29.546 --> 00:41:31.686 A:middle
And finally, the enhancements

00:41:32.186 --> 00:41:34.126 A:middle
like starting a workout app in

00:41:34.126 --> 00:41:36.426 A:middle
the background and also giving

00:41:36.426 --> 00:41:38.606 A:middle
you the ability to provide us

00:41:38.606 --> 00:41:40.096 A:middle
all the alternative app names

00:41:40.406 --> 00:41:42.396 A:middle
that you think a user can call.

00:41:44.636 --> 00:41:46.406 A:middle
Please visit our website

00:41:46.406 --> 00:41:48.446 A:middle
developer.apple.com for more

00:41:48.446 --> 00:41:50.996 A:middle
information under our session

00:41:51.026 --> 00:41:51.866 A:middle
214.

00:41:52.936 --> 00:41:55.156 A:middle
We have another session coming

00:41:55.156 --> 00:41:56.696 A:middle
up, Making Great SiriKit

00:41:56.696 --> 00:41:59.106 A:middle
Experiences, where our experts

00:41:59.106 --> 00:42:00.686 A:middle
will talk about methodologies,

00:41:59.106 --> 00:42:00.686 A:middle
will talk about methodologies,

00:42:00.846 --> 00:42:03.376 A:middle
techniques, helpful hints you

00:42:03.376 --> 00:42:05.096 A:middle
can use while you're writing in

00:42:05.096 --> 00:42:06.086 A:middle
Siri Extension.

00:42:07.756 --> 00:42:09.526 A:middle
Thank you all for joining us

00:42:09.566 --> 00:42:10.016 A:middle
today.

00:42:10.236 --> 00:42:12.056 A:middle
We're very excited to see all

00:42:12.056 --> 00:42:13.086 A:middle
the new things you're going to

00:42:13.086 --> 00:42:14.786 A:middle
bring using our new APIs.

00:42:15.356 --> 00:42:15.736 A:middle
Thank you.

00:42:16.516 --> 00:42:24.690 A:middle
[ Applause ]
