WEBVTT

00:00:20.316 --> 00:00:21.136 A:middle
&gt;&gt; Good afternoon.

00:00:21.136 --> 00:00:21.686 A:middle
Good afternoon.

00:00:21.686 --> 00:00:24.826 A:middle
It's so great to see so many of

00:00:24.826 --> 00:00:25.806 A:middle
you here today.

00:00:26.346 --> 00:00:28.546 A:middle
for session 505, "What's New in

00:00:28.546 --> 00:00:29.446 A:middle
Photos API."

00:00:29.446 --> 00:00:31.706 A:middle
My name is Eric Hanson, I'm the

00:00:31.706 --> 00:00:33.936 A:middle
Photos Platform evangelist and

00:00:33.936 --> 00:00:35.326 A:middle
I'm joined here this afternoon

00:00:35.326 --> 00:00:36.596 A:middle
by two of my colleagues from the

00:00:36.596 --> 00:00:38.736 A:middle
Photos engineering team to talk

00:00:38.736 --> 00:00:39.716 A:middle
to you about a whole lot of

00:00:39.716 --> 00:00:41.886 A:middle
great things new in Photos for

00:00:41.886 --> 00:00:44.746 A:middle
iOS and for macOS High Sierra.

00:00:46.096 --> 00:00:48.026 A:middle
So, obviously, we're all here

00:00:48.156 --> 00:00:49.296 A:middle
because we care about

00:00:49.296 --> 00:00:49.976 A:middle
photography.

00:00:51.506 --> 00:00:53.746 A:middle
And our users as I'm sure most

00:00:53.746 --> 00:00:55.656 A:middle
of you know, care deeply about

00:00:55.656 --> 00:00:56.386 A:middle
photography.

00:00:56.936 --> 00:00:59.916 A:middle
Every day around the world

00:00:59.916 --> 00:01:01.586 A:middle
millions and millions of photos

00:01:01.586 --> 00:01:03.946 A:middle
are captured on iOS devices.

00:01:04.806 --> 00:01:06.906 A:middle
Leading to ever-growing

00:01:06.906 --> 00:01:10.126 A:middle
libraries filled with tremendous

00:01:10.126 --> 00:01:12.796 A:middle
amount of memory and meaningful

00:01:12.796 --> 00:01:15.826 A:middle
moments that delight users when

00:01:15.826 --> 00:01:17.076 A:middle
they reexperience them.

00:01:17.886 --> 00:01:19.366 A:middle
And so, we want to talk to you

00:01:19.366 --> 00:01:21.846 A:middle
about creating great experiences

00:01:21.846 --> 00:01:24.106 A:middle
in your apps and integrating

00:01:24.106 --> 00:01:25.386 A:middle
with the Photo library.

00:01:25.386 --> 00:01:27.786 A:middle
And we've got some great new API

00:01:27.886 --> 00:01:29.646 A:middle
to make this easy for you.

00:01:31.066 --> 00:01:32.396 A:middle
We also want to talk to you

00:01:32.396 --> 00:01:34.916 A:middle
about doing this in a way that

00:01:34.916 --> 00:01:36.286 A:middle
is high-performing within your

00:01:36.286 --> 00:01:36.596 A:middle
app.

00:01:36.596 --> 00:01:39.306 A:middle
Ensuring that the responsiveness

00:01:39.306 --> 00:01:40.986 A:middle
of your application is the best

00:01:40.986 --> 00:01:42.066 A:middle
it can possibly be.

00:01:42.516 --> 00:01:43.396 A:middle
So, we're going to talk to you

00:01:43.396 --> 00:01:44.286 A:middle
about that as well.

00:01:45.736 --> 00:01:47.886 A:middle
And finally, we want to do this

00:01:47.886 --> 00:01:49.476 A:middle
in a way that we're not

00:01:49.476 --> 00:01:51.306 A:middle
violating the trust with the

00:01:51.306 --> 00:01:51.786 A:middle
user.

00:01:52.206 --> 00:01:53.436 A:middle
We're not forcing the user to

00:01:53.436 --> 00:01:55.736 A:middle
give up privacy just because

00:01:55.736 --> 00:01:58.056 A:middle
they want to integrate with your

00:01:58.056 --> 00:01:59.166 A:middle
application and with their

00:01:59.166 --> 00:01:59.666 A:middle
photos.

00:02:00.316 --> 00:02:01.296 A:middle
We're going to talk to you about

00:02:01.296 --> 00:02:01.816 A:middle
that too.

00:02:02.226 --> 00:02:03.916 A:middle
And on this last point, I'd like

00:02:03.916 --> 00:02:05.966 A:middle
to welcome to the stage, my

00:02:05.966 --> 00:02:07.206 A:middle
first colleague in the Photos

00:02:07.206 --> 00:02:08.706 A:middle
Engineering Team, Hasan Adil.

00:02:09.526 --> 00:02:09.986 A:middle
Hasan.

00:02:11.516 --> 00:02:13.646 A:middle
[ Applause ]

00:02:14.146 --> 00:02:14.686 A:middle
&gt;&gt; Thank you, Eric.

00:02:16.566 --> 00:02:17.216 A:middle
Hello, everybody.

00:02:17.356 --> 00:02:21.386 A:middle
It's great to see you.

00:02:21.456 --> 00:02:23.166 A:middle
UI Image Picker Controller is a

00:02:23.246 --> 00:02:25.166 A:middle
simple and easy to use API for

00:02:25.166 --> 00:02:27.556 A:middle
selecting photos and videos in

00:02:27.556 --> 00:02:28.386 A:middle
your app.

00:02:29.176 --> 00:02:31.136 A:middle
In iOS 11, we have some great

00:02:31.136 --> 00:02:33.206 A:middle
improvements and new features

00:02:33.436 --> 00:02:35.056 A:middle
that I'm really excited to share

00:02:35.056 --> 00:02:35.656 A:middle
with you today.

00:02:38.576 --> 00:02:41.576 A:middle
At Apple, we care deeply about

00:02:41.576 --> 00:02:45.606 A:middle
our users' privacy and security.

00:02:46.156 --> 00:02:47.776 A:middle
Therefore, whenever you

00:02:47.776 --> 00:02:48.376 A:middle
presented the

00:02:48.376 --> 00:02:50.336 A:middle
UIMessagesViewController, we

00:02:50.336 --> 00:02:52.386 A:middle
require you to get the users'

00:02:52.386 --> 00:02:54.616 A:middle
authorization for their entire

00:02:54.616 --> 00:02:56.556 A:middle
library in order to select a

00:02:56.556 --> 00:02:57.836 A:middle
single photo or video.

00:02:59.656 --> 00:03:01.296 A:middle
I'm sure you all well aware,

00:03:01.296 --> 00:03:02.346 A:middle
familiar with this alert.

00:03:03.846 --> 00:03:05.496 A:middle
This cause friction in your app.

00:03:05.496 --> 00:03:07.846 A:middle
As well as the user giving up a

00:03:07.846 --> 00:03:09.596 A:middle
level of privacy that perhaps

00:03:09.596 --> 00:03:10.516 A:middle
they didn't really mean to.

00:03:11.406 --> 00:03:13.186 A:middle
As well as apps that will fail

00:03:13.186 --> 00:03:14.836 A:middle
to perform even though there are

00:03:14.836 --> 00:03:16.506 A:middle
great features, because the user

00:03:16.506 --> 00:03:17.646 A:middle
didn't want to give them access.

00:03:18.466 --> 00:03:20.066 A:middle
Well, we thought we could do

00:03:20.066 --> 00:03:20.396 A:middle
better.

00:03:21.356 --> 00:03:24.276 A:middle
So, in iOS 11, we have revamped

00:03:24.436 --> 00:03:25.616 A:middle
the privacy and security

00:03:25.616 --> 00:03:26.806 A:middle
fundaments of

00:03:26.806 --> 00:03:27.966 A:middle
UIMessageViewController.

00:03:29.196 --> 00:03:30.636 A:middle
We started off with three goals.

00:03:31.556 --> 00:03:33.346 A:middle
Put the user in charge of their

00:03:33.346 --> 00:03:33.866 A:middle
content.

00:03:35.086 --> 00:03:37.176 A:middle
Create a great user experience

00:03:37.276 --> 00:03:39.636 A:middle
in your apps.

00:03:39.976 --> 00:03:43.476 A:middle
And third, give a higher level

00:03:43.476 --> 00:03:44.946 A:middle
of privacy to our users.

00:03:45.886 --> 00:03:47.646 A:middle
So, I'm happy to announce that

00:03:47.646 --> 00:03:50.686 A:middle
in iOS 11, this alert is no

00:03:50.686 --> 00:03:51.336 A:middle
longer needed.

00:03:52.816 --> 00:03:53.726 A:middle
It just works.

00:03:54.516 --> 00:03:57.546 A:middle
[ Applause ]

00:03:58.046 --> 00:03:59.186 A:middle
Let's look at a demo and we'll

00:03:59.186 --> 00:04:00.286 A:middle
get into it.

00:04:00.816 --> 00:04:02.446 A:middle
So, here's an app I've just

00:04:02.446 --> 00:04:03.556 A:middle
downloaded from the app store.

00:04:03.756 --> 00:04:05.206 A:middle
I'm really excited to use it.

00:04:05.516 --> 00:04:06.406 A:middle
I've filled out, I'm having a

00:04:06.406 --> 00:04:08.166 A:middle
great day at WWDC, a little bit

00:04:08.166 --> 00:04:09.316 A:middle
nervous, but that's OK.

00:04:09.996 --> 00:04:11.426 A:middle
But I'd like to attach a photo.

00:04:12.046 --> 00:04:13.526 A:middle
Now, let's see what presenting

00:04:13.526 --> 00:04:15.306 A:middle
UIMessageViewController in iOS

00:04:15.306 --> 00:04:15.956 A:middle
11 looks like.

00:04:17.006 --> 00:04:17.876 A:middle
It just works.

00:04:18.786 --> 00:04:20.756 A:middle
UIMessageViewController in iOS

00:04:20.756 --> 00:04:22.876 A:middle
11 is now an auto process API.

00:04:23.826 --> 00:04:26.196 A:middle
What that means is that we

00:04:26.196 --> 00:04:28.486 A:middle
present the contents of our API

00:04:29.016 --> 00:04:31.036 A:middle
from an auto process sandbox and

00:04:31.036 --> 00:04:31.936 A:middle
secure environment.

00:04:31.936 --> 00:04:34.886 A:middle
And apps no longer get access to

00:04:34.886 --> 00:04:35.886 A:middle
users' photo library.

00:04:37.196 --> 00:04:38.946 A:middle
Only the user is able to

00:04:38.946 --> 00:04:39.696 A:middle
interact with

00:04:39.696 --> 00:04:41.176 A:middle
UIMessageViewController UI.

00:04:41.966 --> 00:04:44.606 A:middle
When the user makes a selection,

00:04:45.336 --> 00:04:47.876 A:middle
we take that photo or video and

00:04:47.876 --> 00:04:49.566 A:middle
send it over to your app.

00:04:50.666 --> 00:04:52.166 A:middle
We feel that this removes

00:04:52.166 --> 00:04:53.106 A:middle
friction from your app.

00:04:53.436 --> 00:04:55.356 A:middle
As well as gives users a really

00:04:55.476 --> 00:04:56.496 A:middle
high level of privacy.

00:04:57.396 --> 00:04:59.176 A:middle
Because no authorization is

00:04:59.176 --> 00:05:00.746 A:middle
granted, none is asked for.

00:05:01.996 --> 00:05:02.916 A:middle
We hope you'll like it.

00:05:03.246 --> 00:05:04.376 A:middle
Using it is really easy.

00:05:04.416 --> 00:05:05.886 A:middle
You have to make no additions.

00:05:06.296 --> 00:05:07.196 A:middle
It will just work.

00:05:09.116 --> 00:05:11.416 A:middle
Photos contain rich metadata

00:05:11.416 --> 00:05:11.866 A:middle
within them.

00:05:12.436 --> 00:05:14.346 A:middle
This includes the created date.

00:05:14.496 --> 00:05:15.916 A:middle
The format of the photo.

00:05:16.156 --> 00:05:17.316 A:middle
As well as other various

00:05:17.316 --> 00:05:17.836 A:middle
metadata.

00:05:18.506 --> 00:05:20.136 A:middle
And we've made it really easy to

00:05:20.136 --> 00:05:21.316 A:middle
get to this in iOS 11.

00:05:22.786 --> 00:05:24.556 A:middle
We now provide you a brand0new

00:05:24.556 --> 00:05:25.676 A:middle
key with every result of

00:05:25.676 --> 00:05:26.936 A:middle
UIImagePickerController.

00:05:27.226 --> 00:05:28.016 A:middle
The key is called

00:05:28.286 --> 00:05:30.576 A:middle
UIImagePickerControllerImageURL.

00:05:32.556 --> 00:05:35.826 A:middle
This URL is a file URL, which

00:05:35.826 --> 00:05:36.856 A:middle
points to a file in the

00:05:36.856 --> 00:05:38.686 A:middle
temporary of your app.

00:05:38.936 --> 00:05:40.576 A:middle
So, if you would like to work

00:05:40.576 --> 00:05:42.416 A:middle
with us later, we suggest you

00:05:42.416 --> 00:05:43.396 A:middle
move the file to a more

00:05:43.396 --> 00:05:45.106 A:middle
permanent location so it stays

00:05:45.106 --> 00:05:45.326 A:middle
there.

00:05:46.736 --> 00:05:49.406 A:middle
You can us a URL as is, or you

00:05:49.406 --> 00:05:50.926 A:middle
can read the NSDate into your

00:05:50.926 --> 00:05:52.816 A:middle
app and process as needed.

00:05:59.066 --> 00:06:00.856 A:middle
In iOS 11 we have introduced a

00:06:00.856 --> 00:06:02.556 A:middle
new format called HEIF for

00:06:02.556 --> 00:06:03.066 A:middle
photos.

00:06:04.256 --> 00:06:05.936 A:middle
Now we realize that it will take

00:06:05.936 --> 00:06:07.696 A:middle
some time for the ecosystem to

00:06:07.696 --> 00:06:08.626 A:middle
adopt HEIF fully.

00:06:08.996 --> 00:06:10.466 A:middle
And we made it really easy to do

00:06:10.466 --> 00:06:11.976 A:middle
so with UIImagePickerController.

00:06:12.896 --> 00:06:15.336 A:middle
We have a new property called

00:06:15.336 --> 00:06:16.526 A:middle
imageExportPresent.

00:06:17.466 --> 00:06:19.536 A:middle
It could be set to two types.

00:06:19.536 --> 00:06:20.906 A:middle
It could be compatible mode, or

00:06:21.086 --> 00:06:22.376 A:middle
we can set it to current mode.

00:06:22.666 --> 00:06:25.356 A:middle
Let's look at them.

00:06:25.556 --> 00:06:28.086 A:middle
In compatible mode, if the

00:06:28.086 --> 00:06:29.676 A:middle
source photo that the user

00:06:29.676 --> 00:06:31.636 A:middle
selected exists as a HEIF

00:06:32.076 --> 00:06:33.946 A:middle
formatted photo we will

00:06:33.946 --> 00:06:35.846 A:middle
transport a Jpeg and give you a

00:06:35.846 --> 00:06:36.726 A:middle
Jpeg version of it.

00:06:37.706 --> 00:06:39.636 A:middle
This is also the default value

00:06:39.636 --> 00:06:40.326 A:middle
for the property.

00:06:40.326 --> 00:06:42.466 A:middle
And if you don't need anything

00:06:42.466 --> 00:06:43.626 A:middle
different, you don't need to do

00:06:43.626 --> 00:06:44.006 A:middle
anything.

00:06:45.296 --> 00:06:49.026 A:middle
However, if you would like the

00:06:49.026 --> 00:06:51.116 A:middle
photo as we have it, set the

00:06:51.116 --> 00:06:52.826 A:middle
value to current and we'll give

00:06:52.826 --> 00:06:54.436 A:middle
you the photo as we have it in

00:06:54.436 --> 00:06:55.826 A:middle
Photo library and you might get

00:06:55.896 --> 00:06:58.206 A:middle
HEIF and you can deal with that.

00:06:59.456 --> 00:07:02.066 A:middle
We have some great changes when

00:07:02.066 --> 00:07:03.546 A:middle
it comes to selecting videos.

00:07:05.116 --> 00:07:06.766 A:middle
But let me step aside for a

00:07:06.766 --> 00:07:09.346 A:middle
second, the AVFoundation is

00:07:09.346 --> 00:07:11.126 A:middle
Apple's framework for rich

00:07:11.126 --> 00:07:12.916 A:middle
editing as well as playback of

00:07:12.916 --> 00:07:13.426 A:middle
photos.

00:07:14.466 --> 00:07:16.416 A:middle
And AVFoundation has a rich set

00:07:17.006 --> 00:07:18.826 A:middle
of export presets, or formats

00:07:18.826 --> 00:07:19.226 A:middle
you can say.

00:07:19.336 --> 00:07:21.736 A:middle
And I'm happy to announce

00:07:22.136 --> 00:07:24.066 A:middle
UIImagePickerController supports

00:07:24.146 --> 00:07:24.686 A:middle
all of them.

00:07:25.236 --> 00:07:27.596 A:middle
We have a new property called

00:07:27.596 --> 00:07:28.866 A:middle
videoExportPreset.

00:07:30.636 --> 00:07:32.876 A:middle
You can use this as a way to

00:07:32.876 --> 00:07:35.326 A:middle
tell us what format would you

00:07:35.326 --> 00:07:36.476 A:middle
like selected with you to be

00:07:36.476 --> 00:07:37.666 A:middle
given to you.

00:07:38.336 --> 00:07:40.086 A:middle
Let's look at an example.

00:07:42.436 --> 00:07:45.086 A:middle
After importAVFoundation you

00:07:45.086 --> 00:07:46.286 A:middle
will create an instance of

00:07:46.286 --> 00:07:48.156 A:middle
UIImagePickerController and tell

00:07:48.156 --> 00:07:49.696 A:middle
us what format you like.

00:07:51.036 --> 00:07:52.846 A:middle
Here, I'm asking you to give me

00:07:52.846 --> 00:07:53.876 A:middle
the highest quality video.

00:07:54.376 --> 00:07:56.396 A:middle
And then you present the picker.

00:07:56.476 --> 00:07:57.806 A:middle
When the user makes a selection

00:07:58.146 --> 00:07:59.376 A:middle
regardless of what format it

00:07:59.376 --> 00:08:02.396 A:middle
was, we're cross coded to a

00:08:02.396 --> 00:08:03.516 A:middle
matching format and give you

00:08:03.516 --> 00:08:04.146 A:middle
back the video.

00:08:04.446 --> 00:08:06.696 A:middle
This is especially great for

00:08:06.696 --> 00:08:08.236 A:middle
getting the videos back in the

00:08:08.236 --> 00:08:09.456 A:middle
original format that they

00:08:09.456 --> 00:08:10.636 A:middle
existed in.

00:08:11.716 --> 00:08:14.126 A:middle
For a full list of available

00:08:14.126 --> 00:08:16.286 A:middle
presets, please see this

00:08:16.286 --> 00:08:17.226 A:middle
interface called

00:08:17.226 --> 00:08:20.356 A:middle
AVAssetExportSession, or come

00:08:20.356 --> 00:08:21.546 A:middle
see us in the lab and we'd be

00:08:21.546 --> 00:08:24.606 A:middle
happy to help you.

00:08:25.396 --> 00:08:26.846 A:middle
To my earlier point about

00:08:26.846 --> 00:08:28.656 A:middle
increasing the privacy, we also

00:08:28.656 --> 00:08:30.596 A:middle
took a deep look at what it

00:08:30.636 --> 00:08:32.116 A:middle
takes to add content into a

00:08:32.116 --> 00:08:32.726 A:middle
photo library.

00:08:34.086 --> 00:08:35.266 A:middle
Now, since we've made picking

00:08:35.266 --> 00:08:37.316 A:middle
seamless, we thought we would

00:08:37.316 --> 00:08:38.626 A:middle
make adding awesome also.

00:08:39.556 --> 00:08:43.306 A:middle
So, in iOS 11, if you are to use

00:08:43.336 --> 00:08:45.186 A:middle
either of these two methods for

00:08:45.186 --> 00:08:48.306 A:middle
saving a photo or a video into

00:08:48.306 --> 00:08:50.036 A:middle
the user's library, we have a

00:08:50.036 --> 00:08:51.876 A:middle
new security model and a

00:08:51.986 --> 00:08:52.646 A:middle
permission level.

00:08:54.336 --> 00:08:56.986 A:middle
The permission level for either

00:08:56.986 --> 00:08:57.756 A:middle
of these two methods, the

00:08:57.756 --> 00:08:59.876 A:middle
UIImagePickerController one is

00:08:59.876 --> 00:09:01.936 A:middle
called UIImageWriteToSave

00:09:01.936 --> 00:09:03.226 A:middle
ForusAlbum.

00:09:03.226 --> 00:09:03.976 A:middle
And the other one is

00:09:04.586 --> 00:09:06.366 A:middle
UISaveVideoAtPath

00:09:06.426 --> 00:09:07.816 A:middle
ToSavedPhotoAlbum.

00:09:08.606 --> 00:09:10.186 A:middle
These require add only

00:09:10.186 --> 00:09:10.856 A:middle
authorization.

00:09:11.376 --> 00:09:12.696 A:middle
These are really library

00:09:12.696 --> 00:09:14.216 A:middle
questions to get from the user.

00:09:14.566 --> 00:09:16.416 A:middle
Because these will allow you to

00:09:16.416 --> 00:09:18.756 A:middle
add in library and not read.

00:09:19.436 --> 00:09:20.786 A:middle
So, we feel like users are going

00:09:20.786 --> 00:09:22.206 A:middle
to be very likely, will give you

00:09:22.206 --> 00:09:23.026 A:middle
this authorization.

00:09:24.546 --> 00:09:26.326 A:middle
And like before, come see us in

00:09:26.326 --> 00:09:27.196 A:middle
the lab if you have any

00:09:27.196 --> 00:09:27.676 A:middle
questions.

00:09:29.216 --> 00:09:31.616 A:middle
For our users of PhotoKit, we

00:09:31.616 --> 00:09:32.346 A:middle
have something great.

00:09:33.576 --> 00:09:35.836 A:middle
Now, with every result of

00:09:35.836 --> 00:09:37.916 A:middle
UIImagePickerController, if

00:09:38.386 --> 00:09:42.246 A:middle
you're a PhotoKit user, we also

00:09:42.246 --> 00:09:43.966 A:middle
give you back PHAsset object

00:09:44.146 --> 00:09:45.336 A:middle
matching the user selection.

00:09:46.406 --> 00:09:49.106 A:middle
This makes it really seamless to

00:09:49.106 --> 00:09:51.096 A:middle
integrate PhotoKit across APIs.

00:09:51.096 --> 00:09:53.016 A:middle
Let's look at an example.

00:09:53.806 --> 00:09:54.956 A:middle
So, here's I've implemented the

00:09:54.956 --> 00:09:55.966 A:middle
delicate method of

00:09:55.966 --> 00:09:57.596 A:middle
UImagePickerController delegate.

00:09:57.596 --> 00:09:59.906 A:middle
And when I get the result

00:09:59.906 --> 00:10:01.416 A:middle
dictionary, I have a brand new

00:10:01.416 --> 00:10:02.626 A:middle
key, the key is called

00:10:03.096 --> 00:10:04.756 A:middle
UIImagePickerController,

00:10:04.756 --> 00:10:05.196 A:middle
PHAsset.

00:10:06.046 --> 00:10:07.606 A:middle
You get the value of that key

00:10:07.856 --> 00:10:09.296 A:middle
and this key will be the asset

00:10:09.296 --> 00:10:11.386 A:middle
object and you are free to use

00:10:12.096 --> 00:10:12.196 A:middle
it.

00:10:12.406 --> 00:10:16.286 A:middle
Now, going along with this, we

00:10:16.286 --> 00:10:17.766 A:middle
had previously deprecated the

00:10:17.766 --> 00:10:19.006 A:middle
ALAssets laboratory framework

00:10:20.246 --> 00:10:22.646 A:middle
and now the ALAssets Library

00:10:22.696 --> 00:10:24.256 A:middle
reference URLS, which we used to

00:10:24.256 --> 00:10:26.406 A:middle
pass to you using a key called

00:10:26.746 --> 00:10:28.216 A:middle
UIImagePickerController

00:10:28.416 --> 00:10:29.906 A:middle
referenceURL has now be

00:10:29.906 --> 00:10:30.706 A:middle
deprecated also.

00:10:30.816 --> 00:10:34.126 A:middle
Yeah, PhotoKit is great and you

00:10:34.126 --> 00:10:35.146 A:middle
will love it.

00:10:35.996 --> 00:10:37.936 A:middle
We feel that with these changes

00:10:37.936 --> 00:10:39.856 A:middle
to enhance the user privacy,

00:10:40.606 --> 00:10:41.676 A:middle
features to make

00:10:41.676 --> 00:10:42.906 A:middle
UImagePickerController a

00:10:42.906 --> 00:10:44.996 A:middle
powerful and full feature API,

00:10:45.776 --> 00:10:47.616 A:middle
that this will satisfy the needs

00:10:47.616 --> 00:10:48.826 A:middle
of the majority of apps out

00:10:48.826 --> 00:10:49.016 A:middle
there.

00:10:50.256 --> 00:10:53.046 A:middle
However, there are times when

00:10:53.046 --> 00:10:54.446 A:middle
you do need deep integration

00:10:54.446 --> 00:10:55.426 A:middle
with the Photos frameworks.

00:10:56.326 --> 00:10:57.636 A:middle
And for that we recommend

00:10:57.636 --> 00:10:58.086 A:middle
PhotoKit.

00:10:59.036 --> 00:11:00.676 A:middle
To tell you what's new in

00:11:00.676 --> 00:11:02.566 A:middle
PhotoKit in iOS 11, I'd like

00:11:02.566 --> 00:11:03.916 A:middle
welcome my colleague, Andreas

00:11:03.916 --> 00:11:04.326 A:middle
Karlsson.

00:11:05.516 --> 00:11:07.556 A:middle
[ Applause ]

00:11:08.056 --> 00:11:12.116 A:middle
&gt;&gt; Thank you Hasan.

00:11:13.016 --> 00:11:15.026 A:middle
So, apps related to photography

00:11:15.026 --> 00:11:16.466 A:middle
are consistently some of the

00:11:16.466 --> 00:11:17.996 A:middle
most popular apps on the App

00:11:17.996 --> 00:11:18.276 A:middle
Store.

00:11:19.036 --> 00:11:20.656 A:middle
It takes, both great features

00:11:20.656 --> 00:11:22.646 A:middle
and a great user experience to

00:11:22.646 --> 00:11:23.866 A:middle
succeed in that market.

00:11:24.526 --> 00:11:25.376 A:middle
I'm very excited to be here

00:11:25.376 --> 00:11:27.086 A:middle
today to talk about improvements

00:11:27.086 --> 00:11:28.786 A:middle
we have made in PhotoKit that we

00:11:28.786 --> 00:11:30.486 A:middle
hope enable you to write both

00:11:30.486 --> 00:11:32.556 A:middle
exciting new features and makes

00:11:32.556 --> 00:11:34.006 A:middle
it easier to improve the user

00:11:34.006 --> 00:11:35.286 A:middle
experience of your apps.

00:11:35.706 --> 00:11:37.036 A:middle
So, let's jump right in.

00:11:37.036 --> 00:11:38.776 A:middle
Let's look at live photo effects

00:11:39.126 --> 00:11:39.906 A:middle
that were announced in the

00:11:39.906 --> 00:11:40.956 A:middle
keynote on Monday.

00:11:41.646 --> 00:11:43.706 A:middle
So, live photo effects include

00:11:43.706 --> 00:11:45.766 A:middle
these loops, which are created

00:11:45.766 --> 00:11:47.536 A:middle
by carefully analyzing the video

00:11:47.626 --> 00:11:48.806 A:middle
and seamlessly stitching them

00:11:48.806 --> 00:11:51.686 A:middle
together into these endless

00:11:51.686 --> 00:11:52.036 A:middle
loops.

00:11:52.936 --> 00:11:55.586 A:middle
Also, include bounce which works

00:11:55.586 --> 00:11:56.906 A:middle
in a similar way, but as you can

00:11:56.906 --> 00:11:58.456 A:middle
see, it works better with dogs.

00:11:59.426 --> 00:12:01.096 A:middle
And finally, there is long

00:12:01.096 --> 00:12:03.436 A:middle
exposure, which analyzes the

00:12:03.436 --> 00:12:05.396 A:middle
video frames in a live photo to

00:12:05.396 --> 00:12:06.786 A:middle
create these amazing looking

00:12:06.866 --> 00:12:07.216 A:middle
stills.

00:12:07.796 --> 00:12:10.446 A:middle
So, we believe users are going

00:12:10.446 --> 00:12:11.456 A:middle
to have a lot of fun with these,

00:12:11.456 --> 00:12:12.486 A:middle
and we're also really excited

00:12:12.486 --> 00:12:13.596 A:middle
for what you come up with in

00:12:13.596 --> 00:12:14.996 A:middle
your apps when integrating with

00:12:14.996 --> 00:12:16.356 A:middle
these new kind of media types.

00:12:17.316 --> 00:12:18.186 A:middle
So, let's look at how you would

00:12:18.186 --> 00:12:18.576 A:middle
do that.

00:12:18.576 --> 00:12:22.256 A:middle
Let's look at some code.

00:12:22.256 --> 00:12:24.216 A:middle
So, these are the PhotoKit Media

00:12:24.216 --> 00:12:25.516 A:middle
types that currently exist.

00:12:26.026 --> 00:12:27.556 A:middle
They're great, they describe

00:12:27.556 --> 00:12:29.386 A:middle
what Asset is, but what's even

00:12:29.386 --> 00:12:30.996 A:middle
more important is how the asset

00:12:31.106 --> 00:12:31.886 A:middle
gets presented.

00:12:32.376 --> 00:12:33.396 A:middle
And let me explain what I mean

00:12:33.396 --> 00:12:34.006 A:middle
by that.

00:12:34.636 --> 00:12:36.596 A:middle
So, if a user shot a video, they

00:12:36.596 --> 00:12:38.226 A:middle
would really like to see and use

00:12:38.226 --> 00:12:40.056 A:middle
that asset as a video in your

00:12:40.056 --> 00:12:40.266 A:middle
app.

00:12:41.026 --> 00:12:43.026 A:middle
If they shot a live photo, they

00:12:43.026 --> 00:12:45.196 A:middle
care equally about the still

00:12:45.196 --> 00:12:46.326 A:middle
part and the video part.

00:12:46.326 --> 00:12:47.666 A:middle
So, they would like to see that

00:12:47.666 --> 00:12:49.076 A:middle
asset as a live photo in your

00:12:49.356 --> 00:12:49.806 A:middle
app.

00:12:50.316 --> 00:12:51.996 A:middle
To do this currently, you would

00:12:51.996 --> 00:12:53.796 A:middle
look at these three media types.

00:12:53.796 --> 00:12:55.896 A:middle
Image, video and photo live to

00:12:55.896 --> 00:12:56.516 A:middle
do the right thing.

00:12:57.726 --> 00:12:59.176 A:middle
With live photo effects this

00:12:59.176 --> 00:13:01.416 A:middle
become a bit more muddy and to

00:13:01.416 --> 00:13:02.876 A:middle
make this really easy to get

00:13:02.876 --> 00:13:03.946 A:middle
right, since it's so important,

00:13:04.736 --> 00:13:06.136 A:middle
this year in iOS 11, we're

00:13:06.136 --> 00:13:07.796 A:middle
introducing a new property of

00:13:07.796 --> 00:13:10.186 A:middle
PHAsset called PlaybackStyle.

00:13:11.036 --> 00:13:12.926 A:middle
Now, PlaybackStyle is the single

00:13:12.926 --> 00:13:13.956 A:middle
property you can look at to

00:13:13.956 --> 00:13:15.706 A:middle
determine which kind of image

00:13:15.706 --> 00:13:17.746 A:middle
manager API to use, what kind of

00:13:17.746 --> 00:13:19.236 A:middle
view to present it in, and what

00:13:19.236 --> 00:13:20.806 A:middle
kind of UI limits should

00:13:20.806 --> 00:13:21.736 A:middle
accompany the view.

00:13:22.206 --> 00:13:24.756 A:middle
So, the PhotoKit has been

00:13:24.756 --> 00:13:26.226 A:middle
updated to cover all these new

00:13:26.226 --> 00:13:27.816 A:middle
playback styles, but I'd like to

00:13:27.816 --> 00:13:29.406 A:middle
go into detail on three of them

00:13:29.546 --> 00:13:31.356 A:middle
that relate to life photo

00:13:31.356 --> 00:13:32.686 A:middle
affects here in this session.

00:13:33.476 --> 00:13:34.606 A:middle
So, let's start with image

00:13:34.606 --> 00:13:34.986 A:middle
animated.

00:13:35.566 --> 00:13:38.446 A:middle
So, new this year, the built in

00:13:38.446 --> 00:13:39.796 A:middle
Photos app is afford for

00:13:39.796 --> 00:13:42.946 A:middle
animated GIF playback.

00:13:43.516 --> 00:13:45.546 A:middle
[ Applause ]

00:13:46.046 --> 00:13:47.716 A:middle
To playback GIFs in your own

00:13:48.136 --> 00:13:49.196 A:middle
apps, you would request the

00:13:49.236 --> 00:13:50.696 A:middle
image data from the image manger

00:13:50.796 --> 00:13:52.406 A:middle
and then use image iO and core

00:13:52.406 --> 00:13:53.566 A:middle
graphics for playback.

00:13:53.926 --> 00:13:55.436 A:middle
Now, the sample app, does

00:13:55.436 --> 00:13:56.806 A:middle
include a sample of how to do

00:13:56.806 --> 00:13:57.036 A:middle
this.

00:13:57.286 --> 00:13:58.966 A:middle
So, please have a look there in

00:13:58.966 --> 00:14:00.326 A:middle
case you would like to do GIF

00:14:00.326 --> 00:14:00.606 A:middle
playback.

00:14:01.846 --> 00:14:03.856 A:middle
Next, is live photo.

00:14:04.986 --> 00:14:06.316 A:middle
So, live photos, users care a

00:14:06.316 --> 00:14:07.316 A:middle
lot about live photos.

00:14:07.316 --> 00:14:08.376 A:middle
So, getting them presented in

00:14:08.376 --> 00:14:09.866 A:middle
your app in the right way is

00:14:09.866 --> 00:14:10.886 A:middle
really important, but also

00:14:10.886 --> 00:14:11.596 A:middle
really easy.

00:14:12.346 --> 00:14:13.476 A:middle
So, in this case you would

00:14:13.636 --> 00:14:15.016 A:middle
request a live photo from the

00:14:15.016 --> 00:14:16.576 A:middle
image manager and then you say

00:14:16.856 --> 00:14:19.176 A:middle
PHLivePhotoView for playback.

00:14:20.316 --> 00:14:21.086 A:middle
You set the live photo, you'll

00:14:21.086 --> 00:14:22.566 A:middle
get back on the view and users

00:14:22.566 --> 00:14:24.486 A:middle
can then use three touch to

00:14:24.486 --> 00:14:25.696 A:middle
playback a live photo.

00:14:25.696 --> 00:14:26.856 A:middle
Users [inaudible] in the built

00:14:26.856 --> 00:14:28.586 A:middle
in photo's app inside your app.

00:14:29.396 --> 00:14:30.916 A:middle
PHLivePhotoView can also be used

00:14:30.916 --> 00:14:32.416 A:middle
with live photos outside the

00:14:32.416 --> 00:14:33.296 A:middle
user's photo library.

00:14:33.296 --> 00:14:34.606 A:middle
For example, if you transfer

00:14:34.606 --> 00:14:35.856 A:middle
them over web service or

00:14:35.856 --> 00:14:36.406 A:middle
something similar.

00:14:38.256 --> 00:14:40.616 A:middle
Finally, there is looping video.

00:14:40.716 --> 00:14:42.006 A:middle
And these include both the

00:14:42.006 --> 00:14:43.426 A:middle
bounds and loop live photo

00:14:43.426 --> 00:14:45.136 A:middle
effects that were introduced

00:14:45.136 --> 00:14:45.486 A:middle
this year.

00:14:45.786 --> 00:14:48.036 A:middle
Now, to play these back in your

00:14:48.036 --> 00:14:49.376 A:middle
apps, it's very similar to

00:14:49.376 --> 00:14:50.056 A:middle
regular video.

00:14:50.056 --> 00:14:51.046 A:middle
So, you would request the player

00:14:51.046 --> 00:14:52.676 A:middle
item, and use AVFoundation for

00:14:52.676 --> 00:14:53.106 A:middle
play back.

00:14:53.576 --> 00:14:54.286 A:middle
But you would use an

00:14:54.436 --> 00:14:56.046 A:middle
AVPlayerLooper to get the

00:14:56.046 --> 00:14:56.616 A:middle
looping effect.

00:14:57.146 --> 00:15:00.366 A:middle
So, I hope you have seen how

00:15:00.366 --> 00:15:02.156 A:middle
easy it is to present the user's

00:15:02.156 --> 00:15:03.386 A:middle
media how they really wanted to

00:15:03.386 --> 00:15:04.056 A:middle
be presented.

00:15:04.396 --> 00:15:05.726 A:middle
And we cannot wait to see what

00:15:05.726 --> 00:15:06.986 A:middle
you guys come up with in your

00:15:06.986 --> 00:15:08.716 A:middle
apps related to these new media

00:15:08.716 --> 00:15:09.166 A:middle
kinds.

00:15:10.466 --> 00:15:11.966 A:middle
Next, I'd like to talk about

00:15:11.966 --> 00:15:12.766 A:middle
iCloud Photo Library.

00:15:14.776 --> 00:15:17.366 A:middle
So, iCloud Photo Library is

00:15:17.366 --> 00:15:18.466 A:middle
really great because users can

00:15:18.466 --> 00:15:20.026 A:middle
now put their entire photo

00:15:20.026 --> 00:15:21.376 A:middle
library in their pocket.

00:15:21.826 --> 00:15:23.106 A:middle
And this is really great for

00:15:23.106 --> 00:15:24.966 A:middle
some users who have really large

00:15:24.966 --> 00:15:25.476 A:middle
libraries.

00:15:26.486 --> 00:15:27.366 A:middle
Some users have more than

00:15:27.366 --> 00:15:29.906 A:middle
100,000 photos in their photo

00:15:29.906 --> 00:15:31.296 A:middle
library, and they're not that

00:15:31.296 --> 00:15:32.166 A:middle
uncommon actually.

00:15:32.756 --> 00:15:34.436 A:middle
So, what kind of user has that

00:15:34.436 --> 00:15:35.016 A:middle
many photos?

00:15:35.016 --> 00:15:37.296 A:middle
Well, to get 100,000 photos, you

00:15:37.296 --> 00:15:39.336 A:middle
have to take 28 photos per day,

00:15:39.336 --> 00:15:42.046 A:middle
every day for 10 years straight.

00:15:42.556 --> 00:15:44.256 A:middle
So, these users obviously love

00:15:44.336 --> 00:15:46.186 A:middle
to use the camera and camera

00:15:46.186 --> 00:15:47.886 A:middle
apps, but they also tend to

00:15:47.886 --> 00:15:49.286 A:middle
download and use a lot of

00:15:49.286 --> 00:15:50.496 A:middle
photography-related apps.

00:15:51.296 --> 00:15:53.056 A:middle
These users are really important

00:15:53.116 --> 00:15:56.016 A:middle
to all of us in this room.

00:15:56.196 --> 00:15:57.726 A:middle
Now imagine one of these users,

00:15:57.726 --> 00:15:59.736 A:middle
after taking their daily 28

00:15:59.736 --> 00:16:01.616 A:middle
photos, they go to the App Store

00:16:01.616 --> 00:16:02.626 A:middle
to find an interesting app to

00:16:02.626 --> 00:16:02.976 A:middle
use.

00:16:03.406 --> 00:16:04.896 A:middle
They find your app.

00:16:05.456 --> 00:16:06.716 A:middle
They decide to download it and

00:16:06.716 --> 00:16:07.276 A:middle
give it a try.

00:16:07.386 --> 00:16:08.826 A:middle
And the first thing they see

00:16:08.826 --> 00:16:09.946 A:middle
when they start using your app,

00:16:10.416 --> 00:16:10.966 A:middle
is this.

00:16:14.706 --> 00:16:15.936 A:middle
Now, spinner for multiple

00:16:15.936 --> 00:16:17.626 A:middle
seconds are not a great user

00:16:17.626 --> 00:16:18.256 A:middle
experience.

00:16:18.606 --> 00:16:20.276 A:middle
And this user might uninstall

00:16:20.276 --> 00:16:22.176 A:middle
your app right away, or even

00:16:22.176 --> 00:16:23.406 A:middle
worse, leave a bad review.

00:16:24.066 --> 00:16:26.626 A:middle
So, you might be thinking, well

00:16:26.836 --> 00:16:28.996 A:middle
my app wouldn't do that, or if

00:16:28.996 --> 00:16:31.016 A:middle
it does, I'm using PhotoKit and

00:16:31.016 --> 00:16:32.116 A:middle
this user has a really large

00:16:32.116 --> 00:16:32.466 A:middle
library.

00:16:32.466 --> 00:16:33.636 A:middle
So, maybe this is to be

00:16:33.636 --> 00:16:34.146 A:middle
expected.

00:16:36.136 --> 00:16:37.566 A:middle
PhotoKit was designed from the

00:16:37.566 --> 00:16:39.546 A:middle
beginning to be really fast and

00:16:39.546 --> 00:16:41.286 A:middle
efficient with large photo

00:16:41.286 --> 00:16:41.786 A:middle
libraries.

00:16:42.446 --> 00:16:43.286 A:middle
But there are some common

00:16:43.286 --> 00:16:44.946 A:middle
mistakes clients make that can

00:16:44.946 --> 00:16:45.916 A:middle
mean the difference between

00:16:45.916 --> 00:16:47.606 A:middle
operation taking 10

00:16:47.606 --> 00:16:49.576 A:middle
milliseconds, and 10 seconds.

00:16:50.876 --> 00:16:52.616 A:middle
So, how do I fix this?

00:16:52.616 --> 00:16:53.876 A:middle
Well, since it's so easy to end

00:16:53.876 --> 00:16:54.966 A:middle
up with something taking a long

00:16:54.966 --> 00:16:58.206 A:middle
time, step number 1 is to test

00:16:58.206 --> 00:16:59.826 A:middle
your app with a large photo

00:16:59.826 --> 00:17:00.166 A:middle
library.

00:17:01.596 --> 00:17:02.726 A:middle
Now we already covered, it's

00:17:02.726 --> 00:17:03.746 A:middle
kind of difficult to get that

00:17:03.746 --> 00:17:04.846 A:middle
many photos using the camera

00:17:04.846 --> 00:17:05.076 A:middle
app.

00:17:05.656 --> 00:17:07.196 A:middle
So, this year we want to make

00:17:07.196 --> 00:17:08.116 A:middle
that really easy.

00:17:08.596 --> 00:17:09.896 A:middle
So, we're providing a sample app

00:17:09.896 --> 00:17:11.016 A:middle
that you can download called

00:17:11.146 --> 00:17:12.096 A:middle
photo library filler.

00:17:13.266 --> 00:17:14.426 A:middle
Download this app and install it

00:17:14.426 --> 00:17:15.366 A:middle
on your test device.

00:17:15.666 --> 00:17:17.446 A:middle
It will quickly generate a large

00:17:17.446 --> 00:17:18.876 A:middle
library for you to use for

00:17:18.876 --> 00:17:19.326 A:middle
testing.

00:17:20.766 --> 00:17:21.516 A:middle
So, great.

00:17:22.516 --> 00:17:26.176 A:middle
[ Applause ]

00:17:26.676 --> 00:17:28.026 A:middle
So, great you have a large

00:17:28.026 --> 00:17:29.456 A:middle
library, you test your app.

00:17:30.036 --> 00:17:31.026 A:middle
Chances are you might start

00:17:31.026 --> 00:17:31.766 A:middle
seeing some delays.

00:17:32.666 --> 00:17:34.276 A:middle
So, I'd like to talk about two

00:17:34.276 --> 00:17:35.876 A:middle
common problems clients have

00:17:35.876 --> 00:17:36.926 A:middle
with PhotoKit and their

00:17:36.926 --> 00:17:37.446 A:middle
solutions.

00:17:38.576 --> 00:17:41.416 A:middle
So, let's look at some code.

00:17:41.596 --> 00:17:43.076 A:middle
So, this is how you fetch assets

00:17:43.076 --> 00:17:44.446 A:middle
from the users' photos library.

00:17:44.446 --> 00:17:45.516 A:middle
There are two parts to this.

00:17:45.686 --> 00:17:46.896 A:middle
There is the database fetching

00:17:46.896 --> 00:17:48.296 A:middle
part, and then dealing with a

00:17:48.296 --> 00:17:48.706 A:middle
result.

00:17:49.976 --> 00:17:51.256 A:middle
Let's focus on the database

00:17:51.256 --> 00:17:52.126 A:middle
fetching part first.

00:17:52.466 --> 00:17:54.566 A:middle
So, here we're fetching all

00:17:54.566 --> 00:17:55.796 A:middle
assets on the library, but we're

00:17:55.796 --> 00:17:57.656 A:middle
filtering with a filter

00:17:57.656 --> 00:17:59.466 A:middle
predicate on favorite assets.

00:17:59.626 --> 00:18:01.176 A:middle
And we're sorting by creating

00:18:02.436 --> 00:18:02.526 A:middle
day.

00:18:02.576 --> 00:18:03.496 A:middle
If you're doing this kind of

00:18:03.496 --> 00:18:05.096 A:middle
custom fetches, they are

00:18:05.096 --> 00:18:06.906 A:middle
definitely supported, but if you

00:18:06.906 --> 00:18:08.306 A:middle
start seeing delays in these

00:18:08.306 --> 00:18:09.836 A:middle
kind of custom fetches, it's

00:18:09.866 --> 00:18:11.316 A:middle
definitely worth trying to

00:18:11.736 --> 00:18:13.076 A:middle
simplify the predicate or

00:18:13.076 --> 00:18:14.426 A:middle
simplify the sort descriptor.

00:18:14.816 --> 00:18:16.156 A:middle
And that can mean the difference

00:18:16.156 --> 00:18:18.626 A:middle
between this query taking 10

00:18:18.626 --> 00:18:20.066 A:middle
milliseconds and 10 seconds.

00:18:20.806 --> 00:18:22.196 A:middle
The reason for this drastic

00:18:22.196 --> 00:18:24.036 A:middle
difference is that you might end

00:18:24.036 --> 00:18:26.066 A:middle
up outside the optimized path in

00:18:26.066 --> 00:18:28.426 A:middle
the database and trying to get

00:18:28.426 --> 00:18:29.806 A:middle
back into the optimized path can

00:18:29.806 --> 00:18:30.606 A:middle
really pay off.

00:18:32.126 --> 00:18:33.636 A:middle
So, even better than doing these

00:18:33.636 --> 00:18:35.416 A:middle
kind of custom fetches, is to

00:18:35.416 --> 00:18:36.706 A:middle
avoid them if it's possible.

00:18:37.316 --> 00:18:38.556 A:middle
So, in this case we can actually

00:18:38.556 --> 00:18:40.326 A:middle
fetch the user's favorite smart

00:18:40.326 --> 00:18:42.236 A:middle
album and then fetch the assets

00:18:42.236 --> 00:18:43.356 A:middle
inside of the smart album.

00:18:43.796 --> 00:18:45.076 A:middle
That gives both the predicate

00:18:45.136 --> 00:18:46.156 A:middle
and the sort descriptor for

00:18:46.156 --> 00:18:46.586 A:middle
free.

00:18:46.866 --> 00:18:48.546 A:middle
And you're guaranteed to end up

00:18:48.546 --> 00:18:50.246 A:middle
in the optimized path in

00:18:50.246 --> 00:18:50.636 A:middle
PhotoKit.

00:18:53.046 --> 00:18:54.626 A:middle
So, next, let's look at the

00:18:54.626 --> 00:18:56.016 A:middle
result you get back from one of

00:18:56.016 --> 00:18:57.586 A:middle
these kinds of fetches.

00:18:57.586 --> 00:18:59.596 A:middle
So, this object is a PHFetch

00:18:59.596 --> 00:18:59.926 A:middle
result.

00:19:00.896 --> 00:19:02.566 A:middle
Now in a PHFetch result looks a

00:19:02.566 --> 00:19:04.186 A:middle
lot like an array and you can

00:19:04.186 --> 00:19:05.306 A:middle
use it a lot like an array.

00:19:05.726 --> 00:19:07.846 A:middle
You can ask for object and

00:19:07.846 --> 00:19:08.396 A:middle
index.

00:19:08.876 --> 00:19:10.196 A:middle
You can ask for its count, and

00:19:10.196 --> 00:19:11.206 A:middle
you can enumerate it.

00:19:11.956 --> 00:19:14.226 A:middle
But internally, a fetch result

00:19:14.226 --> 00:19:16.216 A:middle
works very differently from an

00:19:16.216 --> 00:19:17.596 A:middle
array, and is part of the reason

00:19:17.596 --> 00:19:18.916 A:middle
PhotoKit can be so fast and

00:19:18.916 --> 00:19:20.416 A:middle
efficient with large libraries.

00:19:20.416 --> 00:19:21.816 A:middle
So, let's look at how it works

00:19:21.816 --> 00:19:22.326 A:middle
internally.

00:19:23.956 --> 00:19:26.496 A:middle
So, initially it just contains a

00:19:26.496 --> 00:19:27.836 A:middle
list of identifiers.

00:19:28.166 --> 00:19:29.386 A:middle
And this means you can get back

00:19:29.386 --> 00:19:30.656 A:middle
one fairly quickly.

00:19:30.996 --> 00:19:32.146 A:middle
But as you start using it,

00:19:32.456 --> 00:19:33.656 A:middle
additional work has to be

00:19:33.656 --> 00:19:34.126 A:middle
performed.

00:19:34.736 --> 00:19:36.396 A:middle
So, let's look at enumeration as

00:19:36.396 --> 00:19:36.926 A:middle
an example.

00:19:37.536 --> 00:19:38.966 A:middle
And here we're starting

00:19:38.966 --> 00:19:40.226 A:middle
enumeration at index 0.

00:19:41.456 --> 00:19:42.776 A:middle
So you only have an identifier

00:19:42.776 --> 00:19:44.186 A:middle
so far, so we need to fetch

00:19:44.246 --> 00:19:46.146 A:middle
metadata form the database in

00:19:46.146 --> 00:19:47.696 A:middle
order to create a PHAsset object

00:19:47.696 --> 00:19:49.716 A:middle
to return to you in the block.

00:19:51.036 --> 00:19:52.376 A:middle
Now, the fetch result is pretty

00:19:52.596 --> 00:19:52.966 A:middle
smart.

00:19:52.966 --> 00:19:54.036 A:middle
It's actually going to create a

00:19:54.036 --> 00:19:55.366 A:middle
batch at the same time.

00:19:55.816 --> 00:19:57.326 A:middle
So, as we continue enumeration,

00:19:57.566 --> 00:19:58.906 A:middle
index 1 and 2 are already in

00:19:58.906 --> 00:19:59.286 A:middle
memory.

00:20:00.166 --> 00:20:01.826 A:middle
And then enumeration continues

00:20:01.826 --> 00:20:02.646 A:middle
and you get the idea.

00:20:03.176 --> 00:20:04.736 A:middle
It's going to access the disk to

00:20:04.736 --> 00:20:06.566 A:middle
get the metadata for subsequent

00:20:08.726 --> 00:20:08.906 A:middle
assets.

00:20:09.096 --> 00:20:10.276 A:middle
So, for this kind of small fetch

00:20:10.276 --> 00:20:11.446 A:middle
result this doesn't matter.

00:20:11.796 --> 00:20:12.836 A:middle
But I would image this fetch

00:20:12.836 --> 00:20:16.826 A:middle
result has 100,000 assets in it.

00:20:17.056 --> 00:20:18.316 A:middle
Each batch takes a couple of

00:20:18.316 --> 00:20:19.356 A:middle
kilobytes of memory.

00:20:20.086 --> 00:20:21.306 A:middle
But when you have 100,000 of

00:20:21.306 --> 00:20:22.466 A:middle
them you're looking at hundreds

00:20:22.466 --> 00:20:24.016 A:middle
of megabytes of memory usage.

00:20:24.766 --> 00:20:27.136 A:middle
And even worse, each batch take

00:20:27.136 --> 00:20:28.416 A:middle
a couple of milliseconds to

00:20:28.416 --> 00:20:28.836 A:middle
fetch.

00:20:29.196 --> 00:20:30.306 A:middle
But when you have 100,000 of

00:20:30.306 --> 00:20:31.656 A:middle
them, you're looking at 10

00:20:31.656 --> 00:20:33.496 A:middle
seconds to enumerate a large

00:20:33.496 --> 00:20:34.076 A:middle
fetch result.

00:20:34.536 --> 00:20:36.076 A:middle
So, enumeration is clearly

00:20:36.076 --> 00:20:37.776 A:middle
something we should try to avoid

00:20:37.856 --> 00:20:38.636 A:middle
if at all possible.

00:20:40.026 --> 00:20:41.856 A:middle
We have found that it's almost

00:20:41.856 --> 00:20:43.206 A:middle
always possible to avoid

00:20:43.206 --> 00:20:43.776 A:middle
enumeration.

00:20:43.776 --> 00:20:45.206 A:middle
And I would like to look at one

00:20:45.206 --> 00:20:46.436 A:middle
example of how it can be

00:20:46.436 --> 00:20:46.766 A:middle
avoided.

00:20:49.256 --> 00:20:51.026 A:middle
So, in this case, we're trying

00:20:51.026 --> 00:20:52.846 A:middle
to find the index of an asset

00:20:52.846 --> 00:20:54.016 A:middle
that inside a fetch result.

00:20:54.786 --> 00:20:55.986 A:middle
Now, we could enumerate the

00:20:55.986 --> 00:20:57.276 A:middle
fetch result and compare the

00:20:57.276 --> 00:20:59.066 A:middle
objects we get back using is

00:20:59.066 --> 00:20:59.486 A:middle
equal.

00:20:59.916 --> 00:21:01.386 A:middle
But as we saw enumeration can be

00:21:01.386 --> 00:21:01.996 A:middle
quite slow.

00:21:02.706 --> 00:21:04.706 A:middle
So, even better is to actually

00:21:04.706 --> 00:21:05.546 A:middle
use high level API.

00:21:05.676 --> 00:21:07.016 A:middle
In this case, we can use index

00:21:07.016 --> 00:21:07.496 A:middle
of object.

00:21:07.606 --> 00:21:09.576 A:middle
And that is able to internally,

00:21:09.576 --> 00:21:10.526 A:middle
in the fetch result be really

00:21:10.526 --> 00:21:12.546 A:middle
smart and compare the

00:21:12.616 --> 00:21:14.396 A:middle
identifiers with the object

00:21:14.396 --> 00:21:15.066 A:middle
you're looking for.

00:21:15.506 --> 00:21:17.426 A:middle
And array will define this index

00:21:17.426 --> 00:21:18.816 A:middle
without any additional disk

00:21:18.816 --> 00:21:20.826 A:middle
access or database fetching at

00:21:20.826 --> 00:21:21.036 A:middle
all.

00:21:22.016 --> 00:21:23.666 A:middle
Same goes for contains object.

00:21:25.466 --> 00:21:27.196 A:middle
So, I hope you have seen how

00:21:27.196 --> 00:21:29.086 A:middle
easy it is to get a large

00:21:29.086 --> 00:21:30.226 A:middle
library to test your app with.

00:21:30.386 --> 00:21:31.916 A:middle
And how easy it can be to really

00:21:32.016 --> 00:21:33.756 A:middle
make a huge different in the

00:21:33.756 --> 00:21:34.646 A:middle
performance of your app.

00:21:35.356 --> 00:21:37.536 A:middle
Small fixes can mean multiple

00:21:37.536 --> 00:21:38.736 A:middle
seconds of time savings.

00:21:39.356 --> 00:21:41.866 A:middle
If you do have questions on

00:21:41.866 --> 00:21:42.916 A:middle
PhotoKit performance, please

00:21:42.916 --> 00:21:44.026 A:middle
come see us in the lab tomorrow

00:21:44.026 --> 00:21:44.426 A:middle
morning.

00:21:44.736 --> 00:21:46.206 A:middle
If you do encounter issues that

00:21:46.206 --> 00:21:47.226 A:middle
you're not able to resolve,

00:21:47.686 --> 00:21:48.156 A:middle
please file [inaudible].

00:21:48.156 --> 00:21:50.456 A:middle
And if there's one thing you

00:21:50.456 --> 00:21:51.416 A:middle
remember from this part of the

00:21:51.416 --> 00:21:53.806 A:middle
session, please test your app

00:21:53.856 --> 00:21:55.156 A:middle
with the large photo library and

00:21:55.156 --> 00:21:56.776 A:middle
take really good care of these

00:21:56.776 --> 00:21:57.906 A:middle
really important users.

00:21:58.416 --> 00:22:01.126 A:middle
Next, I'd like to welcome Eric

00:22:01.126 --> 00:22:02.826 A:middle
Hanson back to the stage to talk

00:22:02.826 --> 00:22:04.196 A:middle
about Photo Project Extensions.

00:22:04.656 --> 00:22:06.376 A:middle
Eric [applause].

00:22:06.736 --> 00:22:07.546 A:middle
&gt;&gt; Thank you Andreas.

00:22:09.416 --> 00:22:10.176 A:middle
Thank you very much.

00:22:10.176 --> 00:22:13.046 A:middle
I am really, really excited to

00:22:13.046 --> 00:22:14.176 A:middle
finally be able to talk about

00:22:14.176 --> 00:22:15.126 A:middle
something we've been working

00:22:15.126 --> 00:22:17.396 A:middle
really hard on this year in High

00:22:17.396 --> 00:22:17.846 A:middle
Sierra.

00:22:17.966 --> 00:22:19.156 A:middle
So much so that I need a sip of

00:22:19.156 --> 00:22:19.746 A:middle
water, sorry.

00:22:20.426 --> 00:22:20.746 A:middle
All right.

00:22:21.476 --> 00:22:26.166 A:middle
So, we're going to talk about

00:22:26.166 --> 00:22:27.816 A:middle
Photos project extension.

00:22:28.416 --> 00:22:30.136 A:middle
And I think to kick this off we

00:22:30.136 --> 00:22:31.066 A:middle
have to talk about what are

00:22:31.066 --> 00:22:31.836 A:middle
projects.

00:22:32.816 --> 00:22:34.906 A:middle
You know Apple has been allowing

00:22:34.906 --> 00:22:38.146 A:middle
users to create these really

00:22:38.146 --> 00:22:40.156 A:middle
rich creative photo centric

00:22:40.186 --> 00:22:42.546 A:middle
projects in the photos apps for

00:22:42.546 --> 00:22:43.466 A:middle
a very long time.

00:22:43.466 --> 00:22:44.706 A:middle
Actually, going all the way back

00:22:44.706 --> 00:22:46.616 A:middle
to iPhoto 1.0 when we first

00:22:46.616 --> 00:22:48.266 A:middle
released photobooks.

00:22:48.846 --> 00:22:51.466 A:middle
But this year, we wanted to do

00:22:51.466 --> 00:22:52.236 A:middle
something different.

00:22:52.736 --> 00:22:55.726 A:middle
Because during that time, 14

00:22:55.726 --> 00:22:58.236 A:middle
years, you as developers have

00:22:58.236 --> 00:23:00.086 A:middle
been building up some really

00:23:00.086 --> 00:23:02.116 A:middle
great experiences yourself with

00:23:02.116 --> 00:23:02.926 A:middle
your own apps.

00:23:03.866 --> 00:23:05.526 A:middle
And we thought, you know, let's

00:23:05.666 --> 00:23:06.506 A:middle
bring this together.

00:23:06.506 --> 00:23:08.426 A:middle
Let's give you an opportunity to

00:23:08.426 --> 00:23:10.306 A:middle
actually create something that's

00:23:10.306 --> 00:23:12.636 A:middle
a fantastic experience directly

00:23:12.636 --> 00:23:13.606 A:middle
within the Photos app.

00:23:13.736 --> 00:23:15.376 A:middle
And that's exactly what we've

00:23:15.376 --> 00:23:16.496 A:middle
done with the extensions.

00:23:17.026 --> 00:23:19.716 A:middle
We started working on the API,

00:23:19.716 --> 00:23:22.096 A:middle
engage just a few developers to

00:23:22.096 --> 00:23:23.086 A:middle
kind of see what they would do

00:23:23.086 --> 00:23:23.456 A:middle
with it.

00:23:23.456 --> 00:23:25.596 A:middle
Companies like Shutterfly, who

00:23:25.596 --> 00:23:26.636 A:middle
are going to be launching with

00:23:26.636 --> 00:23:27.966 A:middle
their own photobooks and photos

00:23:27.966 --> 00:23:28.546 A:middle
in the fall.

00:23:29.796 --> 00:23:31.156 A:middle
A company called WhiteWall that

00:23:31.156 --> 00:23:32.586 A:middle
allows you to do these gallery

00:23:32.586 --> 00:23:34.686 A:middle
quality framed prints.

00:23:35.816 --> 00:23:38.776 A:middle
Wix.com that created a brand-new

00:23:38.776 --> 00:23:40.676 A:middle
feature allowing users to easily

00:23:40.676 --> 00:23:42.846 A:middle
create web photo albums.

00:23:43.836 --> 00:23:46.776 A:middle
Animoto, that allows users to

00:23:46.776 --> 00:23:48.116 A:middle
create these really beautiful

00:23:48.116 --> 00:23:49.776 A:middle
movies that are server hosted

00:23:49.776 --> 00:23:50.896 A:middle
and integrated with social

00:23:50.896 --> 00:23:51.366 A:middle
media.

00:23:52.196 --> 00:23:56.206 A:middle
And a company called ifolor that

00:23:56.596 --> 00:23:58.046 A:middle
did something really novel.

00:23:58.436 --> 00:24:00.696 A:middle
They kind of started from the

00:24:00.696 --> 00:24:03.076 A:middle
ground floor and looked at this

00:24:03.076 --> 00:24:05.016 A:middle
as an opportunity for you know

00:24:05.016 --> 00:24:06.286 A:middle
what could they build that

00:24:06.286 --> 00:24:07.776 A:middle
really tied into the photos

00:24:07.776 --> 00:24:09.386 A:middle
ecosystem and really created

00:24:09.386 --> 00:24:10.576 A:middle
some magic for the user.

00:24:11.076 --> 00:24:12.646 A:middle
And I think rather than explain

00:24:12.646 --> 00:24:13.066 A:middle
it.

00:24:13.066 --> 00:24:14.566 A:middle
I want to show you a quick demo.

00:24:14.936 --> 00:24:17.096 A:middle
So here we are in the photos app

00:24:17.096 --> 00:24:17.906 A:middle
on High Sierra.

00:24:18.656 --> 00:24:19.996 A:middle
And I'm in memories.

00:24:19.996 --> 00:24:21.186 A:middle
And I've got this favorite

00:24:21.186 --> 00:24:22.746 A:middle
memory here, together that I'm

00:24:22.746 --> 00:24:23.536 A:middle
just going to select.

00:24:24.396 --> 00:24:26.386 A:middle
And I can hover over my project

00:24:26.966 --> 00:24:28.266 A:middle
section in the side bar and you

00:24:28.266 --> 00:24:29.526 A:middle
see this little button.

00:24:30.126 --> 00:24:31.156 A:middle
And you'll notice that in

00:24:31.156 --> 00:24:32.556 A:middle
addition to the Apple offerings

00:24:32.556 --> 00:24:34.966 A:middle
we currently have, photos has

00:24:34.966 --> 00:24:36.306 A:middle
automatically discovered that I

00:24:36.306 --> 00:24:37.466 A:middle
have another application

00:24:37.466 --> 00:24:40.926 A:middle
installed, called ifolor wall

00:24:40.926 --> 00:24:41.286 A:middle
décor.

00:24:41.686 --> 00:24:42.836 A:middle
So, this extension is now

00:24:42.836 --> 00:24:44.606 A:middle
exposed to me.

00:24:44.906 --> 00:24:46.896 A:middle
I simply select that and I'm

00:24:46.896 --> 00:24:48.556 A:middle
presented with some choices.

00:24:48.876 --> 00:24:50.216 A:middle
Now these choices are coming

00:24:50.216 --> 00:24:52.186 A:middle
from the extension itself.

00:24:52.746 --> 00:24:53.976 A:middle
So, before we've even loaded the

00:24:53.976 --> 00:24:55.256 A:middle
extension, the extension is

00:24:55.256 --> 00:24:56.936 A:middle
notifying us that you know,

00:24:56.936 --> 00:24:59.216 A:middle
before you push a project to me

00:24:59.216 --> 00:25:00.886 A:middle
I want the user to make a

00:25:00.886 --> 00:25:01.376 A:middle
choice.

00:25:01.376 --> 00:25:03.016 A:middle
I want to be able to fork my own

00:25:03.066 --> 00:25:03.366 A:middle
code.

00:25:04.206 --> 00:25:05.526 A:middle
So, they give us the title and

00:25:05.526 --> 00:25:06.826 A:middle
the description and the image.

00:25:07.186 --> 00:25:08.336 A:middle
Photos actually lays it out

00:25:08.336 --> 00:25:09.436 A:middle
beautifully in the sheet.

00:25:10.356 --> 00:25:11.556 A:middle
And I'm just going to pick that

00:25:11.556 --> 00:25:12.226 A:middle
first option.

00:25:12.326 --> 00:25:15.156 A:middle
I hit the create button, and

00:25:16.146 --> 00:25:18.816 A:middle
now, their extension, their view

00:25:18.816 --> 00:25:19.966 A:middle
controller is going to be pushed

00:25:19.966 --> 00:25:21.156 A:middle
directly into photos.

00:25:21.446 --> 00:25:23.906 A:middle
Full view, but this is their UI,

00:25:23.906 --> 00:25:25.646 A:middle
this is their experience inside

00:25:25.646 --> 00:25:26.246 A:middle
photos.

00:25:27.276 --> 00:25:28.276 A:middle
Now, they've leveraged the

00:25:28.276 --> 00:25:30.496 A:middle
memory in this case and taken

00:25:30.496 --> 00:25:32.596 A:middle
the hints we provided to lay out

00:25:32.596 --> 00:25:33.246 A:middle
this grid.

00:25:34.106 --> 00:25:36.736 A:middle
But they've also taken hints we

00:25:36.736 --> 00:25:39.936 A:middle
provided to let me get at all of

00:25:39.936 --> 00:25:41.276 A:middle
the images that were considered

00:25:41.276 --> 00:25:42.486 A:middle
when the memory was created.

00:25:42.906 --> 00:25:44.256 A:middle
So, you'll notice over here on

00:25:44.256 --> 00:25:45.936 A:middle
the bottom right, if you can see

00:25:45.936 --> 00:25:46.856 A:middle
it, you can't because it's

00:25:46.886 --> 00:25:49.016 A:middle
behind me, 283 images.

00:25:49.766 --> 00:25:51.676 A:middle
And what's was really cool about

00:25:51.676 --> 00:25:52.716 A:middle
that is I can actually

00:25:52.716 --> 00:25:53.276 A:middle
customize.

00:25:53.276 --> 00:25:54.916 A:middle
So, I'll switch this to unused

00:25:54.916 --> 00:25:57.646 A:middle
images, because there's a photo

00:25:57.646 --> 00:25:59.426 A:middle
that I like a little bit better.

00:26:00.616 --> 00:26:03.826 A:middle
I'll take this one, that I think

00:26:03.826 --> 00:26:04.996 A:middle
would be a really great hero

00:26:04.996 --> 00:26:05.356 A:middle
shot.

00:26:05.356 --> 00:26:06.936 A:middle
So, I can just drag that up and

00:26:06.936 --> 00:26:08.026 A:middle
customize this layout.

00:26:08.026 --> 00:26:11.226 A:middle
And they went a step further

00:26:11.226 --> 00:26:11.766 A:middle
than that.

00:26:11.766 --> 00:26:13.286 A:middle
They let me customize the grid

00:26:13.286 --> 00:26:15.856 A:middle
itself in a really novel way.

00:26:16.186 --> 00:26:17.346 A:middle
So, I want to give a little more

00:26:17.346 --> 00:26:18.636 A:middle
emphasis to this row.

00:26:18.716 --> 00:26:20.706 A:middle
And maybe move this down.

00:26:21.676 --> 00:26:22.986 A:middle
And I'll move this down to line

00:26:22.986 --> 00:26:26.226 A:middle
it up and you know let's do one

00:26:26.226 --> 00:26:26.736 A:middle
more.

00:26:26.736 --> 00:26:29.446 A:middle
And I really like that.

00:26:29.596 --> 00:26:30.556 A:middle
So, I could just hit the buy

00:26:30.556 --> 00:26:32.516 A:middle
button now, still within photos.

00:26:33.826 --> 00:26:35.276 A:middle
Choose my size, this would show

00:26:35.276 --> 00:26:35.966 A:middle
up in the mail.

00:26:35.966 --> 00:26:36.976 A:middle
And I have this memory hanging

00:26:36.976 --> 00:26:37.966 A:middle
on the wall in my den.

00:26:38.496 --> 00:26:39.216 A:middle
It's pretty cool.

00:26:39.256 --> 00:26:40.626 A:middle
That's just a really quick tour

00:26:41.426 --> 00:26:42.526 A:middle
of ifolor.

00:26:43.516 --> 00:26:48.876 A:middle
[ Applause ]

00:26:49.376 --> 00:26:51.616 A:middle
So, what you want to know is how

00:26:51.616 --> 00:26:53.126 A:middle
does this all work.

00:26:54.416 --> 00:26:56.726 A:middle
If you're familiar with the

00:26:56.726 --> 00:26:58.966 A:middle
editing extensions in Photos,

00:26:59.736 --> 00:27:02.646 A:middle
you already have a good sense of

00:27:02.646 --> 00:27:03.356 A:middle
how this works.

00:27:04.616 --> 00:27:05.976 A:middle
We've added a new extension

00:27:05.976 --> 00:27:08.276 A:middle
point to Photos;

00:27:08.496 --> 00:27:10.956 A:middle
com.apple.photo-project.

00:27:12.046 --> 00:27:14.196 A:middle
And we've added a new template

00:27:14.196 --> 00:27:17.116 A:middle
within Xcode that lets you

00:27:17.116 --> 00:27:18.136 A:middle
easily create one of these

00:27:18.136 --> 00:27:19.226 A:middle
extensions in your own app.

00:27:20.256 --> 00:27:23.036 A:middle
As you saw, in the demo, we

00:27:23.036 --> 00:27:24.306 A:middle
automatically discovered your

00:27:24.306 --> 00:27:25.856 A:middle
extension, raising the

00:27:25.856 --> 00:27:27.476 A:middle
discoverability of your app on

00:27:27.476 --> 00:27:28.096 A:middle
the system.

00:27:28.306 --> 00:27:30.396 A:middle
But we took discoverability a

00:27:30.396 --> 00:27:31.226 A:middle
step further.

00:27:32.506 --> 00:27:34.796 A:middle
By offering users a direct link

00:27:34.796 --> 00:27:37.776 A:middle
to the App Store that brings up

00:27:37.776 --> 00:27:39.366 A:middle
the App Store window, but

00:27:39.586 --> 00:27:41.116 A:middle
doesn't require them to search

00:27:41.116 --> 00:27:43.446 A:middle
for an app with that extension.

00:27:43.946 --> 00:27:45.716 A:middle
It automatically shows only the

00:27:45.716 --> 00:27:47.306 A:middle
apps that support that extension

00:27:47.306 --> 00:27:47.616 A:middle
point.

00:27:48.286 --> 00:27:49.626 A:middle
And we think this is really

00:27:49.626 --> 00:27:51.886 A:middle
going to heighten the ability

00:27:51.886 --> 00:27:53.776 A:middle
for users to discover your apps

00:27:53.776 --> 00:27:54.896 A:middle
and quickly download them, and

00:27:54.896 --> 00:27:55.896 A:middle
start working with them.

00:27:56.806 --> 00:27:58.796 A:middle
So much so that we put a similar

00:27:58.796 --> 00:28:00.206 A:middle
App Store link in edit.

00:28:01.066 --> 00:28:02.656 A:middle
And so, if you're already doing

00:28:02.926 --> 00:28:05.536 A:middle
image editing extensions, users

00:28:05.536 --> 00:28:06.706 A:middle
will have a direct link into the

00:28:06.706 --> 00:28:07.836 A:middle
App Store to immediately

00:28:07.836 --> 00:28:10.136 A:middle
discover you editing extensions.

00:28:11.196 --> 00:28:13.786 A:middle
It's pretty cool.

00:28:16.706 --> 00:28:20.196 A:middle
So, your extension lives within

00:28:20.196 --> 00:28:21.566 A:middle
the app, within your app.

00:28:22.726 --> 00:28:23.846 A:middle
And that's really a great

00:28:23.846 --> 00:28:24.776 A:middle
opportunity for you.

00:28:24.776 --> 00:28:25.726 A:middle
Because you may already have an

00:28:25.726 --> 00:28:27.506 A:middle
app in the App Store that's got

00:28:27.506 --> 00:28:29.196 A:middle
a lot of app specific code, but

00:28:29.196 --> 00:28:31.306 A:middle
you probably have some resources

00:28:31.486 --> 00:28:32.946 A:middle
and some other sharable code

00:28:32.946 --> 00:28:34.246 A:middle
that you could easily move kind

00:28:34.246 --> 00:28:35.936 A:middle
of into this extension space and

00:28:35.936 --> 00:28:37.966 A:middle
leverage those.

00:28:37.966 --> 00:28:40.296 A:middle
You obviously also have some

00:28:40.706 --> 00:28:42.396 A:middle
extension specific code that you

00:28:42.396 --> 00:28:43.066 A:middle
would need to write.

00:28:43.066 --> 00:28:44.366 A:middle
A very small amount.

00:28:44.966 --> 00:28:46.316 A:middle
And finally, you just need to

00:28:46.316 --> 00:28:48.376 A:middle
add a view controller that

00:28:48.376 --> 00:28:50.316 A:middle
implements this protocol.

00:28:50.316 --> 00:28:52.376 A:middle
The PH project extension control

00:28:52.376 --> 00:28:52.896 A:middle
protocol.

00:28:53.886 --> 00:28:56.516 A:middle
With all that in place, Photos

00:28:56.516 --> 00:28:59.146 A:middle
can immediately discover your

00:28:59.146 --> 00:28:59.676 A:middle
extension.

00:29:00.626 --> 00:29:02.486 A:middle
Let the user choose to you know

00:29:02.486 --> 00:29:04.846 A:middle
to create a product with that

00:29:05.116 --> 00:29:07.216 A:middle
and we simply call this protocol

00:29:07.216 --> 00:29:08.416 A:middle
method begin project.

00:29:09.456 --> 00:29:12.806 A:middle
And when we do we send over a

00:29:12.996 --> 00:29:15.026 A:middle
couple bits of data.

00:29:15.796 --> 00:29:16.986 A:middle
So, in addition to the photos

00:29:16.986 --> 00:29:18.246 A:middle
we're sending you, the project

00:29:18.246 --> 00:29:20.166 A:middle
extension context, and we're

00:29:20.166 --> 00:29:22.136 A:middle
sending you an object called

00:29:22.136 --> 00:29:22.986 A:middle
PHProjectInfo.

00:29:24.046 --> 00:29:25.286 A:middle
You can consume that in whatever

00:29:25.286 --> 00:29:25.996 A:middle
way you want.

00:29:27.156 --> 00:29:28.616 A:middle
And then you just quickly call

00:29:28.616 --> 00:29:30.836 A:middle
back the completion closure that

00:29:30.836 --> 00:29:31.466 A:middle
we hand you.

00:29:32.196 --> 00:29:33.606 A:middle
And that let's Photos know it

00:29:33.606 --> 00:29:34.586 A:middle
can install your view

00:29:34.586 --> 00:29:37.066 A:middle
controller, full view inside the

00:29:37.066 --> 00:29:37.636 A:middle
Photos app.

00:29:37.676 --> 00:29:40.086 A:middle
And from that point, as you saw,

00:29:40.306 --> 00:29:41.756 A:middle
it's totally your UI.

00:29:41.756 --> 00:29:43.376 A:middle
It's your experience.

00:29:43.636 --> 00:29:45.876 A:middle
You have all of that API

00:29:45.876 --> 00:29:49.966 A:middle
available to you on macOS to

00:29:50.276 --> 00:29:52.036 A:middle
leverage from and build a really

00:29:52.036 --> 00:29:53.156 A:middle
killed experience for your

00:29:53.156 --> 00:29:53.586 A:middle
users.

00:29:54.146 --> 00:29:58.216 A:middle
So, the protocol itself is

00:29:58.216 --> 00:29:58.876 A:middle
really simple.

00:29:59.596 --> 00:30:01.856 A:middle
There's an optional property for

00:30:01.856 --> 00:30:03.686 A:middle
supported project types and you

00:30:03.686 --> 00:30:05.366 A:middle
saw this in the demo I just did.

00:30:06.046 --> 00:30:06.976 A:middle
And this lets you quickly

00:30:06.976 --> 00:30:08.316 A:middle
describe the choices you want a

00:30:08.316 --> 00:30:09.006 A:middle
user to make.

00:30:09.276 --> 00:30:10.746 A:middle
And you can opt out of this if

00:30:10.746 --> 00:30:11.736 A:middle
you want, you just want to

00:30:11.736 --> 00:30:12.796 A:middle
straight into the extension.

00:30:12.796 --> 00:30:14.346 A:middle
That's totally possible as well.

00:30:14.346 --> 00:30:17.036 A:middle
And then there are few required

00:30:17.036 --> 00:30:18.286 A:middle
functions you need to implement

00:30:18.286 --> 00:30:19.296 A:middle
in your view controller.

00:30:20.236 --> 00:30:21.656 A:middle
The first is begin project.

00:30:22.676 --> 00:30:23.486 A:middle
That's where we hand you the

00:30:23.486 --> 00:30:24.106 A:middle
context.

00:30:24.106 --> 00:30:24.956 A:middle
And we hand you the product

00:30:24.956 --> 00:30:25.346 A:middle
info.

00:30:26.576 --> 00:30:28.206 A:middle
And that's what we call the

00:30:28.206 --> 00:30:30.196 A:middle
first time a project is created

00:30:30.996 --> 00:30:32.276 A:middle
with your extension.

00:30:33.206 --> 00:30:35.306 A:middle
Now, if a user is coming back to

00:30:35.306 --> 00:30:36.776 A:middle
your extension for a project

00:30:36.776 --> 00:30:38.786 A:middle
they already created, we instead

00:30:38.786 --> 00:30:40.296 A:middle
call resume project.

00:30:40.696 --> 00:30:42.086 A:middle
And again, hand you this

00:30:42.086 --> 00:30:43.266 A:middle
extension context.

00:30:43.716 --> 00:30:48.586 A:middle
And finally, if a user is in

00:30:48.586 --> 00:30:50.596 A:middle
your extension and they decide

00:30:50.596 --> 00:30:51.786 A:middle
to switch away to do something

00:30:51.786 --> 00:30:53.616 A:middle
else within photos, we're simply

00:30:53.616 --> 00:30:54.876 A:middle
going to call finishProject.

00:30:54.876 --> 00:30:56.826 A:middle
Allowing you to clean up any

00:30:56.826 --> 00:30:57.806 A:middle
kind of data you're holding

00:30:57.806 --> 00:30:58.226 A:middle
onto.

00:30:58.226 --> 00:31:00.476 A:middle
Maybe quiet down any processor

00:31:00.476 --> 00:31:02.336 A:middle
intensive tasks or animations

00:31:02.336 --> 00:31:04.286 A:middle
thing like that that you might

00:31:07.496 --> 00:31:08.616 A:middle
be doing.

00:31:08.616 --> 00:31:10.456 A:middle
So, PHProject extension context

00:31:11.186 --> 00:31:13.156 A:middle
is a container for two really

00:31:13.156 --> 00:31:14.176 A:middle
important objects.

00:31:14.176 --> 00:31:17.396 A:middle
One is PHProject, and the other

00:31:17.396 --> 00:31:20.436 A:middle
PHPhotoLibrary, which is the

00:31:20.436 --> 00:31:21.616 A:middle
library from which you're going

00:31:21.616 --> 00:31:24.066 A:middle
to fetch all the assets.

00:31:26.856 --> 00:31:31.736 A:middle
PHProject itself is just a

00:31:32.076 --> 00:31:34.286 A:middle
subclass of PHAsset collection.

00:31:34.736 --> 00:31:37.226 A:middle
You may already be familiar with

00:31:37.226 --> 00:31:38.016 A:middle
PHAssetCollection.

00:31:39.296 --> 00:31:41.586 A:middle
It's a container.

00:31:41.716 --> 00:31:43.946 A:middle
It's got an array of assets.

00:31:44.266 --> 00:31:45.116 A:middle
It's got a title.

00:31:45.456 --> 00:31:47.136 A:middle
It's got a key asset, key photo.

00:31:47.846 --> 00:31:49.226 A:middle
And what we've done in sub

00:31:49.226 --> 00:31:50.446 A:middle
classing that, creating

00:31:50.446 --> 00:31:51.856 A:middle
PHProject, is we've added just

00:31:51.856 --> 00:31:52.666 A:middle
one property.

00:31:53.636 --> 00:31:54.596 A:middle
But it's a really, really

00:31:54.706 --> 00:31:56.076 A:middle
important property for you.

00:31:56.436 --> 00:31:56.896 A:middle
And that is the

00:31:56.896 --> 00:31:58.216 A:middle
projectExtensionData.

00:31:58.946 --> 00:32:00.456 A:middle
So, this is where you, the

00:32:00.456 --> 00:32:02.676 A:middle
extension can save any data you

00:32:02.676 --> 00:32:04.546 A:middle
need to that represents the

00:32:04.546 --> 00:32:05.806 A:middle
project the user created.

00:32:06.376 --> 00:32:08.036 A:middle
So, it's really intended for

00:32:08.036 --> 00:32:09.516 A:middle
that critical project data.

00:32:09.516 --> 00:32:11.856 A:middle
That is your list of the

00:32:11.856 --> 00:32:13.696 A:middle
assetIdenfiers that you're using

00:32:13.696 --> 00:32:15.786 A:middle
and that maybe is some basic

00:32:15.786 --> 00:32:17.396 A:middle
layout information configuration

00:32:17.396 --> 00:32:18.016 A:middle
information.

00:32:18.606 --> 00:32:21.956 A:middle
That's not for images and you

00:32:21.956 --> 00:32:23.136 A:middle
know cache, thumbnails, and

00:32:23.136 --> 00:32:24.346 A:middle
rosters, things like that.

00:32:24.346 --> 00:32:25.496 A:middle
Because you can create those on

00:32:25.496 --> 00:32:26.706 A:middle
the fly or cache those away

00:32:26.706 --> 00:32:27.366 A:middle
somewhere else.

00:32:29.126 --> 00:32:32.386 A:middle
So, we want that to be small,

00:32:32.386 --> 00:32:33.056 A:middle
but useful.

00:32:33.226 --> 00:32:35.196 A:middle
And we settled on this limit of

00:32:35.196 --> 00:32:35.886 A:middle
1 megabyte.

00:32:36.606 --> 00:32:38.146 A:middle
Because we think you know, an

00:32:38.326 --> 00:32:39.966 A:middle
array of assetIdenfiers

00:32:39.966 --> 00:32:41.286 A:middle
compressed is really, really

00:32:41.286 --> 00:32:41.416 A:middle
easy.

00:32:41.416 --> 00:32:42.686 A:middle
They're just strings.

00:32:43.276 --> 00:32:44.666 A:middle
And we think you can live within

00:32:44.666 --> 00:32:45.336 A:middle
1 megabyte.

00:32:45.336 --> 00:32:47.156 A:middle
And by doing that, we're not

00:32:47.156 --> 00:32:48.776 A:middle
bloating user's libraries as

00:32:48.776 --> 00:32:49.926 A:middle
they create project after

00:32:49.926 --> 00:32:51.746 A:middle
project and explore all these

00:32:51.746 --> 00:32:52.976 A:middle
amazing extensions that you're

00:32:52.976 --> 00:32:56.966 A:middle
going to create.

00:32:57.116 --> 00:32:58.786 A:middle
So, setting the data, really

00:32:58.786 --> 00:32:59.106 A:middle
easy.

00:33:00.126 --> 00:33:01.196 A:middle
We have an object called

00:33:01.196 --> 00:33:03.416 A:middle
PHProjectChangeRequest that you

00:33:03.416 --> 00:33:05.926 A:middle
simply instantiate and then once

00:33:05.926 --> 00:33:08.196 A:middle
you do, you can all this perform

00:33:08.196 --> 00:33:10.406 A:middle
changes and weight function on

00:33:10.406 --> 00:33:11.276 A:middle
the Photo library.

00:33:11.766 --> 00:33:13.186 A:middle
Inside that, set the data to

00:33:13.186 --> 00:33:14.326 A:middle
whatever you want it to be.

00:33:14.326 --> 00:33:16.416 A:middle
In this case, I'm just using an

00:33:16.416 --> 00:33:19.886 A:middle
NSKeyedArchiver archive an array

00:33:19.886 --> 00:33:21.186 A:middle
of identifiers.

00:33:21.866 --> 00:33:26.266 A:middle
And that's it, it's simple.

00:33:26.356 --> 00:33:27.526 A:middle
So, let's get into some fun

00:33:27.526 --> 00:33:27.866 A:middle
stuff.

00:33:28.376 --> 00:33:30.406 A:middle
I want to talk about where the

00:33:30.406 --> 00:33:31.276 A:middle
magic begins.

00:33:33.036 --> 00:33:35.436 A:middle
So, you saw in the ifolor demo

00:33:35.506 --> 00:33:37.986 A:middle
they really leveraged the

00:33:37.986 --> 00:33:38.926 A:middle
memory's feature.

00:33:39.066 --> 00:33:41.496 A:middle
The memory's feature is really,

00:33:41.496 --> 00:33:42.266 A:middle
really popular.

00:33:43.006 --> 00:33:44.946 A:middle
Users love this.

00:33:45.176 --> 00:33:46.326 A:middle
Right, while you're sleeping,

00:33:46.326 --> 00:33:49.156 A:middle
Photos is working hard all

00:33:49.976 --> 00:33:51.466 A:middle
night, going through kind of

00:33:51.466 --> 00:33:53.136 A:middle
your photo library, learning

00:33:53.136 --> 00:33:56.696 A:middle
sort of about you, right on your

00:33:56.696 --> 00:33:57.156 A:middle
device.

00:33:57.156 --> 00:33:58.146 A:middle
It's all happening right there

00:33:58.146 --> 00:33:58.786 A:middle
locally.

00:33:58.886 --> 00:34:00.426 A:middle
And it's building this graph of

00:34:00.426 --> 00:34:02.826 A:middle
kind of the events that are

00:34:02.826 --> 00:34:04.366 A:middle
meaningful to you and the people

00:34:04.366 --> 00:34:05.656 A:middle
in your life that are relevant

00:34:05.656 --> 00:34:06.116 A:middle
to you.

00:34:06.566 --> 00:34:07.896 A:middle
And through that it's able to

00:34:09.266 --> 00:34:11.576 A:middle
serve up these great memories

00:34:11.576 --> 00:34:13.246 A:middle
that users just consume on a

00:34:13.246 --> 00:34:14.166 A:middle
daily basis.

00:34:14.866 --> 00:34:16.236 A:middle
And so we wanted to make sure

00:34:16.236 --> 00:34:18.626 A:middle
you had access to that level of

00:34:18.626 --> 00:34:19.816 A:middle
data, right .

00:34:19.816 --> 00:34:20.766 A:middle
These extensions aren't

00:34:20.766 --> 00:34:22.226 A:middle
interesting if we just give you

00:34:22.226 --> 00:34:23.666 A:middle
an array of photos.

00:34:23.956 --> 00:34:25.326 A:middle
We've got to give you context

00:34:25.326 --> 00:34:26.246 A:middle
from which you can create

00:34:26.246 --> 00:34:26.946 A:middle
something great.

00:34:27.656 --> 00:34:29.756 A:middle
And that's what we've done with

00:34:29.756 --> 00:34:30.546 A:middle
PHProjectInfo.

00:34:31.146 --> 00:34:34.526 A:middle
So, ProductInfo at the top level

00:34:34.836 --> 00:34:36.476 A:middle
is broken into sections.

00:34:36.736 --> 00:34:38.096 A:middle
We give you this array of

00:34:38.346 --> 00:34:40.306 A:middle
PHProject section objects.

00:34:40.886 --> 00:34:44.226 A:middle
And for a given section, we tell

00:34:44.226 --> 00:34:44.916 A:middle
you the type.

00:34:45.226 --> 00:34:46.456 A:middle
So, you think about a memory,

00:34:46.856 --> 00:34:48.716 A:middle
we've got like a key photo at

00:34:48.716 --> 00:34:49.566 A:middle
the top.

00:34:50.026 --> 00:34:51.766 A:middle
And we call that type cover.

00:34:51.766 --> 00:34:53.036 A:middle
And then we've got this

00:34:53.136 --> 00:34:56.036 A:middle
editorial grid that we call type

00:34:56.096 --> 00:34:56.756 A:middle
content.

00:34:57.656 --> 00:34:59.636 A:middle
And then we give you this array

00:34:59.636 --> 00:35:00.626 A:middle
of content.

00:35:01.276 --> 00:35:04.636 A:middle
It will look something like

00:35:04.636 --> 00:35:05.056 A:middle
this.

00:35:05.056 --> 00:35:06.346 A:middle
And inside the contents we

00:35:06.346 --> 00:35:07.476 A:middle
actually give you access to the

00:35:07.476 --> 00:35:08.596 A:middle
elements, and the asset

00:35:08.596 --> 00:35:10.046 A:middle
identifiers and some layout

00:35:10.046 --> 00:35:10.766 A:middle
information.

00:35:11.716 --> 00:35:12.976 A:middle
And you might be asking yourself

00:35:12.976 --> 00:35:14.016 A:middle
when you look at this construct,

00:35:14.016 --> 00:35:15.746 A:middle
why the array and then the

00:35:15.746 --> 00:35:16.356 A:middle
array, right.

00:35:16.356 --> 00:35:17.766 A:middle
Why this kind of nested

00:35:17.766 --> 00:35:18.236 A:middle
structure.

00:35:19.396 --> 00:35:21.106 A:middle
But if you think about the

00:35:21.106 --> 00:35:23.266 A:middle
memory feature it makes sense,

00:35:23.876 --> 00:35:24.116 A:middle
right.

00:35:24.116 --> 00:35:26.136 A:middle
We allow users and memories to

00:35:26.136 --> 00:35:28.186 A:middle
toggle between showing a summary

00:35:28.186 --> 00:35:29.546 A:middle
of photos and showing all

00:35:29.546 --> 00:35:30.156 A:middle
photos.

00:35:30.446 --> 00:35:32.666 A:middle
The memory itself is built up

00:35:32.666 --> 00:35:34.806 A:middle
from a large pool of assets.

00:35:36.296 --> 00:35:38.526 A:middle
We call these curation levels.

00:35:39.026 --> 00:35:40.276 A:middle
And we wanted to make sure you

00:35:40.276 --> 00:35:41.636 A:middle
had access to these different

00:35:41.636 --> 00:35:43.476 A:middle
levels of information, right?

00:35:43.476 --> 00:35:44.836 A:middle
We've already done all this hard

00:35:44.836 --> 00:35:45.216 A:middle
work.

00:35:45.216 --> 00:35:46.796 A:middle
We've run all this intelligence.

00:35:46.796 --> 00:35:48.556 A:middle
Let's just share it with you and

00:35:48.556 --> 00:35:49.826 A:middle
let you build something on top

00:35:49.826 --> 00:35:50.046 A:middle
of it.

00:35:50.876 --> 00:35:53.556 A:middle
So, that section content array,

00:35:53.556 --> 00:35:55.566 A:middle
is an ordered array, where you

00:35:55.566 --> 00:35:57.286 A:middle
always know the object at index

00:35:57.286 --> 00:35:59.456 A:middle
0 is going to be the best of the

00:35:59.456 --> 00:35:59.836 A:middle
best.

00:35:59.836 --> 00:36:01.026 A:middle
The most premium.

00:36:01.346 --> 00:36:04.126 A:middle
The most condescended summary of

00:36:04.126 --> 00:36:06.066 A:middle
that collection of assets,

00:36:06.596 --> 00:36:08.446 A:middle
whereas the object at the very

00:36:08.446 --> 00:36:09.536 A:middle
end of the array is going to be

00:36:09.536 --> 00:36:09.976 A:middle
the most.

00:36:09.976 --> 00:36:10.736 A:middle
It's going to be everything we

00:36:10.736 --> 00:36:11.256 A:middle
considered.

00:36:11.846 --> 00:36:13.116 A:middle
And you get to decide what you

00:36:13.116 --> 00:36:13.856 A:middle
want to use.

00:36:14.596 --> 00:36:16.626 A:middle
The fewest, the most, everything

00:36:16.626 --> 00:36:17.336 A:middle
in between.

00:36:17.856 --> 00:36:19.026 A:middle
Maybe you want to offer your

00:36:19.026 --> 00:36:20.476 A:middle
users a choice.

00:36:20.476 --> 00:36:20.976 A:middle
You want to give them the

00:36:20.976 --> 00:36:22.496 A:middle
ability to switch between these.

00:36:22.736 --> 00:36:25.406 A:middle
And you can do that with the

00:36:26.636 --> 00:36:29.346 A:middle
context we're giving here.

00:36:29.396 --> 00:36:31.426 A:middle
Next up, cloud asset

00:36:31.426 --> 00:36:32.256 A:middle
identifiers.

00:36:33.006 --> 00:36:34.376 A:middle
This is kind of a new concept.

00:36:34.376 --> 00:36:35.996 A:middle
If you're familiar with PhotoKit

00:36:36.276 --> 00:36:38.406 A:middle
on iOS, you've not seen this

00:36:38.406 --> 00:36:40.366 A:middle
before because it's new.

00:36:40.996 --> 00:36:44.716 A:middle
But, we've never had a construct

00:36:44.716 --> 00:36:46.946 A:middle
where we wanted you to save data

00:36:46.946 --> 00:36:48.346 A:middle
into a user's photo library.

00:36:48.346 --> 00:36:51.226 A:middle
Data that represents assets but

00:36:51.226 --> 00:36:52.536 A:middle
data that might be synced to

00:36:52.536 --> 00:36:53.986 A:middle
other devices, that might appear

00:36:53.986 --> 00:36:55.776 A:middle
somewhere else at some point.

00:36:56.176 --> 00:36:57.166 A:middle
We want to make sure that the

00:36:57.166 --> 00:37:00.196 A:middle
data you're saving is meaningful

00:37:00.196 --> 00:37:01.656 A:middle
wherever it shows up.

00:37:01.846 --> 00:37:03.076 A:middle
And so, we've introduced a new

00:37:03.076 --> 00:37:03.696 A:middle
object called the

00:37:03.696 --> 00:37:05.016 A:middle
PHCloudIdentifier.

00:37:06.306 --> 00:37:08.016 A:middle
And you can think of this as a

00:37:08.016 --> 00:37:09.846 A:middle
global identifier for the asset.

00:37:10.926 --> 00:37:13.036 A:middle
But it's not as simple as just a

00:37:13.036 --> 00:37:14.326 A:middle
global string.

00:37:15.026 --> 00:37:16.446 A:middle
You know, dealing with the cloud

00:37:16.446 --> 00:37:17.626 A:middle
and sync states and all that is

00:37:17.766 --> 00:37:19.016 A:middle
really, really complicated.

00:37:19.336 --> 00:37:20.816 A:middle
And we've solved all that for

00:37:20.816 --> 00:37:21.066 A:middle
you.

00:37:21.856 --> 00:37:23.956 A:middle
The only thing you have to do

00:37:23.956 --> 00:37:26.166 A:middle
with this is just make sure

00:37:26.166 --> 00:37:27.356 A:middle
you're always converting from a

00:37:27.356 --> 00:37:29.056 A:middle
global identifier to a local

00:37:29.056 --> 00:37:30.916 A:middle
identifier before you fetch.

00:37:31.246 --> 00:37:32.426 A:middle
And for that we've just given

00:37:32.426 --> 00:37:35.156 A:middle
you a convenience method inside

00:37:35.156 --> 00:37:36.616 A:middle
PHPhotoLibrary to do that

00:37:36.616 --> 00:37:38.136 A:middle
conversion both ways; from

00:37:38.136 --> 00:37:40.576 A:middle
global, from pod identifier to

00:37:40.576 --> 00:37:42.326 A:middle
local identifier, and vice

00:37:42.326 --> 00:37:42.626 A:middle
versa.

00:37:43.106 --> 00:37:47.036 A:middle
Next, I want to talk about

00:37:47.036 --> 00:37:47.446 A:middle
layout.

00:37:48.106 --> 00:37:50.106 A:middle
So, we didn't just want to give

00:37:50.106 --> 00:37:52.996 A:middle
you assets and some constructs

00:37:52.996 --> 00:37:53.946 A:middle
around the curation.

00:37:53.946 --> 00:37:55.556 A:middle
We wanted to give you some hints

00:37:55.556 --> 00:37:58.396 A:middle
about how we present those

00:37:58.396 --> 00:38:00.456 A:middle
assets to a user right.

00:38:00.456 --> 00:38:02.276 A:middle
Help you with some of the

00:38:02.276 --> 00:38:03.686 A:middle
difficult problems of things

00:38:03.686 --> 00:38:04.666 A:middle
like grid layout.

00:38:04.666 --> 00:38:06.396 A:middle
All right, you look at a memory

00:38:07.626 --> 00:38:09.646 A:middle
and we've done a lot of hard

00:38:09.646 --> 00:38:12.296 A:middle
work already in laying out this

00:38:12.296 --> 00:38:13.526 A:middle
curated grid in a really

00:38:13.526 --> 00:38:14.986 A:middle
interesting way that's pleasing

00:38:14.986 --> 00:38:15.516 A:middle
to the user.

00:38:16.326 --> 00:38:17.686 A:middle
Wouldn't it be great if you had

00:38:17.686 --> 00:38:19.116 A:middle
access to that layout.

00:38:19.856 --> 00:38:20.906 A:middle
And you do.

00:38:21.566 --> 00:38:25.256 A:middle
But to do that, we had to

00:38:25.256 --> 00:38:27.376 A:middle
establish first kind of set of

00:38:27.376 --> 00:38:28.946 A:middle
rules, a coordinate system for

00:38:28.946 --> 00:38:29.136 A:middle
you.

00:38:29.136 --> 00:38:31.946 A:middle
So, if you look at the memory,

00:38:32.136 --> 00:38:33.826 A:middle
you notice everything aligns to

00:38:33.826 --> 00:38:35.006 A:middle
a very specific grid.

00:38:35.006 --> 00:38:37.146 A:middle
It's grid of 4x3 aspect ratio

00:38:37.146 --> 00:38:37.706 A:middle
cells.

00:38:39.116 --> 00:38:42.556 A:middle
But that's an odd, non-square

00:38:42.596 --> 00:38:44.496 A:middle
kind of dimension to share back

00:38:44.496 --> 00:38:44.976 A:middle
and forth.

00:38:44.976 --> 00:38:46.376 A:middle
That's a weird multiplier for

00:38:46.376 --> 00:38:46.656 A:middle
you.

00:38:47.426 --> 00:38:48.826 A:middle
So, we simply divided that yet

00:38:48.826 --> 00:38:49.096 A:middle
again.

00:38:49.096 --> 00:38:52.116 A:middle
And in this case, this layout is

00:38:52.116 --> 00:38:54.826 A:middle
really comprised of 20 uniform

00:38:55.606 --> 00:38:56.226 A:middle
columns.

00:38:56.226 --> 00:38:58.596 A:middle
What we call our grid spaces.

00:38:59.666 --> 00:39:00.946 A:middle
And once we have this coordinate

00:39:00.946 --> 00:39:02.376 A:middle
system established, you can

00:39:02.376 --> 00:39:03.706 A:middle
scale this however you want.

00:39:03.706 --> 00:39:05.086 A:middle
It's just a multiplier for you,

00:39:05.086 --> 00:39:06.366 A:middle
for whatever your output is.

00:39:06.866 --> 00:39:08.126 A:middle
Right? If you're rescaling on a

00:39:08.126 --> 00:39:10.766 A:middle
resizable window, or working

00:39:10.936 --> 00:39:12.796 A:middle
with web browsers of different

00:39:12.796 --> 00:39:14.426 A:middle
size, you can use this data to

00:39:14.426 --> 00:39:16.056 A:middle
know how to layout the content.

00:39:17.336 --> 00:39:19.066 A:middle
And it also lets us communicate

00:39:19.066 --> 00:39:20.556 A:middle
to you placement information.

00:39:21.126 --> 00:39:22.646 A:middle
So, in this example, I have this

00:39:22.726 --> 00:39:24.116 A:middle
photo that wants to live in the

00:39:24.116 --> 00:39:25.256 A:middle
upper left-hand corner.

00:39:25.626 --> 00:39:27.206 A:middle
So, I can now easily tell you

00:39:27.626 --> 00:39:29.316 A:middle
it's at position 00.

00:39:29.316 --> 00:39:31.166 A:middle
It's 8 grid spaces wide and it's

00:39:31.166 --> 00:39:32.386 A:middle
9 grid spaces tall.

00:39:32.816 --> 00:39:37.016 A:middle
Next thing I want to talk about

00:39:37.016 --> 00:39:37.826 A:middle
are elements.

00:39:40.116 --> 00:39:42.066 A:middle
So, inside the section constant

00:39:42.066 --> 00:39:42.836 A:middle
we give you an array of

00:39:42.836 --> 00:39:43.386 A:middle
elements.

00:39:43.386 --> 00:39:44.726 A:middle
And all the elements are

00:39:45.426 --> 00:39:48.356 A:middle
subclasses of PHProjectElement.

00:39:49.016 --> 00:39:50.176 A:middle
And there's two really important

00:39:50.176 --> 00:39:50.816 A:middle
properties there.

00:39:50.816 --> 00:39:52.576 A:middle
One, is placement, which we just

00:39:52.576 --> 00:39:55.636 A:middle
talked about and the other is

00:39:55.636 --> 00:39:57.346 A:middle
something called weight.

00:39:58.416 --> 00:39:59.986 A:middle
So, again going back to the

00:39:59.986 --> 00:40:00.746 A:middle
memories feature.

00:40:03.236 --> 00:40:04.546 A:middle
We talked to you about, like all

00:40:04.546 --> 00:40:05.616 A:middle
the intelligence that we're

00:40:05.616 --> 00:40:06.236 A:middle
doing, right?

00:40:06.336 --> 00:40:09.816 A:middle
And ascertaining the most

00:40:09.816 --> 00:40:11.886 A:middle
relevant photos in a large pool

00:40:11.886 --> 00:40:12.756 A:middle
of assets.

00:40:13.866 --> 00:40:15.596 A:middle
And so, our scoring system.

00:40:16.316 --> 00:40:17.666 A:middle
And we wanted to share that with

00:40:17.726 --> 00:40:17.956 A:middle
you.

00:40:18.576 --> 00:40:20.876 A:middle
And so, we do that by given

00:40:22.126 --> 00:40:24.196 A:middle
elements weight, right.

00:40:24.196 --> 00:40:25.946 A:middle
it's a normalized weight from 0

00:40:25.946 --> 00:40:30.346 A:middle
to 1.0, the default value is 0.5

00:40:30.346 --> 00:40:32.586 A:middle
meaning it's not horribly

00:40:32.586 --> 00:40:34.126 A:middle
significant, but is not horribly

00:40:34.126 --> 00:40:35.746 A:middle
insignificant either, if that

00:40:35.746 --> 00:40:36.556 A:middle
makes any sense.

00:40:36.556 --> 00:40:39.696 A:middle
But you know it's this

00:40:39.696 --> 00:40:40.726 A:middle
normalized score across the

00:40:40.726 --> 00:40:41.376 A:middle
entire section.

00:40:41.376 --> 00:40:42.956 A:middle
And you can do amazing things

00:40:42.956 --> 00:40:44.246 A:middle
with that, right?

00:40:44.246 --> 00:40:45.726 A:middle
Just really easily, right?

00:40:45.726 --> 00:40:47.656 A:middle
Sort your assets by that.

00:40:47.656 --> 00:40:49.776 A:middle
Decide where you want to chop

00:40:49.776 --> 00:40:51.566 A:middle
off, you know a large array of

00:40:51.566 --> 00:40:52.846 A:middle
assets and only work with the

00:40:52.846 --> 00:40:53.986 A:middle
significant ones.

00:40:54.316 --> 00:40:56.016 A:middle
Right? Present those as choices

00:40:56.016 --> 00:40:57.656 A:middle
to a user where you're serving

00:40:57.656 --> 00:41:00.396 A:middle
up the higher weighted assets

00:41:01.506 --> 00:41:02.746 A:middle
first.

00:41:02.746 --> 00:41:04.106 A:middle
And predicting that that's

00:41:04.106 --> 00:41:05.416 A:middle
probably what they're looking

00:41:05.416 --> 00:41:06.236 A:middle
for, what they want.

00:41:10.036 --> 00:41:11.496 A:middle
And there's one other bit here.

00:41:11.566 --> 00:41:15.616 A:middle
And this is specific to one of

00:41:15.616 --> 00:41:16.796 A:middle
the elements, which is the

00:41:16.796 --> 00:41:18.186 A:middle
PHProjectAssetElement.

00:41:18.886 --> 00:41:20.426 A:middle
We have this concept of regions

00:41:20.426 --> 00:41:21.076 A:middle
of interest.

00:41:21.626 --> 00:41:27.076 A:middle
You know, as you know there are

00:41:27.076 --> 00:41:28.836 A:middle
several ways already in the

00:41:28.986 --> 00:41:32.786 A:middle
macOS API to run face detection

00:41:32.786 --> 00:41:36.276 A:middle
to find faces in an image.

00:41:36.436 --> 00:41:37.796 A:middle
But form that you don't know the

00:41:37.796 --> 00:41:39.446 A:middle
relevancy of those faces.

00:41:39.636 --> 00:41:41.016 A:middle
You don't know if those faces

00:41:41.016 --> 00:41:42.756 A:middle
represent someone that is

00:41:42.756 --> 00:41:45.306 A:middle
meaningful in someone's life, or

00:41:45.306 --> 00:41:46.796 A:middle
it's a face in the crowd.

00:41:46.796 --> 00:41:48.856 A:middle
It's the person walking behind

00:41:48.856 --> 00:41:50.626 A:middle
you at a theme park, when you're

00:41:50.626 --> 00:41:52.226 A:middle
trying to photograph somebody in

00:41:52.226 --> 00:41:53.446 A:middle
your family.

00:41:53.446 --> 00:41:55.016 A:middle
You really don't have an ability

00:41:55.016 --> 00:41:55.986 A:middle
to tell the difference.

00:41:57.306 --> 00:41:59.616 A:middle
We wanted to give you something

00:41:59.616 --> 00:42:01.866 A:middle
that let you know, and let you

00:42:01.866 --> 00:42:04.466 A:middle
trust that if we've marked, if

00:42:04.466 --> 00:42:06.276 A:middle
we said it's interesting, it's

00:42:06.276 --> 00:42:07.836 A:middle
interesting, right.

00:42:07.836 --> 00:42:10.006 A:middle
And if you leverage this, you

00:42:10.006 --> 00:42:12.026 A:middle
create magic for your users.

00:42:12.426 --> 00:42:14.026 A:middle
Without necessarily even knowing

00:42:14.026 --> 00:42:14.396 A:middle
why.

00:42:15.586 --> 00:42:17.206 A:middle
And we went one step further.

00:42:17.236 --> 00:42:18.086 A:middle
If you notice we have

00:42:18.086 --> 00:42:19.676 A:middle
identifiers on these.

00:42:20.376 --> 00:42:21.996 A:middle
And we actually repurposed those

00:42:21.996 --> 00:42:23.966 A:middle
identifiers across images.

00:42:24.506 --> 00:42:26.116 A:middle
So, if we know that this thing

00:42:26.116 --> 00:42:27.516 A:middle
that's interesting in this photo

00:42:28.156 --> 00:42:30.686 A:middle
is also representing this same

00:42:30.946 --> 00:42:32.306 A:middle
thing, or same person in this

00:42:32.306 --> 00:42:33.986 A:middle
other photo, we'll give them the

00:42:33.986 --> 00:42:34.946 A:middle
same identifier .

00:42:35.406 --> 00:42:36.336 A:middle
So, if you're doing like

00:42:36.336 --> 00:42:38.046 A:middle
animation, slideshows, things

00:42:38.046 --> 00:42:39.876 A:middle
like that, this is tremendously

00:42:39.876 --> 00:42:40.626 A:middle
useful to you.

00:42:41.126 --> 00:42:42.396 A:middle
Because you now can actually

00:42:42.396 --> 00:42:44.836 A:middle
correlated positions of images

00:42:44.966 --> 00:42:45.956 A:middle
across a large set.

00:42:46.476 --> 00:42:51.036 A:middle
S, I could keep going, in a code

00:42:51.036 --> 00:42:51.376 A:middle
walk.

00:42:52.896 --> 00:42:55.976 A:middle
But, I'd rather give you a demo.

00:42:57.006 --> 00:42:58.876 A:middle
Because I think it's really

00:42:58.876 --> 00:43:00.906 A:middle
important to show you just how

00:43:00.906 --> 00:43:02.206 A:middle
easy it is to create one of

00:43:02.206 --> 00:43:03.096 A:middle
these extensions.

00:43:03.946 --> 00:43:05.096 A:middle
So, I'm here in Xcode.

00:43:05.986 --> 00:43:07.456 A:middle
And I promise I will zoom in

00:43:07.656 --> 00:43:08.906 A:middle
where necessary, so you will be

00:43:08.906 --> 00:43:09.486 A:middle
able to read this.

00:43:10.196 --> 00:43:11.756 A:middle
So, I'm here in Xcode.

00:43:11.756 --> 00:43:13.776 A:middle
And I have a project I started,

00:43:13.776 --> 00:43:15.116 A:middle
but it actually does nothing

00:43:15.116 --> 00:43:15.356 A:middle
yet.

00:43:15.356 --> 00:43:16.446 A:middle
The only thing it has are some

00:43:16.446 --> 00:43:18.016 A:middle
assets that a designed gave me.

00:43:18.936 --> 00:43:20.366 A:middle
And what we're going to build

00:43:20.926 --> 00:43:23.046 A:middle
right now, is a slideshow.

00:43:23.936 --> 00:43:25.176 A:middle
And the slideshow is going to be

00:43:25.176 --> 00:43:27.386 A:middle
the marriage of the content that

00:43:27.386 --> 00:43:29.706 A:middle
Photos is providing and seenkit

00:43:29.836 --> 00:43:31.286 A:middle
to do a really compelling kind

00:43:31.286 --> 00:43:32.486 A:middle
of 3D animation.

00:43:34.676 --> 00:43:35.446 A:middle
So, let's begin.

00:43:36.816 --> 00:43:38.126 A:middle
So, the first thing I can do is

00:43:38.126 --> 00:43:40.586 A:middle
just, I'm on the project and I

00:43:40.586 --> 00:43:41.526 A:middle
have this little plus button

00:43:41.526 --> 00:43:42.956 A:middle
here at the bottom add a target.

00:43:44.066 --> 00:43:45.446 A:middle
And I'll just add a target here.

00:43:45.446 --> 00:43:47.726 A:middle
And you'll notice we've got this

00:43:47.726 --> 00:43:50.826 A:middle
new template, right for

00:43:50.826 --> 00:43:52.096 A:middle
PhotoProject extension.

00:43:52.096 --> 00:43:53.346 A:middle
So, I'm going to select that and

00:43:53.346 --> 00:43:54.606 A:middle
I'm going to give this a name.

00:43:56.516 --> 00:43:57.346 A:middle
Picture show.

00:43:57.906 --> 00:44:00.426 A:middle
Hit the finished button.

00:44:01.386 --> 00:44:03.046 A:middle
And yes, I want to activate that

00:44:03.046 --> 00:44:04.506 A:middle
as a scheme it makes it really

00:44:04.506 --> 00:44:05.456 A:middle
easy to run later.

00:44:06.646 --> 00:44:08.046 A:middle
And then, I mentioned that my

00:44:08.046 --> 00:44:09.126 A:middle
designer is going to need these

00:44:09.126 --> 00:44:09.796 A:middle
assets.

00:44:09.796 --> 00:44:11.566 A:middle
So, they're already in the

00:44:11.566 --> 00:44:12.936 A:middle
project, I just want them,

00:44:12.936 --> 00:44:14.296 A:middle
basically referenced from within

00:44:14.516 --> 00:44:15.586 A:middle
the extension as well.

00:44:15.586 --> 00:44:17.536 A:middle
So, I'm just going to add those

00:44:17.806 --> 00:44:18.996 A:middle
via the copy phase.

00:44:19.576 --> 00:44:23.256 A:middle
And that's the whole set of

00:44:23.256 --> 00:44:24.066 A:middle
assets.

00:44:24.406 --> 00:44:26.026 A:middle
I just hit add and with that

00:44:26.026 --> 00:44:27.226 A:middle
we're ready to write some code.

00:44:29.546 --> 00:44:32.506 A:middle
Now, if you're looking closely,

00:44:32.506 --> 00:44:34.766 A:middle
you'll notice that Xcode has

00:44:34.766 --> 00:44:36.596 A:middle
already added this group for me

00:44:36.596 --> 00:44:38.276 A:middle
for Picture Show for my target.

00:44:38.786 --> 00:44:40.596 A:middle
And inside of it, it's already

00:44:40.596 --> 00:44:42.566 A:middle
laid down a view controller for

00:44:42.566 --> 00:44:44.796 A:middle
me that conforms to the protocol

00:44:44.796 --> 00:44:47.566 A:middle
that we have to implement.

00:44:47.996 --> 00:44:51.066 A:middle
So, I'm going to go into that

00:44:51.066 --> 00:44:53.116 A:middle
and first going to add some

00:44:53.116 --> 00:44:53.736 A:middle
properties.

00:44:54.196 --> 00:44:58.236 A:middle
So, just a very small set of

00:44:58.236 --> 00:44:59.076 A:middle
properties here.

00:44:59.176 --> 00:45:01.046 A:middle
I'm holding on to the context

00:45:01.046 --> 00:45:01.876 A:middle
that's handed to me.

00:45:02.446 --> 00:45:04.176 A:middle
I have some arrays to

00:45:04.176 --> 00:45:05.446 A:middle
differentiate landscape and

00:45:05.446 --> 00:45:06.386 A:middle
portrait assets for my

00:45:06.386 --> 00:45:07.096 A:middle
slideshow.

00:45:07.596 --> 00:45:08.986 A:middle
I have an outlet for my scene

00:45:08.986 --> 00:45:09.346 A:middle
view.

00:45:09.426 --> 00:45:11.216 A:middle
And I have an animator.

00:45:12.546 --> 00:45:14.426 A:middle
And I have two expected

00:45:14.426 --> 00:45:15.346 A:middle
compilers.

00:45:15.346 --> 00:45:16.786 A:middle
I have not imported seenkit.

00:45:17.756 --> 00:45:21.986 A:middle
So, that's an easy one to fix.

00:45:22.176 --> 00:45:24.206 A:middle
And animator is my own class.

00:45:24.206 --> 00:45:25.496 A:middle
I just haven't created it yet.

00:45:25.496 --> 00:45:27.936 A:middle
So, let's go ahead and do that

00:45:28.546 --> 00:45:30.096 A:middle
right now.

00:45:31.346 --> 00:45:34.146 A:middle
So, I hit new, I want a Swift

00:45:34.146 --> 00:45:34.556 A:middle
file.

00:45:34.606 --> 00:45:38.426 A:middle
And we will call this animator.

00:45:42.776 --> 00:45:49.276 A:middle
And there's my animator.

00:45:50.126 --> 00:45:51.886 A:middle
I'm not going to walk you

00:45:51.886 --> 00:45:52.516 A:middle
through all of this.

00:45:52.516 --> 00:45:53.816 A:middle
But it's really, really simple.

00:45:54.186 --> 00:45:55.076 A:middle
So, I'll just tell you a few

00:45:55.076 --> 00:45:56.156 A:middle
things it's doing.

00:45:56.966 --> 00:45:57.996 A:middle
When I'm initializing the

00:45:57.996 --> 00:45:59.446 A:middle
animation I want to kind of

00:45:59.446 --> 00:46:01.776 A:middle
reach into the scene and get out

00:46:01.776 --> 00:46:03.116 A:middle
some specific elements of the

00:46:03.116 --> 00:46:03.466 A:middle
scene.

00:46:03.466 --> 00:46:04.936 A:middle
I want to find these tagged

00:46:04.936 --> 00:46:06.786 A:middle
photo frames in this 3D scene.

00:46:07.376 --> 00:46:09.276 A:middle
And then reach kind of inside

00:46:09.276 --> 00:46:11.026 A:middle
them, behind the glass and get

00:46:11.026 --> 00:46:12.626 A:middle
at the material that is going to

00:46:12.626 --> 00:46:14.096 A:middle
be the photo I'm showing behind

00:46:14.096 --> 00:46:16.056 A:middle
the glass of these frames.

00:46:16.586 --> 00:46:17.786 A:middle
So, that's really all I'm doing

00:46:17.786 --> 00:46:18.696 A:middle
in the initialize.

00:46:19.276 --> 00:46:22.476 A:middle
And then from that point, the

00:46:22.476 --> 00:46:23.856 A:middle
scene, I know it's just going to

00:46:23.856 --> 00:46:24.666 A:middle
be spinning around.

00:46:24.666 --> 00:46:26.276 A:middle
It's just this kind of rotation

00:46:26.276 --> 00:46:29.226 A:middle
on a table and I have a little

00:46:29.226 --> 00:46:31.056 A:middle
trickery that you're like a good

00:46:31.056 --> 00:46:32.796 A:middle
magician when you're not looking

00:46:32.796 --> 00:46:33.726 A:middle
on switching photos.

00:46:33.726 --> 00:46:35.206 A:middle
And so, I'm just doing that

00:46:35.206 --> 00:46:36.186 A:middle
through a couple of timers.

00:46:37.006 --> 00:46:38.256 A:middle
And that's basically the

00:46:38.256 --> 00:46:38.766 A:middle
animation.

00:46:39.436 --> 00:46:41.976 A:middle
So, we'll go back to the

00:46:41.976 --> 00:46:43.666 A:middle
controller and start filling in

00:46:43.666 --> 00:46:44.536 A:middle
the interesting bits.

00:46:45.936 --> 00:46:47.876 A:middle
When a user creates one of these

00:46:47.876 --> 00:46:51.356 A:middle
projects, I want to save the

00:46:51.356 --> 00:46:51.476 A:middle
data.

00:46:51.476 --> 00:46:53.006 A:middle
Because I want them to be able

00:46:53.006 --> 00:46:54.586 A:middle
to come back to this slide show

00:46:54.586 --> 00:46:55.476 A:middle
at any point in time.

00:46:55.476 --> 00:46:57.146 A:middle
So, I'm just going to add some

00:46:57.146 --> 00:46:57.926 A:middle
data methods.

00:46:57.926 --> 00:46:59.956 A:middle
And what I've got here is a

00:46:59.956 --> 00:47:02.886 A:middle
SaveProjectDataFunction that

00:47:02.886 --> 00:47:04.096 A:middle
does exactly what you saw on the

00:47:04.096 --> 00:47:05.156 A:middle
slide, right?

00:47:05.156 --> 00:47:05.936 A:middle
So, this should look very

00:47:05.936 --> 00:47:07.146 A:middle
familiar with what we just

00:47:07.146 --> 00:47:07.746 A:middle
talked about.

00:47:08.996 --> 00:47:10.786 A:middle
And then load data, I'm simply

00:47:10.786 --> 00:47:11.746 A:middle
reading that back.

00:47:12.986 --> 00:47:14.126 A:middle
I'm getting the Cloud asset

00:47:14.126 --> 00:47:15.776 A:middle
identifiers by unarchiving my

00:47:15.776 --> 00:47:16.156 A:middle
data.

00:47:16.896 --> 00:47:18.286 A:middle
And I'm just converting to local

00:47:18.286 --> 00:47:19.216 A:middle
identifiers.

00:47:19.526 --> 00:47:22.476 A:middle
And from that point, I'm able to

00:47:22.736 --> 00:47:25.746 A:middle
do a PHAsset fetch assets

00:47:25.746 --> 00:47:26.826 A:middle
request with those local

00:47:26.826 --> 00:47:27.456 A:middle
identifiers.

00:47:27.956 --> 00:47:29.706 A:middle
All right.

00:47:29.966 --> 00:47:32.176 A:middle
Let's go back up to the top and

00:47:32.176 --> 00:47:33.536 A:middle
start filling in the rest.

00:47:33.716 --> 00:47:34.636 A:middle
So, viewDidLoad.

00:47:35.486 --> 00:47:41.206 A:middle
I just need to initialize my

00:47:41.206 --> 00:47:41.616 A:middle
animator.

00:47:41.616 --> 00:47:42.506 A:middle
We talked about that.

00:47:43.906 --> 00:47:45.156 A:middle
Supported project types.

00:47:45.156 --> 00:47:46.786 A:middle
In this case, I don't need to

00:47:46.786 --> 00:47:48.096 A:middle
ask the user for anything.

00:47:48.206 --> 00:47:49.506 A:middle
So, I won't fill that in.

00:47:50.106 --> 00:47:51.106 A:middle
It's just a slide show.

00:47:51.726 --> 00:47:54.196 A:middle
But begin project, obviously,

00:47:54.196 --> 00:47:55.306 A:middle
I've got some work I want to do

00:47:55.306 --> 00:47:55.546 A:middle
here.

00:47:56.916 --> 00:47:57.876 A:middle
So, we'll fill that in.

00:47:57.876 --> 00:48:00.666 A:middle
And what I'm doing in this case

00:48:00.666 --> 00:48:03.946 A:middle
is I'm getting at the actual

00:48:03.946 --> 00:48:04.986 A:middle
sections array.

00:48:06.036 --> 00:48:07.586 A:middle
And I'm looking for the first

00:48:07.586 --> 00:48:09.406 A:middle
section of typed content.

00:48:10.026 --> 00:48:11.156 A:middle
Right? I'm really designing this

00:48:11.156 --> 00:48:12.636 A:middle
around a memory, like we just

00:48:12.636 --> 00:48:13.176 A:middle
talk about.

00:48:13.946 --> 00:48:15.856 A:middle
And form that, I want the most

00:48:15.856 --> 00:48:16.796 A:middle
curated assets.

00:48:16.796 --> 00:48:18.696 A:middle
I want the top-level summary.

00:48:19.146 --> 00:48:20.556 A:middle
And so, I asked for the first

00:48:20.556 --> 00:48:21.486 A:middle
object in that array.

00:48:22.576 --> 00:48:23.506 A:middle
From that, get the

00:48:23.506 --> 00:48:26.636 A:middle
cloudAssetIdentifiers and I'm

00:48:26.636 --> 00:48:27.166 A:middle
good to go.

00:48:28.526 --> 00:48:30.006 A:middle
Now, in the background, I am

00:48:30.186 --> 00:48:32.826 A:middle
just saving the project data so

00:48:32.826 --> 00:48:33.936 A:middle
that it's there later if the

00:48:33.936 --> 00:48:35.136 A:middle
user comes back to the slide

00:48:35.136 --> 00:48:35.356 A:middle
show.

00:48:36.836 --> 00:48:40.096 A:middle
Get into resume project, and

00:48:40.096 --> 00:48:41.736 A:middle
that's really easy.

00:48:43.616 --> 00:48:46.936 A:middle
I simply hold on to my context

00:48:47.276 --> 00:48:49.186 A:middle
load my project data, initialize

00:48:49.186 --> 00:48:49.806 A:middle
the animation.

00:48:50.416 --> 00:48:53.396 A:middle
And finally, in finish project,

00:48:57.896 --> 00:48:59.706 A:middle
I'm just suspending animation.

00:48:59.796 --> 00:49:00.766 A:middle
I don't want these timers

00:49:00.766 --> 00:49:01.906 A:middle
firing, I don't want the fans

00:49:01.906 --> 00:49:03.076 A:middle
running while user's doing

00:49:03.076 --> 00:49:03.766 A:middle
something else.

00:49:03.766 --> 00:49:05.486 A:middle
I just suspend it.

00:49:06.356 --> 00:49:07.816 A:middle
And believe it or not, that is

00:49:07.816 --> 00:49:09.186 A:middle
the entirety of the code for

00:49:09.186 --> 00:49:09.846 A:middle
this extension.

00:49:09.846 --> 00:49:10.836 A:middle
That is my slide show.

00:49:11.356 --> 00:49:12.416 A:middle
Now, what I haven't don't is

00:49:12.416 --> 00:49:14.796 A:middle
wire up the UI, which I can do

00:49:14.796 --> 00:49:15.386 A:middle
really quickly.

00:49:15.386 --> 00:49:16.486 A:middle
So, the template gives me the

00:49:16.486 --> 00:49:18.386 A:middle
view for my view controlled.

00:49:18.816 --> 00:49:19.866 A:middle
I'll just delete the default

00:49:19.866 --> 00:49:20.296 A:middle
string.

00:49:21.236 --> 00:49:22.636 A:middle
And I'm going to add a scene to

00:49:22.636 --> 00:49:23.296 A:middle
this.

00:49:28.476 --> 00:49:30.056 A:middle
And so, we add a seenkit view.

00:49:30.236 --> 00:49:34.186 A:middle
I'll just resize that and just

00:49:35.446 --> 00:49:37.446 A:middle
pop in here, set my auto resize

00:49:37.446 --> 00:49:39.426 A:middle
and I just want this to be full

00:49:39.426 --> 00:49:39.756 A:middle
view.

00:49:40.356 --> 00:49:44.076 A:middle
And the only other thing you

00:49:44.076 --> 00:49:46.456 A:middle
need to do to that is choose the

00:49:46.456 --> 00:49:47.786 A:middle
scene itself, which I already

00:49:47.786 --> 00:49:48.856 A:middle
have in the assets that we

00:49:48.856 --> 00:49:49.426 A:middle
loaded in.

00:49:50.236 --> 00:49:51.676 A:middle
And I just need to wire it to my

00:49:51.676 --> 00:49:52.306 A:middle
view controller.

00:49:53.116 --> 00:49:54.416 A:middle
So, I'll control drag form

00:49:54.416 --> 00:49:56.886 A:middle
file's owner and I see the

00:49:56.886 --> 00:49:58.036 A:middle
outlet that we've already added

00:49:58.036 --> 00:49:59.116 A:middle
in properties.

00:50:00.026 --> 00:50:00.806 A:middle
And that's it.

00:50:01.906 --> 00:50:04.176 A:middle
We're ready to run.

00:50:04.366 --> 00:50:05.516 A:middle
So, I'll hit play.

00:50:05.516 --> 00:50:06.946 A:middle
It's going to ask me to choose

00:50:06.946 --> 00:50:08.466 A:middle
the app, obviously, it's Photos

00:50:08.466 --> 00:50:08.976 A:middle
in this case.

00:50:14.336 --> 00:50:16.546 A:middle
And that will build, and

00:50:16.546 --> 00:50:17.086 A:middle
succeed.

00:50:17.236 --> 00:50:20.786 A:middle
Photos launches, and I'm just

00:50:20.786 --> 00:50:21.536 A:middle
going to pick a memory.

00:50:21.676 --> 00:50:23.916 A:middle
In this case, I want to use,

00:50:24.226 --> 00:50:25.556 A:middle
I've got this really cool trip

00:50:25.606 --> 00:50:27.566 A:middle
to Hong Kong I'm going to

00:50:27.566 --> 00:50:28.416 A:middle
choose.

00:50:28.956 --> 00:50:30.216 A:middle
Hit the plus button and look at

00:50:30.216 --> 00:50:31.566 A:middle
that, there's the extension

00:50:31.636 --> 00:50:32.716 A:middle
showing up in Photos.

00:50:32.716 --> 00:50:34.736 A:middle
I choose that.

00:50:34.736 --> 00:50:37.486 A:middle
Now, when I do, this is the very

00:50:37.486 --> 00:50:38.876 A:middle
first time I run this extension,

00:50:39.386 --> 00:50:41.816 A:middle
so I don't have permission as an

00:50:41.816 --> 00:50:43.446 A:middle
extension to the entire photo

00:50:43.446 --> 00:50:43.916 A:middle
library.

00:50:43.916 --> 00:50:45.936 A:middle
You remember the our API is

00:50:46.026 --> 00:50:47.306 A:middle
handing the entire photo library

00:50:47.306 --> 00:50:48.056 A:middle
to the extension.

00:50:48.566 --> 00:50:50.476 A:middle
So, user does have to grant that

00:50:50.476 --> 00:50:51.586 A:middle
access once.

00:50:52.166 --> 00:50:52.946 A:middle
And just hit okay.

00:50:53.026 --> 00:50:55.456 A:middle
And then the slideshow loads.

00:50:57.516 --> 00:51:03.576 A:middle
[ Applause ]

00:51:04.076 --> 00:51:06.316 A:middle
And I'm just going to show you

00:51:06.316 --> 00:51:08.056 A:middle
one additional detail, if you

00:51:08.056 --> 00:51:10.066 A:middle
look in the sidebar, there's the

00:51:10.066 --> 00:51:11.356 A:middle
project we just created, Hong

00:51:11.356 --> 00:51:13.346 A:middle
Kong Island.

00:51:13.346 --> 00:51:14.656 A:middle
This is saved inside that

00:51:14.656 --> 00:51:16.036 A:middle
library right next to all the

00:51:16.036 --> 00:51:16.776 A:middle
other projects.

00:51:17.436 --> 00:51:20.566 A:middle
So, I choose that and I can see

00:51:20.826 --> 00:51:22.716 A:middle
this was created by an extension

00:51:22.716 --> 00:51:23.566 A:middle
called Picture Show.

00:51:24.256 --> 00:51:25.216 A:middle
And I can open that.

00:51:25.216 --> 00:51:27.806 A:middle
And it will pop right back into

00:51:27.806 --> 00:51:28.506 A:middle
the same slideshow.

00:51:30.396 --> 00:51:33.186 A:middle
So, that is PhotosPojects

00:51:33.186 --> 00:51:33.766 A:middle
Extensions [applause].

00:51:35.656 --> 00:51:41.976 A:middle
Thank you.

00:51:42.206 --> 00:51:43.836 A:middle
So, we've talked about a lot in

00:51:43.836 --> 00:51:46.426 A:middle
the past 55 minutes or so.

00:51:46.766 --> 00:51:49.856 A:middle
Talking about the frictionless

00:51:49.856 --> 00:51:51.236 A:middle
photo picker in iOS.

00:51:51.386 --> 00:51:52.876 A:middle
Really, really nice advancements

00:51:52.876 --> 00:51:54.586 A:middle
there, allowing you to get at

00:51:54.586 --> 00:51:55.766 A:middle
original URLs.

00:51:55.766 --> 00:51:57.116 A:middle
Having the video quality.

00:51:57.496 --> 00:51:58.876 A:middle
Some great, great stuff there

00:51:58.876 --> 00:51:59.306 A:middle
for you.

00:51:59.796 --> 00:52:01.446 A:middle
Andreas took you through the new

00:52:01.446 --> 00:52:03.806 A:middle
media presentation types, I

00:52:03.806 --> 00:52:05.336 A:middle
can't wait to see how you're

00:52:05.336 --> 00:52:06.716 A:middle
going to consume those and the

00:52:06.716 --> 00:52:07.806 A:middle
kind of things you do within

00:52:07.806 --> 00:52:08.506 A:middle
your apps.

00:52:08.936 --> 00:52:11.046 A:middle
Allowing users to see their

00:52:11.046 --> 00:52:12.226 A:middle
content played back the way

00:52:12.226 --> 00:52:12.896 A:middle
they'd expect.

00:52:13.706 --> 00:52:15.036 A:middle
He also talked about testing

00:52:15.036 --> 00:52:16.846 A:middle
with large image libraries.

00:52:17.326 --> 00:52:19.366 A:middle
And just a reminder there is a

00:52:19.366 --> 00:52:21.156 A:middle
sample app now to let you fill

00:52:21.156 --> 00:52:22.876 A:middle
out a library with tens of

00:52:22.876 --> 00:52:25.256 A:middle
thousands of assets so that you

00:52:25.256 --> 00:52:26.066 A:middle
can test that way.

00:52:26.066 --> 00:52:27.866 A:middle
And then, finally we talked

00:52:27.866 --> 00:52:29.256 A:middle
about the project extensions.

00:52:29.256 --> 00:52:30.636 A:middle
And I'm really, really excited

00:52:30.636 --> 00:52:33.596 A:middle
to see what your all going to

00:52:33.686 --> 00:52:35.466 A:middle
create and have in the App Store

00:52:35.896 --> 00:52:37.706 A:middle
when macOS High Sierra ships

00:52:37.706 --> 00:52:38.146 A:middle
this fall.

00:52:39.456 --> 00:52:40.666 A:middle
So, for more information please

00:52:40.666 --> 00:52:42.076 A:middle
check out this link, the

00:52:42.306 --> 00:52:44.096 A:middle
developer.apple.com website.

00:52:45.106 --> 00:52:46.236 A:middle
And I want to talk about some

00:52:46.236 --> 00:52:47.446 A:middle
related sessions.

00:52:47.576 --> 00:52:50.266 A:middle
Right after this in this hall is

00:52:50.266 --> 00:52:52.656 A:middle
going to be a killer, killer

00:52:52.656 --> 00:52:54.056 A:middle
session introducing you to

00:52:54.056 --> 00:52:55.376 A:middle
vision framework.

00:52:55.536 --> 00:52:56.766 A:middle
I know you want to stick around

00:52:56.766 --> 00:52:57.726 A:middle
for that.

00:52:57.726 --> 00:52:59.846 A:middle
Later tonight over in the

00:52:59.846 --> 00:53:02.116 A:middle
executive ballroom is the first

00:53:02.116 --> 00:53:04.756 A:middle
of two sessions covering depth

00:53:04.876 --> 00:53:07.516 A:middle
in iPhone photography with some

00:53:07.556 --> 00:53:09.906 A:middle
amazing demos and you really,

00:53:09.906 --> 00:53:10.976 A:middle
really want to be there for that

00:53:10.976 --> 00:53:11.386 A:middle
as well.

00:53:11.386 --> 00:53:13.376 A:middle
And finally, tonight we're doing

00:53:13.376 --> 00:53:14.746 A:middle
something we've never done that

00:53:14.746 --> 00:53:15.386 A:middle
WWDC.

00:53:15.506 --> 00:53:17.786 A:middle
We're hosting a photography get

00:53:17.786 --> 00:53:18.306 A:middle
together.

00:53:18.406 --> 00:53:19.716 A:middle
It's going to be downstairs in

00:53:19.716 --> 00:53:20.896 A:middle
technology lab area,

00:53:20.966 --> 00:53:22.626 A:middle
specifically lab J.

00:53:23.226 --> 00:53:25.836 A:middle
And I'll be there, the other 2

00:53:25.836 --> 00:53:27.076 A:middle
speakers in this session will be

00:53:27.076 --> 00:53:27.396 A:middle
there.

00:53:27.456 --> 00:53:28.906 A:middle
All of the speakers today

00:53:28.906 --> 00:53:30.176 A:middle
talking about Cameron Photos

00:53:30.176 --> 00:53:31.406 A:middle
will be there as well as a ton

00:53:31.406 --> 00:53:34.726 A:middle
of engineers, management, and we

00:53:34.726 --> 00:53:36.166 A:middle
hope to see all of you there.

00:53:36.596 --> 00:53:37.716 A:middle
Enjoy the rest of your show.

00:53:37.716 --> 00:53:38.466 A:middle
Thank you so much.

00:53:39.516 --> 00:53:44.500 A:middle
[ Applause ]