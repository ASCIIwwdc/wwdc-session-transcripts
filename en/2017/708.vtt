WEBVTT

00:00:20.516 --> 00:00:22.956 A:middle
[ Applause ]

00:00:23.456 --> 00:00:24.746 A:middle
&gt;&gt; Good afternoon, and welcome

00:00:24.746 --> 00:00:26.676 A:middle
everybody to our session, Best

00:00:26.676 --> 00:00:28.566 A:middle
Practices and What's New in User

00:00:28.566 --> 00:00:29.326 A:middle
Notifications.

00:00:30.006 --> 00:00:31.616 A:middle
I'm Kritharth Jain and a junior

00:00:31.706 --> 00:00:33.316 A:middle
on the iOS notifications team

00:00:33.796 --> 00:00:34.616 A:middle
and I'll be joined by my

00:00:34.616 --> 00:00:35.756 A:middle
colleague, Teja, for this

00:00:35.756 --> 00:00:36.306 A:middle
session today.

00:00:37.476 --> 00:00:39.746 A:middle
So, today we're going to start

00:00:39.916 --> 00:00:41.206 A:middle
by doing an overview of

00:00:41.246 --> 00:00:42.896 A:middle
notifications and all the

00:00:42.896 --> 00:00:44.756 A:middle
different APIs that you as app

00:00:44.756 --> 00:00:46.106 A:middle
developers can use for doing

00:00:46.106 --> 00:00:47.536 A:middle
notifications for your

00:00:47.536 --> 00:00:48.206 A:middle
applications.

00:00:49.176 --> 00:00:50.676 A:middle
Then, we're going to jump into

00:00:50.676 --> 00:00:52.286 A:middle
four different use cases for

00:00:52.286 --> 00:00:53.076 A:middle
notifications.

00:00:53.856 --> 00:00:54.886 A:middle
We're going to start out by

00:00:54.886 --> 00:00:56.796 A:middle
introducing a new concept for

00:00:56.796 --> 00:00:58.856 A:middle
iOS notifications about hidden

00:00:58.856 --> 00:01:00.926 A:middle
notification content which we

00:01:00.926 --> 00:01:01.746 A:middle
think you're going to be really

00:01:01.746 --> 00:01:02.406 A:middle
excited about.

00:01:03.396 --> 00:01:04.656 A:middle
Then we're going to jump into

00:01:04.656 --> 00:01:05.926 A:middle
our second use case about

00:01:05.966 --> 00:01:07.686 A:middle
modifying push notification

00:01:07.686 --> 00:01:09.286 A:middle
content before delivery to the

00:01:09.286 --> 00:01:09.626 A:middle
user.

00:01:10.536 --> 00:01:11.456 A:middle
Then we'll talk about

00:01:11.456 --> 00:01:13.286 A:middle
customizing rich notifications

00:01:13.556 --> 00:01:15.056 A:middle
and how you can completely own

00:01:15.306 --> 00:01:17.016 A:middle
the UI and feel of these

00:01:17.016 --> 00:01:17.796 A:middle
notifications.

00:01:18.406 --> 00:01:20.436 A:middle
And lastly we'll talk about user

00:01:20.436 --> 00:01:22.386 A:middle
input customization associated

00:01:22.606 --> 00:01:23.896 A:middle
with these rich notifications.

00:01:25.216 --> 00:01:26.786 A:middle
So, let's start with the

00:01:26.786 --> 00:01:27.906 A:middle
notifications overview.

00:01:28.936 --> 00:01:30.426 A:middle
Now, I'm sure you all know that

00:01:30.426 --> 00:01:31.236 A:middle
there are two types of

00:01:31.236 --> 00:01:31.926 A:middle
notifications.

00:01:32.296 --> 00:01:33.506 A:middle
There are local notifications.

00:01:33.926 --> 00:01:35.306 A:middle
These are the ones that are

00:01:35.306 --> 00:01:37.346 A:middle
scheduled by your application on

00:01:37.346 --> 00:01:39.376 A:middle
the device itself and then these

00:01:39.376 --> 00:01:40.466 A:middle
get presented to the user.

00:01:41.006 --> 00:01:42.276 A:middle
And when the user handles these

00:01:42.276 --> 00:01:44.086 A:middle
notifications, your app has the

00:01:44.086 --> 00:01:45.386 A:middle
opportunity to handle its

00:01:45.386 --> 00:01:45.876 A:middle
response.

00:01:47.256 --> 00:01:48.666 A:middle
The other kind of notifications

00:01:48.936 --> 00:01:50.666 A:middle
are remote notifications that

00:01:50.666 --> 00:01:52.586 A:middle
are associated with your remote

00:01:52.586 --> 00:01:54.796 A:middle
server which then sends a

00:01:54.796 --> 00:01:56.516 A:middle
notification payload to the

00:01:56.516 --> 00:01:58.276 A:middle
Apple push notification service.

00:01:58.956 --> 00:02:00.396 A:middle
Now, if your payload has

00:02:00.396 --> 00:02:02.466 A:middle
content, then this notification

00:02:02.606 --> 00:02:04.046 A:middle
gets delivered to the user's

00:02:04.046 --> 00:02:05.456 A:middle
device and presented to the

00:02:05.456 --> 00:02:05.796 A:middle
user.

00:02:06.186 --> 00:02:07.666 A:middle
And again, if the user handles

00:02:07.666 --> 00:02:09.056 A:middle
this notification, you can

00:02:09.056 --> 00:02:10.186 A:middle
handle this response in your

00:02:10.186 --> 00:02:10.736 A:middle
application.

00:02:11.836 --> 00:02:12.796 A:middle
The other kind of remote

00:02:12.796 --> 00:02:14.076 A:middle
notifications are silent

00:02:14.076 --> 00:02:14.686 A:middle
notifications.

00:02:15.136 --> 00:02:16.576 A:middle
Now, these don't get presented

00:02:16.606 --> 00:02:18.746 A:middle
to your application users but

00:02:19.146 --> 00:02:20.366 A:middle
these allow your application to

00:02:20.366 --> 00:02:21.796 A:middle
be launched in the background

00:02:21.916 --> 00:02:23.816 A:middle
and do any extra work that your

00:02:23.816 --> 00:02:25.836 A:middle
app wants to do associated with

00:02:25.836 --> 00:02:27.056 A:middle
your remote site application.

00:02:28.476 --> 00:02:29.856 A:middle
Now, it's important for remote

00:02:29.856 --> 00:02:32.366 A:middle
notifications to use the latest

00:02:32.366 --> 00:02:34.556 A:middle
HTTPS2, authentication method,

00:02:34.916 --> 00:02:36.016 A:middle
wherever you're doing remote

00:02:36.016 --> 00:02:36.736 A:middle
notifications.

00:02:38.276 --> 00:02:39.946 A:middle
Now, notification content

00:02:39.946 --> 00:02:41.626 A:middle
exists, consists of different

00:02:41.626 --> 00:02:43.016 A:middle
properties that you can set on

00:02:43.016 --> 00:02:43.686 A:middle
the notification.

00:02:44.226 --> 00:02:46.176 A:middle
These include the title, the

00:02:46.176 --> 00:02:48.906 A:middle
subtitle, the body as well as

00:02:48.906 --> 00:02:50.086 A:middle
media attachments that you can

00:02:50.086 --> 00:02:52.000 A:middle
set on your notifications.

00:02:57.046 --> 00:02:58.696 A:middle
Notification triggers determine

00:02:58.696 --> 00:03:00.126 A:middle
when your notification gets

00:03:00.126 --> 00:03:01.286 A:middle
delivered to your app users.

00:03:01.876 --> 00:03:03.396 A:middle
Now, all remote notifications

00:03:03.396 --> 00:03:04.786 A:middle
are associated with the push

00:03:04.786 --> 00:03:06.816 A:middle
trigger and for your local

00:03:06.816 --> 00:03:08.156 A:middle
notifications, you have the

00:03:08.156 --> 00:03:09.876 A:middle
option of using time interval,

00:03:10.006 --> 00:03:11.586 A:middle
calendar or location-based

00:03:11.586 --> 00:03:11.986 A:middle
triggers.

00:03:12.536 --> 00:03:15.496 A:middle
Now, these notifications get

00:03:15.496 --> 00:03:16.726 A:middle
presented to your user in

00:03:16.726 --> 00:03:17.396 A:middle
different ways.

00:03:18.136 --> 00:03:19.836 A:middle
In iOS 11, we've combined the

00:03:19.836 --> 00:03:22.066 A:middle
notification list into a single

00:03:22.066 --> 00:03:22.496 A:middle
list.

00:03:23.066 --> 00:03:24.246 A:middle
So, if the user wakes their

00:03:24.246 --> 00:03:25.696 A:middle
device or pulls down from the

00:03:25.696 --> 00:03:27.406 A:middle
top, they get to go to the same

00:03:27.406 --> 00:03:28.446 A:middle
notification list.

00:03:28.816 --> 00:03:30.246 A:middle
And when the user is in that

00:03:30.246 --> 00:03:31.976 A:middle
state, the notification gets

00:03:31.976 --> 00:03:33.096 A:middle
added to the list right there

00:03:33.096 --> 00:03:33.456 A:middle
and then.

00:03:33.946 --> 00:03:34.706 A:middle
And if you want to see your

00:03:34.706 --> 00:03:35.836 A:middle
older notifications, then you

00:03:35.836 --> 00:03:37.136 A:middle
can just slide up on this list

00:03:37.136 --> 00:03:38.136 A:middle
to see your notification

00:03:38.136 --> 00:03:38.526 A:middle
history.

00:03:39.996 --> 00:03:41.456 A:middle
If the user's device is unlocked

00:03:41.786 --> 00:03:42.936 A:middle
if they're in the home screen or

00:03:42.936 --> 00:03:44.676 A:middle
in any other app, then the

00:03:44.746 --> 00:03:45.956 A:middle
notification rolls down as a

00:03:45.956 --> 00:03:46.796 A:middle
banner from the top.

00:03:48.196 --> 00:03:49.646 A:middle
And if your application is in

00:03:49.646 --> 00:03:51.026 A:middle
the foreground, you do have the

00:03:51.026 --> 00:03:52.256 A:middle
option of presenting the

00:03:52.256 --> 00:03:53.726 A:middle
notification banner right there

00:03:53.726 --> 00:03:54.056 A:middle
and then.

00:03:55.076 --> 00:03:56.106 A:middle
And along with these different

00:03:56.106 --> 00:03:57.586 A:middle
presentation models, you'll also

00:03:57.586 --> 00:03:58.906 A:middle
have the option of having a

00:03:59.016 --> 00:04:00.546 A:middle
sound alert as well as badging

00:04:00.596 --> 00:04:01.516 A:middle
your application icon.

00:04:03.776 --> 00:04:05.466 A:middle
Now, notification actions are

00:04:05.466 --> 00:04:06.736 A:middle
what make your notifications

00:04:06.736 --> 00:04:07.596 A:middle
really interactable.

00:04:08.216 --> 00:04:10.116 A:middle
And your user gets to them by 3D

00:04:10.116 --> 00:04:11.316 A:middle
touching on the notification

00:04:11.456 --> 00:04:12.606 A:middle
where they see the list of all

00:04:12.606 --> 00:04:13.976 A:middle
these actions as well as the

00:04:13.976 --> 00:04:14.786 A:middle
dismiss action.

00:04:15.656 --> 00:04:17.316 A:middle
And then when the user takes any

00:04:17.316 --> 00:04:18.786 A:middle
of these actions, then again you

00:04:18.786 --> 00:04:20.166 A:middle
get the response in your

00:04:20.166 --> 00:04:21.686 A:middle
application to handle this

00:04:21.686 --> 00:04:22.916 A:middle
action as you see fit.

00:04:23.376 --> 00:04:26.436 A:middle
Now, there are different

00:04:26.436 --> 00:04:27.896 A:middle
mechanisms that you can use with

00:04:27.896 --> 00:04:28.796 A:middle
these notifications.

00:04:29.366 --> 00:04:31.126 A:middle
Notification update allows you

00:04:31.126 --> 00:04:33.016 A:middle
to modify notifications that you

00:04:33.016 --> 00:04:34.626 A:middle
might have already scheduled or

00:04:34.626 --> 00:04:35.666 A:middle
published to the user.

00:04:36.616 --> 00:04:37.866 A:middle
In this example, you can see

00:04:37.866 --> 00:04:39.206 A:middle
that we're aggregating the

00:04:39.206 --> 00:04:40.676 A:middle
number of likes that your social

00:04:40.676 --> 00:04:41.866 A:middle
media posts might have gotten.

00:04:42.606 --> 00:04:44.406 A:middle
And after a certain time, say

00:04:44.726 --> 00:04:46.856 A:middle
this count changes, then you can

00:04:46.856 --> 00:04:48.516 A:middle
just go ahead and update this

00:04:48.516 --> 00:04:49.796 A:middle
notification in place.

00:04:50.296 --> 00:04:52.036 A:middle
So, your notification list for

00:04:52.036 --> 00:04:53.626 A:middle
the user is not cluttered with

00:04:53.626 --> 00:04:54.636 A:middle
redundant information.

00:04:55.216 --> 00:04:58.416 A:middle
In the same vein, you also have

00:04:58.416 --> 00:04:59.546 A:middle
the option of removing

00:04:59.546 --> 00:05:00.366 A:middle
notifications.

00:05:01.056 --> 00:05:02.446 A:middle
In this example, there's a

00:05:02.446 --> 00:05:04.496 A:middle
message about the video that was

00:05:04.496 --> 00:05:05.116 A:middle
sent to you.

00:05:05.526 --> 00:05:07.096 A:middle
And once you've seen that video,

00:05:07.096 --> 00:05:08.966 A:middle
you can just go ahead and remove

00:05:08.966 --> 00:05:10.786 A:middle
this notification locally by

00:05:10.786 --> 00:05:11.556 A:middle
your applications.

00:05:13.996 --> 00:05:16.676 A:middle
Now, with iOS 10, we introduced

00:05:16.676 --> 00:05:18.196 A:middle
extensions to your notifications

00:05:18.746 --> 00:05:19.746 A:middle
and there are two types of

00:05:19.746 --> 00:05:20.306 A:middle
extensions.

00:05:20.896 --> 00:05:22.426 A:middle
Namely, the first one is service

00:05:22.426 --> 00:05:22.966 A:middle
extensions.

00:05:23.976 --> 00:05:25.546 A:middle
Now, what a service extension

00:05:25.546 --> 00:05:27.336 A:middle
allows your application to do is

00:05:27.606 --> 00:05:29.066 A:middle
to intercept a notification

00:05:29.266 --> 00:05:30.786 A:middle
before it gets delivered to the

00:05:30.786 --> 00:05:31.196 A:middle
user.

00:05:32.206 --> 00:05:33.716 A:middle
So, you can modify the

00:05:33.716 --> 00:05:36.176 A:middle
notification content or do other

00:05:36.426 --> 00:05:38.516 A:middle
background stuff that might be

00:05:38.516 --> 00:05:39.186 A:middle
associated with this

00:05:39.186 --> 00:05:40.296 A:middle
notification right in the

00:05:40.296 --> 00:05:41.046 A:middle
service extension.

00:05:41.546 --> 00:05:42.676 A:middle
We will take a look at service

00:05:42.676 --> 00:05:44.046 A:middle
extensions in depth in one of

00:05:44.046 --> 00:05:44.916 A:middle
our use cases today.

00:05:45.456 --> 00:05:48.126 A:middle
The other extension points are

00:05:48.126 --> 00:05:50.066 A:middle
content extensions which allow

00:05:50.066 --> 00:05:51.126 A:middle
you to customize which

00:05:51.126 --> 00:05:51.806 A:middle
notifications.

00:05:52.016 --> 00:05:53.136 A:middle
And again, is one of our use

00:05:53.136 --> 00:05:54.446 A:middle
cases of the talk today.

00:05:55.426 --> 00:05:56.546 A:middle
Some examples of content

00:05:56.546 --> 00:05:57.716 A:middle
extensions from first-party

00:05:57.716 --> 00:05:59.306 A:middle
applications include the

00:05:59.306 --> 00:06:00.996 A:middle
messages app which gives you the

00:06:00.996 --> 00:06:03.036 A:middle
full thread right there in the

00:06:03.036 --> 00:06:04.526 A:middle
notifications so you can reply

00:06:04.826 --> 00:06:06.586 A:middle
and get responses right from the

00:06:06.586 --> 00:06:08.106 A:middle
notification without having to

00:06:08.106 --> 00:06:09.106 A:middle
go to the application.

00:06:10.576 --> 00:06:12.056 A:middle
The calendar app shows the full

00:06:12.056 --> 00:06:13.356 A:middle
schedule as well as gives you

00:06:13.356 --> 00:06:15.116 A:middle
the option of accepting or

00:06:15.116 --> 00:06:16.086 A:middle
declining a request.

00:06:17.346 --> 00:06:19.376 A:middle
And the photos application sends

00:06:19.376 --> 00:06:20.596 A:middle
you the photo within the

00:06:20.596 --> 00:06:22.096 A:middle
notification itself and the

00:06:22.096 --> 00:06:23.566 A:middle
ability to write or comment on

00:06:23.566 --> 00:06:23.636 A:middle
it.

00:06:23.756 --> 00:06:26.716 A:middle
And again, we'll look at how you

00:06:26.826 --> 00:06:28.036 A:middle
can use all these different

00:06:28.036 --> 00:06:29.506 A:middle
tools for creating these

00:06:29.506 --> 00:06:31.086 A:middle
notification styles for all your

00:06:31.086 --> 00:06:34.256 A:middle
applications in this session.

00:06:34.406 --> 00:06:36.156 A:middle
Now, watchOS notifications work

00:06:36.156 --> 00:06:38.136 A:middle
in sync with iOS notifications.

00:06:38.656 --> 00:06:40.266 A:middle
All notifications that are sent

00:06:40.266 --> 00:06:42.226 A:middle
to the user's phone also get

00:06:42.226 --> 00:06:43.976 A:middle
delivered to the user's watch if

00:06:44.106 --> 00:06:45.096 A:middle
the phone is locked at that

00:06:45.096 --> 00:06:45.376 A:middle
time.

00:06:46.476 --> 00:06:48.506 A:middle
Now, if the user's watch is not

00:06:48.506 --> 00:06:49.906 A:middle
in range of the phone, then you

00:06:49.906 --> 00:06:51.166 A:middle
also have the ability of

00:06:51.166 --> 00:06:53.326 A:middle
scheduling notifications right

00:06:53.326 --> 00:06:54.746 A:middle
to your watchOS apps as well.

00:06:56.956 --> 00:06:59.596 A:middle
So, how do access all these

00:06:59.596 --> 00:07:01.226 A:middle
different features for

00:07:01.226 --> 00:07:01.936 A:middle
notifications?

00:07:02.156 --> 00:07:03.706 A:middle
For this we introduced two new

00:07:03.706 --> 00:07:05.436 A:middle
frameworks last year, namely

00:07:05.436 --> 00:07:06.896 A:middle
User Notifications and User

00:07:06.896 --> 00:07:07.796 A:middle
Notifications UI.

00:07:09.356 --> 00:07:11.676 A:middle
We went in depth covering all

00:07:11.676 --> 00:07:13.036 A:middle
those different APIs at last

00:07:13.036 --> 00:07:14.916 A:middle
year's WWDC and we highly

00:07:14.916 --> 00:07:16.286 A:middle
encourage you to go check out

00:07:16.286 --> 00:07:17.396 A:middle
these two sessions from last

00:07:17.396 --> 00:07:19.396 A:middle
year which contains much more

00:07:19.396 --> 00:07:20.736 A:middle
information about everything

00:07:20.736 --> 00:07:21.786 A:middle
we've covered in the overview.

00:07:23.416 --> 00:07:25.366 A:middle
All right, let's move on and

00:07:25.366 --> 00:07:26.746 A:middle
jump into our use cases,

00:07:26.996 --> 00:07:28.316 A:middle
starting with the first one,

00:07:28.626 --> 00:07:29.936 A:middle
about hidden notification

00:07:29.936 --> 00:07:30.396 A:middle
content.

00:07:30.856 --> 00:07:32.166 A:middle
And to tell you all about this,

00:07:32.286 --> 00:07:34.326 A:middle
let me invite Teja up here.

00:07:35.516 --> 00:07:39.626 A:middle
[ Applause ]

00:07:40.126 --> 00:07:40.846 A:middle
&gt;&gt; Hi, everyone.

00:07:41.026 --> 00:07:43.036 A:middle
My name is Teja Kondapalli and

00:07:43.036 --> 00:07:44.076 A:middle
I'm also an engineer on the

00:07:44.076 --> 00:07:45.136 A:middle
notifications team.

00:07:45.536 --> 00:07:47.596 A:middle
You just heard a great recap of

00:07:47.596 --> 00:07:49.146 A:middle
the API that we announced last

00:07:49.146 --> 00:07:50.876 A:middle
year and now I'm here to talk to

00:07:50.876 --> 00:07:52.656 A:middle
you about the API we want to

00:07:52.656 --> 00:07:53.526 A:middle
announce this year.

00:07:54.636 --> 00:07:57.356 A:middle
This year we decided to focus on

00:07:57.356 --> 00:07:59.036 A:middle
a feature that we call hidden

00:07:59.036 --> 00:08:01.426 A:middle
notification content which is a

00:08:01.426 --> 00:08:04.316 A:middle
way for your users to hide the

00:08:04.316 --> 00:08:05.896 A:middle
private information in their

00:08:05.896 --> 00:08:07.826 A:middle
notifications when it doesn't

00:08:07.826 --> 00:08:08.686 A:middle
need to be seen.

00:08:11.636 --> 00:08:12.826 A:middle
Why do we care about this?

00:08:14.866 --> 00:08:16.446 A:middle
It's because your users care

00:08:16.576 --> 00:08:17.546 A:middle
about their privacy.

00:08:18.816 --> 00:08:20.376 A:middle
We all know notifications are

00:08:20.376 --> 00:08:23.036 A:middle
very visible and the content in

00:08:23.036 --> 00:08:25.136 A:middle
them is richer than ever, which

00:08:25.136 --> 00:08:26.546 A:middle
means we have to be careful

00:08:26.916 --> 00:08:28.256 A:middle
about protecting the sensitive

00:08:28.256 --> 00:08:30.446 A:middle
information that may be in them.

00:08:30.446 --> 00:08:34.006 A:middle
And actually, you all had a

00:08:34.006 --> 00:08:35.726 A:middle
taste of this in iOS 10.

00:08:37.186 --> 00:08:38.986 A:middle
A message notification on the

00:08:38.986 --> 00:08:40.766 A:middle
lock screen could look like

00:08:40.826 --> 00:08:41.256 A:middle
this.

00:08:42.576 --> 00:08:44.866 A:middle
If you had gone into your

00:08:44.866 --> 00:08:46.926 A:middle
settings under notifications,

00:08:48.006 --> 00:08:50.576 A:middle
set for messages that you only

00:08:50.576 --> 00:08:52.666 A:middle
want previews to be shown when

00:08:52.696 --> 00:08:53.226 A:middle
unlocked.

00:08:53.906 --> 00:08:58.116 A:middle
So, now you can see that the

00:08:58.116 --> 00:08:59.636 A:middle
message, the content of the

00:08:59.636 --> 00:09:01.506 A:middle
message is obscured, and that's

00:09:01.586 --> 00:09:03.436 A:middle
because the user is not

00:09:03.436 --> 00:09:04.126 A:middle
authenticated.

00:09:04.906 --> 00:09:07.026 A:middle
Once they've authenticated, the

00:09:07.026 --> 00:09:08.776 A:middle
content of the message is

00:09:08.776 --> 00:09:09.166 A:middle
revealed.

00:09:10.676 --> 00:09:11.676 A:middle
And I'm really excited to

00:09:11.676 --> 00:09:13.206 A:middle
announce to you that this year

00:09:13.206 --> 00:09:14.506 A:middle
we've extended the support of

00:09:14.506 --> 00:09:17.486 A:middle
this to all apps, including

00:09:17.616 --> 00:09:19.876 A:middle
third-party apps.

00:09:21.516 --> 00:09:24.646 A:middle
[ Applause ]

00:09:25.146 --> 00:09:26.706 A:middle
We've also given your users a

00:09:26.706 --> 00:09:27.656 A:middle
global setting.

00:09:28.326 --> 00:09:30.916 A:middle
They can simply go into settings

00:09:30.916 --> 00:09:33.236 A:middle
notifications and right at the

00:09:33.236 --> 00:09:34.826 A:middle
top they can select whether they

00:09:34.826 --> 00:09:36.186 A:middle
want their previews to be shown

00:09:36.586 --> 00:09:39.096 A:middle
always when unlocked or never.

00:09:39.096 --> 00:09:41.226 A:middle
And this should apply to all

00:09:41.226 --> 00:09:42.566 A:middle
their notifications for all

00:09:42.566 --> 00:09:43.896 A:middle
their apps.

00:09:44.776 --> 00:09:47.266 A:middle
We've also given them a way to

00:09:47.266 --> 00:09:49.156 A:middle
customize these settings per

00:09:49.416 --> 00:09:49.566 A:middle
app.

00:09:50.126 --> 00:09:53.426 A:middle
So again, under settings they

00:09:53.426 --> 00:09:54.886 A:middle
can simply go to a specific

00:09:54.886 --> 00:09:57.936 A:middle
application and choose the

00:09:57.936 --> 00:09:59.636 A:middle
privacy setting for the previews

00:09:59.786 --> 00:10:00.756 A:middle
for that application.

00:10:01.126 --> 00:10:02.326 A:middle
And they might want to fine tune

00:10:02.326 --> 00:10:04.226 A:middle
these because some applications

00:10:04.536 --> 00:10:05.546 A:middle
may show more sensitive

00:10:05.546 --> 00:10:06.786 A:middle
information in their

00:10:06.786 --> 00:10:08.986 A:middle
notifications than others.

00:10:11.126 --> 00:10:13.396 A:middle
And now, because it's up to your

00:10:13.396 --> 00:10:15.306 A:middle
users to determine whether a

00:10:15.306 --> 00:10:17.766 A:middle
notification's content is hidden

00:10:17.766 --> 00:10:19.856 A:middle
or shown at a certain point, we

00:10:19.856 --> 00:10:21.786 A:middle
have given you as app developers

00:10:22.856 --> 00:10:24.686 A:middle
an API to customize what a

00:10:24.686 --> 00:10:26.696 A:middle
hidden notification might look

00:10:27.286 --> 00:10:27.386 A:middle
like.

00:10:28.556 --> 00:10:30.376 A:middle
So, let's take a look at this

00:10:30.376 --> 00:10:31.816 A:middle
application I've written that

00:10:31.816 --> 00:10:33.216 A:middle
sends me some notifications.

00:10:33.626 --> 00:10:34.666 A:middle
And you can see here, this

00:10:34.666 --> 00:10:36.516 A:middle
notification has some rich

00:10:36.516 --> 00:10:38.366 A:middle
information in it.

00:10:38.366 --> 00:10:40.316 A:middle
If my user has previews turned

00:10:40.316 --> 00:10:42.266 A:middle
off, this is what my

00:10:42.266 --> 00:10:43.966 A:middle
notification would look like.

00:10:44.576 --> 00:10:48.806 A:middle
And as you can see, all of the

00:10:48.806 --> 00:10:50.706 A:middle
content is hidden, the title,

00:10:50.706 --> 00:10:52.186 A:middle
the subtitle and the body.

00:10:52.356 --> 00:10:54.026 A:middle
And the body is replaced with a

00:10:54.026 --> 00:10:54.696 A:middle
placeholder.

00:10:54.696 --> 00:10:57.026 A:middle
Our default placeholder says

00:10:57.026 --> 00:10:57.926 A:middle
notification.

00:10:58.436 --> 00:11:03.996 A:middle
But if I had a bunch of

00:11:03.996 --> 00:11:06.826 A:middle
notifications associated with

00:11:06.826 --> 00:11:08.356 A:middle
this app, then you can see here

00:11:08.356 --> 00:11:09.446 A:middle
clearly that I have two

00:11:09.446 --> 00:11:10.696 A:middle
different threads going on.

00:11:11.116 --> 00:11:13.136 A:middle
One about work and the other

00:11:13.226 --> 00:11:14.426 A:middle
about a Thai vacation.

00:11:15.266 --> 00:11:17.006 A:middle
If my user has previews turned

00:11:17.006 --> 00:11:18.726 A:middle
off, this is what my

00:11:18.726 --> 00:11:20.306 A:middle
notification list could look

00:11:20.306 --> 00:11:20.676 A:middle
like.

00:11:21.456 --> 00:11:23.136 A:middle
But in order to prevent that, we

00:11:23.136 --> 00:11:25.096 A:middle
went one step further and we

00:11:25.096 --> 00:11:26.886 A:middle
have automatically coalesced

00:11:26.886 --> 00:11:28.346 A:middle
these for you by thread

00:11:28.346 --> 00:11:29.066 A:middle
identifier.

00:11:29.886 --> 00:11:31.476 A:middle
So, if you're already using

00:11:31.476 --> 00:11:32.506 A:middle
thread identifiers in your

00:11:32.506 --> 00:11:34.316 A:middle
notifications, this will work

00:11:34.436 --> 00:11:35.506 A:middle
automatically for you.

00:11:36.046 --> 00:11:38.796 A:middle
Let's take a look at one of my

00:11:38.796 --> 00:11:39.126 A:middle
threads.

00:11:39.856 --> 00:11:40.896 A:middle
You can see here it says two

00:11:40.896 --> 00:11:42.506 A:middle
notifications of the default

00:11:42.506 --> 00:11:43.056 A:middle
placeholder.

00:11:43.056 --> 00:11:45.476 A:middle
And this thread is actually

00:11:45.586 --> 00:11:46.856 A:middle
about my Thai vacation.

00:11:47.846 --> 00:11:49.156 A:middle
And these are comments.

00:11:49.266 --> 00:11:50.516 A:middle
So, I want to customize this

00:11:50.516 --> 00:11:53.566 A:middle
further and we can do that.

00:11:53.786 --> 00:11:54.616 A:middle
When I'm setting up my

00:11:54.616 --> 00:11:56.726 A:middle
notification category that I'm

00:11:56.726 --> 00:11:57.926 A:middle
going to associate with these

00:11:57.926 --> 00:12:00.666 A:middle
notifications, I can pass it a

00:12:00.666 --> 00:12:03.246 A:middle
new, a value for a new property.

00:12:03.886 --> 00:12:05.426 A:middle
So, here I'm setting up a

00:12:05.426 --> 00:12:09.306 A:middle
comment category and I am also

00:12:09.306 --> 00:12:10.706 A:middle
setting the hidden previews body

00:12:10.706 --> 00:12:11.296 A:middle
placeholder.

00:12:11.856 --> 00:12:13.276 A:middle
I'm just passing in a regular

00:12:13.276 --> 00:12:14.996 A:middle
string here and it says comment.

00:12:15.526 --> 00:12:17.926 A:middle
And now my notification looks

00:12:17.926 --> 00:12:18.306 A:middle
like this.

00:12:19.406 --> 00:12:21.026 A:middle
Which is still not quite right

00:12:21.386 --> 00:12:22.976 A:middle
because I know that there's two

00:12:22.976 --> 00:12:24.046 A:middle
notifications that have been

00:12:24.046 --> 00:12:25.986 A:middle
coalesced and this just says

00:12:25.986 --> 00:12:26.416 A:middle
comment.

00:12:27.346 --> 00:12:29.926 A:middle
So, instead I decide to pass in

00:12:30.556 --> 00:12:31.466 A:middle
a format string.

00:12:32.016 --> 00:12:34.616 A:middle
Which is great.

00:12:34.826 --> 00:12:36.716 A:middle
Now my notification looks as

00:12:36.716 --> 00:12:37.186 A:middle
intended.

00:12:37.186 --> 00:12:38.416 A:middle
It says 2 comments.

00:12:39.096 --> 00:12:41.156 A:middle
But this is not going to work

00:12:41.156 --> 00:12:42.146 A:middle
for the singular case.

00:12:42.956 --> 00:12:45.716 A:middle
It would've said 1 comments if I

00:12:45.716 --> 00:12:47.256 A:middle
had just one notification.

00:12:48.096 --> 00:12:50.516 A:middle
Luckily there's already a way to

00:12:50.516 --> 00:12:52.696 A:middle
account for the singular-plural

00:12:53.166 --> 00:12:55.486 A:middle
problem that's already supported

00:12:55.706 --> 00:12:57.776 A:middle
by foundation, and that's a

00:12:57.776 --> 00:12:59.136 A:middle
strings dictionary.

00:12:59.706 --> 00:13:03.126 A:middle
A strings dictionary is a p-list

00:13:03.126 --> 00:13:04.626 A:middle
file that sits in your project.

00:13:05.306 --> 00:13:06.316 A:middle
And you can, and it looks

00:13:06.316 --> 00:13:07.426 A:middle
somewhat like this.

00:13:07.646 --> 00:13:09.326 A:middle
You can see here that the first

00:13:09.326 --> 00:13:12.246 A:middle
thing I have is a line that says

00:13:12.316 --> 00:13:13.196 A:middle
comment key.

00:13:13.496 --> 00:13:16.286 A:middle
And this indicates to a system

00:13:16.546 --> 00:13:18.236 A:middle
where to find this pluralization

00:13:18.236 --> 00:13:18.606 A:middle
rule.

00:13:19.416 --> 00:13:22.576 A:middle
And below that you can see that

00:13:22.576 --> 00:13:24.416 A:middle
I have a key value mapping for

00:13:24.416 --> 00:13:26.586 A:middle
the singular and plural rules.

00:13:26.886 --> 00:13:28.966 A:middle
It says 1 with a format string

00:13:28.966 --> 00:13:30.836 A:middle
that says comment and other,

00:13:31.186 --> 00:13:32.866 A:middle
with a format string that says

00:13:33.246 --> 00:13:33.616 A:middle
comments.

00:13:34.376 --> 00:13:36.436 A:middle
And it's important to use a

00:13:36.436 --> 00:13:38.786 A:middle
strings dictionary because not

00:13:38.786 --> 00:13:40.946 A:middle
all languages have a distinction

00:13:40.946 --> 00:13:42.606 A:middle
just between singular and

00:13:42.606 --> 00:13:42.996 A:middle
plural.

00:13:43.556 --> 00:13:45.406 A:middle
For example, a strings

00:13:45.406 --> 00:13:49.146 A:middle
dictionary in Arabic looks like

00:13:50.536 --> 00:13:50.646 A:middle
this.

00:13:50.856 --> 00:13:52.726 A:middle
And you can see there are a lot

00:13:52.726 --> 00:13:54.616 A:middle
more options than just singular

00:13:54.896 --> 00:13:55.526 A:middle
and plural.

00:13:55.896 --> 00:13:57.956 A:middle
So, to account for pluralization

00:13:58.016 --> 00:14:00.306 A:middle
as well as localization, it's

00:14:00.306 --> 00:14:01.916 A:middle
important to use strings

00:14:01.916 --> 00:14:02.436 A:middle
dictionaries.

00:14:03.266 --> 00:14:04.156 A:middle
So, now that I've set up my

00:14:04.156 --> 00:14:07.246 A:middle
strings dictionary, when I'm

00:14:07.466 --> 00:14:09.156 A:middle
setting up my comment category,

00:14:09.156 --> 00:14:10.306 A:middle
instead of passing in just a

00:14:10.306 --> 00:14:12.376 A:middle
format string, I'm passing in an

00:14:12.426 --> 00:14:13.486 A:middle
NS localized string.

00:14:13.736 --> 00:14:15.736 A:middle
And the first parameter that I

00:14:15.736 --> 00:14:18.026 A:middle
pass to it is comment key which

00:14:18.026 --> 00:14:19.586 A:middle
is what I associated my

00:14:19.586 --> 00:14:21.166 A:middle
pluralization rule with, the key

00:14:21.166 --> 00:14:22.076 A:middle
that I associated with.

00:14:22.076 --> 00:14:24.816 A:middle
And the second parameter that

00:14:24.816 --> 00:14:26.466 A:middle
I'm passing is just a note about

00:14:26.466 --> 00:14:30.806 A:middle
what this string is about.

00:14:31.006 --> 00:14:32.656 A:middle
If you want to know more about

00:14:32.656 --> 00:14:35.016 A:middle
localization, we had a chat

00:14:35.016 --> 00:14:37.956 A:middle
earlier during WWDC, so you can

00:14:37.956 --> 00:14:39.336 A:middle
catch that on video.

00:14:39.336 --> 00:14:41.156 A:middle
And we also have great resources

00:14:41.436 --> 00:14:43.986 A:middle
in our docs.

00:14:44.126 --> 00:14:45.836 A:middle
And now, my notification

00:14:45.836 --> 00:14:47.696 A:middle
correctly says 2 comments and I

00:14:47.696 --> 00:14:48.736 A:middle
have confidence that it's going

00:14:48.736 --> 00:14:50.956 A:middle
to say 1 comment if there had

00:14:50.956 --> 00:14:52.526 A:middle
only been 1 comment in here.

00:14:53.086 --> 00:14:57.446 A:middle
But if we look further, actually

00:14:58.016 --> 00:15:00.236 A:middle
Jane sent me an image.

00:15:00.286 --> 00:15:01.766 A:middle
She didn't send me a comment,

00:15:02.046 --> 00:15:03.416 A:middle
and I want to indicate that.

00:15:03.896 --> 00:15:05.386 A:middle
So, I can do that as well.

00:15:05.966 --> 00:15:06.726 A:middle
When I'm setting up my

00:15:06.726 --> 00:15:08.616 A:middle
categories, after I set up my

00:15:08.616 --> 00:15:11.086 A:middle
comment category, I also set up

00:15:11.086 --> 00:15:12.776 A:middle
an image category the same way

00:15:13.426 --> 00:15:15.606 A:middle
and I associate Jane's

00:15:15.606 --> 00:15:17.076 A:middle
notification with the image

00:15:17.076 --> 00:15:19.056 A:middle
category and John's notification

00:15:19.056 --> 00:15:20.186 A:middle
with a comment category.

00:15:20.716 --> 00:15:23.116 A:middle
Now I have two notifications

00:15:23.116 --> 00:15:24.716 A:middle
with two different categories

00:15:25.106 --> 00:15:26.196 A:middle
but they're being sent to the

00:15:26.196 --> 00:15:27.146 A:middle
same thread.

00:15:27.976 --> 00:15:29.666 A:middle
So, the coalescing will

00:15:29.666 --> 00:15:31.436 A:middle
automatically work for me and it

00:15:31.436 --> 00:15:33.656 A:middle
correctly says 1 image and 1

00:15:33.756 --> 00:15:34.146 A:middle
comment.

00:15:34.686 --> 00:15:38.706 A:middle
But if you recall further, this

00:15:38.706 --> 00:15:40.256 A:middle
is all one thread and maybe I

00:15:40.256 --> 00:15:41.606 A:middle
want to distinguish this thread

00:15:41.966 --> 00:15:44.326 A:middle
from another thread that is also

00:15:44.326 --> 00:15:46.056 A:middle
for the notifications in this

00:15:46.056 --> 00:15:46.826 A:middle
application.

00:15:47.356 --> 00:15:48.076 A:middle
And I can do that.

00:15:48.276 --> 00:15:50.326 A:middle
So if you see here, the title

00:15:50.326 --> 00:15:51.736 A:middle
says Thai vacation and that's

00:15:51.736 --> 00:15:54.146 A:middle
indicative of what thread this

00:15:54.756 --> 00:15:54.906 A:middle
is.

00:15:55.066 --> 00:15:56.226 A:middle
So, maybe I want to show that.

00:15:56.456 --> 00:15:59.566 A:middle
And again, when I'm setting up

00:15:59.736 --> 00:16:02.926 A:middle
my categories, I can pass in one

00:16:03.126 --> 00:16:05.036 A:middle
or both of two new options that

00:16:05.036 --> 00:16:05.426 A:middle
we have.

00:16:05.886 --> 00:16:07.926 A:middle
Hidden previews show title and

00:16:07.926 --> 00:16:09.966 A:middle
hidden previews shows subtitle.

00:16:10.616 --> 00:16:12.776 A:middle
So, here I'm just trying to pass

00:16:12.776 --> 00:16:15.066 A:middle
in, I'm just passing in the

00:16:15.066 --> 00:16:15.526 A:middle
title.

00:16:15.786 --> 00:16:17.976 A:middle
Because showing the subtitle is

00:16:17.976 --> 00:16:19.456 A:middle
revealing too much information.

00:16:19.496 --> 00:16:20.826 A:middle
I just want to show the title.

00:16:22.046 --> 00:16:23.506 A:middle
And now my notification

00:16:23.506 --> 00:16:25.756 A:middle
correctly says Thai vacation,

00:16:25.996 --> 00:16:27.976 A:middle
which indicates the thread, 1

00:16:27.976 --> 00:16:29.276 A:middle
image and 1 comment.

00:16:29.276 --> 00:16:33.606 A:middle
Now that we know how to

00:16:33.606 --> 00:16:35.846 A:middle
customize hidden notification

00:16:35.846 --> 00:16:37.556 A:middle
content, it's important to

00:16:37.556 --> 00:16:38.506 A:middle
remember that this is a

00:16:38.506 --> 00:16:39.766 A:middle
user-defined setting.

00:16:40.186 --> 00:16:41.636 A:middle
It's up to your users at any

00:16:41.636 --> 00:16:43.326 A:middle
point to determine whether a

00:16:43.326 --> 00:16:44.776 A:middle
notification content is going to

00:16:44.776 --> 00:16:46.346 A:middle
be hidden or shown.

00:16:47.406 --> 00:16:49.886 A:middle
We've given you a way to find

00:16:50.326 --> 00:16:52.016 A:middle
the user's setting and you can

00:16:52.016 --> 00:16:53.966 A:middle
retrieve it by using the show

00:16:53.966 --> 00:16:56.296 A:middle
preview setting property in view

00:16:56.296 --> 00:16:57.746 A:middle
and notification settings.

00:16:59.686 --> 00:17:01.176 A:middle
It's also important to use

00:17:01.226 --> 00:17:02.566 A:middle
thread identifiers to take

00:17:02.566 --> 00:17:03.776 A:middle
advantage of the automatic

00:17:03.956 --> 00:17:05.876 A:middle
coalescing that we already have

00:17:06.456 --> 00:17:07.256 A:middle
supported for you.

00:17:08.116 --> 00:17:09.796 A:middle
And it's important to use

00:17:09.796 --> 00:17:11.786 A:middle
strings dictionaries to account

00:17:11.906 --> 00:17:14.056 A:middle
for pluralization as well as

00:17:14.056 --> 00:17:14.896 A:middle
localization.

00:17:15.466 --> 00:17:19.916 A:middle
So, we've looked at our first

00:17:19.916 --> 00:17:22.096 A:middle
use case of hidden notification

00:17:22.096 --> 00:17:22.646 A:middle
content.

00:17:22.976 --> 00:17:24.806 A:middle
And the second use case is

00:17:24.806 --> 00:17:26.406 A:middle
something I know a lot of you

00:17:26.406 --> 00:17:27.606 A:middle
will be doing, which is sending

00:17:27.606 --> 00:17:29.256 A:middle
push notifications to your

00:17:29.256 --> 00:17:29.916 A:middle
applications.

00:17:30.206 --> 00:17:31.586 A:middle
And we can do some interesting

00:17:31.586 --> 00:17:33.236 A:middle
things with push notifications

00:17:33.596 --> 00:17:35.196 A:middle
if only we're able to modify

00:17:35.196 --> 00:17:36.576 A:middle
them, such as attachments or

00:17:36.576 --> 00:17:37.096 A:middle
encryption.

00:17:37.096 --> 00:17:41.296 A:middle
And what I mean by that is

00:17:41.516 --> 00:17:42.816 A:middle
imagine I want to send some

00:17:42.816 --> 00:17:44.246 A:middle
media with my remote

00:17:44.776 --> 00:17:45.966 A:middle
notification.

00:17:46.356 --> 00:17:48.036 A:middle
But that media doesn't fit in

00:17:48.036 --> 00:17:48.936 A:middle
the push payload.

00:17:49.826 --> 00:17:51.866 A:middle
Well, I can instead send some

00:17:51.866 --> 00:17:53.846 A:middle
metadata about this media such

00:17:53.846 --> 00:17:55.406 A:middle
as the URL that it can be found

00:17:55.406 --> 00:17:58.936 A:middle
at and then on the device I can

00:17:58.936 --> 00:18:01.706 A:middle
download that media and then

00:18:01.706 --> 00:18:02.816 A:middle
present the notification.

00:18:05.616 --> 00:18:08.296 A:middle
Another great example is if your

00:18:08.296 --> 00:18:10.436 A:middle
server side wants to encrypt a

00:18:10.436 --> 00:18:12.636 A:middle
content in the notification, you

00:18:12.636 --> 00:18:13.716 A:middle
would want to decrypt it on the

00:18:13.716 --> 00:18:15.486 A:middle
device before displaying it to

00:18:15.486 --> 00:18:16.046 A:middle
the user.

00:18:16.576 --> 00:18:19.886 A:middle
And another great application is

00:18:20.376 --> 00:18:21.916 A:middle
a pending context-specific

00:18:21.916 --> 00:18:24.066 A:middle
information to your notification

00:18:25.236 --> 00:18:27.446 A:middle
such as location or time or

00:18:27.446 --> 00:18:28.066 A:middle
health data.

00:18:29.106 --> 00:18:30.486 A:middle
This information may only be

00:18:30.486 --> 00:18:31.836 A:middle
present on the user's device.

00:18:32.196 --> 00:18:33.706 A:middle
So, before it's presented to the

00:18:33.706 --> 00:18:35.396 A:middle
user, you can append these to

00:18:35.396 --> 00:18:36.216 A:middle
your notification.

00:18:36.736 --> 00:18:40.206 A:middle
And to do all this, we would a

00:18:40.266 --> 00:18:41.816 A:middle
service extension, which is

00:18:41.816 --> 00:18:43.196 A:middle
something we introduced last

00:18:43.766 --> 00:18:43.876 A:middle
year.

00:18:44.876 --> 00:18:46.816 A:middle
So, let's deep dive and look at

00:18:46.816 --> 00:18:47.526 A:middle
an example.

00:18:48.206 --> 00:18:50.316 A:middle
I want to send a video with my

00:18:50.316 --> 00:18:51.456 A:middle
remote notification.

00:18:52.786 --> 00:18:55.686 A:middle
So, my remote server would send

00:18:55.686 --> 00:18:56.896 A:middle
a push payload to APNS.

00:18:56.896 --> 00:18:59.366 A:middle
And in the payload, I packaged

00:18:59.366 --> 00:19:00.806 A:middle
some metadata about my video.

00:19:02.546 --> 00:19:03.976 A:middle
The notification will then get

00:19:03.976 --> 00:19:05.896 A:middle
delivered to my device and the

00:19:05.896 --> 00:19:07.086 A:middle
service extension has the

00:19:07.086 --> 00:19:08.976 A:middle
opportunity to intercept this

00:19:08.976 --> 00:19:09.816 A:middle
notification.

00:19:09.816 --> 00:19:12.356 A:middle
At that point, I can talk to the

00:19:12.356 --> 00:19:14.906 A:middle
remote server and download a

00:19:14.906 --> 00:19:17.286 A:middle
video preview before attaching

00:19:17.286 --> 00:19:19.536 A:middle
it to my notification and

00:19:19.536 --> 00:19:21.006 A:middle
displaying it to the user.

00:19:21.916 --> 00:19:22.976 A:middle
Let's see how we do this in

00:19:23.706 --> 00:19:23.806 A:middle
code.

00:19:25.556 --> 00:19:27.466 A:middle
The remote payload would look

00:19:27.466 --> 00:19:28.366 A:middle
something like this.

00:19:29.256 --> 00:19:30.796 A:middle
It's important to set the

00:19:30.796 --> 00:19:32.166 A:middle
mutable content flag.

00:19:32.556 --> 00:19:33.776 A:middle
This is what indicates to the

00:19:33.776 --> 00:19:35.646 A:middle
device that it needs to launch

00:19:35.686 --> 00:19:37.906 A:middle
the service extension before

00:19:37.906 --> 00:19:39.236 A:middle
presenting the notification.

00:19:40.156 --> 00:19:42.276 A:middle
And I also have some additional

00:19:42.276 --> 00:19:44.816 A:middle
metadata such as the type of

00:19:44.816 --> 00:19:47.286 A:middle
this media, the video URL, the

00:19:47.286 --> 00:19:49.786 A:middle
location that it was shot at and

00:19:49.816 --> 00:19:52.856 A:middle
also the user that uploaded

00:19:55.116 --> 00:19:55.216 A:middle
this.

00:19:55.436 --> 00:19:56.656 A:middle
Now, when setting up the service

00:19:56.656 --> 00:19:58.686 A:middle
extension, I simply go into

00:19:58.686 --> 00:20:00.806 A:middle
Xcode, create a new target and

00:20:00.806 --> 00:20:02.806 A:middle
select the notification service

00:20:02.806 --> 00:20:04.016 A:middle
extension template.

00:20:04.556 --> 00:20:06.696 A:middle
And I would get a template that

00:20:06.696 --> 00:20:07.756 A:middle
looks something like this.

00:20:08.676 --> 00:20:10.186 A:middle
So, in the service extension,

00:20:10.296 --> 00:20:11.676 A:middle
when a notification gets

00:20:11.676 --> 00:20:14.756 A:middle
delivered, you'll receive a call

00:20:14.756 --> 00:20:16.136 A:middle
to the did receive request with

00:20:16.176 --> 00:20:17.536 A:middle
content handler function.

00:20:18.016 --> 00:20:19.126 A:middle
And the first thing I do in

00:20:19.126 --> 00:20:21.086 A:middle
there is store both the content

00:20:21.086 --> 00:20:24.186 A:middle
handler and the remote content

00:20:24.186 --> 00:20:24.726 A:middle
that was sent.

00:20:25.376 --> 00:20:26.696 A:middle
Just in case I'm not able to

00:20:26.696 --> 00:20:28.246 A:middle
complete my operation, this is

00:20:28.246 --> 00:20:28.696 A:middle
my backup.

00:20:29.266 --> 00:20:30.486 A:middle
So, I've stored those.

00:20:31.026 --> 00:20:35.626 A:middle
And then I can handle my request

00:20:35.996 --> 00:20:36.656 A:middle
the way that I want.

00:20:36.766 --> 00:20:39.706 A:middle
So, the first thing I do here is

00:20:39.706 --> 00:20:42.816 A:middle
I grab the video URL from the

00:20:42.816 --> 00:20:43.686 A:middle
remote payload.

00:20:44.036 --> 00:20:46.306 A:middle
And because this was some custom

00:20:46.376 --> 00:20:48.626 A:middle
metadata, I use the user info

00:20:48.626 --> 00:20:51.186 A:middle
dictionary to access this value.

00:20:52.716 --> 00:20:54.876 A:middle
The next thing I do is download

00:20:54.916 --> 00:20:56.576 A:middle
from that URL using whatever

00:20:56.576 --> 00:20:59.776 A:middle
mechanism I want and I pass a

00:20:59.776 --> 00:21:01.336 A:middle
completion handler to my

00:21:01.336 --> 00:21:03.726 A:middle
download method that I want to

00:21:03.726 --> 00:21:05.346 A:middle
execute after the download is

00:21:05.346 --> 00:21:05.966 A:middle
complete.

00:21:06.286 --> 00:21:09.936 A:middle
After the download completes, I

00:21:09.936 --> 00:21:11.656 A:middle
take that file and I create an

00:21:11.656 --> 00:21:12.536 A:middle
attachment out of it.

00:21:13.516 --> 00:21:15.596 A:middle
I attach it to my notification

00:21:15.596 --> 00:21:17.216 A:middle
content and I send my

00:21:17.216 --> 00:21:19.736 A:middle
notification on its way.

00:21:20.316 --> 00:21:23.446 A:middle
And now my notification looks

00:21:23.446 --> 00:21:23.896 A:middle
great.

00:21:23.896 --> 00:21:26.516 A:middle
It has an attachment, a video

00:21:26.516 --> 00:21:27.996 A:middle
attachment attached to it.

00:21:29.176 --> 00:21:30.646 A:middle
But what if I'm not able to

00:21:30.646 --> 00:21:32.696 A:middle
complete the downloading of the

00:21:32.696 --> 00:21:34.636 A:middle
video in the set time?

00:21:34.636 --> 00:21:36.176 A:middle
There is a limit on the amount

00:21:36.176 --> 00:21:37.636 A:middle
of time that I have to use in my

00:21:37.636 --> 00:21:38.556 A:middle
service extension.

00:21:39.686 --> 00:21:41.126 A:middle
So, if I'm not able to do that,

00:21:41.126 --> 00:21:43.196 A:middle
there is a fallback, and this a

00:21:43.196 --> 00:21:45.006 A:middle
function that we call also in

00:21:45.006 --> 00:21:46.616 A:middle
the service extension called

00:21:46.706 --> 00:21:48.126 A:middle
service extension time will

00:21:48.126 --> 00:21:48.616 A:middle
expire.

00:21:49.746 --> 00:21:52.566 A:middle
In here, I can make use of both

00:21:52.566 --> 00:21:53.976 A:middle
the content handler and the

00:21:53.976 --> 00:21:55.216 A:middle
content that I had stored

00:21:55.216 --> 00:21:55.796 A:middle
earlier.

00:21:56.296 --> 00:22:01.056 A:middle
And the first thing I do is I

00:22:01.056 --> 00:22:03.776 A:middle
grab the type of media this is

00:22:03.776 --> 00:22:05.586 A:middle
that I had also packaged with my

00:22:05.586 --> 00:22:07.926 A:middle
metadata and I just set the

00:22:07.926 --> 00:22:10.986 A:middle
title to say incoming media, or

00:22:10.986 --> 00:22:12.726 A:middle
incoming video.

00:22:13.346 --> 00:22:15.056 A:middle
And I send my notification on

00:22:15.056 --> 00:22:15.366 A:middle
its way.

00:22:15.736 --> 00:22:18.836 A:middle
Now that we know how to use

00:22:18.986 --> 00:22:21.376 A:middle
service extension, let's

00:22:21.376 --> 00:22:22.306 A:middle
remember few things.

00:22:22.306 --> 00:22:24.406 A:middle
Which is that there is a short

00:22:24.406 --> 00:22:25.306 A:middle
execution time.

00:22:25.306 --> 00:22:26.446 A:middle
There's a limit on execution

00:22:26.446 --> 00:22:28.046 A:middle
time and there's also a memory

00:22:28.046 --> 00:22:28.366 A:middle
limit.

00:22:29.296 --> 00:22:31.986 A:middle
But make use of the fallback in

00:22:31.986 --> 00:22:34.216 A:middle
order to do the best possible

00:22:34.216 --> 00:22:35.966 A:middle
thing for that notification if

00:22:35.966 --> 00:22:37.286 A:middle
you're unable to complete your

00:22:37.286 --> 00:22:37.846 A:middle
operation.

00:22:38.976 --> 00:22:40.296 A:middle
It's also important to note the

00:22:40.296 --> 00:22:42.326 A:middle
notification that can be handled

00:22:42.326 --> 00:22:44.286 A:middle
by the service extension are UI

00:22:44.286 --> 00:22:46.336 A:middle
notification and they will be

00:22:46.466 --> 00:22:47.006 A:middle
presented.

00:22:48.156 --> 00:22:49.456 A:middle
And these are different from

00:22:49.456 --> 00:22:50.716 A:middle
silent notifications.

00:22:51.776 --> 00:22:55.786 A:middle
What I mean by that is when APNS

00:22:56.256 --> 00:22:57.346 A:middle
delivers the notification to

00:22:57.346 --> 00:22:59.016 A:middle
your device, the service

00:22:59.016 --> 00:23:01.146 A:middle
extension has the opportunity to

00:23:01.146 --> 00:23:02.506 A:middle
intercept it, as we just saw.

00:23:03.196 --> 00:23:05.036 A:middle
Any and all work done in the

00:23:05.036 --> 00:23:07.126 A:middle
service extension should pertain

00:23:07.126 --> 00:23:08.816 A:middle
to this incoming notification.

00:23:09.176 --> 00:23:10.226 A:middle
There should be no additional

00:23:10.226 --> 00:23:12.216 A:middle
background work for your

00:23:12.216 --> 00:23:13.556 A:middle
application that should be done

00:23:13.556 --> 00:23:13.946 A:middle
here.

00:23:14.596 --> 00:23:15.916 A:middle
All work should be either about

00:23:15.916 --> 00:23:17.666 A:middle
modifying or enhancing this

00:23:17.666 --> 00:23:18.386 A:middle
notification.

00:23:19.026 --> 00:23:20.516 A:middle
The service extension also

00:23:20.516 --> 00:23:23.156 A:middle
doesn't have the power to drop

00:23:23.156 --> 00:23:24.666 A:middle
this notification or prevent it

00:23:24.666 --> 00:23:25.896 A:middle
from being displayed.

00:23:26.196 --> 00:23:27.326 A:middle
This notification will get

00:23:27.326 --> 00:23:29.536 A:middle
delivered to the device.

00:23:30.666 --> 00:23:33.366 A:middle
If instead you want to launch

00:23:33.366 --> 00:23:34.056 A:middle
your application in the

00:23:34.056 --> 00:23:35.136 A:middle
background and run some

00:23:35.136 --> 00:23:37.506 A:middle
additional processing, you

00:23:37.506 --> 00:23:38.926 A:middle
should send a silent

00:23:38.926 --> 00:23:39.646 A:middle
notification.

00:23:40.486 --> 00:23:42.226 A:middle
You can also send a silent

00:23:42.226 --> 00:23:44.516 A:middle
notification and launch your app

00:23:44.516 --> 00:23:45.546 A:middle
in the background and your app

00:23:45.836 --> 00:23:47.286 A:middle
can determine whether or not to

00:23:47.286 --> 00:23:49.436 A:middle
schedule a local notification if

00:23:49.436 --> 00:23:50.356 A:middle
you want to present a

00:23:50.356 --> 00:23:51.786 A:middle
conditional notification.

00:23:52.366 --> 00:23:56.006 A:middle
So, now I have my great

00:23:56.006 --> 00:23:57.416 A:middle
notification with an attachment

00:23:57.816 --> 00:23:59.346 A:middle
and let's say I 3D touch to go

00:23:59.346 --> 00:24:00.826 A:middle
into the rich notification.

00:24:01.486 --> 00:24:02.696 A:middle
Without doing anything, this is

00:24:02.696 --> 00:24:04.016 A:middle
my default look.

00:24:04.596 --> 00:24:06.236 A:middle
Which looks good, but I might

00:24:06.236 --> 00:24:07.266 A:middle
want to customize it.

00:24:07.856 --> 00:24:09.706 A:middle
And in order to show you guys

00:24:09.706 --> 00:24:11.176 A:middle
how to customize these views,

00:24:11.206 --> 00:24:12.486 A:middle
I'm going to invite Kritharth

00:24:12.486 --> 00:24:14.976 A:middle
back up on stage.

00:24:16.516 --> 00:24:19.496 A:middle
[ Applause ]

00:24:19.996 --> 00:24:20.626 A:middle
&gt;&gt; Thank you, Teja.

00:24:21.186 --> 00:24:22.656 A:middle
So, so far we've looked at our

00:24:22.656 --> 00:24:23.736 A:middle
first two use cases.

00:24:23.926 --> 00:24:25.236 A:middle
The first about hidden

00:24:25.236 --> 00:24:26.646 A:middle
notification content and how we

00:24:26.646 --> 00:24:27.586 A:middle
can customize them.

00:24:28.406 --> 00:24:29.916 A:middle
And secondly about modifying

00:24:29.916 --> 00:24:31.116 A:middle
push notification content.

00:24:32.106 --> 00:24:33.596 A:middle
Let's move to our third use case

00:24:33.596 --> 00:24:34.836 A:middle
about customizing rich

00:24:34.836 --> 00:24:35.506 A:middle
notifications.

00:24:36.536 --> 00:24:39.336 A:middle
Now, as we just saw, this is the

00:24:39.336 --> 00:24:41.946 A:middle
default look for a media

00:24:41.946 --> 00:24:43.316 A:middle
attachment rich notification.

00:24:43.916 --> 00:24:45.476 A:middle
We overlay the video with the

00:24:45.476 --> 00:24:47.196 A:middle
play button so that the user can

00:24:47.196 --> 00:24:48.686 A:middle
play the media right there and

00:24:48.686 --> 00:24:51.236 A:middle
then as well as default content

00:24:51.236 --> 00:24:52.066 A:middle
shown right below it.

00:24:52.806 --> 00:24:54.006 A:middle
And if there was no media

00:24:54.006 --> 00:24:55.796 A:middle
attached to it, then all that

00:24:55.796 --> 00:24:57.176 A:middle
the rich notification would show

00:24:57.316 --> 00:24:58.546 A:middle
would be the default content.

00:24:59.676 --> 00:25:01.276 A:middle
But what if you want to

00:25:01.326 --> 00:25:03.176 A:middle
customize this rich notification

00:25:03.606 --> 00:25:05.426 A:middle
and give it a custom look and

00:25:05.426 --> 00:25:06.896 A:middle
feel that's specific to your

00:25:06.896 --> 00:25:07.496 A:middle
application?

00:25:08.906 --> 00:25:10.546 A:middle
What if you want to completely

00:25:10.546 --> 00:25:12.126 A:middle
custom9ize the display of this

00:25:12.126 --> 00:25:14.186 A:middle
notification content as you want

00:25:14.186 --> 00:25:14.526 A:middle
to do.

00:25:15.576 --> 00:25:17.176 A:middle
And in the process you make

00:25:17.516 --> 00:25:19.046 A:middle
these notifications very

00:25:19.046 --> 00:25:21.216 A:middle
interactive and dynamic for your

00:25:21.216 --> 00:25:22.966 A:middle
users so that they can complete

00:25:22.966 --> 00:25:24.666 A:middle
these operations right in the

00:25:24.666 --> 00:25:26.306 A:middle
notification without having the

00:25:26.306 --> 00:25:27.666 A:middle
need to go to the application.

00:25:28.486 --> 00:25:30.456 A:middle
Well, we can achieve all of this

00:25:30.456 --> 00:25:32.516 A:middle
and for that we use our second

00:25:32.516 --> 00:25:34.096 A:middle
extension point of content

00:25:34.096 --> 00:25:34.646 A:middle
extensions.

00:25:35.176 --> 00:25:36.606 A:middle
So, let's take a look how we can

00:25:36.606 --> 00:25:38.246 A:middle
set content extensions up.

00:25:39.606 --> 00:25:41.006 A:middle
So, so far we've seen that the

00:25:41.006 --> 00:25:42.386 A:middle
service extension was where we

00:25:42.386 --> 00:25:44.036 A:middle
downloaded the media and then

00:25:44.296 --> 00:25:45.586 A:middle
the notification was presented

00:25:45.586 --> 00:25:46.516 A:middle
on the user's device.

00:25:47.536 --> 00:25:48.866 A:middle
Now, if you have a content

00:25:48.866 --> 00:25:51.116 A:middle
extension set up having the same

00:25:51.116 --> 00:25:52.596 A:middle
category identifier as the

00:25:52.596 --> 00:25:54.596 A:middle
notification, then the system

00:25:54.596 --> 00:25:55.596 A:middle
will launch this content

00:25:55.596 --> 00:25:56.086 A:middle
extension.

00:25:56.466 --> 00:25:57.796 A:middle
And set up all the different

00:25:57.796 --> 00:25:59.066 A:middle
views and view controllers

00:25:59.126 --> 00:26:00.816 A:middle
associated with this content

00:26:00.816 --> 00:26:03.546 A:middle
extension before opening the

00:26:03.546 --> 00:26:04.356 A:middle
rich notification.

00:26:04.516 --> 00:26:05.536 A:middle
And then uses these view

00:26:05.536 --> 00:26:07.196 A:middle
controllers to present that

00:26:07.196 --> 00:26:08.886 A:middle
custom rich notification user

00:26:09.156 --> 00:26:09.846 A:middle
interface.

00:26:10.366 --> 00:26:13.126 A:middle
What are the different things

00:26:13.256 --> 00:26:14.976 A:middle
that you can customize as part

00:26:14.976 --> 00:26:16.106 A:middle
of these rich notifications?

00:26:16.936 --> 00:26:18.396 A:middle
You can change the title that's

00:26:18.396 --> 00:26:20.186 A:middle
right above the content.

00:26:21.316 --> 00:26:22.976 A:middle
You can completely customize the

00:26:22.976 --> 00:26:24.366 A:middle
content and the way it's shown.

00:26:25.906 --> 00:26:26.996 A:middle
And you also have the option of

00:26:26.996 --> 00:26:28.066 A:middle
just removing the default

00:26:28.066 --> 00:26:29.566 A:middle
content if you've already

00:26:29.566 --> 00:26:31.166 A:middle
included that information in

00:26:31.166 --> 00:26:32.026 A:middle
your custom section.

00:26:32.646 --> 00:26:35.866 A:middle
So, to set up a content

00:26:35.866 --> 00:26:37.826 A:middle
extension, Xcode gives you a

00:26:37.826 --> 00:26:39.206 A:middle
default template to get you

00:26:39.206 --> 00:26:39.626 A:middle
started.

00:26:40.316 --> 00:26:43.046 A:middle
In this customization process,

00:26:43.046 --> 00:26:44.356 A:middle
the first place where we look is

00:26:44.356 --> 00:26:45.176 A:middle
the info.plist.

00:26:45.956 --> 00:26:46.926 A:middle
Now, of course the first thing

00:26:46.926 --> 00:26:48.346 A:middle
we do is set the correct

00:26:48.346 --> 00:26:49.416 A:middle
category for all the

00:26:49.416 --> 00:26:50.956 A:middle
notifications that we want to

00:26:50.956 --> 00:26:52.276 A:middle
associate with this content

00:26:52.276 --> 00:26:52.706 A:middle
extension.

00:26:53.346 --> 00:26:55.616 A:middle
Now, some of the easy ones we

00:26:55.616 --> 00:26:57.286 A:middle
can get here are by setting the

00:26:57.286 --> 00:26:58.986 A:middle
default content hidden flag to

00:26:58.986 --> 00:26:59.356 A:middle
Yes.

00:26:59.356 --> 00:27:00.816 A:middle
And this, we'll just go ahead

00:27:00.816 --> 00:27:02.186 A:middle
and remove the default content

00:27:02.386 --> 00:27:04.486 A:middle
before, below your custom UI.

00:27:06.066 --> 00:27:07.686 A:middle
And also by overriding the

00:27:07.686 --> 00:27:10.146 A:middle
default title, you can do that

00:27:10.146 --> 00:27:11.596 A:middle
by simply setting this flag here

00:27:12.376 --> 00:27:14.066 A:middle
as well.

00:27:14.276 --> 00:27:16.246 A:middle
Now, when we look at our code,

00:27:16.476 --> 00:27:17.716 A:middle
you can see here that our class

00:27:17.716 --> 00:27:19.016 A:middle
notification view controller

00:27:19.106 --> 00:27:20.816 A:middle
implements the UN notification

00:27:20.996 --> 00:27:22.456 A:middle
content extension protocol.

00:27:22.866 --> 00:27:25.316 A:middle
Now, the entry method into your

00:27:25.316 --> 00:27:27.206 A:middle
content extension is the did

00:27:27.206 --> 00:27:28.736 A:middle
receive notification method.

00:27:29.376 --> 00:27:30.796 A:middle
The UN notification object here

00:27:30.796 --> 00:27:32.156 A:middle
contains all the information

00:27:32.276 --> 00:27:33.406 A:middle
that's pertinent to this

00:27:33.406 --> 00:27:33.956 A:middle
notification.

00:27:35.176 --> 00:27:36.486 A:middle
So, the first thing that we do

00:27:36.486 --> 00:27:37.946 A:middle
is go ahead and extract the

00:27:37.996 --> 00:27:39.386 A:middle
content from this notification.

00:27:40.716 --> 00:27:41.916 A:middle
And then we can just go ahead

00:27:41.916 --> 00:27:43.316 A:middle
and get the attachment that we

00:27:43.316 --> 00:27:44.556 A:middle
had downloaded in our service

00:27:44.556 --> 00:27:45.206 A:middle
extension here.

00:27:45.836 --> 00:27:48.566 A:middle
And then we go and set it up in

00:27:48.566 --> 00:27:50.156 A:middle
our custom media player that we

00:27:50.156 --> 00:27:51.936 A:middle
set up in our custom UI.

00:27:53.056 --> 00:27:54.366 A:middle
There are more things we can do

00:27:54.366 --> 00:27:55.336 A:middle
in this customization.

00:27:55.926 --> 00:27:58.216 A:middle
One of the things is setting the

00:27:58.216 --> 00:27:59.866 A:middle
title that we had overridden at

00:27:59.866 --> 00:28:01.056 A:middle
the top of the content

00:28:01.056 --> 00:28:01.456 A:middle
extension.

00:28:02.046 --> 00:28:05.216 A:middle
Now, the user info object is a

00:28:05.286 --> 00:28:07.156 A:middle
key value pairing that you can

00:28:07.156 --> 00:28:08.666 A:middle
associate with your notification

00:28:08.666 --> 00:28:10.836 A:middle
payload which allows you to send

00:28:10.836 --> 00:28:12.326 A:middle
a lot more information.

00:28:12.946 --> 00:28:14.116 A:middle
So that you're not restricted to

00:28:14.116 --> 00:28:16.266 A:middle
just the title, the subtitle as

00:28:16.266 --> 00:28:17.116 A:middle
well as the body of the

00:28:17.116 --> 00:28:17.736 A:middle
notification.

00:28:18.366 --> 00:28:19.946 A:middle
So, in our example here, we

00:28:19.946 --> 00:28:21.546 A:middle
package different information

00:28:21.606 --> 00:28:22.686 A:middle
associated with this

00:28:22.686 --> 00:28:24.506 A:middle
notification such as the user

00:28:24.506 --> 00:28:25.666 A:middle
who posted this video.

00:28:26.006 --> 00:28:26.876 A:middle
The location [inaudible] was

00:28:26.876 --> 00:28:28.446 A:middle
taken as well as a description

00:28:28.446 --> 00:28:29.586 A:middle
that might be associated with

00:28:29.586 --> 00:28:29.666 A:middle
it.

00:28:30.046 --> 00:28:31.196 A:middle
And we can just extract that

00:28:31.196 --> 00:28:32.966 A:middle
simply from the user info

00:28:32.966 --> 00:28:33.396 A:middle
object.

00:28:34.936 --> 00:28:36.426 A:middle
And we use this to set up our

00:28:36.426 --> 00:28:38.246 A:middle
custom labels which, again,

00:28:38.246 --> 00:28:39.846 A:middle
we've tied to the storyboard

00:28:39.936 --> 00:28:41.386 A:middle
associated with our content

00:28:41.386 --> 00:28:41.786 A:middle
extension.

00:28:41.826 --> 00:28:46.586 A:middle
So, now that we've set this up

00:28:46.586 --> 00:28:48.476 A:middle
in Code, let's take a look at

00:28:48.476 --> 00:28:49.736 A:middle
how our custom UI looks.

00:28:50.526 --> 00:28:52.706 A:middle
So, the user goes ahead and 3D

00:28:52.706 --> 00:28:53.946 A:middle
touches in this notification.

00:28:54.476 --> 00:28:56.046 A:middle
And then you can see that we

00:28:56.046 --> 00:28:57.376 A:middle
have a completely different UI

00:28:57.506 --> 00:28:58.826 A:middle
here which might be something

00:28:58.826 --> 00:29:00.026 A:middle
similar to what our application

00:29:00.026 --> 00:29:01.006 A:middle
looks like.

00:29:02.276 --> 00:29:03.876 A:middle
So, we've gone from something

00:29:03.876 --> 00:29:06.466 A:middle
that looked like this to

00:29:06.466 --> 00:29:07.486 A:middle
something that's completely

00:29:07.486 --> 00:29:08.126 A:middle
customized.

00:29:08.656 --> 00:29:11.026 A:middle
You have your own custom title

00:29:11.026 --> 00:29:11.756 A:middle
at the top.

00:29:12.276 --> 00:29:14.606 A:middle
You have your complete custom UI

00:29:14.606 --> 00:29:17.776 A:middle
where the video is surrounded by

00:29:17.776 --> 00:29:19.136 A:middle
all the relevant information

00:29:19.136 --> 00:29:20.406 A:middle
that you want to show as part of

00:29:20.406 --> 00:29:21.136 A:middle
this notification.

00:29:21.726 --> 00:29:23.896 A:middle
And we've hidden the default

00:29:23.896 --> 00:29:25.186 A:middle
content because we've already

00:29:25.186 --> 00:29:27.226 A:middle
included that information in our

00:29:27.526 --> 00:29:28.616 A:middle
custom content.

00:29:32.856 --> 00:29:35.086 A:middle
All right, so let's take a look

00:29:35.086 --> 00:29:37.076 A:middle
at the transition again and pay

00:29:37.076 --> 00:29:39.046 A:middle
attention to the initial sizing

00:29:39.046 --> 00:29:40.426 A:middle
of this content extension as

00:29:40.426 --> 00:29:44.436 A:middle
it's being loaded here.

00:29:44.666 --> 00:29:46.076 A:middle
Now, you might have noticed that

00:29:46.206 --> 00:29:47.886 A:middle
it starts at a larger size and

00:29:47.886 --> 00:29:50.386 A:middle
then grows smaller to the exact

00:29:50.386 --> 00:29:51.506 A:middle
size of the content extension.

00:29:51.946 --> 00:29:53.126 A:middle
Now, this might not be a good

00:29:53.126 --> 00:29:54.846 A:middle
experience for your user if

00:29:54.846 --> 00:29:55.806 A:middle
they're going into your content

00:29:55.806 --> 00:29:57.406 A:middle
extension after 3D touching.

00:29:57.956 --> 00:29:59.776 A:middle
Well, we do have the option of

00:29:59.776 --> 00:30:00.966 A:middle
fixing that as well.

00:30:01.306 --> 00:30:02.816 A:middle
And for that, we go back to our

00:30:02.816 --> 00:30:03.616 A:middle
info.plist.

00:30:04.146 --> 00:30:06.266 A:middle
And there we have a property

00:30:06.266 --> 00:30:08.266 A:middle
that you can set which is the

00:30:08.266 --> 00:30:09.256 A:middle
content size ratio.

00:30:09.936 --> 00:30:11.856 A:middle
Now, this ratio is a best guess

00:30:12.296 --> 00:30:13.616 A:middle
that you want to tell the system

00:30:13.846 --> 00:30:15.606 A:middle
for the ratio between the width

00:30:15.606 --> 00:30:17.116 A:middle
and the height of your content

00:30:17.116 --> 00:30:17.546 A:middle
extension.

00:30:18.136 --> 00:30:20.036 A:middle
So, the system knows what's the

00:30:20.036 --> 00:30:21.576 A:middle
starting size it wants to load

00:30:21.716 --> 00:30:22.786 A:middle
that content extension at.

00:30:23.706 --> 00:30:24.716 A:middle
So, in our example here we just

00:30:24.716 --> 00:30:27.966 A:middle
set the value of 0.8 and once

00:30:28.076 --> 00:30:31.336 A:middle
we've done this, now when we do

00:30:31.336 --> 00:30:33.126 A:middle
the transition, it loads right

00:30:33.346 --> 00:30:34.756 A:middle
perfectly to the size of your

00:30:34.756 --> 00:30:35.176 A:middle
content.

00:30:35.576 --> 00:30:36.446 A:middle
So, it's a much better

00:30:36.446 --> 00:30:38.266 A:middle
experience for your users.

00:30:40.096 --> 00:30:41.796 A:middle
So, before we move on, let's

00:30:41.796 --> 00:30:42.866 A:middle
take a look at some of the best

00:30:42.866 --> 00:30:44.746 A:middle
practices for customizing these

00:30:44.746 --> 00:30:45.576 A:middle
rich notifications.

00:30:47.096 --> 00:30:48.566 A:middle
Now, as I've emphasized, you can

00:30:48.566 --> 00:30:50.806 A:middle
have custom UI elements and you

00:30:50.806 --> 00:30:52.086 A:middle
can display all the relevant

00:30:52.086 --> 00:30:53.546 A:middle
information using these elements

00:30:53.656 --> 00:30:56.066 A:middle
as you see fit.

00:30:56.346 --> 00:30:58.016 A:middle
You can also simply reuse your

00:30:58.016 --> 00:30:59.576 A:middle
app view controllers in these

00:30:59.576 --> 00:31:01.066 A:middle
notification content extensions.

00:31:01.396 --> 00:31:02.706 A:middle
So, you don't have to duplicate

00:31:02.706 --> 00:31:03.196 A:middle
any work.

00:31:03.576 --> 00:31:04.456 A:middle
These are simply view

00:31:04.456 --> 00:31:05.016 A:middle
controllers.

00:31:05.636 --> 00:31:08.556 A:middle
It's also important to have the

00:31:08.556 --> 00:31:10.876 A:middle
correct sizing and that the

00:31:10.946 --> 00:31:12.576 A:middle
starting loading size is also

00:31:12.996 --> 00:31:14.096 A:middle
what makes sense for your

00:31:14.096 --> 00:31:15.056 A:middle
content, for your custom

00:31:15.056 --> 00:31:15.456 A:middle
content.

00:31:17.226 --> 00:31:18.706 A:middle
And lastly, it's important to

00:31:18.706 --> 00:31:20.936 A:middle
have fast loading and layout for

00:31:20.936 --> 00:31:21.506 A:middle
your content.

00:31:22.126 --> 00:31:23.386 A:middle
Because we do want the

00:31:23.386 --> 00:31:25.556 A:middle
transition from the notification

00:31:25.556 --> 00:31:27.216 A:middle
into the rich notification to be

00:31:27.216 --> 00:31:28.886 A:middle
super smooth for your users.

00:31:31.676 --> 00:31:33.776 A:middle
All right, so this is where we

00:31:33.776 --> 00:31:35.386 A:middle
ended up with our custom UI.

00:31:36.166 --> 00:31:38.166 A:middle
Now, we did attach a video here.

00:31:38.376 --> 00:31:40.366 A:middle
However, there's no way to play

00:31:40.366 --> 00:31:40.856 A:middle
the media.

00:31:41.806 --> 00:31:43.666 A:middle
Also, this post looks like it's

00:31:43.666 --> 00:31:44.686 A:middle
coming from a social media

00:31:44.686 --> 00:31:45.926 A:middle
stream but there's no way to

00:31:45.926 --> 00:31:46.656 A:middle
interact with it.

00:31:47.936 --> 00:31:49.576 A:middle
Well, we can add all these

00:31:49.576 --> 00:31:50.836 A:middle
different mechanisms to this

00:31:50.836 --> 00:31:52.686 A:middle
notification and that leads us

00:31:52.686 --> 00:31:54.576 A:middle
to our last use case about user

00:31:54.576 --> 00:31:55.576 A:middle
input customization.

00:31:56.166 --> 00:31:58.996 A:middle
Now, some of you might be

00:31:58.996 --> 00:32:00.666 A:middle
familiar that the content

00:32:00.666 --> 00:32:02.256 A:middle
extension body does not allow

00:32:02.296 --> 00:32:02.986 A:middle
any touches.

00:32:03.916 --> 00:32:04.816 A:middle
However, fear not.

00:32:04.896 --> 00:32:06.686 A:middle
We do give you some multiple

00:32:07.196 --> 00:32:08.516 A:middle
input mechanisms that you can

00:32:08.516 --> 00:32:10.246 A:middle
use here for making these

00:32:10.246 --> 00:32:11.446 A:middle
notifications interactable.

00:32:12.346 --> 00:32:14.006 A:middle
And these are namely media

00:32:14.006 --> 00:32:16.386 A:middle
buttons, notification actions,

00:32:17.096 --> 00:32:18.306 A:middle
and custom user inputs.

00:32:18.736 --> 00:32:19.826 A:middle
And we'll take a look at all

00:32:19.826 --> 00:32:20.536 A:middle
these three different

00:32:20.926 --> 00:32:23.866 A:middle
interaction models in the

00:32:25.016 --> 00:32:25.226 A:middle
section.

00:32:25.366 --> 00:32:26.966 A:middle
Now, wouldn't it be nice that we

00:32:26.966 --> 00:32:28.286 A:middle
could just overlay our video

00:32:28.286 --> 00:32:30.266 A:middle
here with a play button on top

00:32:30.266 --> 00:32:30.566 A:middle
of it?

00:32:31.606 --> 00:32:33.246 A:middle
Well, you can do that.

00:32:33.246 --> 00:32:35.276 A:middle
Content extensions allow you to

00:32:35.276 --> 00:32:37.016 A:middle
overlay your content with media

00:32:37.016 --> 00:32:37.346 A:middle
buttons.

00:32:37.976 --> 00:32:39.336 A:middle
Let's take a look how we can set

00:32:39.336 --> 00:32:39.956 A:middle
this up in code.

00:32:41.606 --> 00:32:43.866 A:middle
So, here we are back at our, in

00:32:43.866 --> 00:32:45.306 A:middle
our class which implements the

00:32:45.306 --> 00:32:46.426 A:middle
content extension protocol.

00:32:47.106 --> 00:32:48.266 A:middle
And for getting these media

00:32:48.266 --> 00:32:50.226 A:middle
buttons, you have to implement a

00:32:50.226 --> 00:32:50.786 A:middle
few methods.

00:32:51.796 --> 00:32:53.576 A:middle
The first one is the media play

00:32:53.576 --> 00:32:55.556 A:middle
pause button frame which allows

00:32:55.556 --> 00:32:57.066 A:middle
you to tell the system exactly

00:32:57.066 --> 00:32:58.566 A:middle
where you want this media button

00:32:58.566 --> 00:33:00.096 A:middle
to be overlayed over your custom

00:33:00.096 --> 00:33:00.546 A:middle
content.

00:33:01.916 --> 00:33:03.426 A:middle
You can also customize the look

00:33:03.426 --> 00:33:05.106 A:middle
and feel of this media button by

00:33:05.196 --> 00:33:07.396 A:middle
specifying the color as well as

00:33:07.396 --> 00:33:07.766 A:middle
the type.

00:33:08.226 --> 00:33:09.426 A:middle
In this example, we just use

00:33:09.426 --> 00:33:09.776 A:middle
default.

00:33:10.426 --> 00:33:14.006 A:middle
Now, to know when the user

00:33:14.006 --> 00:33:15.836 A:middle
actually pressed the play or the

00:33:15.836 --> 00:33:17.406 A:middle
pause button, you also get

00:33:17.406 --> 00:33:19.616 A:middle
method callbacks, namely media

00:33:19.616 --> 00:33:20.606 A:middle
play and media pause.

00:33:20.996 --> 00:33:22.126 A:middle
And in our example, it's

00:33:22.126 --> 00:33:24.496 A:middle
important that call to our media

00:33:24.496 --> 00:33:25.796 A:middle
player in our custom content.

00:33:29.436 --> 00:33:29.976 A:middle
All right.

00:33:29.976 --> 00:33:31.356 A:middle
Now that we've set up our media

00:33:31.356 --> 00:33:33.536 A:middle
button, let's take a look how it

00:33:33.536 --> 00:33:34.156 A:middle
works in action.

00:33:35.776 --> 00:33:37.716 A:middle
So, the user goes into our

00:33:37.716 --> 00:33:39.486 A:middle
custom content and just by

00:33:39.486 --> 00:33:40.656 A:middle
simply pressing the play button,

00:33:40.916 --> 00:33:41.816 A:middle
the video starts playing.

00:33:41.926 --> 00:33:46.096 A:middle
It's as simple as that.

00:33:46.306 --> 00:33:48.116 A:middle
So, let's move to adding more

00:33:48.116 --> 00:33:48.986 A:middle
interaction to this

00:33:48.986 --> 00:33:49.576 A:middle
notification.

00:33:50.306 --> 00:33:51.346 A:middle
And like I said, this was a

00:33:51.346 --> 00:33:54.256 A:middle
media post and we want the user

00:33:54.256 --> 00:33:55.996 A:middle
to give us feedback to this

00:33:55.996 --> 00:33:57.746 A:middle
video post in the form of, say,

00:33:58.236 --> 00:33:59.946 A:middle
maybe a like and a comment

00:33:59.946 --> 00:34:00.226 A:middle
action.

00:34:01.206 --> 00:34:02.276 A:middle
So, let's see how we can set

00:34:02.276 --> 00:34:02.966 A:middle
these up.

00:34:04.016 --> 00:34:05.786 A:middle
Now, normally action handling

00:34:05.786 --> 00:34:07.306 A:middle
works that when the user takes

00:34:07.306 --> 00:34:09.026 A:middle
an action, you get the response

00:34:09.096 --> 00:34:10.136 A:middle
in your main application.

00:34:11.026 --> 00:34:12.166 A:middle
However, if you do have a

00:34:12.166 --> 00:34:14.476 A:middle
content extension set up, you do

00:34:14.476 --> 00:34:16.166 A:middle
have the option of intercepting

00:34:16.166 --> 00:34:17.666 A:middle
this action right in the content

00:34:17.666 --> 00:34:18.066 A:middle
extension.

00:34:18.126 --> 00:34:20.466 A:middle
So, you can act on this action

00:34:20.466 --> 00:34:22.256 A:middle
as well as update your UI the

00:34:22.256 --> 00:34:23.466 A:middle
way you want to do it.

00:34:24.266 --> 00:34:25.416 A:middle
Also, you have the option of

00:34:25.416 --> 00:34:26.946 A:middle
just forwarding this action to

00:34:26.946 --> 00:34:28.456 A:middle
the application if you want to

00:34:28.456 --> 00:34:29.596 A:middle
centralize all your action

00:34:29.596 --> 00:34:29.926 A:middle
handling.

00:34:30.526 --> 00:34:32.846 A:middle
Let's see how we can set this

00:34:32.846 --> 00:34:33.436 A:middle
all up in code.

00:34:35.056 --> 00:34:36.516 A:middle
So, here we create our two

00:34:36.796 --> 00:34:38.466 A:middle
actions, one for like which is a

00:34:38.466 --> 00:34:39.946 A:middle
simple UN notification action.

00:34:40.876 --> 00:34:42.236 A:middle
And for comment action, we

00:34:42.236 --> 00:34:43.976 A:middle
create a text input action.

00:34:44.606 --> 00:34:46.986 A:middle
And then we set up our category

00:34:46.986 --> 00:34:47.926 A:middle
with these two actions that

00:34:47.966 --> 00:34:50.536 A:middle
we've created, giving it the

00:34:50.536 --> 00:34:52.026 A:middle
same identifier that's

00:34:52.026 --> 00:34:53.306 A:middle
associated with the content

00:34:53.306 --> 00:34:53.806 A:middle
extension.

00:34:54.016 --> 00:34:57.636 A:middle
Now, when we come back to the

00:34:57.636 --> 00:34:59.756 A:middle
content extension code, the main

00:34:59.806 --> 00:35:01.186 A:middle
method that you implement for

00:35:01.186 --> 00:35:02.846 A:middle
handling these actions is the

00:35:03.196 --> 00:35:04.416 A:middle
did receive response with

00:35:04.456 --> 00:35:05.406 A:middle
completion handler method.

00:35:06.266 --> 00:35:07.486 A:middle
Now, here the UN notification

00:35:07.486 --> 00:35:09.336 A:middle
response object contains all the

00:35:09.336 --> 00:35:10.966 A:middle
information about the action

00:35:10.966 --> 00:35:12.556 A:middle
that was taken as well as the

00:35:12.556 --> 00:35:14.076 A:middle
notification request on which

00:35:14.076 --> 00:35:14.936 A:middle
this action was taken.

00:35:15.526 --> 00:35:17.766 A:middle
So, the first thing in our

00:35:17.766 --> 00:35:19.616 A:middle
example that we do here is post

00:35:19.616 --> 00:35:20.906 A:middle
this response to our server

00:35:21.236 --> 00:35:22.876 A:middle
because we just want to handle

00:35:22.876 --> 00:35:23.976 A:middle
our action in the content

00:35:23.976 --> 00:35:25.376 A:middle
extension without sending it to

00:35:25.376 --> 00:35:26.246 A:middle
our app.

00:35:26.916 --> 00:35:28.656 A:middle
Then we look at the action

00:35:28.656 --> 00:35:29.816 A:middle
identifier and determine it's

00:35:29.816 --> 00:35:30.496 A:middle
the like action.

00:35:31.466 --> 00:35:32.906 A:middle
And then just go ahead and

00:35:32.906 --> 00:35:34.786 A:middle
update our custom UI with the

00:35:34.876 --> 00:35:35.546 A:middle
like emoji.

00:35:36.086 --> 00:35:38.206 A:middle
And lastly, we call the

00:35:38.206 --> 00:35:39.566 A:middle
completion handler with the

00:35:39.566 --> 00:35:40.706 A:middle
option do not dismiss.

00:35:41.276 --> 00:35:42.706 A:middle
Because we want the user to

00:35:42.706 --> 00:35:44.496 A:middle
still interact with the content,

00:35:44.496 --> 00:35:45.746 A:middle
because the video might still be

00:35:45.746 --> 00:35:47.066 A:middle
playing after they've completed

00:35:47.066 --> 00:35:47.526 A:middle
this action.

00:35:49.856 --> 00:35:51.836 A:middle
So, once we've set this action

00:35:51.836 --> 00:35:53.416 A:middle
up, let's take a look at how

00:35:53.416 --> 00:35:53.846 A:middle
this looks.

00:35:54.606 --> 00:35:58.606 A:middle
So, the user starts playing the

00:35:58.606 --> 00:35:59.986 A:middle
video and just by simply taking

00:35:59.986 --> 00:36:01.736 A:middle
the like action, we've updated

00:36:01.736 --> 00:36:03.616 A:middle
the UI and it gives a good

00:36:03.616 --> 00:36:05.086 A:middle
feedback to the user that

00:36:05.086 --> 00:36:06.116 A:middle
they're engaging with this

00:36:06.116 --> 00:36:07.306 A:middle
content right there and then.

00:36:07.686 --> 00:36:08.796 A:middle
And the video's still playing

00:36:08.876 --> 00:36:09.716 A:middle
and the content hasn't

00:36:09.716 --> 00:36:10.166 A:middle
dismissed.

00:36:10.616 --> 00:36:13.826 A:middle
Let's continue and look at the

00:36:13.826 --> 00:36:14.946 A:middle
next action that we've added

00:36:15.016 --> 00:36:16.016 A:middle
which was the comment action.

00:36:16.576 --> 00:36:17.626 A:middle
And here again we look at the

00:36:17.626 --> 00:36:19.306 A:middle
action identifier and determine

00:36:19.386 --> 00:36:20.546 A:middle
that it is the comment action.

00:36:21.556 --> 00:36:23.266 A:middle
Now, since we know that we'd set

00:36:23.266 --> 00:36:25.166 A:middle
it up as a text input action, we

00:36:25.166 --> 00:36:26.576 A:middle
first check if the response is

00:36:26.576 --> 00:36:27.976 A:middle
associated with a text response.

00:36:29.476 --> 00:36:31.526 A:middle
And we extract the user text

00:36:31.526 --> 00:36:32.516 A:middle
that the user might have entered

00:36:32.606 --> 00:36:33.556 A:middle
as part of this action.

00:36:34.296 --> 00:36:36.146 A:middle
And then set it up on our custom

00:36:36.146 --> 00:36:37.796 A:middle
label that's again associated

00:36:37.796 --> 00:36:38.526 A:middle
with our custom UI.

00:36:38.526 --> 00:36:40.726 A:middle
And again, we call the

00:36:40.726 --> 00:36:41.946 A:middle
completion handler without

00:36:41.946 --> 00:36:43.136 A:middle
dismissing this notification.

00:36:45.296 --> 00:36:47.146 A:middle
So, once we've set this up

00:36:47.986 --> 00:36:50.086 A:middle
again, now the user starts

00:36:50.086 --> 00:36:51.006 A:middle
playing the video, presses the

00:36:51.006 --> 00:36:53.006 A:middle
comment button and just adds

00:36:53.006 --> 00:36:54.026 A:middle
their comment there.

00:36:54.326 --> 00:36:55.456 A:middle
And as soon as you post it, we

00:36:55.456 --> 00:36:57.006 A:middle
just update our content right

00:36:57.006 --> 00:36:57.526 A:middle
there and then.

00:36:58.696 --> 00:37:00.306 A:middle
So, it's, so the user gets

00:37:00.306 --> 00:37:01.436 A:middle
real-time feedback of what

00:37:01.436 --> 00:37:02.846 A:middle
they're doing and they're super

00:37:02.846 --> 00:37:04.566 A:middle
engaged with the content that's

00:37:04.566 --> 00:37:05.216 A:middle
associated with the

00:37:05.216 --> 00:37:05.886 A:middle
notification.

00:37:06.386 --> 00:37:07.236 A:middle
And they don't have to go to

00:37:07.236 --> 00:37:09.506 A:middle
your application to do all these

00:37:12.276 --> 00:37:12.406 A:middle
things.

00:37:12.596 --> 00:37:15.006 A:middle
All right, so we've set up these

00:37:15.006 --> 00:37:18.006 A:middle
two actions but sometimes a like

00:37:18.326 --> 00:37:19.666 A:middle
is not enough and a comment

00:37:19.666 --> 00:37:20.486 A:middle
might be too much.

00:37:21.756 --> 00:37:23.716 A:middle
For social media posts maybe, we

00:37:23.716 --> 00:37:25.476 A:middle
want to have the user to give

00:37:25.476 --> 00:37:26.936 A:middle
their reactions to this post.

00:37:27.736 --> 00:37:29.496 A:middle
So, one way we could do that is

00:37:29.806 --> 00:37:30.966 A:middle
add all these different

00:37:30.966 --> 00:37:33.406 A:middle
reactions as just actions

00:37:33.406 --> 00:37:34.156 A:middle
associated with this

00:37:34.156 --> 00:37:34.726 A:middle
notification.

00:37:35.386 --> 00:37:36.506 A:middle
However, this doesn't look

00:37:36.506 --> 00:37:37.836 A:middle
really nice and it's a lot of

00:37:37.836 --> 00:37:39.426 A:middle
options that we're duplicating

00:37:39.426 --> 00:37:39.556 A:middle
here.

00:37:40.876 --> 00:37:42.206 A:middle
What if you could just replace

00:37:42.206 --> 00:37:44.256 A:middle
this with a custom user input

00:37:44.296 --> 00:37:44.506 A:middle
view?

00:37:45.026 --> 00:37:46.496 A:middle
That shows up right where the

00:37:46.496 --> 00:37:48.336 A:middle
user's keyboard would've gone.

00:37:49.056 --> 00:37:50.626 A:middle
Perhaps something like this?

00:37:51.986 --> 00:37:53.796 A:middle
Well, you do have the option of

00:37:53.866 --> 00:37:54.426 A:middle
doing this.

00:37:54.806 --> 00:37:56.436 A:middle
And for that, we use an existing

00:37:56.436 --> 00:37:58.536 A:middle
UI kit API for UI responder.

00:38:00.046 --> 00:38:01.056 A:middle
And let's take a look how we can

00:38:01.056 --> 00:38:02.116 A:middle
set this up and code them.

00:38:03.256 --> 00:38:05.046 A:middle
So, now we create our new action

00:38:05.766 --> 00:38:07.116 A:middle
for reactions which is a simple

00:38:07.116 --> 00:38:08.126 A:middle
UN notification action.

00:38:08.686 --> 00:38:09.906 A:middle
And then update our category

00:38:09.996 --> 00:38:12.326 A:middle
with this action that we've

00:38:14.936 --> 00:38:15.146 A:middle
created.

00:38:15.246 --> 00:38:18.596 A:middle
Now, in the class that's

00:38:18.596 --> 00:38:19.476 A:middle
implementing the content

00:38:19.476 --> 00:38:20.996 A:middle
extension protocol, what you

00:38:20.996 --> 00:38:22.146 A:middle
need to do is override a few

00:38:22.146 --> 00:38:23.706 A:middle
methods that tell the system

00:38:23.996 --> 00:38:25.326 A:middle
that you're providing your own

00:38:25.326 --> 00:38:26.176 A:middle
custom input feed.

00:38:26.576 --> 00:38:28.136 A:middle
The first method that you have

00:38:28.136 --> 00:38:29.446 A:middle
to override is the can become

00:38:29.446 --> 00:38:31.026 A:middle
first responder and you return

00:38:31.026 --> 00:38:31.676 A:middle
the value true.

00:38:32.866 --> 00:38:34.516 A:middle
And then you override the input

00:38:34.516 --> 00:38:35.536 A:middle
view method where you're

00:38:35.536 --> 00:38:36.896 A:middle
returning your custom input

00:38:36.896 --> 00:38:37.146 A:middle
field.

00:38:38.036 --> 00:38:39.966 A:middle
Now, you have complete control

00:38:40.026 --> 00:38:41.216 A:middle
of how you're setting this input

00:38:41.216 --> 00:38:41.986 A:middle
view up.

00:38:41.986 --> 00:38:44.376 A:middle
And all the actions and the

00:38:44.376 --> 00:38:46.226 A:middle
different interactions that you

00:38:46.226 --> 00:38:47.456 A:middle
might have associated with this.

00:38:47.456 --> 00:38:48.376 A:middle
You're not going to go through

00:38:48.376 --> 00:38:50.436 A:middle
the default notification action

00:38:50.436 --> 00:38:51.936 A:middle
handling for this because this

00:38:51.936 --> 00:38:56.636 A:middle
is your custom input view.

00:38:56.846 --> 00:38:58.666 A:middle
So, once we've set this up, we

00:38:58.666 --> 00:39:00.506 A:middle
come back to the did receive

00:39:00.506 --> 00:39:02.736 A:middle
action response method and here

00:39:02.736 --> 00:39:04.256 A:middle
determining that it's the action

00:39:04.256 --> 00:39:05.916 A:middle
associated with the reaction

00:39:07.016 --> 00:39:07.856 A:middle
[inaudible], all we have to do

00:39:07.956 --> 00:39:09.866 A:middle
is call self.become first

00:39:09.866 --> 00:39:10.236 A:middle
responder.

00:39:11.166 --> 00:39:13.056 A:middle
Just simply this call will let

00:39:13.056 --> 00:39:14.616 A:middle
the system know to display your

00:39:14.616 --> 00:39:16.056 A:middle
custom input view where the

00:39:16.056 --> 00:39:16.836 A:middle
keyword would've gone.

00:39:18.266 --> 00:39:19.646 A:middle
And in our private method for

00:39:19.736 --> 00:39:21.836 A:middle
handling the bottom press for

00:39:21.836 --> 00:39:23.426 A:middle
these, we update our custom

00:39:23.426 --> 00:39:25.826 A:middle
label and also we just call

00:39:25.826 --> 00:39:27.616 A:middle
resign first responder which

00:39:27.686 --> 00:39:29.846 A:middle
then dismisses your custom input

00:39:30.626 --> 00:39:30.736 A:middle
view.

00:39:30.956 --> 00:39:33.136 A:middle
Now, I know that's a lot of

00:39:33.136 --> 00:39:33.366 A:middle
code.

00:39:33.366 --> 00:39:34.306 A:middle
Let's take a look how this

00:39:34.306 --> 00:39:34.956 A:middle
actually works.

00:39:36.086 --> 00:39:37.566 A:middle
So, you can see here that we

00:39:37.566 --> 00:39:38.896 A:middle
have our new action for

00:39:39.006 --> 00:39:39.536 A:middle
reactions.

00:39:40.106 --> 00:39:43.746 A:middle
And then when the user presses

00:39:43.776 --> 00:39:45.346 A:middle
this, our custom input view just

00:39:45.346 --> 00:39:47.576 A:middle
shows up at the button and by

00:39:47.576 --> 00:39:48.916 A:middle
pressing either of these emojis,

00:39:49.186 --> 00:39:50.606 A:middle
we can just update the UI there.

00:39:51.286 --> 00:39:55.116 A:middle
So, it's a very customized way

00:39:55.236 --> 00:39:56.796 A:middle
of how you want your users to

00:39:56.796 --> 00:39:57.936 A:middle
interact with your content.

00:39:58.236 --> 00:40:00.256 A:middle
You're not limited by just

00:40:00.256 --> 00:40:02.226 A:middle
simple action button presses.

00:40:02.796 --> 00:40:04.136 A:middle
So, we've gone from something

00:40:04.136 --> 00:40:06.586 A:middle
that looked like this.

00:40:06.796 --> 00:40:07.856 A:middle
To something that's much more

00:40:07.856 --> 00:40:09.556 A:middle
concise and a much better user

00:40:09.556 --> 00:40:10.096 A:middle
experience.

00:40:10.096 --> 00:40:14.506 A:middle
So, what are some of the best

00:40:14.506 --> 00:40:16.066 A:middle
practices for this user input

00:40:16.066 --> 00:40:16.756 A:middle
customization?

00:40:16.826 --> 00:40:19.796 A:middle
Now, let me repeat that media

00:40:19.796 --> 00:40:21.456 A:middle
buttons are the only mechanism

00:40:21.456 --> 00:40:22.406 A:middle
that you have for overlay

00:40:22.406 --> 00:40:22.826 A:middle
controls.

00:40:22.826 --> 00:40:23.996 A:middle
So, use them where it makes

00:40:23.996 --> 00:40:24.346 A:middle
sense.

00:40:25.016 --> 00:40:26.056 A:middle
You can associate them with

00:40:26.116 --> 00:40:27.506 A:middle
video as well as some playback.

00:40:28.146 --> 00:40:30.476 A:middle
Make sure your actions are

00:40:30.476 --> 00:40:31.896 A:middle
specific to the context of the

00:40:31.896 --> 00:40:33.746 A:middle
notification so that the user

00:40:33.746 --> 00:40:35.356 A:middle
knows exactly what they're doing

00:40:35.356 --> 00:40:36.076 A:middle
with these actions.

00:40:36.076 --> 00:40:39.426 A:middle
It's up to you to determine

00:40:39.486 --> 00:40:40.336 A:middle
whether it makes sense to

00:40:40.336 --> 00:40:42.376 A:middle
dismiss the content extension or

00:40:42.496 --> 00:40:43.616 A:middle
not depending upon the kind of

00:40:43.616 --> 00:40:44.346 A:middle
engagement that you're

00:40:44.346 --> 00:40:45.586 A:middle
presenting as part of your

00:40:45.586 --> 00:40:46.066 A:middle
notification.

00:40:46.626 --> 00:40:49.476 A:middle
And then the custom user input

00:40:49.476 --> 00:40:50.976 A:middle
view gives you complete control

00:40:51.446 --> 00:40:53.856 A:middle
of your input mechanisms for

00:40:53.856 --> 00:40:54.806 A:middle
these notifications.

00:40:55.386 --> 00:40:58.666 A:middle
Now, before we go today, we did

00:40:58.786 --> 00:41:01.096 A:middle
want to showcase a few apps that

00:41:01.096 --> 00:41:02.916 A:middle
we feel have really used these

00:41:02.916 --> 00:41:04.656 A:middle
notifications APIs.

00:41:04.656 --> 00:41:05.756 A:middle
Most of them that we announced

00:41:05.756 --> 00:41:08.496 A:middle
at last year's WWDC and show how

00:41:08.496 --> 00:41:09.476 A:middle
they're using these different

00:41:09.476 --> 00:41:10.616 A:middle
APIs in different ways.

00:41:12.146 --> 00:41:13.726 A:middle
The [inaudible] application

00:41:14.136 --> 00:41:15.906 A:middle
provides a very rich interface

00:41:15.906 --> 00:41:18.586 A:middle
with the media as well as the

00:41:18.806 --> 00:41:21.266 A:middle
news title and a blurb about

00:41:21.266 --> 00:41:22.506 A:middle
this content right there and

00:41:22.506 --> 00:41:22.746 A:middle
then.

00:41:22.846 --> 00:41:24.176 A:middle
And gives you the option of just

00:41:24.176 --> 00:41:25.296 A:middle
interacting with this content

00:41:25.386 --> 00:41:25.996 A:middle
with actions.

00:41:26.536 --> 00:41:30.126 A:middle
The Castro Podcast app shows you

00:41:30.126 --> 00:41:32.216 A:middle
your next upcoming podcast as

00:41:32.216 --> 00:41:33.506 A:middle
well as gives you the option of

00:41:33.506 --> 00:41:35.036 A:middle
just modifying your podcast

00:41:35.036 --> 00:41:36.396 A:middle
queue list right there and then,

00:41:36.566 --> 00:41:38.006 A:middle
again with notification actions.

00:41:38.576 --> 00:41:41.216 A:middle
And then the Shazam content

00:41:41.216 --> 00:41:42.736 A:middle
extension gives you a play

00:41:42.736 --> 00:41:44.066 A:middle
button so that you can play your

00:41:44.066 --> 00:41:45.676 A:middle
last recorded song right from

00:41:45.676 --> 00:41:47.206 A:middle
the notification as well as the

00:41:47.206 --> 00:41:49.306 A:middle
option to buy and share this

00:41:49.306 --> 00:41:49.556 A:middle
media.

00:41:49.976 --> 00:41:53.956 A:middle
All right, so let's summarize

00:41:53.956 --> 00:41:55.166 A:middle
everything that we've looked in

00:41:55.166 --> 00:41:55.786 A:middle
our session today.

00:41:56.826 --> 00:41:58.246 A:middle
We started out by doing an

00:41:58.246 --> 00:42:00.036 A:middle
overview of notifications and

00:42:00.036 --> 00:42:01.406 A:middle
all the different APIs that you

00:42:01.406 --> 00:42:03.176 A:middle
can use for doing notifications

00:42:03.176 --> 00:42:04.086 A:middle
for your applications.

00:42:05.296 --> 00:42:06.556 A:middle
Then we introduced a new concept

00:42:06.556 --> 00:42:07.726 A:middle
about hidden notification

00:42:07.726 --> 00:42:09.966 A:middle
content and how you can totally

00:42:09.966 --> 00:42:11.996 A:middle
customize how that looks to your

00:42:11.996 --> 00:42:12.896 A:middle
application users.

00:42:13.476 --> 00:42:16.106 A:middle
Then we talked about modifying

00:42:16.106 --> 00:42:17.956 A:middle
notification push content using

00:42:17.956 --> 00:42:18.826 A:middle
service extension.

00:42:19.466 --> 00:42:22.106 A:middle
And we talked about customizing

00:42:22.106 --> 00:42:23.456 A:middle
rich notification interfaces

00:42:23.576 --> 00:42:24.976 A:middle
using content extensions.

00:42:26.286 --> 00:42:27.616 A:middle
And tied to that, we talked

00:42:27.616 --> 00:42:29.406 A:middle
about customizing these user

00:42:29.406 --> 00:42:30.896 A:middle
input that's associated with

00:42:30.896 --> 00:42:31.986 A:middle
these rich notifications.

00:42:32.886 --> 00:42:34.046 A:middle
So, we're really excited to see

00:42:34.266 --> 00:42:36.106 A:middle
how you go ahead and use all

00:42:36.106 --> 00:42:37.836 A:middle
these different tools for making

00:42:37.836 --> 00:42:39.376 A:middle
the notification experience much

00:42:39.376 --> 00:42:40.656 A:middle
richer for your application

00:42:40.656 --> 00:42:41.066 A:middle
users.

00:42:42.346 --> 00:42:43.356 A:middle
For more information about this

00:42:43.356 --> 00:42:44.596 A:middle
session, do check out this

00:42:44.596 --> 00:42:44.926 A:middle
website.

00:42:46.456 --> 00:42:47.666 A:middle
That's all for the session

00:42:47.666 --> 00:42:47.946 A:middle
today.

00:42:48.066 --> 00:42:49.086 A:middle
Thank you so much for coming and

00:42:49.496 --> 00:42:50.646 A:middle
have a great WWDC.

00:42:52.016 --> 00:42:54.000 A:middle
[ Applause ]