WEBVTT

00:00:17.556 --> 00:00:19.866 A:middle
&gt;&gt; Hello, I'm Tanya Kancheva and

00:00:19.866 --> 00:00:21.456 A:middle
I'm here to talk about wireless

00:00:21.456 --> 00:00:21.916 A:middle
CarPlay.

00:00:23.656 --> 00:00:25.526 A:middle
wireless CarPlay is perfect for

00:00:25.526 --> 00:00:27.776 A:middle
any trip, you can get in your

00:00:27.776 --> 00:00:29.726 A:middle
car without taking your iPhone

00:00:29.776 --> 00:00:32.166 A:middle
out of your bag or pocket and

00:00:32.166 --> 00:00:33.896 A:middle
start experiencing CarPlay

00:00:33.896 --> 00:00:34.636 A:middle
effortlessly.

00:00:36.126 --> 00:00:37.486 A:middle
The CarPlay experience is the

00:00:37.596 --> 00:00:39.586 A:middle
same whether you are plugged in

00:00:39.786 --> 00:00:41.336 A:middle
or using it wirelessly.

00:00:42.856 --> 00:00:44.746 A:middle
In this session, we will dive

00:00:44.746 --> 00:00:47.076 A:middle
into the details on developing a

00:00:47.076 --> 00:00:48.466 A:middle
wireless CarPlay system.

00:00:50.716 --> 00:00:52.596 A:middle
First, let's start by talking

00:00:52.646 --> 00:00:54.436 A:middle
about the wireless CarPlay

00:00:54.436 --> 00:00:55.206 A:middle
experience.

00:00:57.506 --> 00:00:59.116 A:middle
The first time you use wireless

00:00:59.116 --> 00:01:01.076 A:middle
CarPlay you need to pair your

00:01:01.336 --> 00:01:02.766 A:middle
iPhone to your car.

00:01:04.026 --> 00:01:05.976 A:middle
The simplest way to pair is by

00:01:06.016 --> 00:01:07.726 A:middle
plugging in iPhone using a

00:01:07.726 --> 00:01:08.126 A:middle
cable.

00:01:09.586 --> 00:01:10.996 A:middle
You can also pair without

00:01:10.996 --> 00:01:12.736 A:middle
plugging in by using the car's

00:01:12.736 --> 00:01:15.316 A:middle
UI to add a new device and by

00:01:15.316 --> 00:01:16.476 A:middle
following the onscreen

00:01:16.476 --> 00:01:17.096 A:middle
instructions.

00:01:19.426 --> 00:01:21.526 A:middle
Plugging in iPhone using a cable

00:01:21.646 --> 00:01:23.986 A:middle
is the easiest and fastest way

00:01:24.026 --> 00:01:26.336 A:middle
to pair for wireless CarPlay and

00:01:26.376 --> 00:01:28.106 A:middle
all wireless CarPlay systems

00:01:28.426 --> 00:01:29.606 A:middle
should support this feature.

00:01:30.646 --> 00:01:32.006 A:middle
When iPhone is plugged in

00:01:32.286 --> 00:01:33.496 A:middle
CarPlay starts normally.

00:01:35.496 --> 00:01:37.136 A:middle
If the car supports wireless

00:01:37.136 --> 00:01:38.996 A:middle
CarPlay the user will be

00:01:38.996 --> 00:01:40.866 A:middle
presented with the following

00:01:40.866 --> 00:01:41.926 A:middle
prompt on iPhone.

00:01:44.186 --> 00:01:46.926 A:middle
A simple tap on enable wireless

00:01:46.926 --> 00:01:48.606 A:middle
CarPlay completes the pairing

00:01:48.606 --> 00:01:49.186 A:middle
process.

00:01:49.956 --> 00:01:51.886 A:middle
Be sure to provide a meaningful

00:01:51.886 --> 00:01:54.366 A:middle
display name as in this example,

00:01:54.646 --> 00:01:57.116 A:middle
my car, so it's clear that

00:01:57.116 --> 00:01:58.826 A:middle
iPhone will be associated with

00:01:58.826 --> 00:01:59.176 A:middle
the car.

00:02:02.316 --> 00:02:04.826 A:middle
Once pairing is complete CarPlay

00:02:04.826 --> 00:02:06.546 A:middle
starts automatically the next

00:02:06.546 --> 00:02:07.726 A:middle
time you enter the car.

00:02:09.486 --> 00:02:11.496 A:middle
It's not necessary to require

00:02:11.496 --> 00:02:13.186 A:middle
additional confirmation on the

00:02:13.186 --> 00:02:15.956 A:middle
car's display because CarPlay is

00:02:15.956 --> 00:02:18.226 A:middle
already running and the user has

00:02:18.226 --> 00:02:20.326 A:middle
already chosen to use wireless

00:02:20.326 --> 00:02:21.546 A:middle
CarPlay on iPhone.

00:02:22.496 --> 00:02:24.686 A:middle
As you can see, pairing by

00:02:24.746 --> 00:02:27.156 A:middle
plugging in is simple and

00:02:27.156 --> 00:02:27.626 A:middle
effortless.

00:02:30.476 --> 00:02:32.436 A:middle
The user can also pair without

00:02:32.436 --> 00:02:34.066 A:middle
plugging in and by using the

00:02:34.066 --> 00:02:36.776 A:middle
car's UI to add a new device and

00:02:36.776 --> 00:02:38.186 A:middle
by following the onscreen

00:02:38.286 --> 00:02:39.616 A:middle
instructions.

00:02:40.506 --> 00:02:42.426 A:middle
To begin, the pairing process

00:02:42.426 --> 00:02:43.986 A:middle
needs to be started on both the

00:02:43.986 --> 00:02:45.506 A:middle
car and on iPhone.

00:02:48.246 --> 00:02:50.596 A:middle
To make it easier CarPlay

00:02:50.596 --> 00:02:53.046 A:middle
standardizes a long press on the

00:02:53.046 --> 00:02:55.196 A:middle
Voice Control button to start

00:02:55.196 --> 00:02:56.116 A:middle
the pairing process.

00:02:57.156 --> 00:02:58.696 A:middle
Normally this will start Siri,

00:02:59.086 --> 00:03:01.096 A:middle
but if no phone is connected the

00:03:01.126 --> 00:03:02.586 A:middle
car should immediately prepare

00:03:02.586 --> 00:03:03.156 A:middle
for pairing.

00:03:04.846 --> 00:03:06.776 A:middle
You can also use menus and

00:03:06.776 --> 00:03:08.656 A:middle
settings in the car's native UI

00:03:08.656 --> 00:03:10.106 A:middle
to start the pairing process.

00:03:11.096 --> 00:03:12.736 A:middle
You may offer a CarPlay specific

00:03:12.736 --> 00:03:14.936 A:middle
menu, a general Bluetooth menu

00:03:15.066 --> 00:03:15.556 A:middle
or both.

00:03:18.546 --> 00:03:20.356 A:middle
In CarPlay settings on iPhone

00:03:20.856 --> 00:03:22.646 A:middle
users are encouraged to press

00:03:22.646 --> 00:03:23.866 A:middle
and hold the Voice Control

00:03:23.866 --> 00:03:25.846 A:middle
button on the steering wheel to

00:03:25.846 --> 00:03:27.206 A:middle
start the pairing process.

00:03:29.546 --> 00:03:32.066 A:middle
Once CarPlay setup is started on

00:03:32.066 --> 00:03:34.576 A:middle
the car and iPhone select the

00:03:34.576 --> 00:03:36.146 A:middle
discovered device to start the

00:03:36.146 --> 00:03:36.866 A:middle
pairing process.

00:03:39.376 --> 00:03:41.416 A:middle
Apple recommends that you allow

00:03:41.416 --> 00:03:43.336 A:middle
the user to select the car from

00:03:43.386 --> 00:03:43.776 A:middle
iPhone.

00:03:44.696 --> 00:03:47.356 A:middle
In your native UI simply show

00:03:47.356 --> 00:03:49.566 A:middle
your car's display name so the

00:03:49.566 --> 00:03:50.996 A:middle
user knows what to look for.

00:03:54.036 --> 00:03:55.796 A:middle
If you do allow the user to

00:03:55.796 --> 00:03:57.456 A:middle
initiate selection from the car

00:03:58.236 --> 00:03:59.426 A:middle
you can show a list of

00:03:59.426 --> 00:04:00.426 A:middle
discovered devices.

00:04:02.016 --> 00:04:03.616 A:middle
You can show a less specific to

00:04:03.616 --> 00:04:07.186 A:middle
adding a CarPlay device or you

00:04:07.186 --> 00:04:08.566 A:middle
can show a list of all

00:04:08.566 --> 00:04:10.026 A:middle
discovered Bluetooth devices,

00:04:10.236 --> 00:04:11.726 A:middle
including CarPlay devices.

00:04:14.536 --> 00:04:16.286 A:middle
If the user selects a device

00:04:16.506 --> 00:04:18.546 A:middle
using a general Bluetooth menu

00:04:19.026 --> 00:04:20.286 A:middle
and that device supports

00:04:20.286 --> 00:04:22.626 A:middle
wireless CarPlay, you may decide

00:04:22.626 --> 00:04:24.166 A:middle
to offer to enable CarPlay.

00:04:25.116 --> 00:04:26.776 A:middle
Do not show this screen if the

00:04:26.776 --> 00:04:28.976 A:middle
user selected the device from a

00:04:28.976 --> 00:04:30.256 A:middle
CarPlay specific menu.

00:04:32.856 --> 00:04:35.276 A:middle
Then CarPlay connects and

00:04:35.516 --> 00:04:36.766 A:middle
CarPlay appears on the screen.

00:04:37.486 --> 00:04:39.126 A:middle
From here on the CarPlay

00:04:39.126 --> 00:04:40.696 A:middle
experience is the same as

00:04:41.026 --> 00:04:42.886 A:middle
plugging in until you leave the

00:04:42.886 --> 00:04:42.976 A:middle
car.

00:04:47.066 --> 00:04:48.606 A:middle
Every time the user enters the

00:04:48.606 --> 00:04:50.746 A:middle
car CarPlay reconnects

00:04:50.746 --> 00:04:54.376 A:middle
automatically, iPhone can remain

00:04:54.376 --> 00:04:56.626 A:middle
in your bag or pocket and no

00:04:56.626 --> 00:04:58.406 A:middle
user interaction is necessary.

00:04:59.506 --> 00:05:01.886 A:middle
When CarPlay starts, be sure to

00:05:01.886 --> 00:05:03.706 A:middle
observe the last user mode for

00:05:03.706 --> 00:05:05.036 A:middle
audio in the display.

00:05:06.246 --> 00:05:08.456 A:middle
For details, watch the video

00:05:08.456 --> 00:05:10.906 A:middle
Developing CarPlay Systems Part

00:05:10.906 --> 00:05:11.226 A:middle
1.

00:05:14.816 --> 00:05:17.706 A:middle
With wireless CarPlay it's easy

00:05:17.706 --> 00:05:19.546 A:middle
to pair more than one iPhone

00:05:19.706 --> 00:05:20.316 A:middle
with the car.

00:05:21.366 --> 00:05:23.926 A:middle
In addition, you may have one or

00:05:23.926 --> 00:05:26.006 A:middle
many iPhones plugged in at the

00:05:26.106 --> 00:05:26.676 A:middle
same time.

00:05:28.396 --> 00:05:30.146 A:middle
Provide a device selector in

00:05:30.146 --> 00:05:32.346 A:middle
your native UI that lets the

00:05:32.346 --> 00:05:34.446 A:middle
user choose the active CarPlay

00:05:34.446 --> 00:05:34.806 A:middle
device.

00:05:35.866 --> 00:05:38.346 A:middle
Once CarPlay has started don't

00:05:38.346 --> 00:05:39.876 A:middle
automatically switch to another

00:05:39.876 --> 00:05:40.276 A:middle
device.

00:05:41.446 --> 00:05:42.906 A:middle
Changing the active CarPlay

00:05:42.906 --> 00:05:44.646 A:middle
device should be an explicit

00:05:44.746 --> 00:05:45.656 A:middle
user action.

00:05:47.246 --> 00:05:48.746 A:middle
If you support multiple

00:05:48.746 --> 00:05:50.696 A:middle
Bluetooth devices and have a

00:05:50.726 --> 00:05:52.666 A:middle
concept of favorite or

00:05:52.666 --> 00:05:55.456 A:middle
frequently used devices use the

00:05:55.456 --> 00:05:57.386 A:middle
same mechanism for wireless

00:05:57.496 --> 00:05:57.936 A:middle
CarPlay.

00:05:59.516 --> 00:06:02.096 A:middle
Your device selector shows all

00:06:02.096 --> 00:06:04.406 A:middle
CarPlay devices whether they are

00:06:04.476 --> 00:06:06.296 A:middle
plugged in or paired for

00:06:06.296 --> 00:06:07.196 A:middle
wireless CarPlay.

00:06:08.686 --> 00:06:10.316 A:middle
Indicate the active CarPlay

00:06:10.316 --> 00:06:12.836 A:middle
device using the CarPlay logo.

00:06:13.876 --> 00:06:15.906 A:middle
Never indicate if CarPlay is

00:06:15.906 --> 00:06:17.796 A:middle
running over wireless or wired.

00:06:18.626 --> 00:06:19.926 A:middle
The transfer type should be

00:06:19.926 --> 00:06:21.186 A:middle
transparent to the user.

00:06:22.526 --> 00:06:24.476 A:middle
If you provide on off settings

00:06:25.116 --> 00:06:26.686 A:middle
don't provide separate settings

00:06:26.786 --> 00:06:28.466 A:middle
for wired and wireless CarPlay,

00:06:28.956 --> 00:06:30.196 A:middle
just provide a setting for

00:06:30.196 --> 00:06:32.206 A:middle
Bluetooth or iPod versus

00:06:32.206 --> 00:06:32.596 A:middle
CarPlay.

00:06:34.326 --> 00:06:35.896 A:middle
Be judicious in showing

00:06:35.896 --> 00:06:38.256 A:middle
notifications, only show

00:06:38.256 --> 00:06:39.646 A:middle
notifications when it's

00:06:39.646 --> 00:06:41.416 A:middle
important to let the users know.

00:06:42.246 --> 00:06:44.216 A:middle
Show a subtle notification when

00:06:44.216 --> 00:06:46.346 A:middle
the first iPhone is connected

00:06:47.026 --> 00:06:48.996 A:middle
only if CarPlay will not

00:06:48.996 --> 00:06:51.446 A:middle
immediately become visible or

00:06:51.846 --> 00:06:53.596 A:middle
the CarPlay [inaudible] icon is

00:06:53.596 --> 00:06:54.856 A:middle
not immediately visible.

00:06:56.286 --> 00:06:57.916 A:middle
Show a notification when a

00:06:57.916 --> 00:07:00.236 A:middle
second iPhone is connected over

00:07:00.236 --> 00:07:02.446 A:middle
USB while CarPlay is running.

00:07:03.806 --> 00:07:06.526 A:middle
Do not show notifications when

00:07:06.666 --> 00:07:08.666 A:middle
iPhone joins or leaves the

00:07:08.816 --> 00:07:10.896 A:middle
access point or when it is

00:07:10.896 --> 00:07:12.696 A:middle
reconnected over Bluetooth.

00:07:15.436 --> 00:07:17.536 A:middle
Now that we have seen how to use

00:07:17.536 --> 00:07:20.136 A:middle
wireless CarPlay let's explore

00:07:20.236 --> 00:07:21.706 A:middle
what it takes to develop such a

00:07:21.706 --> 00:07:22.186 A:middle
system.

00:07:25.446 --> 00:07:26.686 A:middle
We'll start with the hardware

00:07:26.686 --> 00:07:28.766 A:middle
requirements, go through setup

00:07:28.766 --> 00:07:30.816 A:middle
and pairing, reconnecting for

00:07:30.816 --> 00:07:33.106 A:middle
CarPlay, and finish with some

00:07:33.106 --> 00:07:35.256 A:middle
considerations for your wireless

00:07:35.256 --> 00:07:35.916 A:middle
architecture.

00:07:38.666 --> 00:07:40.026 A:middle
So, hardware requirements.

00:07:40.306 --> 00:07:42.086 A:middle
wireless CarPlay requires

00:07:42.086 --> 00:07:44.586 A:middle
Bluetooth, a Wi-Fi access point

00:07:44.906 --> 00:07:45.836 A:middle
and location data.

00:07:47.956 --> 00:07:50.066 A:middle
Bluetooth is used to discover

00:07:50.126 --> 00:07:51.866 A:middle
and reconnect CarPlay devices.

00:07:53.356 --> 00:07:55.076 A:middle
To accomplish this the Bluetooth

00:07:55.076 --> 00:07:57.386 A:middle
subsystem needs to implement the

00:07:57.386 --> 00:07:59.666 A:middle
Bluetooth core specification, as

00:07:59.666 --> 00:08:00.946 A:middle
well as support service

00:08:00.946 --> 00:08:04.046 A:middle
discovery, iAP2 protocols and

00:08:04.096 --> 00:08:06.236 A:middle
advertise CarPlay support in its

00:08:06.236 --> 00:08:07.806 A:middle
Bluetooth Extended Inquiry

00:08:07.806 --> 00:08:08.636 A:middle
Response.

00:08:11.856 --> 00:08:14.726 A:middle
The Wi-Fi link is used for all

00:08:14.726 --> 00:08:16.676 A:middle
audio and video transfer to the

00:08:16.676 --> 00:08:18.966 A:middle
CarPlay protocol, as well as

00:08:19.116 --> 00:08:20.616 A:middle
iAP2 data transfer.

00:08:21.916 --> 00:08:23.106 A:middle
The access point must be

00:08:23.106 --> 00:08:25.136 A:middle
certified by the Wi-Fi Alliance

00:08:25.716 --> 00:08:27.386 A:middle
and it is recommended that it

00:08:27.436 --> 00:08:30.686 A:middle
supports the 802.11ac standard

00:08:31.106 --> 00:08:33.026 A:middle
and operates in the 5GHz

00:08:33.026 --> 00:08:34.066 A:middle
frequency band.

00:08:35.796 --> 00:08:37.876 A:middle
In addition, the axis point

00:08:37.876 --> 00:08:39.256 A:middle
needs to support the Apple

00:08:39.256 --> 00:08:41.426 A:middle
Device Information Element and

00:08:41.426 --> 00:08:43.346 A:middle
the Interworking Information

00:08:44.136 --> 00:08:44.366 A:middle
Element.

00:08:45.236 --> 00:08:47.406 A:middle
The location has always been

00:08:47.406 --> 00:08:49.736 A:middle
required for CarPlay, but it

00:08:49.736 --> 00:08:51.916 A:middle
becomes an absolute necessity

00:08:52.256 --> 00:08:54.186 A:middle
with wireless CarPlay as the

00:08:54.186 --> 00:08:55.866 A:middle
driver's phone might be left in

00:08:55.866 --> 00:08:57.786 A:middle
a pocket or a bag and be

00:08:57.786 --> 00:08:58.886 A:middle
completely out of sight.

00:09:00.476 --> 00:09:02.426 A:middle
To provide reliable and precise

00:09:02.426 --> 00:09:04.966 A:middle
location data, the head unit

00:09:04.966 --> 00:09:08.136 A:middle
needs a GNSS receiver, access to

00:09:08.136 --> 00:09:09.836 A:middle
the speed sensor of the vehicle,

00:09:10.346 --> 00:09:11.716 A:middle
as well as the ability to

00:09:11.716 --> 00:09:13.416 A:middle
provide dead reckoning position

00:09:13.416 --> 00:09:14.106 A:middle
information.

00:09:15.206 --> 00:09:17.096 A:middle
Okay, now that we have talked

00:09:17.126 --> 00:09:18.196 A:middle
through the basic hardware

00:09:18.196 --> 00:09:20.756 A:middle
requirements let's talk about

00:09:20.836 --> 00:09:22.546 A:middle
set up and pairing for CarPlay.

00:09:25.556 --> 00:09:27.546 A:middle
First, let's look at what

00:09:27.546 --> 00:09:29.366 A:middle
components are needed to set up

00:09:29.366 --> 00:09:30.856 A:middle
wireless and wired CarPlay.

00:09:33.216 --> 00:09:35.476 A:middle
Of course, one or many USB

00:09:35.476 --> 00:09:38.456 A:middle
ports, a Wi-Fi access point,

00:09:39.266 --> 00:09:41.766 A:middle
Bluetooth module, and an

00:09:41.766 --> 00:09:43.186 A:middle
instance of the CarPlay

00:09:43.186 --> 00:09:44.566 A:middle
communication plugin are

00:09:44.566 --> 00:09:45.176 A:middle
required.

00:09:47.336 --> 00:09:49.576 A:middle
On ignition on or a head unit

00:09:49.576 --> 00:09:51.796 A:middle
restart the components need to

00:09:51.796 --> 00:09:53.416 A:middle
be initialized and set up.

00:09:54.616 --> 00:09:57.606 A:middle
USBs ready for role swap and NCM

00:09:57.606 --> 00:09:58.976 A:middle
communication for wired CarPlay.

00:10:00.676 --> 00:10:02.966 A:middle
BT, Wi-Fi and networking for

00:10:02.966 --> 00:10:03.906 A:middle
wireless CarPlay.

00:10:04.966 --> 00:10:07.386 A:middle
Bonjour and the communication

00:10:07.386 --> 00:10:09.116 A:middle
plugin to enable CarPlay

00:10:09.116 --> 00:10:09.706 A:middle
discovery.

00:10:11.736 --> 00:10:13.796 A:middle
When all those components are

00:10:13.796 --> 00:10:15.976 A:middle
set up the system is ready for

00:10:15.976 --> 00:10:16.856 A:middle
CarPlay connection.

00:10:18.096 --> 00:10:20.556 A:middle
As we saw earlier, there are two

00:10:20.556 --> 00:10:22.356 A:middle
ways to pair iPhone to the car.

00:10:23.116 --> 00:10:25.476 A:middle
If iPhone is plugged in using a

00:10:25.476 --> 00:10:28.836 A:middle
cable out-of-band pairing is

00:10:28.836 --> 00:10:30.086 A:middle
triggered in the background.

00:10:31.446 --> 00:10:33.956 A:middle
Otherwise, a Bluetooth pairing

00:10:33.956 --> 00:10:34.976 A:middle
process is needed.

00:10:36.496 --> 00:10:39.606 A:middle
Setup over USB requires less

00:10:39.606 --> 00:10:41.506 A:middle
user interaction and is the

00:10:41.506 --> 00:10:43.156 A:middle
recommended setup procedure.

00:10:46.546 --> 00:10:48.446 A:middle
Now let's dive into pairing over

00:10:48.486 --> 00:10:48.776 A:middle
USB.

00:10:50.716 --> 00:10:52.986 A:middle
As you see in the diagram, we

00:10:52.986 --> 00:10:54.476 A:middle
have the essential head unit

00:10:54.476 --> 00:10:57.266 A:middle
components on the left-hand side

00:10:57.886 --> 00:10:59.466 A:middle
and iPhone is displayed on the

00:10:59.466 --> 00:10:59.836 A:middle
right.

00:11:00.766 --> 00:11:02.666 A:middle
At this point, the system is

00:11:02.706 --> 00:11:04.186 A:middle
fully booted and ready for

00:11:04.186 --> 00:11:04.736 A:middle
CarPlay.

00:11:05.576 --> 00:11:07.046 A:middle
The head unit is showing the

00:11:07.046 --> 00:11:09.596 A:middle
native user interface as the

00:11:09.596 --> 00:11:10.976 A:middle
user connects over USB.

00:11:12.776 --> 00:11:16.356 A:middle
A USB role switch follows and

00:11:16.356 --> 00:11:17.656 A:middle
iPhone shows that CarPlay's

00:11:17.656 --> 00:11:18.226 A:middle
connected.

00:11:21.526 --> 00:11:23.656 A:middle
With the role switch the unit

00:11:23.656 --> 00:11:26.286 A:middle
also establishes an iAP2 link

00:11:26.726 --> 00:11:28.166 A:middle
declaring support for all

00:11:28.166 --> 00:11:29.366 A:middle
necessary messages.

00:11:30.746 --> 00:11:32.296 A:middle
While the CarPlay session is

00:11:32.296 --> 00:11:34.996 A:middle
starting over USB iPhone asks

00:11:35.226 --> 00:11:36.776 A:middle
the user to enable wireless

00:11:36.776 --> 00:11:37.236 A:middle
CarPlay.

00:11:40.686 --> 00:11:43.496 A:middle
With that CarPlay over USB is

00:11:43.496 --> 00:11:44.296 A:middle
already active.

00:11:45.766 --> 00:11:48.226 A:middle
So, iOS proceeds with setting up

00:11:48.226 --> 00:11:50.016 A:middle
the audio and video streams to

00:11:50.016 --> 00:11:51.266 A:middle
show CarPlay in the car.

00:11:55.156 --> 00:11:57.286 A:middle
Now the user decides to enable

00:11:57.286 --> 00:11:58.106 A:middle
wireless CarPlay.

00:12:01.936 --> 00:12:05.136 A:middle
After user confirmation iOS

00:12:05.166 --> 00:12:07.066 A:middle
generates a Bluetooth link key

00:12:07.416 --> 00:12:09.406 A:middle
and sends it over iAP to the

00:12:09.406 --> 00:12:09.946 A:middle
unit.

00:12:11.566 --> 00:12:13.276 A:middle
The head unit saves the link key

00:12:13.276 --> 00:12:14.746 A:middle
together with the device

00:12:14.746 --> 00:12:17.526 A:middle
transport identifiers and stores

00:12:17.526 --> 00:12:19.156 A:middle
this iPhone as a Bluetooth

00:12:19.216 --> 00:12:21.196 A:middle
paired device set up for

00:12:21.196 --> 00:12:21.636 A:middle
CarPlay.

00:12:24.636 --> 00:12:27.606 A:middle
Once the device is saved the

00:12:27.606 --> 00:12:28.926 A:middle
head unit sends back a

00:12:28.926 --> 00:12:30.716 A:middle
confirmation and out-of-band

00:12:30.716 --> 00:12:31.686 A:middle
pairing is complete.

00:12:35.246 --> 00:12:35.906 A:middle
Let's review.

00:12:38.146 --> 00:12:41.046 A:middle
Without out-of-band pairing the

00:12:41.046 --> 00:12:42.906 A:middle
CarPlay session is established

00:12:42.906 --> 00:12:45.726 A:middle
over USB and is not interrupted.

00:12:47.736 --> 00:12:50.176 A:middle
There is no actual exchange over

00:12:50.176 --> 00:12:51.776 A:middle
BT during this process.

00:12:54.196 --> 00:12:56.646 A:middle
The device needs to be stored as

00:12:56.646 --> 00:12:59.196 A:middle
the last connected BT device or

00:12:59.196 --> 00:13:01.516 A:middle
preferred device so that it can

00:13:01.516 --> 00:13:02.826 A:middle
be reconnected later on.

00:13:05.076 --> 00:13:07.036 A:middle
Hence, a wireless CarPlay

00:13:07.036 --> 00:13:09.016 A:middle
session will start automatically

00:13:09.346 --> 00:13:11.936 A:middle
only after an ignition cycle as

00:13:11.936 --> 00:13:13.546 A:middle
the driver returns to the car.

00:13:15.746 --> 00:13:18.316 A:middle
It's important to note that you

00:13:18.316 --> 00:13:19.736 A:middle
should not start wireless

00:13:19.736 --> 00:13:21.356 A:middle
CarPlay when the driver

00:13:21.356 --> 00:13:23.436 A:middle
disconnects from USB, she might

00:13:23.436 --> 00:13:24.576 A:middle
be just leaving the car.

00:13:26.086 --> 00:13:28.066 A:middle
Now that we have seen the USB

00:13:28.066 --> 00:13:30.906 A:middle
setup for wireless CarPlay let's

00:13:30.906 --> 00:13:32.216 A:middle
take a look at the second

00:13:32.216 --> 00:13:34.646 A:middle
method, pairing over Bluetooth.

00:13:35.876 --> 00:13:37.146 A:middle
There are a couple of ways to

00:13:37.146 --> 00:13:38.966 A:middle
initiate Bluetooth pairing in a

00:13:38.966 --> 00:13:39.476 A:middle
vehicle.

00:13:40.646 --> 00:13:42.776 A:middle
A long press on the Voice

00:13:42.776 --> 00:13:43.986 A:middle
Recognition button on the

00:13:43.986 --> 00:13:46.606 A:middle
steering wheel or through the

00:13:46.606 --> 00:13:47.176 A:middle
native UI.

00:13:49.256 --> 00:13:51.316 A:middle
And with the native UI there are

00:13:51.316 --> 00:13:51.916 A:middle
two options.

00:13:51.916 --> 00:13:55.156 A:middle
A dedicated UI for adding a

00:13:55.156 --> 00:13:58.166 A:middle
CarPlay device or through the

00:13:58.166 --> 00:14:00.666 A:middle
already existing UI for adding a

00:14:00.666 --> 00:14:01.536 A:middle
BT device.

00:14:02.926 --> 00:14:04.516 A:middle
Over the next couple of slides,

00:14:04.896 --> 00:14:05.926 A:middle
we will look into the

00:14:05.926 --> 00:14:07.576 A:middle
differences between these

00:14:07.646 --> 00:14:08.456 A:middle
pairing methods.

00:14:11.646 --> 00:14:13.116 A:middle
No matter which of the three

00:14:13.116 --> 00:14:15.036 A:middle
pairing UIs was used by the

00:14:15.036 --> 00:14:18.046 A:middle
driver to initiate pairing the

00:14:18.046 --> 00:14:19.666 A:middle
head unit becomes discoverable.

00:14:21.626 --> 00:14:23.776 A:middle
The driver also needs to open

00:14:23.926 --> 00:14:26.106 A:middle
either Bluetooth settings or

00:14:26.216 --> 00:14:29.696 A:middle
CarPlay settings on iPhone to

00:14:29.696 --> 00:14:31.296 A:middle
set iOS in a Bluetooth

00:14:31.296 --> 00:14:32.696 A:middle
discoverable mode as well.

00:14:34.686 --> 00:14:37.006 A:middle
Again, this is a very generic

00:14:37.006 --> 00:14:39.136 A:middle
representation of the fact that

00:14:39.206 --> 00:14:40.916 A:middle
both the phone and the head unit

00:14:40.986 --> 00:14:42.706 A:middle
must be set into a discoverable

00:14:42.706 --> 00:14:43.016 A:middle
mode.

00:14:46.676 --> 00:14:48.246 A:middle
Now let's look at the different

00:14:48.246 --> 00:14:51.056 A:middle
options on how to set up the

00:14:51.056 --> 00:14:52.956 A:middle
head unit into a discoverable

00:14:52.956 --> 00:14:54.906 A:middle
mode and how to select which

00:14:54.906 --> 00:14:55.826 A:middle
device to pair to.

00:14:58.006 --> 00:14:59.986 A:middle
In this first variation, the

00:14:59.986 --> 00:15:02.586 A:middle
head unit simply asks the user

00:15:02.626 --> 00:15:04.456 A:middle
to search for the car's name on

00:15:04.456 --> 00:15:07.196 A:middle
the CarPlay or BT settings menus

00:15:07.306 --> 00:15:08.046 A:middle
on iPhone.

00:15:09.916 --> 00:15:12.296 A:middle
The user enters this menu by

00:15:12.296 --> 00:15:13.946 A:middle
either navigating the native UI

00:15:14.086 --> 00:15:17.106 A:middle
to add a new Bluetooth device or

00:15:17.226 --> 00:15:18.786 A:middle
by long pressing on the Voice

00:15:18.786 --> 00:15:20.086 A:middle
Recognition button on the

00:15:20.086 --> 00:15:20.716 A:middle
steering wheel.

00:15:22.956 --> 00:15:24.816 A:middle
iPhone discovers the car and

00:15:24.816 --> 00:15:25.396 A:middle
lists it.

00:15:28.016 --> 00:15:30.136 A:middle
The driver can then select the

00:15:30.136 --> 00:15:34.166 A:middle
car on iPhone and iOS initiates

00:15:34.166 --> 00:15:35.526 A:middle
a Bluetooth pairing request.

00:15:37.466 --> 00:15:39.366 A:middle
This is the simplest and most

00:15:39.366 --> 00:15:41.046 A:middle
straightforward approach to

00:15:41.046 --> 00:15:42.426 A:middle
accomplish Bluetooth pairing.

00:15:43.256 --> 00:15:45.596 A:middle
The second option is for the

00:15:45.596 --> 00:15:47.336 A:middle
driver to select the device from

00:15:47.336 --> 00:15:49.396 A:middle
a list of available Bluetooth

00:15:49.396 --> 00:15:51.996 A:middle
devices on the car's native

00:15:51.996 --> 00:15:52.586 A:middle
interface.

00:15:54.346 --> 00:15:56.786 A:middle
In this case, the head unit is

00:15:56.786 --> 00:15:59.186 A:middle
not only discoverable, but also

00:15:59.186 --> 00:16:00.806 A:middle
scans for BT devices.

00:16:02.516 --> 00:16:04.036 A:middle
Exactly as in the previous

00:16:04.036 --> 00:16:06.426 A:middle
option, the driver enters this

00:16:06.426 --> 00:16:08.466 A:middle
menu by either navigating the

00:16:08.466 --> 00:16:10.556 A:middle
native UI to add a new Bluetooth

00:16:10.556 --> 00:16:13.236 A:middle
device or by long pressing on

00:16:13.236 --> 00:16:15.036 A:middle
the Voice Recognition button on

00:16:15.036 --> 00:16:15.726 A:middle
the steering wheel.

00:16:17.076 --> 00:16:19.126 A:middle
Any BT capable device will be

00:16:19.126 --> 00:16:21.616 A:middle
shown in this list, so the list

00:16:21.616 --> 00:16:23.696 A:middle
might or might not include

00:16:23.736 --> 00:16:24.656 A:middle
CarPlay devices.

00:16:25.966 --> 00:16:28.006 A:middle
That is why it is important to

00:16:28.006 --> 00:16:30.706 A:middle
note that in this option any

00:16:30.706 --> 00:16:32.866 A:middle
mention of Apple CarPlay on the

00:16:32.866 --> 00:16:34.626 A:middle
UI is not recommended.

00:16:36.786 --> 00:16:38.776 A:middle
With this UI, the driver can

00:16:38.776 --> 00:16:40.606 A:middle
select the device to pair to

00:16:41.076 --> 00:16:44.066 A:middle
from the native UI or as before

00:16:44.326 --> 00:16:45.216 A:middle
on the device.

00:16:46.796 --> 00:16:48.446 A:middle
The third option is very

00:16:48.446 --> 00:16:51.536 A:middle
similar, however, this time the

00:16:51.536 --> 00:16:54.276 A:middle
user is explicitly adding a new

00:16:54.276 --> 00:16:55.946 A:middle
CarPlay device from the native

00:16:55.946 --> 00:16:56.736 A:middle
user interface.

00:16:58.036 --> 00:17:00.356 A:middle
The list shows only devices that

00:17:00.356 --> 00:17:01.816 A:middle
actually support wireless

00:17:01.816 --> 00:17:02.256 A:middle
CarPlay.

00:17:03.486 --> 00:17:05.556 A:middle
The head unit must use the Apple

00:17:05.556 --> 00:17:07.736 A:middle
CarPlay Bluetooth EIR to

00:17:07.736 --> 00:17:09.366 A:middle
accomplish this filtering.

00:17:10.636 --> 00:17:13.496 A:middle
Again, as before, the driver

00:17:13.496 --> 00:17:15.986 A:middle
selects either on the car's UI

00:17:16.996 --> 00:17:18.606 A:middle
or on device.

00:17:20.666 --> 00:17:22.506 A:middle
After a device has been selected

00:17:23.066 --> 00:17:24.526 A:middle
the head unit and iPhone

00:17:24.596 --> 00:17:26.336 A:middle
complete Bluetooth secure simple

00:17:26.336 --> 00:17:28.906 A:middle
pairing and connect IP over

00:17:28.906 --> 00:17:30.896 A:middle
Bluetooth and the head unit

00:17:30.896 --> 00:17:33.306 A:middle
identifies support for the

00:17:33.306 --> 00:17:34.296 A:middle
required messages.

00:17:35.646 --> 00:17:38.616 A:middle
When iAP2 connects iOS will

00:17:38.656 --> 00:17:40.166 A:middle
prompt the user to enable

00:17:40.166 --> 00:17:41.786 A:middle
wireless CarPlay on device.

00:17:43.216 --> 00:17:44.876 A:middle
And just as a side note, but a

00:17:44.876 --> 00:17:46.856 A:middle
very important one, connect

00:17:46.856 --> 00:17:50.156 A:middle
additional BT profiles only if

00:17:50.156 --> 00:17:51.926 A:middle
the wireless access point is

00:17:51.926 --> 00:17:54.106 A:middle
operating in the 5GHz band.

00:17:55.776 --> 00:17:59.106 A:middle
Once iAP2 is connected iOS

00:17:59.106 --> 00:18:00.716 A:middle
provides the device transport

00:18:00.716 --> 00:18:02.976 A:middle
identifiers so that the head

00:18:02.976 --> 00:18:04.656 A:middle
unit can store the device as a

00:18:04.656 --> 00:18:07.016 A:middle
CarPlay device and recognize it

00:18:07.076 --> 00:18:09.016 A:middle
over a different transport when

00:18:09.016 --> 00:18:10.536 A:middle
it gets reconnected later on.

00:18:12.006 --> 00:18:13.266 A:middle
The head unit listens to

00:18:13.266 --> 00:18:14.686 A:middle
wireless CarPlay update

00:18:14.686 --> 00:18:17.836 A:middle
notifications and if CarPlay is

00:18:17.836 --> 00:18:20.166 A:middle
enabled on device it may choose

00:18:20.166 --> 00:18:22.256 A:middle
to confirm whether to proceed

00:18:22.256 --> 00:18:23.366 A:middle
with setup for CarPlay.

00:18:25.156 --> 00:18:27.216 A:middle
As we saw earlier, this

00:18:27.266 --> 00:18:29.626 A:middle
confirmation is only needed if

00:18:29.626 --> 00:18:31.576 A:middle
the user selected the device

00:18:32.716 --> 00:18:34.676 A:middle
through the add Bluetooth device

00:18:34.676 --> 00:18:35.136 A:middle
menus.

00:18:36.536 --> 00:18:38.436 A:middle
As the user initiated pairing

00:18:38.436 --> 00:18:39.576 A:middle
through Bluetooth settings on

00:18:39.706 --> 00:18:41.646 A:middle
iPhone we see a similar

00:18:41.646 --> 00:18:43.456 A:middle
confirmation on iPhone as well.

00:18:44.806 --> 00:18:47.356 A:middle
Of course, neither of those

00:18:47.356 --> 00:18:49.226 A:middle
confirmation dialogs will be

00:18:49.226 --> 00:18:51.786 A:middle
shown if the driver initiated

00:18:51.836 --> 00:18:53.916 A:middle
pairing from CarPlay specific

00:18:53.916 --> 00:18:54.366 A:middle
menus.

00:18:56.496 --> 00:18:58.666 A:middle
Next, let's assume the user

00:18:58.666 --> 00:19:00.846 A:middle
confirms on the device first.

00:19:01.426 --> 00:19:05.436 A:middle
When that happens the device

00:19:05.436 --> 00:19:08.146 A:middle
requests to receive the wireless

00:19:08.146 --> 00:19:10.226 A:middle
credentials of the Wi-Fi access

00:19:10.226 --> 00:19:10.566 A:middle
point.

00:19:12.466 --> 00:19:14.086 A:middle
The head unit must wait for the

00:19:14.086 --> 00:19:15.596 A:middle
user confirmation before

00:19:15.596 --> 00:19:16.266 A:middle
responding.

00:19:17.476 --> 00:19:19.106 A:middle
This is the time to get the

00:19:19.106 --> 00:19:21.806 A:middle
user's consent and if needed,

00:19:22.026 --> 00:19:23.516 A:middle
reconfigure the system for

00:19:23.516 --> 00:19:24.296 A:middle
wireless CarPlay.

00:19:25.686 --> 00:19:28.226 A:middle
Now the user confirms on the

00:19:28.226 --> 00:19:29.526 A:middle
native UI as well.

00:19:30.826 --> 00:19:32.416 A:middle
Then the head unit responds with

00:19:32.416 --> 00:19:35.396 A:middle
the credentials and iPhone

00:19:35.396 --> 00:19:37.136 A:middle
starts searching for the access

00:19:37.176 --> 00:19:39.986 A:middle
point and joins it.

00:19:40.696 --> 00:19:42.996 A:middle
From now on, exactly ask for

00:19:42.996 --> 00:19:43.966 A:middle
wired CarPlay.

00:19:44.966 --> 00:19:47.186 A:middle
Bonjour discovery runs and once

00:19:47.216 --> 00:19:49.286 A:middle
the device is found the head

00:19:49.286 --> 00:19:51.576 A:middle
unit initiates a CarPlay session

00:19:51.576 --> 00:19:55.216 A:middle
through CarPlay Control API.

00:19:56.376 --> 00:19:59.256 A:middle
CarPlay session follows, as well

00:19:59.306 --> 00:20:01.546 A:middle
as connection establishment for

00:20:01.606 --> 00:20:02.976 A:middle
iAP2 over CarPlay.

00:20:04.476 --> 00:20:07.736 A:middle
Note that at this point iAP2 is

00:20:07.736 --> 00:20:10.156 A:middle
also still connected over

00:20:10.156 --> 00:20:10.686 A:middle
Bluetooth.

00:20:13.776 --> 00:20:15.406 A:middle
Then iPhone sends a disabled

00:20:15.406 --> 00:20:17.236 A:middle
Bluetooth command and the head

00:20:17.236 --> 00:20:19.726 A:middle
unit must disconnect all

00:20:19.726 --> 00:20:21.216 A:middle
Bluetooth connections to this

00:20:21.266 --> 00:20:21.776 A:middle
device.

00:20:23.466 --> 00:20:26.426 A:middle
Remember that if the access

00:20:26.466 --> 00:20:29.976 A:middle
point is operating in the 2.4GHz

00:20:30.076 --> 00:20:32.486 A:middle
band Bluetooth needs to be

00:20:32.486 --> 00:20:33.906 A:middle
turned off while there's an

00:20:34.026 --> 00:20:35.686 A:middle
active CarPlay session to avoid

00:20:35.686 --> 00:20:36.486 A:middle
interference.

00:20:39.416 --> 00:20:41.076 A:middle
Now that the screen and video

00:20:41.076 --> 00:20:42.726 A:middle
streams are started and the

00:20:42.726 --> 00:20:44.936 A:middle
CarPlay UI is visible on the

00:20:44.936 --> 00:20:47.966 A:middle
screen voila, CarPlay is running

00:20:47.966 --> 00:20:49.086 A:middle
without any wires.

00:20:51.336 --> 00:20:53.726 A:middle
All right, now that we saw how

00:20:53.726 --> 00:20:55.156 A:middle
to set up wireless CarPlay

00:20:55.606 --> 00:20:57.196 A:middle
here's some general points to

00:20:57.196 --> 00:20:57.616 A:middle
consider.

00:21:00.106 --> 00:21:02.256 A:middle
First, after setup is done the

00:21:02.256 --> 00:21:04.626 A:middle
CarPlay UI is expected to show

00:21:04.626 --> 00:21:04.766 A:middle
up.

00:21:06.806 --> 00:21:09.176 A:middle
Then if iPhone is playing music,

00:21:09.416 --> 00:21:10.976 A:middle
music playback will be set up

00:21:11.026 --> 00:21:11.596 A:middle
through CarPlay.

00:21:13.516 --> 00:21:15.756 A:middle
Lastly, the device must be

00:21:15.756 --> 00:21:17.826 A:middle
stored as the last connected BT

00:21:17.826 --> 00:21:19.986 A:middle
device so that it can be

00:21:19.986 --> 00:21:21.716 A:middle
reconnected automatically later

00:21:21.716 --> 00:21:21.966 A:middle
on.

00:21:25.086 --> 00:21:26.986 A:middle
And with that we can conclude

00:21:26.986 --> 00:21:28.846 A:middle
the discussion around setup and

00:21:28.886 --> 00:21:31.586 A:middle
pairing and move to actually

00:21:31.586 --> 00:21:33.616 A:middle
look into how a CarPlay device

00:21:33.656 --> 00:21:35.236 A:middle
is connected when the user

00:21:35.236 --> 00:21:36.116 A:middle
returns to the car.

00:21:37.546 --> 00:21:39.266 A:middle
When you reconnect for CarPlay

00:21:39.526 --> 00:21:41.116 A:middle
you need to take into account

00:21:41.256 --> 00:21:42.876 A:middle
all devices connected to the

00:21:42.876 --> 00:21:45.726 A:middle
system at the moment, as well as

00:21:46.346 --> 00:21:48.996 A:middle
the state of the system before

00:21:48.996 --> 00:21:50.086 A:middle
ignition was turned off.

00:21:51.976 --> 00:21:54.226 A:middle
Whether CarPlay is using USB as

00:21:54.226 --> 00:21:56.316 A:middle
the transport or the wireless

00:21:56.316 --> 00:21:58.546 A:middle
link it's completely transparent

00:21:58.546 --> 00:22:01.776 A:middle
to the user and depends only on

00:22:01.776 --> 00:22:03.446 A:middle
how a device is connected to the

00:22:03.446 --> 00:22:05.516 A:middle
car and in which order the

00:22:05.516 --> 00:22:06.476 A:middle
connections happened.

00:22:09.036 --> 00:22:10.926 A:middle
After deciding which device to

00:22:10.926 --> 00:22:13.636 A:middle
connect to make sure the device

00:22:13.786 --> 00:22:15.466 A:middle
still has CarPlay enabled.

00:22:16.736 --> 00:22:18.496 A:middle
Revert to using legacy

00:22:18.496 --> 00:22:20.616 A:middle
technologies if CarPlay is no

00:22:20.616 --> 00:22:21.496 A:middle
longer available.

00:22:23.976 --> 00:22:26.076 A:middle
Once the reconnection succeeds

00:22:26.596 --> 00:22:28.656 A:middle
restore how the user used the

00:22:28.656 --> 00:22:29.696 A:middle
system last time.

00:22:30.646 --> 00:22:32.576 A:middle
If she was listening to FM radio

00:22:32.836 --> 00:22:34.176 A:middle
continue playing it.

00:22:34.716 --> 00:22:36.376 A:middle
Show the last screen the user

00:22:36.376 --> 00:22:38.456 A:middle
was looking at either a native

00:22:38.456 --> 00:22:39.976 A:middle
application or CarPlay.

00:22:41.016 --> 00:22:42.816 A:middle
The user experience should

00:22:42.976 --> 00:22:45.176 A:middle
simply continue and follow the

00:22:45.176 --> 00:22:45.966 A:middle
user's habit.

00:22:48.366 --> 00:22:50.916 A:middle
Lastly, once a CarPlay session

00:22:50.916 --> 00:22:53.246 A:middle
is running on a device do not

00:22:53.246 --> 00:22:53.876 A:middle
interrupt it.

00:22:55.366 --> 00:22:56.986 A:middle
Imagine the driver is listening

00:22:56.986 --> 00:22:58.616 A:middle
to her favorite song or

00:22:58.616 --> 00:23:01.226 A:middle
navigating and a friend plugs in

00:23:01.226 --> 00:23:03.686 A:middle
to charge it will be disruptive

00:23:03.686 --> 00:23:05.586 A:middle
if music all of a sudden resumed

00:23:05.586 --> 00:23:06.576 A:middle
from the friend's phone.

00:23:08.496 --> 00:23:10.676 A:middle
Now let's review some scenarios

00:23:10.996 --> 00:23:12.336 A:middle
to better understand what it

00:23:12.336 --> 00:23:13.956 A:middle
means when we say the

00:23:14.446 --> 00:23:15.856 A:middle
reconnection depends on the

00:23:15.856 --> 00:23:17.896 A:middle
availability and the order of

00:23:17.896 --> 00:23:18.386 A:middle
events.

00:23:19.556 --> 00:23:21.106 A:middle
In all these scenarios, we

00:23:21.106 --> 00:23:23.306 A:middle
assume that the phone has been

00:23:23.306 --> 00:23:24.736 A:middle
previously paired for wireless

00:23:24.736 --> 00:23:27.126 A:middle
CarPlay and the system has at

00:23:27.126 --> 00:23:28.576 A:middle
least one USB port.

00:23:30.386 --> 00:23:32.096 A:middle
We are going to pay attention to

00:23:32.096 --> 00:23:33.776 A:middle
when iPhone was connected over

00:23:33.826 --> 00:23:36.816 A:middle
USB, identify a common scenario,

00:23:37.446 --> 00:23:39.436 A:middle
and observe which transport is

00:23:39.436 --> 00:23:40.756 A:middle
used to establish a CarPlay

00:23:40.756 --> 00:23:41.206 A:middle
session.

00:23:43.676 --> 00:23:44.876 A:middle
First, let's look at the

00:23:44.876 --> 00:23:47.476 A:middle
scenario where there is just one

00:23:47.666 --> 00:23:48.506 A:middle
iPhone in the car.

00:23:49.396 --> 00:23:51.456 A:middle
The simplest situation is that

00:23:51.486 --> 00:23:53.896 A:middle
the user gets back into the car

00:23:54.516 --> 00:23:56.356 A:middle
for a short drive and keeps

00:23:56.356 --> 00:23:57.376 A:middle
iPhone in the pocket.

00:23:58.526 --> 00:24:00.586 A:middle
A morning commute running small

00:24:00.586 --> 00:24:02.286 A:middle
errands would be the perfect

00:24:02.286 --> 00:24:02.856 A:middle
examples.

00:24:04.486 --> 00:24:06.506 A:middle
As the only available transport

00:24:06.506 --> 00:24:09.426 A:middle
is wireless naturally CarPlay

00:24:09.426 --> 00:24:10.556 A:middle
runs wirelessly.

00:24:13.206 --> 00:24:15.946 A:middle
In the next scenario, the driver

00:24:16.016 --> 00:24:17.846 A:middle
plugs in after the drive has

00:24:17.846 --> 00:24:18.306 A:middle
started.

00:24:19.926 --> 00:24:21.906 A:middle
Typical usage here is just

00:24:21.906 --> 00:24:24.296 A:middle
realizing that the phone needs

00:24:24.296 --> 00:24:26.026 A:middle
to be charged after departing.

00:24:28.336 --> 00:24:30.376 A:middle
In this case, the session has

00:24:30.376 --> 00:24:32.046 A:middle
already started over wireless

00:24:32.656 --> 00:24:34.456 A:middle
and since we do not want any

00:24:34.456 --> 00:24:36.966 A:middle
interruptions CarPlay remains

00:24:36.966 --> 00:24:37.716 A:middle
over wireless.

00:24:38.636 --> 00:24:40.616 A:middle
In the next scenario, the user

00:24:40.616 --> 00:24:42.626 A:middle
simply leaves the phone plugged

00:24:42.626 --> 00:24:44.336 A:middle
in and gets out of the car.

00:24:46.286 --> 00:24:47.606 A:middle
This could be a stopover at the

00:24:47.606 --> 00:24:49.946 A:middle
gas station or simply forgetting

00:24:49.946 --> 00:24:52.546 A:middle
the phone in the car.

00:24:52.806 --> 00:24:54.726 A:middle
Now when the user returns the

00:24:54.726 --> 00:24:56.736 A:middle
device is available to connect

00:24:56.736 --> 00:24:58.746 A:middle
over both USB and wireless.

00:24:59.876 --> 00:25:03.116 A:middle
However, usually the USB stack

00:25:03.116 --> 00:25:05.606 A:middle
resumes faster so CarPlay is

00:25:05.606 --> 00:25:07.006 A:middle
reconnected over USB.

00:25:07.886 --> 00:25:09.426 A:middle
Now let's look at what happens

00:25:09.516 --> 00:25:11.486 A:middle
if the driver plugs in right

00:25:11.486 --> 00:25:12.736 A:middle
after entering the car.

00:25:14.176 --> 00:25:16.356 A:middle
This could be when leaving for a

00:25:16.356 --> 00:25:18.536 A:middle
longer trip or maybe needing to

00:25:18.536 --> 00:25:19.516 A:middle
charge right away.

00:25:21.456 --> 00:25:23.726 A:middle
In this case, as the system is

00:25:23.726 --> 00:25:26.206 A:middle
coming up it will bring up both

00:25:26.206 --> 00:25:27.996 A:middle
the USB and wireless stacks.

00:25:29.006 --> 00:25:30.946 A:middle
Since the timing will depend

00:25:30.946 --> 00:25:32.816 A:middle
heavily on the user's behavior

00:25:33.386 --> 00:25:34.636 A:middle
the CarPlay session will be

00:25:34.636 --> 00:25:36.646 A:middle
started over the first available

00:25:36.646 --> 00:25:37.176 A:middle
transport.

00:25:38.686 --> 00:25:41.896 A:middle
If USB is up while BT or Wi-Fi

00:25:42.166 --> 00:25:43.966 A:middle
are still reconnecting the

00:25:43.966 --> 00:25:45.326 A:middle
session will end up being over

00:25:45.406 --> 00:25:45.786 A:middle
USB.

00:25:46.566 --> 00:25:48.316 A:middle
If wireless reconnected before

00:25:48.316 --> 00:25:50.906 A:middle
USB then the session will run

00:25:50.906 --> 00:25:51.656 A:middle
over wireless.

00:25:55.306 --> 00:25:57.066 A:middle
In the last scenario, we

00:25:57.066 --> 00:25:58.716 A:middle
consider multiple devices in the

00:25:58.716 --> 00:25:58.956 A:middle
car.

00:26:00.776 --> 00:26:02.976 A:middle
The driver might have plugged in

00:26:02.976 --> 00:26:04.706 A:middle
right after entering the car.

00:26:06.046 --> 00:26:07.446 A:middle
This could be a road trip with

00:26:07.446 --> 00:26:09.396 A:middle
friends that need to charge at

00:26:09.436 --> 00:26:11.236 A:middle
some point or want to play music

00:26:11.236 --> 00:26:11.946 A:middle
from their phones.

00:26:13.516 --> 00:26:15.836 A:middle
Again, as before, the session

00:26:15.836 --> 00:26:17.926 A:middle
will initially start depending

00:26:17.926 --> 00:26:19.396 A:middle
on the available transport.

00:26:21.036 --> 00:26:22.736 A:middle
Later on, the driver might

00:26:22.736 --> 00:26:24.276 A:middle
decide to change the active

00:26:24.276 --> 00:26:26.506 A:middle
CarPlay device using the native

00:26:26.506 --> 00:26:27.356 A:middle
user interface.

00:26:29.336 --> 00:26:32.646 A:middle
All right, now let's see how you

00:26:32.646 --> 00:26:33.636 A:middle
can implement all these

00:26:33.666 --> 00:26:34.216 A:middle
scenarios.

00:26:35.506 --> 00:26:37.716 A:middle
We can start by looking at the

00:26:37.716 --> 00:26:39.496 A:middle
flow for wireless reconnection.

00:26:41.386 --> 00:26:44.296 A:middle
First, wait until both Bluetooth

00:26:44.416 --> 00:26:46.176 A:middle
and the access point are fully

00:26:46.176 --> 00:26:46.836 A:middle
operational.

00:26:49.626 --> 00:26:51.166 A:middle
Then check that the last

00:26:51.216 --> 00:26:53.046 A:middle
connected device is marked for

00:26:53.046 --> 00:26:54.196 A:middle
CarPlay on the head unit.

00:26:54.276 --> 00:26:59.066 A:middle
If it is, make sure that there

00:26:59.066 --> 00:27:01.266 A:middle
is no other active CarPlay

00:27:01.266 --> 00:27:03.766 A:middle
session either with the same

00:27:03.766 --> 00:27:06.696 A:middle
device or with another wired or

00:27:06.696 --> 00:27:07.766 A:middle
wireless device.

00:27:09.896 --> 00:27:11.486 A:middle
If there is no other session

00:27:11.976 --> 00:27:14.196 A:middle
proceed with connecting iAP2

00:27:14.196 --> 00:27:15.166 A:middle
over Bluetooth.

00:27:17.646 --> 00:27:20.396 A:middle
Once iAP2 Is connected wait to

00:27:20.396 --> 00:27:22.126 A:middle
receive a notification that

00:27:22.126 --> 00:27:23.866 A:middle
wireless CarPlay is enabled.

00:27:26.076 --> 00:27:29.476 A:middle
If it is wait for the device to

00:27:29.476 --> 00:27:31.586 A:middle
be discovered and connect.

00:27:33.816 --> 00:27:35.096 A:middle
When the connect command is

00:27:35.096 --> 00:27:37.726 A:middle
issued iPhone will check which

00:27:37.726 --> 00:27:40.616 A:middle
interfaces are available and

00:27:40.826 --> 00:27:43.106 A:middle
will initiate the session either

00:27:43.106 --> 00:27:45.156 A:middle
over wireless or wired.

00:27:46.506 --> 00:27:49.396 A:middle
Moving on to USB the flow looks

00:27:49.396 --> 00:27:50.216 A:middle
fairly similar.

00:27:50.716 --> 00:27:52.716 A:middle
You wait until the device gets

00:27:52.716 --> 00:27:55.676 A:middle
connected, you check that there

00:27:55.676 --> 00:27:57.506 A:middle
is no active session as we do

00:27:57.506 --> 00:27:58.896 A:middle
not want to interrupt it.

00:27:59.406 --> 00:28:01.556 A:middle
If there is none check that

00:28:01.556 --> 00:28:02.626 A:middle
CarPlay is enabled.

00:28:03.126 --> 00:28:04.436 A:middle
Then proceed with your role

00:28:04.436 --> 00:28:07.366 A:middle
switch and selecting a device to

00:28:07.366 --> 00:28:07.626 A:middle
connect.

00:28:07.706 --> 00:28:11.586 A:middle
At this point again, iPhone

00:28:11.586 --> 00:28:13.816 A:middle
checks if both the wireless and

00:28:13.816 --> 00:28:15.866 A:middle
wired link are available and

00:28:15.866 --> 00:28:17.196 A:middle
picks one of the two to

00:28:17.286 --> 00:28:19.556 A:middle
establish the session.

00:28:20.066 --> 00:28:22.266 A:middle
Then last user mode is restored

00:28:22.526 --> 00:28:23.926 A:middle
and the driver is all set.

00:28:26.396 --> 00:28:28.086 A:middle
In the previous two slides, we

00:28:28.086 --> 00:28:29.546 A:middle
saw how to automatically

00:28:29.546 --> 00:28:31.236 A:middle
reconnect to the last used

00:28:31.236 --> 00:28:31.666 A:middle
device.

00:28:33.276 --> 00:28:34.946 A:middle
But what happens if there are

00:28:34.946 --> 00:28:36.766 A:middle
multiple CarPlay devices in the

00:28:36.766 --> 00:28:37.236 A:middle
vehicle?

00:28:38.746 --> 00:28:40.466 A:middle
They might be connected just

00:28:40.466 --> 00:28:43.056 A:middle
over USB, just paired for

00:28:43.056 --> 00:28:46.386 A:middle
wireless or both paired for

00:28:46.386 --> 00:28:48.396 A:middle
wireless and connected over USB.

00:28:49.866 --> 00:28:51.586 A:middle
One of those devices will get

00:28:51.586 --> 00:28:53.626 A:middle
reconnected automatically, but

00:28:53.926 --> 00:28:56.136 A:middle
as we mentioned before, the

00:28:56.136 --> 00:28:59.136 A:middle
native UI lists all devices and

00:28:59.136 --> 00:29:00.786 A:middle
lets the driver change the

00:29:00.786 --> 00:29:02.076 A:middle
active CarPlay device.

00:29:04.406 --> 00:29:06.476 A:middle
When that happens, the head unit

00:29:06.476 --> 00:29:08.276 A:middle
follows the same procedures to

00:29:08.276 --> 00:29:09.826 A:middle
reconnect over the available

00:29:09.826 --> 00:29:10.496 A:middle
transport.

00:29:12.446 --> 00:29:14.276 A:middle
Lastly, let's talk about

00:29:14.276 --> 00:29:15.946 A:middle
reconnecting after a session

00:29:15.946 --> 00:29:16.526 A:middle
disconnect.

00:29:17.836 --> 00:29:19.206 A:middle
CarPlay disconnection might

00:29:19.206 --> 00:29:20.656 A:middle
occur for multiple reasons.

00:29:21.856 --> 00:29:23.786 A:middle
The head unit must be aware why

00:29:23.786 --> 00:29:25.796 A:middle
the disconnection happened and

00:29:25.796 --> 00:29:27.426 A:middle
determine if a reconnect is

00:29:27.426 --> 00:29:27.936 A:middle
required.

00:29:27.936 --> 00:29:30.846 A:middle
Here are a couple of common

00:29:30.846 --> 00:29:33.046 A:middle
scenarios and expected outcome.

00:29:34.806 --> 00:29:37.116 A:middle
In situations where the user

00:29:37.166 --> 00:29:39.566 A:middle
unplugs from USB or manually

00:29:39.566 --> 00:29:41.006 A:middle
disconnects from the native UI.

00:29:42.566 --> 00:29:44.786 A:middle
No reconnection is needed as

00:29:44.786 --> 00:29:46.546 A:middle
there was an explicit user

00:29:46.546 --> 00:29:48.926 A:middle
action to terminate the CarPlay

00:29:50.636 --> 00:29:50.786 A:middle
session.

00:29:51.816 --> 00:29:53.856 A:middle
However, if the phone is no

00:29:53.856 --> 00:29:56.746 A:middle
longer reachable for example,

00:29:56.746 --> 00:29:58.746 A:middle
the user walks away, turns off

00:29:58.746 --> 00:30:01.656 A:middle
Wi-Fi or anything similar, the

00:30:01.656 --> 00:30:03.316 A:middle
head unit is expected to do a

00:30:03.316 --> 00:30:05.396 A:middle
fast reconnect to the same

00:30:05.396 --> 00:30:07.176 A:middle
device using CarPlay Control

00:30:07.176 --> 00:30:07.486 A:middle
API.

00:30:08.836 --> 00:30:11.636 A:middle
If that fails then proceed with

00:30:11.636 --> 00:30:13.566 A:middle
the Bluetooth reconnect to

00:30:13.566 --> 00:30:15.276 A:middle
reestablish the CarPlay session.

00:30:17.316 --> 00:30:19.196 A:middle
With this we have explored all

00:30:19.196 --> 00:30:20.876 A:middle
types of CarPlay connections.

00:30:22.106 --> 00:30:23.606 A:middle
Now let's go over some

00:30:23.606 --> 00:30:25.436 A:middle
architectural considerations

00:30:25.506 --> 00:30:26.856 A:middle
when designing a wireless

00:30:26.856 --> 00:30:27.776 A:middle
CarPlay system.

00:30:30.656 --> 00:30:32.056 A:middle
When designing a wireless

00:30:32.056 --> 00:30:33.886 A:middle
system, you want to optimize for

00:30:33.886 --> 00:30:34.656 A:middle
performance.

00:30:36.696 --> 00:30:38.146 A:middle
That means that you have to

00:30:38.146 --> 00:30:41.796 A:middle
decide which Wi-Fi protocol to

00:30:41.796 --> 00:30:44.106 A:middle
support, what configuration to

00:30:44.106 --> 00:30:46.916 A:middle
use and in which frequency band

00:30:46.916 --> 00:30:47.536 A:middle
to operate.

00:30:49.656 --> 00:30:51.656 A:middle
Next, you need to think about

00:30:51.926 --> 00:30:53.826 A:middle
what other wireless technologies

00:30:53.826 --> 00:30:55.976 A:middle
will be used in the vehicle and

00:30:55.976 --> 00:30:57.416 A:middle
potential interferences.

00:31:00.036 --> 00:31:02.986 A:middle
Services like Internet data or

00:31:02.986 --> 00:31:05.396 A:middle
other in-car applications might

00:31:05.396 --> 00:31:07.406 A:middle
also have an impact on the

00:31:07.406 --> 00:31:08.166 A:middle
performance.

00:31:10.296 --> 00:31:12.836 A:middle
With all that in mind you need

00:31:12.836 --> 00:31:14.216 A:middle
to assure that the wireless

00:31:14.326 --> 00:31:15.846 A:middle
performance requirements for

00:31:15.846 --> 00:31:17.206 A:middle
CarPlay are satisfied.

00:31:18.196 --> 00:31:19.476 A:middle
So, what do we recommend for

00:31:19.476 --> 00:31:20.296 A:middle
wireless CarPlay?

00:31:21.106 --> 00:31:23.196 A:middle
First, we really recommend that

00:31:23.196 --> 00:31:24.906 A:middle
your wireless access point

00:31:24.906 --> 00:31:26.786 A:middle
operates in the 5GHz band.

00:31:27.986 --> 00:31:29.306 A:middle
It offers more channels to

00:31:29.306 --> 00:31:31.836 A:middle
choose from, it's less prone to

00:31:31.836 --> 00:31:34.786 A:middle
interference, and it is the

00:31:34.786 --> 00:31:36.136 A:middle
least congested band.

00:31:36.686 --> 00:31:39.366 A:middle
Please do use 5GHz whenever

00:31:39.366 --> 00:31:39.876 A:middle
possible.

00:31:44.106 --> 00:31:46.986 A:middle
Even though 2.4GHz is not

00:31:46.986 --> 00:31:48.496 A:middle
recommended and is highly

00:31:48.496 --> 00:31:51.276 A:middle
congested in some regulatory

00:31:51.276 --> 00:31:52.986 A:middle
domains you might have to use

00:31:53.636 --> 00:31:53.706 A:middle
it.

00:31:54.436 --> 00:31:57.466 A:middle
Then you need to be very aware

00:31:57.466 --> 00:32:00.576 A:middle
of coexistent scenarios and you

00:32:00.576 --> 00:32:02.166 A:middle
must disable the Bluetooth stack

00:32:02.246 --> 00:32:04.226 A:middle
completely while there is an

00:32:04.326 --> 00:32:05.446 A:middle
active CarPlay session.

00:32:07.766 --> 00:32:10.196 A:middle
If you offer LTE connectivity on

00:32:10.196 --> 00:32:12.696 A:middle
Band 40 your choices of

00:32:12.696 --> 00:32:15.086 A:middle
operating channels become even

00:32:15.086 --> 00:32:15.996 A:middle
more limited.

00:32:18.076 --> 00:32:20.256 A:middle
Remember if you are designing a

00:32:20.256 --> 00:32:22.656 A:middle
system which will operate in

00:32:22.656 --> 00:32:25.386 A:middle
both bands you need to consider

00:32:25.436 --> 00:32:26.946 A:middle
how the user experience will be

00:32:26.946 --> 00:32:27.496 A:middle
impacted.

00:32:28.326 --> 00:32:30.936 A:middle
In 5GHz other Bluetooth devices

00:32:31.116 --> 00:32:32.996 A:middle
may be paired and connected in

00:32:32.996 --> 00:32:36.246 A:middle
parallel, whereas in 2.4GHz,

00:32:36.796 --> 00:32:38.976 A:middle
adding or connecting a second

00:32:38.976 --> 00:32:40.396 A:middle
Bluetooth device is not

00:32:40.396 --> 00:32:40.896 A:middle
possible.

00:32:45.086 --> 00:32:46.986 A:middle
Some systems might choose to

00:32:46.986 --> 00:32:48.856 A:middle
deploy multiple access points or

00:32:48.856 --> 00:32:51.656 A:middle
dual band APs to offer a variety

00:32:51.656 --> 00:32:52.856 A:middle
of in-car services and

00:32:52.856 --> 00:32:53.516 A:middle
applications.

00:32:55.516 --> 00:32:57.146 A:middle
If these access points are

00:32:57.146 --> 00:32:58.856 A:middle
operating in the same frequency

00:32:58.856 --> 00:33:00.986 A:middle
band they need to use different

00:33:00.986 --> 00:33:02.876 A:middle
channels to avoid interference.

00:33:04.756 --> 00:33:07.286 A:middle
If the access points use the

00:33:07.286 --> 00:33:10.556 A:middle
same SSID and password they need

00:33:10.556 --> 00:33:12.046 A:middle
to offer the same set of

00:33:12.176 --> 00:33:14.956 A:middle
services to prevent inconsistent

00:33:14.956 --> 00:33:15.686 A:middle
experience.

00:33:16.806 --> 00:33:18.856 A:middle
And lastly, using hidden

00:33:18.856 --> 00:33:21.286 A:middle
networks is not recommended for

00:33:21.286 --> 00:33:21.716 A:middle
CarPlay.

00:33:25.256 --> 00:33:27.546 A:middle
Finally, let's look at how to

00:33:27.546 --> 00:33:29.026 A:middle
provide Internet data

00:33:29.026 --> 00:33:30.286 A:middle
connectivity to iPhone.

00:33:31.976 --> 00:33:33.446 A:middle
The head unit communicates the

00:33:33.446 --> 00:33:35.026 A:middle
state of the Internet

00:33:35.076 --> 00:33:37.596 A:middle
connectivity dynamically through

00:33:37.596 --> 00:33:40.586 A:middle
the Apple Device IE and through

00:33:40.636 --> 00:33:41.656 A:middle
the Networking IE.

00:33:43.456 --> 00:33:45.936 A:middle
Notifications need to descend on

00:33:45.936 --> 00:33:46.366 A:middle
changes.

00:33:47.206 --> 00:33:49.906 A:middle
For example, to state that the

00:33:49.906 --> 00:33:51.576 A:middle
data communication module is

00:33:51.576 --> 00:33:54.446 A:middle
available on the system or that

00:33:54.476 --> 00:33:55.666 A:middle
there is a failure with that

00:33:55.666 --> 00:33:59.586 A:middle
module or that the service

00:33:59.586 --> 00:34:00.856 A:middle
contract has expired.

00:34:02.866 --> 00:34:05.006 A:middle
Temporary loss of connection due

00:34:05.006 --> 00:34:07.336 A:middle
to poor cell coverage does not

00:34:07.336 --> 00:34:08.526 A:middle
need to be communicated to

00:34:08.656 --> 00:34:09.016 A:middle
iPhone.

00:34:11.266 --> 00:34:12.716 A:middle
For more information about this

00:34:12.716 --> 00:34:14.486 A:middle
session check out the session

00:34:14.486 --> 00:34:15.036 A:middle
website.

00:34:16.586 --> 00:34:17.746 A:middle
If you're interested in

00:34:17.746 --> 00:34:19.766 A:middle
developing CarPlay apps check

00:34:19.766 --> 00:34:21.736 A:middle
out the Enabling Your App for

00:34:21.736 --> 00:34:22.686 A:middle
CarPlay session.

00:34:23.806 --> 00:34:25.906 A:middle
Also, refer to the videos from

00:34:25.906 --> 00:34:27.746 A:middle
last year for basic information

00:34:27.746 --> 00:34:28.466 A:middle
about CarPlay.