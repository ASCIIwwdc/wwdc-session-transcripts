WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:00:00.506 --> 00:00:11.516 A:middle
[ Silence ]

00:00:12.016 --> 00:00:13.000 A:middle
[ Applause ]

00:00:13.606 --> 00:00:14.016 A:middle
&gt;&gt; Good morning.

00:00:16.606 --> 00:00:18.666 A:middle
Welcome to Session 406:

00:00:18.976 --> 00:00:20.626 A:middle
Integrating Swift
with Objective-C.

00:00:22.466 --> 00:00:25.496 A:middle
Now many of the Swift demos
here at the conference start

00:00:25.496 --> 00:00:27.756 A:middle
by creating either a
brand-new project from one

00:00:27.756 --> 00:00:31.516 A:middle
of expo's project templates or
a playground and that's great.

00:00:31.986 --> 00:00:34.916 A:middle
Playgrounds are a great way
to explore the Swift language.

00:00:35.896 --> 00:00:39.836 A:middle
But many of you already have
Mac or iOS apps and some

00:00:39.836 --> 00:00:41.846 A:middle
of you have spent years
writing Objective-C code.

00:00:42.066 --> 00:00:43.906 A:middle
You have written it carefully.

00:00:43.906 --> 00:00:47.356 A:middle
You have debugged it,
polished it, optimized it.

00:00:47.356 --> 00:00:48.996 A:middle
It's just perfect, hmm?

00:00:49.946 --> 00:00:52.916 A:middle
And we certainly don't want
you to have to throw any

00:00:52.916 --> 00:00:56.086 A:middle
of that away or rewrite
anything that you don't want to.

00:00:56.726 --> 00:00:59.956 A:middle
Also some of you have really
a lot of Objective-C code


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:01:00.576 --> 00:01:02.806 A:middle
that you maybe spent a decade
writing and maybe it's...

00:01:02.966 --> 00:01:03.786 A:middle
not-so-perfect.

00:01:03.786 --> 00:01:06.156 A:middle
It's not as clean and shiny.

00:01:06.646 --> 00:01:09.106 A:middle
So you are going to be using

00:01:09.106 --> 00:01:10.956 A:middle
that Objective-C
code for a while.

00:01:10.986 --> 00:01:13.036 A:middle
You might want to rewrite
it, but it's not going

00:01:13.036 --> 00:01:14.876 A:middle
to happen this time around,
because you've got an app

00:01:14.876 --> 00:01:19.596 A:middle
to ship, etc. So,
Objective-C is not going away.

00:01:20.086 --> 00:01:23.006 A:middle
Both Swift and Objective-C
are first class citizens

00:01:23.246 --> 00:01:24.996 A:middle
for doing Cocoa and
Cocoa Touch development.

00:01:26.326 --> 00:01:29.386 A:middle
And, in fact, we don't
want you to spend any time

00:01:29.386 --> 00:01:30.156 A:middle
that you don't have to.

00:01:30.156 --> 00:01:32.516 A:middle
We don't want you to stop
refining the Objective-C code.

00:01:32.516 --> 00:01:35.816 A:middle
We want you to be able to
integrate Swift as you want to.

00:01:36.636 --> 00:01:39.546 A:middle
And we do think that as
you implement new features,

00:01:39.886 --> 00:01:43.546 A:middle
as you finally get around to
replacing crufty subsystems

00:01:43.916 --> 00:01:45.446 A:middle
that you want to
use Swift for that

00:01:45.846 --> 00:01:49.276 A:middle
because of its better
type safety,

00:01:49.756 --> 00:01:52.096 A:middle
its expressiveness,
its performance.

00:01:54.076 --> 00:01:57.736 A:middle
Now, many of you have also
gained a lot of knowledge

00:01:57.736 --> 00:02:01.226 A:middle
and experience in Cocoa and
Cocoa Touch through your years


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:01:57.736 --> 00:02:01.226 A:middle
and experience in Cocoa and
Cocoa Touch through your years

00:02:01.226 --> 00:02:04.726 A:middle
of Objective-C development and
that applies to Swift as well.

00:02:05.386 --> 00:02:07.976 A:middle
You're using the same
frameworks, the same classes,

00:02:08.645 --> 00:02:12.086 A:middle
the same APIs with some
syntactic differences, in fact,

00:02:12.086 --> 00:02:14.546 A:middle
the same design patterns,
such as delegation.

00:02:15.116 --> 00:02:18.356 A:middle
So all that knowledge applies
and so we expect that a lot

00:02:18.356 --> 00:02:22.946 A:middle
of you are going to end up with
projects that contain both Swift

00:02:22.946 --> 00:02:26.096 A:middle
and Objective-C and we
worked hard to make sure

00:02:26.096 --> 00:02:28.526 A:middle
that Xcode lets you freely
mix Swift and Objective-C.

00:02:29.836 --> 00:02:31.886 A:middle
So this session over the
next hour we're going

00:02:31.886 --> 00:02:33.896 A:middle
to be talking a little
bit more detail

00:02:33.896 --> 00:02:36.846 A:middle
than what you've probably
seen so far about exactly how

00:02:36.846 --> 00:02:37.676 A:middle
that works in practice.

00:02:37.676 --> 00:02:40.946 A:middle
We're going to start simple by
just introducing some Swift code

00:02:40.946 --> 00:02:43.466 A:middle
into an existing
Objective-C app.

00:02:44.396 --> 00:02:47.006 A:middle
Then we'll get a little
bit more interesting.

00:02:47.006 --> 00:02:48.896 A:middle
We're going to start
to add some Swift code

00:02:48.896 --> 00:02:51.816 A:middle
to a model-level framework,
which is then embedded

00:02:51.816 --> 00:02:54.716 A:middle
in an Objective-C app and
call that from Objective-C.

00:02:56.026 --> 00:02:58.926 A:middle
We'll talk about how to start
accessing your pure Swift

00:02:58.926 --> 00:03:01.546 A:middle
framework which will
start showing


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:02:58.926 --> 00:03:01.546 A:middle
framework which will
start showing

00:03:02.166 --> 00:03:03.506 A:middle
up from an Objective-C app.

00:03:03.506 --> 00:03:07.706 A:middle
And then we'll talk as we go
along about how to adopt some

00:03:07.706 --> 00:03:10.586 A:middle
of the common, well-established
Cocoa patterns in Swift.

00:03:10.976 --> 00:03:12.956 A:middle
And again Swift is
designed from the ground

00:03:12.956 --> 00:03:16.526 A:middle
up to be a great Cocoa/Cocoa
Touch development language.

00:03:16.776 --> 00:03:20.236 A:middle
And so it has language support
for some of the Cocoa idioms

00:03:20.236 --> 00:03:22.186 A:middle
that we've gotten used to.

00:03:22.556 --> 00:03:25.386 A:middle
So, I could go on here for, you
know, two dozen slides and talk

00:03:25.386 --> 00:03:28.116 A:middle
in detail about how this works,
but I'd rather just give a demo

00:03:28.116 --> 00:03:30.236 A:middle
because that's usually
a bit more clear.

00:03:34.126 --> 00:03:37.696 A:middle
Alright, so I've
got a project here.

00:03:37.696 --> 00:03:42.316 A:middle
It's, it's an iOS app and
it has an embedded framework

00:03:42.316 --> 00:03:44.076 A:middle
so it's decently designed here.

00:03:44.076 --> 00:03:47.216 A:middle
It's got a top layer which is
the actual app with the view

00:03:47.216 --> 00:03:49.506 A:middle
and the controller
layer in our MVC design.

00:03:50.706 --> 00:03:53.736 A:middle
There is a framework
called ListerKit down here,

00:03:53.736 --> 00:03:55.206 A:middle
which contains our
model objects.

00:03:55.206 --> 00:03:57.276 A:middle
And all of this is currently
written in Objective-C.

00:03:58.756 --> 00:04:01.456 A:middle
Just to give a sense of
what this is, let's go ahead


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:03:58.756 --> 00:04:01.456 A:middle
Just to give a sense of
what this is, let's go ahead

00:04:01.456 --> 00:04:04.606 A:middle
and run it in the simulator
and we're gonna go ahead here

00:04:04.606 --> 00:04:05.566 A:middle
and bring up the simulator.

00:04:05.656 --> 00:04:08.526 A:middle
We see that, yeah, it's a
typical list-taking application.

00:04:08.526 --> 00:04:11.216 A:middle
I can go in and add
colored lists here.

00:04:11.216 --> 00:04:13.706 A:middle
I can check off items,
etcetera, edit them.

00:04:14.006 --> 00:04:17.156 A:middle
What I can't do right
now is to add a new list.

00:04:17.156 --> 00:04:21.216 A:middle
This happens to be an iCloud app
so I could do that in my Mac app

00:04:21.216 --> 00:04:22.106 A:middle
and it would show up here...

00:04:22.466 --> 00:04:24.926 A:middle
But, for this example
we're going to use Swift

00:04:24.926 --> 00:04:28.156 A:middle
to add the ability to
add a new list in iOS.

00:04:29.096 --> 00:04:31.106 A:middle
Alright, so I'm going
to go back here

00:04:31.106 --> 00:04:33.726 A:middle
and the first thing I'm
going to do is look down here

00:04:33.726 --> 00:04:35.076 A:middle
to the group ViewControllers.

00:04:35.516 --> 00:04:38.636 A:middle
And here we have some
ViewControllers already written

00:04:38.776 --> 00:04:42.186 A:middle
in objectives [ahem]
in Objective-C.

00:04:42.596 --> 00:04:45.716 A:middle
I go to File, Create New File,
and in this case I'm just going

00:04:45.716 --> 00:04:47.496 A:middle
to create an empty Swift file
because I want to show you how

00:04:47.496 --> 00:04:48.596 A:middle
to get started from scratch.

00:04:48.596 --> 00:04:50.556 A:middle
Xcode has great file
templates and can fill

00:04:50.556 --> 00:04:51.666 A:middle
in a lot of code for you.

00:04:51.666 --> 00:04:53.946 A:middle
And we want to do it
in a basic way here,

00:04:53.946 --> 00:04:55.506 A:middle
to show how it's going to work.

00:04:55.956 --> 00:04:59.836 A:middle
I'm going to call it
NewListController and I'm going

00:04:59.836 --> 00:05:02.886 A:middle
to make sure that
it is going to go


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:04:59.836 --> 00:05:02.886 A:middle
to make sure that
it is going to go

00:05:02.886 --> 00:05:04.546 A:middle
into the application
target here.

00:05:04.926 --> 00:05:07.926 A:middle
We also see that I have
ListerKit, which is my framework

00:05:07.926 --> 00:05:09.366 A:middle
and one of the new
extensions, here,

00:05:09.366 --> 00:05:12.816 A:middle
for showing in the status view.

00:05:12.816 --> 00:05:14.276 A:middle
So, NewListController.

00:05:14.956 --> 00:05:18.856 A:middle
Now as I create this,
my first Swift file,

00:05:19.086 --> 00:05:20.686 A:middle
in a pure Objective-C project...

00:05:21.226 --> 00:05:22.386 A:middle
Xcode will offer to create

00:05:22.386 --> 00:05:23.746 A:middle
for me what's called
a bridging header.

00:05:24.506 --> 00:05:27.286 A:middle
So a bridging header, we'll talk
about that in more detail later,

00:05:27.606 --> 00:05:30.196 A:middle
but basically what it is, is
a way for you to expose some

00:05:30.196 --> 00:05:32.916 A:middle
of your Objective-C
APIs to Swift.

00:05:35.216 --> 00:05:37.106 A:middle
I'm going to go ahead
and create that.

00:05:37.716 --> 00:05:38.926 A:middle
So I get that by default.

00:05:40.256 --> 00:05:42.336 A:middle
Now, import foundation...

00:05:42.496 --> 00:05:44.986 A:middle
actually I'm going to be
needing some UIKit API here.

00:05:44.986 --> 00:05:46.836 A:middle
So I go ahead and
change that to UIKit.

00:05:47.546 --> 00:05:51.476 A:middle
And I know that I will need to
import my own model framework

00:05:51.536 --> 00:05:53.966 A:middle
because we want to obviously
create our model objects

00:05:53.966 --> 00:05:55.396 A:middle
from within the ViewController.

00:05:56.966 --> 00:06:01.436 A:middle
And I'm just going to go ahead
here and say NewListController.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:05:56.966 --> 00:06:01.436 A:middle
And I'm just going to go ahead
here and say NewListController.

00:06:03.196 --> 00:06:07.226 A:middle
And now, when I complete,
we see that because I said

00:06:07.226 --> 00:06:09.186 A:middle
"import UIKit" there,

00:06:09.806 --> 00:06:12.376 A:middle
Swift pulls in the
Objective-C framework UIKit

00:06:12.376 --> 00:06:15.526 A:middle
and gives me a Swift
view of those symbols.

00:06:15.526 --> 00:06:17.946 A:middle
So I'm going to subclass
from UIController

00:06:18.776 --> 00:06:20.016 A:middle
and just leave it
like that for now.

00:06:21.696 --> 00:06:23.826 A:middle
So we have just a
basic empty class --

00:06:24.076 --> 00:06:26.516 A:middle
a Swift class, subclassing
an Objective-C class --

00:06:26.626 --> 00:06:28.506 A:middle
that we get from UI-
...from Cocoa Touch.

00:06:30.356 --> 00:06:32.886 A:middle
Now we could sit here
and drag out rectangles

00:06:32.886 --> 00:06:35.306 A:middle
and create an API-
...create a UI for this,

00:06:35.346 --> 00:06:36.986 A:middle
but fortunately I happen
to already have one.

00:06:37.496 --> 00:06:38.896 A:middle
How lucky.

00:06:39.326 --> 00:06:40.396 A:middle
It isn't wire up though,

00:06:40.466 --> 00:06:41.676 A:middle
so we're going to
do that right now.

00:06:42.846 --> 00:06:44.806 A:middle
The first thing I'm
going to do here is,

00:06:44.946 --> 00:06:48.586 A:middle
just like with Objective-C,
I need to set what the class

00:06:48.586 --> 00:06:49.596 A:middle
of my UIController is.

00:06:49.596 --> 00:06:53.556 A:middle
So I can go up here and now we
see that the NewListController

00:06:53.556 --> 00:06:56.296 A:middle
that I just created is shown
here among all the ones

00:06:56.296 --> 00:06:57.406 A:middle
implemented in Objective-C.

00:06:57.826 --> 00:06:59.336 A:middle
So when you access your classes

00:06:59.336 --> 00:07:01.836 A:middle
from Swift-...from
Interface Builder, the Swift


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:06:59.336 --> 00:07:01.836 A:middle
from Swift-...from
Interface Builder, the Swift

00:07:01.836 --> 00:07:03.796 A:middle
and Objective-C classes
show up next to each other

00:07:03.796 --> 00:07:05.706 A:middle
and you can work
with them as equals.

00:07:07.466 --> 00:07:10.306 A:middle
Alright, so now the next thing
I want to do after setting that,

00:07:10.986 --> 00:07:13.826 A:middle
I'm going to go ahead and
create a bar button item here.

00:07:13.936 --> 00:07:17.326 A:middle
I'm going to drag that up
into the toolbar, up here,

00:07:18.366 --> 00:07:21.986 A:middle
and I'm going to change
the identifier to be Add,

00:07:21.986 --> 00:07:24.006 A:middle
and that also changes
the visual appearance

00:07:24.006 --> 00:07:27.156 A:middle
to give it a standard Cocoa
Touch "Add button" look.

00:07:28.676 --> 00:07:31.086 A:middle
I'll create a segue, it's
going to be a mobile segue.

00:07:31.686 --> 00:07:32.926 A:middle
This is, after all,
the storyboard

00:07:34.166 --> 00:07:38.336 A:middle
and I'll change the name of
that segue to be New List.

00:07:38.336 --> 00:07:41.196 A:middle
Now that's going to be important
a little bit later on so

00:07:41.196 --> 00:07:42.976 A:middle
that we can access it
from within our code.

00:07:44.626 --> 00:07:48.796 A:middle
Okay. So now, you
may have seen in one

00:07:48.796 --> 00:07:51.616 A:middle
of the other demos how we can
drag from Swift code and connect

00:07:51.616 --> 00:07:53.686 A:middle
to objects inside of IB.

00:07:54.336 --> 00:07:56.236 A:middle
We can do the same thing in
the other direction as well.

00:07:56.596 --> 00:07:59.776 A:middle
If I option-click here
on my Swift class --


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:08:01.306 --> 00:08:03.306 A:middle
my ViewController class
implemented in Swift --

00:08:03.836 --> 00:08:05.286 A:middle
now I can drag the
other direction.

00:08:06.106 --> 00:08:09.126 A:middle
First thing I'm going to do is
I'm going to go ahead and drag

00:08:09.126 --> 00:08:12.886 A:middle
from an outlet and
insert a new outlet here.

00:08:13.466 --> 00:08:16.766 A:middle
And I'm going to call
this "nameField".

00:08:17.316 --> 00:08:20.456 A:middle
And we see that it's a UIText
field and the storage is weak

00:08:20.796 --> 00:08:22.796 A:middle
because we have a
controller class,

00:08:23.556 --> 00:08:26.176 A:middle
the super view- ...the view
hierarchy owns the button,

00:08:26.326 --> 00:08:28.846 A:middle
and the fields and
the buttons in here,

00:08:29.246 --> 00:08:31.066 A:middle
and so we just want a
weak reference to it.

00:08:31.066 --> 00:08:33.426 A:middle
And, in fact, when
we insert this,

00:08:35.025 --> 00:08:36.686 A:middle
Interface Builder knows
it's a Swift file.

00:08:36.836 --> 00:08:41.096 A:middle
So it uses the Swift syntax just
as it would for Objective-C.

00:08:42.456 --> 00:08:46.886 A:middle
And it uses the IBOutlet
property

00:08:47.196 --> 00:08:50.056 A:middle
for the stored property- ...I'm
sorry, the IBOutlet attribute

00:08:50.056 --> 00:08:51.216 A:middle
for the stored property here.

00:08:51.766 --> 00:08:54.876 A:middle
And this is implicitly
weak and also optional

00:08:55.286 --> 00:08:57.876 A:middle
because not all the
outlets may be connected.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:09:00.236 --> 00:09:02.736 A:middle
Give myself some space
there; I'm going to go ahead

00:09:02.736 --> 00:09:06.106 A:middle
and do the same thing
here for the buttons.

00:09:07.016 --> 00:09:10.756 A:middle
I'm just going to control-drag
these and I'm just going

00:09:10.786 --> 00:09:12.796 A:middle
to fill these in
in the same way.

00:09:12.796 --> 00:09:14.386 A:middle
Now this is a sample app.

00:09:14.386 --> 00:09:16.986 A:middle
Let me go ahead and
adjust the spacing there.

00:09:16.986 --> 00:09:20.316 A:middle
This is a sample app and
so it's not rescalable

00:09:20.316 --> 00:09:22.306 A:middle
to just have six
buttons and six outlets.

00:09:22.346 --> 00:09:24.196 A:middle
But I know that you
all design better,

00:09:24.356 --> 00:09:26.796 A:middle
more maintainable
code than this.

00:09:26.886 --> 00:09:29.826 A:middle
This is for illustrative
purposes only.

00:09:29.826 --> 00:09:32.246 A:middle
You might want something
where you can load colors

00:09:32.246 --> 00:09:34.796 A:middle
from a TableView- ...uh,
from a Plist and show them

00:09:34.796 --> 00:09:36.176 A:middle
in a TableView or
something like that.

00:09:36.176 --> 00:09:40.346 A:middle
I'm going to go ahead and
finish connecting these.

00:09:41.536 --> 00:09:45.106 A:middle
Alright, so now we have our
outlets to the UI components.

00:09:45.376 --> 00:09:47.686 A:middle
We can also create
Actions in this way.

00:09:48.276 --> 00:09:51.596 A:middle
If I choose the Cancel button
down here and I drag in the,

00:09:51.596 --> 00:09:54.126 A:middle
I can create an Action up
at the top here just for-

00:09:54.126 --> 00:09:55.216 A:middle
...just as for Objective-C.

00:09:55.686 --> 00:09:57.376 A:middle
I change the connection
type to Action.

00:09:57.656 --> 00:10:00.766 A:middle
I will type here "cancel" and
we can just leave the type


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:09:57.656 --> 00:10:00.766 A:middle
I will type here "cancel" and
we can just leave the type

00:10:00.766 --> 00:10:01.956 A:middle
of the sender as
any object here.

00:10:02.076 --> 00:10:04.426 A:middle
We don't actually care
because we're not going

00:10:04.426 --> 00:10:05.496 A:middle
to be messaging it.

00:10:07.326 --> 00:10:11.536 A:middle
What we will do, however, is
to invoke some Cocoa Touch API.

00:10:11.536 --> 00:10:18.716 A:middle
I give myself some more room
and I can say "self.dismiss"

00:10:18.716 --> 00:10:21.086 A:middle
and then the code
completion gives me access

00:10:21.086 --> 00:10:23.786 A:middle
to the Cocoa Touch API
that we already know.

00:10:24.636 --> 00:10:25.836 A:middle
I can complete here.

00:10:26.176 --> 00:10:27.586 A:middle
I'm not going to
need a- ...I want it

00:10:27.586 --> 00:10:28.976 A:middle
to be animated, so I put "true".

00:10:29.266 --> 00:10:31.496 A:middle
I don't need a completion
block, so I give it "nil".

00:10:32.036 --> 00:10:35.346 A:middle
Now, in Objective-C we
always have to message "self"

00:10:35.606 --> 00:10:36.766 A:middle
if we want to talk to self.

00:10:37.516 --> 00:10:40.416 A:middle
Swift knows from context when
you are messaging yourself.

00:10:40.416 --> 00:10:41.886 A:middle
So we can actually
leave this out

00:10:41.886 --> 00:10:42.976 A:middle
and make this a little
bit more readable.

00:10:43.516 --> 00:10:48.546 A:middle
[ Applause ]

00:10:49.046 --> 00:10:49.606 A:middle
Excellent.

00:10:50.396 --> 00:10:53.996 A:middle
Alright, so now we will connect
the buttons here as well.

00:10:56.116 --> 00:10:58.766 A:middle
And I'm going to be
calling this "pickColor".

00:10:59.546 --> 00:11:01.926 A:middle
Now in this case
I choose UIButton.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:10:59.546 --> 00:11:01.926 A:middle
Now in this case
I choose UIButton.

00:11:02.566 --> 00:11:05.296 A:middle
(I'm sorry, I need to
make it an Action.)

00:11:06.466 --> 00:11:07.896 A:middle
I choose UIButton down here

00:11:07.896 --> 00:11:10.346 A:middle
because in this case we
will actually want to talk

00:11:10.346 --> 00:11:12.906 A:middle
to the button, or
compare the button,

00:11:12.906 --> 00:11:14.296 A:middle
so we want to have that type.

00:11:14.296 --> 00:11:19.126 A:middle
And as you can see, Interface
Builder generates the code

00:11:19.726 --> 00:11:21.826 A:middle
and makes the sender
be a UIButton.

00:11:22.656 --> 00:11:24.356 A:middle
Before I forget, I'm
also going to wire

00:11:24.356 --> 00:11:27.206 A:middle
up the other actions
here as well.

00:11:27.206 --> 00:11:28.226 A:middle
Let me see here.

00:11:30.516 --> 00:11:32.936 A:middle
To connect to this one,

00:11:32.936 --> 00:11:36.226 A:middle
give myself a little
bit of space there.

00:11:41.996 --> 00:11:44.376 A:middle
And now they're all wired
up to the same Action.

00:11:44.656 --> 00:11:46.036 A:middle
So they're all wired
up to the same Action.

00:11:46.036 --> 00:11:47.436 A:middle
The sender will be
different depending

00:11:47.436 --> 00:11:48.426 A:middle
on which button we touch.

00:11:49.746 --> 00:11:52.556 A:middle
Now, I want to show
that some of the power

00:11:52.556 --> 00:11:56.116 A:middle
of the Swift select statement
here, the switch statement.

00:11:58.486 --> 00:12:00.956 A:middle
Unlike Objective-C or
other C-based languages,


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:11:58.486 --> 00:12:00.956 A:middle
Unlike Objective-C or
other C-based languages,

00:12:01.286 --> 00:12:04.646 A:middle
I can actually switch
on a wide variety

00:12:04.646 --> 00:12:05.806 A:middle
of different kinds of patterns.

00:12:05.806 --> 00:12:07.826 A:middle
In this case I'm just
switching on what the sender is.

00:12:08.366 --> 00:12:13.396 A:middle
But this is a very rich
construct in the Swift language

00:12:13.746 --> 00:12:16.446 A:middle
and I encourage you to
catch one of the later talks

00:12:16.446 --> 00:12:19.656 A:middle
about advanced Swift to
really get into the depth

00:12:19.656 --> 00:12:21.426 A:middle
of what you can use this for.

00:12:22.096 --> 00:12:24.736 A:middle
For right now, to keep
it simple, I'm just going

00:12:24.736 --> 00:12:25.926 A:middle
to use it to match on a button.

00:12:26.946 --> 00:12:28.976 A:middle
And what I will say is "okay,

00:12:28.976 --> 00:12:30.656 A:middle
now I need to assign
something here."

00:12:31.096 --> 00:12:33.196 A:middle
So I'm going to need to
have a stored property.

00:12:34.386 --> 00:12:37.626 A:middle
I create a stored property
called selectedLabel

00:12:37.876 --> 00:12:40.736 A:middle
because we're actually
choosing labels here represented

00:12:40.736 --> 00:12:43.466 A:middle
as colors on the screen.

00:12:43.466 --> 00:12:46.606 A:middle
And then what I can do
here is I can say this is

00:12:46.606 --> 00:12:48.186 A:middle
an AAPLListLabel.

00:12:49.356 --> 00:12:54.386 A:middle
So this again is an Objective-C
type that has been imported

00:12:54.766 --> 00:12:56.826 A:middle
through my import of
ListerKit up there.

00:12:58.266 --> 00:13:00.086 A:middle
I'm going to start out by saying


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:12:58.266 --> 00:13:00.086 A:middle
I'm going to start out by saying

00:13:00.086 --> 00:13:04.096 A:middle
that that is an
APLListLabel.Gray.

00:13:04.766 --> 00:13:06.126 A:middle
That's the default value of it.

00:13:06.766 --> 00:13:09.036 A:middle
Because I don't put a question
mark, I don't make it optional,

00:13:09.036 --> 00:13:10.806 A:middle
that means that it
has to have a value.

00:13:11.176 --> 00:13:13.286 A:middle
Remember the IB outlets
are implicitly optional.

00:13:13.546 --> 00:13:16.966 A:middle
Now it's kind of ugly to have
to repeat the same thing here.

00:13:16.966 --> 00:13:19.796 A:middle
And, in fact, Swift has great
support for type inference.

00:13:19.796 --> 00:13:21.576 A:middle
And when it knows exactly
what type you mean,

00:13:21.956 --> 00:13:23.596 A:middle
then you can go ahead
and leave out the type.

00:13:23.996 --> 00:13:27.246 A:middle
So from this, Swift can tell
exactly that, "okay this has

00:13:27.286 --> 00:13:30.846 A:middle
to be an AAPLListLabel," because
that's how I'm initializing it,

00:13:30.886 --> 00:13:32.516 A:middle
so I can just leave
out the type.

00:13:34.666 --> 00:13:36.396 A:middle
Now I can complete
my statement here.

00:13:36.396 --> 00:13:41.076 A:middle
I can say "selectedLabel
= .Gray" and, in fact,

00:13:41.436 --> 00:13:43.116 A:middle
I can add to the rest
of them here as well.

00:13:43.116 --> 00:13:44.376 A:middle
I'm a very fast typer.

00:13:46.716 --> 00:13:50.556 A:middle
Now we see here that
Objective-C- ...I mean, sorry,

00:13:50.716 --> 00:13:53.136 A:middle
Xcode, Swift has a
message for us here.

00:13:53.526 --> 00:13:56.686 A:middle
So in Swift, one of the
things to notice is each

00:13:56.686 --> 00:13:59.196 A:middle
of the cases is implicitly ended

00:13:59.586 --> 00:14:00.796 A:middle
at the beginning
of the next case.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:13:59.586 --> 00:14:00.796 A:middle
at the beginning
of the next case.

00:14:00.796 --> 00:14:04.096 A:middle
So you don't have the case of
C where you implicitly fall

00:14:04.096 --> 00:14:05.776 A:middle
through and that's the
source of a lot of bugs.

00:14:06.326 --> 00:14:10.026 A:middle
In fact, Swift was explicitly
designed to avoid many

00:14:10.026 --> 00:14:13.376 A:middle
of the common pitfalls that are
common in C-based languages.

00:14:14.726 --> 00:14:17.476 A:middle
Now in this case, another thing
about the switch statement is

00:14:17.476 --> 00:14:18.576 A:middle
that it has to be exhaustive.

00:14:18.576 --> 00:14:20.776 A:middle
So you have to say that
you cover all the cases.

00:14:21.566 --> 00:14:23.946 A:middle
In this particular case I'm
just going to add a default

00:14:25.016 --> 00:14:27.986 A:middle
and what I'm going to do
in this case right here is

00:14:27.986 --> 00:14:30.236 A:middle
to use a Swift standard
library function

00:14:30.236 --> 00:14:31.436 A:middle
to just trap into the debugger.

00:14:31.726 --> 00:14:33.476 A:middle
Because I want to make sure
that if I just add new buttons

00:14:33.476 --> 00:14:36.106 A:middle
and hook them up that I actually
have the code for that as well.

00:14:38.326 --> 00:14:39.336 A:middle
So now Xcode is happy.

00:14:40.496 --> 00:14:41.106 A:middle
That's excellent.

00:14:41.106 --> 00:14:42.046 A:middle
We've just set our property.

00:14:42.316 --> 00:14:43.336 A:middle
That's all we've done so far.

00:14:44.966 --> 00:14:47.756 A:middle
But now we can use some
more of the Cocoa Touch API

00:14:48.266 --> 00:14:50.986 A:middle
to actually make the button
show a reflected state-

00:14:51.856 --> 00:14:53.706 A:middle
...show it's selected
state, I should say.

00:14:54.656 --> 00:14:58.306 A:middle
So, we say, in this case
we can say "sender."

00:14:58.966 --> 00:15:02.316 A:middle
and then we can use our code
completion to access the layer.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:14:58.966 --> 00:15:02.316 A:middle
and then we can use our code
completion to access the layer.

00:15:02.316 --> 00:15:06.916 A:middle
And then we'll set it's
borderWidth to be five.

00:15:07.936 --> 00:15:09.636 A:middle
And then, of course,
we have to initialize

00:15:09.676 --> 00:15:11.356 A:middle
that to be a borderColor
as well.

00:15:12.456 --> 00:15:14.806 A:middle
Now in this case, because
we're accessing the layer --

00:15:14.876 --> 00:15:16.346 A:middle
that's a core graphics API --

00:15:16.826 --> 00:15:19.896 A:middle
we get the CGColor from the
UILabel- ...the UIColor.

00:15:21.856 --> 00:15:24.626 A:middle
And all of these are
standard Cocoa Touch APIs.

00:15:24.626 --> 00:15:27.696 A:middle
So you see that when we access
our own Objective-C APIs

00:15:28.086 --> 00:15:30.816 A:middle
or the Cocoa Touch APIs
it looks all the same.

00:15:30.816 --> 00:15:32.946 A:middle
We still use the same,
nice Swift syntax.

00:15:34.216 --> 00:15:36.336 A:middle
Another thing we can
do here is to just say

00:15:36.336 --> 00:15:41.006 A:middle
that the view's tint color
is going to be the color

00:15:41.006 --> 00:15:42.186 A:middle
that corresponds to the label.

00:15:43.116 --> 00:15:48.996 A:middle
And for this we can call
another one of our functions

00:15:48.996 --> 00:15:50.736 A:middle
that we brought in
from Objective-C.

00:15:52.376 --> 00:15:56.326 A:middle
And we pass it the
selectedLabel.

00:15:56.326 --> 00:15:59.296 A:middle
And, in fact, if we
command-click on this,

00:15:59.606 --> 00:16:02.776 A:middle
we see here that we can get
to a Swift representation


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:15:59.606 --> 00:16:02.776 A:middle
we see here that we can get
to a Swift representation

00:16:03.066 --> 00:16:05.076 A:middle
of our own Objective-C API.

00:16:05.986 --> 00:16:08.886 A:middle
In Navigate we could actually
go back to the header itself

00:16:09.116 --> 00:16:09.906 A:middle
that we declared it from.

00:16:11.366 --> 00:16:15.276 A:middle
Alright, so now those of you

00:16:15.276 --> 00:16:17.106 A:middle
who are following closely here
may have seen a little bit

00:16:17.106 --> 00:16:19.136 A:middle
of a problem: we set
the borderWidth to 5;

00:16:19.576 --> 00:16:21.656 A:middle
we never actually deselect
the previous button.

00:16:24.016 --> 00:16:25.526 A:middle
So what we can do
is to keep track

00:16:25.526 --> 00:16:28.656 A:middle
of the currently
selectedButton and in this case,

00:16:28.716 --> 00:16:32.306 A:middle
I'm going to explicitly say that
it's a weak stored property.

00:16:32.426 --> 00:16:36.286 A:middle
So this is not going to cause,
ah, the- ...extend the lifetime

00:16:36.286 --> 00:16:38.056 A:middle
of that button which
is, after all,

00:16:38.056 --> 00:16:39.176 A:middle
owned by the view hierarchy.

00:16:41.546 --> 00:16:42.856 A:middle
And I'm going to declare

00:16:42.856 --> 00:16:45.736 A:middle
that this is a UIButton
but it's optional.

00:16:46.606 --> 00:16:49.616 A:middle
Because when we first
start out it has no value.

00:16:50.406 --> 00:16:51.866 A:middle
And so, we're going to be able

00:16:51.866 --> 00:16:53.716 A:middle
to check whether it
has a value or not.

00:16:55.986 --> 00:17:00.016 A:middle
We add some code to set the
selectedButton to the sender


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:16:55.986 --> 00:17:00.016 A:middle
We add some code to set the
selectedButton to the sender

00:17:00.616 --> 00:17:02.776 A:middle
at the end of having
assigned it.

00:17:02.776 --> 00:17:11.326 A:middle
And then here we can say "if
selectedButton" then we're going

00:17:11.326 --> 00:17:14.136 A:middle
to go ahead and clear out
the border on that one.

00:17:15.056 --> 00:17:18.856 A:middle
Now this happens to be a object
reference so I could do the same

00:17:18.856 --> 00:17:20.326 A:middle
in Objective-C with a nil value.

00:17:20.646 --> 00:17:23.136 A:middle
But one of the nice things
about optionals in Swift is

00:17:23.136 --> 00:17:24.326 A:middle
that they apply to any type

00:17:24.326 --> 00:17:26.726 A:middle
of value even a Boolean
or a scalar.

00:17:27.346 --> 00:17:30.456 A:middle
So in this particular case,
I'm just going to go ahead

00:17:30.456 --> 00:17:33.656 A:middle
and select the selectedButton's
layer borderWidth to 0.

00:17:33.926 --> 00:17:39.106 A:middle
Now you'll notice the
exclamation mark there.

00:17:39.506 --> 00:17:42.566 A:middle
This is the unwrapping
operator and that says

00:17:42.566 --> 00:17:44.096 A:middle
that if I have an
optional value,

00:17:44.096 --> 00:17:45.756 A:middle
then when I've determined
it has a value,

00:17:45.756 --> 00:17:47.466 A:middle
I get at the actual value.

00:17:47.506 --> 00:17:50.096 A:middle
And if I forgot to check
whether it has a value,

00:17:50.096 --> 00:17:51.786 A:middle
that will cause a
trap if it doesn't.

00:17:52.186 --> 00:17:54.776 A:middle
So this is one of the ways
that Swift makes it safer

00:17:55.086 --> 00:17:58.696 A:middle
to write your apps, because you
can catch these errors earlier

00:17:58.696 --> 00:18:02.526 A:middle
without having to add a lot
of assertions to your code.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:17:58.696 --> 00:18:02.526 A:middle
without having to add a lot
of assertions to your code.

00:18:03.006 --> 00:18:04.556 A:middle
So I think we're
probably good to go here.

00:18:04.556 --> 00:18:06.696 A:middle
Let's go ahead and take a look

00:18:07.046 --> 00:18:09.206 A:middle
and I'm sure I forgot
something somewhere...

00:18:10.326 --> 00:18:11.316 A:middle
"selectED button"!

00:18:11.436 --> 00:18:12.866 A:middle
And that's because
I mistyped it.

00:18:14.136 --> 00:18:15.556 A:middle
So that shows that
this is live right?

00:18:15.556 --> 00:18:16.926 A:middle
I'm not playing a
QuickTime movie up here.

00:18:18.716 --> 00:18:21.276 A:middle
[Laughter] Okay,
so now we're here.

00:18:21.636 --> 00:18:22.796 A:middle
We have our add button.

00:18:23.906 --> 00:18:25.126 A:middle
We bring up the modal sheet.

00:18:26.016 --> 00:18:28.626 A:middle
As we select the various
buttons we can see

00:18:28.626 --> 00:18:31.356 A:middle
that we have the border and
then we do the, the tint,

00:18:31.596 --> 00:18:34.366 A:middle
we tint the buttons down
here and, of course,

00:18:34.496 --> 00:18:36.046 A:middle
the Save button doesn't
yet work.

00:18:36.676 --> 00:18:38.606 A:middle
Now I'm just a UI guy.

00:18:38.606 --> 00:18:40.346 A:middle
So I just make it look pretty.

00:18:40.346 --> 00:18:42.766 A:middle
But to actually do the model
level work we're going to have

00:18:42.766 --> 00:18:44.596 A:middle
to ask one of my colleagues
to come up here in a moment.

00:18:44.596 --> 00:18:47.736 A:middle
First let's take a look at
what we did in this part.

00:18:50.976 --> 00:18:58.556 A:middle
Okay. So what did we just do?

00:18:59.436 --> 00:19:03.376 A:middle
So first of all, we added some
Swift code to an Objective-C app


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:18:59.436 --> 00:19:03.376 A:middle
So first of all, we added some
Swift code to an Objective-C app

00:19:03.596 --> 00:19:05.946 A:middle
and Xcode offered to
create us a bridging header,

00:19:06.396 --> 00:19:08.416 A:middle
which the next action we'll go
onto some more detail about.

00:19:09.686 --> 00:19:12.946 A:middle
We subclassed the Cocoa class-
...Cocoa Touch class in Swift.

00:19:12.946 --> 00:19:15.566 A:middle
In this case it happened to be
a Cocoa Touch class that's part

00:19:15.566 --> 00:19:19.046 A:middle
of the standard libraries
of Cocoa Touch itself.

00:19:19.336 --> 00:19:21.346 A:middle
But it could also be one
of your Objective-C classes

00:19:21.456 --> 00:19:22.056 A:middle
that you've declared.

00:19:23.076 --> 00:19:25.196 A:middle
We used Swift class in
the Interface Builder

00:19:25.196 --> 00:19:27.736 A:middle
and as I hope you saw,
it's exactly like working

00:19:27.736 --> 00:19:28.956 A:middle
with an Objective-C class.

00:19:28.956 --> 00:19:31.356 A:middle
And that's actually a theme
under here that we wanted

00:19:31.356 --> 00:19:34.666 A:middle
to feel like exactly the same
thing; it's interchangable.

00:19:37.096 --> 00:19:41.346 A:middle
And so now to make this a bit
more real in terms of the model,

00:19:41.376 --> 00:19:43.386 A:middle
I'm going to ask my
colleague Dave to come up

00:19:43.386 --> 00:19:46.276 A:middle
and complete the project
here or work on it further.

00:19:47.516 --> 00:19:52.566 A:middle
[ Applause ]

00:19:53.066 --> 00:19:53.216 A:middle
&gt;&gt; Alright.

00:19:53.496 --> 00:19:54.086 A:middle
Thanks Anders.

00:19:54.256 --> 00:19:59.056 A:middle
What we saw is that you
have access to everything

00:19:59.636 --> 00:20:03.466 A:middle
in Cocoa Touch and the power
that you've got in Xcode


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:19:59.636 --> 00:20:03.466 A:middle
in Cocoa Touch and the power
that you've got in Xcode

00:20:03.766 --> 00:20:05.986 A:middle
from Swift without
really doing anything.

00:20:06.466 --> 00:20:07.976 A:middle
But I'm sure what
you're thinking now is

00:20:07.976 --> 00:20:09.246 A:middle
"what about MY code?

00:20:09.646 --> 00:20:11.396 A:middle
What about the Objective-C
code that I have

00:20:11.456 --> 00:20:13.026 A:middle
in MY target in MY app?"

00:20:13.976 --> 00:20:15.106 A:middle
And that's what I
want to show you.

00:20:15.426 --> 00:20:19.466 A:middle
As Anders said, we could
spend a lot of time in slides

00:20:19.466 --> 00:20:21.046 A:middle
and everything else
and I'm actually going

00:20:21.046 --> 00:20:22.176 A:middle
to cut it a little
shorter than he did

00:20:22.286 --> 00:20:23.976 A:middle
and just go straight
into a demo.

00:20:28.346 --> 00:20:30.926 A:middle
And so we come back right
where we were before

00:20:32.206 --> 00:20:34.966 A:middle
and for our purposes the first
thing we want do here is a

00:20:34.966 --> 00:20:37.896 A:middle
little bit of tidy-up,
and that is

00:20:37.896 --> 00:20:39.966 A:middle
to make our UI text
field behave the way

00:20:39.966 --> 00:20:41.386 A:middle
that we want for our user.

00:20:41.576 --> 00:20:43.246 A:middle
It offers a great deal

00:20:43.246 --> 00:20:47.176 A:middle
of configurability using
the delegate pattern.

00:20:47.946 --> 00:20:53.236 A:middle
And to do that we're going to
make NewListController conform

00:20:53.626 --> 00:20:58.976 A:middle
to UITextFieldDelegate,
which is as easy as...


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:21:02.616 --> 00:21:03.376 A:middle
if I could type...

00:21:07.796 --> 00:21:09.956 A:middle
finding our UITextField...

00:21:10.726 --> 00:21:12.166 A:middle
Man, I'm having some time here.

00:21:13.306 --> 00:21:18.756 A:middle
[laughter] It's a
comedy show, I promise.

00:21:19.256 --> 00:21:24.766 A:middle
[laughter]

00:21:25.266 --> 00:21:25.676 A:middle
There we go.

00:21:26.626 --> 00:21:28.976 A:middle
Alright, something to
call out there is-...

00:21:29.516 --> 00:21:32.776 A:middle
[ Applause ]

00:21:33.276 --> 00:21:37.236 A:middle
Success! And that's the
hardest thing I'm going

00:21:37.236 --> 00:21:38.726 A:middle
to do the whole time
I'm up here.

00:21:40.296 --> 00:21:41.656 A:middle
[laughter] So
UITextFieldDelegate,

00:21:42.226 --> 00:21:46.766 A:middle
all we did here was add the
protocol conformance to the end

00:21:46.766 --> 00:21:49.756 A:middle
of a common separated
list after our class.

00:21:50.086 --> 00:21:52.636 A:middle
In our case it's important
because we're actually,

00:21:52.636 --> 00:21:54.386 A:middle
we actually have a superclass.

00:21:54.386 --> 00:21:56.746 A:middle
The superclass is the
first thing in that list

00:21:57.176 --> 00:21:58.626 A:middle
and then our protocols follow.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:22:00.076 --> 00:22:02.606 A:middle
Now that I have managed

00:22:02.606 --> 00:22:06.626 A:middle
to declare textual delegate I'm
actually going to take it easy

00:22:06.626 --> 00:22:09.856 A:middle
for the next part
and just bring in...

00:22:10.346 --> 00:22:12.396 A:middle
the implementation of
TextField should return.

00:22:13.056 --> 00:22:15.336 A:middle
And the only thing we're
doing here is resigning first

00:22:15.336 --> 00:22:18.696 A:middle
responder on our
TextField and returning

00:22:18.696 --> 00:22:20.156 A:middle
to make sure the
keyboard dismisses

00:22:20.156 --> 00:22:21.166 A:middle
when the user hits return.

00:22:22.146 --> 00:22:28.776 A:middle
Not particularly interesting,
but it was just as easy

00:22:28.896 --> 00:22:31.026 A:middle
as it would be in
Objective-C to go ahead

00:22:31.026 --> 00:22:32.136 A:middle
and implement this protocol.

00:22:33.626 --> 00:22:37.696 A:middle
Next, as Anders promised, we are
going to look a little bit more

00:22:37.876 --> 00:22:41.116 A:middle
at the interaction with
the model side of things

00:22:41.386 --> 00:22:43.896 A:middle
and actually implement Save.

00:22:44.686 --> 00:22:46.356 A:middle
The first thing I'm
going to do in-

00:22:47.566 --> 00:22:48.396 A:middle
...who caught the error here?

00:22:49.506 --> 00:22:53.286 A:middle
Somebody knows what I
forgot to do, and that is:

00:22:54.886 --> 00:22:57.066 A:middle
manage to declare it as
a UITextFieldDelegate

00:22:57.066 --> 00:23:00.326 A:middle
but we never actually connected
it and that would have made


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:22:57.066 --> 00:23:00.326 A:middle
but we never actually connected
it and that would have made

00:23:00.326 --> 00:23:01.266 A:middle
for an interesting end.

00:23:04.646 --> 00:23:10.176 A:middle
So now that we've got that set
up I will control-drag over,

00:23:11.116 --> 00:23:17.806 A:middle
manage to hit the button, set it
up as an action, call it "Save".

00:23:20.026 --> 00:23:25.416 A:middle
Now, inside here I
actually want to interact

00:23:25.416 --> 00:23:31.846 A:middle
with the representation of
our documents that we see

00:23:31.896 --> 00:23:34.256 A:middle
in the document list
on the main screen.

00:23:34.666 --> 00:23:37.546 A:middle
And that's a part of our app
target, not a part of ListerKit.

00:23:38.356 --> 00:23:40.516 A:middle
And because of that we have
to take a different approach.

00:23:40.516 --> 00:23:43.036 A:middle
We can't just simply
import our framework in.

00:23:44.006 --> 00:23:47.316 A:middle
And this is where we make use of
the Objective-C bridging header

00:23:47.946 --> 00:23:49.576 A:middle
that Xcode offered
to create for us

00:23:49.716 --> 00:23:52.026 A:middle
when we created the first
Swift file in this project.

00:23:53.646 --> 00:23:59.776 A:middle
So we'll navigate over to
that and it gets created

00:23:59.776 --> 00:24:03.046 A:middle
in the same directory -- or in
the same group, I should say --


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:23:59.776 --> 00:24:03.046 A:middle
in the same directory -- or in
the same group, I should say --

00:24:03.716 --> 00:24:05.356 A:middle
as the Swift file
that we created.

00:24:07.486 --> 00:24:09.646 A:middle
It's not overly interesting
at first.

00:24:09.646 --> 00:24:12.606 A:middle
It simply has a comment
that's very instructive.

00:24:12.946 --> 00:24:16.826 A:middle
This is where we put the imports
for the classes in our target

00:24:17.136 --> 00:24:18.556 A:middle
that we want to expose to Swift.

00:24:19.556 --> 00:24:24.516 A:middle
In our case, it's a single class
and that is our ListInfo class.

00:24:25.746 --> 00:24:30.666 A:middle
This is the representation that
backs the TableView that you see

00:24:30.666 --> 00:24:31.926 A:middle
when the app initially comes up.

00:24:32.446 --> 00:24:37.896 A:middle
We save that and head back to...

00:24:40.346 --> 00:24:43.716 A:middle
really don't need the storyboard
anymore, so, I'm gonna go ahead

00:24:43.716 --> 00:24:47.986 A:middle
and collapse things down and let
us actually focus on the code,

00:24:47.986 --> 00:24:50.806 A:middle
because the wrapping really
kind of gets on my nerves.

00:24:50.806 --> 00:24:52.106 A:middle
That's one of the things
that I like about Swift,

00:24:52.106 --> 00:24:53.726 A:middle
is it's a little more succinct.

00:24:55.566 --> 00:24:58.216 A:middle
So just heading back
down to our Save...

00:24:59.096 --> 00:25:01.826 A:middle
Now that we've pulled in
the bridging header - or,


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:24:59.096 --> 00:25:01.826 A:middle
Now that we've pulled in
the bridging header - or,

00:25:01.826 --> 00:25:03.626 A:middle
now that we've added our class
to the bridging header --

00:25:03.766 --> 00:25:04.886 A:middle
we can actually create one.

00:25:04.886 --> 00:25:06.336 A:middle
I'm going to create
it as a "let"

00:25:06.466 --> 00:25:07.676 A:middle
because it's going
to be constant.

00:25:07.676 --> 00:25:08.896 A:middle
I'm only going to
assign it once.

00:25:10.936 --> 00:25:16.476 A:middle
And so my ListInfo
is equal ListInfo...

00:25:23.176 --> 00:25:26.796 A:middle
...and, of course, I
keep saying "ListInfo"

00:25:28.206 --> 00:25:29.686 A:middle
like we instruct you guys to do

00:25:29.686 --> 00:25:32.586 A:middle
when we're writing Objective-C
code we actually use a prefix.

00:25:33.086 --> 00:25:34.756 A:middle
And I've been writing a
lot of Swift code lately,

00:25:34.756 --> 00:25:37.016 A:middle
so it's not on the
forefront of my mind.

00:25:37.556 --> 00:25:38.746 A:middle
So, our ListInfo...

00:25:40.106 --> 00:25:41.846 A:middle
and it offers us
two constructors.

00:25:41.846 --> 00:25:43.386 A:middle
One of them takes URL.

00:25:43.386 --> 00:25:44.956 A:middle
The other takes an
NSMetadataItem

00:25:44.956 --> 00:25:46.776 A:middle
for that iCloud support
we were talking about.

00:25:47.296 --> 00:25:48.376 A:middle
We're going to go
with the URL one.

00:25:49.106 --> 00:25:50.836 A:middle
I could construct
the URL right here.

00:25:51.336 --> 00:25:53.206 A:middle
A little bit of forethought,
thinking forward,

00:25:53.206 --> 00:25:54.986 A:middle
I know that I'm actually
going to want

00:25:54.986 --> 00:25:58.266 A:middle
to revise this a little bit
later and iterate on it.

00:25:58.676 --> 00:25:59.496 A:middle
So I'm going to set

00:25:59.496 --> 00:26:02.826 A:middle
up a computed property
as a convenience.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:25:59.496 --> 00:26:02.826 A:middle
up a computed property
as a convenience.

00:26:03.386 --> 00:26:08.766 A:middle
Now to declare a computed
property is pretty similar

00:26:08.766 --> 00:26:11.716 A:middle
to the way that we
define a stored property.

00:26:12.246 --> 00:26:15.506 A:middle
And we'll go with var.

00:26:15.506 --> 00:26:16.996 A:middle
I'm going to call it "fileURL".

00:26:18.146 --> 00:26:19.666 A:middle
Now with a computed
property we do have

00:26:19.706 --> 00:26:22.676 A:middle
to be explicit about our type.

00:26:23.566 --> 00:26:26.426 A:middle
I'm going to make it
optional and that's

00:26:26.426 --> 00:26:29.036 A:middle
because if the user actually
hasn't provided us a value

00:26:29.036 --> 00:26:32.996 A:middle
in the TextField yet, I can't
actually construct a valid URL.

00:26:34.336 --> 00:26:38.156 A:middle
I've got an implementation ready
that just happens to make use

00:26:38.156 --> 00:26:41.046 A:middle
of the list coordinator
from down in the ListerKit.

00:26:43.426 --> 00:26:47.676 A:middle
And after defining the computed
property I can come down

00:26:47.916 --> 00:26:50.026 A:middle
and make use of it right away.

00:26:50.076 --> 00:26:54.636 A:middle
And you'll notice as Anders
had mentioned earlier we don't

00:26:54.696 --> 00:26:56.896 A:middle
actually have to
explicitly refer to self

00:26:56.956 --> 00:26:58.146 A:middle
when accessing our property.

00:26:59.496 --> 00:27:02.986 A:middle
We set up a few pieces of
information that we've captured


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:26:59.496 --> 00:27:02.986 A:middle
We set up a few pieces of
information that we've captured

00:27:02.986 --> 00:27:10.916 A:middle
for the user so we'll get the
name from our nameFields.text

00:27:12.146 --> 00:27:17.446 A:middle
and the label is
going to be equal

00:27:17.446 --> 00:27:22.606 A:middle
to our selectedLabel
and that looks good.

00:27:24.226 --> 00:27:27.026 A:middle
So now that we've set it up, we
actually want to save this out

00:27:27.396 --> 00:27:33.486 A:middle
and ListInfo provides us
a convenience for that.

00:27:33.736 --> 00:27:39.096 A:middle
And we will createAndSaveWith
CompletionHandler.

00:27:39.096 --> 00:27:41.946 A:middle
And this CompletionHandler
is actually going to call-

00:27:41.946 --> 00:27:43.226 A:middle
...is going to come back to us

00:27:43.756 --> 00:27:47.746 A:middle
with a Bool letting
us know whether

00:27:47.746 --> 00:27:49.276 A:middle
or not the save was successful.

00:27:50.396 --> 00:27:53.826 A:middle
And I could use what code
completion's suggesting here

00:27:54.446 --> 00:27:54.996 A:middle
and fill

00:27:54.996 --> 00:28:01.096 A:middle
out my completionHandler closure
inside of the parentheses.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:27:54.996 --> 00:28:01.096 A:middle
out my completionHandler closure
inside of the parentheses.

00:28:01.096 --> 00:28:04.096 A:middle
But because it's the
last argument in the call

00:28:04.246 --> 00:28:10.206 A:middle
and because it's a closure and
it's going to be a little long,

00:28:10.206 --> 00:28:12.196 A:middle
I'm actually going to make use

00:28:12.196 --> 00:28:14.736 A:middle
of Swift's trailing
closure syntax.

00:28:16.046 --> 00:28:18.246 A:middle
And in this case I don't
even have to put the parens

00:28:18.246 --> 00:28:22.176 A:middle
after the method call
because our createAndSaveWith

00:28:22.176 --> 00:28:23.666 A:middle
CompletionHandler
actually doesn't take any

00:28:23.666 --> 00:28:24.886 A:middle
other arguments.

00:28:26.036 --> 00:28:32.046 A:middle
So inside of here I will note
the variable name that's being

00:28:32.046 --> 00:28:33.336 A:middle
passed in, which is success.

00:28:35.846 --> 00:28:37.146 A:middle
...having more typing problems

00:28:37.146 --> 00:28:38.446 A:middle
so that you guys can
get a good laugh.

00:28:38.756 --> 00:28:42.346 A:middle
And I'll just check the value
and for now I'm just going

00:28:42.376 --> 00:28:45.126 A:middle
to print a little debug message

00:28:45.126 --> 00:28:46.836 A:middle
to let me know that
it was saved.

00:28:50.686 --> 00:28:56.496 A:middle
And just like Cancel, we want to
get out of the user's way now,

00:28:56.496 --> 00:28:58.016 A:middle
so we'll go ahead and dismiss.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:29:01.176 --> 00:29:05.476 A:middle
So let's build and run, see

00:29:05.476 --> 00:29:07.066 A:middle
that everything is doing
what we want it to do,

00:29:07.066 --> 00:29:09.096 A:middle
make sure that everything
is good to go.

00:29:12.666 --> 00:29:15.396 A:middle
Bring it up...

00:29:15.926 --> 00:29:16.676 A:middle
Let's see, I need to go

00:29:16.676 --> 00:29:18.286 A:middle
to the hardware store
a little bit later.

00:29:20.026 --> 00:29:23.126 A:middle
And so we'll name our
list hardware, hit return.

00:29:23.266 --> 00:29:24.766 A:middle
Keyboard goes away;
that's a good sign.

00:29:25.846 --> 00:29:29.236 A:middle
The hardware store I
frequent actually uses orange

00:29:29.236 --> 00:29:31.096 A:middle
in the logo rather
heavily, so that's going

00:29:31.096 --> 00:29:32.456 A:middle
to help me remember
what's going on there.

00:29:33.186 --> 00:29:34.686 A:middle
And I'll go ahead and
hit the Save button.

00:29:36.836 --> 00:29:39.296 A:middle
That's not really
what we wanted.

00:29:39.296 --> 00:29:42.206 A:middle
I really wanted to see my
hardware list show up here.

00:29:43.076 --> 00:29:44.566 A:middle
Did it actually save?

00:29:44.826 --> 00:29:46.546 A:middle
I'll go over and check
the debug console.

00:29:47.896 --> 00:29:54.266 A:middle
Indeed it did save and just
for fun I'll actually stop

00:29:54.266 --> 00:29:55.486 A:middle
and run the app again.

00:29:56.026 --> 00:29:58.296 A:middle
And you'll see that it actually
did save and get created.

00:29:58.376 --> 00:30:01.436 A:middle
But we never passed anything
back to our document list


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:29:58.376 --> 00:30:01.436 A:middle
But we never passed anything
back to our document list

00:30:02.296 --> 00:30:06.256 A:middle
to let it know that we created
anything new and we kind

00:30:06.256 --> 00:30:08.076 A:middle
of wanted this to
not be sitting there

00:30:08.076 --> 00:30:11.576 A:middle
and polling the file system
over and over and over again,

00:30:11.576 --> 00:30:13.306 A:middle
just looking for new
files that might show up.

00:30:14.526 --> 00:30:16.536 A:middle
So for our purposes,
we're going to take a page

00:30:16.536 --> 00:30:19.196 A:middle
out of UITextField's book
and we're actually going

00:30:19.196 --> 00:30:22.516 A:middle
to use Delegation to
pass information back

00:30:22.516 --> 00:30:23.976 A:middle
to the ViewController
that presented us.

00:30:25.166 --> 00:30:28.896 A:middle
The first step there is
usually to define a protocol

00:30:29.746 --> 00:30:31.476 A:middle
that we expect our
delegate to conform to.

00:30:32.416 --> 00:30:37.816 A:middle
And in Swift we can do that just
as easily as declaring a class

00:30:37.816 --> 00:30:39.086 A:middle
or a struct or anything else.

00:30:39.516 --> 00:30:40.566 A:middle
We'll just start with the

00:30:40.566 --> 00:30:44.896 A:middle
"protocol" keyword (that I
actually spelled correctly)

00:30:46.236 --> 00:30:49.726 A:middle
and NewListControllerDelegate.

00:30:53.096 --> 00:30:57.886 A:middle
And I already have a method that
I want my delegate to conform

00:30:57.886 --> 00:31:00.946 A:middle
to that I've prepared that
just takes a new ListController


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:30:57.886 --> 00:31:00.946 A:middle
to that I've prepared that
just takes a new ListController

00:31:01.326 --> 00:31:05.376 A:middle
and a ListInfo letting it
know what's been created

00:31:05.376 --> 00:31:06.006 A:middle
and done over here.

00:31:06.666 --> 00:31:10.226 A:middle
Now at this point this protocol
is visible to my Swift code

00:31:11.026 --> 00:31:13.856 A:middle
but I want to make sure that
my Objective-C code can see it

00:31:13.856 --> 00:31:14.296 A:middle
as well.

00:31:15.676 --> 00:31:23.386 A:middle
To do that it's as simple as
adding an attribute at Obj-C

00:31:23.386 --> 00:31:25.326 A:middle
and this is going
to go ahead and say,

00:31:25.326 --> 00:31:27.076 A:middle
"even though this
is all Swift here,

00:31:27.406 --> 00:31:29.146 A:middle
we do want to make
this available

00:31:30.346 --> 00:31:32.306 A:middle
to Objective-C a
little bit later on."

00:31:33.856 --> 00:31:38.066 A:middle
So now that I have a delegate
protocol I'll actually define a

00:31:38.066 --> 00:31:42.046 A:middle
delegate and we'll make it weak

00:31:42.346 --> 00:31:45.136 A:middle
because we don't
really want to own it.

00:31:45.136 --> 00:31:46.536 A:middle
We don't want to
extend its lifetime.

00:31:48.776 --> 00:31:54.036 A:middle
And I can declare
it as being just

00:31:54.036 --> 00:31:55.756 A:middle
of the NewListControllerDelegate
type.

00:31:55.826 --> 00:32:00.306 A:middle
I don't have to do something
like ID and angle brackets


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:31:55.826 --> 00:32:00.306 A:middle
I don't have to do something
like ID and angle brackets

00:32:00.306 --> 00:32:02.336 A:middle
around my protocol to
indicate what's going on here.

00:32:02.426 --> 00:32:06.846 A:middle
I can simply have a property
that is of this delegate type.

00:32:07.676 --> 00:32:08.886 A:middle
It's going to be optional

00:32:08.886 --> 00:32:11.206 A:middle
because I may not
have a delegate.

00:32:13.356 --> 00:32:16.986 A:middle
So now that we've defined a
delegate property I think maybe

00:32:16.986 --> 00:32:18.636 A:middle
we ought to do something
a little more useful

00:32:18.946 --> 00:32:20.776 A:middle
than printing a debug
statement down here.

00:32:20.776 --> 00:32:24.326 A:middle
And for that we're going to
reach out to our delegate

00:32:26.096 --> 00:32:30.806 A:middle
and I'm going to make use
of another Swift feature,

00:32:31.376 --> 00:32:33.096 A:middle
which is optional chaining.

00:32:33.596 --> 00:32:34.986 A:middle
So the delegate is an optional.

00:32:35.566 --> 00:32:37.436 A:middle
It may or may not have a value.

00:32:39.376 --> 00:32:42.216 A:middle
By adding a question mark
here before actually calling

00:32:42.216 --> 00:32:46.116 A:middle
out to the method that we want
to invoke, I'm going to be able

00:32:46.116 --> 00:32:48.126 A:middle
to say, "IF I have a delegate --

00:32:48.226 --> 00:32:51.186 A:middle
if there is a value
there -- make this call.

00:32:52.146 --> 00:32:54.076 A:middle
If there's not, don't
do anything."

00:32:56.516 --> 00:33:01.846 A:middle
[ Applause ]


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:32:56.516 --> 00:33:01.846 A:middle
[ Applause ]

00:33:02.346 --> 00:33:04.566 A:middle
And now I'm trying to remember
what the name of it was.

00:33:04.626 --> 00:33:05.186 A:middle
Ah, there we go.

00:33:06.586 --> 00:33:12.376 A:middle
Pass my self and the
ListInfo that we just created.

00:33:15.786 --> 00:33:18.016 A:middle
(REALLY not much of a typist,
in case you can't tell.)

00:33:18.546 --> 00:33:24.016 A:middle
And at this point we've wrapped
up the Swift implementation

00:33:24.486 --> 00:33:26.696 A:middle
of this, but we've
defined this delegate.

00:33:26.736 --> 00:33:29.826 A:middle
Now we actually need our
Objective-C code to be able

00:33:29.826 --> 00:33:31.866 A:middle
to see the Swift code
we've just put together

00:33:33.026 --> 00:33:33.906 A:middle
and interact with it.

00:33:35.086 --> 00:33:39.006 A:middle
To do that I'm going to head
back over to the document-

00:33:39.556 --> 00:33:42.006 A:middle
...the, the controller
for the document list,

00:33:43.336 --> 00:33:49.276 A:middle
and inside of here we're
brought to- ...I mean,

00:33:49.276 --> 00:33:50.986 A:middle
what comes to your
mind is the fact

00:33:50.986 --> 00:33:55.136 A:middle
that the way I make one object
in Objective-C available

00:33:55.136 --> 00:33:57.716 A:middle
and visible to another object
is by importing its header.

00:33:58.676 --> 00:34:01.196 A:middle
Well, with Swift we
don't have headers.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:33:58.676 --> 00:34:01.196 A:middle
Well, with Swift we
don't have headers.

00:34:02.106 --> 00:34:05.306 A:middle
We think that's a good thing
within Swift, but we've got

00:34:05.306 --> 00:34:09.626 A:middle
to find a way to bridge the
gap back to Objective-C.

00:34:10.376 --> 00:34:14.176 A:middle
And so in that case Xcode's
got our back and is going

00:34:14.176 --> 00:34:17.426 A:middle
to provide us with
a generated header

00:34:18.585 --> 00:34:21.815 A:middle
that contains the entirety
of our Swift interface.

00:34:24.476 --> 00:34:26.376 A:middle
Being generated,
obviously it has

00:34:26.376 --> 00:34:30.476 A:middle
to have a well-constructed
naming scheme, and that's going

00:34:30.516 --> 00:34:32.216 A:middle
to be our product name --

00:34:33.216 --> 00:34:38.656 A:middle
which in this case
is "Lister-Swift.h".

00:34:39.996 --> 00:34:42.456 A:middle
And so this is a generated
header, so I'm going to go ahead

00:34:42.456 --> 00:34:44.096 A:middle
and take the time to
build, to make sure

00:34:44.096 --> 00:34:48.856 A:middle
that we've got the most
up-to-date items in it.

00:34:49.446 --> 00:34:55.146 A:middle
And after importing that we will
come over here and we're going

00:34:55.146 --> 00:34:56.946 A:middle
to go through basically
the same process

00:34:56.946 --> 00:35:00.746 A:middle
that you would ordinarily to
implement any of the Cocoa


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:34:56.946 --> 00:35:00.746 A:middle
that you would ordinarily to
implement any of the Cocoa

00:35:00.746 --> 00:35:03.376 A:middle
or Cocoa Touch delegates
on your own class.

00:35:03.876 --> 00:35:10.946 A:middle
We'll add our protocol
conformance and we can pull

00:35:10.946 --> 00:35:12.296 A:middle
in our
NewListControllerDelegate.

00:35:13.906 --> 00:35:18.616 A:middle
I'm going to choose to
use the jump bar to head

00:35:18.616 --> 00:35:20.846 A:middle
down to an appropriate
place I feel

00:35:20.946 --> 00:35:22.476 A:middle
to go ahead and implement this.

00:35:25.086 --> 00:35:28.486 A:middle
And as I code complete here

00:35:30.896 --> 00:35:34.396 A:middle
with the NewListController
didCreateListInfo, you'll notice

00:35:34.396 --> 00:35:37.616 A:middle
that even though we declared
this completely in within Swift,

00:35:37.616 --> 00:35:42.396 A:middle
what we get is a syntax
that matches what I'd expect

00:35:42.396 --> 00:35:45.636 A:middle
from Objective-C so that
everything still feels natural;

00:35:45.636 --> 00:35:48.596 A:middle
everything feels like a first
class citizen in its place.

00:35:51.286 --> 00:35:53.336 A:middle
Happen to have the
implementation...

00:35:56.406 --> 00:35:57.806 A:middle
Wellllll...

00:35:58.156 --> 00:36:00.616 A:middle
The implementation of
the last thing ready.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:35:58.156 --> 00:36:00.616 A:middle
The implementation of
the last thing ready.

00:36:01.566 --> 00:36:03.956 A:middle
In this case what we're really
doing is just updating our data

00:36:03.956 --> 00:36:05.916 A:middle
source and then refreshing
the TableView

00:36:05.916 --> 00:36:07.226 A:middle
with a little bit
of new information.

00:36:09.736 --> 00:36:13.226 A:middle
And the very last thing
here, or the final step,

00:36:13.326 --> 00:36:15.596 A:middle
is that we actually
need this ViewController

00:36:15.596 --> 00:36:19.686 A:middle
to make itself the delegate
for our new ListController.

00:36:21.146 --> 00:36:22.616 A:middle
We're using a modal segue,

00:36:22.976 --> 00:36:25.016 A:middle
so why not do it
in prepareForSegue?

00:36:26.456 --> 00:36:28.726 A:middle
Down here we'll just
check to make sure

00:36:28.726 --> 00:36:29.856 A:middle
that it's the right segue.

00:36:30.336 --> 00:36:34.136 A:middle
We'll grab the newListController
and we'll set ourselves --

00:36:34.276 --> 00:36:36.356 A:middle
in this case our
ListDocumentsViewController --

00:36:36.906 --> 00:36:37.606 A:middle
as the delegate.

00:36:39.536 --> 00:36:46.936 A:middle
At this point I fully expect
things to do what I want.

00:36:51.586 --> 00:37:01.366 A:middle
And... Coming up with another
list, "WWDC Must Haves".


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:36:51.586 --> 00:37:01.366 A:middle
And... Coming up with another
list, "WWDC Must Haves".

00:37:03.336 --> 00:37:04.646 A:middle
Not really sure what
those are yet,

00:37:04.676 --> 00:37:06.426 A:middle
but I'm pretty sure I'm
going to think something up.

00:37:07.876 --> 00:37:11.056 A:middle
And this time it
actually comes through,

00:37:11.436 --> 00:37:13.326 A:middle
shows up in our
DocumentViewController

00:37:13.326 --> 00:37:16.986 A:middle
and just for, you know,
proof's sake I can come into it;

00:37:16.986 --> 00:37:17.916 A:middle
I can change it around.

00:37:17.916 --> 00:37:19.756 A:middle
I really like this salmon
color that they're using

00:37:19.756 --> 00:37:21.106 A:middle
for the Apple badges this year.

00:37:21.106 --> 00:37:22.976 A:middle
So I'm going to actually
pick that

00:37:23.776 --> 00:37:28.976 A:middle
and that's integrating our code.

00:37:29.516 --> 00:37:36.586 A:middle
[ Applause ]

00:37:37.086 --> 00:37:39.506 A:middle
And just to head back to
the slides for a second,

00:37:41.106 --> 00:37:44.786 A:middle
what we've just seen here
is that it's very easy

00:37:44.786 --> 00:37:47.326 A:middle
to expose our Objective-C
code to Swift.

00:37:47.626 --> 00:37:49.766 A:middle
Simply import whatever
headers you want

00:37:50.156 --> 00:37:52.736 A:middle
into the bridging header and
they'll be made available

00:37:52.736 --> 00:37:53.986 A:middle
to the Swift in your target.

00:37:55.696 --> 00:37:59.106 A:middle
We defined a protocol in
Swift which was as easy

00:37:59.106 --> 00:38:00.736 A:middle
as defining a protocol
in Objective-C.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:37:59.106 --> 00:38:00.736 A:middle
as defining a protocol
in Objective-C.

00:38:02.146 --> 00:38:06.646 A:middle
And finally, we've exposed
that protocol and the class

00:38:06.646 --> 00:38:08.846 A:middle
that we just created
in Swift back

00:38:08.846 --> 00:38:10.456 A:middle
to the Objective-C
code in our target.

00:38:10.456 --> 00:38:13.206 A:middle
And we actually didn't
have to do anything there.

00:38:13.316 --> 00:38:16.256 A:middle
Xcode did the generation
of the header

00:38:16.626 --> 00:38:17.936 A:middle
that provided that interface.

00:38:19.216 --> 00:38:25.176 A:middle
So just to reiterate a little
bit more when we want to go

00:38:25.176 --> 00:38:27.326 A:middle
from our Objective-C headers

00:38:27.676 --> 00:38:31.636 A:middle
and make our Objective-C objects
available to Swift we're going

00:38:31.636 --> 00:38:32.466 A:middle
through the bridging header.

00:38:33.676 --> 00:38:36.156 A:middle
This is going to be
created- ...Xcode will offer

00:38:36.156 --> 00:38:37.656 A:middle
to create this for
you automatically

00:38:37.696 --> 00:38:40.896 A:middle
when you add a Swift file to
an existing Objective-C target

00:38:41.506 --> 00:38:44.186 A:middle
or an Objective-C file to
an existing Swift target.

00:38:46.166 --> 00:38:52.686 A:middle
When we want to get our
Swift interface exposed

00:38:52.686 --> 00:38:54.426 A:middle
to our Objective-C
implementation,

00:38:55.036 --> 00:38:56.966 A:middle
there we're looking at
the generated header

00:38:56.966 --> 00:38:59.456 A:middle
that Xcode provides and
this is going to be named

00:38:59.456 --> 00:39:02.926 A:middle
after our product
and it's going to be


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:38:59.456 --> 00:39:02.926 A:middle
after our product
and it's going to be

00:39:02.926 --> 00:39:05.576 A:middle
"our product name
dash Swift dot h".

00:39:07.076 --> 00:39:09.256 A:middle
One last thing to
remember about these,

00:39:12.316 --> 00:39:17.696 A:middle
is that the bridging header
is created for you by Xcode

00:39:18.116 --> 00:39:20.346 A:middle
but you own it from
that point forward.

00:39:20.526 --> 00:39:21.916 A:middle
So it should be something
you check

00:39:21.916 --> 00:39:23.366 A:middle
into your source control system.

00:39:23.826 --> 00:39:28.636 A:middle
It should be something that
you maintain, you manage

00:39:28.976 --> 00:39:31.866 A:middle
and it's there so
that you only expose

00:39:31.866 --> 00:39:34.186 A:middle
to Swift what you want
to expose to Swift.

00:39:35.096 --> 00:39:37.206 A:middle
In the case of the generated
header, it's just that.

00:39:37.386 --> 00:39:39.466 A:middle
It's generated as part
of the build process.

00:39:39.466 --> 00:39:42.966 A:middle
It's going to contain your
com- ...the complete interface

00:39:43.656 --> 00:39:46.306 A:middle
for the Swift files
within your target.

00:39:46.736 --> 00:39:48.186 A:middle
And those are going to
be readily available

00:39:48.186 --> 00:39:50.346 A:middle
to Objective-C simply by
importing that header.

00:39:51.896 --> 00:39:55.076 A:middle
So at this point to talk
with you a little bit more

00:39:55.106 --> 00:39:59.226 A:middle
about what you can do with
frameworks in your product-

00:39:59.526 --> 00:40:02.276 A:middle
...in your projects, I'd like to
invite my colleague Jordan up.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:39:59.526 --> 00:40:02.276 A:middle
...in your projects, I'd like to
invite my colleague Jordan up.

00:40:03.516 --> 00:40:06.126 A:middle
[ Applause ]

00:40:06.626 --> 00:40:07.076 A:middle
&gt;&gt; Thanks Dave.

00:40:09.246 --> 00:40:11.746 A:middle
Alright, so we've seen
how easy it is to deal

00:40:11.746 --> 00:40:13.756 A:middle
with integrating your Swift code

00:40:13.756 --> 00:40:15.786 A:middle
into an existing
Objective-C app.

00:40:16.776 --> 00:40:19.046 A:middle
And Xcode pretty much takes
care of all the details for you.

00:40:19.046 --> 00:40:20.426 A:middle
It's available in
Interface Builder.

00:40:20.426 --> 00:40:21.906 A:middle
It's going to show
up in the simulator.

00:40:21.906 --> 00:40:23.856 A:middle
Everything works just fine.

00:40:24.046 --> 00:40:25.696 A:middle
So I'd like to move a
step down in the hierarchy

00:40:25.696 --> 00:40:26.706 A:middle
and look at the framework.

00:40:31.706 --> 00:40:34.306 A:middle
So at this point we've been
working pretty much the entire

00:40:34.306 --> 00:40:36.866 A:middle
time up in this Lister
part of the application,

00:40:37.066 --> 00:40:38.596 A:middle
which is the actual
application target.

00:40:39.206 --> 00:40:41.226 A:middle
Now we're going to
move down to ListerKit

00:40:41.226 --> 00:40:44.206 A:middle
which handles the model and the
object graph for this target.

00:40:44.716 --> 00:40:47.036 A:middle
And specifically we're going
to add a new functionality:

00:40:47.266 --> 00:40:50.356 A:middle
the ability to add
attachments to every list item,

00:40:50.676 --> 00:40:54.646 A:middle
something like, oh, a
photo or a voice recording.

00:40:54.646 --> 00:40:58.266 A:middle
To do this in Objective-C
you would create a new class,

00:40:58.606 --> 00:41:01.226 A:middle
add it to your object graph
by adding a new property


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:40:58.606 --> 00:41:01.226 A:middle
add it to your object graph
by adding a new property

00:41:01.346 --> 00:41:04.056 A:middle
and then setting up an interface
to mange it and we're going

00:41:04.056 --> 00:41:06.156 A:middle
to do the exact same
thing but using Swift.

00:41:06.156 --> 00:41:10.076 A:middle
So I'll start here by
going to File, New File

00:41:10.076 --> 00:41:13.546 A:middle
and this time let's use the
Cocoa Touch class template.

00:41:13.546 --> 00:41:17.346 A:middle
I can name this
APLListItemAttachment.

00:41:18.226 --> 00:41:21.096 A:middle
Subclass of NSObject and the
language, of course, is Swift.

00:41:22.786 --> 00:41:23.426 A:middle
I make sure that it's

00:41:23.426 --> 00:41:25.506 A:middle
in the ListerKit
target and click Create.

00:41:25.506 --> 00:41:29.826 A:middle
You notice here that
Xcode did not offer

00:41:29.826 --> 00:41:31.446 A:middle
to create a bridging
header for us.

00:41:31.956 --> 00:41:34.666 A:middle
This is because we're working
with a framework target.

00:41:35.286 --> 00:41:37.576 A:middle
In a framework you
already have a header

00:41:37.576 --> 00:41:39.826 A:middle
that specifies the entire
contents of the framework.

00:41:40.336 --> 00:41:41.416 A:middle
That's your umbrella header.

00:41:42.236 --> 00:41:43.986 A:middle
So when you're working
with a framework target

00:41:43.986 --> 00:41:46.536 A:middle
in Swift everything
that's available

00:41:46.536 --> 00:41:49.116 A:middle
in your umbrella header will
automatically be visible

00:41:49.116 --> 00:41:51.586 A:middle
to the Swift code,
no work required.

00:41:54.616 --> 00:41:56.676 A:middle
So we're going to want
attachment objects to persist.

00:41:56.826 --> 00:41:59.396 A:middle
So the very first thing I'm
going to do is add a conformance

00:41:59.396 --> 00:42:02.376 A:middle
to a standard Cocoa
Touch protocol, NSCoding.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:41:59.396 --> 00:42:02.376 A:middle
to a standard Cocoa
Touch protocol, NSCoding.

00:42:03.906 --> 00:42:05.516 A:middle
Attachments are made
up of two things:

00:42:05.836 --> 00:42:08.686 A:middle
their data (which will I
represent using NSData)

00:42:08.906 --> 00:42:09.506 A:middle
and their type.

00:42:10.056 --> 00:42:12.306 A:middle
For types of data
Cocoa Touch likes

00:42:12.346 --> 00:42:16.066 A:middle
to use uniform type identifiers,
which are a very general way

00:42:16.066 --> 00:42:17.696 A:middle
to represent file and data types

00:42:17.696 --> 00:42:19.996 A:middle
that the user just
stored as Strings.

00:42:21.646 --> 00:42:24.486 A:middle
The next thing to do here
is to declare an initializer

00:42:24.696 --> 00:42:27.746 A:middle
and that just takes the
data and type from outside

00:42:27.746 --> 00:42:30.166 A:middle
and will assign them
into our own fields.

00:42:30.396 --> 00:42:32.816 A:middle
But we do need to be
careful because the data

00:42:32.816 --> 00:42:36.056 A:middle
that we are given might
be an NS mutable data

00:42:36.056 --> 00:42:38.086 A:middle
and somebody might
try to change it

00:42:38.086 --> 00:42:39.676 A:middle
after they've created
our attachment.

00:42:40.306 --> 00:42:43.556 A:middle
So in order to work around this,
we need to call the copy method.

00:42:44.786 --> 00:42:49.006 A:middle
However, copy returns
ID in Objective-C

00:42:49.246 --> 00:42:50.496 A:middle
and in Swift that's
going to come

00:42:50.546 --> 00:42:52.406 A:middle
through as the Any object type.

00:42:53.276 --> 00:42:57.686 A:middle
We can't go directly from any
object to NSData in Swift,

00:42:58.096 --> 00:42:59.776 A:middle
because that's not
guaranteed to be safe.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:43:00.306 --> 00:43:00.996 A:middle
So instead, we have

00:43:00.996 --> 00:43:03.966 A:middle
to explicitly tell the
compiler to do a cast here.

00:43:03.966 --> 00:43:07.426 A:middle
And this is important, because
if anybody ever implements the

00:43:07.426 --> 00:43:09.006 A:middle
copy method incorrectly

00:43:09.706 --> 00:43:12.676 A:middle
and doesn't return an NSData
we would much rather find

00:43:12.676 --> 00:43:15.766 A:middle
out about it right here in the
initializer than crash somewhere

00:43:15.766 --> 00:43:17.296 A:middle
down the line when
we try to use it.

00:43:18.696 --> 00:43:21.656 A:middle
On the other hand, we can
just assign the type directly

00:43:21.906 --> 00:43:25.456 A:middle
and this is because
strings in Swift are values.

00:43:26.336 --> 00:43:29.046 A:middle
Unlike NSString, every
Swift string has an

00:43:29.046 --> 00:43:30.226 A:middle
independent existence.

00:43:30.496 --> 00:43:33.356 A:middle
And when you assign across
using the equal operator you get

00:43:33.356 --> 00:43:34.506 A:middle
independent strings.

00:43:34.826 --> 00:43:36.406 A:middle
So, whatever somebody
does over here

00:43:36.406 --> 00:43:39.666 A:middle
to their string won't affect
your string over here.

00:43:40.516 --> 00:43:44.596 A:middle
[ Applause ]

00:43:45.096 --> 00:43:47.456 A:middle
So next I need to implement
the NSCoding protocol.

00:43:47.516 --> 00:43:48.906 A:middle
(Let's close this
for a bit more room.)

00:43:49.906 --> 00:43:51.576 A:middle
And here we can co- (ah!)

00:43:52.186 --> 00:43:55.026 A:middle
...code complete here, no
code completion, awesome.

00:43:57.036 --> 00:44:01.596 A:middle
So here I'm implementing
the NSCoder initializer


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:43:57.036 --> 00:44:01.596 A:middle
So here I'm implementing
the NSCoder initializer

00:44:01.926 --> 00:44:03.706 A:middle
and you'll notice something
a little funny here.

00:44:04.006 --> 00:44:08.596 A:middle
In Objective-C we'd have the
method named initWithCoder.

00:44:08.906 --> 00:44:11.296 A:middle
But in Swift we have an
initializer that's just

00:44:11.296 --> 00:44:12.286 A:middle
init coder.

00:44:13.236 --> 00:44:16.096 A:middle
So in order for more
consistency in the Swift world,

00:44:16.556 --> 00:44:19.316 A:middle
where object creation syntax
is a little different,

00:44:19.936 --> 00:44:23.246 A:middle
an init method from
Objective-C that starts with

00:44:23.246 --> 00:44:27.936 A:middle
"initWith" will come into
Swift with the "With" dropped.

00:44:28.166 --> 00:44:30.836 A:middle
This ensures a consistent
world with Objective-C.

00:44:33.956 --> 00:44:36.086 A:middle
Sure, the implementation of
this is pretty much the same

00:44:36.086 --> 00:44:37.066 A:middle
as what you'd expect.

00:44:37.486 --> 00:44:39.326 A:middle
Just call decodeObjectForKey

00:44:39.616 --> 00:44:42.436 A:middle
and again explicitly
downcasting to the type we want.

00:44:42.786 --> 00:44:44.986 A:middle
If somebody hands us a
bad archive we'll find

00:44:44.986 --> 00:44:48.266 A:middle
out about it now rather
than crashing later on.

00:44:50.166 --> 00:44:51.106 A:middle
Finally, the last thing

00:44:51.106 --> 00:44:54.086 A:middle
to do here is implement
the encodeWithCoder method

00:44:54.686 --> 00:44:57.716 A:middle
and this one does not
get any name changes

00:44:57.756 --> 00:45:00.746 A:middle
because that is limited
specifically to initializers.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:44:57.756 --> 00:45:00.746 A:middle
because that is limited
specifically to initializers.

00:45:01.496 --> 00:45:03.816 A:middle
And the implementation of
this, again, is very simple.

00:45:03.856 --> 00:45:07.666 A:middle
We call encodeObjectForKey with
both the data and the type.

00:45:09.316 --> 00:45:12.316 A:middle
And that's it; this is an
entire Swift model object

00:45:12.316 --> 00:45:13.956 A:middle
and it fits on one slide.

00:45:13.956 --> 00:45:17.536 A:middle
I didn't do anything crazy
or confusing here beyond some

00:45:17.536 --> 00:45:20.856 A:middle
of the things you need to do to
be a good Cocoa Touch citizen.

00:45:22.516 --> 00:45:27.586 A:middle
[ Applause ]

00:45:28.086 --> 00:45:30.396 A:middle
The next step, of course, is to
add this into our object graph.

00:45:30.736 --> 00:45:32.276 A:middle
So I go back to our
Objective-C header

00:45:32.276 --> 00:45:34.026 A:middle
and now we have a
bit of a problem.

00:45:34.296 --> 00:45:36.976 A:middle
Because last time that we
wanted to access Swift code

00:45:36.976 --> 00:45:40.836 A:middle
from Objective-C what we did
is import the generated header

00:45:40.836 --> 00:45:43.266 A:middle
into the Objective-C file.

00:45:43.266 --> 00:45:45.086 A:middle
But we can't do that here

00:45:45.086 --> 00:45:47.346 A:middle
because the generated
header depends on the Swift.

00:45:47.786 --> 00:45:50.816 A:middle
And the Swift reads the
entire public contents

00:45:50.816 --> 00:45:52.796 A:middle
of our framework (via
the umbrella header)

00:45:53.136 --> 00:45:54.976 A:middle
and that includes this
header right here.

00:45:55.946 --> 00:45:58.376 A:middle
So instead, I use
exactly the same mechanism

00:45:58.376 --> 00:45:59.816 A:middle
that I have in Objective-C.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:46:00.306 --> 00:46:01.696 A:middle
This is what we use
to break cycles.

00:46:01.696 --> 00:46:04.326 A:middle
It's a forward declaration
using @class

00:46:05.196 --> 00:46:07.546 A:middle
and I can forward-declare
the Swift class just

00:46:07.546 --> 00:46:09.206 A:middle
like I would any
Objective-C class.

00:46:09.806 --> 00:46:11.786 A:middle
And now I am perfectly able

00:46:11.786 --> 00:46:14.596 A:middle
to create a property here
using the attachment.

00:46:16.806 --> 00:46:19.816 A:middle
The last thing to do, of course,
is to update the implementation

00:46:19.816 --> 00:46:23.416 A:middle
of the list item to actually
handle the attachment and for

00:46:23.416 --> 00:46:25.556 A:middle
that I'm going to import
the generated header now

00:46:25.556 --> 00:46:27.136 A:middle
that we're in a .m file.

00:46:27.866 --> 00:46:30.936 A:middle
And because this is a framework,
and the generated header is part

00:46:30.936 --> 00:46:33.256 A:middle
of our public interface,
we are going

00:46:33.256 --> 00:46:35.086 A:middle
to use framework
syntax to import it.

00:46:36.826 --> 00:46:39.466 A:middle
All that's left to do here now
is to update the implementation

00:46:39.466 --> 00:46:41.866 A:middle
of this class so that
we actually handle this

00:46:41.896 --> 00:46:42.596 A:middle
new property.

00:46:42.766 --> 00:46:45.866 A:middle
So that means having an
extra key for encoding here.

00:46:48.446 --> 00:46:51.446 A:middle
Setting the attachment
explicitly to nil,

00:46:54.236 --> 00:46:56.466 A:middle
making sure that we can
encode and decode it.

00:46:56.466 --> 00:46:59.486 A:middle
And while I'm doing this
I'd like you all to note

00:46:59.486 --> 00:47:01.436 A:middle
that this is exactly
what you'd be doing


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:46:59.486 --> 00:47:01.436 A:middle
that this is exactly
what you'd be doing

00:47:01.436 --> 00:47:04.266 A:middle
if we had implemented the
attachment class in Objective-C.

00:47:04.576 --> 00:47:06.356 A:middle
There's nothing surprising
going on here.

00:47:06.356 --> 00:47:08.526 A:middle
It's exactly what you
would have done before.

00:47:11.366 --> 00:47:14.226 A:middle
Finally we do need to make sure
that we update the copy method

00:47:14.226 --> 00:47:15.866 A:middle
so that when we copy
a list item,

00:47:16.146 --> 00:47:18.826 A:middle
that we actually do get a copy
of the attachment as well.

00:47:20.456 --> 00:47:21.206 A:middle
(Square bracket.)

00:47:22.186 --> 00:47:25.846 A:middle
And since we made our
attachments immutable using that

00:47:25.846 --> 00:47:27.796 A:middle
"let" keyword to
define the properties,

00:47:28.366 --> 00:47:30.526 A:middle
we can just assign
this across directly.

00:47:30.526 --> 00:47:32.516 A:middle
We don't need to do any
special copying to ensure

00:47:32.516 --> 00:47:35.466 A:middle
that they are independent and
not going to change on us.

00:47:36.836 --> 00:47:38.256 A:middle
So that's it; that's
the entire model.

00:47:38.256 --> 00:47:41.016 A:middle
And now you're probably
thinking, "Oh great,

00:47:41.016 --> 00:47:43.336 A:middle
here we go again, back
to Interface Builder

00:47:43.336 --> 00:47:46.556 A:middle
to define a new layout, a new
ViewController and add a bunch

00:47:46.556 --> 00:47:49.036 A:middle
of outlets and actions and hook
everything up all over again.

00:47:49.036 --> 00:47:50.026 A:middle
We already saw that!"

00:47:51.486 --> 00:47:52.106 A:middle
And you'd be right...

00:47:52.106 --> 00:47:54.876 A:middle
except that, we're
actually really lucky here.

00:47:55.266 --> 00:47:57.356 A:middle
The three of us work in
a department with lots

00:47:57.356 --> 00:47:59.456 A:middle
of other great people and
another team is working

00:47:59.456 --> 00:48:01.366 A:middle
on a very similar app
that needs to deal


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:47:59.456 --> 00:48:01.366 A:middle
on a very similar app
that needs to deal

00:48:01.366 --> 00:48:02.486 A:middle
with these kind of attachments.

00:48:03.306 --> 00:48:04.796 A:middle
And because their app is new,

00:48:04.796 --> 00:48:06.316 A:middle
they've written it
entirely in Swift.

00:48:06.856 --> 00:48:10.736 A:middle
But they've also factored out
their attachment ViewController

00:48:11.076 --> 00:48:14.856 A:middle
into a separate framework,
which is a new feature of iOS 8.

00:48:15.176 --> 00:48:17.556 A:middle
So we're going to use their
framework, written entirely

00:48:17.556 --> 00:48:19.956 A:middle
in Swift, to implement
the interface that deals

00:48:19.956 --> 00:48:21.006 A:middle
with this model object.

00:48:24.396 --> 00:48:26.606 A:middle
To start off here I'm going
to go to the bottom here

00:48:26.606 --> 00:48:28.506 A:middle
and check the plus,
yet another way

00:48:28.506 --> 00:48:29.996 A:middle
to add new files to our target.

00:48:31.476 --> 00:48:34.946 A:middle
Choose "Add Files Here" and I'm
going to the media view folder

00:48:34.946 --> 00:48:37.596 A:middle
to select their project,
mediaviewer.xcodeproj.

00:48:39.056 --> 00:48:42.236 A:middle
Once I have this in my project
then I can just add this

00:48:42.236 --> 00:48:46.936 A:middle
to our target by going to our
own project, selecting the list

00:48:46.936 --> 00:48:50.336 A:middle
or target and in the embedded
binary section clicking

00:48:50.336 --> 00:48:50.806 A:middle
the plus.

00:48:51.246 --> 00:48:53.256 A:middle
This lets us add the
framework directly.

00:48:54.496 --> 00:48:55.556 A:middle
Notice what we just did there.

00:48:55.556 --> 00:48:59.966 A:middle
This is a new feature of iOS 8
to allow embedded frameworks.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:49:00.106 --> 00:49:02.426 A:middle
Of course, if you're a Mac
programmer you're probably used

00:49:02.426 --> 00:49:03.136 A:middle
to this by now.

00:49:04.566 --> 00:49:06.846 A:middle
These embedded frameworks
need to be made available

00:49:06.846 --> 00:49:09.806 A:middle
to Interface Builder, to
other classes in your project,

00:49:10.996 --> 00:49:13.866 A:middle
linked into your binary so
that you can actually run it,

00:49:14.196 --> 00:49:15.846 A:middle
and copied into the app so that

00:49:15.846 --> 00:49:17.306 A:middle
when other people
download it they don't need

00:49:17.306 --> 00:49:18.756 A:middle
to download the framework
separately.

00:49:19.536 --> 00:49:22.506 A:middle
And Xcode 6 did all of
that for us without asking

00:49:22.506 --> 00:49:25.366 A:middle
if the framework was written
in Objective-C or Swift

00:49:25.716 --> 00:49:27.046 A:middle
or a mixture of the both.

00:49:28.516 --> 00:49:33.176 A:middle
[ Applause ]

00:49:33.676 --> 00:49:34.906 A:middle
So in our storyboard now.

00:49:34.906 --> 00:49:36.886 A:middle
We can zoom out, and...

00:49:36.886 --> 00:49:39.266 A:middle
let's bring up the
library here to bring

00:49:39.266 --> 00:49:40.666 A:middle
out a new ViewController.

00:49:41.316 --> 00:49:43.546 A:middle
And in this case I'm
going to set the class

00:49:43.546 --> 00:49:46.096 A:middle
of that ViewController to
be the media ViewController

00:49:46.096 --> 00:49:46.926 A:middle
from the other framework.

00:49:47.136 --> 00:49:49.516 A:middle
And you'll see the module
field here populates as well;

00:49:49.516 --> 00:49:50.666 A:middle
this is that feature of Swift

00:49:50.666 --> 00:49:53.486 A:middle
that keeps different
framework classes from stepping

00:49:53.486 --> 00:49:55.466 A:middle
on each other at runtime,
even without a prefix.

00:49:57.476 --> 00:49:59.476 A:middle
We don't need the view that
Interface Builder provides

00:49:59.476 --> 00:50:01.986 A:middle
for us, because it already
has one in its own framework.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:49:59.476 --> 00:50:01.986 A:middle
for us, because it already
has one in its own framework.

00:50:02.026 --> 00:50:03.116 A:middle
So I can just delete that.

00:50:03.816 --> 00:50:05.826 A:middle
And now, to make sure that
we can actually get to this,

00:50:06.076 --> 00:50:10.366 A:middle
I'll select the tables out here
and drag over- ...control-drag,

00:50:10.366 --> 00:50:11.206 A:middle
to create a new segue.

00:50:11.206 --> 00:50:17.906 A:middle
Make that a push segue and we'll
give that a name: "attachment".

00:50:19.576 --> 00:50:21.106 A:middle
Now we've set up
Interface Builder.

00:50:21.266 --> 00:50:23.346 A:middle
We've set up the interface
and the model object.

00:50:23.346 --> 00:50:23.946 A:middle
It's time to put them together.

00:50:24.086 --> 00:50:27.346 A:middle
And once again we're going
to use a delegate for that.

00:50:28.636 --> 00:50:30.156 A:middle
So let's go to our
Objective-C code.

00:50:30.156 --> 00:50:32.306 A:middle
This is the code that
displays the lists.

00:50:32.356 --> 00:50:36.056 A:middle
At the top here we have
the NotificationCenter

00:50:36.686 --> 00:50:39.766 A:middle
which is a system framework
and the import for ListerKit,

00:50:39.816 --> 00:50:42.296 A:middle
which is our own model
framework within this project.

00:50:42.726 --> 00:50:45.006 A:middle
I can add a third
import for MediaViewer,

00:50:45.196 --> 00:50:46.966 A:middle
which is the framework
in the other project.

00:50:47.946 --> 00:50:49.646 A:middle
I'm going to hit Build
again, to make sure

00:50:49.646 --> 00:50:51.276 A:middle
that everything is
compiled and up to date.

00:50:51.786 --> 00:50:53.336 A:middle
And now I get code completion

00:50:53.546 --> 00:50:55.186 A:middle
for the MediaViewerDelegate
protocol.

00:50:57.866 --> 00:51:00.246 A:middle
Just like before I'm going
to jump down to a nice,


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:50:57.866 --> 00:51:00.246 A:middle
Just like before I'm going
to jump down to a nice,

00:51:00.296 --> 00:51:02.496 A:middle
convenient place in the
application to implement this.

00:51:02.556 --> 00:51:03.386 A:middle
And the first thing I'm going

00:51:03.386 --> 00:51:05.826 A:middle
to do is implement a
little helper method here

00:51:05.826 --> 00:51:07.386 A:middle
that just returns
the selectedItem.

00:51:08.436 --> 00:51:11.186 A:middle
Again, even though this is
sort of details of, like,

00:51:11.186 --> 00:51:13.966 A:middle
how the application currently
works, I want you to remember

00:51:13.966 --> 00:51:16.576 A:middle
that everything we're doing
here is exactly what you do

00:51:16.576 --> 00:51:17.556 A:middle
in Objective-C.

00:51:17.776 --> 00:51:20.676 A:middle
From the perspective of this
code you can't really tell

00:51:20.676 --> 00:51:22.836 A:middle
that the entire framework
was written in Swift.

00:51:24.406 --> 00:51:26.556 A:middle
We even get code completion
for the delegate method here.

00:51:26.556 --> 00:51:29.406 A:middle
MediaViewController
didChooseNewMedia, type.

00:51:30.196 --> 00:51:32.796 A:middle
And now that we have all of
this set up it's really easy

00:51:32.796 --> 00:51:35.296 A:middle
to add an attachment to the
currently selected item.

00:51:37.536 --> 00:51:39.906 A:middle
So here we say that
its attachment is going

00:51:39.906 --> 00:51:41.886 A:middle
to be a new attachment
that we create now

00:51:42.536 --> 00:51:44.846 A:middle
by calling alloc initWithData.

00:51:45.796 --> 00:51:46.566 A:middle
Wait a second!

00:51:46.636 --> 00:51:48.376 A:middle
We designed this
attachment class in Swift,

00:51:48.376 --> 00:51:51.556 A:middle
and it had an initializer
named "initData, type".

00:51:52.296 --> 00:51:56.286 A:middle
But in Objective-C it's showing
up as "initWITHData, type".

00:51:56.326 --> 00:51:59.226 A:middle
So you see that this name
translation works both ways

00:51:59.226 --> 00:52:00.586 A:middle
so that you have
a consistent world


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:51:59.226 --> 00:52:00.586 A:middle
so that you have
a consistent world

00:52:00.586 --> 00:52:02.806 A:middle
in Swift and in Objective-C.

00:52:03.516 --> 00:52:08.656 A:middle
[ Applause ]

00:52:09.156 --> 00:52:10.816 A:middle
I'll do a bit of
housekeeping here to make sure

00:52:10.816 --> 00:52:12.396 A:middle
that we update our backing store

00:52:12.856 --> 00:52:15.206 A:middle
and now we have everything
set up here.

00:52:15.316 --> 00:52:18.466 A:middle
All that's left to do, just
like Dave did, is set ourselves

00:52:18.466 --> 00:52:20.996 A:middle
as the delegate for the
MediaViewController.

00:52:21.536 --> 00:52:23.966 A:middle
So this starts off the same,
where we set the attachment

00:52:24.326 --> 00:52:26.016 A:middle
and we set ourselves
as the delegate.

00:52:26.016 --> 00:52:29.986 A:middle
And then we can also set the
title of the NewViewController

00:52:30.396 --> 00:52:33.036 A:middle
and make sure that it's showing
the attachment that's actually

00:52:33.036 --> 00:52:34.206 A:middle
on the selected item.

00:52:35.016 --> 00:52:37.266 A:middle
Or if the selected item
does not have an attachment,

00:52:37.366 --> 00:52:39.466 A:middle
make sure that the controller
isn't showing anything.

00:52:40.766 --> 00:52:42.256 A:middle
So with that, everything
should be working.

00:52:42.256 --> 00:52:42.976 A:middle
Let's build and run.

00:52:49.046 --> 00:52:50.696 A:middle
Let's go into the
tech toys section here

00:52:50.696 --> 00:52:52.936 A:middle
and you see now we have
these disclosure indicators

00:52:52.936 --> 00:52:54.396 A:middle
on each of the items.

00:52:55.066 --> 00:52:56.346 A:middle
We'll go into Thunderbolt
this way.

00:52:56.346 --> 00:52:58.826 A:middle
Then I can see it
says No Attachment.

00:52:59.546 --> 00:53:02.286 A:middle
But I can click this Edit
button using the ViewController


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:52:59.546 --> 00:53:02.286 A:middle
But I can click this Edit
button using the ViewController

00:53:02.286 --> 00:53:03.436 A:middle
from the media views framework.

00:53:03.806 --> 00:53:05.866 A:middle
That brings up a
standard iOS control.

00:53:05.866 --> 00:53:09.306 A:middle
Making sure that our privacy
is protected, and, ah...

00:53:09.796 --> 00:53:12.046 A:middle
This kid looks like he'd really
enjoy a Thunderbolt display.

00:53:13.816 --> 00:53:17.126 A:middle
[Laughter] Okay, we can go back
to another one of these here;

00:53:18.376 --> 00:53:20.056 A:middle
managed to get myself
stuck editing.

00:53:20.056 --> 00:53:20.786 A:middle
There we go.

00:53:21.426 --> 00:53:23.576 A:middle
And you can see that the
image actually does persist

00:53:23.576 --> 00:53:25.216 A:middle
in the Thunderbolt
display section.

00:53:25.756 --> 00:53:26.976 A:middle
So it looks like
everything's working.

00:53:33.076 --> 00:53:35.036 A:middle
So you saw how easy it
was, to not just deal

00:53:35.036 --> 00:53:38.246 A:middle
with a new model object- ...or,
sorry, not just a new object

00:53:38.246 --> 00:53:39.496 A:middle
in your application target,

00:53:39.656 --> 00:53:42.736 A:middle
but also a new model
object in your framework.

00:53:44.656 --> 00:53:47.576 A:middle
Additionally, this is not
related to Swift at all.

00:53:47.576 --> 00:53:50.226 A:middle
But in iOS 8 we now have
embedded frameworks.

00:53:50.546 --> 00:53:52.946 A:middle
And Xcode 6 will handle all
the details of that for you.

00:53:52.946 --> 00:53:53.686 A:middle
Yes, clap!

00:53:54.516 --> 00:53:58.566 A:middle
[ Applause ]

00:53:59.066 --> 00:54:01.606 A:middle
Finally, once again, we
updated our interface


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:53:59.066 --> 00:54:01.606 A:middle
Finally, once again, we
updated our interface

00:54:01.606 --> 00:54:04.156 A:middle
and added a delegate-
...adopted a delegate protocol.

00:54:04.716 --> 00:54:07.526 A:middle
And once again I want
to impress on you

00:54:07.526 --> 00:54:10.926 A:middle
that it's exactly what we would
have done had the delegate

00:54:10.926 --> 00:54:14.656 A:middle
protocol and the ViewController
been implemented in Objective-C.

00:54:14.756 --> 00:54:17.266 A:middle
We didn't have to do
anything unusual or different

00:54:17.266 --> 00:54:18.886 A:middle
because it was implemented
in Swift.

00:54:20.546 --> 00:54:24.016 A:middle
So you see how easy it is with
Xcode 6 to use user frameworks.

00:54:24.116 --> 00:54:26.516 A:middle
And in general we want you
to be treating those the same

00:54:26.516 --> 00:54:27.896 A:middle
as we do system frameworks.

00:54:28.416 --> 00:54:31.786 A:middle
So that means in Swift you'll
be using "import MyFramework"

00:54:31.786 --> 00:54:34.986 A:middle
and in Objective-C
you'll be using

00:54:35.186 --> 00:54:38.296 A:middle
"@import MyFramework;
(semicolon)".

00:54:40.446 --> 00:54:41.866 A:middle
In general we do want you

00:54:41.866 --> 00:54:44.466 A:middle
to be using @import
instead of #import.

00:54:45.036 --> 00:54:47.376 A:middle
For Swift- ...for frameworks
containing Swift code this is

00:54:47.376 --> 00:54:48.636 A:middle
absolutely required.

00:54:48.996 --> 00:54:50.966 A:middle
But even for other frameworks,
if they've been built

00:54:50.966 --> 00:54:53.996 A:middle
with Xcode 6 and have the
defined module build setting

00:54:53.996 --> 00:54:56.186 A:middle
turned on -- which
is on, by default --

00:54:57.206 --> 00:55:00.066 A:middle
then you have- ...then you'll
have a framework ready for use


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:54:57.206 --> 00:55:00.066 A:middle
then you have- ...then you'll
have a framework ready for use

00:55:00.066 --> 00:55:01.786 A:middle
in Objective-C or Swift.

00:55:01.786 --> 00:55:05.376 A:middle
The only reasons now to use
#import are if you are working

00:55:05.376 --> 00:55:07.696 A:middle
with an older framework that
has not yet been rebuilt

00:55:07.696 --> 00:55:11.326 A:middle
with Xcode 6 in a defined module
setting or if you're working

00:55:11.326 --> 00:55:12.876 A:middle
with C++, which does not

00:55:12.876 --> 00:55:15.296 A:middle
yet support the modules
feature we introduced last year.

00:55:16.806 --> 00:55:18.486 A:middle
So with that, everything
seems to be working

00:55:18.486 --> 00:55:19.136 A:middle
and our walkthrough is complete.

00:55:19.136 --> 00:55:19.976 A:middle
I'd like to hand
it back to Anders.

00:55:20.516 --> 00:55:28.546 A:middle
[ Applause ]

00:55:29.046 --> 00:55:29.506 A:middle
&gt;&gt; Thank you Jordan.

00:55:30.706 --> 00:55:35.236 A:middle
So, over the past hour we've
seen several different ways

00:55:35.236 --> 00:55:37.336 A:middle
of mixing Swift and Objective-C.

00:55:38.426 --> 00:55:41.696 A:middle
Swift is a better, safer
way to do Cocoa development.

00:55:41.696 --> 00:55:45.796 A:middle
It was designed to support
the Cocoa frameworks,

00:55:45.856 --> 00:55:49.576 A:middle
the Cocoa Touch idioms
and the common patterns

00:55:49.576 --> 00:55:50.316 A:middle
that we already know.

00:55:51.606 --> 00:55:55.036 A:middle
It's still Cocoa and
Cocoa Touch on iOS.

00:55:55.106 --> 00:55:57.286 A:middle
So that means that the
knowledge and experience

00:55:57.376 --> 00:55:58.866 A:middle
that you've gained
over the years

00:55:58.906 --> 00:56:01.446 A:middle
and the code you have
applies to Swift as well.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:55:58.906 --> 00:56:01.446 A:middle
and the code you have
applies to Swift as well.

00:56:01.506 --> 00:56:04.476 A:middle
And as we've seen
some of the patterns

00:56:04.476 --> 00:56:08.376 A:middle
such as optionally calling a
delegate method are much easier

00:56:08.376 --> 00:56:10.146 A:middle
in Swift and much more succinct.

00:56:10.816 --> 00:56:14.676 A:middle
And in other cases you've seen
how Swift makes us define our

00:56:14.676 --> 00:56:17.886 A:middle
intentions much more clearly,
which can help save us later

00:56:17.886 --> 00:56:20.536 A:middle
on so we don't just
accidentally message nil

00:56:20.536 --> 00:56:22.046 A:middle
or message an object
of the wrong type.

00:56:24.576 --> 00:56:27.546 A:middle
And another thing that I hope
you've seen here is we've put a

00:56:27.546 --> 00:56:29.846 A:middle
lot of effort into making
sure that Xcode takes care

00:56:29.846 --> 00:56:31.536 A:middle
of the details so that

00:56:31.536 --> 00:56:35.536 A:middle
when you're using Objective-C
your Swift code looks

00:56:35.536 --> 00:56:38.926 A:middle
like Objective-C and when you're
using Swift the Objective-C code

00:56:38.926 --> 00:56:39.586 A:middle
looks like Swift.

00:56:40.486 --> 00:56:44.316 A:middle
And you saw some examples of
subclassing Cocoa Touch classes,

00:56:44.706 --> 00:56:47.056 A:middle
but that equally applies to
your own classes as well.

00:56:48.806 --> 00:56:51.976 A:middle
So for more information about
this there is, of course,

00:56:51.976 --> 00:56:54.646 A:middle
the Swift book in
the iBooks Bookstore,

00:56:55.156 --> 00:56:57.146 A:middle
but I'd also especially
like to call your attention

00:56:57.146 --> 00:56:59.916 A:middle
to the Using Swift with Cocoa
and Objective-C document

00:56:59.916 --> 00:57:01.796 A:middle
that we have on
developer.apple.com.


WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:56:59.916 --> 00:57:01.796 A:middle
that we have on
developer.apple.com.

00:57:01.906 --> 00:57:04.976 A:middle
It's available as a PDF file
that you can download and read

00:57:04.976 --> 00:57:08.336 A:middle
on your favorite iOS
device and it goes

00:57:08.336 --> 00:57:10.326 A:middle
into a lot more details
about this.

00:57:10.326 --> 00:57:12.986 A:middle
There are several
related sessions.

00:57:13.106 --> 00:57:16.136 A:middle
One of them has already
been but it's on video.

00:57:16.196 --> 00:57:18.266 A:middle
It's the Introduction
to Swift, of course.

00:57:18.626 --> 00:57:20.256 A:middle
Later on today there's
going to be a session

00:57:20.256 --> 00:57:24.266 A:middle
on Swift Interoperability in
Depth and that goes into more

00:57:24.266 --> 00:57:27.896 A:middle
of the language details of how
to mix Objective-C with Swift.

00:57:29.056 --> 00:57:30.036 A:middle
There's a great session

00:57:30.036 --> 00:57:33.086 A:middle
on Creating Modern Cocoa Apps
coming up and another one

00:57:33.086 --> 00:57:35.546 A:middle
on Building Modern Frameworks
so that you can make sure

00:57:35.546 --> 00:57:38.486 A:middle
that you make your
frameworks embeddable on iOS

00:57:38.486 --> 00:57:40.156 A:middle
and useable from Swift.

00:57:41.706 --> 00:57:43.976 A:middle
Thanks and enjoy the
rest of the week.

00:57:44.508 --> 00:57:46.508 A:middle
[ Applause]

