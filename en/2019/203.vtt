WEBVTT

00:00:00.506 --> 00:00:04.500 A:middle
[ Music ]

00:00:10.516 --> 00:00:17.556 A:middle
[ Applause ]

00:00:18.056 --> 00:00:19.276 A:middle
&gt;&gt; Good morning, everyone.

00:00:19.686 --> 00:00:21.916 A:middle
Welcome to Session 203

00:00:22.246 --> 00:00:23.886 A:middle
Introducing Desktop-class

00:00:23.926 --> 00:00:25.466 A:middle
Browsing on iPad.

00:00:26.086 --> 00:00:28.246 A:middle
My name is Charles Ying, and I'm

00:00:28.246 --> 00:00:30.816 A:middle
joined today by Wenson Hsieh and

00:00:30.816 --> 00:00:32.676 A:middle
Beth Dakin from the Safari

00:00:32.676 --> 00:00:33.376 A:middle
WebKit teams.

00:00:35.166 --> 00:00:37.246 A:middle
We are so thrilled to tell you

00:00:37.246 --> 00:00:39.566 A:middle
about desktop-class browsing, a

00:00:39.566 --> 00:00:42.326 A:middle
major new advancement to the web

00:00:42.326 --> 00:00:43.786 A:middle
platform on iPad.

00:00:45.196 --> 00:00:46.276 A:middle
As you heard in the keynote,

00:00:46.686 --> 00:00:49.076 A:middle
Safari on iPadOS is now a

00:00:49.076 --> 00:00:50.296 A:middle
desktop-class browser.

00:00:51.616 --> 00:00:52.616 A:middle
Now, what does that mean?

00:00:53.956 --> 00:00:55.486 A:middle
It means getting more done with

00:00:55.486 --> 00:00:56.016 A:middle
Safari.

00:00:56.816 --> 00:00:59.016 A:middle
You can now use Safari for all

00:00:59.016 --> 00:01:00.866 A:middle
the great things you want to do

00:00:59.016 --> 00:01:00.866 A:middle
the great things you want to do

00:01:00.866 --> 00:01:02.916 A:middle
on the web.

00:01:03.156 --> 00:01:04.376 A:middle
Safari is the new download

00:01:04.376 --> 00:01:07.006 A:middle
manager, so you can download and

00:01:07.006 --> 00:01:09.896 A:middle
upload files while using other

00:01:09.896 --> 00:01:12.866 A:middle
tabs and even other apps.

00:01:14.586 --> 00:01:16.696 A:middle
Safari's new controls for

00:01:16.696 --> 00:01:18.776 A:middle
full-page zoom, hiding the

00:01:18.776 --> 00:01:20.596 A:middle
toolbar when you need more space

00:01:20.656 --> 00:01:22.926 A:middle
to work and per-site preferences

00:01:22.926 --> 00:01:25.266 A:middle
to tailor Safari to your

00:01:25.266 --> 00:01:25.706 A:middle
workflow.

00:01:27.426 --> 00:01:29.946 A:middle
And Safari now has all the

00:01:29.946 --> 00:01:31.926 A:middle
keyboard shortcuts you expect

00:01:32.146 --> 00:01:34.146 A:middle
from a desktop browser to get

00:01:34.146 --> 00:01:35.886 A:middle
things done fast and stay

00:01:35.886 --> 00:01:37.526 A:middle
focused on what you're doing.

00:01:37.526 --> 00:01:41.296 A:middle
But at the heart of it all is

00:01:41.296 --> 00:01:42.506 A:middle
browsing desktop websites.

00:01:47.616 --> 00:01:49.176 A:middle
We've been working on web

00:01:49.176 --> 00:01:51.116 A:middle
browsers for a long time.

00:01:52.176 --> 00:01:53.416 A:middle
When the original iPhone was

00:01:53.416 --> 00:01:55.636 A:middle
first introduced, all websites

00:01:55.636 --> 00:01:57.546 A:middle
were big and made for mouse

00:01:57.546 --> 00:01:57.856 A:middle
input.

00:01:59.606 --> 00:02:01.086 A:middle
iPhone made these websites work

00:01:59.606 --> 00:02:01.086 A:middle
iPhone made these websites work

00:02:01.606 --> 00:02:04.196 A:middle
out of the box without requiring

00:02:04.196 --> 00:02:06.296 A:middle
them to change to work with a

00:02:06.296 --> 00:02:08.455 A:middle
small screen and Multi-Touch.

00:02:09.916 --> 00:02:11.576 A:middle
iPhone would scale websites to

00:02:11.626 --> 00:02:14.206 A:middle
fit and boost text sizes so you

00:02:14.206 --> 00:02:14.726 A:middle
could read them.

00:02:16.246 --> 00:02:18.836 A:middle
Then you used new web APIs to

00:02:19.196 --> 00:02:21.296 A:middle
make your websites take full

00:02:21.296 --> 00:02:22.696 A:middle
advantage of iPhone's

00:02:22.696 --> 00:02:23.256 A:middle
capabilities.

00:02:23.256 --> 00:02:26.926 A:middle
And the results were fantastic.

00:02:27.676 --> 00:02:30.576 A:middle
Some of you used responsive

00:02:30.576 --> 00:02:32.116 A:middle
design techniques to make your

00:02:32.116 --> 00:02:34.246 A:middle
websites flexible on screens of

00:02:34.246 --> 00:02:34.916 A:middle
any size.

00:02:35.936 --> 00:02:38.676 A:middle
Those websites look great on

00:02:39.396 --> 00:02:40.276 A:middle
iPad today.

00:02:41.066 --> 00:02:43.776 A:middle
But it was also common to have

00:02:43.776 --> 00:02:44.906 A:middle
two different versions of the

00:02:44.906 --> 00:02:48.386 A:middle
site, one for big screens and

00:02:48.386 --> 00:02:49.386 A:middle
one for small screens.

00:02:49.386 --> 00:02:53.086 A:middle
iPad used the mobile user agent

00:02:53.606 --> 00:02:54.966 A:middle
which meant it got small screen

00:02:54.966 --> 00:02:55.416 A:middle
websites.

00:02:56.906 --> 00:03:01.116 A:middle
So new in iPadOS, iPad will now

00:02:56.906 --> 00:03:01.116 A:middle
So new in iPadOS, iPad will now

00:03:01.116 --> 00:03:02.496 A:middle
present itself to websites as a

00:03:02.856 --> 00:03:02.976 A:middle
Mac.

00:03:05.576 --> 00:03:07.656 A:middle
This is not just user agent

00:03:07.656 --> 00:03:09.676 A:middle
change, but a set of deep

00:03:10.506 --> 00:03:13.116 A:middle
fundamental changes to WebKit

00:03:13.666 --> 00:03:15.386 A:middle
that add up to a great new

00:03:15.386 --> 00:03:15.976 A:middle
experience.

00:03:16.776 --> 00:03:17.826 A:middle
Let me walk you through two of

00:03:17.826 --> 00:03:18.466 A:middle
these changes.

00:03:20.226 --> 00:03:21.766 A:middle
Some desktop websites are

00:03:21.766 --> 00:03:23.236 A:middle
designed to show lots of

00:03:23.236 --> 00:03:25.096 A:middle
information on a large screen.

00:03:26.656 --> 00:03:28.206 A:middle
These websites were zoomed in on

00:03:28.206 --> 00:03:29.896 A:middle
big iPads, and you couldn't see

00:03:29.896 --> 00:03:31.156 A:middle
as much information as the

00:03:31.156 --> 00:03:31.796 A:middle
desktop browser.

00:03:32.996 --> 00:03:34.536 A:middle
WebKit used a viewport to lay

00:03:34.536 --> 00:03:36.396 A:middle
out websites that was the same

00:03:36.396 --> 00:03:38.626 A:middle
on every iPad size, the iPad

00:03:38.626 --> 00:03:40.616 A:middle
mini all the way up to the

00:03:40.616 --> 00:03:43.116 A:middle
largest iPad Pro.

00:03:43.336 --> 00:03:47.136 A:middle
So new in iPadOS, viewports will

00:03:47.136 --> 00:03:49.436 A:middle
now match iPad screen size.

00:03:50.496 --> 00:03:52.036 A:middle
Now websites can use all the

00:03:52.036 --> 00:03:53.626 A:middle
space available on bigger iPads.

00:03:54.536 --> 00:03:56.456 A:middle
With smaller iPads, we'll scale

00:03:56.456 --> 00:03:59.236 A:middle
websites to fit everything on

00:03:59.236 --> 00:04:01.626 A:middle
screen and boost text sizes for

00:03:59.236 --> 00:04:01.626 A:middle
screen and boost text sizes for

00:04:01.626 --> 00:04:03.886 A:middle
comfortable reading just like

00:04:03.886 --> 00:04:04.086 A:middle
iPhone.

00:04:05.356 --> 00:04:06.746 A:middle
You can now see more of the

00:04:06.746 --> 00:04:08.616 A:middle
website at once just like a

00:04:08.616 --> 00:04:10.706 A:middle
desktop computer, make it easier

00:04:10.706 --> 00:04:11.706 A:middle
to get things done.

00:04:12.356 --> 00:04:14.886 A:middle
Some desktop websites are

00:04:14.886 --> 00:04:16.636 A:middle
designed for mouse input.

00:04:17.826 --> 00:04:21.206 A:middle
New in iOS 13, iPad optimizes

00:04:21.346 --> 00:04:23.286 A:middle
how touch input adapts to mouse

00:04:23.286 --> 00:04:23.576 A:middle
input.

00:04:24.256 --> 00:04:25.986 A:middle
So websites like this one using

00:04:25.986 --> 00:04:28.576 A:middle
mouse hover now work out of the

00:04:28.576 --> 00:04:28.846 A:middle
box.

00:04:29.676 --> 00:04:32.566 A:middle
And for web apps that want full

00:04:32.566 --> 00:04:35.446 A:middle
control, you can now use Pointer

00:04:35.446 --> 00:04:35.746 A:middle
Events.

00:04:37.206 --> 00:04:38.786 A:middle
This is just a taste of the

00:04:38.786 --> 00:04:42.026 A:middle
dozens of web APIs and features

00:04:42.316 --> 00:04:46.056 A:middle
new in iPadOS that you can take

00:04:46.056 --> 00:04:47.946 A:middle
advantage of in your web apps.

00:04:49.006 --> 00:04:50.526 A:middle
You'll hear more about them from

00:04:50.526 --> 00:04:51.676 A:middle
Beth later on.

00:04:53.716 --> 00:04:55.256 A:middle
All of this adds up to a

00:04:55.256 --> 00:04:56.556 A:middle
powerful browsing experience

00:04:56.936 --> 00:04:58.606 A:middle
that you expect from your iPad,

00:04:59.236 --> 00:05:00.896 A:middle
and that's desktop-class

00:04:59.236 --> 00:05:00.896 A:middle
and that's desktop-class

00:05:00.896 --> 00:05:04.986 A:middle
browsing, new in iPadOS.

00:05:05.136 --> 00:05:05.476 A:middle
Now --

00:05:06.516 --> 00:05:08.896 A:middle
[ Applause ]

00:05:09.396 --> 00:05:11.336 A:middle
Now, we want to show you how

00:05:11.336 --> 00:05:13.276 A:middle
your apps and websites can take

00:05:13.406 --> 00:05:15.036 A:middle
full advantage of these new

00:05:15.036 --> 00:05:15.626 A:middle
capabilities.

00:05:16.696 --> 00:05:18.346 A:middle
For app developers, we'll show

00:05:18.346 --> 00:05:19.826 A:middle
you how to use desktop-class

00:05:19.826 --> 00:05:21.496 A:middle
browsing in your app.

00:05:22.526 --> 00:05:24.136 A:middle
And for web developers, we'll

00:05:24.136 --> 00:05:24.846 A:middle
show you how to make your

00:05:24.846 --> 00:05:27.266 A:middle
websites work even better on

00:05:27.266 --> 00:05:27.496 A:middle
iPad.

00:05:28.896 --> 00:05:31.156 A:middle
We'll start with apps.

00:05:33.576 --> 00:05:36.266 A:middle
There are four common ways apps

00:05:36.266 --> 00:05:38.276 A:middle
use web views; following links

00:05:38.276 --> 00:05:39.976 A:middle
to web content and browsing

00:05:39.976 --> 00:05:42.596 A:middle
within your app; web browsers,

00:05:42.936 --> 00:05:44.466 A:middle
where browsing is the primary

00:05:44.466 --> 00:05:46.806 A:middle
focus of your app; hybrid apps,

00:05:47.256 --> 00:05:48.646 A:middle
where web technologies are a

00:05:48.646 --> 00:05:49.546 A:middle
part of your app's user

00:05:49.546 --> 00:05:51.606 A:middle
interface and authenticating

00:05:51.606 --> 00:05:53.076 A:middle
users with a third-party

00:05:53.076 --> 00:05:54.076 A:middle
services using OAuth.

00:05:55.326 --> 00:05:56.736 A:middle
First up, link following.

00:05:57.376 --> 00:06:00.656 A:middle
The best way to follow links and

00:05:57.376 --> 00:06:00.656 A:middle
The best way to follow links and

00:06:00.656 --> 00:06:02.556 A:middle
stay within your app is to use

00:06:02.556 --> 00:06:03.626 A:middle
Safari View Controller.

00:06:04.496 --> 00:06:06.096 A:middle
Just like Safari, Safari View

00:06:06.096 --> 00:06:07.456 A:middle
Controller has great features,

00:06:07.736 --> 00:06:10.116 A:middle
including Autofill and Reader.

00:06:10.936 --> 00:06:12.416 A:middle
So I'm happy to say that if

00:06:12.416 --> 00:06:13.436 A:middle
you're using Safari View

00:06:13.436 --> 00:06:14.656 A:middle
Controller, you get

00:06:14.656 --> 00:06:16.696 A:middle
desktop-class browsing for free.

00:06:17.456 --> 00:06:18.736 A:middle
There's nothing for you to do.

00:06:19.806 --> 00:06:21.156 A:middle
Safari and Safari View

00:06:21.156 --> 00:06:22.886 A:middle
Controller automatically choose

00:06:22.886 --> 00:06:24.686 A:middle
a browsing mode to give you the

00:06:24.686 --> 00:06:26.006 A:middle
best experience for your

00:06:26.006 --> 00:06:26.566 A:middle
situation.

00:06:27.606 --> 00:06:28.246 A:middle
Let me explain.

00:06:28.896 --> 00:06:32.666 A:middle
iPad is the perfect device for

00:06:32.666 --> 00:06:33.526 A:middle
browsing the internet.

00:06:34.136 --> 00:06:35.456 A:middle
It's like holding the web in

00:06:35.456 --> 00:06:35.916 A:middle
your hands.

00:06:36.666 --> 00:06:37.496 A:middle
And depending on what you're

00:06:37.496 --> 00:06:39.736 A:middle
doing, iPad can be used in many

00:06:39.736 --> 00:06:41.146 A:middle
different ways.

00:06:42.096 --> 00:06:44.046 A:middle
For example, some desktop

00:06:44.046 --> 00:06:45.806 A:middle
websites are pretty small on

00:06:45.806 --> 00:06:47.986 A:middle
iPad mini and are more

00:06:47.986 --> 00:06:49.266 A:middle
comfortable to read with a

00:06:49.266 --> 00:06:50.596 A:middle
mobile browsing experience.

00:06:50.596 --> 00:06:53.516 A:middle
When you look at a desktop

00:06:53.516 --> 00:06:55.866 A:middle
website in narrow Split View or

00:06:55.866 --> 00:06:57.576 A:middle
Slide Over, the same thing is

00:06:57.576 --> 00:06:57.806 A:middle
true.

00:06:58.496 --> 00:07:01.226 A:middle
In these cases for narrow

00:06:58.496 --> 00:07:01.226 A:middle
In these cases for narrow

00:07:01.226 --> 00:07:03.706 A:middle
windows, iPad mini mobile

00:07:03.706 --> 00:07:04.716 A:middle
browsing can be better.

00:07:06.216 --> 00:07:06.936 A:middle
Safari and Safari View

00:07:06.936 --> 00:07:08.246 A:middle
Controller will automatically

00:07:08.246 --> 00:07:09.726 A:middle
choose a browsing mode to give

00:07:09.926 --> 00:07:11.076 A:middle
you the best experience.

00:07:11.646 --> 00:07:15.856 A:middle
Safari View Controller takes

00:07:15.856 --> 00:07:17.286 A:middle
care of everything you need to

00:07:17.286 --> 00:07:18.406 A:middle
follow links within your app.

00:07:19.396 --> 00:07:20.396 A:middle
What if your app is a web

00:07:20.396 --> 00:07:20.866 A:middle
browser?

00:07:21.636 --> 00:07:22.386 A:middle
Here's what you do.

00:07:23.556 --> 00:07:25.666 A:middle
First, build your app with iOS

00:07:25.666 --> 00:07:28.276 A:middle
13 SDK to turn on desktop-class

00:07:28.306 --> 00:07:28.696 A:middle
browsing.

00:07:29.656 --> 00:07:31.806 A:middle
Then look at how you're setting

00:07:31.806 --> 00:07:32.406 A:middle
the user agent.

00:07:32.406 --> 00:07:35.106 A:middle
If using the custom user agent

00:07:35.106 --> 00:07:37.556 A:middle
property, we recommend instead

00:07:37.656 --> 00:07:39.886 A:middle
to use WKWebView configurations

00:07:40.246 --> 00:07:41.916 A:middle
applicationNameForUserAgent

00:07:41.916 --> 00:07:42.256 A:middle
property.

00:07:43.346 --> 00:07:44.596 A:middle
When you provide an application

00:07:44.596 --> 00:07:46.216 A:middle
name, WebKit does the right

00:07:46.216 --> 00:07:47.536 A:middle
thing to fill in the rest of the

00:07:47.536 --> 00:07:49.216 A:middle
user agent for you.

00:07:51.056 --> 00:07:54.046 A:middle
WKWebView also is the new

00:07:54.046 --> 00:07:55.596 A:middle
WKWebpagePreferences API for

00:07:56.036 --> 00:07:57.726 A:middle
setting a preferred content

00:07:57.726 --> 00:07:58.296 A:middle
browsing mode.

00:07:59.646 --> 00:08:00.846 A:middle
There are three modes;

00:07:59.646 --> 00:08:00.846 A:middle
There are three modes;

00:08:01.376 --> 00:08:03.086 A:middle
recommended, which does what

00:08:03.086 --> 00:08:05.496 A:middle
Safari does; mobile; and desktop

00:08:05.496 --> 00:08:05.756 A:middle
modes.

00:08:06.866 --> 00:08:08.686 A:middle
In most cases, Safari's

00:08:08.686 --> 00:08:10.226 A:middle
recommended mode is what you

00:08:10.226 --> 00:08:10.506 A:middle
want.

00:08:11.166 --> 00:08:15.726 A:middle
Your web browser might also want

00:08:15.726 --> 00:08:17.046 A:middle
to let users switch between

00:08:17.046 --> 00:08:19.286 A:middle
mobile and desktop modes or have

00:08:19.286 --> 00:08:20.416 A:middle
per-site preferences.

00:08:21.126 --> 00:08:24.056 A:middle
For these cases, WebKit has a

00:08:24.056 --> 00:08:26.706 A:middle
new WKNavigationDelegate API to

00:08:27.686 --> 00:08:29.386 A:middle
specify a content mode

00:08:29.386 --> 00:08:31.226 A:middle
preference at navigation time.

00:08:34.956 --> 00:08:36.885 A:middle
You'll see a demo from Wenson of

00:08:36.885 --> 00:08:40.076 A:middle
these new APIs in a bit.

00:08:40.296 --> 00:08:42.116 A:middle
In addition to web browsers, web

00:08:42.116 --> 00:08:43.515 A:middle
technologies can be used to

00:08:43.515 --> 00:08:44.976 A:middle
build parts of your app's

00:08:44.976 --> 00:08:46.346 A:middle
content or user interface.

00:08:48.116 --> 00:08:49.776 A:middle
If your app uses WKWebView this

00:08:49.776 --> 00:08:52.316 A:middle
way, build your app with iOS 13

00:08:52.316 --> 00:08:53.856 A:middle
SDK to turn on desktop-class

00:08:53.856 --> 00:08:54.266 A:middle
browsing.

00:08:55.416 --> 00:08:57.336 A:middle
Then test your app's use of

00:08:57.336 --> 00:08:57.936 A:middle
WKWebView.

00:08:59.426 --> 00:09:00.556 A:middle
In most cases, you're done.

00:08:59.426 --> 00:09:00.556 A:middle
In most cases, you're done.

00:09:00.556 --> 00:09:02.466 A:middle
But in the rare case that you

00:09:02.466 --> 00:09:03.806 A:middle
need to opt out of viewport

00:09:03.806 --> 00:09:05.016 A:middle
sizing, you can set the

00:09:05.016 --> 00:09:07.356 A:middle
preferred content mode to

00:09:08.096 --> 00:09:08.256 A:middle
mobile.

00:09:08.416 --> 00:09:10.396 A:middle
Overall, it's pretty easy.

00:09:10.956 --> 00:09:12.526 A:middle
WKWebView does most of the work

00:09:12.526 --> 00:09:12.846 A:middle
for you.

00:09:19.746 --> 00:09:22.416 A:middle
Oops. Finally, web views are

00:09:22.416 --> 00:09:24.006 A:middle
used to authenticate users with

00:09:24.006 --> 00:09:25.146 A:middle
a third-party service using

00:09:25.146 --> 00:09:25.486 A:middle
OAuth.

00:09:26.376 --> 00:09:27.756 A:middle
If you're doing this,

00:09:27.756 --> 00:09:29.426 A:middle
ASWebAuthenticationSession is

00:09:29.426 --> 00:09:30.556 A:middle
the best way to authenticate.

00:09:31.906 --> 00:09:32.986 A:middle
New in iPadOS,

00:09:33.486 --> 00:09:35.566 A:middle
ASWebAuthenticationSession now

00:09:35.566 --> 00:09:37.726 A:middle
presents a form sheet on iPad to

00:09:37.726 --> 00:09:38.616 A:middle
show the authentication

00:09:38.616 --> 00:09:40.486 A:middle
interface while staying within

00:09:40.486 --> 00:09:41.386 A:middle
the context of your app.

00:09:42.316 --> 00:09:43.626 A:middle
Given this new presentation,

00:09:44.236 --> 00:09:45.876 A:middle
ASWebAuthenticationSession loads

00:09:45.876 --> 00:09:47.326 A:middle
websites using a mobile content

00:09:47.326 --> 00:09:47.546 A:middle
mode.

00:09:48.216 --> 00:09:48.896 A:middle
Just like Safari View

00:09:48.896 --> 00:09:50.496 A:middle
Controller, there's nothing for

00:09:50.496 --> 00:09:53.896 A:middle
you to do if you're using this

00:09:53.896 --> 00:09:53.986 A:middle
API.

00:09:54.166 --> 00:09:56.476 A:middle
To recap, Safari View Controller

00:09:56.476 --> 00:09:58.196 A:middle
and ASWebAuthenticationSession

00:09:58.536 --> 00:09:59.846 A:middle
do the heavy lifting for you.

00:10:01.106 --> 00:10:03.256 A:middle
And if using WKWebView, you have

00:10:03.256 --> 00:10:04.376 A:middle
all the tools you need.

00:10:05.676 --> 00:10:06.566 A:middle
And now I'd like to invite

00:10:06.566 --> 00:10:08.326 A:middle
Wenson to the stage to show you

00:10:08.326 --> 00:10:09.596 A:middle
a demo of how this works.

00:10:10.166 --> 00:10:10.666 A:middle
That's it.

00:10:11.516 --> 00:10:16.500 A:middle
[ Applause ]

00:10:20.476 --> 00:10:21.786 A:middle
&gt;&gt; Thank you, Charles.

00:10:22.996 --> 00:10:24.816 A:middle
So when I'm not busy working on

00:10:24.816 --> 00:10:26.606 A:middle
a web browser, I like to take my

00:10:26.606 --> 00:10:28.126 A:middle
mind off of things every now and

00:10:28.126 --> 00:10:29.886 A:middle
then by writing more web

00:10:29.886 --> 00:10:30.426 A:middle
browsers.

00:10:31.306 --> 00:10:33.146 A:middle
So today, I'd like to introduce

00:10:33.476 --> 00:10:34.276 A:middle
Shiny Browser.

00:10:34.976 --> 00:10:38.116 A:middle
It's a WKWebView-based browser

00:10:38.116 --> 00:10:39.726 A:middle
that I've written, and here it

00:10:39.726 --> 00:10:40.936 A:middle
is on Google Docs.

00:10:41.976 --> 00:10:43.156 A:middle
So sometimes I need to

00:10:43.156 --> 00:10:44.406 A:middle
collaborate with my friends

00:10:44.566 --> 00:10:45.646 A:middle
using Google Docs.

00:10:46.386 --> 00:10:47.816 A:middle
For that, I'd like to be able to

00:10:47.816 --> 00:10:50.386 A:middle
use my browser, but as you can

00:10:50.386 --> 00:10:52.016 A:middle
see here, it just tells me to

00:10:52.016 --> 00:10:52.846 A:middle
download the app.

00:10:53.666 --> 00:10:55.256 A:middle
I'll bet that if I had requested

00:10:55.466 --> 00:10:56.656 A:middle
a desktop version of this

00:10:56.656 --> 00:10:58.336 A:middle
website, it would give me full

00:10:58.336 --> 00:10:58.936 A:middle
access.

00:10:59.676 --> 00:11:00.716 A:middle
So as I just learned from

00:10:59.676 --> 00:11:00.716 A:middle
So as I just learned from

00:11:00.716 --> 00:11:03.196 A:middle
Charles a moment ago, WKWebView

00:11:03.196 --> 00:11:05.416 A:middle
in iOS 13 should request the

00:11:05.416 --> 00:11:07.566 A:middle
desktop version by default on my

00:11:07.566 --> 00:11:08.326 A:middle
iPad Pro.

00:11:08.916 --> 00:11:10.216 A:middle
So I'm going to recompile my

00:11:10.216 --> 00:11:12.476 A:middle
browser against the iOS 13 SDK,

00:11:12.476 --> 00:11:14.146 A:middle
and that should give me the

00:11:14.146 --> 00:11:15.006 A:middle
desktop website.

00:11:15.766 --> 00:11:16.816 A:middle
So I'm going to switch over to

00:11:16.816 --> 00:11:18.966 A:middle
Xcode here, and I'm just going

00:11:18.966 --> 00:11:20.046 A:middle
to hit Command-R to run.

00:11:20.046 --> 00:11:22.106 A:middle
That's going to compile my app,

00:11:22.586 --> 00:11:24.016 A:middle
and we should see the desktop

00:11:24.016 --> 00:11:24.516 A:middle
website.

00:11:26.716 --> 00:11:28.196 A:middle
Okay, well.

00:11:28.306 --> 00:11:29.366 A:middle
Unfortunately, we're still

00:11:29.366 --> 00:11:30.326 A:middle
getting the mobile version.

00:11:31.306 --> 00:11:32.276 A:middle
Let's see if we can try to debug

00:11:32.276 --> 00:11:32.856 A:middle
this together.

00:11:33.636 --> 00:11:35.096 A:middle
Now, let's take a step back.

00:11:35.526 --> 00:11:37.226 A:middle
Google Docs thinks I'm a mobile

00:11:37.226 --> 00:11:37.656 A:middle
browser.

00:11:38.396 --> 00:11:39.916 A:middle
It's probably using the user

00:11:39.916 --> 00:11:41.116 A:middle
agent string to make that

00:11:41.116 --> 00:11:41.836 A:middle
determination.

00:11:43.286 --> 00:11:44.546 A:middle
What I'm going to do is connect

00:11:44.546 --> 00:11:45.706 A:middle
to the web view using Web

00:11:45.706 --> 00:11:48.026 A:middle
Inspector and print out the user

00:11:48.026 --> 00:11:48.556 A:middle
agent string.

00:11:49.526 --> 00:11:50.926 A:middle
Maybe that'll give me a hint as

00:11:50.926 --> 00:11:51.666 A:middle
to what's going on.

00:11:52.626 --> 00:11:55.496 A:middle
So now I'm going to launch

00:11:55.496 --> 00:11:58.626 A:middle
Safari, go to Develop menu and

00:11:58.626 --> 00:11:59.726 A:middle
target Shiny Browser here.

00:12:00.136 --> 00:12:02.566 A:middle
So I'm going to switch over to

00:12:02.566 --> 00:12:04.776 A:middle
Console tab, and I'm just going

00:12:04.776 --> 00:12:07.396 A:middle
to type navigator.userAgent and

00:12:07.396 --> 00:12:07.956 A:middle
hit Enter.

00:12:09.176 --> 00:12:10.406 A:middle
So let's zoom in on this user

00:12:10.406 --> 00:12:10.726 A:middle
agent.

00:12:12.056 --> 00:12:12.956 A:middle
There's a couple of interesting

00:12:12.956 --> 00:12:14.106 A:middle
things I want to point out here.

00:12:15.066 --> 00:12:16.406 A:middle
First of all, the word iPad

00:12:16.406 --> 00:12:17.426 A:middle
appears in the user agent

00:12:17.426 --> 00:12:19.386 A:middle
string, so clearly it's not

00:12:19.386 --> 00:12:20.186 A:middle
desktop-class.

00:12:20.826 --> 00:12:22.266 A:middle
But what's more, there's this

00:12:22.266 --> 00:12:24.066 A:middle
Version/1.0 ShinyBrowser/1.0

00:12:24.066 --> 00:12:24.156 A:middle
here.

00:12:24.216 --> 00:12:25.166 A:middle
It's kind of mysterious.

00:12:25.786 --> 00:12:26.826 A:middle
Where is this coming from?

00:12:28.116 --> 00:12:29.886 A:middle
Well, I like to know myself, so

00:12:29.886 --> 00:12:32.266 A:middle
I'm going to copy and paste into

00:12:32.266 --> 00:12:33.616 A:middle
the search field in Xcode.

00:12:33.616 --> 00:12:34.936 A:middle
So I'm going to Command-F to

00:12:34.936 --> 00:12:38.266 A:middle
find and just paste.

00:12:38.456 --> 00:12:40.606 A:middle
Okay, well as it turns out, I

00:12:40.606 --> 00:12:42.496 A:middle
had code to override the entire

00:12:42.496 --> 00:12:44.096 A:middle
user agent string using the

00:12:44.096 --> 00:12:45.776 A:middle
custom user agent property of

00:12:45.776 --> 00:12:46.516 A:middle
WKWebView.

00:12:47.956 --> 00:12:49.006 A:middle
I must have copied and pasted

00:12:49.006 --> 00:12:50.076 A:middle
this from the internet at some

00:12:50.076 --> 00:12:52.066 A:middle
point and forgot about it since.

00:12:52.866 --> 00:12:53.676 A:middle
Maybe it was a reasonable

00:12:53.676 --> 00:12:56.566 A:middle
solution at the time, but as

00:12:56.566 --> 00:12:57.646 A:middle
I've just learned from Charles,

00:12:57.806 --> 00:12:59.106 A:middle
there's an alternative.

00:12:59.866 --> 00:13:01.276 A:middle
What I can use instead is the

00:12:59.866 --> 00:13:01.276 A:middle
What I can use instead is the

00:13:01.306 --> 00:13:02.776 A:middle
application name for user agent

00:13:02.776 --> 00:13:04.016 A:middle
property on WKWebView

00:13:04.016 --> 00:13:04.756 A:middle
configuration.

00:13:05.406 --> 00:13:07.516 A:middle
So let's change this to use that

00:13:07.516 --> 00:13:07.996 A:middle
instead.

00:13:08.826 --> 00:13:09.866 A:middle
First thing I'm going to do is

00:13:09.996 --> 00:13:11.476 A:middle
remove this custom user agent

00:13:11.476 --> 00:13:13.556 A:middle
code and go up here where I'm

00:13:13.556 --> 00:13:14.376 A:middle
creating my web view.

00:13:15.496 --> 00:13:19.206 A:middle
So what I'm going to do here is

00:13:19.206 --> 00:13:20.346 A:middle
first create a WKWebView

00:13:20.346 --> 00:13:22.206 A:middle
configuration and then set the

00:13:22.206 --> 00:13:23.726 A:middle
application name for user agent

00:13:24.256 --> 00:13:25.916 A:middle
to what I want, Version/1.0

00:13:25.916 --> 00:13:26.786 A:middle
ShinyBrowser/1.0.

00:13:27.196 --> 00:13:28.566 A:middle
And finally, I'm going to create

00:13:28.566 --> 00:13:29.686 A:middle
my web view using this

00:13:29.686 --> 00:13:30.376 A:middle
configuration.

00:13:30.496 --> 00:13:32.156 A:middle
So that was a very small tweak.

00:13:32.156 --> 00:13:34.086 A:middle
I'm going to recompile my app

00:13:34.576 --> 00:13:39.446 A:middle
and see what I get this time.

00:13:39.446 --> 00:13:40.906 A:middle
All right, so as you can see,

00:13:40.906 --> 00:13:41.966 A:middle
we're now getting the full

00:13:41.966 --> 00:13:43.556 A:middle
version of Google Docs, and I

00:13:43.556 --> 00:13:44.776 A:middle
can finally collaborate with my

00:13:44.776 --> 00:13:45.276 A:middle
friends.

00:13:45.646 --> 00:13:46.856 A:middle
That was pretty easy.

00:13:47.416 --> 00:13:48.436 A:middle
But now let's take it one step

00:13:48.506 --> 00:13:48.816 A:middle
further.

00:13:49.746 --> 00:13:50.686 A:middle
One of the features that my

00:13:50.686 --> 00:13:51.986 A:middle
users have been requesting for a

00:13:51.986 --> 00:13:54.166 A:middle
while is the ability to switch

00:13:54.196 --> 00:13:55.766 A:middle
between the desktop and mobile

00:13:55.766 --> 00:13:56.996 A:middle
versions of a web page.

00:13:57.766 --> 00:14:00.316 A:middle
With the new API in iOS 13, it's

00:13:57.766 --> 00:14:00.316 A:middle
With the new API in iOS 13, it's

00:14:00.316 --> 00:14:02.306 A:middle
now fairly easy to implement, so

00:14:02.306 --> 00:14:03.026 A:middle
let me show you how.

00:14:03.946 --> 00:14:05.576 A:middle
First of all, notice I have this

00:14:05.636 --> 00:14:06.806 A:middle
button in the top right-hand

00:14:06.806 --> 00:14:09.016 A:middle
corner that contains some extra

00:14:09.016 --> 00:14:10.566 A:middle
options like Add To Favorites

00:14:10.566 --> 00:14:10.956 A:middle
and Share.

00:14:11.666 --> 00:14:12.706 A:middle
What I'm going to do is I'm

00:14:12.706 --> 00:14:14.426 A:middle
going to add a third option here

00:14:14.826 --> 00:14:16.286 A:middle
to allow the user to change

00:14:16.506 --> 00:14:17.516 A:middle
content modes.

00:14:18.036 --> 00:14:19.156 A:middle
So that's going to either say

00:14:19.156 --> 00:14:20.766 A:middle
Request Mobile Website or

00:14:20.766 --> 00:14:22.216 A:middle
Request Desktop Website.

00:14:23.606 --> 00:14:25.196 A:middle
Okay. So let's jump into Xcode

00:14:26.296 --> 00:14:27.006 A:middle
and implement that.

00:14:27.006 --> 00:14:30.136 A:middle
I'm going to go down here, add

00:14:30.136 --> 00:14:31.156 A:middle
this helper function that

00:14:31.156 --> 00:14:33.206 A:middle
presents a list of

00:14:33.206 --> 00:14:34.306 A:middle
UIAlertActions.

00:14:34.926 --> 00:14:36.196 A:middle
So far, as you can see, I've

00:14:36.196 --> 00:14:38.016 A:middle
have Add to Favorites and Share.

00:14:38.756 --> 00:14:39.936 A:middle
What I want to do is add a third

00:14:39.936 --> 00:14:40.476 A:middle
action here.

00:14:40.836 --> 00:14:42.356 A:middle
But before I do that, I'm going

00:14:42.356 --> 00:14:43.506 A:middle
to make a new helper function.

00:14:43.506 --> 00:14:45.726 A:middle
It's going to help me create the

00:14:45.726 --> 00:14:46.626 A:middle
UIAlertAction.

00:14:47.066 --> 00:14:48.466 A:middle
And of course, I'm just going to

00:14:48.466 --> 00:14:50.476 A:middle
use it up here.

00:14:50.476 --> 00:14:51.736 A:middle
Okay. So that should get my

00:14:51.736 --> 00:14:52.156 A:middle
action.

00:14:52.696 --> 00:14:53.826 A:middle
And now I want to draw your

00:14:53.826 --> 00:14:55.056 A:middle
attention over to this

00:14:55.096 --> 00:14:56.366 A:middle
currentContentMode instance

00:14:56.366 --> 00:14:56.796 A:middle
variable.

00:14:57.526 --> 00:14:58.396 A:middle
So what am I doing here?

00:14:58.816 --> 00:14:59.906 A:middle
Well, I'm checking if the

00:14:59.906 --> 00:15:01.156 A:middle
current content mode is equal to

00:14:59.906 --> 00:15:01.156 A:middle
current content mode is equal to

00:15:01.156 --> 00:15:01.616 A:middle
desktop.

00:15:02.246 --> 00:15:03.576 A:middle
And if it's equal to desktop, I

00:15:03.886 --> 00:15:06.446 A:middle
want the string to say "request

00:15:07.076 --> 00:15:09.616 A:middle
mobile website" and vice versa.

00:15:09.616 --> 00:15:11.836 A:middle
Okay, so that should make sense,

00:15:11.886 --> 00:15:13.176 A:middle
but the question is "How do we

00:15:13.176 --> 00:15:14.196 A:middle
keep track of

00:15:14.196 --> 00:15:15.006 A:middle
currentContentMode?"

00:15:15.176 --> 00:15:16.126 A:middle
How we know what it is?

00:15:17.046 --> 00:15:18.986 A:middle
Well, I'm going to scroll down

00:15:18.986 --> 00:15:21.076 A:middle
here where I've implemented my

00:15:21.076 --> 00:15:23.456 A:middle
WKNavigation delegate, namely

00:15:23.456 --> 00:15:24.926 A:middle
the didCommit navigation method,

00:15:25.646 --> 00:15:26.796 A:middle
and what I'm going to do here is

00:15:27.346 --> 00:15:29.666 A:middle
use a new API in iOS 13.

00:15:30.406 --> 00:15:32.716 A:middle
So in iOS 13, the WKNavigation

00:15:32.966 --> 00:15:34.026 A:middle
has a new property called

00:15:34.026 --> 00:15:35.366 A:middle
effectiveContentMode.

00:15:36.046 --> 00:15:37.306 A:middle
This is only ever going to be

00:15:37.516 --> 00:15:39.596 A:middle
mobile or desktop and is perfect

00:15:39.596 --> 00:15:40.396 A:middle
for my use case.

00:15:41.266 --> 00:15:42.496 A:middle
What I can do is set

00:15:42.496 --> 00:15:43.976 A:middle
currentContentMode equal to the

00:15:43.976 --> 00:15:45.446 A:middle
navigation's effective content

00:15:45.446 --> 00:15:46.746 A:middle
mode when I commit a navigation,

00:15:47.256 --> 00:15:48.076 A:middle
and that should help me keep

00:15:48.076 --> 00:15:49.566 A:middle
track of what content is

00:15:49.566 --> 00:15:50.386 A:middle
currently being loaded.

00:15:51.436 --> 00:15:52.746 A:middle
So now, I should be showing the

00:15:52.746 --> 00:15:53.226 A:middle
right string.

00:15:54.556 --> 00:15:55.366 A:middle
But I want to draw your

00:15:55.366 --> 00:15:56.626 A:middle
attention back to this action

00:15:56.626 --> 00:15:56.986 A:middle
handler.

00:15:58.146 --> 00:15:59.306 A:middle
We still need a way to say,

00:15:59.456 --> 00:16:00.886 A:middle
"Let's prefer to load mobile or

00:15:59.456 --> 00:16:00.886 A:middle
"Let's prefer to load mobile or

00:16:00.886 --> 00:16:02.456 A:middle
desktop content for given host

00:16:02.456 --> 00:16:02.636 A:middle
name."

00:16:03.476 --> 00:16:04.896 A:middle
To do this, what we're going to

00:16:04.896 --> 00:16:07.226 A:middle
do is save a dictionary of host

00:16:07.226 --> 00:16:10.346 A:middle
names to content modes, be it

00:16:10.346 --> 00:16:12.216 A:middle
mobile or desktop, whatever the

00:16:12.216 --> 00:16:13.396 A:middle
user is tapping.

00:16:14.776 --> 00:16:15.936 A:middle
So I'm going to implement the

00:16:15.936 --> 00:16:18.366 A:middle
action handler now, and what I'm

00:16:18.366 --> 00:16:20.086 A:middle
going to do here is simply get

00:16:20.086 --> 00:16:22.356 A:middle
the host name and set that in

00:16:22.356 --> 00:16:23.536 A:middle
the dictionary to either mobile

00:16:23.536 --> 00:16:24.156 A:middle
or desktop.

00:16:24.826 --> 00:16:25.776 A:middle
Then I'm going to tell the web

00:16:25.776 --> 00:16:26.436 A:middle
view to reload.

00:16:27.406 --> 00:16:28.616 A:middle
Okay, so this is where we

00:16:28.616 --> 00:16:29.246 A:middle
properly are,

00:16:29.406 --> 00:16:30.866 A:middle
contentModeToRequestForHost

00:16:30.996 --> 00:16:31.506 A:middle
dictionary.

00:16:31.506 --> 00:16:32.716 A:middle
But of course, we still have to

00:16:32.716 --> 00:16:33.336 A:middle
use it somewhere.

00:16:34.036 --> 00:16:35.116 A:middle
So I'm going to scroll down here

00:16:35.336 --> 00:16:36.446 A:middle
back where I have the navigation

00:16:36.446 --> 00:16:38.526 A:middle
delegate, and I'm going to add a

00:16:38.526 --> 00:16:39.146 A:middle
new method.

00:16:40.216 --> 00:16:41.726 A:middle
I'm going to implement, decide

00:16:41.726 --> 00:16:43.576 A:middle
policy for navigationAction.

00:16:44.296 --> 00:16:45.586 A:middle
This is very similar to the

00:16:45.786 --> 00:16:47.236 A:middle
version you might be familiar

00:16:47.236 --> 00:16:49.376 A:middle
with, except, in iOS 13, this

00:16:49.376 --> 00:16:50.786 A:middle
one now contains web page

00:16:50.836 --> 00:16:52.186 A:middle
preferences as a parameter.

00:16:52.186 --> 00:16:53.666 A:middle
So this preferences right here.

00:16:54.196 --> 00:16:55.326 A:middle
So what I can do with these

00:16:55.326 --> 00:16:57.166 A:middle
preferences is set the preferred

00:16:57.166 --> 00:16:58.566 A:middle
content mode equal to the

00:16:58.566 --> 00:16:59.836 A:middle
content mode I would get by

00:16:59.836 --> 00:17:01.156 A:middle
looking it up in my dictionary.

00:16:59.836 --> 00:17:01.156 A:middle
looking it up in my dictionary.

00:17:01.506 --> 00:17:03.166 A:middle
And just as a refresher, this

00:17:03.166 --> 00:17:04.376 A:middle
contentModeToRequestForHost

00:17:04.376 --> 00:17:06.266 A:middle
dictionary is the same one that

00:17:06.266 --> 00:17:07.685 A:middle
we populated up here in the

00:17:07.685 --> 00:17:09.925 A:middle
action handler just a moment

00:17:09.925 --> 00:17:10.116 A:middle
ago.

00:17:11.215 --> 00:17:13.496 A:middle
Okay. Finally, last but not

00:17:13.496 --> 00:17:14.935 A:middle
least, we have to remember to

00:17:15.286 --> 00:17:15.886 A:middle
actually call our

00:17:15.886 --> 00:17:17.136 A:middle
decisionHandler with these new

00:17:17.136 --> 00:17:18.756 A:middle
preferences, and I should be

00:17:18.756 --> 00:17:19.146 A:middle
good to go.

00:17:19.445 --> 00:17:20.866 A:middle
So I'm going to recompile my

00:17:20.866 --> 00:17:22.866 A:middle
app, and let's see how our

00:17:22.866 --> 00:17:23.586 A:middle
feature works.

00:17:24.226 --> 00:17:26.556 A:middle
I'm also going to switch it up

00:17:26.556 --> 00:17:26.935 A:middle
this time.

00:17:27.435 --> 00:17:29.426 A:middle
Instead of Google Docs, let's go

00:17:29.426 --> 00:17:30.456 A:middle
to an image gallery.

00:17:31.476 --> 00:17:33.066 A:middle
So this is the desktop version

00:17:33.066 --> 00:17:34.256 A:middle
of Shiny Pics.

00:17:35.256 --> 00:17:36.646 A:middle
And what I'm going to do here is

00:17:37.146 --> 00:17:39.436 A:middle
use the Extras menu to request

00:17:39.436 --> 00:17:40.216 A:middle
the mobile website.

00:17:41.776 --> 00:17:43.916 A:middle
So this is what the mobile

00:17:43.916 --> 00:17:45.826 A:middle
website looks like, the version

00:17:45.826 --> 00:17:46.676 A:middle
of Shiny Pics.

00:17:47.646 --> 00:17:49.446 A:middle
And, I mean, I can tell it's

00:17:49.446 --> 00:17:50.406 A:middle
kind of the mobile version of

00:17:50.406 --> 00:17:51.486 A:middle
the website, because it really

00:17:51.486 --> 00:17:52.556 A:middle
looks like a page that was

00:17:52.556 --> 00:17:54.926 A:middle
optimized for a phone, not so

00:17:54.926 --> 00:17:55.916 A:middle
much my iPad Pro.

00:17:56.796 --> 00:17:58.186 A:middle
I think on my iPad Pro, I

00:17:58.186 --> 00:17:59.216 A:middle
actually prefer the desktop

00:17:59.256 --> 00:18:00.376 A:middle
version of Shiny Pics.

00:17:59.256 --> 00:18:00.376 A:middle
version of Shiny Pics.

00:18:01.006 --> 00:18:02.506 A:middle
So I'm going to just tap Request

00:18:02.506 --> 00:18:04.486 A:middle
Desktop Website, and I'm back to

00:18:04.486 --> 00:18:05.986 A:middle
the desktop version of Shiny

00:18:05.986 --> 00:18:06.346 A:middle
Pics.

00:18:07.286 --> 00:18:09.536 A:middle
Okay, so to recap, I first

00:18:09.536 --> 00:18:10.806 A:middle
ensured that my browser can load

00:18:10.806 --> 00:18:13.486 A:middle
desktop content, and then I used

00:18:13.486 --> 00:18:15.536 A:middle
new API to implement a Request

00:18:15.536 --> 00:18:16.806 A:middle
Mobile or Desktop Website

00:18:16.856 --> 00:18:17.246 A:middle
feature.

00:18:18.136 --> 00:18:19.916 A:middle
But so far, we've only shown

00:18:19.916 --> 00:18:21.476 A:middle
some new tools for you app

00:18:21.476 --> 00:18:22.576 A:middle
developers in the crowd.

00:18:23.466 --> 00:18:25.406 A:middle
Of course, we have news for web

00:18:25.406 --> 00:18:26.456 A:middle
developers as well.

00:18:27.006 --> 00:18:28.076 A:middle
And to tell you more about it,

00:18:28.556 --> 00:18:30.126 A:middle
I'd like to invite Beth to the

00:18:30.126 --> 00:18:30.576 A:middle
stage.

00:18:31.516 --> 00:18:35.406 A:middle
[ Applause ]

00:18:35.906 --> 00:18:36.856 A:middle
&gt;&gt; Thank you, Wenson.

00:18:37.416 --> 00:18:38.606 A:middle
That was great.

00:18:39.706 --> 00:18:42.496 A:middle
So what does all of this mean

00:18:42.586 --> 00:18:43.576 A:middle
for web developers?

00:18:44.346 --> 00:18:45.666 A:middle
If you have a responsive

00:18:45.666 --> 00:18:47.726 A:middle
website, probably very little is

00:18:47.726 --> 00:18:48.326 A:middle
different now.

00:18:48.626 --> 00:18:50.216 A:middle
But we do have some new tools

00:18:50.216 --> 00:18:52.126 A:middle
that you can use to maintain and

00:18:52.126 --> 00:18:53.586 A:middle
improve your responsive website.

00:18:54.946 --> 00:18:56.836 A:middle
I also have some best practices

00:18:56.836 --> 00:18:58.346 A:middle
to share for web development on

00:18:58.496 --> 00:19:00.146 A:middle
iPad so that whether your site

00:18:58.496 --> 00:19:00.146 A:middle
iPad so that whether your site

00:19:00.146 --> 00:19:02.016 A:middle
is currently responsive or a

00:19:02.016 --> 00:19:03.436 A:middle
big-screen website designed for

00:19:03.436 --> 00:19:05.396 A:middle
desktop computers, you can make

00:19:05.396 --> 00:19:07.126 A:middle
it a truly great experience on

00:19:08.066 --> 00:19:08.266 A:middle
iPad.

00:19:08.996 --> 00:19:10.896 A:middle
There are six new features I'd

00:19:10.896 --> 00:19:11.796 A:middle
like to discuss.

00:19:12.376 --> 00:19:13.336 A:middle
Some of these are purely

00:19:13.336 --> 00:19:14.896 A:middle
developer features like pointer

00:19:14.896 --> 00:19:16.546 A:middle
events, and some are more like

00:19:16.816 --> 00:19:18.266 A:middle
new end user features that have

00:19:18.266 --> 00:19:19.766 A:middle
developer implications like

00:19:19.766 --> 00:19:20.956 A:middle
accelerated scrolling.

00:19:21.746 --> 00:19:23.556 A:middle
Let's start with Pointer events.

00:19:24.926 --> 00:19:26.496 A:middle
One of the biggest problems of

00:19:26.496 --> 00:19:28.196 A:middle
loading desktop content on an

00:19:28.456 --> 00:19:30.596 A:middle
iPad is reconciling mouse and

00:19:30.596 --> 00:19:31.286 A:middle
touch input.

00:19:32.856 --> 00:19:34.406 A:middle
Sometimes websites are written

00:19:34.406 --> 00:19:36.006 A:middle
so that the small-screen version

00:19:36.236 --> 00:19:38.136 A:middle
uses only touch events, and the

00:19:38.136 --> 00:19:39.756 A:middle
big-screen version uses only

00:19:39.756 --> 00:19:40.446 A:middle
mouse events.

00:19:41.086 --> 00:19:42.716 A:middle
Our goal is to keep websites

00:19:42.716 --> 00:19:44.636 A:middle
using only mouse events working

00:19:44.636 --> 00:19:46.576 A:middle
as much as possible on iPad even

00:19:46.576 --> 00:19:47.766 A:middle
though of course there's no

00:19:47.766 --> 00:19:47.996 A:middle
mouse.

00:19:48.916 --> 00:19:51.136 A:middle
So when a user taps, WebKit will

00:19:51.136 --> 00:19:52.686 A:middle
send the mouse-down, mouse-up

00:19:52.686 --> 00:19:53.606 A:middle
and click event for

00:19:53.606 --> 00:19:55.116 A:middle
compatibility just like always.

00:19:55.806 --> 00:19:57.406 A:middle
Most hover events get dispatched

00:19:57.406 --> 00:19:58.786 A:middle
at that time too, and I'll dig

00:19:58.786 --> 00:19:59.716 A:middle
into that more later.

00:20:01.386 --> 00:20:02.516 A:middle
However, mouse move really

00:20:02.516 --> 00:20:04.286 A:middle
doesn't make sense on iPad.

00:20:04.566 --> 00:20:06.326 A:middle
The closest analogy is moving

00:20:06.326 --> 00:20:07.706 A:middle
your finger on the screen, but

00:20:07.706 --> 00:20:08.796 A:middle
that's how you scroll.

00:20:09.406 --> 00:20:12.116 A:middle
So we did try to send mouse-move

00:20:12.116 --> 00:20:13.356 A:middle
events at the same time that we

00:20:13.356 --> 00:20:15.096 A:middle
send touch move, but it actually

00:20:15.096 --> 00:20:16.476 A:middle
caused many more problems than

00:20:16.476 --> 00:20:18.486 A:middle
it solved, so we decided not to

00:20:18.486 --> 00:20:18.996 A:middle
do that.

00:20:18.996 --> 00:20:20.246 A:middle
It conflicted with scrolling.

00:20:21.106 --> 00:20:23.046 A:middle
If you need something like mouse

00:20:23.076 --> 00:20:24.506 A:middle
move, then we have a great

00:20:24.506 --> 00:20:25.686 A:middle
solution, and that's pointer

00:20:25.686 --> 00:20:26.156 A:middle
events.

00:20:27.556 --> 00:20:28.696 A:middle
We added support for pointer

00:20:28.696 --> 00:20:31.166 A:middle
events in WebKit in iOS 13 and

00:20:31.256 --> 00:20:32.176 A:middle
macOS Catalina.

00:20:32.846 --> 00:20:33.936 A:middle
This is a web standard that

00:20:33.936 --> 00:20:35.556 A:middle
provides a layer of abstraction

00:20:35.556 --> 00:20:37.276 A:middle
between user input and your

00:20:37.276 --> 00:20:39.466 A:middle
website, so the same API can be

00:20:39.466 --> 00:20:41.096 A:middle
used for input that comes from a

00:20:41.096 --> 00:20:42.886 A:middle
mouse, from touch, or from a

00:20:42.886 --> 00:20:43.356 A:middle
pencil.

00:20:45.176 --> 00:20:46.246 A:middle
Pointer Events are easy to

00:20:46.246 --> 00:20:46.656 A:middle
adopt.

00:20:46.656 --> 00:20:48.136 A:middle
If you have existing code to

00:20:48.136 --> 00:20:49.486 A:middle
support mouse events on a

00:20:49.486 --> 00:20:50.976 A:middle
desktop that looks like this,

00:20:51.406 --> 00:20:52.416 A:middle
the code to support Pointer

00:20:52.416 --> 00:20:53.746 A:middle
Events is really similar.

00:20:54.636 --> 00:20:55.596 A:middle
Just the event name is

00:20:55.626 --> 00:20:55.946 A:middle
different.

00:20:56.346 --> 00:20:57.976 A:middle
But let me expand the context to

00:20:57.976 --> 00:20:59.596 A:middle
show how I'll really use this.

00:20:59.596 --> 00:21:01.886 A:middle
I'll actually use feature

00:20:59.596 --> 00:21:01.886 A:middle
I'll actually use feature

00:21:01.886 --> 00:21:03.166 A:middle
detection to determine if

00:21:03.216 --> 00:21:04.426 A:middle
pointer events are supported.

00:21:04.426 --> 00:21:06.076 A:middle
I'll keep the mouse-event

00:21:06.076 --> 00:21:07.696 A:middle
listener in order to accommodate

00:21:07.696 --> 00:21:09.416 A:middle
older clients only when pointer

00:21:09.416 --> 00:21:10.536 A:middle
events aren't available.

00:21:11.756 --> 00:21:13.286 A:middle
The PointerEvent object actually

00:21:13.286 --> 00:21:15.006 A:middle
inherits from mouse event, so I

00:21:15.006 --> 00:21:16.206 A:middle
literally don't have to change

00:21:16.206 --> 00:21:17.156 A:middle
anything about my

00:21:17.286 --> 00:21:18.636 A:middle
updateInteraction function to

00:21:18.636 --> 00:21:20.486 A:middle
get this to work unless I want

00:21:20.486 --> 00:21:21.916 A:middle
to take advantage of additional

00:21:21.966 --> 00:21:23.736 A:middle
parameters on PointerEvent that

00:21:23.736 --> 00:21:25.096 A:middle
are specific to mouse or pencil

00:21:25.096 --> 00:21:26.836 A:middle
input, which is huge.

00:21:26.836 --> 00:21:28.946 A:middle
It really is this easy to adopt

00:21:29.006 --> 00:21:30.456 A:middle
pointer events.

00:21:31.456 --> 00:21:33.196 A:middle
Pointer events can coexist with

00:21:33.196 --> 00:21:34.566 A:middle
mouse and touch events.

00:21:34.606 --> 00:21:35.366 A:middle
But be careful when

00:21:35.416 --> 00:21:37.026 A:middle
intermingling event types that

00:21:37.026 --> 00:21:38.976 A:middle
map to the same user action like

00:21:38.976 --> 00:21:39.266 A:middle
here.

00:21:39.916 --> 00:21:41.416 A:middle
There's no else clause, so both

00:21:41.416 --> 00:21:42.196 A:middle
of these events will be

00:21:42.196 --> 00:21:44.156 A:middle
registered, and my function will

00:21:44.156 --> 00:21:45.846 A:middle
be called twice every time the

00:21:45.916 --> 00:21:47.296 A:middle
pointer moves, which might mess

00:21:47.296 --> 00:21:48.266 A:middle
up some of my state.

00:21:49.616 --> 00:21:51.526 A:middle
Also, you don't need to register

00:21:51.526 --> 00:21:53.126 A:middle
all three types of events if you

00:21:53.126 --> 00:21:54.766 A:middle
want to distinguish between

00:21:54.766 --> 00:21:56.326 A:middle
mouse and touch interaction on

00:21:56.326 --> 00:21:57.676 A:middle
devices that support both,

00:21:58.096 --> 00:21:59.306 A:middle
because pointer events allow you

00:21:59.306 --> 00:22:00.196 A:middle
to know the difference.

00:21:59.306 --> 00:22:00.196 A:middle
to know the difference.

00:22:01.576 --> 00:22:03.286 A:middle
If you want to cancel default

00:22:03.286 --> 00:22:04.616 A:middle
web browser behaviors like

00:22:04.686 --> 00:22:06.556 A:middle
scrolling, then on Mac you'll

00:22:06.556 --> 00:22:08.246 A:middle
use preventDefault just like you

00:22:08.246 --> 00:22:09.386 A:middle
would for mouse events.

00:22:09.976 --> 00:22:12.836 A:middle
On iOS, preventDefault won't

00:22:12.836 --> 00:22:14.896 A:middle
lock all browser behaviors, so

00:22:14.896 --> 00:22:16.256 A:middle
you should also use the

00:22:16.256 --> 00:22:18.086 A:middle
touch-action CSS property.

00:22:18.086 --> 00:22:19.866 A:middle
Touch-action is actually really

00:22:19.866 --> 00:22:20.486 A:middle
awesome.

00:22:20.876 --> 00:22:22.046 A:middle
It's easier than writing

00:22:22.046 --> 00:22:23.496 A:middle
JavaScript and it allows you to

00:22:23.496 --> 00:22:25.136 A:middle
make more granular decisions

00:22:25.136 --> 00:22:26.036 A:middle
than preventDefault.

00:22:26.636 --> 00:22:28.636 A:middle
Here I am using it to block all

00:22:28.636 --> 00:22:29.816 A:middle
browser behaviors with the none

00:22:29.816 --> 00:22:31.566 A:middle
value, but I could use it to,

00:22:31.566 --> 00:22:33.216 A:middle
for example, prevent scrolling

00:22:33.356 --> 00:22:34.506 A:middle
but still allow zooming.

00:22:35.436 --> 00:22:37.466 A:middle
Touch-action also enables more

00:22:37.466 --> 00:22:38.786 A:middle
efficient user interactions,

00:22:39.016 --> 00:22:40.576 A:middle
because it's declarative, so

00:22:40.576 --> 00:22:42.446 A:middle
using touch-action and pointer

00:22:42.446 --> 00:22:43.896 A:middle
events on your website may

00:22:43.896 --> 00:22:45.146 A:middle
actually be a performance

00:22:45.146 --> 00:22:45.506 A:middle
improvement.

00:22:47.236 --> 00:22:49.716 A:middle
So we have compatibility mouse

00:22:49.716 --> 00:22:51.366 A:middle
events to keep desktop sites

00:22:51.366 --> 00:22:53.336 A:middle
working, but that's a stopgap on

00:22:53.566 --> 00:22:54.896 A:middle
the iOS, and the solution is

00:22:54.896 --> 00:22:55.466 A:middle
pointer events.

00:22:56.076 --> 00:22:57.026 A:middle
They're easy to adopt.

00:22:57.336 --> 00:22:58.576 A:middle
They let you do everything you

00:22:58.576 --> 00:23:00.166 A:middle
can do today with mouse or touch

00:22:58.576 --> 00:23:00.166 A:middle
can do today with mouse or touch

00:23:00.166 --> 00:23:02.216 A:middle
events, and they ensure quick

00:23:02.216 --> 00:23:03.636 A:middle
responsive user interactions.

00:23:04.386 --> 00:23:05.866 A:middle
This is a great solution to all

00:23:05.866 --> 00:23:07.506 A:middle
of the problems that we face

00:23:07.506 --> 00:23:09.006 A:middle
reconciling mouse and touch

00:23:09.006 --> 00:23:09.336 A:middle
input.

00:23:11.276 --> 00:23:13.226 A:middle
As I mentioned, WebKit also

00:23:13.226 --> 00:23:14.516 A:middle
sends hover events for the sake

00:23:14.516 --> 00:23:15.376 A:middle
of compatibility.

00:23:15.956 --> 00:23:17.706 A:middle
Hover is tricky on touch screen

00:23:17.706 --> 00:23:19.386 A:middle
since the hardware just doesn't

00:23:19.386 --> 00:23:20.496 A:middle
support it.

00:23:20.586 --> 00:23:21.746 A:middle
We've changed the way that mouse

00:23:21.746 --> 00:23:24.066 A:middle
hover detection works in iOS 13

00:23:24.326 --> 00:23:26.846 A:middle
to keep desktop sites that rely

00:23:26.846 --> 00:23:29.116 A:middle
on it working well.

00:23:30.596 --> 00:23:32.306 A:middle
If you tap on an element in a

00:23:32.306 --> 00:23:34.246 A:middle
web page, the response to hover

00:23:34.486 --> 00:23:36.246 A:middle
will perform that hover, and if

00:23:36.246 --> 00:23:37.786 A:middle
a meaningful change has happened

00:23:37.786 --> 00:23:39.876 A:middle
in a web page as a result of the

00:23:39.876 --> 00:23:41.196 A:middle
hover, will stop there.

00:23:42.426 --> 00:23:44.426 A:middle
The user can tap a second time

00:23:44.426 --> 00:23:47.416 A:middle
if they wanted to click.

00:23:47.586 --> 00:23:50.286 A:middle
In iOS 13, WebKit detects many

00:23:50.286 --> 00:23:52.046 A:middle
more changes as meaningful than

00:23:52.216 --> 00:23:52.796 A:middle
ever before.

00:23:53.206 --> 00:23:54.816 A:middle
This adds critical functionality

00:23:54.816 --> 00:23:56.626 A:middle
to many desktop websites that

00:23:56.626 --> 00:23:58.596 A:middle
rely on hover for essential

00:23:58.596 --> 00:24:00.466 A:middle
parts of the web page like this

00:23:58.596 --> 00:24:00.466 A:middle
parts of the web page like this

00:24:00.466 --> 00:24:01.676 A:middle
web page which uses it for

00:24:01.676 --> 00:24:02.086 A:middle
menus.

00:24:02.836 --> 00:24:05.186 A:middle
We're finding that this is

00:24:05.186 --> 00:24:06.626 A:middle
working really well, but

00:24:06.626 --> 00:24:07.656 A:middle
fundamentally this is a

00:24:07.656 --> 00:24:08.746 A:middle
heuristic where the browser

00:24:08.746 --> 00:24:10.246 A:middle
engine is trying to interpret

00:24:10.246 --> 00:24:11.716 A:middle
design intent, so it won't

00:24:11.916 --> 00:24:12.966 A:middle
always be perfect.

00:24:13.796 --> 00:24:15.116 A:middle
We have some best practices to

00:24:15.116 --> 00:24:16.686 A:middle
keep in mind when you're using

00:24:16.686 --> 00:24:17.096 A:middle
hover.

00:24:18.486 --> 00:24:20.156 A:middle
First, you should always provide

00:24:20.246 --> 00:24:22.576 A:middle
another way to access meaningful

00:24:22.576 --> 00:24:24.346 A:middle
content just in case WebKit

00:24:24.346 --> 00:24:25.186 A:middle
misses something.

00:24:25.606 --> 00:24:26.406 A:middle
This is important for

00:24:26.476 --> 00:24:27.536 A:middle
accessibility too.

00:24:27.816 --> 00:24:29.286 A:middle
Wenson will dig into this later

00:24:29.346 --> 00:24:31.226 A:middle
with the demo.

00:24:31.636 --> 00:24:33.216 A:middle
You should also avoid forcing

00:24:33.216 --> 00:24:35.026 A:middle
the user to tap twice for the

00:24:35.026 --> 00:24:36.486 A:middle
most common interactions.

00:24:37.346 --> 00:24:38.866 A:middle
Remember, if WebKit detects that

00:24:38.866 --> 00:24:40.556 A:middle
a meaningful change happened on

00:24:40.556 --> 00:24:42.106 A:middle
hover, that means that the user

00:24:42.106 --> 00:24:43.876 A:middle
has to tap a second time if they

00:24:43.876 --> 00:24:44.956 A:middle
actually wanted to click.

00:24:45.416 --> 00:24:46.766 A:middle
So if you have an element on

00:24:46.766 --> 00:24:48.576 A:middle
your page where you think users

00:24:48.576 --> 00:24:50.066 A:middle
will far more often want to

00:24:50.066 --> 00:24:51.406 A:middle
perform that click than they

00:24:51.406 --> 00:24:53.266 A:middle
will want to see or interact

00:24:53.266 --> 00:24:55.136 A:middle
with the hover content, then

00:24:55.136 --> 00:24:56.776 A:middle
consider making some changes to

00:24:56.776 --> 00:24:58.706 A:middle
avoid that two-tap speed bump

00:24:58.746 --> 00:25:00.146 A:middle
that you get from using hover on

00:24:58.746 --> 00:25:00.146 A:middle
that you get from using hover on

00:25:00.146 --> 00:25:01.056 A:middle
clickable elements.

00:25:02.556 --> 00:25:04.526 A:middle
Speaking of efficiency, keep

00:25:04.526 --> 00:25:05.476 A:middle
hover snappy.

00:25:05.766 --> 00:25:07.556 A:middle
If you start timers in response

00:25:07.556 --> 00:25:09.366 A:middle
to hover, WebKit will wait for

00:25:09.366 --> 00:25:11.176 A:middle
those timers to fire in case

00:25:11.176 --> 00:25:12.936 A:middle
meaningful content is added to

00:25:12.936 --> 00:25:14.536 A:middle
the web page on a delay.

00:25:15.196 --> 00:25:16.706 A:middle
In a worst-case scenario,

00:25:17.366 --> 00:25:19.386 A:middle
something starts the timer, but

00:25:19.386 --> 00:25:21.116 A:middle
then nothing meaningful happens,

00:25:21.286 --> 00:25:22.766 A:middle
so WebKit automatically performs

00:25:22.766 --> 00:25:23.176 A:middle
the click.

00:25:23.506 --> 00:25:24.676 A:middle
But in the meantime, waited

00:25:24.676 --> 00:25:26.296 A:middle
several 100 milliseconds longer

00:25:26.296 --> 00:25:27.676 A:middle
than usual, and the tap feels

00:25:27.676 --> 00:25:28.606 A:middle
slow to the user.

00:25:29.236 --> 00:25:32.596 A:middle
We believe that we've made mouse

00:25:32.596 --> 00:25:34.086 A:middle
hover detection better than ever

00:25:34.086 --> 00:25:34.866 A:middle
on iOS.

00:25:35.186 --> 00:25:36.616 A:middle
Still, we suggest that you use

00:25:36.616 --> 00:25:38.036 A:middle
it only as progressive

00:25:38.036 --> 00:25:39.476 A:middle
enhancement and make sure your

00:25:39.526 --> 00:25:41.006 A:middle
site works great even without

00:25:41.006 --> 00:25:41.326 A:middle
hover.

00:25:41.856 --> 00:25:45.666 A:middle
WebKit on iOS has always had

00:25:45.666 --> 00:25:47.136 A:middle
hardware accelerated scrolling

00:25:47.136 --> 00:25:48.676 A:middle
for the mainframe, but I'm

00:25:48.676 --> 00:25:50.616 A:middle
delighted to say that WebKit now

00:25:50.616 --> 00:25:51.806 A:middle
has hardware accelerated

00:25:51.806 --> 00:25:53.636 A:middle
scrolling everywhere, meaning

00:25:53.636 --> 00:25:55.136 A:middle
that subframes and overflow

00:25:55.136 --> 00:25:57.286 A:middle
scroll regions now have buttery

00:25:57.286 --> 00:25:59.096 A:middle
smooth fast scrolling out of the

00:25:59.096 --> 00:26:00.616 A:middle
box just like the mainframe.

00:25:59.096 --> 00:26:00.616 A:middle
box just like the mainframe.

00:26:01.516 --> 00:26:06.836 A:middle
[ Applause ]

00:26:07.336 --> 00:26:07.916 A:middle
That's right.

00:26:07.916 --> 00:26:09.346 A:middle
Even subframes.

00:26:09.616 --> 00:26:11.676 A:middle
On older versions of iOS, WebKit

00:26:11.676 --> 00:26:13.336 A:middle
would force subframes to be the

00:26:13.336 --> 00:26:15.266 A:middle
full size of their contents, so

00:26:15.266 --> 00:26:16.526 A:middle
they didn't actually scroll

00:26:16.526 --> 00:26:18.106 A:middle
individually and could end up

00:26:18.106 --> 00:26:19.516 A:middle
being much larger than you

00:26:19.516 --> 00:26:21.336 A:middle
defined them to be in your code.

00:26:21.766 --> 00:26:23.706 A:middle
Now on iPad, frames will be the

00:26:23.776 --> 00:26:25.356 A:middle
size that you specify, and

00:26:25.546 --> 00:26:27.126 A:middle
they'll be able to scroll just

00:26:27.126 --> 00:26:28.566 A:middle
like you expect from a desktop

00:26:28.566 --> 00:26:29.026 A:middle
browser.

00:26:30.216 --> 00:26:32.286 A:middle
This has been such a commonly

00:26:32.286 --> 00:26:34.076 A:middle
requested feature that there

00:26:34.076 --> 00:26:35.706 A:middle
were two popular ways to work

00:26:35.706 --> 00:26:37.476 A:middle
around the fact that WebKit did

00:26:37.476 --> 00:26:38.856 A:middle
not have support for this by

00:26:38.856 --> 00:26:39.286 A:middle
default.

00:26:39.636 --> 00:26:42.056 A:middle
First, we added a CSS property

00:26:42.306 --> 00:26:43.836 A:middle
-webkit-overflow-scrolling:

00:26:43.906 --> 00:26:45.926 A:middle
touch; that developers could opt

00:26:45.926 --> 00:26:47.506 A:middle
into when fast scrolling made

00:26:47.506 --> 00:26:48.246 A:middle
sense for them.

00:26:49.076 --> 00:26:51.056 A:middle
We never made this the default,

00:26:51.056 --> 00:26:51.896 A:middle
because it creates a CSS

00:26:51.896 --> 00:26:54.406 A:middle
stacking context which affects

00:26:54.406 --> 00:26:55.896 A:middle
the front to back layering of

00:26:55.896 --> 00:26:57.176 A:middle
elements on your page.

00:26:57.586 --> 00:26:59.696 A:middle
And second, some of you built or

00:26:59.696 --> 00:27:01.806 A:middle
used JavaScript libraries that

00:26:59.696 --> 00:27:01.806 A:middle
used JavaScript libraries that

00:27:01.806 --> 00:27:03.366 A:middle
would use touch events to

00:27:03.366 --> 00:27:04.736 A:middle
emulate fast scrolling.

00:27:05.406 --> 00:27:06.866 A:middle
Neither of those techniques is

00:27:06.866 --> 00:27:07.526 A:middle
needed now.

00:27:07.726 --> 00:27:09.236 A:middle
And in fact, WebKit overflow

00:27:09.236 --> 00:27:13.166 A:middle
scrolling touch a no-op on iPad.

00:27:13.376 --> 00:27:15.606 A:middle
So you should test how hardware

00:27:15.606 --> 00:27:17.386 A:middle
accelerated scrolling everywhere

00:27:17.386 --> 00:27:19.266 A:middle
affects your content, and if you

00:27:19.266 --> 00:27:20.546 A:middle
were using a technique to work

00:27:20.546 --> 00:27:21.836 A:middle
around the absence of this

00:27:21.836 --> 00:27:23.526 A:middle
feature in the past, you may not

00:27:23.526 --> 00:27:24.186 A:middle
need it anymore.

00:27:24.416 --> 00:27:27.746 A:middle
Next, I want to tell you about

00:27:27.746 --> 00:27:29.576 A:middle
our new automatic viewport and

00:27:29.576 --> 00:27:31.046 A:middle
text sizing behaviors.

00:27:31.776 --> 00:27:34.246 A:middle
We developed our new automatic

00:27:34.246 --> 00:27:35.816 A:middle
behaviors because web pages

00:27:35.816 --> 00:27:37.766 A:middle
should fit with legible text on

00:27:38.626 --> 00:27:38.746 A:middle
iPad.

00:27:39.076 --> 00:27:40.636 A:middle
To elaborate, websites that

00:27:40.636 --> 00:27:42.036 A:middle
weren't necessarily built for

00:27:42.256 --> 00:27:44.136 A:middle
iPad should display to fit on

00:27:44.326 --> 00:27:45.656 A:middle
iPad, meaning that they

00:27:45.656 --> 00:27:47.286 A:middle
shouldn't scroll horizontally

00:27:47.286 --> 00:27:48.756 A:middle
unless they were designed to do

00:27:48.756 --> 00:27:51.586 A:middle
so, and all text should be

00:27:51.586 --> 00:27:53.506 A:middle
comfortably legible for most

00:27:53.506 --> 00:27:54.656 A:middle
people without additional

00:27:54.656 --> 00:27:55.076 A:middle
zooming.

00:27:56.536 --> 00:27:58.396 A:middle
We need automatic behaviors to

00:27:58.396 --> 00:27:59.906 A:middle
achieve these goals, because

00:27:59.936 --> 00:28:01.466 A:middle
some desktop websites are built

00:27:59.936 --> 00:28:01.466 A:middle
some desktop websites are built

00:28:01.466 --> 00:28:02.956 A:middle
in a fixed width that is wider

00:28:02.956 --> 00:28:03.866 A:middle
than an iPad.

00:28:05.566 --> 00:28:07.056 A:middle
We found that a number of sites

00:28:07.056 --> 00:28:08.506 A:middle
that are very wide like this one

00:28:08.806 --> 00:28:10.966 A:middle
also declare incorrectly to be

00:28:10.966 --> 00:28:12.416 A:middle
responsive in the viewport meta

00:28:12.476 --> 00:28:13.796 A:middle
tag, which is kind of

00:28:13.796 --> 00:28:14.296 A:middle
unfortunate.

00:28:14.296 --> 00:28:16.136 A:middle
Let me step back and explain

00:28:16.136 --> 00:28:17.666 A:middle
what I mean by that.

00:28:18.296 --> 00:28:19.686 A:middle
The viewport meta tag was

00:28:19.686 --> 00:28:21.306 A:middle
originally created to address

00:28:21.516 --> 00:28:22.886 A:middle
problems that can result from

00:28:22.886 --> 00:28:24.666 A:middle
displaying content that was

00:28:24.786 --> 00:28:26.286 A:middle
built for a desktop computer on

00:28:26.286 --> 00:28:27.036 A:middle
a small screen.

00:28:27.436 --> 00:28:28.846 A:middle
So it's perfect for this, right?

00:28:29.706 --> 00:28:31.476 A:middle
Well, this particular viewport

00:28:31.476 --> 00:28:33.016 A:middle
value is meant as a promise to

00:28:33.016 --> 00:28:34.416 A:middle
the browser engine that the

00:28:34.416 --> 00:28:35.446 A:middle
website was designed

00:28:35.446 --> 00:28:37.006 A:middle
responsively, meaning that it

00:28:37.006 --> 00:28:39.256 A:middle
will adaptively reflow as the

00:28:39.256 --> 00:28:40.446 A:middle
window size changes.

00:28:41.426 --> 00:28:43.326 A:middle
In previous versions of iOS, we

00:28:43.326 --> 00:28:44.416 A:middle
would typically take this

00:28:44.416 --> 00:28:46.276 A:middle
promise at face value, and we

00:28:46.276 --> 00:28:47.776 A:middle
wouldn't apply any automatic

00:28:47.776 --> 00:28:49.786 A:middle
viewport adjustments on websites

00:28:49.786 --> 00:28:51.336 A:middle
with a meta tag of width equals

00:28:51.336 --> 00:28:52.816 A:middle
device width and initial scale

00:28:52.816 --> 00:28:53.436 A:middle
equals 1.

00:28:54.856 --> 00:28:56.546 A:middle
But that led to a bad experience

00:28:56.546 --> 00:28:58.016 A:middle
on many desktop websites on

00:28:58.216 --> 00:28:58.526 A:middle
iPad.

00:28:59.166 --> 00:29:00.546 A:middle
This site should be able to fit,

00:28:59.166 --> 00:29:00.546 A:middle
This site should be able to fit,

00:29:00.546 --> 00:29:01.136 A:middle
but it didn't.

00:29:01.696 --> 00:29:05.906 A:middle
So new in iPadOS, WebKit will

00:29:05.906 --> 00:29:07.496 A:middle
ignore the meta tag if it

00:29:07.496 --> 00:29:09.316 A:middle
promises to be responsive but

00:29:09.316 --> 00:29:10.646 A:middle
then actually lays out to the

00:29:10.646 --> 00:29:11.886 A:middle
width that is greater than the

00:29:11.886 --> 00:29:12.466 A:middle
device width.

00:29:13.256 --> 00:29:14.446 A:middle
We found that this results in a

00:29:14.446 --> 00:29:16.086 A:middle
much better experience overall.

00:29:17.466 --> 00:29:18.836 A:middle
If your website is designed to

00:29:18.836 --> 00:29:20.646 A:middle
scroll horizontally and is

00:29:20.646 --> 00:29:22.236 A:middle
incorrectly being scaled down,

00:29:22.466 --> 00:29:23.496 A:middle
you have an easy fix.

00:29:24.686 --> 00:29:25.836 A:middle
You just need to add one more

00:29:25.836 --> 00:29:27.376 A:middle
value to your viewport meta tag,

00:29:27.716 --> 00:29:28.966 A:middle
shrink-to-fit=no.

00:29:29.436 --> 00:29:30.806 A:middle
This is not a new value.

00:29:31.016 --> 00:29:33.076 A:middle
We added this in iOS 9 because

00:29:33.076 --> 00:29:34.556 A:middle
we ran into the same problem

00:29:34.556 --> 00:29:35.876 A:middle
with websites in Split View or

00:29:35.876 --> 00:29:36.566 A:middle
Slide Over.

00:29:37.136 --> 00:29:38.976 A:middle
So shrink-to-fit=no will now

00:29:38.976 --> 00:29:40.996 A:middle
prevent automatic shrinking for

00:29:41.136 --> 00:29:43.066 A:middle
websites in Split View, Slide

00:29:43.066 --> 00:29:44.816 A:middle
Over and for wide desktop

00:29:44.816 --> 00:29:45.266 A:middle
websites.

00:29:47.136 --> 00:29:48.436 A:middle
You may have noticed that even

00:29:48.436 --> 00:29:50.016 A:middle
though the boxes on this website

00:29:50.426 --> 00:29:51.576 A:middle
shrank down to fit in the

00:29:51.576 --> 00:29:53.166 A:middle
viewport, the text in the header

00:29:53.166 --> 00:29:54.866 A:middle
actually got bigger, and that's

00:29:55.056 --> 00:29:56.256 A:middle
because we'll automatically

00:29:56.256 --> 00:29:57.636 A:middle
adjust the text size on web

00:29:57.636 --> 00:29:59.796 A:middle
pages that have been shrunk down

00:29:59.796 --> 00:30:01.546 A:middle
in this manner in order to keep

00:29:59.796 --> 00:30:01.546 A:middle
in this manner in order to keep

00:30:01.606 --> 00:30:02.826 A:middle
the text legible.

00:30:04.116 --> 00:30:05.616 A:middle
If you want to control the

00:30:05.616 --> 00:30:07.426 A:middle
viewport and text size on your

00:30:07.426 --> 00:30:09.596 A:middle
website, the very best thing you

00:30:09.596 --> 00:30:11.126 A:middle
can do is to adopt responsive

00:30:11.126 --> 00:30:12.596 A:middle
design and ensure that your

00:30:12.596 --> 00:30:14.676 A:middle
content adaptively lays out to

00:30:14.676 --> 00:30:15.846 A:middle
fit any window size.

00:30:16.476 --> 00:30:17.866 A:middle
Responsive design is a dense

00:30:17.866 --> 00:30:19.456 A:middle
topic, so I won't attempt to

00:30:19.456 --> 00:30:21.156 A:middle
give a tutorial here, but there

00:30:21.156 --> 00:30:22.636 A:middle
are lots of great ones online.

00:30:23.246 --> 00:30:26.526 A:middle
So in summary, WebKit has new

00:30:26.526 --> 00:30:27.706 A:middle
viewport and text sizing

00:30:27.706 --> 00:30:29.576 A:middle
behaviors that make web pages

00:30:29.656 --> 00:30:30.816 A:middle
fit with legible text.

00:30:31.696 --> 00:30:32.886 A:middle
The best way to control this

00:30:32.886 --> 00:30:34.476 A:middle
from your end is to adopt

00:30:34.476 --> 00:30:36.296 A:middle
responsive design, and if you

00:30:36.296 --> 00:30:37.426 A:middle
have a website that is meant to

00:30:37.426 --> 00:30:39.176 A:middle
scroll horizontally, then you

00:30:39.176 --> 00:30:40.586 A:middle
can get everything right with

00:30:40.586 --> 00:30:41.316 A:middle
the viewport meta tag.

00:30:41.316 --> 00:30:45.336 A:middle
Next, I want to tell you about

00:30:45.336 --> 00:30:46.966 A:middle
the visual viewport API.

00:30:48.076 --> 00:30:49.336 A:middle
To do that, I first want to make

00:30:49.336 --> 00:30:51.096 A:middle
a distinction between the visual

00:30:51.096 --> 00:30:52.246 A:middle
viewport and the layout

00:30:52.306 --> 00:30:52.766 A:middle
viewport.

00:30:53.386 --> 00:30:54.646 A:middle
We were just talking about our

00:30:54.646 --> 00:30:56.436 A:middle
automatic viewport sizing

00:30:56.436 --> 00:30:58.326 A:middle
behaviors and the viewport meta

00:30:58.406 --> 00:30:58.706 A:middle
tag.

00:30:59.056 --> 00:31:00.366 A:middle
Those are used to define the

00:30:59.056 --> 00:31:00.366 A:middle
Those are used to define the

00:31:00.366 --> 00:31:01.986 A:middle
layout viewport along with the

00:31:01.986 --> 00:31:03.136 A:middle
screen and window size.

00:31:04.626 --> 00:31:06.126 A:middle
The window size can change when

00:31:06.126 --> 00:31:08.036 A:middle
the user enters or adjusts split

00:31:08.036 --> 00:31:08.456 A:middle
screen.

00:31:08.826 --> 00:31:10.646 A:middle
Responsively designed websites

00:31:10.646 --> 00:31:12.486 A:middle
will react to that change using

00:31:12.486 --> 00:31:14.276 A:middle
media queries or perhaps by

00:31:14.276 --> 00:31:15.526 A:middle
listening to the resize event

00:31:15.526 --> 00:31:16.276 A:middle
and JavaScript.

00:31:16.986 --> 00:31:18.766 A:middle
Max and min with media queries

00:31:18.926 --> 00:31:20.136 A:middle
will be assessed whenever the

00:31:20.136 --> 00:31:22.106 A:middle
layout viewport changes, and the

00:31:22.106 --> 00:31:23.476 A:middle
resize event will fire then as

00:31:23.476 --> 00:31:23.716 A:middle
well.

00:31:24.066 --> 00:31:25.526 A:middle
So if the user rotates the

00:31:25.526 --> 00:31:27.366 A:middle
device, the layout viewport

00:31:27.366 --> 00:31:29.056 A:middle
changes again, and your content

00:31:29.056 --> 00:31:30.066 A:middle
can react to it with one of

00:31:30.066 --> 00:31:30.706 A:middle
these techniques.

00:31:32.286 --> 00:31:33.376 A:middle
But then there's the keyboard.

00:31:34.136 --> 00:31:35.146 A:middle
The keyboard presents us an

00:31:35.146 --> 00:31:37.016 A:middle
overlay, so it doesn't change

00:31:37.016 --> 00:31:38.856 A:middle
the layout viewport, and media

00:31:38.856 --> 00:31:40.186 A:middle
queries and the resize event

00:31:40.276 --> 00:31:40.896 A:middle
don't react.

00:31:40.896 --> 00:31:43.816 A:middle
So if the user taps on the name

00:31:43.816 --> 00:31:46.576 A:middle
field here, the keyboard comes

00:31:46.576 --> 00:31:46.876 A:middle
up.

00:31:46.876 --> 00:31:48.526 A:middle
And clearly, that's affected

00:31:48.526 --> 00:31:49.976 A:middle
what's visually onscreen.

00:31:50.376 --> 00:31:51.446 A:middle
That's what defined by the

00:31:51.446 --> 00:31:52.436 A:middle
visual viewport.

00:31:53.376 --> 00:31:54.966 A:middle
The layout viewport here is the

00:31:54.966 --> 00:31:57.086 A:middle
normal window size, and the

00:31:57.086 --> 00:31:58.826 A:middle
visual viewport is the section

00:31:58.896 --> 00:32:00.286 A:middle
that is currently visible and

00:31:58.896 --> 00:32:00.286 A:middle
that is currently visible and

00:32:00.356 --> 00:32:01.216 A:middle
unobscured.

00:32:02.206 --> 00:32:03.476 A:middle
We've heard for a long time that

00:32:03.476 --> 00:32:04.806 A:middle
developers want to react to

00:32:04.856 --> 00:32:06.676 A:middle
changes in the visual viewport.

00:32:07.186 --> 00:32:08.526 A:middle
In this sample web page, for

00:32:08.526 --> 00:32:10.326 A:middle
example, the Donate button is

00:32:10.326 --> 00:32:11.756 A:middle
now obscured, and the site would

00:32:11.756 --> 00:32:13.206 A:middle
be more useable if it always

00:32:13.206 --> 00:32:13.996 A:middle
stayed onscreen.

00:32:14.926 --> 00:32:16.996 A:middle
In iOS 13, we can finally

00:32:16.996 --> 00:32:18.936 A:middle
address this problem with a W3C

00:32:18.936 --> 00:32:20.756 A:middle
standard visual viewport API.

00:32:21.536 --> 00:32:24.686 A:middle
You can use this API to monitor

00:32:24.686 --> 00:32:25.946 A:middle
the resize of the visual

00:32:25.946 --> 00:32:26.396 A:middle
viewport.

00:32:26.776 --> 00:32:27.956 A:middle
This event will fire when the

00:32:27.956 --> 00:32:29.736 A:middle
keyboard goes on or off-screen.

00:32:29.736 --> 00:32:31.866 A:middle
And it will also fire in Safari

00:32:32.076 --> 00:32:33.226 A:middle
as the smart search field

00:32:33.226 --> 00:32:34.606 A:middle
collapses while scrolling.

00:32:34.606 --> 00:32:38.196 A:middle
Now I can keep the Donate button

00:32:38.196 --> 00:32:38.686 A:middle
visible.

00:32:38.686 --> 00:32:42.626 A:middle
We think the visual viewport API

00:32:42.906 --> 00:32:44.276 A:middle
is a great tool for taking

00:32:44.276 --> 00:32:45.946 A:middle
advantage of the big iPad

00:32:45.946 --> 00:32:46.376 A:middle
screen.

00:32:46.946 --> 00:32:49.786 A:middle
Let's talk about streaming

00:32:49.786 --> 00:32:50.206 A:middle
video.

00:32:50.796 --> 00:32:52.496 A:middle
Those of you who offer streaming

00:32:52.496 --> 00:32:54.106 A:middle
premium video content in web

00:32:54.136 --> 00:32:56.496 A:middle
browsers probably already know

00:32:56.826 --> 00:32:59.716 A:middle
that HTTP Live Streaming or HLS

00:33:00.056 --> 00:33:03.736 A:middle
is the best way to do it.

00:33:03.736 --> 00:33:05.976 A:middle
HLS is available on iPhone, iPad

00:33:05.976 --> 00:33:06.456 A:middle
and Mac.

00:33:06.456 --> 00:33:08.526 A:middle
It's an easy solution to a hard

00:33:08.526 --> 00:33:10.036 A:middle
problem, because it does all of

00:33:10.036 --> 00:33:11.056 A:middle
the heavy lifting for you.

00:33:11.606 --> 00:33:13.396 A:middle
It works well with CDNs, and you

00:33:13.396 --> 00:33:14.416 A:middle
get things like AirPlay

00:33:14.416 --> 00:33:15.536 A:middle
integration for free.

00:33:16.746 --> 00:33:18.476 A:middle
However, some desktop content

00:33:18.476 --> 00:33:20.116 A:middle
uses Media Source Extensions or

00:33:20.346 --> 00:33:21.076 A:middle
MSE instead.

00:33:22.136 --> 00:33:24.256 A:middle
MSE is an API that enables video

00:33:24.256 --> 00:33:26.356 A:middle
providers to have explicit

00:33:26.356 --> 00:33:27.616 A:middle
control of the data that is

00:33:27.616 --> 00:33:28.476 A:middle
served to the user.

00:33:28.566 --> 00:33:30.306 A:middle
For example, you can manually

00:33:30.306 --> 00:33:31.976 A:middle
upgrade or downgrade video

00:33:31.976 --> 00:33:33.496 A:middle
quality in response to bandwidth

00:33:33.496 --> 00:33:34.016 A:middle
changes.

00:33:34.766 --> 00:33:36.076 A:middle
If you have existing content

00:33:36.076 --> 00:33:38.116 A:middle
that uses MSE, I have great news

00:33:38.116 --> 00:33:38.406 A:middle
for you.

00:33:39.336 --> 00:33:40.946 A:middle
MSE is available for desktop

00:33:40.946 --> 00:33:42.896 A:middle
sites on iPad for the first time

00:33:42.936 --> 00:33:43.686 A:middle
in iPadOS.

00:33:44.816 --> 00:33:46.496 A:middle
If you have an existing engine

00:33:46.796 --> 00:33:48.776 A:middle
that uses MSE for your desktop

00:33:48.776 --> 00:33:50.976 A:middle
site, it just works on iPad.

00:33:50.976 --> 00:33:52.116 A:middle
And if you use a JavaScript

00:33:52.116 --> 00:33:53.836 A:middle
library that implements an MSE

00:33:53.836 --> 00:33:57.136 A:middle
engine, that will work too.

00:33:57.366 --> 00:33:59.056 A:middle
With both HLS and MSE as

00:33:59.056 --> 00:34:00.966 A:middle
options, streaming video is more

00:33:59.056 --> 00:34:00.966 A:middle
options, streaming video is more

00:34:00.966 --> 00:34:03.166 A:middle
powerful than ever in Safari on

00:34:03.666 --> 00:34:03.806 A:middle
iPad.

00:34:04.736 --> 00:34:06.476 A:middle
These new features should help

00:34:06.476 --> 00:34:08.196 A:middle
you make your web content sing

00:34:08.196 --> 00:34:08.866 A:middle
on iPad.

00:34:09.126 --> 00:34:10.235 A:middle
I talked about some best

00:34:10.235 --> 00:34:12.255 A:middle
practices along the way, but I

00:34:12.255 --> 00:34:13.426 A:middle
have a few more to share.

00:34:13.996 --> 00:34:16.926 A:middle
Best practices help us zoom out.

00:34:17.206 --> 00:34:18.396 A:middle
They guide this platform

00:34:18.396 --> 00:34:19.926 A:middle
transition, but they take us

00:34:19.926 --> 00:34:21.456 A:middle
into the future as our platforms

00:34:21.726 --> 00:34:23.126 A:middle
continue to grow and evolve.

00:34:24.815 --> 00:34:26.996 A:middle
First and most importantly, we

00:34:26.996 --> 00:34:28.065 A:middle
believe that you should build

00:34:28.226 --> 00:34:30.456 A:middle
one responsive website instead

00:34:30.456 --> 00:34:32.446 A:middle
of building parallel desktop and

00:34:32.446 --> 00:34:33.216 A:middle
mobile sites.

00:34:34.076 --> 00:34:35.516 A:middle
I know this is easier said than

00:34:35.516 --> 00:34:37.166 A:middle
done, but we really believe in

00:34:37.166 --> 00:34:38.466 A:middle
using this suite of responsive

00:34:38.466 --> 00:34:40.406 A:middle
design techniques to build a

00:34:40.406 --> 00:34:41.226 A:middle
single site.

00:34:41.926 --> 00:34:42.806 A:middle
And you should use feature

00:34:42.806 --> 00:34:44.766 A:middle
detection instead of user agent

00:34:44.766 --> 00:34:45.186 A:middle
sniffing.

00:34:45.186 --> 00:34:47.835 A:middle
In the past, some developers

00:34:47.835 --> 00:34:49.446 A:middle
have wanted to know the user

00:34:49.446 --> 00:34:51.206 A:middle
agent to specifically identify

00:34:51.206 --> 00:34:53.456 A:middle
iPad, but our new desktop user

00:34:53.456 --> 00:34:55.346 A:middle
agent on iPad will prevent you

00:34:55.346 --> 00:34:55.976 A:middle
from doing this.

00:34:55.976 --> 00:34:57.966 A:middle
I want to convince you that you

00:34:57.966 --> 00:34:59.336 A:middle
don't need to know your content

00:34:59.336 --> 00:35:00.256 A:middle
is on an iPad.

00:34:59.336 --> 00:35:00.256 A:middle
is on an iPad.

00:35:00.496 --> 00:35:01.706 A:middle
You just need to use feature

00:35:01.706 --> 00:35:02.296 A:middle
detection.

00:35:03.766 --> 00:35:05.306 A:middle
And the reason is that iPad is a

00:35:05.306 --> 00:35:05.986 A:middle
chameleon.

00:35:06.446 --> 00:35:07.726 A:middle
With all of the new content mode

00:35:07.726 --> 00:35:09.446 A:middle
APIs that Charles told you

00:35:09.446 --> 00:35:11.046 A:middle
about, your website could be in

00:35:11.046 --> 00:35:12.766 A:middle
app that is in desktop mode or

00:35:12.766 --> 00:35:13.536 A:middle
in mobile mode.

00:35:14.506 --> 00:35:15.686 A:middle
Your web content could be in a

00:35:15.686 --> 00:35:17.616 A:middle
Split View on either the mobile

00:35:17.616 --> 00:35:19.306 A:middle
side or the desktop side.

00:35:19.686 --> 00:35:21.046 A:middle
So knowing that your content is

00:35:21.046 --> 00:35:23.376 A:middle
on an iPad specifically is not

00:35:23.376 --> 00:35:24.496 A:middle
really that useful.

00:35:25.476 --> 00:35:26.636 A:middle
And the confusion with user

00:35:26.636 --> 00:35:28.546 A:middle
agent doesn't end with iPad.

00:35:28.546 --> 00:35:29.636 A:middle
Anything is possible.

00:35:29.636 --> 00:35:31.636 A:middle
We now have UIKit apps running

00:35:31.636 --> 00:35:34.246 A:middle
on the Mac.

00:35:34.506 --> 00:35:36.406 A:middle
Really, if you step back, we

00:35:36.406 --> 00:35:38.636 A:middle
have web content on Apple Watch,

00:35:38.816 --> 00:35:41.286 A:middle
on iPhone, on iPad and all of

00:35:41.286 --> 00:35:42.646 A:middle
the different content modes and

00:35:42.646 --> 00:35:44.166 A:middle
configurations we already

00:35:44.236 --> 00:35:46.596 A:middle
covered, web content and UIKit

00:35:46.596 --> 00:35:48.606 A:middle
apps on Mac, web content on

00:35:48.696 --> 00:35:49.756 A:middle
AppKit apps on Mac.

00:35:50.516 --> 00:35:51.686 A:middle
Targeting each one of these

00:35:51.686 --> 00:35:53.266 A:middle
configurations and handing it

00:35:53.556 --> 00:35:55.236 A:middle
big-screen site or small-screen

00:35:55.236 --> 00:35:57.256 A:middle
site is going to be so much more

00:35:57.256 --> 00:35:59.166 A:middle
limiting, more fragile and less

00:35:59.256 --> 00:36:01.086 A:middle
future proof than using feature

00:35:59.256 --> 00:36:01.086 A:middle
future proof than using feature

00:36:01.086 --> 00:36:02.506 A:middle
detection to see what each

00:36:02.636 --> 00:36:04.246 A:middle
configuration is capable of.

00:36:05.646 --> 00:36:07.046 A:middle
We're going to stand up here and

00:36:07.046 --> 00:36:08.546 A:middle
tell you that responsive design

00:36:08.756 --> 00:36:10.376 A:middle
is best practices for whatever

00:36:10.376 --> 00:36:12.136 A:middle
the hot new product is year

00:36:12.136 --> 00:36:13.796 A:middle
after year after year until

00:36:13.796 --> 00:36:15.296 A:middle
finally we don't have to because

00:36:15.296 --> 00:36:15.976 A:middle
it's the norm.

00:36:17.066 --> 00:36:18.656 A:middle
Server-delivered content that's

00:36:18.746 --> 00:36:20.826 A:middle
agnostic to who asked for it but

00:36:20.826 --> 00:36:22.656 A:middle
adapted with responsive design

00:36:22.986 --> 00:36:25.436 A:middle
is awesome on every device.

00:36:26.626 --> 00:36:28.806 A:middle
And this device landscape has

00:36:28.806 --> 00:36:29.786 A:middle
not been shrinking.

00:36:32.716 --> 00:36:34.156 A:middle
We know this takes a lot of

00:36:34.156 --> 00:36:35.836 A:middle
work, but we also know it's

00:36:35.836 --> 00:36:36.926 A:middle
worth it.

00:36:38.756 --> 00:36:40.116 A:middle
When we say iPad has

00:36:40.116 --> 00:36:42.056 A:middle
desktop-class browsing, we mean

00:36:42.056 --> 00:36:43.986 A:middle
modern desktop-class browsing,

00:36:43.986 --> 00:36:45.426 A:middle
and that means no plug-ins.

00:36:45.886 --> 00:36:47.376 A:middle
We've never had plug-ins on iOS,

00:36:47.636 --> 00:36:49.226 A:middle
and we don't intend to add them

00:36:49.226 --> 00:36:49.496 A:middle
now.

00:36:50.076 --> 00:36:51.616 A:middle
Even on Mac, if you go out of

00:36:51.616 --> 00:36:53.416 A:middle
your way to install Flash, it's

00:36:53.416 --> 00:36:55.126 A:middle
still off by default, and we're

00:36:55.126 --> 00:36:56.436 A:middle
dropping support for it in

00:36:56.436 --> 00:36:58.686 A:middle
Safari altogether in 2020.

00:36:59.566 --> 00:37:01.266 A:middle
So if you still haven't migrated

00:36:59.566 --> 00:37:01.266 A:middle
So if you still haven't migrated

00:37:01.506 --> 00:37:03.806 A:middle
your old video or games or

00:37:03.806 --> 00:37:05.766 A:middle
restaurant menus to standard web

00:37:05.766 --> 00:37:08.176 A:middle
technologies, now is the time to

00:37:08.176 --> 00:37:09.486 A:middle
say goodbye to Flash.

00:37:09.486 --> 00:37:13.066 A:middle
Safari on iPad is desktop-class,

00:37:13.886 --> 00:37:15.386 A:middle
but iPad is still a mobile

00:37:15.386 --> 00:37:16.596 A:middle
device, which means that we

00:37:16.596 --> 00:37:18.466 A:middle
expect it to be used on the go,

00:37:18.606 --> 00:37:19.816 A:middle
often in public places.

00:37:20.606 --> 00:37:22.416 A:middle
Therefore, WebKit will prevent

00:37:22.416 --> 00:37:23.556 A:middle
audio from playing

00:37:23.616 --> 00:37:24.406 A:middle
automatically.

00:37:24.926 --> 00:37:26.216 A:middle
We have found some desktop

00:37:26.216 --> 00:37:27.696 A:middle
websites that assume that

00:37:27.696 --> 00:37:29.456 A:middle
automatic playback will happen,

00:37:29.676 --> 00:37:31.226 A:middle
but it's best not to assume.

00:37:31.926 --> 00:37:34.086 A:middle
The standard media API allows

00:37:34.086 --> 00:37:35.476 A:middle
you to know the truths of what

00:37:35.476 --> 00:37:37.106 A:middle
actually happened, because the

00:37:37.186 --> 00:37:38.386 A:middle
play function has a promise.

00:37:39.106 --> 00:37:40.506 A:middle
You should catch that promise in

00:37:40.506 --> 00:37:42.016 A:middle
case playback was rejected.

00:37:42.646 --> 00:37:43.876 A:middle
But you should also consider

00:37:43.876 --> 00:37:45.526 A:middle
designing your website so that

00:37:45.526 --> 00:37:47.756 A:middle
all users on all devices can

00:37:47.756 --> 00:37:49.166 A:middle
decide for themselves when they

00:37:49.166 --> 00:37:49.896 A:middle
want audio.

00:37:51.306 --> 00:37:53.146 A:middle
Next, think beyond the mouse and

00:37:53.146 --> 00:37:54.826 A:middle
hardware keyboard when designing

00:37:54.826 --> 00:37:56.066 A:middle
user interaction flows.

00:37:56.566 --> 00:37:58.006 A:middle
Specifically, consider using

00:37:58.006 --> 00:38:00.006 A:middle
pointer events, and avoid using

00:37:58.006 --> 00:38:00.006 A:middle
pointer events, and avoid using

00:38:00.006 --> 00:38:01.486 A:middle
mouse hover for anything other

00:38:01.486 --> 00:38:02.766 A:middle
than decorative auxiliary

00:38:02.766 --> 00:38:03.276 A:middle
changes.

00:38:05.106 --> 00:38:07.516 A:middle
And finally, use built-in APIs.

00:38:07.926 --> 00:38:09.626 A:middle
This is a broad topic, but I do

00:38:09.626 --> 00:38:11.096 A:middle
have a specific example.

00:38:11.446 --> 00:38:13.306 A:middle
We found many desktop websites

00:38:13.566 --> 00:38:15.116 A:middle
that will use mouse events in

00:38:15.116 --> 00:38:16.786 A:middle
order to customize text

00:38:16.786 --> 00:38:18.896 A:middle
selection or text input.

00:38:19.326 --> 00:38:20.346 A:middle
But there's a better tool for

00:38:20.346 --> 00:38:20.816 A:middle
the job.

00:38:21.126 --> 00:38:22.666 A:middle
Selection change events and

00:38:22.666 --> 00:38:23.936 A:middle
input events are designed for

00:38:23.936 --> 00:38:25.016 A:middle
this exact purpose.

00:38:25.786 --> 00:38:26.826 A:middle
You'll always get the better

00:38:26.826 --> 00:38:28.936 A:middle
behavior on every platform if

00:38:28.936 --> 00:38:30.696 A:middle
you utilize built-in APIs

00:38:30.756 --> 00:38:32.356 A:middle
instead of reverse engineering

00:38:32.356 --> 00:38:34.036 A:middle
them with basic interaction

00:38:34.036 --> 00:38:34.396 A:middle
events.

00:38:35.106 --> 00:38:37.506 A:middle
So that's a lot.

00:38:38.216 --> 00:38:39.696 A:middle
To help you digest all of this

00:38:39.696 --> 00:38:41.346 A:middle
information, I'd like to invite

00:38:41.346 --> 00:38:43.206 A:middle
Wenson back to the stage so that

00:38:43.206 --> 00:38:44.386 A:middle
he can show you some of these

00:38:44.386 --> 00:38:46.166 A:middle
new features and best practices

00:38:46.246 --> 00:38:46.856 A:middle
in action.

00:38:48.146 --> 00:38:48.606 A:middle
Wenson.

00:38:49.516 --> 00:38:54.500 A:middle
[ Applause ]

00:38:57.456 --> 00:38:58.176 A:middle
&gt;&gt; All right.

00:38:58.596 --> 00:38:59.926 A:middle
Thanks, Beth.

00:39:00.556 --> 00:39:02.096 A:middle
So you'll never be able to

00:39:02.096 --> 00:39:03.566 A:middle
guess, but when I'm not working

00:39:03.566 --> 00:39:05.696 A:middle
on web browsers in my spare time

00:39:06.016 --> 00:39:08.146 A:middle
and not-so-spare time, I also

00:39:08.146 --> 00:39:09.156 A:middle
like to work on web

00:39:09.156 --> 00:39:09.906 A:middle
applications.

00:39:10.836 --> 00:39:11.836 A:middle
Today, I'd like to share one

00:39:11.836 --> 00:39:13.036 A:middle
I've been working on recently

00:39:13.726 --> 00:39:15.296 A:middle
called Shiny Sketch.

00:39:15.876 --> 00:39:19.336 A:middle
Now, I've only ever tested this

00:39:19.336 --> 00:39:21.186 A:middle
against desktop browsers, so

00:39:21.186 --> 00:39:22.396 A:middle
it'll be interesting to see how

00:39:22.396 --> 00:39:23.756 A:middle
it behaves on my iPad.

00:39:24.576 --> 00:39:25.996 A:middle
But first, let me give you a

00:39:25.996 --> 00:39:27.036 A:middle
quick tour on my Mac.

00:39:27.796 --> 00:39:29.646 A:middle
And as I do, I'll point out some

00:39:29.646 --> 00:39:31.236 A:middle
potential areas that we may need

00:39:31.236 --> 00:39:32.866 A:middle
to adjust in order to make it

00:39:32.866 --> 00:39:34.896 A:middle
look and feel great on iPad.

00:39:35.956 --> 00:39:37.036 A:middle
Okay, so here's what it looks

00:39:37.036 --> 00:39:37.966 A:middle
like on macOS.

00:39:38.646 --> 00:39:40.606 A:middle
And first, this website has a

00:39:40.606 --> 00:39:42.216 A:middle
fixed four-column layout.

00:39:42.846 --> 00:39:44.306 A:middle
What that means is as I make my

00:39:44.306 --> 00:39:45.966 A:middle
window smaller, I just get

00:39:45.966 --> 00:39:48.436 A:middle
horizontal scrolling, okay?

00:39:48.436 --> 00:39:49.286 A:middle
So that's one thing to keep in

00:39:49.286 --> 00:39:49.636 A:middle
mind.

00:39:50.916 --> 00:39:52.836 A:middle
The next is that in order to

00:39:52.836 --> 00:39:54.136 A:middle
access the Edit or Delete

00:39:54.136 --> 00:39:55.966 A:middle
controls, I have to hover over

00:39:55.966 --> 00:39:56.516 A:middle
each drawing.

00:39:57.456 --> 00:39:58.526 A:middle
Of course, the Edit and Delete

00:39:58.526 --> 00:39:59.986 A:middle
controls are really critical

00:39:59.986 --> 00:40:01.946 A:middle
part of my web application.

00:39:59.986 --> 00:40:01.946 A:middle
part of my web application.

00:40:03.276 --> 00:40:04.496 A:middle
And lastly, I'm going to go in

00:40:04.496 --> 00:40:06.526 A:middle
and try to scribble on one of

00:40:06.526 --> 00:40:07.216 A:middle
these drawings.

00:40:07.826 --> 00:40:10.546 A:middle
So I'm able to use my trackpad

00:40:11.086 --> 00:40:13.076 A:middle
to draw here, but the code that

00:40:13.076 --> 00:40:14.796 A:middle
I'm currently using to implement

00:40:14.796 --> 00:40:16.416 A:middle
this only listens for mouse

00:40:16.416 --> 00:40:16.826 A:middle
events.

00:40:17.176 --> 00:40:18.886 A:middle
I'm probably going to need to

00:40:19.136 --> 00:40:20.846 A:middle
adjust that for compatibility

00:40:20.846 --> 00:40:21.346 A:middle
with iPad.

00:40:22.346 --> 00:40:23.336 A:middle
Okay, so that's Mac.

00:40:24.336 --> 00:40:25.366 A:middle
What does it look like on iPad?

00:40:25.366 --> 00:40:26.836 A:middle
Let me show you.

00:40:27.326 --> 00:40:29.326 A:middle
I happen to have the same page

00:40:29.326 --> 00:40:30.416 A:middle
open in Safari.

00:40:31.046 --> 00:40:33.666 A:middle
And the first thing I notice is

00:40:33.666 --> 00:40:34.766 A:middle
that the four-column layout

00:40:35.056 --> 00:40:36.436 A:middle
works great in landscape mode.

00:40:37.396 --> 00:40:39.996 A:middle
However, once I rotate into

00:40:39.996 --> 00:40:41.586 A:middle
portrait mode, let's see what

00:40:41.586 --> 00:40:42.036 A:middle
happens.

00:40:42.726 --> 00:40:45.556 A:middle
So I still get a four-column

00:40:45.556 --> 00:40:45.956 A:middle
layout.

00:40:46.456 --> 00:40:49.756 A:middle
I bet if I made my website

00:40:49.756 --> 00:40:51.426 A:middle
responsive, I could avoid this

00:40:51.426 --> 00:40:51.806 A:middle
scaling.

00:40:52.876 --> 00:40:54.286 A:middle
What I'm going to do now is

00:40:54.286 --> 00:40:56.176 A:middle
return to my Mac and see if I

00:40:56.176 --> 00:40:58.656 A:middle
can figure out what's triggering

00:40:58.916 --> 00:41:01.626 A:middle
this horizontal scrolling in my

00:40:58.916 --> 00:41:01.626 A:middle
this horizontal scrolling in my

00:41:01.626 --> 00:41:02.016 A:middle
browser.

00:41:03.426 --> 00:41:04.696 A:middle
Okay, so first things first.

00:41:05.136 --> 00:41:06.536 A:middle
I'm going to resize the window

00:41:06.536 --> 00:41:07.936 A:middle
so I do get horizontal scrolling

00:41:08.596 --> 00:41:09.076 A:middle
like this.

00:41:09.076 --> 00:41:11.306 A:middle
And then I'm going to go to the

00:41:11.306 --> 00:41:12.046 A:middle
Develop menu.

00:41:12.046 --> 00:41:16.256 A:middle
So I'm going to go down to Start

00:41:16.256 --> 00:41:18.606 A:middle
Element Selection, and that

00:41:18.606 --> 00:41:19.906 A:middle
allows me to see how big each

00:41:19.906 --> 00:41:20.506 A:middle
element is.

00:41:20.936 --> 00:41:23.326 A:middle
As an example, right here, this

00:41:23.326 --> 00:41:25.516 A:middle
Edit button is 72 by 48 pixels.

00:41:26.096 --> 00:41:28.066 A:middle
Okay, so I'm just going to start

00:41:28.066 --> 00:41:29.136 A:middle
at the top of the page and try

00:41:29.136 --> 00:41:30.616 A:middle
to find a really wide element.

00:41:32.056 --> 00:41:35.056 A:middle
So this Shiny Sketch page banner

00:41:35.056 --> 00:41:37.806 A:middle
or title is about 760 pixels.

00:41:38.666 --> 00:41:40.526 A:middle
If I look at the window width

00:41:40.526 --> 00:41:42.966 A:middle
itself using this ruler, it's

00:41:42.966 --> 00:41:45.166 A:middle
also about 760 pixels, so this

00:41:45.166 --> 00:41:46.206 A:middle
is pretty well proportioned.

00:41:47.566 --> 00:41:48.496 A:middle
I'm going to move my cursor

00:41:48.496 --> 00:41:52.076 A:middle
down, and as you might have

00:41:52.076 --> 00:41:53.916 A:middle
guessed, the gallery section is

00:41:53.916 --> 00:41:55.656 A:middle
a whopping 1,300 pixels.

00:41:56.246 --> 00:41:57.246 A:middle
So I'm pretty sure this is

00:41:57.246 --> 00:41:58.416 A:middle
what's triggering the horizontal

00:41:58.416 --> 00:41:59.676 A:middle
scrolling in my web app.

00:41:59.676 --> 00:42:01.866 A:middle
But I want to find out more it,

00:41:59.676 --> 00:42:01.866 A:middle
But I want to find out more it,

00:42:01.866 --> 00:42:02.816 A:middle
so I'm just going to click.

00:42:03.106 --> 00:42:04.036 A:middle
That's going to open Web

00:42:04.036 --> 00:42:06.416 A:middle
Inspector where I can see more

00:42:06.416 --> 00:42:07.216 A:middle
about the gallery.

00:42:08.286 --> 00:42:09.366 A:middle
So in the Styles sidebar, there

00:42:09.366 --> 00:42:11.436 A:middle
is indeed a hard-coded width of

00:42:11.526 --> 00:42:12.696 A:middle
1,300 pixels.

00:42:13.496 --> 00:42:14.096 A:middle
Why is this here?

00:42:14.926 --> 00:42:16.416 A:middle
Well, when I added this, I think

00:42:16.416 --> 00:42:17.626 A:middle
I was trying to make my website

00:42:17.966 --> 00:42:19.396 A:middle
look good on really large

00:42:19.396 --> 00:42:20.956 A:middle
displays, really wide displays.

00:42:21.266 --> 00:42:22.786 A:middle
I didn't think that anyone would

00:42:22.786 --> 00:42:24.716 A:middle
actually load my web page with a

00:42:24.716 --> 00:42:26.336 A:middle
display of less than 1,300

00:42:26.336 --> 00:42:26.926 A:middle
pixels width.

00:42:28.456 --> 00:42:29.246 A:middle
Maybe it was a reasonable

00:42:29.246 --> 00:42:30.366 A:middle
assumption to make at the time,

00:42:30.886 --> 00:42:32.606 A:middle
but now I think I can do better.

00:42:33.496 --> 00:42:35.646 A:middle
So what I'm going to do now is

00:42:35.886 --> 00:42:37.116 A:middle
switch over and try to fix it.

00:42:37.956 --> 00:42:38.806 A:middle
I'm going to make my website

00:42:38.806 --> 00:42:39.296 A:middle
responsive.

00:42:40.426 --> 00:42:42.786 A:middle
By the way, the entire web

00:42:42.786 --> 00:42:44.166 A:middle
application is just three files,

00:42:44.516 --> 00:42:46.776 A:middle
an HTML file, CSS file, and a

00:42:46.776 --> 00:42:47.386 A:middle
JavaScript file.

00:42:47.386 --> 00:42:48.636 A:middle
So I'm going to start in the

00:42:48.636 --> 00:42:50.836 A:middle
HTML file where I'm going to add

00:42:50.836 --> 00:42:52.506 A:middle
a meta viewport tag.

00:42:53.276 --> 00:42:54.876 A:middle
So there's two important

00:42:54.876 --> 00:42:55.546 A:middle
components to this

00:42:55.776 --> 00:42:57.296 A:middle
width=device-width and

00:42:57.296 --> 00:42:58.796 A:middle
initial-scale=1.0.

00:42:59.316 --> 00:43:00.366 A:middle
This lets the browser know that

00:42:59.316 --> 00:43:00.366 A:middle
This lets the browser know that

00:43:00.366 --> 00:43:01.746 A:middle
the page is responsive at any

00:43:01.746 --> 00:43:02.326 A:middle
device width.

00:43:02.326 --> 00:43:04.136 A:middle
So that's important, but now

00:43:04.136 --> 00:43:05.116 A:middle
let's actually make it

00:43:05.116 --> 00:43:06.786 A:middle
responsive at any device width.

00:43:07.386 --> 00:43:09.266 A:middle
So let's go to our CSS file.

00:43:09.796 --> 00:43:11.286 A:middle
And remember that 1,300 pixel

00:43:11.286 --> 00:43:12.216 A:middle
rule we saw earlier?

00:43:12.216 --> 00:43:13.666 A:middle
I'm going to search for that.

00:43:15.076 --> 00:43:17.756 A:middle
So here we go, width: 1300px.

00:43:17.756 --> 00:43:19.636 A:middle
It is indeed on the gallery.

00:43:20.446 --> 00:43:21.866 A:middle
And what I'm going to do is just

00:43:21.866 --> 00:43:22.876 A:middle
change this to a max-width.

00:43:23.846 --> 00:43:25.086 A:middle
What that means is that if my

00:43:25.086 --> 00:43:26.416 A:middle
window is less than 1,300

00:43:26.416 --> 00:43:28.066 A:middle
pixels, the drawings under my

00:43:28.066 --> 00:43:29.196 A:middle
gallery should be able to

00:43:29.196 --> 00:43:29.586 A:middle
reflow.

00:43:30.226 --> 00:43:31.506 A:middle
They're able to reflow, because

00:43:31.756 --> 00:43:33.186 A:middle
I conveniently set them as

00:43:33.186 --> 00:43:34.206 A:middle
display: inline-block.

00:43:35.006 --> 00:43:38.416 A:middle
Okay. So those were a couple of

00:43:38.416 --> 00:43:39.166 A:middle
small changes.

00:43:39.526 --> 00:43:40.876 A:middle
Let's see how it now behaves.

00:43:41.056 --> 00:43:44.846 A:middle
All right, so it's now a

00:43:44.846 --> 00:43:46.026 A:middle
three-column layout in portrait

00:43:46.026 --> 00:43:47.666 A:middle
mode, but if I rotate back into

00:43:47.666 --> 00:43:50.746 A:middle
landscape mode, it becomes four

00:43:50.746 --> 00:43:51.196 A:middle
columns.

00:43:51.486 --> 00:43:52.496 A:middle
That's because landscape mode is

00:43:52.496 --> 00:43:53.726 A:middle
wide enough to accommodate for

00:43:53.726 --> 00:43:54.626 A:middle
the four-column layout.

00:43:55.926 --> 00:43:57.186 A:middle
Either way, there's no more

00:43:57.186 --> 00:43:58.576 A:middle
scaling, and that's great.

00:43:59.636 --> 00:44:01.656 A:middle
Okay, so next let's talk about

00:43:59.636 --> 00:44:01.656 A:middle
Okay, so next let's talk about

00:44:01.656 --> 00:44:02.016 A:middle
drawing.

00:44:02.776 --> 00:44:04.036 A:middle
As Beth mentioned, there's no

00:44:04.036 --> 00:44:06.116 A:middle
mouse move on iPad, but luckily,

00:44:06.386 --> 00:44:08.066 A:middle
I can adopt pointer events, and

00:44:08.066 --> 00:44:09.956 A:middle
the touch-action CSS property to

00:44:09.956 --> 00:44:10.426 A:middle
make it work.

00:44:11.426 --> 00:44:14.826 A:middle
So let's return to the CSS file.

00:44:15.056 --> 00:44:16.386 A:middle
So over here, I'm going to add

00:44:16.386 --> 00:44:18.426 A:middle
touch-action none, or

00:44:18.426 --> 00:44:19.456 A:middle
specifically, I'm going to add

00:44:19.456 --> 00:44:20.526 A:middle
it to the .drawable-canvas

00:44:20.776 --> 00:44:21.716 A:middle
which, as its name might

00:44:21.716 --> 00:44:23.366 A:middle
suggest, is the element that I'm

00:44:23.366 --> 00:44:24.466 A:middle
going to be dragging my finger

00:44:24.466 --> 00:44:25.366 A:middle
over as I draw.

00:44:26.156 --> 00:44:27.876 A:middle
Of course, it's important that

00:44:27.876 --> 00:44:30.376 A:middle
as I drag my finger over, it

00:44:30.376 --> 00:44:31.036 A:middle
doesn't scroll.

00:44:32.006 --> 00:44:32.916 A:middle
That's why touch-action is

00:44:32.916 --> 00:44:33.406 A:middle
important.

00:44:34.516 --> 00:44:36.196 A:middle
Okay, next I'm going to go over

00:44:36.196 --> 00:44:38.286 A:middle
to the JavaScript file where I'm

00:44:38.286 --> 00:44:40.816 A:middle
going to look for mousemove.

00:44:41.376 --> 00:44:44.216 A:middle
Okay, so this is the code that

00:44:44.216 --> 00:44:45.716 A:middle
I'm currently using to listen

00:44:45.716 --> 00:44:48.026 A:middle
for mouse events so I can draw

00:44:48.026 --> 00:44:48.476 A:middle
on my Mac.

00:44:49.696 --> 00:44:50.686 A:middle
I'm going to adjust this a

00:44:50.686 --> 00:44:51.726 A:middle
little bit.

00:44:52.336 --> 00:44:55.716 A:middle
So instead, what I'm going to do

00:44:55.966 --> 00:44:57.016 A:middle
is check if pointer events are

00:44:57.016 --> 00:44:57.456 A:middle
supported.

00:44:58.236 --> 00:44:59.506 A:middle
If they are, I'm going to

00:44:59.506 --> 00:45:00.946 A:middle
register pointer event listeners

00:44:59.506 --> 00:45:00.946 A:middle
register pointer event listeners

00:45:00.946 --> 00:45:01.546 A:middle
instead.

00:45:02.556 --> 00:45:03.716 A:middle
Otherwise, I'll fall back to the

00:45:03.716 --> 00:45:04.736 A:middle
mouse events that I'm currently

00:45:04.736 --> 00:45:05.076 A:middle
using.

00:45:06.366 --> 00:45:09.296 A:middle
Okay, so let's see these changes

00:45:09.346 --> 00:45:10.016 A:middle
in action though.

00:45:10.586 --> 00:45:14.956 A:middle
Let's give our canine friend

00:45:14.956 --> 00:45:15.856 A:middle
Sona [phonetic] here a little

00:45:15.856 --> 00:45:15.976 A:middle
hat.

00:45:22.336 --> 00:45:24.316 A:middle
Well, it's not best drawn, but

00:45:24.316 --> 00:45:25.816 A:middle
as you can see, I can clearly

00:45:25.996 --> 00:45:28.136 A:middle
able to draw now.

00:45:28.376 --> 00:45:31.036 A:middle
Okay, so one last minor detail.

00:45:32.436 --> 00:45:33.886 A:middle
As Beth mentioned, iPad is

00:45:33.886 --> 00:45:36.116 A:middle
compatible with mouse hover, but

00:45:36.116 --> 00:45:37.486 A:middle
it's not immediately clear to me

00:45:37.736 --> 00:45:38.996 A:middle
that the way to edit or delete,

00:45:38.996 --> 00:45:42.016 A:middle
or drawings rather, is to first

00:45:42.296 --> 00:45:43.996 A:middle
tap on each drawing in order to

00:45:43.996 --> 00:45:46.736 A:middle
show the controls and then tap

00:45:46.736 --> 00:45:47.876 A:middle
on the controls themselves.

00:45:47.876 --> 00:45:49.636 A:middle
It means that any meaningful

00:45:49.636 --> 00:45:51.466 A:middle
interaction with my app is going

00:45:51.466 --> 00:45:53.926 A:middle
to require two taps on iPad.

00:45:53.926 --> 00:45:57.426 A:middle
Let's make it easy to edit and

00:45:57.426 --> 00:45:58.636 A:middle
delete with a single tap.

00:45:59.476 --> 00:46:00.866 A:middle
What I'm going to do is add a

00:45:59.476 --> 00:46:00.866 A:middle
What I'm going to do is add a

00:46:00.866 --> 00:46:01.786 A:middle
Delete button that's always

00:46:01.786 --> 00:46:03.506 A:middle
visible and just make tapping on

00:46:03.506 --> 00:46:05.426 A:middle
each drawing immediately go into

00:46:05.426 --> 00:46:06.086 A:middle
editing mode.

00:46:07.126 --> 00:46:07.686 A:middle
So let's do that.

00:46:09.026 --> 00:46:10.546 A:middle
First, I'm going to go over to

00:46:10.546 --> 00:46:12.406 A:middle
the HTML file where I'm going to

00:46:12.406 --> 00:46:13.296 A:middle
add a bit of markup.

00:46:13.816 --> 00:46:15.806 A:middle
It's a very simple button that

00:46:15.806 --> 00:46:16.486 A:middle
I'm going to add here.

00:46:17.256 --> 00:46:18.386 A:middle
But note that I'm putting the

00:46:18.386 --> 00:46:19.566 A:middle
class static-control here.

00:46:20.406 --> 00:46:21.346 A:middle
It's going to become important

00:46:21.666 --> 00:46:22.656 A:middle
very soon, because I'm going to

00:46:22.656 --> 00:46:25.736 A:middle
head over to the CSS file where

00:46:25.736 --> 00:46:27.046 A:middle
I'm going to add a media query.

00:46:27.046 --> 00:46:31.446 A:middle
So what I'm doing here is I'm

00:46:31.446 --> 00:46:32.676 A:middle
checking if hover is supported

00:46:32.766 --> 00:46:34.356 A:middle
by using this media query, and

00:46:34.356 --> 00:46:35.646 A:middle
if it is supported, we don't

00:46:35.646 --> 00:46:36.386 A:middle
actually need that

00:46:36.386 --> 00:46:37.666 A:middle
static-control, that static

00:46:37.666 --> 00:46:38.696 A:middle
Delete button that I just added.

00:46:39.396 --> 00:46:41.596 A:middle
So I can just set display: none

00:46:41.836 --> 00:46:44.546 A:middle
on that, and it should hide it.

00:46:44.806 --> 00:46:46.016 A:middle
Lastly, there's a small change

00:46:46.016 --> 00:46:46.896 A:middle
we have to make to our

00:46:46.896 --> 00:46:47.546 A:middle
JavaScript file.

00:46:48.556 --> 00:46:49.696 A:middle
So now I'm going to look for

00:46:49.696 --> 00:46:52.326 A:middle
mouseenter, and this is a code

00:46:52.326 --> 00:46:54.016 A:middle
I'm using to show or hide the

00:46:54.016 --> 00:46:55.906 A:middle
hover controls when the user's

00:46:55.906 --> 00:46:57.296 A:middle
mouse enters or leaves each

00:46:57.296 --> 00:46:57.606 A:middle
drawing.

00:46:58.436 --> 00:46:59.596 A:middle
We don't need to do this if

00:46:59.596 --> 00:47:00.486 A:middle
hover is not supported.

00:46:59.596 --> 00:47:00.486 A:middle
hover is not supported.

00:47:01.316 --> 00:47:02.426 A:middle
So what I'm going to do is add a

00:47:02.426 --> 00:47:03.316 A:middle
bit of logic up here.

00:47:04.196 --> 00:47:05.266 A:middle
It's going to use the same media

00:47:05.266 --> 00:47:07.026 A:middle
query as I did in the CSS file

00:47:07.186 --> 00:47:09.096 A:middle
to check if hover exists, and if

00:47:09.096 --> 00:47:11.286 A:middle
hover is not supported, I'm

00:47:11.286 --> 00:47:12.986 A:middle
going to instead add a click

00:47:12.986 --> 00:47:14.366 A:middle
event listener to the drawing

00:47:14.366 --> 00:47:15.806 A:middle
itself and allow it to

00:47:15.806 --> 00:47:17.756 A:middle
immediately start drawing mode.

00:47:18.866 --> 00:47:21.126 A:middle
Then this early return ensures

00:47:21.126 --> 00:47:22.356 A:middle
that I don't add the event

00:47:22.356 --> 00:47:24.336 A:middle
listeners I don't need in the

00:47:24.336 --> 00:47:25.276 A:middle
case where hover is not

00:47:25.276 --> 00:47:25.636 A:middle
supported.

00:47:26.906 --> 00:47:28.176 A:middle
Okay, so that was a lot of

00:47:28.176 --> 00:47:28.596 A:middle
changes.

00:47:29.286 --> 00:47:30.226 A:middle
But let's see it in action now.

00:47:30.226 --> 00:47:33.556 A:middle
All right, first thing I notice

00:47:33.556 --> 00:47:35.636 A:middle
is that Delete buttons are now

00:47:35.636 --> 00:47:36.826 A:middle
always visible and ready to be

00:47:36.826 --> 00:47:37.066 A:middle
tapped.

00:47:38.566 --> 00:47:39.456 A:middle
But if I tap on each of the

00:47:39.456 --> 00:47:41.746 A:middle
drawings, I'm able to edit them

00:47:41.966 --> 00:47:42.606 A:middle
immediately.

00:47:43.886 --> 00:47:45.396 A:middle
So it's one tap to do anything

00:47:45.396 --> 00:47:46.506 A:middle
in my app.

00:47:48.626 --> 00:47:50.226 A:middle
Okay, so with a few simple

00:47:50.226 --> 00:47:52.166 A:middle
steps, I've made my desktop web

00:47:52.166 --> 00:47:54.306 A:middle
app work great on iPad, and I

00:47:54.306 --> 00:47:56.276 A:middle
think you web developers out

00:47:56.276 --> 00:47:57.266 A:middle
there can as well.

00:47:58.396 --> 00:47:59.406 A:middle
I'd like to now hand it off to

00:47:59.406 --> 00:48:01.176 A:middle
Charles to summarize what we've

00:47:59.406 --> 00:48:01.176 A:middle
Charles to summarize what we've

00:48:01.176 --> 00:48:02.686 A:middle
covered today, and I'll see you

00:48:02.686 --> 00:48:03.306 A:middle
at the labs.

00:48:04.516 --> 00:48:12.896 A:middle
[ Applause ]

00:48:13.396 --> 00:48:14.986 A:middle
&gt;&gt; Thanks, Wenson.

00:48:14.986 --> 00:48:18.296 A:middle
Your web app looks awesome.

00:48:18.296 --> 00:48:21.066 A:middle
In summary, iPad has made major

00:48:21.066 --> 00:48:23.326 A:middle
new advancements to make today's

00:48:23.326 --> 00:48:25.406 A:middle
desktop websites work great out

00:48:25.406 --> 00:48:26.236 A:middle
of the box.

00:48:26.916 --> 00:48:28.866 A:middle
We want you to take advantage of

00:48:28.866 --> 00:48:31.016 A:middle
these new features to make your

00:48:31.246 --> 00:48:33.816 A:middle
app or website even better on

00:48:33.816 --> 00:48:35.736 A:middle
iPad just like you did for

00:48:35.736 --> 00:48:35.936 A:middle
iPhone.

00:48:39.156 --> 00:48:41.756 A:middle
For our web developers, consider

00:48:41.756 --> 00:48:43.736 A:middle
building one responsive website

00:48:44.206 --> 00:48:46.036 A:middle
using the techniques we talked

00:48:46.736 --> 00:48:47.846 A:middle
about today.

00:48:48.046 --> 00:48:50.306 A:middle
For app developers, let Safari

00:48:50.306 --> 00:48:51.326 A:middle
View Controller and

00:48:51.326 --> 00:48:53.126 A:middle
ASWebAuthenticationSession do

00:48:53.126 --> 00:48:55.076 A:middle
the heavy lifting for you.

00:48:55.636 --> 00:48:58.036 A:middle
If using WKWebView, please test

00:48:58.036 --> 00:48:58.406 A:middle
your app.

00:48:59.926 --> 00:49:01.746 A:middle
And please file bugs and send us

00:48:59.926 --> 00:49:01.746 A:middle
And please file bugs and send us

00:49:01.746 --> 00:49:02.216 A:middle
your feedback.

00:49:02.706 --> 00:49:05.316 A:middle
We'd love to hear from you.

00:49:05.536 --> 00:49:06.536 A:middle
For more information about our

00:49:06.536 --> 00:49:08.386 A:middle
other exciting authentication

00:49:08.526 --> 00:49:10.346 A:middle
and web platform features, you

00:49:10.346 --> 00:49:11.516 A:middle
should definitely check out

00:49:11.796 --> 00:49:13.856 A:middle
Session 504, What's New in

00:49:13.856 --> 00:49:15.696 A:middle
Authentication, Safari, and

00:49:15.696 --> 00:49:17.976 A:middle
WebKit on Thursday at 11:00 am.

00:49:18.916 --> 00:49:20.556 A:middle
There are also two labs related

00:49:20.556 --> 00:49:23.016 A:middle
to the session today at 1:00 pm

00:49:23.466 --> 00:49:25.066 A:middle
and Thursday at 12:00 pm.

00:49:25.826 --> 00:49:27.536 A:middle
Please come to talk and learn

00:49:27.536 --> 00:49:28.986 A:middle
more about what you heard today.

00:49:30.206 --> 00:49:31.846 A:middle
Thank you and have a wonderful

00:49:32.056 --> 00:49:32.976 A:middle
WWDC.

00:49:33.516 --> 00:49:38.500 A:middle
[ Applause ]
