WEBVTT

00:00:01.516 --> 00:00:04.500 A:middle
[ Music ]

00:00:06.516 --> 00:00:13.556 A:middle
[ Applause ]

00:00:14.056 --> 00:00:14.916 A:middle
&gt;&gt; Good afternoon and welcome to

00:00:14.916 --> 00:00:15.936 A:middle
Subscription Offers Best

00:00:15.936 --> 00:00:16.456 A:middle
Practices.

00:00:17.176 --> 00:00:18.046 A:middle
My name is Ross LaBeau.

00:00:18.046 --> 00:00:19.156 A:middle
I'm an engineer on the App Store

00:00:19.156 --> 00:00:19.396 A:middle
Team.

00:00:20.206 --> 00:00:21.086 A:middle
And today we're going to take a

00:00:21.086 --> 00:00:22.646 A:middle
deep dive into the App Store's

00:00:22.646 --> 00:00:23.946 A:middle
latest in-app purchase feature.

00:00:26.496 --> 00:00:28.556 A:middle
So Subscription Offers are an

00:00:28.556 --> 00:00:29.726 A:middle
exciting new way for

00:00:29.726 --> 00:00:31.016 A:middle
subscription developers to offer

00:00:31.016 --> 00:00:32.476 A:middle
a discounted price to the

00:00:32.476 --> 00:00:33.606 A:middle
customers for a specific

00:00:33.636 --> 00:00:34.386 A:middle
duration of time.

00:00:35.836 --> 00:00:37.996 A:middle
Now we know that churn is one of

00:00:38.266 --> 00:00:41.076 A:middle
the major reducers of profit for

00:00:41.236 --> 00:00:42.016 A:middle
subscription apps.

00:00:42.946 --> 00:00:44.516 A:middle
And this is a powerful new tool

00:00:44.516 --> 00:00:46.646 A:middle
to help mitigate churn by

00:00:47.046 --> 00:00:49.316 A:middle
retaining customers or by

00:00:49.316 --> 00:00:50.276 A:middle
winning back customers who have

00:00:50.276 --> 00:00:50.856 A:middle
already churned.

00:00:51.526 --> 00:00:54.336 A:middle
So the coolest part of

00:00:54.336 --> 00:00:55.486 A:middle
Subscription Offers is actually

00:00:55.486 --> 00:00:56.826 A:middle
that you choose when to offer

00:00:56.826 --> 00:00:58.216 A:middle
customers an offer and you

00:00:58.216 --> 00:00:59.246 A:middle
choose which ones to show them.

00:01:00.176 --> 00:01:02.086 A:middle
So for example, if you've just

00:01:02.086 --> 00:01:03.576 A:middle
received an auto-renewable

00:01:04.056 --> 00:01:05.656 A:middle
subscription server-to-server

00:01:05.656 --> 00:01:07.066 A:middle
notification saying the customer

00:01:07.066 --> 00:01:10.026 A:middle
has disabled auto-renew, you may

00:01:10.026 --> 00:01:11.126 A:middle
want to take that time, take

00:01:11.126 --> 00:01:13.166 A:middle
action right then and send them

00:01:13.166 --> 00:01:15.226 A:middle
an offer for say three months at

00:01:15.226 --> 00:01:16.896 A:middle
half off to try and keep them

00:01:16.896 --> 00:01:17.706 A:middle
engaged with your app and

00:01:17.706 --> 00:01:18.436 A:middle
staying subscribed.

00:01:21.356 --> 00:01:22.726 A:middle
Now unlike introductory offers,

00:01:23.006 --> 00:01:24.476 A:middle
customers can redeem as many

00:01:24.476 --> 00:01:25.496 A:middle
Subscription Offers as you

00:01:25.496 --> 00:01:27.276 A:middle
allow, and they can even redeem

00:01:27.276 --> 00:01:28.226 A:middle
the same one more than once.

00:01:28.716 --> 00:01:31.956 A:middle
And the only qualification that

00:01:31.956 --> 00:01:33.226 A:middle
the App Store puts is that the

00:01:33.226 --> 00:01:34.756 A:middle
customer must be an existing or

00:01:34.756 --> 00:01:36.076 A:middle
previous subscriber to an

00:01:36.106 --> 00:01:37.256 A:middle
auto-renewable subscription in

00:01:37.256 --> 00:01:37.706 A:middle
your app.

00:01:41.666 --> 00:01:43.426 A:middle
So today we'll go over the setup

00:01:43.426 --> 00:01:44.606 A:middle
of how you create these offers

00:01:44.606 --> 00:01:45.276 A:middle
in App Store Connect.

00:01:47.416 --> 00:01:48.466 A:middle
We'll discuss how to generate

00:01:48.466 --> 00:01:49.906 A:middle
the cryptographic signature that

00:01:49.906 --> 00:01:50.996 A:middle
you need to send up with each

00:01:50.996 --> 00:01:51.636 A:middle
transaction.

00:01:53.056 --> 00:01:54.456 A:middle
And we'll talk about the new

00:01:54.456 --> 00:01:56.136 A:middle
StoreKit APIs and how to use

00:01:56.176 --> 00:01:58.236 A:middle
them to send up a transaction to

00:01:58.236 --> 00:01:58.796 A:middle
the App Store and make a

00:01:58.826 --> 00:01:59.500 A:middle
purchase.

00:02:02.556 --> 00:02:04.016 A:middle
We'll discuss the eligibility

00:02:04.016 --> 00:02:05.216 A:middle
from both the App Store's point

00:02:05.216 --> 00:02:06.696 A:middle
of view and also how to create

00:02:06.696 --> 00:02:08.586 A:middle
your own custom business rules.

00:02:09.735 --> 00:02:12.066 A:middle
We'll offer some tips and tricks

00:02:12.066 --> 00:02:13.386 A:middle
for how to distribute and market

00:02:13.386 --> 00:02:14.656 A:middle
these offers to your customers.

00:02:15.196 --> 00:02:18.346 A:middle
And finally, we'll go over more

00:02:18.346 --> 00:02:19.836 A:middle
business strategies for how to

00:02:19.836 --> 00:02:20.536 A:middle
reduce churn.

00:02:25.056 --> 00:02:26.456 A:middle
So first, just like introductory

00:02:26.456 --> 00:02:27.866 A:middle
offers, you set up Subscription

00:02:27.866 --> 00:02:28.946 A:middle
Offers in App Store Connect.

00:02:29.816 --> 00:02:32.416 A:middle
Go to the In-App Purchases

00:02:32.416 --> 00:02:34.046 A:middle
section under the Features tab,

00:02:34.466 --> 00:02:35.286 A:middle
and just select any

00:02:35.286 --> 00:02:36.436 A:middle
auto-renewable subscription.

00:02:37.986 --> 00:02:39.066 A:middle
Then click the Plus button next

00:02:39.066 --> 00:02:40.776 A:middle
to Subscription Prices and

00:02:40.776 --> 00:02:41.976 A:middle
select Create Promotional Offer.

00:02:45.306 --> 00:02:46.356 A:middle
There you'll put in a human

00:02:46.356 --> 00:02:48.236 A:middle
readable name for the offer as

00:02:48.236 --> 00:02:49.476 A:middle
well as a product code.

00:02:50.176 --> 00:02:51.546 A:middle
This product code is also known

00:02:51.546 --> 00:02:52.476 A:middle
as the identifier.

00:02:53.446 --> 00:02:54.146 A:middle
And this is the unique

00:02:54.146 --> 00:02:55.586 A:middle
identifier you'll use to refer

00:02:55.586 --> 00:02:56.846 A:middle
to this offer from now on.

00:02:58.216 --> 00:02:59.696 A:middle
After that, it's just like an

00:02:59.696 --> 00:03:00.406 A:middle
introductory offer.

00:02:59.696 --> 00:03:00.406 A:middle
introductory offer.

00:03:00.666 --> 00:03:02.116 A:middle
You'll select the type, the

00:03:02.116 --> 00:03:03.166 A:middle
duration and the pricing.

00:03:03.636 --> 00:03:04.926 A:middle
Now in addition to setting up

00:03:05.546 --> 00:03:07.016 A:middle
these offers, you'll also have

00:03:07.016 --> 00:03:08.696 A:middle
to set up a private key so you

00:03:08.696 --> 00:03:09.756 A:middle
can generate that signature we

00:03:09.756 --> 00:03:10.216 A:middle
talked about.

00:03:10.216 --> 00:03:12.446 A:middle
Now we'll go over more about the

00:03:12.446 --> 00:03:13.146 A:middle
signature later.

00:03:13.146 --> 00:03:15.116 A:middle
But to create your private key,

00:03:15.856 --> 00:03:16.816 A:middle
just go into the Users and

00:03:16.816 --> 00:03:17.876 A:middle
Access section of App Store

00:03:17.876 --> 00:03:18.156 A:middle
Connect.

00:03:19.066 --> 00:03:20.286 A:middle
Select Keys and make sure to

00:03:20.286 --> 00:03:21.496 A:middle
select Subscriptions on the

00:03:21.496 --> 00:03:21.816 A:middle
left.

00:03:22.246 --> 00:03:24.286 A:middle
Click that plus button.

00:03:25.576 --> 00:03:26.816 A:middle
Just enter a human readable name

00:03:26.816 --> 00:03:27.976 A:middle
for your key and click generate.

00:03:32.476 --> 00:03:33.756 A:middle
When you do that, you'll see the

00:03:33.756 --> 00:03:35.276 A:middle
new key in the list of active

00:03:35.526 --> 00:03:36.176 A:middle
keys up top.

00:03:37.276 --> 00:03:38.176 A:middle
And you'll also see that App

00:03:38.176 --> 00:03:39.686 A:middle
Store Connect has generated a

00:03:39.686 --> 00:03:40.956 A:middle
key ID for it.

00:03:41.206 --> 00:03:42.156 A:middle
This again is a unique

00:03:42.156 --> 00:03:43.276 A:middle
identifier which you'll use to

00:03:43.276 --> 00:03:43.976 A:middle
refer to that key in StoreKit.

00:03:47.046 --> 00:03:47.666 A:middle
Now you can download your

00:03:47.666 --> 00:03:48.836 A:middle
private key, by clicking

00:03:49.276 --> 00:03:50.246 A:middle
Download Key of course.

00:03:50.756 --> 00:03:51.976 A:middle
But it's important to note that

00:03:51.976 --> 00:03:53.146 A:middle
you can only download this key

00:03:53.626 --> 00:03:54.446 A:middle
one time.

00:03:55.356 --> 00:03:56.816 A:middle
That's right, just once.

00:03:57.736 --> 00:03:58.986 A:middle
Once you do download it, App

00:03:58.986 --> 00:03:59.966 A:middle
Store Connect will delete it

00:03:59.966 --> 00:04:01.256 A:middle
from Apple servers permanently.

00:03:59.966 --> 00:04:01.256 A:middle
from Apple servers permanently.

00:04:01.256 --> 00:04:04.076 A:middle
Now the reason for this is that

00:04:04.076 --> 00:04:06.436 A:middle
these keys are really sensitive

00:04:06.436 --> 00:04:07.626 A:middle
cryptographic information.

00:04:08.226 --> 00:04:09.486 A:middle
This private key is kind of like

00:04:09.486 --> 00:04:10.196 A:middle
your identity.

00:04:10.316 --> 00:04:11.896 A:middle
It's what you use to prove that

00:04:11.896 --> 00:04:12.786 A:middle
it's actually you who's

00:04:12.786 --> 00:04:14.466 A:middle
authorizing this user to redeem

00:04:14.466 --> 00:04:14.976 A:middle
this transaction.

00:04:20.236 --> 00:04:21.716 A:middle
So these keys are valid across

00:04:21.716 --> 00:04:23.516 A:middle
your entire developer account if

00:04:23.666 --> 00:04:25.176 A:middle
you use a single key for all of

00:04:25.176 --> 00:04:27.216 A:middle
your apps and for all of your

00:04:27.216 --> 00:04:28.436 A:middle
offers that you set up on those

00:04:28.436 --> 00:04:28.776 A:middle
apps.

00:04:29.926 --> 00:04:31.336 A:middle
But if you want, you can use

00:04:31.336 --> 00:04:31.996 A:middle
multiple keys.

00:04:32.546 --> 00:04:33.756 A:middle
So say you're using a single

00:04:33.756 --> 00:04:35.296 A:middle
developer account to serve

00:04:35.566 --> 00:04:36.436 A:middle
several different apps or

00:04:36.436 --> 00:04:37.046 A:middle
different parts of your

00:04:37.046 --> 00:04:39.506 A:middle
business, you can create

00:04:39.506 --> 00:04:40.706 A:middle
multiple keys to segment them

00:04:40.706 --> 00:04:42.566 A:middle
off that way.

00:04:42.816 --> 00:04:44.516 A:middle
So as I said, each transaction

00:04:44.656 --> 00:04:45.926 A:middle
requires a cryptographic

00:04:45.926 --> 00:04:47.416 A:middle
signature when you send it to

00:04:47.416 --> 00:04:48.686 A:middle
the App Store to actually redeem

00:04:48.686 --> 00:04:48.936 A:middle
an offer.

00:04:51.546 --> 00:04:52.716 A:middle
Now we do this to ensure that

00:04:52.716 --> 00:04:55.346 A:middle
only authorized users can redeem

00:04:55.346 --> 00:04:55.866 A:middle
offers.

00:04:56.846 --> 00:04:58.766 A:middle
Generate a signature using a

00:04:58.766 --> 00:05:00.766 A:middle
payload which you'll also send

00:04:58.766 --> 00:05:00.766 A:middle
payload which you'll also send

00:05:00.766 --> 00:05:01.386 A:middle
up to the App Store.

00:05:02.396 --> 00:05:03.416 A:middle
And this signature uses

00:05:03.416 --> 00:05:04.556 A:middle
something called asymmetric

00:05:04.556 --> 00:05:05.116 A:middle
cryptography.

00:05:05.736 --> 00:05:07.226 A:middle
Asymmetric cryptography is a

00:05:07.226 --> 00:05:09.376 A:middle
common technique where you use

00:05:09.426 --> 00:05:10.976 A:middle
two keys to generate and

00:05:10.976 --> 00:05:12.996 A:middle
validate a signature versus a

00:05:12.996 --> 00:05:14.386 A:middle
private key which we just talked

00:05:14.386 --> 00:05:14.616 A:middle
about.

00:05:15.276 --> 00:05:16.596 A:middle
We use that as a proof of your

00:05:16.596 --> 00:05:18.366 A:middle
identity to sign your payload.

00:05:18.366 --> 00:05:21.186 A:middle
And the second key is called the

00:05:21.186 --> 00:05:21.646 A:middle
public key.

00:05:22.666 --> 00:05:23.546 A:middle
And just as it sounds, this

00:05:23.616 --> 00:05:25.276 A:middle
public key is actually okay to

00:05:25.276 --> 00:05:26.016 A:middle
show to other people.

00:05:26.186 --> 00:05:27.676 A:middle
You can't generate any signature

00:05:27.676 --> 00:05:27.936 A:middle
with it.

00:05:28.566 --> 00:05:29.406 A:middle
All you can do with the public

00:05:29.406 --> 00:05:31.596 A:middle
key is prove that that signature

00:05:31.676 --> 00:05:33.106 A:middle
was generated with your private

00:05:33.106 --> 00:05:34.966 A:middle
key and matches that payload you

00:05:34.966 --> 00:05:35.496 A:middle
used to sign.

00:05:39.046 --> 00:05:40.346 A:middle
So because generating signature

00:05:40.776 --> 00:05:42.056 A:middle
requires using your private key,

00:05:42.526 --> 00:05:43.596 A:middle
you should always do it on a

00:05:43.596 --> 00:05:45.256 A:middle
secure server and never do it

00:05:45.256 --> 00:05:46.516 A:middle
from the device itself because

00:05:46.516 --> 00:05:47.356 A:middle
you don't want to be putting

00:05:47.736 --> 00:05:49.086 A:middle
this piece of cryptographic

00:05:49.086 --> 00:05:50.116 A:middle
information on someone else's

00:05:50.116 --> 00:05:50.516 A:middle
hardware.

00:05:51.706 --> 00:05:53.106 A:middle
So we're going to take a look at

00:05:53.106 --> 00:05:54.806 A:middle
a server that we've built using

00:05:54.806 --> 00:05:55.966 A:middle
NodeJS and Express.

00:05:56.156 --> 00:05:58.066 A:middle
This is actually sample code

00:05:58.066 --> 00:05:58.976 A:middle
that you'll be able to download

00:05:58.976 --> 00:05:59.406 A:middle
online.

00:06:00.566 --> 00:06:01.746 A:middle
And if you don't use JavaScript,

00:06:01.826 --> 00:06:02.286 A:middle
don't worry.

00:06:03.056 --> 00:06:04.216 A:middle
Everything we do here can be

00:06:04.216 --> 00:06:05.706 A:middle
easily done in other languages,

00:06:06.046 --> 00:06:09.206 A:middle
say Python, PHP, Java, Swift or

00:06:09.206 --> 00:06:10.546 A:middle
whatever you use.

00:06:14.346 --> 00:06:15.976 A:middle
So the first step is when your

00:06:15.976 --> 00:06:17.246 A:middle
app is ready to display the

00:06:17.246 --> 00:06:18.746 A:middle
offer to the customer, you'll

00:06:18.746 --> 00:06:19.806 A:middle
want to send up this request to

00:06:19.806 --> 00:06:20.806 A:middle
the server to generate a

00:06:20.806 --> 00:06:21.686 A:middle
signature right then.

00:06:23.336 --> 00:06:25.276 A:middle
In this case, the app already

00:06:25.276 --> 00:06:26.316 A:middle
knows several pieces of that

00:06:26.366 --> 00:06:28.366 A:middle
payload we want to sign, so

00:06:28.366 --> 00:06:29.216 A:middle
we're just going to go ahead and

00:06:29.216 --> 00:06:30.516 A:middle
grab them from the body of the

00:06:30.516 --> 00:06:31.066 A:middle
request here.

00:06:32.486 --> 00:06:33.386 A:middle
We'll get the application's

00:06:33.386 --> 00:06:36.006 A:middle
bundle identifier, the product

00:06:36.006 --> 00:06:37.666 A:middle
identifier of a subscription.

00:06:38.786 --> 00:06:39.876 A:middle
And then the offer identifier

00:06:39.876 --> 00:06:41.146 A:middle
for the offer that you want to

00:06:41.356 --> 00:06:43.546 A:middle
show the customer.

00:06:43.626 --> 00:06:45.416 A:middle
And finally we'll get the hashed

00:06:45.456 --> 00:06:46.516 A:middle
application username.

00:06:47.426 --> 00:06:50.116 A:middle
Now this is a one-way salted

00:06:50.116 --> 00:06:52.036 A:middle
secure hash of some piece of

00:06:52.036 --> 00:06:53.256 A:middle
identifying information about

00:06:53.256 --> 00:06:53.696 A:middle
the user.

00:06:54.146 --> 00:06:55.316 A:middle
Maybe their username in your app

00:06:55.316 --> 00:06:55.946 A:middle
or their email.

00:06:57.056 --> 00:06:57.956 A:middle
But it's really important that

00:06:57.956 --> 00:06:59.106 A:middle
you always hash this and never

00:06:59.106 --> 00:07:01.196 A:middle
send up plain text identifying

00:06:59.106 --> 00:07:01.196 A:middle
send up plain text identifying

00:07:01.196 --> 00:07:02.236 A:middle
information to the App Store.

00:07:02.736 --> 00:07:03.586 A:middle
You want to keep that secure on

00:07:03.586 --> 00:07:03.976 A:middle
your own database.

00:07:07.336 --> 00:07:08.336 A:middle
So the next piece of the payload

00:07:08.336 --> 00:07:09.426 A:middle
is something called a nonce.

00:07:10.586 --> 00:07:12.386 A:middle
This is just a random piece of

00:07:12.386 --> 00:07:14.226 A:middle
data to ensure that no two

00:07:14.466 --> 00:07:15.486 A:middle
transactions are the same.

00:07:15.486 --> 00:07:19.156 A:middle
We use this to prevent replay

00:07:19.156 --> 00:07:20.486 A:middle
attacks and other ways of

00:07:20.486 --> 00:07:21.446 A:middle
getting around it, so users

00:07:21.446 --> 00:07:23.486 A:middle
can't resend the same request

00:07:23.486 --> 00:07:25.606 A:middle
and get a free subscription over

00:07:25.606 --> 00:07:26.636 A:middle
and over without your approval.

00:07:27.196 --> 00:07:30.006 A:middle
The App Store uses a version 4

00:07:30.006 --> 00:07:31.476 A:middle
UUID for this, so that's what

00:07:31.476 --> 00:07:31.966 A:middle
we'll create here.

00:07:34.146 --> 00:07:35.216 A:middle
And next we'll get a timestamp.

00:07:36.136 --> 00:07:37.306 A:middle
This is a timestamp in the

00:07:37.306 --> 00:07:38.676 A:middle
milliseconds since the Unix

00:07:38.676 --> 00:07:39.346 A:middle
Epoch format.

00:07:40.506 --> 00:07:41.856 A:middle
This is a really common format

00:07:41.906 --> 00:07:42.256 A:middle
to use.

00:07:42.256 --> 00:07:43.396 A:middle
You can see it's very easy to

00:07:43.396 --> 00:07:44.466 A:middle
generate here in JavaScript.

00:07:45.876 --> 00:07:47.336 A:middle
And this timestamp is also used

00:07:47.336 --> 00:07:49.196 A:middle
to help prevent against attacks.

00:07:50.226 --> 00:07:52.346 A:middle
It's important that each

00:07:52.816 --> 00:07:54.066 A:middle
transaction you make will only

00:07:54.066 --> 00:07:55.916 A:middle
be accepted within 24 hours

00:07:56.026 --> 00:07:57.036 A:middle
after that timestamp.

00:07:57.496 --> 00:07:58.196 A:middle
So you don't want to be

00:07:58.196 --> 00:07:59.476 A:middle
generating these signatures, you

00:07:59.476 --> 00:07:59.956 A:middle
know, a week ahead of time.

00:08:05.046 --> 00:08:06.426 A:middle
The final part of the payload is

00:08:06.426 --> 00:08:07.086 A:middle
the key ID.

00:08:07.346 --> 00:08:08.416 A:middle
This is that key ID that App

00:08:08.416 --> 00:08:09.606 A:middle
Store Connect generated earlier.

00:08:12.116 --> 00:08:13.276 A:middle
So I have implanted a function

00:08:13.276 --> 00:08:13.896 A:middle
here called GetKeyID.

00:08:15.136 --> 00:08:16.116 A:middle
All we're going to do there is

00:08:16.116 --> 00:08:17.396 A:middle
return our key ID which we've

00:08:17.396 --> 00:08:18.526 A:middle
stored in an environment

00:08:18.526 --> 00:08:18.916 A:middle
variable.

00:08:18.916 --> 00:08:22.796 A:middle
We do that instead of committing

00:08:22.796 --> 00:08:24.436 A:middle
it to our code and putting it in

00:08:24.436 --> 00:08:25.426 A:middle
our repository, because it's

00:08:25.426 --> 00:08:26.226 A:middle
more secure that way.

00:08:27.426 --> 00:08:28.346 A:middle
Open to fewer eyes.

00:08:30.266 --> 00:08:31.196 A:middle
And if you have just returned a

00:08:31.196 --> 00:08:33.436 A:middle
single key ID -- but this is

00:08:33.436 --> 00:08:34.476 A:middle
actually an ideal place to

00:08:34.476 --> 00:08:36.326 A:middle
implement logic if you are using

00:08:36.326 --> 00:08:37.395 A:middle
multiple keys.

00:08:38.905 --> 00:08:40.116 A:middle
Or perhaps if you determined

00:08:40.116 --> 00:08:41.096 A:middle
that one of your keys has been

00:08:41.096 --> 00:08:42.466 A:middle
compromised, someone has gained

00:08:42.466 --> 00:08:44.536 A:middle
unauthorized access to it, you

00:08:44.536 --> 00:08:45.966 A:middle
can go disable it in App Store

00:08:45.966 --> 00:08:46.196 A:middle
Connect.

00:08:46.796 --> 00:08:49.506 A:middle
You can generate a new one and

00:08:49.546 --> 00:08:50.896 A:middle
then start signing them using

00:08:50.896 --> 00:08:52.016 A:middle
the new key here just by

00:08:52.016 --> 00:08:52.896 A:middle
switching out logic here.

00:08:53.306 --> 00:08:55.646 A:middle
And you don't even have to push

00:08:55.646 --> 00:08:56.756 A:middle
an app update, so you can keep

00:08:56.756 --> 00:08:57.596 A:middle
downtime to a minimum.

00:08:59.156 --> 00:09:00.536 A:middle
So now that we've got all of the

00:08:59.156 --> 00:09:00.536 A:middle
So now that we've got all of the

00:09:00.536 --> 00:09:01.846 A:middle
pieces of our payload to sign,

00:09:02.796 --> 00:09:03.846 A:middle
we want to combine them into one

00:09:03.846 --> 00:09:05.056 A:middle
piece of data to actually

00:09:05.056 --> 00:09:05.966 A:middle
generate the signature from.

00:09:06.546 --> 00:09:09.336 A:middle
Now you can see here, the way we

00:09:09.336 --> 00:09:10.826 A:middle
do that is by combining them

00:09:10.986 --> 00:09:12.716 A:middle
into a string in this order.

00:09:13.776 --> 00:09:16.056 A:middle
We'll concatenate them using the

00:09:16.056 --> 00:09:17.376 A:middle
character with the code point

00:09:17.376 --> 00:09:19.226 A:middle
U2063 in between each one.

00:09:20.176 --> 00:09:21.386 A:middle
All right, I know, why didn't we

00:09:21.386 --> 00:09:22.196 A:middle
just use space, right?

00:09:23.126 --> 00:09:25.406 A:middle
Well, it's really important that

00:09:25.406 --> 00:09:26.896 A:middle
when you're generating or

00:09:26.896 --> 00:09:27.846 A:middle
verifying cryptographic

00:09:27.846 --> 00:09:29.286 A:middle
signatures, you're very exact

00:09:29.286 --> 00:09:30.536 A:middle
about which characters you use,

00:09:31.096 --> 00:09:31.986 A:middle
and as some of you may know,

00:09:31.986 --> 00:09:33.236 A:middle
just the word space can refer to

00:09:33.236 --> 00:09:34.176 A:middle
multiple different kinds of

00:09:34.176 --> 00:09:35.056 A:middle
white space characters.

00:09:35.796 --> 00:09:37.236 A:middle
So we'll use this one here.

00:09:40.046 --> 00:09:41.796 A:middle
So now that we've got our

00:09:41.796 --> 00:09:42.706 A:middle
payload, next step is to get the

00:09:42.706 --> 00:09:43.316 A:middle
key itself.

00:09:44.066 --> 00:09:47.366 A:middle
So we have this GetKeyString for

00:09:47.406 --> 00:09:47.856 A:middle
key ID.

00:09:49.386 --> 00:09:50.206 A:middle
All we're going to do in there

00:09:50.206 --> 00:09:51.736 A:middle
is check, make sure the key ID

00:09:51.736 --> 00:09:52.926 A:middle
matches the one that we expect.

00:09:52.926 --> 00:09:55.166 A:middle
And then we'll return the key

00:09:55.166 --> 00:09:56.056 A:middle
from another environment

00:09:56.056 --> 00:09:56.416 A:middle
variable.

00:09:56.416 --> 00:09:59.636 A:middle
Now here what I'm doing is using

00:09:59.636 --> 00:10:00.676 A:middle
the key in a string.

00:09:59.636 --> 00:10:00.676 A:middle
the key in a string.

00:10:01.196 --> 00:10:03.036 A:middle
It's formatted in the PM format.

00:10:04.046 --> 00:10:05.236 A:middle
This is a really common format.

00:10:05.236 --> 00:10:06.166 A:middle
This is the one that App Store

00:10:06.166 --> 00:10:07.736 A:middle
Connect will send it to you in,

00:10:08.086 --> 00:10:09.396 A:middle
and pretty much any third-party

00:10:09.396 --> 00:10:11.266 A:middle
or first-party library will be

00:10:11.266 --> 00:10:11.976 A:middle
able to handle it.

00:10:17.056 --> 00:10:18.306 A:middle
So we've got our key, we've got

00:10:18.306 --> 00:10:18.516 A:middle
our payload.

00:10:19.036 --> 00:10:19.936 A:middle
We're ready to do the signing.

00:10:22.246 --> 00:10:23.826 A:middle
What we do here is we create an

00:10:23.886 --> 00:10:25.416 A:middle
elliptical curve digital signing

00:10:25.416 --> 00:10:27.176 A:middle
algorithm object which sounds

00:10:27.176 --> 00:10:28.986 A:middle
really fancy, but it's pretty

00:10:28.986 --> 00:10:29.386 A:middle
easy to do.

00:10:29.386 --> 00:10:30.436 A:middle
As you can see, just one line

00:10:30.436 --> 00:10:32.336 A:middle
here using the ECKey library in

00:10:32.336 --> 00:10:33.786 A:middle
JavaScript from NodeJS.

00:10:35.186 --> 00:10:36.826 A:middle
And libraries in other languages

00:10:36.826 --> 00:10:37.756 A:middle
also make it quite easy.

00:10:39.056 --> 00:10:40.256 A:middle
We'll pass in our key string and

00:10:40.256 --> 00:10:41.136 A:middle
we'll tell it that it's in the

00:10:41.136 --> 00:10:41.706 A:middle
PEM format.

00:10:42.436 --> 00:10:44.776 A:middle
And we'll go ahead and make this

00:10:44.906 --> 00:10:46.606 A:middle
cryptoSign object part of

00:10:46.606 --> 00:10:47.836 A:middle
NodeJS's crypto library.

00:10:48.676 --> 00:10:49.476 A:middle
And we're going to tell it to

00:10:49.476 --> 00:10:50.786 A:middle
use the SHA256 hashing

00:10:50.786 --> 00:10:51.196 A:middle
algorithm.

00:10:52.236 --> 00:10:53.336 A:middle
So that's always the one you

00:10:53.336 --> 00:10:53.776 A:middle
should use.

00:10:53.776 --> 00:10:54.736 A:middle
You should make sure to specify

00:10:54.736 --> 00:10:56.066 A:middle
that, whatever library you're

00:10:56.066 --> 00:10:56.676 A:middle
using as well.

00:10:59.226 --> 00:11:00.346 A:middle
Next we'll add our payload to

00:10:59.226 --> 00:11:00.346 A:middle
Next we'll add our payload to

00:11:00.346 --> 00:11:01.316 A:middle
this sign object.

00:11:01.636 --> 00:11:02.636 A:middle
It's just saying this is the

00:11:02.636 --> 00:11:03.596 A:middle
thing we want to generate the

00:11:03.596 --> 00:11:04.336 A:middle
signature from.

00:11:07.216 --> 00:11:08.586 A:middle
And finally generate the

00:11:08.586 --> 00:11:09.326 A:middle
signature itself.

00:11:09.906 --> 00:11:12.236 A:middle
Now the crypto library here

00:11:12.236 --> 00:11:13.296 A:middle
happens to generate the

00:11:13.296 --> 00:11:15.446 A:middle
signature by default in the DER

00:11:15.446 --> 00:11:15.996 A:middle
format.

00:11:17.096 --> 00:11:18.346 A:middle
Most of them do, but if your

00:11:18.346 --> 00:11:19.716 A:middle
library doesn't use that by

00:11:19.716 --> 00:11:21.216 A:middle
default, make sure you specify

00:11:21.216 --> 00:11:22.036 A:middle
DER here.

00:11:23.766 --> 00:11:25.186 A:middle
And also instead of just having

00:11:25.186 --> 00:11:26.386 A:middle
it return us back a whole bunch

00:11:26.386 --> 00:11:27.666 A:middle
of raw cryptographic bytes,

00:11:28.406 --> 00:11:29.696 A:middle
we're going to ask it to send us

00:11:29.696 --> 00:11:31.376 A:middle
a string in a base-64 encoding.

00:11:32.306 --> 00:11:33.216 A:middle
Now this makes it really easy to

00:11:33.216 --> 00:11:35.916 A:middle
transfer this data from your

00:11:35.916 --> 00:11:37.016 A:middle
server to your device, and this

00:11:37.016 --> 00:11:38.646 A:middle
is also the format that StoreKit

00:11:39.236 --> 00:11:39.446 A:middle
uses.

00:11:44.346 --> 00:11:45.426 A:middle
So now we have our signature.

00:11:46.876 --> 00:11:49.246 A:middle
The next step is to do some

00:11:49.246 --> 00:11:49.886 A:middle
verification.

00:11:49.886 --> 00:11:51.626 A:middle
You don't have to do this

00:11:51.626 --> 00:11:53.606 A:middle
verification every time, but it

00:11:53.606 --> 00:11:55.016 A:middle
can be really helpful to do say

00:11:55.016 --> 00:11:56.916 A:middle
while you're writing this

00:11:57.176 --> 00:11:58.226 A:middle
signature generation code in

00:11:58.226 --> 00:11:59.826 A:middle
your own server, just to make

00:11:59.826 --> 00:12:00.886 A:middle
sure there are no errors and

00:11:59.826 --> 00:12:00.886 A:middle
sure there are no errors and

00:12:00.886 --> 00:12:01.766 A:middle
nothing weird happened.

00:12:02.786 --> 00:12:04.436 A:middle
What this does is generates a

00:12:04.496 --> 00:12:05.906 A:middle
public key based on your private

00:12:05.906 --> 00:12:07.836 A:middle
key, and then verifies your

00:12:07.836 --> 00:12:08.966 A:middle
signature and payload just like

00:12:08.966 --> 00:12:09.516 A:middle
the App Store would.

00:12:11.046 --> 00:12:12.256 A:middle
Finally, all that's left is to

00:12:12.256 --> 00:12:13.186 A:middle
send the signature back to

00:12:13.186 --> 00:12:15.176 A:middle
device along with these pieces

00:12:15.176 --> 00:12:16.196 A:middle
of the payload we generated

00:12:16.196 --> 00:12:17.576 A:middle
here, being the key ID, the

00:12:17.576 --> 00:12:18.976 A:middle
nonce and a timestamp.

00:12:23.326 --> 00:12:24.286 A:middle
So now that you've set up your

00:12:24.286 --> 00:12:25.286 A:middle
server to generate these

00:12:25.286 --> 00:12:27.836 A:middle
signatures, the next step is to

00:12:27.836 --> 00:12:28.976 A:middle
set up your app to actually make

00:12:28.976 --> 00:12:32.016 A:middle
the request and send up a

00:12:32.016 --> 00:12:32.536 A:middle
transaction.

00:12:34.096 --> 00:12:36.076 A:middle
So the first thing to do is

00:12:36.346 --> 00:12:37.696 A:middle
actually get the offer details,

00:12:38.086 --> 00:12:39.016 A:middle
the ones you set up in App Store

00:12:39.016 --> 00:12:40.416 A:middle
Connect which you'll do of

00:12:40.416 --> 00:12:42.086 A:middle
course using the SKProducts

00:12:42.496 --> 00:12:42.766 A:middle
request.

00:12:45.326 --> 00:12:46.386 A:middle
And we'll add some code to send

00:12:46.386 --> 00:12:47.756 A:middle
the signature request to the

00:12:47.756 --> 00:12:48.656 A:middle
server and run that code we just

00:12:48.656 --> 00:12:48.976 A:middle
went over.

00:12:52.046 --> 00:12:53.066 A:middle
A good strategy for doing this

00:12:53.066 --> 00:12:55.166 A:middle
is sending up that signature

00:12:55.166 --> 00:12:56.566 A:middle
request just about when the

00:12:56.566 --> 00:12:57.486 A:middle
customer is ready to make a

00:12:57.486 --> 00:12:57.966 A:middle
purchase.

00:12:58.946 --> 00:13:00.536 A:middle
We recommend doing it just

00:12:58.946 --> 00:13:00.536 A:middle
We recommend doing it just

00:13:00.536 --> 00:13:02.406 A:middle
before you show your story

00:13:02.406 --> 00:13:03.356 A:middle
[inaudible] or show this offer

00:13:03.356 --> 00:13:04.006 A:middle
to the customer.

00:13:05.126 --> 00:13:06.236 A:middle
You want to do this not only

00:13:06.236 --> 00:13:07.256 A:middle
because of that 24-hour

00:13:07.256 --> 00:13:09.006 A:middle
timestamp limit, but also so you

00:13:09.006 --> 00:13:09.736 A:middle
have the most up-to-date

00:13:09.776 --> 00:13:10.796 A:middle
business logic from your own

00:13:10.796 --> 00:13:11.136 A:middle
server.

00:13:11.926 --> 00:13:13.536 A:middle
So any keys you may have swapped

00:13:13.536 --> 00:13:14.886 A:middle
out or you have a new

00:13:14.886 --> 00:13:16.086 A:middle
eligibility information about

00:13:16.086 --> 00:13:17.296 A:middle
your customers who you actually

00:13:17.296 --> 00:13:18.276 A:middle
want to send an offer to or not.

00:13:18.986 --> 00:13:20.126 A:middle
You want to have all of that

00:13:20.126 --> 00:13:20.976 A:middle
up-to-date.

00:13:24.066 --> 00:13:25.176 A:middle
And finally we'll handle that

00:13:25.176 --> 00:13:26.546 A:middle
response from the server and

00:13:26.546 --> 00:13:27.766 A:middle
then send the transaction to the

00:13:27.766 --> 00:13:27.976 A:middle
App Store.

00:13:32.486 --> 00:13:33.776 A:middle
So when you make your SKProducts

00:13:33.776 --> 00:13:35.236 A:middle
request, you'll notice that on

00:13:35.276 --> 00:13:36.726 A:middle
each SKProduct, there is a new

00:13:36.726 --> 00:13:37.886 A:middle
property for Subscription

00:13:37.886 --> 00:13:38.226 A:middle
Offers.

00:13:38.626 --> 00:13:39.426 A:middle
It's called Discounts.

00:13:40.716 --> 00:13:42.186 A:middle
This is just an array of

00:13:42.186 --> 00:13:43.596 A:middle
SKProductDiscount objects.

00:13:44.976 --> 00:13:46.076 A:middle
You may recognize that

00:13:46.076 --> 00:13:47.606 A:middle
SKProductDiscount since it's the

00:13:47.606 --> 00:13:48.646 A:middle
same model we use for

00:13:48.646 --> 00:13:50.006 A:middle
introductory offers, as these

00:13:50.006 --> 00:13:50.586 A:middle
are very similar.

00:13:51.146 --> 00:13:53.486 A:middle
And you can see it's got info

00:13:53.486 --> 00:13:55.386 A:middle
such as the price, subscription

00:13:55.386 --> 00:13:56.166 A:middle
period and such.

00:13:57.276 --> 00:13:58.616 A:middle
But we've also added two new

00:13:58.616 --> 00:13:59.646 A:middle
properties for Subscription

00:13:59.646 --> 00:13:59.976 A:middle
Offers.

00:14:02.576 --> 00:14:04.816 A:middle
That of the identifier -- this

00:14:04.816 --> 00:14:06.016 A:middle
is that product code that you

00:14:06.016 --> 00:14:06.986 A:middle
added in App Store Connect.

00:14:08.106 --> 00:14:09.756 A:middle
It's an optional because there's

00:14:09.756 --> 00:14:11.226 A:middle
no identifier for introductory

00:14:11.226 --> 00:14:12.256 A:middle
offers, so it will be nill

00:14:12.256 --> 00:14:12.496 A:middle
there.

00:14:12.746 --> 00:14:15.106 A:middle
But it will be present for every

00:14:15.106 --> 00:14:15.876 A:middle
subscription offer.

00:14:19.156 --> 00:14:20.516 A:middle
And we've added a type.

00:14:21.186 --> 00:14:22.206 A:middle
This is just an enum that will

00:14:22.206 --> 00:14:23.476 A:middle
tell you whether this is in fact

00:14:23.636 --> 00:14:24.966 A:middle
a subscription offer or an

00:14:24.966 --> 00:14:25.686 A:middle
introductory offer.

00:14:27.166 --> 00:14:27.946 A:middle
However, you'll never get an

00:14:27.946 --> 00:14:28.976 A:middle
introductory offer in that

00:14:28.976 --> 00:14:29.646 A:middle
discounts array.

00:14:30.276 --> 00:14:31.576 A:middle
Those will still be only on the

00:14:31.576 --> 00:14:32.986 A:middle
introductory price property of

00:14:33.206 --> 00:14:33.696 A:middle
SKProduct.

00:14:38.076 --> 00:14:39.636 A:middle
So you're ready to display the

00:14:39.636 --> 00:14:40.396 A:middle
offer to your customer.

00:14:40.576 --> 00:14:41.736 A:middle
The first step is to send a

00:14:41.736 --> 00:14:42.716 A:middle
request to your server to

00:14:42.776 --> 00:14:43.746 A:middle
fetchOfferDetails.

00:14:47.056 --> 00:14:48.836 A:middle
So in this example we'll pass in

00:14:49.166 --> 00:14:50.356 A:middle
the application username, that

00:14:50.356 --> 00:14:52.856 A:middle
hashed version, our product

00:14:52.856 --> 00:14:54.116 A:middle
identifier for the subscription,

00:14:55.806 --> 00:14:56.716 A:middle
and the offer identifier.

00:14:56.716 --> 00:14:58.676 A:middle
And here our server already

00:14:58.676 --> 00:14:59.906 A:middle
knows what application bundle ID

00:14:59.906 --> 00:15:00.416 A:middle
we're using.

00:14:59.906 --> 00:15:00.416 A:middle
we're using.

00:15:01.236 --> 00:15:02.556 A:middle
So it will run all that code we

00:15:02.556 --> 00:15:05.156 A:middle
went over and send us back the

00:15:05.156 --> 00:15:09.296 A:middle
nonce, a timestamp, a key

00:15:09.296 --> 00:15:10.616 A:middle
identifier and of course the

00:15:10.616 --> 00:15:12.456 A:middle
signature itself in that base-64

00:15:12.456 --> 00:15:13.896 A:middle
formatted string.

00:15:16.056 --> 00:15:16.926 A:middle
So we're not going to go over

00:15:16.926 --> 00:15:18.376 A:middle
the details of how to make a

00:15:18.376 --> 00:15:19.826 A:middle
secure HTTPS request and

00:15:19.826 --> 00:15:20.246 A:middle
response.

00:15:20.326 --> 00:15:21.576 A:middle
There's lots of other resources

00:15:21.576 --> 00:15:21.896 A:middle
on that.

00:15:22.526 --> 00:15:23.816 A:middle
We'll just continue here inside

00:15:23.816 --> 00:15:24.786 A:middle
our completion block.

00:15:28.226 --> 00:15:29.106 A:middle
What you want to do with all

00:15:29.106 --> 00:15:30.956 A:middle
this information is create this

00:15:30.956 --> 00:15:31.846 A:middle
new class called

00:15:32.046 --> 00:15:33.296 A:middle
SKPaymentDiscount.

00:15:34.626 --> 00:15:36.746 A:middle
Now, this is SKPaymentDiscount,

00:15:36.746 --> 00:15:37.946 A:middle
not SKProductDiscount.

00:15:38.966 --> 00:15:40.436 A:middle
The SKProductDiscount is what we

00:15:40.436 --> 00:15:42.196 A:middle
just went over which gives you

00:15:42.196 --> 00:15:43.806 A:middle
the details of the offer you set

00:15:43.806 --> 00:15:44.566 A:middle
up in App Store Connect.

00:15:45.646 --> 00:15:47.796 A:middle
This SKPaymentDiscount actually

00:15:47.796 --> 00:15:48.856 A:middle
holds all the details of the

00:15:48.856 --> 00:15:49.876 A:middle
payload and the signature.

00:15:50.266 --> 00:15:52.066 A:middle
And it's what you use to attach

00:15:52.066 --> 00:15:52.696 A:middle
to a payment to send up to

00:15:52.696 --> 00:15:52.976 A:middle
StoreKit.

00:15:56.276 --> 00:15:57.026 A:middle
So we'll create one here,

00:15:57.026 --> 00:15:58.646 A:middle
passing in those details into

00:15:58.696 --> 00:16:00.076 A:middle
the initializer, and then just

00:15:58.696 --> 00:16:00.076 A:middle
the initializer, and then just

00:16:00.076 --> 00:16:01.066 A:middle
return that into our completion

00:16:01.066 --> 00:16:01.806 A:middle
block and we're ready to display

00:16:01.806 --> 00:16:01.976 A:middle
the offer.

00:16:07.416 --> 00:16:08.866 A:middle
So when the customer taps that

00:16:08.866 --> 00:16:10.406 A:middle
they want to purchase it, we'll

00:16:10.406 --> 00:16:11.686 A:middle
call this BuyProduct function

00:16:11.686 --> 00:16:11.856 A:middle
here.

00:16:11.856 --> 00:16:15.156 A:middle
You want to make sure to have

00:16:15.216 --> 00:16:16.246 A:middle
the SKProduct for the

00:16:16.246 --> 00:16:18.586 A:middle
subscription itself, that same

00:16:18.786 --> 00:16:21.306 A:middle
hashed application username that

00:16:21.306 --> 00:16:22.126 A:middle
you used to generate the

00:16:22.126 --> 00:16:24.526 A:middle
signature, and that

00:16:24.526 --> 00:16:25.646 A:middle
SKPaymentDiscount we just made.

00:16:28.046 --> 00:16:29.016 A:middle
From there, setting it up is

00:16:29.346 --> 00:16:29.876 A:middle
really simple.

00:16:30.606 --> 00:16:32.216 A:middle
Create a new SKMutablePayment

00:16:32.496 --> 00:16:33.136 A:middle
with that product.

00:16:35.086 --> 00:16:35.966 A:middle
We'll set the application

00:16:35.966 --> 00:16:36.396 A:middle
username.

00:16:39.046 --> 00:16:39.816 A:middle
Then you'll set this new

00:16:39.816 --> 00:16:41.316 A:middle
PaymentDiscount property with

00:16:41.316 --> 00:16:42.436 A:middle
that SKPaymentDiscount.

00:16:44.216 --> 00:16:45.186 A:middle
And that's all there is to it.

00:16:46.366 --> 00:16:47.336 A:middle
And simply add the payment to

00:16:47.336 --> 00:16:48.456 A:middle
the payment queue as you do with

00:16:49.086 --> 00:16:50.086 A:middle
any other in-app purchase.

00:16:55.136 --> 00:16:56.016 A:middle
So in addition to this, we've

00:16:56.016 --> 00:16:57.586 A:middle
added a few new SKErrorCodes

00:16:57.586 --> 00:16:58.786 A:middle
specific for Subscription

00:16:58.786 --> 00:16:59.236 A:middle
Offers.

00:17:00.886 --> 00:17:01.436 A:middle
The first one is

00:17:01.436 --> 00:17:02.676 A:middle
invalidOfferIdentifier.

00:17:03.456 --> 00:17:04.226 A:middle
As it sounds, this will be

00:17:04.226 --> 00:17:06.086 A:middle
returned if the offer identifier

00:17:06.086 --> 00:17:07.465 A:middle
you tried to use can't be found

00:17:07.806 --> 00:17:08.886 A:middle
of if you've disabled it

00:17:08.886 --> 00:17:10.705 A:middle
yourself in App Store Connect.

00:17:12.596 --> 00:17:13.476 A:middle
The next one is

00:17:13.476 --> 00:17:14.626 A:middle
invalidOfferPrice.

00:17:15.586 --> 00:17:16.925 A:middle
So the App Store actually does

00:17:16.925 --> 00:17:18.286 A:middle
some price validation for

00:17:18.286 --> 00:17:19.476 A:middle
pay-as-you-go Subscription

00:17:19.476 --> 00:17:19.935 A:middle
Offers.

00:17:20.556 --> 00:17:21.526 A:middle
We basically want to make sure

00:17:21.526 --> 00:17:23.415 A:middle
that the offer has a lower price

00:17:23.455 --> 00:17:24.296 A:middle
than the base subscription

00:17:24.296 --> 00:17:24.736 A:middle
itself.

00:17:25.346 --> 00:17:27.455 A:middle
So this could happen say if you

00:17:27.455 --> 00:17:29.116 A:middle
set up an offer and then later

00:17:29.116 --> 00:17:30.136 A:middle
you've reduced the price of the

00:17:30.136 --> 00:17:30.806 A:middle
base subscription.

00:17:30.806 --> 00:17:31.856 A:middle
We want to make sure that's

00:17:31.856 --> 00:17:32.826 A:middle
actually a discount.

00:17:35.046 --> 00:17:36.216 A:middle
However, the App Store does not

00:17:36.216 --> 00:17:37.536 A:middle
do price validation for

00:17:37.606 --> 00:17:38.856 A:middle
pay-up-front Subscription

00:17:38.856 --> 00:17:39.296 A:middle
Offers.

00:17:40.276 --> 00:17:41.806 A:middle
The reason for that is we want

00:17:41.806 --> 00:17:43.906 A:middle
to empower you to create

00:17:43.906 --> 00:17:45.866 A:middle
bundles, for example if you're

00:17:45.866 --> 00:17:46.546 A:middle
starting a new

00:17:46.546 --> 00:17:48.916 A:middle
subscription-based game, you may

00:17:48.916 --> 00:17:50.416 A:middle
want to give some customers an

00:17:50.416 --> 00:17:51.826 A:middle
offer that's like three months

00:17:51.826 --> 00:17:53.696 A:middle
of subscription access plus an

00:17:53.696 --> 00:17:55.686 A:middle
additional piece of legendary

00:17:55.686 --> 00:17:56.956 A:middle
gear or experience boosters or

00:17:56.956 --> 00:17:58.326 A:middle
something like that that offers

00:17:58.326 --> 00:17:59.406 A:middle
more value than just three

00:17:59.406 --> 00:17:59.976 A:middle
months of subscription.

00:18:04.416 --> 00:18:05.586 A:middle
The next error is

00:18:05.586 --> 00:18:06.416 A:middle
invalidSignature.

00:18:08.036 --> 00:18:09.296 A:middle
We'll send this back if the

00:18:09.296 --> 00:18:11.106 A:middle
signature you sent up can't be

00:18:11.106 --> 00:18:12.496 A:middle
validated against the private

00:18:12.586 --> 00:18:14.726 A:middle
key you've told us you used.

00:18:15.136 --> 00:18:17.646 A:middle
Or if it can't be validated

00:18:17.646 --> 00:18:18.446 A:middle
against the payload that you

00:18:18.446 --> 00:18:19.396 A:middle
sent up -- so something was

00:18:19.396 --> 00:18:19.976 A:middle
switched in between.

00:18:24.056 --> 00:18:24.396 A:middle
Finally, there's

00:18:24.396 --> 00:18:25.506 A:middle
missingOfferParams.

00:18:26.246 --> 00:18:28.306 A:middle
You'll get this if you forget to

00:18:28.376 --> 00:18:29.906 A:middle
send up or if you send up say an

00:18:29.906 --> 00:18:31.256 A:middle
empty string version of any of

00:18:31.256 --> 00:18:32.456 A:middle
those pieces of the payload.

00:18:33.696 --> 00:18:34.776 A:middle
The most common example of this

00:18:34.776 --> 00:18:36.036 A:middle
is forgetting to set the

00:18:36.036 --> 00:18:37.176 A:middle
application username on the

00:18:37.266 --> 00:18:37.936 A:middle
SKMutablePayment.

00:18:44.186 --> 00:18:45.106 A:middle
So all this code we just looked

00:18:45.106 --> 00:18:46.466 A:middle
at is actually available online.

00:18:47.486 --> 00:18:49.146 A:middle
As I said, that NodeJS server,

00:18:49.246 --> 00:18:50.816 A:middle
you can go and download right

00:18:50.816 --> 00:18:52.016 A:middle
now and run it locally.

00:18:52.216 --> 00:18:53.336 A:middle
It's a ready-to-run app.

00:18:54.446 --> 00:18:55.406 A:middle
And the Swift code we looked at

00:18:55.406 --> 00:18:56.146 A:middle
is available on these

00:18:56.146 --> 00:18:58.076 A:middle
documentation pages, so even

00:18:58.076 --> 00:18:59.156 A:middle
more detailed documentation

00:18:59.156 --> 00:19:00.086 A:middle
about it.

00:18:59.156 --> 00:19:00.086 A:middle
about it.

00:19:00.816 --> 00:19:02.046 A:middle
Plus if you have any questions,

00:19:02.556 --> 00:19:03.716 A:middle
please stop by our lab just

00:19:03.716 --> 00:19:04.646 A:middle
after this at 3:00.

00:19:09.046 --> 00:19:11.196 A:middle
So now that we've talked about

00:19:11.196 --> 00:19:12.626 A:middle
how to generate a signature and

00:19:12.816 --> 00:19:13.676 A:middle
how to actually send up a

00:19:13.676 --> 00:19:15.446 A:middle
transaction to StoreKit, and you

00:19:15.446 --> 00:19:17.646 A:middle
may be thinking, "Great, but who

00:19:17.646 --> 00:19:18.946 A:middle
do I even send these offers to?"

00:19:22.216 --> 00:19:24.046 A:middle
Well, the App Store, as I said,

00:19:24.046 --> 00:19:27.376 A:middle
only enforces a single rule.

00:19:27.376 --> 00:19:28.466 A:middle
Each customer who wants to

00:19:28.466 --> 00:19:29.476 A:middle
redeem an offer must have

00:19:29.536 --> 00:19:30.986 A:middle
previously subscribed to an

00:19:30.986 --> 00:19:32.596 A:middle
auto-renewable subscription in

00:19:33.406 --> 00:19:34.466 A:middle
that app.

00:19:34.726 --> 00:19:36.066 A:middle
So this includes any

00:19:36.066 --> 00:19:37.026 A:middle
auto-renewable subscription.

00:19:37.336 --> 00:19:38.626 A:middle
It doesn't have to be the same

00:19:38.626 --> 00:19:39.416 A:middle
one that you're trying to make

00:19:39.416 --> 00:19:39.976 A:middle
an offer for.

00:19:42.046 --> 00:19:42.776 A:middle
And it can be from any

00:19:42.776 --> 00:19:43.526 A:middle
subscription group.

00:19:43.586 --> 00:19:45.046 A:middle
Once again, it doesn't have to

00:19:45.546 --> 00:19:45.686 A:middle
match.

00:19:48.256 --> 00:19:49.886 A:middle
This includes both current

00:19:49.886 --> 00:19:50.996 A:middle
subscribers and those who

00:19:50.996 --> 00:19:52.266 A:middle
already lapsed and churned out,

00:19:52.886 --> 00:19:54.076 A:middle
so you can use this for both

00:19:54.076 --> 00:19:55.376 A:middle
retaining customers as well as

00:19:55.376 --> 00:19:55.956 A:middle
winning those back.

00:19:59.516 --> 00:20:00.656 A:middle
And customers will be eligible

00:19:59.516 --> 00:20:00.656 A:middle
And customers will be eligible

00:20:00.656 --> 00:20:02.106 A:middle
from the very first subscription

00:20:02.106 --> 00:20:02.466 A:middle
period.

00:20:03.696 --> 00:20:05.186 A:middle
And this includes if they're in

00:20:05.186 --> 00:20:07.196 A:middle
a free or a paid introductory

00:20:07.196 --> 00:20:07.466 A:middle
offer.

00:20:11.436 --> 00:20:13.166 A:middle
With that in mind, the way that

00:20:13.166 --> 00:20:14.576 A:middle
you can check to make sure that

00:20:14.576 --> 00:20:15.766 A:middle
a customer is actually eligible

00:20:15.796 --> 00:20:17.386 A:middle
is of course looking at the

00:20:18.126 --> 00:20:18.286 A:middle
receipt.

00:20:21.046 --> 00:20:22.906 A:middle
So it's actually pretty easy.

00:20:22.906 --> 00:20:23.536 A:middle
You just want to look at the

00:20:23.536 --> 00:20:24.166 A:middle
in-app array or the

00:20:24.166 --> 00:20:25.376 A:middle
latestReceiptInfo array if

00:20:25.376 --> 00:20:25.926 A:middle
that's available.

00:20:26.576 --> 00:20:27.646 A:middle
And just iterate through all the

00:20:27.646 --> 00:20:28.336 A:middle
objects there.

00:20:28.806 --> 00:20:30.706 A:middle
You'll want to look at the

00:20:30.706 --> 00:20:33.746 A:middle
product ID for each one as you

00:20:33.746 --> 00:20:34.336 A:middle
go through.

00:20:35.066 --> 00:20:36.846 A:middle
If you find a product ID that is

00:20:36.846 --> 00:20:38.026 A:middle
an auto-renewable subscription

00:20:38.826 --> 00:20:39.456 A:middle
and you know that they have

00:20:39.456 --> 00:20:40.546 A:middle
already subscribed and thus

00:20:40.576 --> 00:20:42.396 A:middle
they're eligible to redeem any

00:20:42.396 --> 00:20:44.556 A:middle
subscription offer on any

00:20:44.556 --> 00:20:45.666 A:middle
auto-renewable subscription in

00:20:45.666 --> 00:20:46.696 A:middle
that app.

00:20:47.686 --> 00:20:49.056 A:middle
But this is just the App Store's

00:20:49.056 --> 00:20:49.916 A:middle
version of eligibility.

00:20:50.506 --> 00:20:51.536 A:middle
It's pretty simple and we leave

00:20:52.086 --> 00:20:53.036 A:middle
almost everything up to you.

00:20:54.146 --> 00:20:55.186 A:middle
You almost certainly want to

00:20:55.186 --> 00:20:56.136 A:middle
implement your own business

00:20:56.136 --> 00:20:57.436 A:middle
rules for determining which

00:20:57.436 --> 00:20:58.246 A:middle
customers you want to show

00:20:58.246 --> 00:20:59.206 A:middle
offers to and what offers you

00:20:59.206 --> 00:20:59.926 A:middle
want show them.

00:21:02.046 --> 00:21:03.846 A:middle
So to give you some great tips

00:21:03.846 --> 00:21:04.836 A:middle
and insight on how to do that,

00:21:05.536 --> 00:21:06.546 A:middle
I'd like to invite my colleague

00:21:06.546 --> 00:21:07.406 A:middle
Michael to the stage.

00:21:08.516 --> 00:21:11.616 A:middle
[ Applause ]

00:21:12.116 --> 00:21:12.506 A:middle
&gt;&gt; Thanks, Ross.

00:21:13.016 --> 00:21:15.000 A:middle
[ Applause ]

00:21:18.476 --> 00:21:19.406 A:middle
Good afternoon.

00:21:19.976 --> 00:21:21.346 A:middle
My name is Michael Gargas and

00:21:21.346 --> 00:21:22.896 A:middle
I'm a technical advocate on the

00:21:22.896 --> 00:21:23.926 A:middle
App Store Commerce Team.

00:21:24.526 --> 00:21:25.566 A:middle
And I'm really excited to

00:21:25.566 --> 00:21:26.656 A:middle
discuss with you all today

00:21:27.376 --> 00:21:29.806 A:middle
eligibility, distribution and

00:21:29.806 --> 00:21:31.206 A:middle
reduction of voluntary churn

00:21:31.456 --> 00:21:32.626 A:middle
using our great new feature:

00:21:32.766 --> 00:21:33.616 A:middle
Subscription Offers.

00:21:36.046 --> 00:21:37.626 A:middle
As a developer, you may have

00:21:37.626 --> 00:21:39.166 A:middle
asked yourselves some of these

00:21:39.166 --> 00:21:40.486 A:middle
questions about customer

00:21:40.486 --> 00:21:42.626 A:middle
subscription activity inside of

00:21:42.626 --> 00:21:43.516 A:middle
your applications.

00:21:44.276 --> 00:21:45.536 A:middle
Things like, when do the

00:21:45.536 --> 00:21:47.086 A:middle
majority of my customers churn?

00:21:47.776 --> 00:21:48.866 A:middle
Has a customer churned?

00:21:49.886 --> 00:21:51.596 A:middle
Or, why may a customer have

00:21:51.596 --> 00:21:52.866 A:middle
cancelled their subscription?

00:21:54.416 --> 00:21:56.076 A:middle
As Ross mentioned, you can

00:21:56.076 --> 00:21:57.926 A:middle
determine basic eligibility for

00:21:57.926 --> 00:21:59.666 A:middle
Subscription Offers via the app

00:21:59.666 --> 00:21:59.996 A:middle
receipt.

00:22:00.826 --> 00:22:02.606 A:middle
In the in-app array and

00:22:02.606 --> 00:22:04.666 A:middle
latestReceiptInfo you will have

00:22:04.726 --> 00:22:05.776 A:middle
the previous subscription

00:22:05.776 --> 00:22:07.836 A:middle
activity for that subscriber or

00:22:07.836 --> 00:22:08.286 A:middle
customer.

00:22:09.326 --> 00:22:10.706 A:middle
Additionally, we will provide

00:22:10.706 --> 00:22:12.486 A:middle
this information via our updated

00:22:12.676 --> 00:22:14.246 A:middle
server-to-server notifications.

00:22:16.496 --> 00:22:17.666 A:middle
But that's just about what

00:22:17.666 --> 00:22:19.636 A:middle
product the user or customer has

00:22:19.636 --> 00:22:20.476 A:middle
been subscribed to.

00:22:21.356 --> 00:22:22.986 A:middle
Inside of the app receipt, we

00:22:22.986 --> 00:22:24.506 A:middle
provide lots of additional,

00:22:24.656 --> 00:22:26.226 A:middle
valuable customer subscription

00:22:26.226 --> 00:22:26.806 A:middle
information.

00:22:28.026 --> 00:22:29.106 A:middle
Things like the subscription

00:22:29.106 --> 00:22:31.506 A:middle
status -- will my customer renew

00:22:31.506 --> 00:22:32.686 A:middle
in the subsequent subscription

00:22:32.686 --> 00:22:33.026 A:middle
period?

00:22:33.896 --> 00:22:36.136 A:middle
Or is my customer in a failed

00:22:36.606 --> 00:22:37.886 A:middle
payment state?

00:22:38.086 --> 00:22:39.286 A:middle
We also provide unique

00:22:39.316 --> 00:22:41.176 A:middle
identifiers such as the original

00:22:41.176 --> 00:22:43.236 A:middle
transaction ID and web order

00:22:43.236 --> 00:22:45.236 A:middle
line item ID in order for you to

00:22:45.236 --> 00:22:46.886 A:middle
determine a unique subscription

00:22:47.136 --> 00:22:48.996 A:middle
for a specific customer on your

00:22:48.996 --> 00:22:49.386 A:middle
server.

00:22:49.896 --> 00:22:53.016 A:middle
We provide subscriber dates such

00:22:53.016 --> 00:22:54.226 A:middle
as the subscription start and

00:22:54.226 --> 00:22:55.976 A:middle
expires for the current period

00:22:55.976 --> 00:22:57.836 A:middle
as well as all previous renewal

00:22:57.836 --> 00:22:59.206 A:middle
period for that customer.

00:22:59.746 --> 00:23:02.766 A:middle
And we provide subscriber

00:22:59.746 --> 00:23:02.766 A:middle
And we provide subscriber

00:23:02.766 --> 00:23:04.376 A:middle
intent, letting you know if

00:23:04.376 --> 00:23:05.236 A:middle
someone cancelled their

00:23:05.236 --> 00:23:06.806 A:middle
subscription, why did they

00:23:06.806 --> 00:23:07.346 A:middle
cancel it?

00:23:07.696 --> 00:23:09.136 A:middle
And if they requested a refund,

00:23:09.516 --> 00:23:10.506 A:middle
was it an issue with your

00:23:10.506 --> 00:23:11.976 A:middle
application or something else?

00:23:14.356 --> 00:23:15.806 A:middle
Now last year in Engineering

00:23:15.806 --> 00:23:17.816 A:middle
Subscriptions, we discussed this

00:23:17.816 --> 00:23:19.496 A:middle
concept of storing additional

00:23:19.496 --> 00:23:21.236 A:middle
user data from the app receipt.

00:23:22.046 --> 00:23:23.446 A:middle
Here we have an example of

00:23:23.446 --> 00:23:24.616 A:middle
looking at the customer's

00:23:24.616 --> 00:23:26.826 A:middle
expires date, storing that on

00:23:26.826 --> 00:23:28.586 A:middle
your server and determining that

00:23:28.626 --> 00:23:30.196 A:middle
this customer is no longer

00:23:30.196 --> 00:23:31.406 A:middle
eligible for subscription

00:23:31.406 --> 00:23:31.826 A:middle
service.

00:23:32.366 --> 00:23:35.566 A:middle
But we also built upon that and

00:23:35.566 --> 00:23:36.736 A:middle
we talked about storing

00:23:36.776 --> 00:23:38.226 A:middle
additional subscriber status

00:23:38.226 --> 00:23:39.476 A:middle
fields from verifyReceipt.

00:23:39.986 --> 00:23:43.226 A:middle
And then parsing out specific

00:23:43.226 --> 00:23:45.266 A:middle
fields from that response, such

00:23:45.266 --> 00:23:46.466 A:middle
as the auto-renew status.

00:23:49.046 --> 00:23:51.086 A:middle
Additionally, we recommend that

00:23:51.086 --> 00:23:53.156 A:middle
you now save status changes from

00:23:53.156 --> 00:23:53.906 A:middle
our server-to-server

00:23:53.906 --> 00:23:56.476 A:middle
notifications as we are

00:23:56.476 --> 00:23:58.056 A:middle
including the unified app

00:23:58.056 --> 00:23:59.106 A:middle
receipt in those

00:23:59.266 --> 00:24:00.826 A:middle
server-to-server notifications

00:23:59.266 --> 00:24:00.826 A:middle
server-to-server notifications

00:24:00.826 --> 00:24:00.976 A:middle
as well.

00:24:03.436 --> 00:24:05.206 A:middle
Now this is the data that Apple

00:24:05.206 --> 00:24:06.616 A:middle
is providing you about

00:24:06.616 --> 00:24:08.126 A:middle
subscribers and customers in

00:24:08.126 --> 00:24:08.846 A:middle
your application.

00:24:10.036 --> 00:24:12.756 A:middle
As a developer, you have a lot

00:24:12.756 --> 00:24:14.916 A:middle
of additional information that

00:24:14.916 --> 00:24:16.606 A:middle
Apple does not about user

00:24:16.606 --> 00:24:18.446 A:middle
subscription activity inside of

00:24:18.446 --> 00:24:19.176 A:middle
your application.

00:24:20.496 --> 00:24:22.276 A:middle
By taking this information and

00:24:22.276 --> 00:24:24.516 A:middle
marrying it alongside the JSOJN

00:24:24.516 --> 00:24:25.936 A:middle
data that we provide after a

00:24:25.936 --> 00:24:27.726 A:middle
purchase or renewal, you can

00:24:27.726 --> 00:24:30.056 A:middle
begin to curate specific offers

00:24:30.576 --> 00:24:32.486 A:middle
for cohorts of customers.

00:24:33.486 --> 00:24:35.436 A:middle
And then over time, you can

00:24:35.436 --> 00:24:36.996 A:middle
monitor how those cohorts of

00:24:36.996 --> 00:24:38.896 A:middle
customers respond to offers

00:24:39.126 --> 00:24:40.796 A:middle
using key subscription metrics

00:24:41.276 --> 00:24:43.456 A:middle
such as conversion, engagement,

00:24:43.816 --> 00:24:45.096 A:middle
retention and churn.

00:24:45.686 --> 00:24:49.336 A:middle
So to visualize this, let's take

00:24:49.336 --> 00:24:52.366 A:middle
a look at an example user table

00:24:52.596 --> 00:24:53.366 A:middle
on your servers.

00:24:56.146 --> 00:24:58.676 A:middle
Here we see users ordered by

00:24:58.676 --> 00:25:00.886 A:middle
user ID and original transaction

00:24:58.676 --> 00:25:00.886 A:middle
user ID and original transaction

00:25:00.886 --> 00:25:02.906 A:middle
ID, which is the parent unique

00:25:02.906 --> 00:25:04.616 A:middle
identifier for any subscription

00:25:04.616 --> 00:25:05.626 A:middle
purchase for a specific

00:25:05.626 --> 00:25:06.066 A:middle
customer.

00:25:06.606 --> 00:25:09.426 A:middle
But as we said, you can begin to

00:25:09.426 --> 00:25:11.726 A:middle
layer in additional customer

00:25:11.726 --> 00:25:13.396 A:middle
information that is found in the

00:25:13.396 --> 00:25:15.256 A:middle
app receipt, such as the user's

00:25:15.396 --> 00:25:17.376 A:middle
auto-renewal status and

00:25:17.376 --> 00:25:19.066 A:middle
billing-retry status.

00:25:19.836 --> 00:25:21.206 A:middle
But you shouldn't stop there;

00:25:22.086 --> 00:25:23.436 A:middle
you can combine that with

00:25:23.436 --> 00:25:25.356 A:middle
information that you have about

00:25:25.356 --> 00:25:26.716 A:middle
customer activity inside your

00:25:26.716 --> 00:25:27.316 A:middle
application.

00:25:28.156 --> 00:25:29.506 A:middle
Here we have an example of

00:25:29.506 --> 00:25:30.476 A:middle
content consumed.

00:25:31.466 --> 00:25:32.676 A:middle
This could be videos watched,

00:25:33.036 --> 00:25:35.066 A:middle
articles read, stories saved,

00:25:35.916 --> 00:25:36.326 A:middle
anything.

00:25:39.076 --> 00:25:39.846 A:middle
By taking a look at this

00:25:39.846 --> 00:25:41.336 A:middle
information, we're able to

00:25:41.336 --> 00:25:42.926 A:middle
determine which users or

00:25:42.926 --> 00:25:44.646 A:middle
customers are eligible for

00:25:44.646 --> 00:25:47.406 A:middle
Subscription Offers and which

00:25:47.406 --> 00:25:47.756 A:middle
are not.

00:25:50.266 --> 00:25:52.386 A:middle
Taking this one step further, we

00:25:52.386 --> 00:25:53.756 A:middle
can begin to store additional

00:25:53.756 --> 00:25:55.856 A:middle
information such as the renewal

00:25:55.856 --> 00:25:58.156 A:middle
periods, number of billing

00:25:58.156 --> 00:25:59.146 A:middle
errors that customer has

00:25:59.146 --> 00:26:01.186 A:middle
experienced, and if they're

00:25:59.146 --> 00:26:01.186 A:middle
experienced, and if they're

00:26:01.186 --> 00:26:02.996 A:middle
eligible for specific types of

00:26:02.996 --> 00:26:03.436 A:middle
offers.

00:26:04.486 --> 00:26:06.226 A:middle
As Ross mentioned, you can have

00:26:06.226 --> 00:26:08.146 A:middle
up to ten Subscription Offers

00:26:08.466 --> 00:26:09.516 A:middle
per subscriptions queue,

00:26:10.336 --> 00:26:11.496 A:middle
allowing you to essentially

00:26:11.496 --> 00:26:12.806 A:middle
create up to ten different

00:26:12.806 --> 00:26:15.126 A:middle
cohorts of users to identify and

00:26:15.126 --> 00:26:16.386 A:middle
distribute Subscription Offers

00:26:16.386 --> 00:26:16.606 A:middle
too.

00:26:17.176 --> 00:26:20.066 A:middle
If we take a look at three

00:26:20.066 --> 00:26:22.186 A:middle
example customers in your

00:26:22.186 --> 00:26:25.916 A:middle
server, you'll see that based on

00:26:25.916 --> 00:26:27.086 A:middle
their subscription activity,

00:26:27.836 --> 00:26:29.076 A:middle
we've been able to make them

00:26:29.076 --> 00:26:30.166 A:middle
eligible for things like a

00:26:30.166 --> 00:26:32.996 A:middle
win-back offer where a customer

00:26:33.186 --> 00:26:34.596 A:middle
disabled auto-renewal during a

00:26:34.596 --> 00:26:36.236 A:middle
free trial and subsequently

00:26:36.466 --> 00:26:37.276 A:middle
churned out of their

00:26:37.276 --> 00:26:37.816 A:middle
subscription.

00:26:38.396 --> 00:26:42.446 A:middle
Or a retention offer, someone

00:26:42.446 --> 00:26:43.926 A:middle
who's currently subscribed but

00:26:43.926 --> 00:26:45.526 A:middle
has disabled auto-renew and you

00:26:45.526 --> 00:26:46.756 A:middle
want to show them a retention

00:26:46.756 --> 00:26:48.196 A:middle
offer in order to keep them

00:26:48.196 --> 00:26:49.786 A:middle
subscribed to your service.

00:26:50.316 --> 00:26:52.996 A:middle
And lastly, something like an

00:26:52.996 --> 00:26:53.806 A:middle
upgrade offer.

00:26:54.306 --> 00:26:55.466 A:middle
Finding your customers who have

00:26:55.466 --> 00:26:57.306 A:middle
consecutive renewals on maybe a

00:26:57.306 --> 00:26:58.826 A:middle
lower tier of subscription such

00:26:58.826 --> 00:27:00.906 A:middle
as a monthly, and then providing

00:26:58.826 --> 00:27:00.906 A:middle
as a monthly, and then providing

00:27:00.906 --> 00:27:02.106 A:middle
them a subscription offer to

00:27:02.336 --> 00:27:03.806 A:middle
upgrade them to something like

00:27:03.806 --> 00:27:04.266 A:middle
an annual [inaudible].

00:27:05.126 --> 00:27:08.316 A:middle
So that's determining customer

00:27:08.316 --> 00:27:09.946 A:middle
eligibility with a little bit

00:27:09.946 --> 00:27:11.436 A:middle
more information than just

00:27:11.436 --> 00:27:13.016 A:middle
looking at has the customer

00:27:13.016 --> 00:27:14.826 A:middle
previously been subscribed to my

00:27:14.826 --> 00:27:16.096 A:middle
subscription product within my

00:27:16.096 --> 00:27:16.276 A:middle
app.

00:27:17.566 --> 00:27:19.126 A:middle
Once you've built this detailed

00:27:19.126 --> 00:27:21.196 A:middle
customer eligibility, the next

00:27:21.196 --> 00:27:22.706 A:middle
step in this is distributing

00:27:22.706 --> 00:27:23.676 A:middle
your Subscription Offers.

00:27:25.146 --> 00:27:26.726 A:middle
Let's take a look at the path a

00:27:26.726 --> 00:27:28.826 A:middle
subscription offer might take.

00:27:29.956 --> 00:27:31.686 A:middle
First, as we discussed, you have

00:27:31.686 --> 00:27:33.856 A:middle
to identify which customers or

00:27:33.856 --> 00:27:35.356 A:middle
cohorts of customers are

00:27:35.356 --> 00:27:36.626 A:middle
eligible for a subscription

00:27:36.626 --> 00:27:37.006 A:middle
offer.

00:27:37.806 --> 00:27:38.886 A:middle
You then engage with those

00:27:38.886 --> 00:27:40.816 A:middle
customers, you fetch that

00:27:40.816 --> 00:27:42.176 A:middle
information from the App Store

00:27:42.516 --> 00:27:43.506 A:middle
and you present it to your

00:27:43.506 --> 00:27:43.896 A:middle
users.

00:27:45.116 --> 00:27:47.056 A:middle
At which point hopefully the

00:27:47.056 --> 00:27:48.416 A:middle
customer will purchase and

00:27:48.416 --> 00:27:49.556 A:middle
engage with the subscription

00:27:49.556 --> 00:27:49.846 A:middle
offer.

00:27:50.396 --> 00:27:52.566 A:middle
If we go back to our

00:27:52.706 --> 00:27:54.366 A:middle
identification, you can see that

00:27:54.366 --> 00:27:55.676 A:middle
we have marked three different

00:27:55.676 --> 00:27:57.366 A:middle
users eligible for three

00:27:57.366 --> 00:27:58.786 A:middle
different types of Subscription

00:27:58.786 --> 00:27:59.176 A:middle
Offers.

00:28:01.116 --> 00:28:02.716 A:middle
So where do you present this

00:28:02.716 --> 00:28:03.356 A:middle
information?

00:28:04.076 --> 00:28:07.546 A:middle
Well, if the customer is still

00:28:07.546 --> 00:28:08.896 A:middle
engaged with your application

00:28:09.006 --> 00:28:10.736 A:middle
but is in an unsubscribed state,

00:28:11.036 --> 00:28:12.406 A:middle
you can present the Subscription

00:28:12.406 --> 00:28:13.886 A:middle
Offers directly to them with

00:28:13.886 --> 00:28:15.916 A:middle
inside the application via

00:28:15.916 --> 00:28:17.316 A:middle
messaging or local

00:28:17.316 --> 00:28:18.036 A:middle
notifications.

00:28:19.276 --> 00:28:20.536 A:middle
It's important to understand

00:28:20.536 --> 00:28:22.316 A:middle
that your application is the

00:28:22.316 --> 00:28:24.506 A:middle
landing point for all offer

00:28:24.506 --> 00:28:25.136 A:middle
consumption.

00:28:25.996 --> 00:28:27.366 A:middle
So it's important that when you

00:28:27.366 --> 00:28:29.166 A:middle
drive a user to engage with an

00:28:29.166 --> 00:28:30.926 A:middle
offer, that you think about that

00:28:30.926 --> 00:28:32.686 A:middle
call to action and make sure you

00:28:32.686 --> 00:28:33.886 A:middle
clearly state the value

00:28:33.886 --> 00:28:35.606 A:middle
proposition of the subscription

00:28:35.606 --> 00:28:37.206 A:middle
offer as well as the terms that

00:28:37.206 --> 00:28:38.136 A:middle
they'll be agreeing to.

00:28:39.256 --> 00:28:40.876 A:middle
And as always, make sure that

00:28:40.876 --> 00:28:42.126 A:middle
you're in compliance with the

00:28:42.126 --> 00:28:43.576 A:middle
latest app review guidelines

00:28:43.716 --> 00:28:44.656 A:middle
around subscriptions.

00:28:45.746 --> 00:28:47.156 A:middle
But that's if the user is

00:28:47.156 --> 00:28:49.046 A:middle
engaged inside your application.

00:28:50.446 --> 00:28:51.756 A:middle
What happens if the user's no

00:28:51.756 --> 00:28:52.776 A:middle
longer launching the app?

00:28:53.736 --> 00:28:55.086 A:middle
How does this journey change for

00:28:55.086 --> 00:28:55.896 A:middle
a subscription offer?

00:28:58.266 --> 00:28:58.916 A:middle
Here we can see the

00:28:58.916 --> 00:29:00.996 A:middle
identifications phase, but we

00:28:58.916 --> 00:29:00.996 A:middle
identifications phase, but we

00:29:00.996 --> 00:29:02.176 A:middle
also need to understand the

00:29:02.176 --> 00:29:03.676 A:middle
ability to circulate

00:29:03.676 --> 00:29:05.656 A:middle
Subscription Offers outside of

00:29:05.686 --> 00:29:06.446 A:middle
your applications.

00:29:07.086 --> 00:29:11.016 A:middle
And then presenting those

00:29:11.016 --> 00:29:12.426 A:middle
Subscription Offers outside of

00:29:12.426 --> 00:29:14.236 A:middle
the App Store in order to -- or

00:29:14.236 --> 00:29:16.066 A:middle
outside of your application in

00:29:16.066 --> 00:29:17.446 A:middle
order to drive users back in.

00:29:20.046 --> 00:29:21.406 A:middle
So let's talk about presenting

00:29:21.406 --> 00:29:23.286 A:middle
offers outside of your

00:29:23.286 --> 00:29:23.896 A:middle
applications.

00:29:25.116 --> 00:29:26.716 A:middle
You can use your existing

00:29:26.716 --> 00:29:28.426 A:middle
external channels to distribute

00:29:28.516 --> 00:29:29.906 A:middle
calls to action for Subscription

00:29:29.906 --> 00:29:30.246 A:middle
Offers.

00:29:31.046 --> 00:29:31.606 A:middle
Things like your

00:29:31.606 --> 00:29:32.686 A:middle
already-existing paid

00:29:32.686 --> 00:29:34.276 A:middle
advertising or email marketing.

00:29:35.396 --> 00:29:38.046 A:middle
And then using universal links,

00:29:38.646 --> 00:29:40.576 A:middle
you can drive users back into

00:29:40.576 --> 00:29:41.976 A:middle
the application from these

00:29:41.976 --> 00:29:43.316 A:middle
external channels and

00:29:43.316 --> 00:29:45.076 A:middle
identifying which subscription

00:29:45.076 --> 00:29:46.456 A:middle
offer they are potentially

00:29:46.516 --> 00:29:47.836 A:middle
available to receive.

00:29:50.186 --> 00:29:51.126 A:middle
For more information on

00:29:51.126 --> 00:29:52.676 A:middle
universal links, I strongly

00:29:52.676 --> 00:29:54.056 A:middle
encourage you to check out our

00:29:54.056 --> 00:29:55.606 A:middle
What's New in Universal Links

00:29:55.676 --> 00:29:57.586 A:middle
session, which is available in

00:29:57.646 --> 00:29:59.806 A:middle
this year's WWDC application.

00:30:04.046 --> 00:30:04.736 A:middle
So we've now talked about

00:30:04.736 --> 00:30:06.306 A:middle
determining customer eligibility

00:30:06.966 --> 00:30:07.896 A:middle
and then distributing

00:30:07.896 --> 00:30:09.276 A:middle
Subscription Offers to those

00:30:09.276 --> 00:30:10.956 A:middle
eligible customers, either

00:30:10.956 --> 00:30:12.826 A:middle
inside of your applications or

00:30:12.826 --> 00:30:14.416 A:middle
via your existing external

00:30:14.416 --> 00:30:14.776 A:middle
channels.

00:30:16.336 --> 00:30:18.266 A:middle
So next, let's talk about some

00:30:18.266 --> 00:30:19.806 A:middle
tactics or strategies that we

00:30:19.806 --> 00:30:21.026 A:middle
can use with these Subscription

00:30:21.026 --> 00:30:23.366 A:middle
Offers in order to reduce churn.

00:30:27.296 --> 00:30:28.626 A:middle
During Engineering Subscriptions

00:30:28.626 --> 00:30:30.306 A:middle
last year, we spoke about

00:30:30.306 --> 00:30:32.576 A:middle
voluntary churn, the act of a

00:30:32.576 --> 00:30:33.726 A:middle
customer cancelling a

00:30:33.726 --> 00:30:35.586 A:middle
subscription during a

00:30:35.586 --> 00:30:36.406 A:middle
subscription period.

00:30:37.546 --> 00:30:39.016 A:middle
Voluntary churn is customer

00:30:39.016 --> 00:30:40.246 A:middle
choice to leave your

00:30:40.246 --> 00:30:41.066 A:middle
subscription product.

00:30:41.676 --> 00:30:43.166 A:middle
This differs from involuntary

00:30:43.166 --> 00:30:44.926 A:middle
churn where no choice was made

00:30:45.176 --> 00:30:46.566 A:middle
and it was a result of a billing

00:30:46.566 --> 00:30:46.896 A:middle
issue.

00:30:48.336 --> 00:30:50.576 A:middle
Last year we gave you some

00:30:50.576 --> 00:30:51.996 A:middle
tactics such as presenting

00:30:52.166 --> 00:30:53.246 A:middle
alternative subscription

00:30:53.246 --> 00:30:54.786 A:middle
products to users who

00:30:54.786 --> 00:30:55.786 A:middle
voluntarily churned.

00:30:56.446 --> 00:30:58.006 A:middle
But that's not a great way to

00:30:58.006 --> 00:30:59.046 A:middle
win customers back.

00:30:59.736 --> 00:31:01.116 A:middle
And so this year we're

00:30:59.736 --> 00:31:01.116 A:middle
And so this year we're

00:31:01.116 --> 00:31:02.156 A:middle
recommending the following.

00:31:03.266 --> 00:31:05.006 A:middle
We want you to analyze your

00:31:05.006 --> 00:31:06.616 A:middle
customer subscription behavior

00:31:06.986 --> 00:31:08.506 A:middle
using data from the app receipt

00:31:08.716 --> 00:31:10.256 A:middle
as well as information you have

00:31:10.576 --> 00:31:11.916 A:middle
around how subscribers are

00:31:11.916 --> 00:31:13.816 A:middle
consuming content inside your

00:31:14.486 --> 00:31:14.566 A:middle
app.

00:31:15.316 --> 00:31:16.506 A:middle
We want you to take this

00:31:16.506 --> 00:31:17.866 A:middle
information and identify

00:31:17.866 --> 00:31:19.916 A:middle
specific customer cohorts.

00:31:20.576 --> 00:31:23.646 A:middle
And then distribute your

00:31:23.646 --> 00:31:26.406 A:middle
Subscription Offers, relevant

00:31:26.406 --> 00:31:27.586 A:middle
Subscription Offers hopefully,

00:31:27.926 --> 00:31:29.086 A:middle
to these different customer

00:31:29.086 --> 00:31:29.526 A:middle
cohorts.

00:31:30.886 --> 00:31:31.746 A:middle
Now in thinking about

00:31:31.746 --> 00:31:34.036 A:middle
Subscription Offers, oftentimes

00:31:34.356 --> 00:31:35.566 A:middle
we just think about the concept

00:31:35.566 --> 00:31:36.916 A:middle
of winning a customer back that

00:31:36.916 --> 00:31:37.836 A:middle
has been unsubscribed.

00:31:38.866 --> 00:31:41.196 A:middle
But we want to expand upon this

00:31:41.196 --> 00:31:43.246 A:middle
a little bit and talk about five

00:31:43.246 --> 00:31:44.496 A:middle
other ways that you could

00:31:44.496 --> 00:31:45.846 A:middle
implement Subscription Offers

00:31:46.106 --> 00:31:47.006 A:middle
for your subscribers.

00:31:47.656 --> 00:31:49.926 A:middle
You can leverage Subscription

00:31:49.926 --> 00:31:51.416 A:middle
Offers for retention marketing.

00:31:52.346 --> 00:31:54.326 A:middle
When you see someone has opted

00:31:54.526 --> 00:31:56.106 A:middle
not to renew in the subsequent

00:31:56.106 --> 00:31:57.736 A:middle
subscription period, you can try

00:31:57.736 --> 00:31:59.126 A:middle
to retain that customer with a

00:31:59.126 --> 00:31:59.886 A:middle
subscription offer.

00:32:01.326 --> 00:32:02.846 A:middle
If you have information that

00:32:02.846 --> 00:32:03.946 A:middle
leads you to believe at some

00:32:03.946 --> 00:32:05.766 A:middle
point in time this customer may

00:32:05.766 --> 00:32:08.176 A:middle
churn, you could offer them a

00:32:08.176 --> 00:32:10.126 A:middle
save offer, essentially

00:32:10.126 --> 00:32:11.906 A:middle
predicting that the customer may

00:32:11.986 --> 00:32:13.066 A:middle
churn out of the application.

00:32:13.616 --> 00:32:15.796 A:middle
You can look at customer

00:32:15.796 --> 00:32:17.026 A:middle
subscription activity and

00:32:17.026 --> 00:32:18.036 A:middle
products that they're currently

00:32:18.036 --> 00:32:19.446 A:middle
subscribed to in the app receipt

00:32:19.876 --> 00:32:21.306 A:middle
and you can offer Subscription

00:32:21.306 --> 00:32:23.086 A:middle
Offers to upgrade or downgrade

00:32:23.086 --> 00:32:24.356 A:middle
that customer within

00:32:24.356 --> 00:32:25.346 A:middle
subscription groups.

00:32:25.646 --> 00:32:28.346 A:middle
Additionally, you can use

00:32:28.346 --> 00:32:29.786 A:middle
Subscription Offers to appease

00:32:29.826 --> 00:32:31.206 A:middle
customers that may have had a

00:32:31.206 --> 00:32:32.446 A:middle
poor experience inside your

00:32:32.446 --> 00:32:33.066 A:middle
application.

00:32:34.376 --> 00:32:35.346 A:middle
And you can also use

00:32:35.346 --> 00:32:36.736 A:middle
Subscription Offers to reward

00:32:36.736 --> 00:32:38.106 A:middle
your most loyal subscribers.

00:32:38.106 --> 00:32:41.596 A:middle
So let's take a look at each one

00:32:41.596 --> 00:32:43.596 A:middle
of these and show how you can

00:32:43.596 --> 00:32:44.546 A:middle
display these Subscription

00:32:44.546 --> 00:32:46.406 A:middle
Offers to customers within your

00:32:46.406 --> 00:32:46.826 A:middle
application.

00:32:48.236 --> 00:32:50.406 A:middle
First, let's take a look at a

00:32:50.406 --> 00:32:51.306 A:middle
win-back example.

00:32:52.246 --> 00:32:53.796 A:middle
Here we have a subscriber that

00:32:54.216 --> 00:32:57.146 A:middle
has purchased on the 26th.

00:32:58.236 --> 00:32:59.536 A:middle
Midway through the subscription,

00:33:00.406 --> 00:33:02.776 A:middle
this customer opted to cancel.

00:33:03.516 --> 00:33:04.526 A:middle
They called Apple Care and they

00:33:04.526 --> 00:33:05.656 A:middle
stated that they were not happy

00:33:05.656 --> 00:33:06.806 A:middle
with the service and they wanted

00:33:06.806 --> 00:33:08.276 A:middle
to have a cancel and a refund.

00:33:08.736 --> 00:33:10.786 A:middle
As we spoke to you in our

00:33:10.786 --> 00:33:12.716 A:middle
earlier session today, we let

00:33:12.716 --> 00:33:13.856 A:middle
you know about this information

00:33:13.856 --> 00:33:16.066 A:middle
via the receipt with fields such

00:33:16.066 --> 00:33:17.396 A:middle
as cancelation date letting you

00:33:17.396 --> 00:33:18.976 A:middle
know immediately when the refund

00:33:18.976 --> 00:33:20.296 A:middle
and cancelation has taken place.

00:33:21.246 --> 00:33:23.256 A:middle
And cancelation reason so you

00:33:23.256 --> 00:33:24.906 A:middle
can find out if it was a reason

00:33:24.906 --> 00:33:26.826 A:middle
with your application or another

00:33:26.826 --> 00:33:27.126 A:middle
issue.

00:33:27.666 --> 00:33:30.086 A:middle
But we also send this

00:33:30.086 --> 00:33:31.316 A:middle
information with our

00:33:31.316 --> 00:33:32.896 A:middle
newly-updated server-to-server

00:33:32.896 --> 00:33:34.666 A:middle
notifications so that you can

00:33:34.666 --> 00:33:36.426 A:middle
keep a pulse on your subscribers

00:33:36.426 --> 00:33:37.756 A:middle
and customers in real time.

00:33:38.306 --> 00:33:40.386 A:middle
Letting them know that they

00:33:40.386 --> 00:33:41.376 A:middle
should see alternative

00:33:41.376 --> 00:33:42.446 A:middle
Subscription Offers.

00:33:42.856 --> 00:33:45.516 A:middle
When we think about this

00:33:45.516 --> 00:33:47.086 A:middle
conceptually, we want to take

00:33:47.086 --> 00:33:48.506 A:middle
the information from the receipt

00:33:48.506 --> 00:33:49.316 A:middle
or server-to-server

00:33:49.316 --> 00:33:51.466 A:middle
notifications such as the

00:33:51.466 --> 00:33:53.596 A:middle
auto-renewal status, expiration

00:33:53.596 --> 00:33:55.386 A:middle
intent, so on and so forth.

00:33:55.386 --> 00:33:57.546 A:middle
And we want to store that on the

00:33:57.546 --> 00:33:57.976 A:middle
server.

00:33:59.556 --> 00:34:01.746 A:middle
Flagging customers available for

00:33:59.556 --> 00:34:01.746 A:middle
Flagging customers available for

00:34:01.746 --> 00:34:03.136 A:middle
something like a win-back offer

00:34:03.836 --> 00:34:04.856 A:middle
-- this is your signal to

00:34:04.856 --> 00:34:06.326 A:middle
display the subscription offer

00:34:06.326 --> 00:34:06.886 A:middle
to your customers.

00:34:11.056 --> 00:34:13.016 A:middle
As an example, here you can see

00:34:13.016 --> 00:34:14.946 A:middle
a call to explore with us again

00:34:15.335 --> 00:34:16.476 A:middle
for a customer that may have

00:34:16.505 --> 00:34:17.896 A:middle
churned out, and you as a

00:34:17.896 --> 00:34:19.585 A:middle
developer are now attempting to

00:34:19.585 --> 00:34:20.686 A:middle
win that customer back.

00:34:23.246 --> 00:34:25.005 A:middle
We also have a developer example

00:34:25.005 --> 00:34:26.616 A:middle
from iTranslate who's using

00:34:26.616 --> 00:34:28.016 A:middle
Subscription Offers to provide

00:34:28.016 --> 00:34:29.466 A:middle
another free month for their

00:34:29.466 --> 00:34:30.126 A:middle
customers.

00:34:31.326 --> 00:34:32.795 A:middle
These are great implementations

00:34:32.966 --> 00:34:33.835 A:middle
of the subscription offer

00:34:33.835 --> 00:34:33.956 A:middle
feature.

00:34:38.065 --> 00:34:39.025 A:middle
Now let's talk about retention--

00:34:39.626 --> 00:34:40.735 A:middle
the act of retaining a

00:34:40.735 --> 00:34:42.156 A:middle
subscriber who is still

00:34:42.156 --> 00:34:43.326 A:middle
currently subscribed to your

00:34:43.326 --> 00:34:43.896 A:middle
application.

00:34:45.016 --> 00:34:46.485 A:middle
Here we see a customer has

00:34:46.545 --> 00:34:47.545 A:middle
purchased their subscription.

00:34:48.806 --> 00:34:50.646 A:middle
And partway through, they have

00:34:50.646 --> 00:34:52.626 A:middle
opted to navigate to our Apple

00:34:52.706 --> 00:34:53.536 A:middle
Manage Subscriptions

00:34:53.536 --> 00:34:56.136 A:middle
infrastructure and cancel the

00:34:56.136 --> 00:34:56.666 A:middle
subscription.

00:34:59.386 --> 00:35:00.836 A:middle
Now, before, we updated our

00:34:59.386 --> 00:35:00.836 A:middle
Now, before, we updated our

00:35:00.836 --> 00:35:02.166 A:middle
server-to-server notifications,

00:35:02.556 --> 00:35:03.876 A:middle
you would find this information

00:35:04.096 --> 00:35:05.546 A:middle
by re-validating the receipt

00:35:05.546 --> 00:35:07.526 A:middle
with Apple and seeing that the

00:35:07.526 --> 00:35:08.996 A:middle
auto-renew status has changed

00:35:08.996 --> 00:35:10.446 A:middle
from a one to a zero.

00:35:11.126 --> 00:35:12.556 A:middle
This is your signal that your

00:35:12.556 --> 00:35:14.326 A:middle
customer will not renew in the

00:35:14.326 --> 00:35:15.666 A:middle
subsequent subscription period.

00:35:16.206 --> 00:35:18.426 A:middle
But as of the release of

00:35:18.426 --> 00:35:20.306 A:middle
Subscription Offers, we are now

00:35:20.306 --> 00:35:21.616 A:middle
going to send a status or

00:35:21.616 --> 00:35:23.016 A:middle
server-to-server notification

00:35:23.446 --> 00:35:24.776 A:middle
letting you know that this

00:35:24.776 --> 00:35:26.406 A:middle
customer will no longer renew.

00:35:27.136 --> 00:35:28.776 A:middle
And we send this both when a

00:35:28.776 --> 00:35:30.266 A:middle
customer disables their renewal

00:35:30.266 --> 00:35:32.246 A:middle
status and when a customer

00:35:32.246 --> 00:35:33.556 A:middle
enables their renewal status.

00:35:36.046 --> 00:35:37.276 A:middle
This is your signal to let them

00:35:37.276 --> 00:35:38.176 A:middle
know that they shouldn't leave

00:35:38.176 --> 00:35:41.016 A:middle
yet, and potentially check out

00:35:41.016 --> 00:35:42.216 A:middle
what's coming in the future for

00:35:42.216 --> 00:35:43.326 A:middle
your subscription product.

00:35:43.716 --> 00:35:46.566 A:middle
If we look back at the example

00:35:47.006 --> 00:35:48.056 A:middle
of the customer in your

00:35:48.056 --> 00:35:49.716 A:middle
database, you can see that we've

00:35:50.166 --> 00:35:51.966 A:middle
updated the field and made them

00:35:51.966 --> 00:35:53.756 A:middle
available for a retention offer,

00:35:54.416 --> 00:35:55.466 A:middle
at which point when this

00:35:55.466 --> 00:35:56.586 A:middle
customer returns into the

00:35:56.586 --> 00:35:58.646 A:middle
application, either driven by

00:35:58.646 --> 00:36:01.956 A:middle
your marketing or just use, you

00:35:58.646 --> 00:36:01.956 A:middle
your marketing or just use, you

00:36:01.956 --> 00:36:02.856 A:middle
can prompt them with a

00:36:02.856 --> 00:36:04.846 A:middle
subscription offer letting them

00:36:04.846 --> 00:36:05.886 A:middle
know that they can subscribe

00:36:05.886 --> 00:36:06.086 A:middle
now.

00:36:07.186 --> 00:36:08.396 A:middle
"Please explore with us again.

00:36:08.826 --> 00:36:09.786 A:middle
We've noticed that you won't be

00:36:09.786 --> 00:36:11.446 A:middle
staying with us next month."

00:36:11.996 --> 00:36:13.636 A:middle
This is a great call to action

00:36:13.936 --> 00:36:15.846 A:middle
to win and retain customers back

00:36:15.846 --> 00:36:16.666 A:middle
into your subscription

00:36:16.666 --> 00:36:17.206 A:middle
application.

00:36:18.676 --> 00:36:20.206 A:middle
We also have an example from

00:36:20.206 --> 00:36:22.066 A:middle
Ultimate Guitar offering a free

00:36:22.066 --> 00:36:23.896 A:middle
month and 50% off, letting

00:36:23.896 --> 00:36:25.796 A:middle
customers know that this offer

00:36:25.796 --> 00:36:26.726 A:middle
is for today only.

00:36:30.286 --> 00:36:31.136 A:middle
So that's retention.

00:36:32.626 --> 00:36:34.136 A:middle
Let's take a look at an upgrade

00:36:34.186 --> 00:36:35.126 A:middle
example.

00:36:35.956 --> 00:36:38.046 A:middle
Here, we see a subscriber that

00:36:38.046 --> 00:36:39.826 A:middle
has opted to downgrade their

00:36:39.826 --> 00:36:41.316 A:middle
subscription on April 1st.

00:36:41.796 --> 00:36:44.286 A:middle
As you know, we will surface the

00:36:44.286 --> 00:36:45.816 A:middle
upcoming renewal product in the

00:36:45.816 --> 00:36:46.216 A:middle
receipt.

00:36:47.586 --> 00:36:48.986 A:middle
You can choose to parse that out

00:36:48.986 --> 00:36:50.726 A:middle
of the response and store it in

00:36:50.726 --> 00:36:51.266 A:middle
your servers.

00:36:52.486 --> 00:36:54.036 A:middle
And we also send you the

00:36:54.036 --> 00:36:55.406 A:middle
server-to-server notification

00:36:55.806 --> 00:36:56.916 A:middle
letting you know that that

00:36:56.916 --> 00:36:58.456 A:middle
customer has opted to downgrade

00:36:58.456 --> 00:36:59.176 A:middle
their subscription.

00:37:03.046 --> 00:37:04.176 A:middle
If a customer has selected

00:37:04.176 --> 00:37:06.246 A:middle
another product, you understand

00:37:06.246 --> 00:37:07.316 A:middle
what they've been consuming on

00:37:07.316 --> 00:37:08.396 A:middle
the higher tier of service,

00:37:08.926 --> 00:37:09.876 A:middle
whether it be an annual

00:37:09.876 --> 00:37:11.056 A:middle
subscription where there's a

00:37:11.056 --> 00:37:12.836 A:middle
discount included by subscribing

00:37:12.836 --> 00:37:14.236 A:middle
for a longer duration of time,

00:37:14.836 --> 00:37:16.766 A:middle
or a higher tier of service that

00:37:16.816 --> 00:37:18.286 A:middle
the lower tier no longer has

00:37:18.286 --> 00:37:20.226 A:middle
access to specific pieces of

00:37:20.266 --> 00:37:21.766 A:middle
content that you know that

00:37:21.766 --> 00:37:22.676 A:middle
customer was watching.

00:37:22.676 --> 00:37:26.596 A:middle
So in this example, when you see

00:37:26.786 --> 00:37:28.426 A:middle
a customer has downgraded, you

00:37:28.426 --> 00:37:29.836 A:middle
can mark them eligible for an

00:37:29.836 --> 00:37:30.576 A:middle
upgrade offer.

00:37:31.096 --> 00:37:34.926 A:middle
When that customer returns back

00:37:34.926 --> 00:37:37.576 A:middle
into your application, you can

00:37:37.786 --> 00:37:39.616 A:middle
display a subscription offer

00:37:39.846 --> 00:37:41.396 A:middle
with a clear and concise call to

00:37:41.396 --> 00:37:44.006 A:middle
action stating what the offer is

00:37:44.236 --> 00:37:45.286 A:middle
and what they'll be getting by

00:37:45.286 --> 00:37:46.426 A:middle
accepting it.

00:37:47.216 --> 00:37:49.156 A:middle
We also have a great developer

00:37:49.156 --> 00:37:51.466 A:middle
example DashLane, which is

00:37:51.466 --> 00:37:52.416 A:middle
trying to get customers to

00:37:52.416 --> 00:37:54.316 A:middle
upgrade again to their premium

00:37:54.316 --> 00:37:55.226 A:middle
tier of service.

00:37:58.116 --> 00:37:59.726 A:middle
So that's an upgrade example.

00:38:00.266 --> 00:38:03.296 A:middle
Let's discuss customer service.

00:38:06.046 --> 00:38:07.186 A:middle
We all try our best to make

00:38:07.256 --> 00:38:08.956 A:middle
perfect software, but obviously

00:38:08.956 --> 00:38:10.186 A:middle
there are times when users may

00:38:10.186 --> 00:38:12.666 A:middle
experience an issue or outage or

00:38:12.666 --> 00:38:14.156 A:middle
some type of bug or downtime

00:38:14.156 --> 00:38:15.076 A:middle
within your subscription

00:38:15.076 --> 00:38:15.486 A:middle
product.

00:38:16.756 --> 00:38:18.546 A:middle
This user may decide to contact

00:38:18.546 --> 00:38:19.346 A:middle
you through your support

00:38:19.346 --> 00:38:20.806 A:middle
channels and let you know that

00:38:20.806 --> 00:38:22.296 A:middle
they had a less than optimal

00:38:22.296 --> 00:38:22.816 A:middle
experience.

00:38:23.316 --> 00:38:26.686 A:middle
If we reflect back on our user

00:38:26.686 --> 00:38:29.486 A:middle
table on your servers, if your

00:38:29.486 --> 00:38:30.936 A:middle
customer service agents have the

00:38:30.936 --> 00:38:32.656 A:middle
ability to look up that unique

00:38:32.706 --> 00:38:34.926 A:middle
customer, identify them as

00:38:34.926 --> 00:38:36.966 A:middle
offer-eligible, they can then

00:38:36.966 --> 00:38:38.796 A:middle
instruct that customer to

00:38:38.796 --> 00:38:40.626 A:middle
relaunch the app because they're

00:38:40.626 --> 00:38:41.706 A:middle
now offer-eligible.

00:38:43.006 --> 00:38:45.646 A:middle
You may potentially want to

00:38:45.646 --> 00:38:46.946 A:middle
display the subscription offer

00:38:46.946 --> 00:38:48.196 A:middle
on your settings screen.

00:38:49.046 --> 00:38:51.486 A:middle
Here we see an offer to redeem

00:38:51.486 --> 00:38:53.616 A:middle
your free month and an apology

00:38:53.736 --> 00:38:55.076 A:middle
for any interruption in service

00:38:55.076 --> 00:38:56.246 A:middle
that that customer might have

00:38:56.246 --> 00:38:56.856 A:middle
experienced.

00:38:58.196 --> 00:39:00.186 A:middle
When engaged upon, the customer

00:38:58.196 --> 00:39:00.186 A:middle
When engaged upon, the customer

00:39:00.186 --> 00:39:02.566 A:middle
is shown a subscription offer

00:39:03.316 --> 00:39:04.736 A:middle
with a clear and concise call to

00:39:04.736 --> 00:39:05.126 A:middle
action.

00:39:06.186 --> 00:39:07.316 A:middle
This is a great way to keep your

00:39:07.316 --> 00:39:09.766 A:middle
customers happy and appease any

00:39:10.046 --> 00:39:11.186 A:middle
that have had a poor experience

00:39:11.186 --> 00:39:11.906 A:middle
in your application.

00:39:16.046 --> 00:39:17.396 A:middle
You can also use Subscription

00:39:17.396 --> 00:39:19.446 A:middle
Offers to reward your most loyal

00:39:19.446 --> 00:39:20.276 A:middle
subscribers.

00:39:20.786 --> 00:39:24.436 A:middle
Here we see a customer that is

00:39:24.436 --> 00:39:25.606 A:middle
set to hit their 11th

00:39:25.606 --> 00:39:26.626 A:middle
consecutive renewal.

00:39:27.416 --> 00:39:28.596 A:middle
This is obviously an amazing

00:39:28.596 --> 00:39:30.046 A:middle
subscription customer for you as

00:39:30.046 --> 00:39:30.596 A:middle
a developer.

00:39:31.236 --> 00:39:32.276 A:middle
So we want to reward them.

00:39:33.196 --> 00:39:35.716 A:middle
If we look at our user tables on

00:39:35.716 --> 00:39:37.646 A:middle
your servers, you'll see that

00:39:37.646 --> 00:39:38.876 A:middle
we've been capturing renewal

00:39:38.876 --> 00:39:39.306 A:middle
periods.

00:39:39.896 --> 00:39:41.616 A:middle
And this is found via storing

00:39:41.616 --> 00:39:42.556 A:middle
information from the app

00:39:42.556 --> 00:39:42.896 A:middle
receipt.

00:39:45.196 --> 00:39:46.486 A:middle
If we reflect back to the

00:39:46.486 --> 00:39:48.876 A:middle
timeline of the customer, we now

00:39:49.096 --> 00:39:50.636 A:middle
can mark this customer as

00:39:50.636 --> 00:39:52.646 A:middle
loyalty offer-eligible because

00:39:52.646 --> 00:39:54.096 A:middle
they've crossed a threshold with

00:39:54.126 --> 00:39:55.766 A:middle
which we feel we want to reward

00:39:55.766 --> 00:39:56.666 A:middle
those customers.

00:39:57.716 --> 00:39:59.356 A:middle
The next time that customer

00:39:59.356 --> 00:40:01.046 A:middle
launches the application you can

00:39:59.356 --> 00:40:01.046 A:middle
launches the application you can

00:40:01.046 --> 00:40:02.266 A:middle
reward them for their service

00:40:02.266 --> 00:40:03.956 A:middle
and their loyalty by offering

00:40:03.956 --> 00:40:04.846 A:middle
them something like a one month

00:40:04.846 --> 00:40:04.976 A:middle
free.

00:40:09.106 --> 00:40:10.466 A:middle
Here we see a developer example

00:40:10.466 --> 00:40:12.526 A:middle
of Luminary Premium rewarding

00:40:12.576 --> 00:40:14.166 A:middle
their early Premium subscribers

00:40:14.786 --> 00:40:16.256 A:middle
with an additional two months of

00:40:16.256 --> 00:40:18.656 A:middle
service if they activate now.

00:40:22.536 --> 00:40:25.116 A:middle
Lastly, let's talk about a save

00:40:25.116 --> 00:40:25.446 A:middle
offer.

00:40:26.846 --> 00:40:28.506 A:middle
Save offer is very similar to a

00:40:28.506 --> 00:40:30.466 A:middle
retention offer.

00:40:31.846 --> 00:40:33.866 A:middle
Except you as a developer may

00:40:33.866 --> 00:40:35.506 A:middle
have information that leads you

00:40:35.506 --> 00:40:36.886 A:middle
to believe that this customer

00:40:37.106 --> 00:40:37.926 A:middle
may churn.

00:40:38.606 --> 00:40:39.966 A:middle
It's before they've opted to

00:40:39.966 --> 00:40:41.996 A:middle
take the action to navigate to

00:40:41.996 --> 00:40:43.506 A:middle
Manage Subscriptions and

00:40:43.506 --> 00:40:44.506 A:middle
potentially cancel.

00:40:46.076 --> 00:40:47.926 A:middle
If you see that one of these

00:40:48.116 --> 00:40:49.756 A:middle
customers that you feel has a

00:40:49.756 --> 00:40:51.956 A:middle
propensity to churn engages with

00:40:52.006 --> 00:40:53.306 A:middle
maybe a deep link that you've

00:40:53.306 --> 00:40:54.576 A:middle
placed in your application

00:40:54.576 --> 00:40:56.836 A:middle
settings to drive that customer

00:40:57.026 --> 00:40:58.476 A:middle
to Apple's Manage Subscriptions

00:40:58.476 --> 00:41:00.576 A:middle
infrastructure, you could

00:40:58.476 --> 00:41:00.576 A:middle
infrastructure, you could

00:41:00.576 --> 00:41:02.666 A:middle
alternatively decide to show a

00:41:02.666 --> 00:41:03.776 A:middle
subscription offer to that

00:41:03.776 --> 00:41:05.436 A:middle
customer before driving them

00:41:05.436 --> 00:41:06.566 A:middle
into the Manage Subscriptions

00:41:06.566 --> 00:41:06.946 A:middle
interface.

00:41:11.046 --> 00:41:12.276 A:middle
So those are six different

00:41:12.276 --> 00:41:14.126 A:middle
examples of how you could use

00:41:14.126 --> 00:41:16.366 A:middle
Subscription Offers to minimize

00:41:16.366 --> 00:41:18.116 A:middle
voluntary churn inside of your

00:41:18.116 --> 00:41:18.806 A:middle
applications.

00:41:19.506 --> 00:41:21.596 A:middle
But this is just the beginning

00:41:21.596 --> 00:41:22.956 A:middle
and I'm really excited to see

00:41:22.956 --> 00:41:25.006 A:middle
what amazing ideas you as

00:41:25.006 --> 00:41:26.566 A:middle
developers can come up with to

00:41:26.566 --> 00:41:27.756 A:middle
provide a great customer

00:41:27.756 --> 00:41:29.636 A:middle
experience to your subscribers

00:41:29.636 --> 00:41:30.626 A:middle
within your applications.

00:41:35.046 --> 00:41:36.546 A:middle
After Subscription Offers have

00:41:36.546 --> 00:41:37.766 A:middle
been distributed to customers,

00:41:38.346 --> 00:41:40.086 A:middle
the next step in this is

00:41:40.216 --> 00:41:42.406 A:middle
analyzing the performance of

00:41:42.406 --> 00:41:43.356 A:middle
your Subscription Offers.

00:41:43.926 --> 00:41:45.536 A:middle
And today, I'm excited to

00:41:45.536 --> 00:41:47.766 A:middle
announce that we've launched two

00:41:47.846 --> 00:41:50.416 A:middle
new reporting dashboards that

00:41:50.416 --> 00:41:51.746 A:middle
are meant to help you analyze

00:41:51.746 --> 00:41:53.476 A:middle
subscription activity: a

00:41:53.476 --> 00:41:55.326 A:middle
Subscription State Dashboard and

00:41:55.326 --> 00:41:56.796 A:middle
a Subscription Event Dashboard.

00:41:57.306 --> 00:42:00.336 A:middle
Let's take a look at App Store

00:41:57.306 --> 00:42:00.336 A:middle
Let's take a look at App Store

00:42:00.336 --> 00:42:00.656 A:middle
Connect.

00:42:01.706 --> 00:42:03.036 A:middle
If you navigate to the sales and

00:42:03.036 --> 00:42:05.236 A:middle
trends module, you will see that

00:42:05.236 --> 00:42:06.506 A:middle
we've launched a Subscription

00:42:06.506 --> 00:42:07.486 A:middle
State Dashboard.

00:42:08.276 --> 00:42:09.926 A:middle
This dashboard allows you to

00:42:09.926 --> 00:42:11.816 A:middle
understand your subscriber base

00:42:12.186 --> 00:42:13.376 A:middle
over time.

00:42:14.176 --> 00:42:16.006 A:middle
For example, you'll be able to

00:42:16.006 --> 00:42:18.056 A:middle
see exactly how many subscribers

00:42:18.056 --> 00:42:20.076 A:middle
you have in say a standard price

00:42:20.506 --> 00:42:22.506 A:middle
versus an introductory offer or

00:42:22.506 --> 00:42:23.436 A:middle
a subscription offer.

00:42:24.956 --> 00:42:26.916 A:middle
This is a great tool to see and

00:42:26.916 --> 00:42:28.356 A:middle
analyze your subscriber growth

00:42:28.356 --> 00:42:29.466 A:middle
over time and across different

00:42:29.466 --> 00:42:29.956 A:middle
territories.

00:42:33.066 --> 00:42:34.796 A:middle
Additionally, you can also use

00:42:34.796 --> 00:42:37.836 A:middle
this dashboard to see what

00:42:38.146 --> 00:42:39.996 A:middle
offers are being taken advantage

00:42:39.996 --> 00:42:41.406 A:middle
of by your customers inside of

00:42:41.406 --> 00:42:41.976 A:middle
your application.

00:42:46.166 --> 00:42:47.516 A:middle
We've also launched the new

00:42:47.516 --> 00:42:49.226 A:middle
Subscription Events Dashboard.

00:42:49.976 --> 00:42:52.316 A:middle
This allows you to see user

00:42:52.316 --> 00:42:53.416 A:middle
subscription or customer

00:42:53.416 --> 00:42:55.006 A:middle
subscription activity over time.

00:42:56.266 --> 00:42:57.596 A:middle
You can use this to see how well

00:42:57.596 --> 00:42:58.826 A:middle
customers are converting to the

00:42:58.826 --> 00:42:59.846 A:middle
standard price of your

00:42:59.846 --> 00:43:02.156 A:middle
subscription, or you can even

00:42:59.846 --> 00:43:02.156 A:middle
subscription, or you can even

00:43:02.156 --> 00:43:03.666 A:middle
use it to understand the ratio

00:43:03.906 --> 00:43:06.176 A:middle
of say new subscribers to

00:43:06.176 --> 00:43:07.166 A:middle
returning subscribers.

00:43:11.046 --> 00:43:12.326 A:middle
By applying the right filters,

00:43:12.736 --> 00:43:13.776 A:middle
you can also use this to

00:43:13.776 --> 00:43:15.556 A:middle
specifically see how a

00:43:15.556 --> 00:43:17.036 A:middle
particular subscription offer

00:43:17.626 --> 00:43:19.456 A:middle
won back previously unsubscribed

00:43:19.496 --> 00:43:21.776 A:middle
users and then you can use these

00:43:21.776 --> 00:43:23.826 A:middle
insights to inform and optimize

00:43:23.826 --> 00:43:25.656 A:middle
your Subscription Offers and how

00:43:25.656 --> 00:43:27.276 A:middle
you're distributing them over

00:43:27.816 --> 00:43:27.916 A:middle
time.

00:43:31.046 --> 00:43:33.156 A:middle
In summary, if you take anything

00:43:33.156 --> 00:43:35.226 A:middle
away from this session today, it

00:43:35.226 --> 00:43:36.986 A:middle
would be to obviously implement

00:43:36.986 --> 00:43:37.806 A:middle
Subscription Offers.

00:43:38.446 --> 00:43:41.996 A:middle
But you must implement them in

00:43:41.996 --> 00:43:43.696 A:middle
your app as well as on your

00:43:43.696 --> 00:43:44.056 A:middle
server.

00:43:44.616 --> 00:43:47.426 A:middle
We strongly encourage you to

00:43:47.426 --> 00:43:49.046 A:middle
implement detailed customer

00:43:49.046 --> 00:43:49.996 A:middle
eligibility rules.

00:43:50.676 --> 00:43:51.906 A:middle
By using information from the

00:43:51.906 --> 00:43:54.926 A:middle
receipt, our updated

00:43:54.986 --> 00:43:56.336 A:middle
server-to-server notifications

00:43:56.336 --> 00:43:57.776 A:middle
so that you can keep a real-time

00:43:57.776 --> 00:43:59.606 A:middle
pulse on customer activity.

00:44:00.146 --> 00:44:03.216 A:middle
As well as the data that you as

00:44:03.216 --> 00:44:05.036 A:middle
developers have that Apple does

00:44:05.526 --> 00:44:05.626 A:middle
not.

00:44:08.046 --> 00:44:09.356 A:middle
Then we encourage you to present

00:44:09.446 --> 00:44:11.136 A:middle
Subscription Offers to customers

00:44:11.136 --> 00:44:11.856 A:middle
contextually.

00:44:11.956 --> 00:44:14.636 A:middle
We hope that you do this so that

00:44:14.636 --> 00:44:16.046 A:middle
you provide the best customer

00:44:16.046 --> 00:44:17.866 A:middle
experience inside your

00:44:17.866 --> 00:44:18.436 A:middle
application.

00:44:18.836 --> 00:44:22.156 A:middle
And lastly, after your

00:44:22.156 --> 00:44:23.556 A:middle
Subscription Offers are deployed

00:44:23.596 --> 00:44:25.216 A:middle
to customers, you want to use

00:44:25.216 --> 00:44:27.106 A:middle
our two amazing new reporting

00:44:27.106 --> 00:44:28.896 A:middle
dashboards to monitor the

00:44:28.896 --> 00:44:29.866 A:middle
performance of these offers over

00:44:29.866 --> 00:44:29.976 A:middle
time.

00:44:35.046 --> 00:44:35.986 A:middle
For more information, I'd like

00:44:35.986 --> 00:44:37.336 A:middle
to welcome you all to our lab

00:44:37.336 --> 00:44:38.496 A:middle
immediately following the

00:44:38.496 --> 00:44:41.146 A:middle
presentation today at 3:00 PM.

00:44:41.916 --> 00:44:44.106 A:middle
And I'd like to thank you all

00:44:44.106 --> 00:44:45.336 A:middle
for attending the Subscription

00:44:45.336 --> 00:44:46.766 A:middle
Offers session and I'm really

00:44:46.766 --> 00:44:48.006 A:middle
excited to see what you guys can

00:44:48.006 --> 00:44:49.256 A:middle
bake into your application to

00:44:49.256 --> 00:44:50.496 A:middle
provide a great experience for

00:44:50.496 --> 00:44:51.296 A:middle
our shared customers.

00:44:51.706 --> 00:44:51.976 A:middle
Thank you.

00:44:52.516 --> 00:44:55.500 A:middle
[ Applause ]
