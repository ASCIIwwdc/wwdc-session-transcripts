WEBVTT

00:00:00.506 --> 00:00:06.516 A:middle
[ Music ]

00:00:07.516 --> 00:00:13.036 A:middle
[ Applause ]

00:00:13.536 --> 00:00:14.596 A:middle
&gt;&gt; Good afternoon.

00:00:14.796 --> 00:00:16.116 A:middle
Welcome to Introducing

00:00:16.116 --> 00:00:16.636 A:middle
PencilKit.

00:00:17.326 --> 00:00:20.396 A:middle
I'm Will Thimbleby, and I want

00:00:20.396 --> 00:00:22.776 A:middle
to talk about this fantastic

00:00:22.776 --> 00:00:23.426 A:middle
little device.

00:00:24.116 --> 00:00:26.026 A:middle
This is the Apple Pencil and it

00:00:26.026 --> 00:00:28.556 A:middle
can truly transform your user's

00:00:28.556 --> 00:00:31.026 A:middle
experience on iPad.

00:00:33.416 --> 00:00:35.646 A:middle
In fact, it's the most unique

00:00:35.646 --> 00:00:37.696 A:middle
aspect of iPad.

00:00:39.076 --> 00:00:42.416 A:middle
From preschoolers to Isaac

00:00:42.416 --> 00:00:45.146 A:middle
Newton, from your To-Do list to

00:00:45.146 --> 00:00:48.026 A:middle
fine art, the Pencil is often

00:00:48.026 --> 00:00:48.706 A:middle
where it starts.

00:00:50.786 --> 00:00:53.526 A:middle
It's available on the fantastic

00:00:53.526 --> 00:00:56.896 A:middle
iPad Pros and across our entire

00:00:56.896 --> 00:00:58.406 A:middle
lineup of iPads, from the

00:00:58.406 --> 00:01:00.826 A:middle
smallest Mini to the largest

00:00:58.406 --> 00:01:00.826 A:middle
smallest Mini to the largest

00:01:01.416 --> 00:01:01.526 A:middle
Pro.

00:01:02.626 --> 00:01:05.436 A:middle
It's fantastic for photo

00:01:05.436 --> 00:01:07.656 A:middle
retouching, annotating,

00:01:07.656 --> 00:01:09.816 A:middle
doodling, in fact, anything you

00:01:09.816 --> 00:01:11.126 A:middle
want to do that requires

00:01:11.126 --> 00:01:11.686 A:middle
precision.

00:01:15.196 --> 00:01:18.616 A:middle
In iOS 13, we've made great

00:01:18.616 --> 00:01:21.626 A:middle
strides in latency, we've added

00:01:21.626 --> 00:01:23.796 A:middle
a fantastic new tool palette.

00:01:24.456 --> 00:01:27.916 A:middle
We're introducing PencilKit to

00:01:27.916 --> 00:01:30.206 A:middle
enable you to add Pencil to your

00:01:30.206 --> 00:01:32.846 A:middle
apps that much easier.

00:01:33.046 --> 00:01:34.206 A:middle
And we're also introducing

00:01:34.206 --> 00:01:36.126 A:middle
Markup Everywhere to allow users

00:01:36.186 --> 00:01:38.716 A:middle
to annotate and markup your

00:01:38.716 --> 00:01:41.166 A:middle
app's content even if your app

00:01:41.216 --> 00:01:42.616 A:middle
doesn't do anything with Pencil.

00:01:43.406 --> 00:01:44.776 A:middle
We're going to talk about great

00:01:44.966 --> 00:01:47.116 A:middle
Pencil experiences, how

00:01:47.116 --> 00:01:48.686 A:middle
PencilKit can help you make a

00:01:48.686 --> 00:01:49.916 A:middle
great Pencil experience.

00:01:50.156 --> 00:01:51.906 A:middle
And finally, with Markup

00:01:51.906 --> 00:01:53.436 A:middle
Everywhere, how you can provide

00:01:53.436 --> 00:01:55.556 A:middle
the content to users so that

00:01:55.556 --> 00:01:58.146 A:middle
they can mark it up.

00:01:58.416 --> 00:02:00.226 A:middle
What makes a great Pencil

00:01:58.416 --> 00:02:00.226 A:middle
What makes a great Pencil

00:02:00.226 --> 00:02:00.766 A:middle
experience?

00:02:02.086 --> 00:02:03.846 A:middle
Well, a great Pencil experience

00:02:03.846 --> 00:02:05.496 A:middle
is one that fully uses

00:02:05.656 --> 00:02:07.556 A:middle
everything the Apple Pencil has

00:02:07.556 --> 00:02:08.136 A:middle
to offer.

00:02:09.616 --> 00:02:12.176 A:middle
And that means fully using the

00:02:12.176 --> 00:02:13.886 A:middle
precision the Apple Pencil has

00:02:13.946 --> 00:02:14.326 A:middle
to offer.

00:02:15.296 --> 00:02:17.466 A:middle
It lets you touch a pixel and it

00:02:17.466 --> 00:02:18.776 A:middle
gives you that information at

00:02:18.826 --> 00:02:20.596 A:middle
240 times a second.

00:02:21.626 --> 00:02:23.406 A:middle
It's uniquely expressive, giving

00:02:23.406 --> 00:02:25.856 A:middle
you force, azimuth, and

00:02:25.856 --> 00:02:27.386 A:middle
altitude, allowing you to create

00:02:27.706 --> 00:02:29.656 A:middle
real expressive marks on your

00:02:29.656 --> 00:02:31.306 A:middle
app that bring your apps to

00:02:31.306 --> 00:02:31.686 A:middle
life.

00:02:33.126 --> 00:02:33.886 A:middle
And finally, the

00:02:34.216 --> 00:02:36.006 A:middle
second-generation Apple Pencil

00:02:36.326 --> 00:02:38.436 A:middle
has Pencil taps, that allow the

00:02:38.436 --> 00:02:40.476 A:middle
user to change modes in your app

00:02:41.056 --> 00:02:42.356 A:middle
without ever putting the Pencil

00:02:42.356 --> 00:02:42.656 A:middle
down.

00:02:44.696 --> 00:02:46.586 A:middle
There are now three different

00:02:46.616 --> 00:02:47.416 A:middle
types of Pencil.

00:02:47.936 --> 00:02:49.116 A:middle
The first-generation Apple

00:02:49.116 --> 00:02:50.886 A:middle
Pencil, the second-generation,

00:02:50.946 --> 00:02:52.096 A:middle
and the Logitech Crayon.

00:02:53.366 --> 00:02:54.586 A:middle
These all have slightly

00:02:54.586 --> 00:02:55.656 A:middle
different capabilities.

00:02:55.656 --> 00:02:57.546 A:middle
They all have that same great

00:02:57.826 --> 00:02:58.486 A:middle
precision.

00:02:59.706 --> 00:03:01.916 A:middle
They all have the same azimuth

00:02:59.706 --> 00:03:01.916 A:middle
They all have the same azimuth

00:03:01.916 --> 00:03:03.136 A:middle
and altitude that allow you to

00:03:03.166 --> 00:03:04.286 A:middle
create your expressive marks.

00:03:05.766 --> 00:03:08.256 A:middle
The first-generation Pencil adds

00:03:08.836 --> 00:03:09.586 A:middle
force to that.

00:03:10.346 --> 00:03:12.036 A:middle
And the second-generation Pencil

00:03:12.606 --> 00:03:13.656 A:middle
adds tap gestures.

00:03:17.056 --> 00:03:18.266 A:middle
I'm going to talk about a few of

00:03:18.266 --> 00:03:19.916 A:middle
the more complicated aspects of

00:03:19.916 --> 00:03:21.556 A:middle
supporting Apple Pencil well.

00:03:21.556 --> 00:03:24.416 A:middle
But if you're just starting and

00:03:24.416 --> 00:03:25.556 A:middle
you're wanting to build a custom

00:03:25.556 --> 00:03:27.396 A:middle
drawing experience, I especially

00:03:27.396 --> 00:03:29.546 A:middle
recommend ''Leveraging Touch

00:03:29.546 --> 00:03:35.146 A:middle
Input on iOS'' in WWDC 2016.

00:03:35.226 --> 00:03:37.796 A:middle
Understanding how a Pencil works

00:03:38.376 --> 00:03:41.296 A:middle
is key to understanding what it

00:03:41.296 --> 00:03:41.666 A:middle
does.

00:03:43.006 --> 00:03:43.996 A:middle
And so, I'm going to take you a

00:03:43.996 --> 00:03:45.846 A:middle
little bit behind the scenes and

00:03:45.846 --> 00:03:46.866 A:middle
tell you how the Pencil

00:03:46.866 --> 00:03:47.386 A:middle
functions.

00:03:49.176 --> 00:03:50.906 A:middle
The Pencil creates a uniquely

00:03:50.906 --> 00:03:52.526 A:middle
precise touch location on the

00:03:52.526 --> 00:03:55.216 A:middle
screen and gives you that 240

00:03:55.216 --> 00:03:55.506 A:middle
hits.

00:03:56.736 --> 00:03:57.776 A:middle
As you know, it gives you

00:03:57.776 --> 00:03:59.256 A:middle
azimuth, which is the angle

00:03:59.256 --> 00:04:01.566 A:middle
around the perpendicular of the

00:03:59.256 --> 00:04:01.566 A:middle
around the perpendicular of the

00:04:01.566 --> 00:04:01.806 A:middle
iPad.

00:04:06.046 --> 00:04:07.976 A:middle
And it gives you altitude or

00:04:08.046 --> 00:04:10.476 A:middle
tilt, which is the steepness at

00:04:10.476 --> 00:04:11.706 A:middle
which you're holding the Pencil.

00:04:12.716 --> 00:04:14.286 A:middle
What you may not know is how it

00:04:14.286 --> 00:04:14.706 A:middle
does this.

00:04:15.686 --> 00:04:17.185 A:middle
The Pencil generates a second

00:04:17.336 --> 00:04:18.636 A:middle
hit and touchpoint on the

00:04:18.636 --> 00:04:19.536 A:middle
surface of the iPad.

00:04:20.166 --> 00:04:22.106 A:middle
And using trigonometry, it uses

00:04:22.106 --> 00:04:24.546 A:middle
that to calculate azimuth and

00:04:24.546 --> 00:04:25.066 A:middle
altitude.

00:04:27.696 --> 00:04:30.816 A:middle
Finally, the Pencil has an axial

00:04:30.906 --> 00:04:32.596 A:middle
force sensor that detects the

00:04:32.596 --> 00:04:34.676 A:middle
pressure and it sends that data

00:04:34.676 --> 00:04:35.386 A:middle
over Bluetooth.

00:04:36.026 --> 00:04:39.456 A:middle
There are a few consequences of

00:04:39.456 --> 00:04:39.666 A:middle
this.

00:04:40.916 --> 00:04:43.146 A:middle
The first is azimuth and

00:04:43.146 --> 00:04:45.516 A:middle
altitude may be estimated when

00:04:45.516 --> 00:04:46.686 A:middle
that second touchpoint is

00:04:46.686 --> 00:04:49.516 A:middle
obscured, perhaps by a finger or

00:04:49.516 --> 00:04:50.316 A:middle
the edge of the screen.

00:04:52.396 --> 00:04:54.706 A:middle
Azimuth is emphasized when the

00:04:54.706 --> 00:04:56.246 A:middle
Pencil is nearly perpendicular

00:04:56.246 --> 00:04:56.876 A:middle
to the iPad.

00:04:58.126 --> 00:05:00.496 A:middle
And finally, the force data

00:04:58.126 --> 00:05:00.496 A:middle
And finally, the force data

00:05:00.496 --> 00:05:01.836 A:middle
which comes via a different

00:05:01.836 --> 00:05:03.866 A:middle
mechanism is delayed from the

00:05:03.866 --> 00:05:04.866 A:middle
touch location data.

00:05:06.186 --> 00:05:08.976 A:middle
Handling these more complicated

00:05:08.976 --> 00:05:11.036 A:middle
aspects of the Pencil is key to

00:05:11.036 --> 00:05:12.206 A:middle
building a great Pencil

00:05:12.206 --> 00:05:12.726 A:middle
experience.

00:05:15.626 --> 00:05:17.376 A:middle
As I draw in from the edge of

00:05:17.376 --> 00:05:19.636 A:middle
the screen, I'm getting

00:05:19.636 --> 00:05:21.516 A:middle
estimated azimuth and altitude.

00:05:23.926 --> 00:05:26.036 A:middle
As I continue to draw into the

00:05:26.036 --> 00:05:28.166 A:middle
screen, as a second touchpoint

00:05:28.166 --> 00:05:29.236 A:middle
comes onto the surface of the

00:05:29.236 --> 00:05:31.506 A:middle
screen, you get the correct

00:05:31.506 --> 00:05:31.906 A:middle
values.

00:05:32.666 --> 00:05:33.636 A:middle
Now, instead of leaving it

00:05:33.636 --> 00:05:35.836 A:middle
looking something like this, you

00:05:35.836 --> 00:05:36.966 A:middle
should be back-filling those

00:05:37.056 --> 00:05:38.246 A:middle
correct values to correct the

00:05:38.246 --> 00:05:39.966 A:middle
estimated ones.

00:05:45.166 --> 00:05:48.406 A:middle
Second, as you draw, there's a

00:05:48.466 --> 00:05:50.896 A:middle
region behind the Pencil that is

00:05:50.896 --> 00:05:52.266 A:middle
using estimated force.

00:05:52.266 --> 00:05:56.526 A:middle
You should be continuously

00:05:56.526 --> 00:05:58.566 A:middle
listening to force updates so

00:05:58.616 --> 00:05:59.706 A:middle
you can be drawing the correct

00:05:59.706 --> 00:06:00.156 A:middle
values.

00:05:59.706 --> 00:06:00.156 A:middle
values.

00:06:01.636 --> 00:06:04.066 A:middle
This remains true even after the

00:06:04.136 --> 00:06:05.706 A:middle
Pencil is lifted off the surface

00:06:05.706 --> 00:06:06.306 A:middle
of the iPad.

00:06:07.546 --> 00:06:09.186 A:middle
There's a region of the stroke

00:06:09.976 --> 00:06:11.296 A:middle
that's still waiting for those

00:06:11.296 --> 00:06:12.226 A:middle
final force values.

00:06:12.786 --> 00:06:13.986 A:middle
You need to keep listening to

00:06:13.986 --> 00:06:16.036 A:middle
them even after touch has ended.

00:06:19.446 --> 00:06:22.846 A:middle
Now, one aspect of this is that

00:06:23.326 --> 00:06:25.156 A:middle
it means that the user can start

00:06:25.156 --> 00:06:27.786 A:middle
drawing the next stroke before

00:06:27.786 --> 00:06:30.096 A:middle
the last stroke has got all the

00:06:30.096 --> 00:06:30.806 A:middle
final values.

00:06:33.396 --> 00:06:35.076 A:middle
I would recommend using a serial

00:06:35.076 --> 00:06:37.176 A:middle
queue to only be handling one

00:06:37.176 --> 00:06:37.996 A:middle
stroke at a time.

00:06:38.916 --> 00:06:41.416 A:middle
The time is short enough that

00:06:41.416 --> 00:06:42.566 A:middle
the user is not going to notice.

00:06:42.566 --> 00:06:44.636 A:middle
But you want to handle the data

00:06:44.636 --> 00:06:45.146 A:middle
correctly.

00:06:48.216 --> 00:06:50.186 A:middle
Another part of handling Pencil

00:06:50.186 --> 00:06:51.926 A:middle
well is latency.

00:06:52.466 --> 00:06:55.066 A:middle
With physical pencils, the

00:06:55.116 --> 00:06:57.096 A:middle
pencil is intrinsically tied to

00:06:57.096 --> 00:06:59.186 A:middle
the line that's being drawn.

00:07:00.306 --> 00:07:02.696 A:middle
On a digital device, there's

00:07:02.696 --> 00:07:04.606 A:middle
often a gap between where the

00:07:05.366 --> 00:07:07.056 A:middle
implement is and where the line

00:07:07.056 --> 00:07:08.506 A:middle
on screen is.

00:07:09.056 --> 00:07:10.766 A:middle
Keeping this as small as

00:07:10.836 --> 00:07:13.196 A:middle
possible is critical to

00:07:13.196 --> 00:07:14.776 A:middle
maintaining that feeling of

00:07:14.876 --> 00:07:15.836 A:middle
drawing on paper.

00:07:21.586 --> 00:07:24.326 A:middle
We care so much about latency at

00:07:24.326 --> 00:07:25.726 A:middle
Apple, that we have robots

00:07:25.796 --> 00:07:27.456 A:middle
testing it continuously.

00:07:28.776 --> 00:07:30.116 A:middle
This is a high-speed capture

00:07:30.116 --> 00:07:31.296 A:middle
from one of our tests.

00:07:31.856 --> 00:07:33.466 A:middle
It's at 800 frames per second

00:07:33.466 --> 00:07:35.946 A:middle
and you can see just how small

00:07:35.946 --> 00:07:37.316 A:middle
the distance between the pencil

00:07:37.316 --> 00:07:38.826 A:middle
and the line is.

00:07:40.066 --> 00:07:41.746 A:middle
Let me show you that in real

00:07:41.746 --> 00:07:42.056 A:middle
time.

00:07:42.606 --> 00:07:44.976 A:middle
Did you get it?

00:07:45.326 --> 00:07:46.316 A:middle
I'll show it to you again.

00:07:49.976 --> 00:07:52.586 A:middle
So, a few tips for providing the

00:07:52.646 --> 00:07:53.536 A:middle
best latency.

00:07:54.636 --> 00:07:56.236 A:middle
First, you need to be rendering

00:07:56.236 --> 00:07:56.666 A:middle
in Metal.

00:07:57.836 --> 00:07:59.566 A:middle
You only have a few milliseconds

00:07:59.566 --> 00:08:00.946 A:middle
each frame and you need to be

00:07:59.566 --> 00:08:00.946 A:middle
each frame and you need to be

00:08:00.946 --> 00:08:02.726 A:middle
doing so consistently frame

00:08:02.726 --> 00:08:04.546 A:middle
after frame to provide good

00:08:04.546 --> 00:08:04.976 A:middle
latency.

00:08:06.636 --> 00:08:08.826 A:middle
In iOS 13, we've made great

00:08:08.886 --> 00:08:10.266 A:middle
strides improving prediction.

00:08:10.686 --> 00:08:11.916 A:middle
You should be using predicted

00:08:11.966 --> 00:08:13.936 A:middle
touches to reduce your latency

00:08:13.936 --> 00:08:15.246 A:middle
even further.

00:08:17.296 --> 00:08:19.236 A:middle
Finally, if you're building a

00:08:19.236 --> 00:08:22.226 A:middle
drawing app, for absolute best

00:08:22.226 --> 00:08:24.386 A:middle
latency you should avoid things

00:08:24.386 --> 00:08:26.436 A:middle
like transparent Metal layers.

00:08:26.846 --> 00:08:27.736 A:middle
And you should be avoiding

00:08:27.736 --> 00:08:29.246 A:middle
things like UI effects views

00:08:29.746 --> 00:08:32.206 A:middle
with blurs and overlays on top

00:08:32.206 --> 00:08:33.155 A:middle
of your Metal layers.

00:08:34.606 --> 00:08:36.556 A:middle
And one aspect of this that gets

00:08:36.556 --> 00:08:38.336 A:middle
overlooked sometimes is the

00:08:38.446 --> 00:08:40.566 A:middle
default navigation bar and, in

00:08:40.566 --> 00:08:42.336 A:middle
fact, the home affordance can

00:08:42.336 --> 00:08:45.016 A:middle
add extra cost to the rendering.

00:08:46.066 --> 00:08:47.456 A:middle
The final part of supporting the

00:08:47.456 --> 00:08:49.306 A:middle
Pencil is the Pencil Tap

00:08:49.306 --> 00:08:49.726 A:middle
gesture.

00:08:50.356 --> 00:08:52.196 A:middle
And this is a great way to let

00:08:52.196 --> 00:08:54.846 A:middle
the user switch modes without

00:08:54.846 --> 00:08:56.456 A:middle
having to put the Pencil down.

00:09:00.136 --> 00:09:01.676 A:middle
To do so, you should use

00:09:01.676 --> 00:09:03.826 A:middle
UIPencilInteraction, set

00:09:04.436 --> 00:09:06.056 A:middle
yourself as the delegate, and

00:09:06.816 --> 00:09:08.316 A:middle
when the user taps, you'll get

00:09:08.316 --> 00:09:08.956 A:middle
called back.

00:09:10.436 --> 00:09:12.206 A:middle
When you do so, you should be

00:09:12.206 --> 00:09:13.816 A:middle
respecting the user's preferred

00:09:14.076 --> 00:09:14.766 A:middle
tap action.

00:09:15.416 --> 00:09:16.536 A:middle
And this is something the user

00:09:16.536 --> 00:09:17.956 A:middle
will have chosen in Settings.

00:09:18.976 --> 00:09:21.316 A:middle
If you can, you should be

00:09:21.316 --> 00:09:22.086 A:middle
respecting this.

00:09:23.496 --> 00:09:24.786 A:middle
If it doesn't make sense for

00:09:24.786 --> 00:09:27.636 A:middle
your app, Pencil Tap should be

00:09:27.636 --> 00:09:29.346 A:middle
used for nondestructive mode

00:09:29.346 --> 00:09:29.816 A:middle
switching.

00:09:33.156 --> 00:09:35.786 A:middle
So, up until today, building a

00:09:35.786 --> 00:09:38.216 A:middle
great Pencil experience was a

00:09:38.216 --> 00:09:38.926 A:middle
lot of work.

00:09:38.926 --> 00:09:41.826 A:middle
We provide some great APIs and

00:09:41.976 --> 00:09:45.436 A:middle
fantastic hardware and you have

00:09:45.436 --> 00:09:46.576 A:middle
created some of the best drawing

00:09:46.576 --> 00:09:47.746 A:middle
experiences in the world.

00:09:48.726 --> 00:09:50.126 A:middle
I've highlighted a few of the

00:09:50.126 --> 00:09:51.496 A:middle
more complicated aspects of

00:09:51.496 --> 00:09:52.806 A:middle
supporting Apple Pencil well.

00:09:53.606 --> 00:09:55.056 A:middle
And if you haven't already,

00:09:55.726 --> 00:09:57.016 A:middle
consider these as polish.

00:09:57.896 --> 00:09:59.136 A:middle
But for those of you who are

00:09:59.136 --> 00:10:01.126 A:middle
just getting started, we'd love

00:09:59.136 --> 00:10:01.126 A:middle
just getting started, we'd love

00:10:02.836 --> 00:10:04.856 A:middle
to make your lives a whole lot

00:10:04.856 --> 00:10:05.506 A:middle
easier today.

00:10:06.856 --> 00:10:09.166 A:middle
So, I'm very happy to introduce

00:10:10.096 --> 00:10:10.946 A:middle
PencilKit.

00:10:12.516 --> 00:10:19.116 A:middle
[ Applause ]

00:10:19.616 --> 00:10:21.476 A:middle
PencilKit is the framework that

00:10:21.476 --> 00:10:22.846 A:middle
we use across our entire

00:10:22.846 --> 00:10:23.856 A:middle
operating system.

00:10:24.796 --> 00:10:26.626 A:middle
We use it in Notes for providing

00:10:26.626 --> 00:10:28.206 A:middle
low latency drawing and

00:10:28.206 --> 00:10:28.736 A:middle
notetaking.

00:10:29.426 --> 00:10:31.766 A:middle
We use it in Pages for marking

00:10:31.766 --> 00:10:32.516 A:middle
up documents.

00:10:33.116 --> 00:10:34.146 A:middle
And we use it in Markup

00:10:34.146 --> 00:10:35.486 A:middle
Everywhere for annotating

00:10:35.486 --> 00:10:37.296 A:middle
screenshots and PDFs of your

00:10:37.296 --> 00:10:38.136 A:middle
app's content.

00:10:39.196 --> 00:10:40.776 A:middle
We gave it to a few developers

00:10:40.856 --> 00:10:43.026 A:middle
and Pinterest and Canvas added

00:10:43.136 --> 00:10:44.906 A:middle
features to their apps in just

00:10:45.236 --> 00:10:46.426 A:middle
such little time.

00:10:48.716 --> 00:10:50.366 A:middle
You can add it to your app in

00:10:50.366 --> 00:10:51.926 A:middle
just three lines of code.

00:10:55.526 --> 00:10:58.256 A:middle
Here, we create a canvas, add it

00:10:58.256 --> 00:10:59.426 A:middle
to your view hierarchy, and

00:10:59.426 --> 00:11:00.766 A:middle
choose an ink.

00:10:59.426 --> 00:11:00.766 A:middle
choose an ink.

00:11:01.626 --> 00:11:04.236 A:middle
And with that, you get the same

00:11:04.446 --> 00:11:06.916 A:middle
industry-leading, low latency

00:11:07.286 --> 00:11:08.326 A:middle
that we have across our

00:11:08.326 --> 00:11:09.086 A:middle
operating system.

00:11:09.566 --> 00:11:11.696 A:middle
The same great expressive inks

00:11:11.846 --> 00:11:13.026 A:middle
that we've spent hours

00:11:13.026 --> 00:11:13.686 A:middle
perfecting.

00:11:14.726 --> 00:11:17.376 A:middle
And the same fantastic UI and

00:11:17.376 --> 00:11:17.976 A:middle
tool palette.

00:11:20.096 --> 00:11:21.476 A:middle
With a few more lines of code,

00:11:21.476 --> 00:11:22.306 A:middle
you can create something a

00:11:22.306 --> 00:11:23.576 A:middle
little bit more comprehensive

00:11:23.996 --> 00:11:24.896 A:middle
like our sample app.

00:11:25.876 --> 00:11:26.876 A:middle
I'd love to show that to you,

00:11:26.876 --> 00:11:26.976 A:middle
now.

00:11:30.256 --> 00:11:32.646 A:middle
So, here we have our sample app.

00:11:33.046 --> 00:11:35.736 A:middle
It's a little, little drawing

00:11:35.736 --> 00:11:35.956 A:middle
app.

00:11:36.186 --> 00:11:37.436 A:middle
It's got a few thumbnails of

00:11:37.436 --> 00:11:38.336 A:middle
things I've been working on

00:11:38.336 --> 00:11:38.606 A:middle
earlier.

00:11:39.496 --> 00:11:40.776 A:middle
And to give you an idea of the

00:11:40.896 --> 00:11:42.776 A:middle
breadth of what PencilKit can

00:11:42.776 --> 00:11:45.056 A:middle
do, I'll just show you some of

00:11:45.056 --> 00:11:45.266 A:middle
these.

00:11:45.456 --> 00:11:46.426 A:middle
Here're some notes that have

00:11:46.426 --> 00:11:47.576 A:middle
been taken and we can scroll

00:11:47.576 --> 00:11:50.306 A:middle
through these beautiful notes.

00:11:52.436 --> 00:11:54.536 A:middle
And here's a beautiful flower my

00:11:54.536 --> 00:11:55.396 A:middle
friend Andy drew.

00:11:55.946 --> 00:11:58.456 A:middle
This gives me an opportunity to

00:11:58.456 --> 00:12:00.496 A:middle
also show how PencilKit reacts

00:11:58.456 --> 00:12:00.496 A:middle
also show how PencilKit reacts

00:12:00.566 --> 00:12:01.156 A:middle
to Dark Mode.

00:12:01.156 --> 00:12:03.636 A:middle
If I bring down Control Center,

00:12:05.016 --> 00:12:07.726 A:middle
I can switch into Dark, and the

00:12:07.846 --> 00:12:09.116 A:middle
flower that looked great in

00:12:09.116 --> 00:12:11.686 A:middle
Light looks just as stunning in

00:12:11.686 --> 00:12:12.886 A:middle
Dark Mode.

00:12:14.826 --> 00:12:16.786 A:middle
As I come out, the thumbnails

00:12:16.786 --> 00:12:18.636 A:middle
are rerendered and you can see

00:12:18.636 --> 00:12:19.766 A:middle
that the notes are just a

00:12:19.766 --> 00:12:20.216 A:middle
legible.

00:12:22.116 --> 00:12:24.406 A:middle
But luckily for me, I get to do

00:12:24.406 --> 00:12:25.826 A:middle
what every engineer dreams of

00:12:25.936 --> 00:12:29.046 A:middle
and that is drawing on stage.

00:12:31.076 --> 00:12:33.836 A:middle
So, I'm going to switch back to

00:12:33.836 --> 00:12:36.506 A:middle
Light Mode and I'm going to

00:12:36.506 --> 00:12:38.546 A:middle
continue drawing a logo I was

00:12:38.546 --> 00:12:39.846 A:middle
drawing earlier.

00:12:41.476 --> 00:12:43.036 A:middle
At the bottom here, you can see

00:12:43.036 --> 00:12:45.936 A:middle
our great new tool palette UI.

00:12:46.046 --> 00:12:46.966 A:middle
And with a single finger, I can

00:12:46.966 --> 00:12:48.206 A:middle
drag it around the screen to

00:12:48.206 --> 00:12:48.976 A:middle
where it's comfortable.

00:12:51.616 --> 00:12:52.936 A:middle
For now, I'm going to leave it

00:12:52.936 --> 00:12:53.876 A:middle
at the bottom of the screen.

00:12:53.876 --> 00:12:55.746 A:middle
To finish this, I'm going to use

00:12:55.746 --> 00:12:57.246 A:middle
the Ruler and marker to add some

00:12:57.246 --> 00:12:57.556 A:middle
color.

00:12:58.666 --> 00:13:00.256 A:middle
So, I can tap the Ruler to bring

00:12:58.666 --> 00:13:00.256 A:middle
So, I can tap the Ruler to bring

00:13:00.256 --> 00:13:00.766 A:middle
the Ruler in.

00:13:01.166 --> 00:13:02.916 A:middle
And with two fingers, I can

00:13:02.916 --> 00:13:03.686 A:middle
position the Ruler.

00:13:05.056 --> 00:13:06.486 A:middle
I can draw a straight line along

00:13:06.486 --> 00:13:08.276 A:middle
the Ruler but I can also use the

00:13:08.276 --> 00:13:09.336 A:middle
Ruler to mask.

00:13:10.686 --> 00:13:12.446 A:middle
So, I'll do that.

00:13:15.056 --> 00:13:17.316 A:middle
Let me add some more color.

00:13:26.406 --> 00:13:27.896 A:middle
I'll tap the Ruler to dismiss

00:13:27.896 --> 00:13:28.096 A:middle
it.

00:13:28.946 --> 00:13:30.146 A:middle
And I'll add some color in at

00:13:30.146 --> 00:13:30.666 A:middle
the bottom.

00:13:32.466 --> 00:13:34.196 A:middle
Now, one of the most exciting

00:13:34.196 --> 00:13:36.216 A:middle
things PencilKit is doing, is

00:13:36.216 --> 00:13:37.516 A:middle
it's starting to bring together

00:13:37.516 --> 00:13:39.506 A:middle
the worlds of bitmap and vector,

00:13:40.236 --> 00:13:41.276 A:middle
object and pixel.

00:13:42.486 --> 00:13:43.616 A:middle
And one of the areas you see

00:13:43.616 --> 00:13:44.526 A:middle
there is the Eraser.

00:13:44.526 --> 00:13:45.906 A:middle
So, I'm going to use the

00:13:46.506 --> 00:13:47.886 A:middle
double-tap gesture on the Apple

00:13:47.886 --> 00:13:49.326 A:middle
Pencil to change the Eraser.

00:13:51.776 --> 00:13:53.116 A:middle
Just like that, I've switched

00:13:53.116 --> 00:13:53.466 A:middle
modes.

00:13:54.416 --> 00:13:55.856 A:middle
And this is the Pixel Eraser

00:13:55.856 --> 00:13:58.716 A:middle
which lets me draw around and

00:13:58.716 --> 00:14:00.366 A:middle
cut out parts of this logo.

00:13:58.716 --> 00:14:00.366 A:middle
cut out parts of this logo.

00:14:12.276 --> 00:14:14.116 A:middle
Now, if I tap the Eraser, I

00:14:14.116 --> 00:14:15.456 A:middle
switch to the Object Eraser.

00:14:15.946 --> 00:14:17.506 A:middle
And using Object Eraser, I can

00:14:17.506 --> 00:14:20.006 A:middle
draw around this and I can just

00:14:20.066 --> 00:14:21.656 A:middle
delete the bits that I've cut

00:14:21.656 --> 00:14:21.886 A:middle
out.

00:14:26.186 --> 00:14:28.016 A:middle
Just like that, I've used vector

00:14:28.016 --> 00:14:31.176 A:middle
and bitmap operations to create

00:14:31.176 --> 00:14:31.606 A:middle
a drawing.

00:14:31.606 --> 00:14:32.896 A:middle
Let me show you that again.

00:14:33.166 --> 00:14:34.626 A:middle
I'll tap. I'll get the Pixel

00:14:34.626 --> 00:14:34.976 A:middle
Eraser.

00:14:38.346 --> 00:14:39.326 A:middle
I'll take a cutout.

00:14:39.656 --> 00:14:40.766 A:middle
And this time, I'll use the

00:14:40.766 --> 00:14:43.066 A:middle
Lasso Tool, which is next to the

00:14:43.066 --> 00:14:43.436 A:middle
Eraser.

00:14:48.156 --> 00:14:50.886 A:middle
I can move that where I want, or

00:14:50.886 --> 00:14:53.626 A:middle
I can tap on it and delete it.

00:14:54.336 --> 00:14:56.026 A:middle
Now, that I've created my work

00:14:56.026 --> 00:14:58.526 A:middle
of art, I really ought to sign

00:14:58.526 --> 00:14:58.686 A:middle
this.

00:14:58.786 --> 00:15:00.976 A:middle
Luckily, our sample app has a

00:14:58.786 --> 00:15:00.976 A:middle
Luckily, our sample app has a

00:15:00.976 --> 00:15:01.876 A:middle
signature feature.

00:15:02.736 --> 00:15:03.916 A:middle
And up here in the top right,

00:15:03.916 --> 00:15:06.306 A:middle
I'm going to tap Signature and

00:15:06.306 --> 00:15:07.496 A:middle
you'll notice as I do so, the

00:15:07.496 --> 00:15:09.596 A:middle
tool palette goes away and we

00:15:09.596 --> 00:15:11.416 A:middle
have a custom picker up here

00:15:11.416 --> 00:15:12.786 A:middle
which lets me take just a black

00:15:12.846 --> 00:15:13.506 A:middle
or blue ink.

00:15:14.686 --> 00:15:16.466 A:middle
For now, I'm going to stick with

00:15:16.466 --> 00:15:16.736 A:middle
black.

00:15:17.476 --> 00:15:20.256 A:middle
I'm going to add my signature.

00:15:20.256 --> 00:15:22.946 A:middle
Now that I've done that, I'm

00:15:22.946 --> 00:15:25.776 A:middle
going to tap to sign my drawing.

00:15:27.846 --> 00:15:27.946 A:middle
There.

00:15:28.156 --> 00:15:29.786 A:middle
I think that's a great place to

00:15:29.786 --> 00:15:29.976 A:middle
leave it.

00:15:30.046 --> 00:15:31.676 A:middle
I think I could frame that.

00:15:33.516 --> 00:15:36.686 A:middle
That's cool.

00:15:37.516 --> 00:15:43.266 A:middle
[ Applause ]

00:15:43.766 --> 00:15:44.566 A:middle
So let's talk about the

00:15:44.596 --> 00:15:46.456 A:middle
architecture of PencilKit.

00:15:48.106 --> 00:15:49.106 A:middle
The main thing you'll be using

00:15:49.106 --> 00:15:50.316 A:middle
is the PKCanvasView.

00:15:50.716 --> 00:15:52.056 A:middle
This provides the drawable

00:15:52.056 --> 00:15:52.956 A:middle
region for your app.

00:15:55.396 --> 00:15:58.366 A:middle
PKDrawing is the data model.

00:15:59.346 --> 00:16:01.096 A:middle
It captures all those beautiful

00:15:59.346 --> 00:16:01.096 A:middle
It captures all those beautiful

00:16:01.786 --> 00:16:01.966 A:middle
strokes.

00:16:03.276 --> 00:16:06.256 A:middle
PKToolPicker provides the UI

00:16:06.696 --> 00:16:09.976 A:middle
that floats around the screen.

00:16:10.046 --> 00:16:12.356 A:middle
And PKTools are the tools that

00:16:12.356 --> 00:16:14.236 A:middle
provide those inks and

00:16:14.236 --> 00:16:16.316 A:middle
interactions that happen on your

00:16:16.316 --> 00:16:16.686 A:middle
canvas.

00:16:21.266 --> 00:16:23.386 A:middle
PKCanvasView is a UI scroll view

00:16:23.876 --> 00:16:25.576 A:middle
that lets you pan and zoom.

00:16:26.456 --> 00:16:27.776 A:middle
It lets you choose how the

00:16:27.776 --> 00:16:29.066 A:middle
user-- what the user's

00:16:29.066 --> 00:16:30.566 A:middle
interaction does to it by

00:16:30.566 --> 00:16:31.286 A:middle
setting the tool.

00:16:31.576 --> 00:16:32.766 A:middle
And it allows you to get the

00:16:32.766 --> 00:16:35.596 A:middle
data model from it and set the

00:16:35.596 --> 00:16:37.216 A:middle
data model on it using the

00:16:37.216 --> 00:16:38.676 A:middle
drawing property.

00:16:40.596 --> 00:16:42.696 A:middle
PKDrawing is the data model of

00:16:42.696 --> 00:16:43.066 A:middle
PencilKit.

00:16:43.066 --> 00:16:44.816 A:middle
And this is the one piece of

00:16:44.856 --> 00:16:46.156 A:middle
PencilKit that is available on

00:16:46.156 --> 00:16:46.726 A:middle
macOS.

00:16:47.456 --> 00:16:50.326 A:middle
It has a data format and it

00:16:50.326 --> 00:16:52.136 A:middle
allows you to load and store

00:16:52.136 --> 00:16:53.536 A:middle
drawings to data.

00:16:54.106 --> 00:16:56.246 A:middle
You can use these drawings to

00:16:56.246 --> 00:16:58.446 A:middle
generate images for sharing or

00:16:58.446 --> 00:16:58.936 A:middle
thumbnails.

00:17:01.386 --> 00:17:03.116 A:middle
Let's take a look at how the

00:17:03.116 --> 00:17:04.606 A:middle
sample app generates thumbnails.

00:17:07.215 --> 00:17:09.846 A:middle
Because all of these values have

00:17:09.846 --> 00:17:11.976 A:middle
value types, we can safely do

00:17:11.976 --> 00:17:13.976 A:middle
this work on a background queue.

00:17:15.576 --> 00:17:17.205 A:middle
Because we want to generate

00:17:17.746 --> 00:17:19.056 A:middle
those thumbnails in Light or

00:17:19.056 --> 00:17:20.906 A:middle
Dark Mode depending on where the

00:17:20.906 --> 00:17:22.906 A:middle
app is, we can use

00:17:22.906 --> 00:17:24.136 A:middle
UITraitCollections

00:17:24.246 --> 00:17:25.256 A:middle
performAsCurrent.

00:17:29.286 --> 00:17:31.106 A:middle
We use the drawing to generate

00:17:31.106 --> 00:17:31.646 A:middle
that image.

00:17:32.756 --> 00:17:34.796 A:middle
And then, finally, we can set

00:17:34.796 --> 00:17:36.386 A:middle
that image back on the main

00:17:36.386 --> 00:17:36.646 A:middle
thread.

00:17:39.596 --> 00:17:41.806 A:middle
So, now I'd love to hand over to

00:17:41.806 --> 00:17:44.136 A:middle
Jenny who'll talk more about the

00:17:44.136 --> 00:17:46.826 A:middle
fantastic tools and Tool Picker

00:17:46.826 --> 00:17:48.346 A:middle
and the great things that

00:17:48.346 --> 00:17:49.326 A:middle
PencilKit can do.

00:17:50.516 --> 00:17:55.500 A:middle
[ Applause ]

00:17:58.336 --> 00:17:58.976 A:middle
&gt;&gt; Thanks, Will.

00:17:59.156 --> 00:18:01.356 A:middle
Hi. I'm Jenny and I'm going to--

00:17:59.156 --> 00:18:01.356 A:middle
Hi. I'm Jenny and I'm going to--

00:18:01.356 --> 00:18:02.936 A:middle
let's continue our tour through

00:18:02.936 --> 00:18:04.706 A:middle
PencilKit by walking through

00:18:04.756 --> 00:18:06.326 A:middle
some of the great tools that

00:18:06.326 --> 00:18:07.526 A:middle
PencilKit offers you.

00:18:08.376 --> 00:18:10.046 A:middle
These tools are located in a

00:18:10.046 --> 00:18:11.586 A:middle
brand-new Tool Picker.

00:18:11.846 --> 00:18:12.676 A:middle
It's dynamic.

00:18:13.106 --> 00:18:14.296 A:middle
It floats above everything.

00:18:14.296 --> 00:18:16.506 A:middle
I can drag it from edge to edge

00:18:16.696 --> 00:18:18.886 A:middle
or even dock it to the bottom to

00:18:18.886 --> 00:18:20.456 A:middle
really let it get out of my way.

00:18:22.446 --> 00:18:24.456 A:middle
As Will mentioned, these tools

00:18:24.456 --> 00:18:25.716 A:middle
are PKTool types.

00:18:26.316 --> 00:18:27.946 A:middle
And for the marking tools,

00:18:27.946 --> 00:18:29.636 A:middle
they're PKInkingTool types.

00:18:30.186 --> 00:18:31.776 A:middle
You can specify one of the three

00:18:31.776 --> 00:18:36.126 A:middle
types, either pen, marker, or

00:18:36.126 --> 00:18:36.726 A:middle
pencil.

00:18:39.816 --> 00:18:42.066 A:middle
Each of these tools are super

00:18:42.066 --> 00:18:43.796 A:middle
dynamic and expressive.

00:18:43.996 --> 00:18:45.886 A:middle
And you can see how within even

00:18:45.926 --> 00:18:48.336 A:middle
a single stroke, the width and

00:18:48.336 --> 00:18:50.256 A:middle
opacity change based on

00:18:50.256 --> 00:18:52.586 A:middle
different Pencil properties like

00:18:52.586 --> 00:18:55.436 A:middle
force, azimuth, altitude, or

00:18:55.436 --> 00:18:56.866 A:middle
velocity.

00:18:59.086 --> 00:18:59.986 A:middle
You can set this tool on the

00:18:59.986 --> 00:19:03.196 A:middle
canvasView to set what ink is

00:18:59.986 --> 00:19:03.196 A:middle
canvasView to set what ink is

00:19:03.236 --> 00:19:04.156 A:middle
set on the canvas.

00:19:04.566 --> 00:19:06.276 A:middle
If you set the canvasView as an

00:19:06.276 --> 00:19:07.956 A:middle
observer of the Tool Picker,

00:19:08.486 --> 00:19:09.906 A:middle
underneath the hood will set the

00:19:09.906 --> 00:19:11.746 A:middle
ink on the canvasView for you.

00:19:12.476 --> 00:19:13.816 A:middle
However, if you have the

00:19:13.816 --> 00:19:15.406 A:middle
signature pane and you don't

00:19:15.406 --> 00:19:17.896 A:middle
want the Tool Picker, you'll set

00:19:17.896 --> 00:19:19.156 A:middle
this in your application

00:19:19.156 --> 00:19:19.646 A:middle
yourself.

00:19:20.746 --> 00:19:22.236 A:middle
For the PKInkingTool, you'll

00:19:22.236 --> 00:19:24.546 A:middle
specify either the type, pen,

00:19:24.706 --> 00:19:28.216 A:middle
marker, pencil, the color, or

00:19:28.216 --> 00:19:29.386 A:middle
the width.

00:19:30.786 --> 00:19:33.546 A:middle
For the width value, each of ink

00:19:33.546 --> 00:19:35.176 A:middle
type has a default width.

00:19:35.916 --> 00:19:37.816 A:middle
However, as we saw before, this

00:19:37.816 --> 00:19:40.026 A:middle
width isn't a fixed value and it

00:19:40.026 --> 00:19:41.196 A:middle
changes based on different

00:19:41.196 --> 00:19:42.096 A:middle
pencil properties.

00:19:42.676 --> 00:19:43.866 A:middle
And so, rather this width

00:19:43.866 --> 00:19:46.476 A:middle
represents a base value based on

00:19:46.476 --> 00:19:48.576 A:middle
an average pencil user pencil

00:19:48.576 --> 00:19:49.386 A:middle
characteristic.

00:19:50.806 --> 00:19:52.206 A:middle
You can also query the valid

00:19:52.206 --> 00:19:53.816 A:middle
width range for each of those

00:19:53.816 --> 00:19:55.436 A:middle
ink types.

00:19:56.876 --> 00:19:58.786 A:middle
You can see this here as I use

00:19:58.786 --> 00:19:59.676 A:middle
the pencil tool.

00:20:00.156 --> 00:20:01.496 A:middle
As I hold the pencil more

00:20:01.496 --> 00:20:04.076 A:middle
vertically, the pencil stroke is

00:20:04.166 --> 00:20:04.636 A:middle
thinner.

00:20:05.066 --> 00:20:05.916 A:middle
But as I hold it more

00:20:05.916 --> 00:20:07.666 A:middle
horizontally, the stroke is

00:20:07.666 --> 00:20:08.746 A:middle
actually thicker.

00:20:09.716 --> 00:20:11.296 A:middle
As I change the thickness in the

00:20:11.296 --> 00:20:13.266 A:middle
Tool Picker, the thickness

00:20:13.266 --> 00:20:14.476 A:middle
scales accordingly.

00:20:18.266 --> 00:20:20.706 A:middle
We also have a PKEraser tool in

00:20:20.706 --> 00:20:22.336 A:middle
which you can specify either a

00:20:22.336 --> 00:20:25.526 A:middle
vector or bitmap, where vector

00:20:25.526 --> 00:20:27.246 A:middle
corresponds to objects and

00:20:27.246 --> 00:20:28.956 A:middle
bitmap corresponds to pixel.

00:20:29.746 --> 00:20:30.916 A:middle
We've actually worked really

00:20:30.916 --> 00:20:33.116 A:middle
hard to unify the two worlds of

00:20:33.116 --> 00:20:34.566 A:middle
vector and bitmap together,

00:20:35.136 --> 00:20:36.786 A:middle
where vector is object and

00:20:36.786 --> 00:20:37.766 A:middle
bitmap is pixel.

00:20:38.526 --> 00:20:40.196 A:middle
Instead of just erasing the

00:20:40.246 --> 00:20:42.206 A:middle
pixels on the screen, we also

00:20:42.396 --> 00:20:44.286 A:middle
sliced through those strokes so

00:20:44.286 --> 00:20:45.566 A:middle
that you can separate them out

00:20:45.566 --> 00:20:47.316 A:middle
or object erase them later.

00:20:51.076 --> 00:20:52.826 A:middle
We also have for selection, the

00:20:52.826 --> 00:20:54.126 A:middle
PKLasso Tool.

00:20:55.436 --> 00:20:57.416 A:middle
With the Lasso Tool, any strokes

00:20:57.416 --> 00:20:58.466 A:middle
that you intersect will be

00:20:58.466 --> 00:21:00.636 A:middle
selected and then, you can drag

00:20:58.466 --> 00:21:00.636 A:middle
selected and then, you can drag

00:21:00.636 --> 00:21:02.846 A:middle
them around, cut, copy, paste

00:21:02.846 --> 00:21:04.886 A:middle
it, or even drag and drop them

00:21:04.886 --> 00:21:06.276 A:middle
to different applications.

00:21:08.386 --> 00:21:11.206 A:middle
New to iOS 13, we also have a

00:21:11.206 --> 00:21:12.476 A:middle
great Ruler Tool.

00:21:12.996 --> 00:21:15.606 A:middle
And it's important to note that

00:21:15.606 --> 00:21:17.466 A:middle
the Ruler is not a tool--

00:21:17.536 --> 00:21:18.466 A:middle
PKTool.

00:21:18.466 --> 00:21:19.996 A:middle
But rather, it's a property that

00:21:19.996 --> 00:21:22.696 A:middle
you toggle on the canvas to show

00:21:22.696 --> 00:21:23.956 A:middle
or hide the Ruler.

00:21:25.196 --> 00:21:27.486 A:middle
You can either draw against it

00:21:27.536 --> 00:21:28.946 A:middle
to snap your lines to draw

00:21:28.946 --> 00:21:30.706 A:middle
straight lines, or you can mask

00:21:30.906 --> 00:21:32.476 A:middle
against it like Will did with

00:21:32.476 --> 00:21:34.846 A:middle
the apple in here with the water

00:21:34.846 --> 00:21:35.406 A:middle
and the grass.

00:21:38.476 --> 00:21:39.256 A:middle
Now, that we've gone through

00:21:39.256 --> 00:21:41.216 A:middle
some of the amazing tools, let's

00:21:41.216 --> 00:21:43.426 A:middle
look at the PKToolPicker and how

00:21:43.426 --> 00:21:45.116 A:middle
we can get it on the screen.

00:21:47.166 --> 00:21:49.026 A:middle
An important thing to note with

00:21:49.026 --> 00:21:50.896 A:middle
the Tool Picker is that it's not

00:21:50.946 --> 00:21:51.566 A:middle
a view.

00:21:52.156 --> 00:21:53.776 A:middle
Rather, it's an object that

00:21:53.776 --> 00:21:55.146 A:middle
shows or hides the view and it's

00:21:55.146 --> 00:21:56.706 A:middle
separate from the Canvas View.

00:21:57.726 --> 00:21:59.016 A:middle
It's also important to note that

00:21:59.016 --> 00:22:01.546 A:middle
it floats above everything and

00:21:59.016 --> 00:22:01.546 A:middle
it floats above everything and

00:22:01.546 --> 00:22:02.526 A:middle
it's very similar to the

00:22:02.526 --> 00:22:04.266 A:middle
keyboard in that its visibility

00:22:04.266 --> 00:22:05.346 A:middle
is based off of first

00:22:05.346 --> 00:22:06.046 A:middle
responders.

00:22:06.906 --> 00:22:08.416 A:middle
So, let's walk through some code

00:22:08.416 --> 00:22:10.526 A:middle
and see how we can do that.

00:22:10.946 --> 00:22:12.836 A:middle
First, we'll ask for the shared

00:22:12.836 --> 00:22:14.916 A:middle
Tool Picker for the window.

00:22:16.106 --> 00:22:17.856 A:middle
We'll add the Canvas View as an

00:22:17.896 --> 00:22:18.366 A:middle
observer.

00:22:18.366 --> 00:22:20.096 A:middle
And by doing so, whenever you

00:22:20.096 --> 00:22:21.236 A:middle
change the tool in the Tool

00:22:21.236 --> 00:22:23.316 A:middle
Picker, you'll also change the

00:22:23.316 --> 00:22:24.826 A:middle
tool on the Canvas View.

00:22:27.736 --> 00:22:29.846 A:middle
The Tool Picker also has a list

00:22:29.846 --> 00:22:30.796 A:middle
of responders.

00:22:31.506 --> 00:22:32.776 A:middle
If your object becomes first

00:22:32.776 --> 00:22:34.586 A:middle
responder and it's in this lest

00:22:34.586 --> 00:22:36.526 A:middle
by setting visible to true, the

00:22:36.526 --> 00:22:37.556 A:middle
palette will show up.

00:22:38.376 --> 00:22:40.176 A:middle
If setVisible is false, it'll

00:22:40.176 --> 00:22:41.746 A:middle
remove it from that list and

00:22:41.746 --> 00:22:42.746 A:middle
then the palette will hide.

00:22:44.236 --> 00:22:46.096 A:middle
And so, when the Canvas View

00:22:46.136 --> 00:22:47.746 A:middle
becomes first responder, we want

00:22:47.746 --> 00:22:48.536 A:middle
the palette to show.

00:22:48.786 --> 00:22:52.036 A:middle
So, we'll set visible to true.

00:22:52.206 --> 00:22:53.636 A:middle
Finally, we'll make the Canvas

00:22:53.636 --> 00:22:55.496 A:middle
View becomeFirstResponder so the

00:22:55.496 --> 00:22:56.976 A:middle
palette will show up.

00:22:57.876 --> 00:22:59.516 A:middle
You can see this in our sample

00:22:59.766 --> 00:22:59.866 A:middle
app.

00:23:00.046 --> 00:23:01.626 A:middle
Once we set the Canvas View to

00:23:01.626 --> 00:23:03.116 A:middle
becomeFirstResponder, the

00:23:03.166 --> 00:23:04.356 A:middle
palette will be visible.

00:23:05.666 --> 00:23:07.196 A:middle
However, in our sample app, we

00:23:07.196 --> 00:23:08.576 A:middle
also have a case with at

00:23:08.576 --> 00:23:10.306 A:middle
signature pane where we only

00:23:10.306 --> 00:23:12.806 A:middle
want to offer you blue or black

00:23:12.916 --> 00:23:13.226 A:middle
ink.

00:23:13.766 --> 00:23:15.036 A:middle
And we don't want the palette to

00:23:15.036 --> 00:23:15.606 A:middle
be shown.

00:23:16.436 --> 00:23:18.176 A:middle
And so, in order to handle that,

00:23:18.446 --> 00:23:19.656 A:middle
we actually make the canvas--

00:23:19.986 --> 00:23:21.506 A:middle
the signature's Canvas View

00:23:21.506 --> 00:23:23.786 A:middle
becomeFirstResponder, which will

00:23:23.786 --> 00:23:25.596 A:middle
then make the Tool Picker go

00:23:26.406 --> 00:23:26.546 A:middle
away.

00:23:28.416 --> 00:23:29.836 A:middle
When you dismiss that Signature

00:23:29.836 --> 00:23:31.136 A:middle
View Controller, underneath the

00:23:31.136 --> 00:23:32.756 A:middle
hood you'll automatically resign

00:23:32.756 --> 00:23:34.606 A:middle
first responder which will then

00:23:34.606 --> 00:23:36.006 A:middle
cause the tool palette to show

00:23:36.006 --> 00:23:37.246 A:middle
up again.

00:23:38.236 --> 00:23:39.696 A:middle
One of the other things you'll

00:23:39.696 --> 00:23:40.856 A:middle
want to keep in mind with this

00:23:40.856 --> 00:23:42.766 A:middle
responder-based visibility is

00:23:42.766 --> 00:23:43.856 A:middle
that you may already have

00:23:43.946 --> 00:23:45.546 A:middle
objects in your application that

00:23:45.626 --> 00:23:46.676 A:middle
take first responder.

00:23:47.166 --> 00:23:48.436 A:middle
Like, for example, for edit and

00:23:48.436 --> 00:23:49.136 A:middle
the new controllers.

00:23:49.136 --> 00:23:50.886 A:middle
And you'll basically want the

00:23:50.886 --> 00:23:52.826 A:middle
palette to show even when your

00:23:52.906 --> 00:23:53.756 A:middle
Edit menu is up.

00:23:54.526 --> 00:23:55.856 A:middle
To do this, you'll simply set

00:23:55.856 --> 00:23:57.966 A:middle
visible to true for your object

00:23:58.816 --> 00:23:59.766 A:middle
so that the palette stays

00:23:59.766 --> 00:24:00.256 A:middle
visible.

00:23:59.766 --> 00:24:00.256 A:middle
visible.

00:24:02.246 --> 00:24:03.516 A:middle
Another thing you'll want to

00:24:03.516 --> 00:24:05.816 A:middle
consider with the Tool Picker is

00:24:06.066 --> 00:24:08.086 A:middle
regular versus compact size

00:24:08.186 --> 00:24:08.766 A:middle
classes.

00:24:09.836 --> 00:24:10.766 A:middle
You'll notice in the regular

00:24:10.766 --> 00:24:13.246 A:middle
size class that it floats above

00:24:13.246 --> 00:24:14.556 A:middle
everything, you can move it

00:24:14.556 --> 00:24:15.226 A:middle
around.

00:24:16.136 --> 00:24:17.466 A:middle
However, in the compact size

00:24:17.546 --> 00:24:19.426 A:middle
class, it's actually fixed and

00:24:19.426 --> 00:24:20.456 A:middle
docked to the bottom.

00:24:21.226 --> 00:24:23.016 A:middle
And so, what does that mean in

00:24:23.016 --> 00:24:23.956 A:middle
your application?

00:24:25.476 --> 00:24:27.316 A:middle
Well, let's say you have a

00:24:27.316 --> 00:24:27.986 A:middle
full-size app.

00:24:28.696 --> 00:24:30.176 A:middle
The photo spans mostly edge to

00:24:30.176 --> 00:24:30.716 A:middle
edge.

00:24:31.206 --> 00:24:32.456 A:middle
And maybe it's obscuring some of

00:24:32.456 --> 00:24:33.686 A:middle
the photo in the regular size

00:24:33.766 --> 00:24:34.076 A:middle
class.

00:24:34.646 --> 00:24:36.036 A:middle
But you can just move the Tool

00:24:36.036 --> 00:24:37.286 A:middle
Picker out of the way, so it's

00:24:37.286 --> 00:24:37.736 A:middle
fine.

00:24:39.166 --> 00:24:40.826 A:middle
However, in the compact size

00:24:40.916 --> 00:24:43.926 A:middle
class, it actually obscures kind

00:24:43.926 --> 00:24:45.006 A:middle
of the most interesting part of

00:24:45.006 --> 00:24:45.736 A:middle
this photo.

00:24:46.686 --> 00:24:47.896 A:middle
And so, what you'll need to do

00:24:48.366 --> 00:24:49.726 A:middle
in the compact size class is to

00:24:49.726 --> 00:24:51.506 A:middle
make sure to adjust your view's

00:24:51.506 --> 00:24:53.446 A:middle
frame or your scroll view insets

00:24:54.016 --> 00:24:55.296 A:middle
to account for the obscured

00:24:55.296 --> 00:24:56.546 A:middle
frame from the Tool Picker.

00:24:58.196 --> 00:24:59.876 A:middle
You can do this by just

00:24:59.876 --> 00:25:01.176 A:middle
listening for the Tool Picker's

00:24:59.876 --> 00:25:01.176 A:middle
listening for the Tool Picker's

00:25:01.176 --> 00:25:02.936 A:middle
frame changes with the Observer

00:25:02.936 --> 00:25:05.516 A:middle
method toolPickerFramesObscured

00:25:05.626 --> 00:25:06.466 A:middle
DidChange.

00:25:06.846 --> 00:25:07.846 A:middle
You'll get this whenever you

00:25:07.846 --> 00:25:10.166 A:middle
move from floating to docked.

00:25:10.876 --> 00:25:12.256 A:middle
At that point, you can adjust

00:25:12.256 --> 00:25:13.636 A:middle
your content accordingly by

00:25:13.886 --> 00:25:15.806 A:middle
asking for the frame obscured in

00:25:15.856 --> 00:25:16.876 A:middle
your view.

00:25:19.446 --> 00:25:20.526 A:middle
Another thing you'll want to

00:25:20.526 --> 00:25:21.796 A:middle
consider with the Tool Picker

00:25:21.796 --> 00:25:23.976 A:middle
are your undo and redo buttons.

00:25:25.336 --> 00:25:27.066 A:middle
You'll notice how in the regular

00:25:27.066 --> 00:25:29.736 A:middle
size class that undo/redo

00:25:29.736 --> 00:25:31.116 A:middle
buttons are actually baked

00:25:31.116 --> 00:25:32.366 A:middle
inside of the palette and

00:25:32.366 --> 00:25:33.466 A:middle
provided for you.

00:25:34.186 --> 00:25:35.636 A:middle
However, in the compact size

00:25:35.636 --> 00:25:36.506 A:middle
class, they're not in the

00:25:36.506 --> 00:25:37.436 A:middle
palette at all.

00:25:37.436 --> 00:25:38.726 A:middle
So, you'll need to make sure in

00:25:38.726 --> 00:25:40.296 A:middle
the compact size classes that

00:25:40.296 --> 00:25:42.116 A:middle
you show your own undo and redo

00:25:42.116 --> 00:25:42.696 A:middle
buttons.

00:25:45.376 --> 00:25:46.986 A:middle
Now that we've walked through

00:25:46.986 --> 00:25:48.586 A:middle
how you can get a basic Canvas

00:25:48.586 --> 00:25:49.816 A:middle
View and Tool Picker on the

00:25:49.816 --> 00:25:52.156 A:middle
screen, let's walk through some

00:25:52.156 --> 00:25:53.866 A:middle
more of the advanced behaviors

00:25:54.016 --> 00:25:55.906 A:middle
that you can have in PencilKit,

00:25:56.486 --> 00:25:57.926 A:middle
starting with some of the Canvas

00:25:57.926 --> 00:25:58.696 A:middle
View delegates.

00:26:00.346 --> 00:26:01.486 A:middle
You might want to update your

00:26:01.666 --> 00:26:03.206 A:middle
app based on what the user is

00:26:03.206 --> 00:26:03.796 A:middle
drawing.

00:26:04.426 --> 00:26:05.756 A:middle
You can do so by listening to

00:26:05.756 --> 00:26:07.856 A:middle
the pencil or touch down, in

00:26:07.856 --> 00:26:08.846 A:middle
which case you'll get a

00:26:08.846 --> 00:26:11.366 A:middle
canvasViewDidBeginUsingTool

00:26:11.366 --> 00:26:11.736 A:middle
callback.

00:26:13.296 --> 00:26:15.086 A:middle
On pencil or touch up, you'll

00:26:15.086 --> 00:26:17.516 A:middle
get a canvasViewDidEndUsingTool

00:26:17.516 --> 00:26:17.886 A:middle
callback.

00:26:18.616 --> 00:26:20.096 A:middle
However, at this point, your

00:26:20.096 --> 00:26:22.246 A:middle
drawing is not yet fully updated

00:26:22.636 --> 00:26:23.956 A:middle
because as Will mentioned, it's

00:26:23.956 --> 00:26:25.406 A:middle
not until those final force

00:26:25.486 --> 00:26:27.716 A:middle
values come in, that you get a

00:26:27.716 --> 00:26:28.126 A:middle
final

00:26:28.256 --> 00:26:30.576 A:middle
canvasViewDrawingDidChange.

00:26:31.066 --> 00:26:32.216 A:middle
Only at this point, you're

00:26:32.216 --> 00:26:34.136 A:middle
guaranteed to have a final

00:26:34.136 --> 00:26:35.226 A:middle
finished drawing.

00:26:35.716 --> 00:26:36.876 A:middle
And so, at this point, you can

00:26:36.876 --> 00:26:37.946 A:middle
query the drawing from the

00:26:37.946 --> 00:26:40.336 A:middle
canvas and update your model

00:26:40.336 --> 00:26:42.156 A:middle
objects, generate thumbnails, or

00:26:42.156 --> 00:26:43.646 A:middle
save if necessary.

00:26:45.276 --> 00:26:47.046 A:middle
You might also want to load a

00:26:47.046 --> 00:26:49.006 A:middle
drawing into your Canvas View.

00:26:49.906 --> 00:26:51.516 A:middle
You can do so by calling set

00:26:51.516 --> 00:26:52.096 A:middle
drawing.

00:26:52.346 --> 00:26:53.936 A:middle
At that point, we'll start

00:26:54.016 --> 00:26:55.816 A:middle
loading in the tiles.

00:26:57.376 --> 00:26:58.816 A:middle
However, it's not until those

00:26:58.816 --> 00:27:00.556 A:middle
tiles are done loading that

00:26:58.816 --> 00:27:00.556 A:middle
tiles are done loading that

00:27:00.556 --> 00:27:01.066 A:middle
you'll get a

00:27:01.066 --> 00:27:03.086 A:middle
canvasViewDidFinishRendering

00:27:03.086 --> 00:27:03.466 A:middle
callback.

00:27:04.416 --> 00:27:06.696 A:middle
You'll also get this callback

00:27:07.016 --> 00:27:09.036 A:middle
after scrolling or zooming.

00:27:10.186 --> 00:27:12.666 A:middle
Speaking of scrolling, we not

00:27:12.666 --> 00:27:14.906 A:middle
only have let you draw with your

00:27:14.906 --> 00:27:16.846 A:middle
Pencil, but we also let you draw

00:27:16.846 --> 00:27:17.656 A:middle
with your finger.

00:27:18.266 --> 00:27:20.136 A:middle
And since PKCanvasView is a

00:27:20.196 --> 00:27:22.746 A:middle
scroll view, that means that one

00:27:22.746 --> 00:27:24.446 A:middle
finger actually lets you draw.

00:27:31.106 --> 00:27:33.046 A:middle
And two fingers scroll.

00:27:35.256 --> 00:27:36.796 A:middle
This is toggled via the

00:27:36.796 --> 00:27:38.846 A:middle
allowsFingerDrawing property on

00:27:38.846 --> 00:27:39.776 A:middle
the Canvas View.

00:27:40.676 --> 00:27:42.386 A:middle
When this is set to true, one

00:27:42.386 --> 00:27:44.376 A:middle
finger and pencil draw while two

00:27:44.376 --> 00:27:45.276 A:middle
fingers scroll.

00:27:45.706 --> 00:27:47.066 A:middle
Now, this is the default

00:27:47.066 --> 00:27:48.706 A:middle
behavior on the Canvas View.

00:27:48.706 --> 00:27:49.946 A:middle
And if this is not what you

00:27:49.946 --> 00:27:51.666 A:middle
want, you can actually set this

00:27:51.666 --> 00:27:52.736 A:middle
property to false.

00:27:53.326 --> 00:27:55.476 A:middle
In which case, only Pencil will

00:27:55.476 --> 00:27:58.206 A:middle
draw and one finger will scroll.

00:27:58.766 --> 00:27:59.996 A:middle
However, you should keep in mind

00:28:00.056 --> 00:28:01.816 A:middle
contexts like iPhone where

00:28:01.816 --> 00:28:03.196 A:middle
Pencil is not available.

00:28:05.156 --> 00:28:06.756 A:middle
If you have some more complex

00:28:06.756 --> 00:28:08.296 A:middle
interactions in your app, we've

00:28:08.296 --> 00:28:09.246 A:middle
also exposed the

00:28:09.246 --> 00:28:10.976 A:middle
drawingGestureRecognizer for

00:28:10.976 --> 00:28:11.306 A:middle
you.

00:28:11.916 --> 00:28:13.036 A:middle
With that, you can set up

00:28:13.356 --> 00:28:15.096 A:middle
gesture recognizer exclusions or

00:28:15.096 --> 00:28:16.506 A:middle
failure requirements.

00:28:17.416 --> 00:28:19.076 A:middle
There's a great talk from WWDC

00:28:19.076 --> 00:28:21.956 A:middle
2017 for ''Modern User

00:28:22.346 --> 00:28:24.966 A:middle
Interaction on iOS''.

00:28:26.516 --> 00:28:28.446 A:middle
As Will mentioned, we also use

00:28:28.446 --> 00:28:30.576 A:middle
PencilKit across all create

00:28:30.576 --> 00:28:32.726 A:middle
parts including screenshots and

00:28:32.726 --> 00:28:33.226 A:middle
markup.

00:28:33.746 --> 00:28:35.246 A:middle
And in these contexts, you can

00:28:35.246 --> 00:28:36.816 A:middle
draw over contents.

00:28:37.326 --> 00:28:38.606 A:middle
You can easily achieve this in

00:28:38.606 --> 00:28:40.596 A:middle
your app as well, by setting the

00:28:40.596 --> 00:28:43.276 A:middle
opaque flag to false and setting

00:28:43.276 --> 00:28:44.746 A:middle
the background color to clear.

00:28:47.636 --> 00:28:49.936 A:middle
In iOS 13, we also introduce

00:28:50.016 --> 00:28:51.916 A:middle
Dark Mode which is a fantastic

00:28:51.986 --> 00:28:53.956 A:middle
way to see your content in a

00:28:53.956 --> 00:28:55.376 A:middle
completely different way.

00:28:55.976 --> 00:28:57.686 A:middle
Your PencilKit canvases also

00:28:57.686 --> 00:28:59.636 A:middle
still look amazing as the colors

00:28:59.636 --> 00:29:02.286 A:middle
dynamically adjust to maintain

00:28:59.636 --> 00:29:02.286 A:middle
dynamically adjust to maintain

00:29:02.286 --> 00:29:03.046 A:middle
legibility.

00:29:03.046 --> 00:29:04.906 A:middle
You can see how I originally

00:29:04.906 --> 00:29:06.486 A:middle
wrote this note with black ink

00:29:06.486 --> 00:29:07.766 A:middle
over a white background.

00:29:08.236 --> 00:29:10.016 A:middle
But in Dark Mode, it changes to

00:29:10.106 --> 00:29:11.756 A:middle
mostly white ink over a black

00:29:11.836 --> 00:29:12.466 A:middle
background.

00:29:12.816 --> 00:29:14.586 A:middle
Not only do my notes still

00:29:14.586 --> 00:29:16.106 A:middle
maintain legibility, but they

00:29:16.106 --> 00:29:17.856 A:middle
also still look fantastic.

00:29:18.926 --> 00:29:21.546 A:middle
By default, your canvases will

00:29:21.546 --> 00:29:23.166 A:middle
also dynamically adjust their

00:29:23.166 --> 00:29:24.696 A:middle
colors if they're in Dark Mode.

00:29:25.966 --> 00:29:27.306 A:middle
However, if this is not what you

00:29:27.306 --> 00:29:30.296 A:middle
want, you can set the

00:29:30.296 --> 00:29:32.276 A:middle
overrideUserInterfaceStyle to

00:29:32.376 --> 00:29:33.406 A:middle
always be light.

00:29:34.196 --> 00:29:35.456 A:middle
You'll especially want to do

00:29:35.456 --> 00:29:37.286 A:middle
this if your content that you're

00:29:37.286 --> 00:29:38.926 A:middle
marking up doesn't change, like

00:29:38.926 --> 00:29:40.216 A:middle
if you're marking up over an

00:29:40.216 --> 00:29:44.516 A:middle
image or a PDF.

00:29:44.726 --> 00:29:45.676 A:middle
Now that we've walked through

00:29:45.676 --> 00:29:47.676 A:middle
PencilKit and shown you how you

00:29:47.676 --> 00:29:49.596 A:middle
can make an amazing drawing

00:29:49.596 --> 00:29:51.146 A:middle
experience in your application,

00:29:51.736 --> 00:29:53.276 A:middle
let's look at Markup Everywhere,

00:29:53.676 --> 00:29:55.286 A:middle
a new feature which allows your

00:29:55.286 --> 00:29:57.836 A:middle
application to pass any content

00:29:57.916 --> 00:29:58.756 A:middle
to be marked up.

00:29:59.636 --> 00:30:00.786 A:middle
This has surfaced through a new

00:29:59.636 --> 00:30:00.786 A:middle
This has surfaced through a new

00:30:00.786 --> 00:30:04.596 A:middle
API on Screenshots, where we let

00:30:04.596 --> 00:30:07.406 A:middle
you provide full content that

00:30:07.406 --> 00:30:08.766 A:middle
whenever you take a screenshot

00:30:08.766 --> 00:30:10.206 A:middle
over your app.

00:30:11.596 --> 00:30:13.236 A:middle
You can see this adopted in

00:30:13.236 --> 00:30:13.916 A:middle
Safari.

00:30:14.386 --> 00:30:16.196 A:middle
Here, I have apple.com.

00:30:16.776 --> 00:30:18.156 A:middle
I'm going to take a screenshot

00:30:18.156 --> 00:30:19.606 A:middle
by using the new pencil gesture

00:30:19.606 --> 00:30:20.956 A:middle
by pulling in from the corner.

00:30:20.956 --> 00:30:22.936 A:middle
And so, I have the screenshot I

00:30:22.936 --> 00:30:24.506 A:middle
know and love but I can't see

00:30:24.506 --> 00:30:25.616 A:middle
the rest of the page.

00:30:26.106 --> 00:30:27.406 A:middle
So, I'll tap that full-page

00:30:27.466 --> 00:30:29.656 A:middle
segment at the top and now I

00:30:29.656 --> 00:30:31.796 A:middle
have the full scrolling webpage

00:30:31.856 --> 00:30:33.866 A:middle
for me to markup and share.

00:30:34.016 --> 00:30:35.546 A:middle
[ Applause ]

00:30:35.546 --> 00:30:35.626 A:middle
Yeah.

00:30:36.516 --> 00:30:39.500 A:middle
[ Applause ]

00:30:41.316 --> 00:30:42.806 A:middle
You can also see this

00:30:43.526 --> 00:30:45.796 A:middle
implemented in our sample app.

00:30:45.796 --> 00:30:47.206 A:middle
Again, with the new Screenshot

00:30:47.416 --> 00:30:49.556 A:middle
gesture, I'll tap that full-page

00:30:49.556 --> 00:30:51.286 A:middle
segment and now I have the whole

00:30:51.286 --> 00:30:53.866 A:middle
note for me to send off.

00:30:56.256 --> 00:30:57.156 A:middle
You can also see this in

00:30:57.156 --> 00:30:58.886 A:middle
interesting use cases like maps.

00:31:00.216 --> 00:31:01.666 A:middle
Again, using the new Screenshot

00:31:01.666 --> 00:31:02.716 A:middle
gesture, I'm going to take a

00:31:02.816 --> 00:31:03.486 A:middle
screenshot.

00:31:03.976 --> 00:31:05.096 A:middle
But you can see my screenshot is

00:31:05.196 --> 00:31:06.406 A:middle
kind of covered up by the

00:31:06.406 --> 00:31:07.056 A:middle
chrome.

00:31:07.756 --> 00:31:09.606 A:middle
When I tap the full-page segment

00:31:09.606 --> 00:31:11.596 A:middle
at the top, I'll be able to see

00:31:11.596 --> 00:31:13.236 A:middle
my map without any of the chrome

00:31:13.236 --> 00:31:13.806 A:middle
in the way.

00:31:13.876 --> 00:31:14.926 A:middle
I can see the roads and

00:31:14.926 --> 00:31:16.276 A:middle
restaurants underneath.

00:31:18.316 --> 00:31:20.526 A:middle
You can easily adopt this in

00:31:20.526 --> 00:31:22.626 A:middle
your application with only a few

00:31:22.626 --> 00:31:23.526 A:middle
lines of code.

00:31:24.306 --> 00:31:25.616 A:middle
You'll start by setting yourself

00:31:25.616 --> 00:31:26.736 A:middle
as the delegate of the

00:31:26.736 --> 00:31:28.896 A:middle
UIScreenshotService on

00:31:28.896 --> 00:31:30.056 A:middle
UIWindowScene.

00:31:30.776 --> 00:31:32.556 A:middle
UIWindowScene is a new API to

00:31:32.676 --> 00:31:33.486 A:middle
UIKit this year.

00:31:33.486 --> 00:31:34.786 A:middle
And you can learn more by

00:31:34.786 --> 00:31:36.126 A:middle
referencing the ''Introducing

00:31:36.126 --> 00:31:37.976 A:middle
Multiple Windows on iPad'' talk.

00:31:39.346 --> 00:31:40.606 A:middle
Once you've set yourself as the

00:31:40.606 --> 00:31:41.796 A:middle
delegate, you'll deliver as the

00:31:41.796 --> 00:31:43.776 A:middle
full content, which is expressed

00:31:43.776 --> 00:31:44.406 A:middle
as PDF data.

00:31:45.836 --> 00:31:46.956 A:middle
You might already have this

00:31:46.956 --> 00:31:48.326 A:middle
information generated for

00:31:48.426 --> 00:31:49.816 A:middle
actions like sharing or

00:31:49.816 --> 00:31:50.446 A:middle
printing.

00:31:50.866 --> 00:31:52.086 A:middle
But in case you don't, there's a

00:31:52.086 --> 00:31:55.626 A:middle
great talk from WWDC 2017 from

00:31:55.626 --> 00:31:57.176 A:middle
''Introducing PDFKit on iOS''.

00:31:58.806 --> 00:32:00.486 A:middle
So, once you have that PDF data,

00:31:58.806 --> 00:32:00.486 A:middle
So, once you have that PDF data,

00:32:00.896 --> 00:32:01.926 A:middle
you'll implement the delegate

00:32:01.926 --> 00:32:03.496 A:middle
method screenshotService,

00:32:03.576 --> 00:32:05.256 A:middle
generatePDFRepresentation

00:32:05.256 --> 00:32:06.036 A:middle
WithCompletion.

00:32:06.036 --> 00:32:08.626 A:middle
You'll pass that PDF data to us

00:32:08.676 --> 00:32:10.446 A:middle
in the completion handler along

00:32:10.446 --> 00:32:11.626 A:middle
with two other pieces of

00:32:11.626 --> 00:32:12.336 A:middle
metadata.

00:32:13.056 --> 00:32:14.256 A:middle
Which will help us ensure that

00:32:14.256 --> 00:32:15.996 A:middle
when you go from screen to full

00:32:15.996 --> 00:32:17.826 A:middle
page, that we have a smooth

00:32:17.966 --> 00:32:18.936 A:middle
seamless transition.

00:32:21.166 --> 00:32:22.266 A:middle
The first piece of metadata is

00:32:22.266 --> 00:32:23.886 A:middle
the indexOfCurrentPage.

00:32:24.276 --> 00:32:25.966 A:middle
This is useful in cases like

00:32:26.096 --> 00:32:26.546 A:middle
Keynote.

00:32:27.016 --> 00:32:29.306 A:middle
Let's say I take a screenshot of

00:32:29.416 --> 00:32:30.226 A:middle
slide seven.

00:32:30.556 --> 00:32:32.156 A:middle
When I switch to the full-page

00:32:32.216 --> 00:32:33.516 A:middle
segment, it'll automatically

00:32:33.516 --> 00:32:35.506 A:middle
jump me to page seven.

00:32:37.636 --> 00:32:39.926 A:middle
The second piece of metadata is

00:32:39.956 --> 00:32:41.746 A:middle
the rectInCurrentPage.

00:32:42.246 --> 00:32:43.666 A:middle
This is useful in cases like

00:32:43.726 --> 00:32:44.386 A:middle
Safari.

00:32:44.846 --> 00:32:46.546 A:middle
Here, I have this long scrolling

00:32:46.546 --> 00:32:47.196 A:middle
page.

00:32:47.496 --> 00:32:48.896 A:middle
And I'm going to scroll to the

00:32:48.896 --> 00:32:50.096 A:middle
bottom because I'm really

00:32:50.376 --> 00:32:51.606 A:middle
feeling excited about the new

00:32:51.776 --> 00:32:52.586 A:middle
iPad Pro.

00:32:53.156 --> 00:32:54.246 A:middle
So, I'll take a screenshot at

00:32:54.246 --> 00:32:57.406 A:middle
the bottom there.

00:32:57.606 --> 00:32:59.566 A:middle
Now, when I tap the full-page

00:32:59.596 --> 00:33:01.646 A:middle
segment at the top, instead of

00:32:59.596 --> 00:33:01.646 A:middle
segment at the top, instead of

00:33:01.886 --> 00:33:03.606 A:middle
awkwardly jumping me to the top,

00:33:03.916 --> 00:33:04.906 A:middle
it'll actually take me to the

00:33:04.906 --> 00:33:06.906 A:middle
same page-- same RECT that I

00:33:06.906 --> 00:33:08.766 A:middle
took the screenshot in.

00:33:09.936 --> 00:33:11.486 A:middle
The one important thing to note

00:33:11.486 --> 00:33:13.236 A:middle
about this RECT is that we

00:33:13.236 --> 00:33:15.016 A:middle
expect it in PDF coordinates.

00:33:15.776 --> 00:33:17.066 A:middle
And so, what does this mean?

00:33:17.816 --> 00:33:19.196 A:middle
In View Coordinates the origin

00:33:19.196 --> 00:33:20.706 A:middle
is actually the top left.

00:33:21.636 --> 00:33:23.326 A:middle
However, in PDF coordinates,

00:33:23.376 --> 00:33:24.526 A:middle
it's actually in the bottom

00:33:24.666 --> 00:33:24.836 A:middle
left.

00:33:25.286 --> 00:33:26.456 A:middle
So, you'll need to make sure to

00:33:26.456 --> 00:33:27.816 A:middle
do the appropriate coordinate

00:33:27.816 --> 00:33:29.586 A:middle
transformations and send us that

00:33:29.586 --> 00:33:30.526 A:middle
RECT in the appropriate

00:33:30.526 --> 00:33:31.466 A:middle
coordinates space.

00:33:34.316 --> 00:33:36.606 A:middle
And so, we've shown you how with

00:33:36.606 --> 00:33:38.196 A:middle
existing Pencil APIs, you can

00:33:38.676 --> 00:33:41.496 A:middle
build your own powerful custom

00:33:41.496 --> 00:33:42.506 A:middle
drawing engine.

00:33:42.996 --> 00:33:44.716 A:middle
But it will require a little bit

00:33:44.716 --> 00:33:45.646 A:middle
of elbow grease.

00:33:45.926 --> 00:33:46.846 A:middle
You'll need to listen to

00:33:46.996 --> 00:33:48.846 A:middle
estimated touches, delayed

00:33:48.996 --> 00:33:51.016 A:middle
force, all while rendering

00:33:51.056 --> 00:33:53.296 A:middle
quickly and asynchronously.

00:33:54.266 --> 00:33:56.616 A:middle
But now, with the new PencilKit

00:33:56.616 --> 00:33:59.106 A:middle
APIs, we've made it super easy

00:33:59.106 --> 00:34:00.286 A:middle
for you to integrate drawing

00:33:59.106 --> 00:34:00.286 A:middle
for you to integrate drawing

00:34:00.286 --> 00:34:01.286 A:middle
into your application.

00:34:01.286 --> 00:34:02.766 A:middle
And you'll get the same

00:34:02.816 --> 00:34:04.776 A:middle
expressive low-latency

00:34:04.776 --> 00:34:06.106 A:middle
experience that we have across

00:34:06.106 --> 00:34:07.056 A:middle
all of iOS.

00:34:08.716 --> 00:34:10.795 A:middle
Finally, you can also adopt

00:34:10.795 --> 00:34:13.036 A:middle
other great Pencil APIs in UIKit

00:34:13.585 --> 00:34:15.156 A:middle
such as UIPencil interaction to

00:34:15.156 --> 00:34:16.485 A:middle
handle double-taps on the new

00:34:16.485 --> 00:34:17.356 A:middle
Apple Pencil.

00:34:17.886 --> 00:34:19.735 A:middle
Or the new UIScreenshotService

00:34:19.735 --> 00:34:21.606 A:middle
API so that you can deliver full

00:34:21.606 --> 00:34:22.856 A:middle
content to be marked up

00:34:22.856 --> 00:34:23.466 A:middle
everywhere.

00:34:24.926 --> 00:34:26.136 A:middle
For more information, you can

00:34:26.136 --> 00:34:27.545 A:middle
reference the URL at this

00:34:27.616 --> 00:34:27.966 A:middle
session.

00:34:29.386 --> 00:34:30.716 A:middle
Now, go off and build some

00:34:30.716 --> 00:34:32.636 A:middle
amazing great Pencil

00:34:32.636 --> 00:34:33.406 A:middle
applications.

00:34:33.696 --> 00:34:34.886 A:middle
And we hope you have a great

00:34:34.886 --> 00:34:36.676 A:middle
WWDC 2019.

00:34:37.516 --> 00:34:44.505 A:middle
[ Applause ]
