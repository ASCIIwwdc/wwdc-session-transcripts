WEBVTT

00:00:07.516 --> 00:00:15.500 A:middle
[ Music ]

00:00:28.016 --> 00:00:29.116 A:middle
[ Applause ]

00:00:29.116 --> 00:00:31.336 A:middle
&gt;&gt; Hello and welcome to advanced

00:00:31.336 --> 00:00:33.336 A:middle
debugging with Xcode and LLDB.

00:00:33.916 --> 00:00:34.986 A:middle
I'm Chris Miles, one of the

00:00:34.986 --> 00:00:36.266 A:middle
engineering managers on the

00:00:36.266 --> 00:00:37.336 A:middle
Xcode team, and I'm really

00:00:37.336 --> 00:00:38.436 A:middle
excited to be here today.

00:00:38.856 --> 00:00:39.876 A:middle
Now, I'm well aware there's

00:00:39.876 --> 00:00:41.336 A:middle
nothing between you and Beer

00:00:41.336 --> 00:00:42.996 A:middle
Bash but our session, so thanks

00:00:42.996 --> 00:00:43.476 A:middle
for coming.

00:00:43.646 --> 00:00:44.936 A:middle
We'll get you out on time, but

00:00:44.936 --> 00:00:46.066 A:middle
we've packed in lots of great

00:00:46.066 --> 00:00:47.236 A:middle
content for you guys today.

00:00:47.626 --> 00:00:49.366 A:middle
So let's get straight into it.

00:00:49.506 --> 00:00:50.846 A:middle
I'd like to start by talking

00:00:50.846 --> 00:00:52.176 A:middle
about Swift debugging

00:00:52.176 --> 00:00:52.846 A:middle
reliability.

00:00:53.316 --> 00:00:54.596 A:middle
The main point to make here is

00:00:54.596 --> 00:00:55.746 A:middle
that there's good news.

00:00:56.026 --> 00:00:57.426 A:middle
The team has landed a lot of

00:00:57.426 --> 00:01:00.016 A:middle
reliability fixes in Xcode 10.

00:00:57.426 --> 00:01:00.016 A:middle
reliability fixes in Xcode 10.

00:01:00.996 --> 00:01:02.626 A:middle
The -- thank you.

00:01:04.516 --> 00:01:08.066 A:middle
[ Applause ]

00:01:08.566 --> 00:01:09.936 A:middle
The compiler and debugger teams

00:01:09.936 --> 00:01:11.146 A:middle
have been able to smooth over

00:01:11.146 --> 00:01:12.666 A:middle
many of the rough edges that

00:01:12.666 --> 00:01:14.056 A:middle
were causing Swift debugging

00:01:14.056 --> 00:01:14.496 A:middle
headaches.

00:01:14.726 --> 00:01:15.756 A:middle
I'd like to tell you about a

00:01:15.756 --> 00:01:17.096 A:middle
couple of them.

00:01:17.566 --> 00:01:19.266 A:middle
In some cases, usually with more

00:01:19.266 --> 00:01:20.506 A:middle
complex projects or build

00:01:20.506 --> 00:01:22.466 A:middle
configurations, attempts to po

00:01:22.466 --> 00:01:23.566 A:middle
an object or evaluate an

00:01:23.566 --> 00:01:25.236 A:middle
expression in the console may

00:01:25.646 --> 00:01:27.466 A:middle
have failed with an error such

00:01:27.466 --> 00:01:27.986 A:middle
as this.

00:01:28.186 --> 00:01:30.306 A:middle
The AST context that this error

00:01:30.306 --> 00:01:32.266 A:middle
refers to is an expression

00:01:32.266 --> 00:01:34.196 A:middle
context that LLDB needs to

00:01:34.196 --> 00:01:35.456 A:middle
reconstruct the state of the

00:01:35.456 --> 00:01:36.716 A:middle
compiler from when it built your

00:01:36.716 --> 00:01:37.216 A:middle
project.

00:01:37.656 --> 00:01:39.086 A:middle
And, in some cases, such as if

00:01:39.086 --> 00:01:40.686 A:middle
there are module conflicts, the

00:01:40.906 --> 00:01:42.446 A:middle
expression context cannot be

00:01:42.446 --> 00:01:44.196 A:middle
reliably reconstructed, and your

00:01:44.196 --> 00:01:45.316 A:middle
expression would fail.

00:01:46.386 --> 00:01:47.956 A:middle
In Xcode 10, LLDB have

00:01:47.956 --> 00:01:49.486 A:middle
implemented a fallback mechanism

00:01:49.486 --> 00:01:50.576 A:middle
for when this problem case

00:01:50.576 --> 00:01:51.086 A:middle
occurs.

00:01:51.366 --> 00:01:52.836 A:middle
So if it can't reconstruct the

00:01:52.836 --> 00:01:54.496 A:middle
context, it will fall back to

00:01:54.496 --> 00:01:56.476 A:middle
creating a simpler context for

00:01:56.476 --> 00:01:58.146 A:middle
the current frame and use that

00:01:58.146 --> 00:01:59.406 A:middle
to evaluate your expression.

00:02:00.636 --> 00:02:02.216 A:middle
Another failure case that some

00:02:02.216 --> 00:02:03.766 A:middle
developers may have had was due

00:02:03.766 --> 00:02:05.286 A:middle
to the debugger being unable to

00:02:05.286 --> 00:02:07.406 A:middle
materialize variable types while

00:02:07.406 --> 00:02:07.826 A:middle
debugging.

00:02:08.806 --> 00:02:09.946 A:middle
This would manifest itself in

00:02:09.946 --> 00:02:11.216 A:middle
Xcode looking something like

00:02:11.266 --> 00:02:11.626 A:middle
this.

00:02:11.986 --> 00:02:12.866 A:middle
Where on the left, you can see

00:02:12.866 --> 00:02:14.486 A:middle
the variables' view shows all

00:02:14.486 --> 00:02:15.586 A:middle
the names of the variables in

00:02:15.586 --> 00:02:17.216 A:middle
the frame but there'd be no type

00:02:17.216 --> 00:02:18.626 A:middle
information or values visible.

00:02:18.966 --> 00:02:19.966 A:middle
And attempts to print out the

00:02:19.966 --> 00:02:22.086 A:middle
value of a variable would fail

00:02:22.086 --> 00:02:23.116 A:middle
with errors like these.

00:02:23.596 --> 00:02:26.216 A:middle
Now, thanks again, in big part

00:02:26.216 --> 00:02:27.386 A:middle
to your bug reports, the team

00:02:27.386 --> 00:02:28.806 A:middle
has been able to track down and

00:02:28.806 --> 00:02:30.706 A:middle
fix these many edge cases where

00:02:30.706 --> 00:02:32.386 A:middle
debug information was not being

00:02:32.386 --> 00:02:33.366 A:middle
reliably generated.

00:02:33.826 --> 00:02:34.916 A:middle
So I want to thank you guys on

00:02:34.916 --> 00:02:36.326 A:middle
behalf of the team again for

00:02:36.326 --> 00:02:38.076 A:middle
filing issues when you've

00:02:38.226 --> 00:02:40.246 A:middle
encountered any problems while

00:02:40.246 --> 00:02:40.716 A:middle
debugging.

00:02:41.206 --> 00:02:42.366 A:middle
And if you find any more

00:02:42.366 --> 00:02:44.226 A:middle
problems with Xcode 10 while

00:02:44.226 --> 00:02:45.696 A:middle
debugging a project, please

00:02:45.696 --> 00:02:47.136 A:middle
continue to file bug reports for

00:02:47.136 --> 00:02:47.376 A:middle
us.

00:02:47.376 --> 00:02:48.376 A:middle
For those of you at the

00:02:48.376 --> 00:02:49.696 A:middle
conference, if you find a

00:02:49.696 --> 00:02:50.536 A:middle
problem with your project,

00:02:50.616 --> 00:02:51.776 A:middle
please come along to the labs.

00:02:51.876 --> 00:02:54.236 A:middle
We have an Xcode debugging and

00:02:54.236 --> 00:02:55.796 A:middle
profiling lab tomorrow morning

00:02:55.796 --> 00:02:56.656 A:middle
from nine till 12.

00:02:57.156 --> 00:02:58.266 A:middle
Bring your project and ask for

00:02:58.266 --> 00:02:59.816 A:middle
an Xcode debugger engineer or an

00:02:59.816 --> 00:03:01.106 A:middle
LLDB engineer, as they would

00:02:59.816 --> 00:03:01.106 A:middle
LLDB engineer, as they would

00:03:01.106 --> 00:03:02.336 A:middle
love to see your projects.

00:03:02.866 --> 00:03:06.596 A:middle
Now I'd like to move on to

00:03:06.596 --> 00:03:08.256 A:middle
telling you about some of my

00:03:08.366 --> 00:03:09.736 A:middle
favorite debugging tips and

00:03:09.736 --> 00:03:11.476 A:middle
tricks that I like to use to

00:03:11.476 --> 00:03:12.856 A:middle
enhance my debugging webflow.

00:03:13.456 --> 00:03:14.346 A:middle
In fact, I'm not just going to

00:03:14.346 --> 00:03:15.626 A:middle
tell you about it, I'd like to

00:03:15.626 --> 00:03:18.626 A:middle
show you with a demo.

00:03:19.508 --> 00:03:21.508 A:middle
[ Applause ]

00:03:26.116 --> 00:03:27.656 A:middle
Now the project we'll be using

00:03:27.656 --> 00:03:29.396 A:middle
today is an iOS app called Solar

00:03:29.396 --> 00:03:29.816 A:middle
System.

00:03:30.006 --> 00:03:31.046 A:middle
And you may have seen Solar

00:03:31.046 --> 00:03:33.136 A:middle
System appear in such keynotes

00:03:33.136 --> 00:03:34.746 A:middle
as the Keynote and State of the

00:03:34.746 --> 00:03:35.176 A:middle
Union.

00:03:35.246 --> 00:03:36.916 A:middle
We're going to be debugging an

00:03:36.916 --> 00:03:38.696 A:middle
area of the Solar System called

00:03:38.696 --> 00:03:39.356 A:middle
Moon Jumper.

00:03:40.426 --> 00:03:41.526 A:middle
Moon Jumper allows the user to

00:03:41.526 --> 00:03:42.916 A:middle
hold a phone in the hand and

00:03:42.916 --> 00:03:43.646 A:middle
jump in the air.

00:03:44.456 --> 00:03:45.686 A:middle
The app measures the force of

00:03:45.686 --> 00:03:46.986 A:middle
your jump and then translates

00:03:46.986 --> 00:03:49.006 A:middle
that to moon gravity and shows

00:03:49.006 --> 00:03:50.276 A:middle
you a visual representation of

00:03:50.276 --> 00:03:51.266 A:middle
how high you would have jumped

00:03:51.296 --> 00:03:52.246 A:middle
if you were standing on the

00:03:52.246 --> 00:03:52.546 A:middle
moon.

00:03:53.466 --> 00:03:55.306 A:middle
You can set a bar to choose a

00:03:55.306 --> 00:03:56.796 A:middle
limit, so you can try and

00:03:56.796 --> 00:03:58.046 A:middle
challenge yourself to jump as

00:03:58.046 --> 00:03:59.336 A:middle
high as the bar, in terms of

00:03:59.336 --> 00:03:59.916 A:middle
moon gravity.

00:04:01.076 --> 00:04:02.986 A:middle
Now in making some enhancements

00:04:02.986 --> 00:04:05.046 A:middle
to Moon Jumper, such as some

00:04:05.046 --> 00:04:06.886 A:middle
visual enhancements and a

00:04:06.886 --> 00:04:08.816 A:middle
GamePlay mode, while we're not

00:04:08.816 --> 00:04:10.866 A:middle
ready to ship, we've done a test

00:04:10.926 --> 00:04:12.156 A:middle
pass and come up with a list of

00:04:12.226 --> 00:04:14.506 A:middle
bugs that we need to look at.

00:04:14.756 --> 00:04:15.886 A:middle
So these are the bugs for Solar

00:04:15.886 --> 00:04:16.286 A:middle
System.

00:04:16.495 --> 00:04:18.026 A:middle
I'll be tackling the iOS bugs

00:04:18.026 --> 00:04:19.516 A:middle
first, and later on, Sebastian

00:04:19.516 --> 00:04:21.076 A:middle
will come out and solve the

00:04:21.076 --> 00:04:22.256 A:middle
macOS bugs.

00:04:22.716 --> 00:04:24.146 A:middle
Now, as it says, none of us are

00:04:24.146 --> 00:04:25.476 A:middle
getting out of here to the Beer

00:04:25.476 --> 00:04:26.876 A:middle
Bash until we fix all of these

00:04:26.876 --> 00:04:28.706 A:middle
bugs, so there's nothing more

00:04:28.706 --> 00:04:29.656 A:middle
exhilarating than peer

00:04:29.656 --> 00:04:31.236 A:middle
programming with 2000 people.

00:04:31.746 --> 00:04:34.066 A:middle
Let's get straight into it and

00:04:34.066 --> 00:04:35.486 A:middle
start with the first bug.

00:04:35.776 --> 00:04:37.036 A:middle
The jump failure animation does

00:04:37.036 --> 00:04:38.226 A:middle
not match the specification.

00:04:38.986 --> 00:04:39.936 A:middle
So what's that talking about?

00:04:40.716 --> 00:04:41.936 A:middle
Well, switching to the simulator

00:04:42.186 --> 00:04:42.836 A:middle
because we're using the

00:04:42.836 --> 00:04:44.486 A:middle
simulator to speed up debugging

00:04:44.486 --> 00:04:45.596 A:middle
and development.

00:04:45.866 --> 00:04:46.996 A:middle
I've wired up a tap just to

00:04:46.996 --> 00:04:48.466 A:middle
recognize them, so every time I

00:04:48.466 --> 00:04:49.776 A:middle
tap the astronaut he performs a

00:04:49.776 --> 00:04:51.156 A:middle
successful jump to the height of

00:04:51.196 --> 00:04:51.856 A:middle
the bar.

00:04:52.436 --> 00:04:53.886 A:middle
Now this bug is talking about

00:04:53.886 --> 00:04:54.936 A:middle
the case where the astronaut

00:04:54.986 --> 00:04:55.866 A:middle
doesn't reach the height of the

00:04:55.866 --> 00:04:57.096 A:middle
bar, so let's reproduce that.

00:04:57.856 --> 00:04:59.086 A:middle
Switching to the editor, I'm

00:04:59.376 --> 00:05:00.656 A:middle
going to use the jump bar to

00:04:59.376 --> 00:05:00.656 A:middle
going to use the jump bar to

00:05:00.656 --> 00:05:02.296 A:middle
navigate to the jump function

00:05:02.706 --> 00:05:03.986 A:middle
and set a breakpoint at the

00:05:03.986 --> 00:05:04.816 A:middle
start of that function.

00:05:05.526 --> 00:05:06.786 A:middle
Now I'll tap the astronaut, and

00:05:07.076 --> 00:05:08.576 A:middle
we'll start a jump and now we

00:05:08.576 --> 00:05:09.646 A:middle
are paused in the debugger.

00:05:10.536 --> 00:05:11.876 A:middle
The first thing to point out is

00:05:11.876 --> 00:05:13.136 A:middle
actually up here in the tab bar.

00:05:13.686 --> 00:05:14.876 A:middle
We now have four tabs.

00:05:14.876 --> 00:05:16.226 A:middle
This debug tab was just created

00:05:16.226 --> 00:05:18.096 A:middle
for us by Xcode, and for those

00:05:18.096 --> 00:05:19.426 A:middle
of you that like working in tabs

00:05:19.426 --> 00:05:21.236 A:middle
like I do, this is an Xcode

00:05:21.236 --> 00:05:22.416 A:middle
behavior that you can define.

00:05:23.516 --> 00:05:26.506 A:middle
[ Applause ]

00:05:27.006 --> 00:05:28.666 A:middle
So to do that you use the Xcode

00:05:28.666 --> 00:05:30.356 A:middle
menu to edit behaviors and that

00:05:30.356 --> 00:05:32.246 A:middle
takes you to the preferences in

00:05:32.246 --> 00:05:33.216 A:middle
the behavior's tab.

00:05:33.216 --> 00:05:34.796 A:middle
And here you can configure many

00:05:34.796 --> 00:05:35.316 A:middle
behaviors.

00:05:35.686 --> 00:05:36.976 A:middle
In this case, you would need to

00:05:36.976 --> 00:05:38.966 A:middle
configure the pause's behavior

00:05:39.306 --> 00:05:40.356 A:middle
in the running section.

00:05:40.746 --> 00:05:41.866 A:middle
And this is the behavior that

00:05:41.866 --> 00:05:44.666 A:middle
will be actioned when Xcode

00:05:44.666 --> 00:05:45.526 A:middle
pauses in the debugger.

00:05:45.636 --> 00:05:46.506 A:middle
So you can see here I've

00:05:46.506 --> 00:05:47.666 A:middle
configured it to show a tab

00:05:47.736 --> 00:05:49.366 A:middle
named debug, and Xcode will

00:05:49.456 --> 00:05:50.726 A:middle
always switch to that the tab

00:05:50.726 --> 00:05:51.826 A:middle
when pausing in the debugger.

00:05:52.236 --> 00:05:53.486 A:middle
So that's great for users who

00:05:53.486 --> 00:05:54.916 A:middle
like to work in tabs like I do.

00:05:55.696 --> 00:05:56.726 A:middle
Now switching back to the code,

00:05:56.726 --> 00:05:57.446 A:middle
we can see that there's a

00:05:57.446 --> 00:05:58.876 A:middle
condition based on this property

00:05:59.126 --> 00:06:00.816 A:middle
did reach selected height, so

00:05:59.126 --> 00:06:00.816 A:middle
did reach selected height, so

00:06:00.816 --> 00:06:02.306 A:middle
I'd like to have a look at the

00:06:02.306 --> 00:06:03.206 A:middle
value of this property.

00:06:03.596 --> 00:06:04.916 A:middle
So switching to the debug

00:06:04.916 --> 00:06:07.436 A:middle
console, I can use po to look at

00:06:07.436 --> 00:06:09.326 A:middle
the value of that property and

00:06:09.396 --> 00:06:13.746 A:middle
it's currently set to true.

00:06:13.746 --> 00:06:15.176 A:middle
So the [inaudible] always sets

00:06:15.226 --> 00:06:16.386 A:middle
this to true, and I'd like to

00:06:16.386 --> 00:06:17.336 A:middle
change it to false so we can

00:06:17.336 --> 00:06:18.146 A:middle
reproduce the bug.

00:06:18.146 --> 00:06:20.126 A:middle
Now I could go to the code and

00:06:20.126 --> 00:06:21.896 A:middle
modify it, tap just to recognize

00:06:21.896 --> 00:06:23.316 A:middle
it to set it to false, but I

00:06:23.316 --> 00:06:24.876 A:middle
don't like to make changes to my

00:06:24.876 --> 00:06:26.626 A:middle
code just for debugging purposes

00:06:26.736 --> 00:06:27.596 A:middle
if I can avoid it.

00:06:28.096 --> 00:06:29.846 A:middle
So in this case, what I can do

00:06:29.846 --> 00:06:31.126 A:middle
is use the debugger to do it for

00:06:31.126 --> 00:06:31.306 A:middle
me.

00:06:31.716 --> 00:06:32.666 A:middle
I can use the expression

00:06:32.666 --> 00:06:33.076 A:middle
command.

00:06:33.436 --> 00:06:35.756 A:middle
And here I can give it any Swift

00:06:35.756 --> 00:06:38.066 A:middle
expression, such as did reach

00:06:38.066 --> 00:06:39.476 A:middle
selected height equals false,

00:06:39.926 --> 00:06:41.826 A:middle
and it will evaluate that and

00:06:41.826 --> 00:06:42.386 A:middle
execute it.

00:06:42.516 --> 00:06:43.906 A:middle
So now, we can see that this

00:06:44.036 --> 00:06:45.496 A:middle
property has indeed changed to

00:06:45.496 --> 00:06:45.926 A:middle
false.

00:06:46.486 --> 00:06:48.096 A:middle
And if I step over the line

00:06:48.096 --> 00:06:49.286 A:middle
using the debugger, we can see

00:06:49.386 --> 00:06:50.286 A:middle
that we've entered the false

00:06:50.286 --> 00:06:51.116 A:middle
side of the branch.

00:06:51.686 --> 00:06:52.946 A:middle
So now, when we continue, we can

00:06:52.946 --> 00:06:54.496 A:middle
see that the astronaut doesn't

00:06:54.496 --> 00:06:55.396 A:middle
quite reach the height of the

00:06:55.396 --> 00:06:56.736 A:middle
bar and falls down.

00:06:57.256 --> 00:06:58.136 A:middle
So that's the case we're trying

00:06:58.136 --> 00:06:58.796 A:middle
to reproduce.

00:06:59.236 --> 00:07:00.626 A:middle
I'd like this to happen every

00:06:59.236 --> 00:07:00.626 A:middle
I'd like this to happen every

00:07:00.626 --> 00:07:02.176 A:middle
time I tap on the astronaut, and

00:07:02.176 --> 00:07:03.696 A:middle
I don't want to have to pause

00:07:03.696 --> 00:07:04.916 A:middle
and type this expression each

00:07:04.916 --> 00:07:06.336 A:middle
time, so what I'm going to do is

00:07:06.336 --> 00:07:08.046 A:middle
configure this breakpoint to do

00:07:08.046 --> 00:07:08.596 A:middle
that for me.

00:07:09.336 --> 00:07:10.156 A:middle
If I right click on the

00:07:10.156 --> 00:07:12.216 A:middle
breakpoint, I can select edit

00:07:12.216 --> 00:07:13.676 A:middle
breakpoint and this gives me a

00:07:13.676 --> 00:07:15.616 A:middle
popover window with some

00:07:15.616 --> 00:07:17.346 A:middle
configuration to customize how

00:07:17.346 --> 00:07:18.486 A:middle
the breakpoint behaves.

00:07:18.486 --> 00:07:20.186 A:middle
I'm going to select the debugger

00:07:20.186 --> 00:07:22.686 A:middle
command action and enter the

00:07:22.686 --> 00:07:24.366 A:middle
expression command with the

00:07:24.366 --> 00:07:26.226 A:middle
command that I used in the debug

00:07:26.226 --> 00:07:28.696 A:middle
console and make this an

00:07:28.696 --> 00:07:30.016 A:middle
auto-continuing breakpoint.

00:07:30.326 --> 00:07:31.596 A:middle
So what we've configured here is

00:07:31.596 --> 00:07:33.066 A:middle
a breakpoint that once execution

00:07:33.236 --> 00:07:34.136 A:middle
enters this function, the

00:07:34.136 --> 00:07:35.956 A:middle
breakpoint will trigger execute

00:07:35.996 --> 00:07:37.216 A:middle
this command for us to change

00:07:37.216 --> 00:07:38.156 A:middle
the value of the property and

00:07:38.156 --> 00:07:39.306 A:middle
then automatically continue.

00:07:40.006 --> 00:07:40.986 A:middle
So now, every time I tap the

00:07:40.986 --> 00:07:42.556 A:middle
astronaut, he'll perform this

00:07:42.626 --> 00:07:44.226 A:middle
unsuccessful jump and fall back

00:07:44.276 --> 00:07:44.506 A:middle
down.

00:07:45.206 --> 00:07:46.146 A:middle
Now what's the problem that we

00:07:46.146 --> 00:07:47.136 A:middle
need to fix?

00:07:47.476 --> 00:07:48.576 A:middle
The specification said that

00:07:48.576 --> 00:07:49.446 A:middle
after falling down, the

00:07:49.446 --> 00:07:50.806 A:middle
astronaut should stand back up

00:07:50.806 --> 00:07:52.486 A:middle
again, so let's fix that now.

00:07:53.196 --> 00:07:55.486 A:middle
I'm going to navigate to this

00:07:55.486 --> 00:07:56.976 A:middle
function update UI for jump

00:07:56.976 --> 00:07:58.576 A:middle
failed, and we can see this

00:07:58.576 --> 00:08:00.256 A:middle
function uses UIKit Dynamics to

00:07:58.576 --> 00:08:00.256 A:middle
function uses UIKit Dynamics to

00:08:00.256 --> 00:08:02.216 A:middle
simulate failing the jump.

00:08:02.216 --> 00:08:04.916 A:middle
So it starts by creating a UI

00:08:04.956 --> 00:08:06.756 A:middle
Dynamic animator and then calls

00:08:06.756 --> 00:08:07.976 A:middle
a function to add behaviors to

00:08:07.976 --> 00:08:09.056 A:middle
create the physics effects.

00:08:09.516 --> 00:08:10.766 A:middle
And then the astronaut is meant

00:08:10.766 --> 00:08:12.756 A:middle
to be reoriented and recentered

00:08:13.036 --> 00:08:14.866 A:middle
in the dynamic animator did

00:08:15.106 --> 00:08:17.016 A:middle
pause delegate callback.

00:08:17.386 --> 00:08:18.546 A:middle
Now we can scroll down and see

00:08:18.546 --> 00:08:20.016 A:middle
that that delegate callback is

00:08:20.016 --> 00:08:21.686 A:middle
implemented successfully, so

00:08:21.686 --> 00:08:22.336 A:middle
that looks fine.

00:08:22.996 --> 00:08:23.856 A:middle
But I'm noticing that no

00:08:23.856 --> 00:08:25.516 A:middle
delegate is set on this object,

00:08:26.416 --> 00:08:28.956 A:middle
so if I add that code in here, I

00:08:28.956 --> 00:08:30.016 A:middle
think this is the change I'll

00:08:30.016 --> 00:08:31.016 A:middle
need to fix the problem.

00:08:31.336 --> 00:08:32.676 A:middle
Now, at this point, I can

00:08:32.976 --> 00:08:34.806 A:middle
recompile and rerun and try and

00:08:34.806 --> 00:08:36.866 A:middle
verify my fix, but I'd like to

00:08:36.866 --> 00:08:38.275 A:middle
shortcut that whole cycle if I

00:08:38.275 --> 00:08:38.556 A:middle
can.

00:08:38.765 --> 00:08:40.476 A:middle
So what I'm going to do is use a

00:08:40.476 --> 00:08:41.986 A:middle
breakpoint to inject this change

00:08:41.986 --> 00:08:43.806 A:middle
for me so I can see if this does

00:08:43.806 --> 00:08:45.486 A:middle
fix the problem quickly and

00:08:45.486 --> 00:08:46.066 A:middle
conveniently.

00:08:46.586 --> 00:08:47.556 A:middle
So I'll create a break point,

00:08:47.916 --> 00:08:49.956 A:middle
double click to bring up the

00:08:49.956 --> 00:08:51.836 A:middle
edit window, which is a shortcut

00:08:51.836 --> 00:08:52.976 A:middle
for bringing up the edit window.

00:08:52.976 --> 00:08:54.636 A:middle
And then, once again, use a

00:08:54.636 --> 00:08:55.846 A:middle
debugger command action to

00:08:55.846 --> 00:08:57.576 A:middle
inject an expression, and I can

00:08:57.576 --> 00:08:59.696 A:middle
type in that line of code that I

00:08:59.696 --> 00:09:01.396 A:middle
think will fix the problem and

00:08:59.696 --> 00:09:01.396 A:middle
think will fix the problem and

00:09:01.396 --> 00:09:01.836 A:middle
make this an [inaudible]

00:09:01.836 --> 00:09:02.986 A:middle
continuing breakpoint.

00:09:03.506 --> 00:09:04.406 A:middle
So what I've configured here,

00:09:04.406 --> 00:09:05.356 A:middle
even though I've made the change

00:09:05.356 --> 00:09:06.096 A:middle
in the code, I haven't

00:09:06.096 --> 00:09:07.046 A:middle
recompiled, of course.

00:09:07.216 --> 00:09:09.036 A:middle
So I'm using the custom

00:09:09.036 --> 00:09:10.536 A:middle
breakpoint to inject that change

00:09:10.536 --> 00:09:12.376 A:middle
for me so I can test it using

00:09:12.376 --> 00:09:13.916 A:middle
the current live application.

00:09:14.336 --> 00:09:15.586 A:middle
So now, if I tap the astronaut,

00:09:15.656 --> 00:09:17.076 A:middle
he performs this unsuccessful

00:09:17.076 --> 00:09:18.626 A:middle
jump and falls over and stands

00:09:18.626 --> 00:09:19.736 A:middle
back up again, so it looks like

00:09:19.736 --> 00:09:20.536 A:middle
we fixed the problem.

00:09:20.536 --> 00:09:21.336 A:middle
I like this effect, so I'm going

00:09:21.336 --> 00:09:21.946 A:middle
to do it again.

00:09:22.516 --> 00:09:28.146 A:middle
[ Applause ]

00:09:28.646 --> 00:09:30.496 A:middle
Now let me just launch notes

00:09:30.496 --> 00:09:30.966 A:middle
again.

00:09:31.716 --> 00:09:34.126 A:middle
And we can tick off the first

00:09:34.836 --> 00:09:35.966 A:middle
bug as fixed.

00:09:36.686 --> 00:09:38.116 A:middle
Nothing better than checking off

00:09:38.366 --> 00:09:38.956 A:middle
fixed bugs.

00:09:39.536 --> 00:09:40.736 A:middle
Now the next three bugs are to

00:09:40.736 --> 00:09:42.376 A:middle
do with the new GamePlay mode

00:09:42.376 --> 00:09:43.096 A:middle
I've been working on.

00:09:43.386 --> 00:09:44.446 A:middle
So I'm going to press play in

00:09:44.446 --> 00:09:45.656 A:middle
the simulator to show you that,

00:09:45.856 --> 00:09:47.316 A:middle
and the challenge here is to try

00:09:47.316 --> 00:09:48.716 A:middle
and jump higher than the bar 10

00:09:48.716 --> 00:09:49.196 A:middle
times.

00:09:49.506 --> 00:09:50.726 A:middle
And the bar starts low and

00:09:50.726 --> 00:09:51.636 A:middle
raises each time.

00:09:53.156 --> 00:09:54.736 A:middle
And you can also see some score

00:09:54.736 --> 00:09:55.906 A:middle
labels have been added to the

00:09:55.906 --> 00:09:56.446 A:middle
top.

00:09:56.536 --> 00:09:57.736 A:middle
So if I tap the astronaut,

00:09:57.896 --> 00:09:58.966 A:middle
you'll see he's still configured

00:09:58.966 --> 00:10:00.436 A:middle
to perform an unsuccessful jump,

00:09:58.966 --> 00:10:00.436 A:middle
to perform an unsuccessful jump,

00:10:00.916 --> 00:10:02.496 A:middle
and then the attempts label at

00:10:02.496 --> 00:10:03.606 A:middle
the top should have incremented

00:10:03.846 --> 00:10:04.336 A:middle
but it didn't.

00:10:04.796 --> 00:10:06.076 A:middle
And that's the first bug we've

00:10:06.076 --> 00:10:07.086 A:middle
got here, where these labels

00:10:07.086 --> 00:10:08.176 A:middle
flash but do not change.

00:10:08.386 --> 00:10:10.036 A:middle
We've also got an issue with the

00:10:10.036 --> 00:10:11.506 A:middle
end-of-game state not being

00:10:11.506 --> 00:10:13.256 A:middle
handled properly and a problem

00:10:13.256 --> 00:10:14.626 A:middle
with the layout of those score

00:10:14.626 --> 00:10:15.626 A:middle
and attempts labels, but we'll

00:10:15.626 --> 00:10:16.466 A:middle
come back to those.

00:10:16.986 --> 00:10:18.546 A:middle
So returning to this bug, if you

00:10:18.546 --> 00:10:19.566 A:middle
didn't notice it, let me tap the

00:10:19.566 --> 00:10:20.926 A:middle
astronaut again and keep an eye

00:10:20.926 --> 00:10:22.236 A:middle
up on the top on the attempts

00:10:22.236 --> 00:10:22.566 A:middle
label.

00:10:23.216 --> 00:10:24.716 A:middle
You'll see that it does flash

00:10:24.716 --> 00:10:25.756 A:middle
but it doesn't update.

00:10:25.756 --> 00:10:27.346 A:middle
So what this tells me is that

00:10:27.346 --> 00:10:28.896 A:middle
the label is getting a value set

00:10:28.896 --> 00:10:29.846 A:middle
on it because we're seeing the

00:10:29.846 --> 00:10:31.616 A:middle
transition animation but the

00:10:31.616 --> 00:10:32.556 A:middle
value is incorrect.

00:10:32.776 --> 00:10:34.136 A:middle
So I'd like to find the code

00:10:34.436 --> 00:10:36.346 A:middle
that is modifying this label to

00:10:36.346 --> 00:10:37.606 A:middle
have a look at what the logic is

00:10:37.606 --> 00:10:38.106 A:middle
at that point.

00:10:38.746 --> 00:10:40.316 A:middle
So we note UI label is getting

00:10:40.316 --> 00:10:42.016 A:middle
the text property changed, so

00:10:42.016 --> 00:10:42.996 A:middle
what I'm going to do is switch

00:10:42.996 --> 00:10:44.106 A:middle
to the breakpoint navigator and

00:10:44.406 --> 00:10:45.736 A:middle
down at the bottom here select

00:10:45.796 --> 00:10:47.616 A:middle
this plus button to create one

00:10:47.616 --> 00:10:49.386 A:middle
of many specialized breakpoints.

00:10:49.386 --> 00:10:50.896 A:middle
You can see we've got

00:10:51.026 --> 00:10:52.246 A:middle
breakpoints for Swift errors and

00:10:52.246 --> 00:10:53.796 A:middle
exceptions and even test values,

00:10:54.106 --> 00:10:55.006 A:middle
but for this case, I'm going to

00:10:55.006 --> 00:10:56.226 A:middle
use a symbolic breakpoint.

00:10:56.896 --> 00:10:58.436 A:middle
So that creates a new breakpoint

00:10:58.436 --> 00:10:59.776 A:middle
and brings up the editor for

00:11:00.046 --> 00:11:01.626 A:middle
that, and here we can enter any

00:11:02.306 --> 00:11:04.226 A:middle
function or method name such as

00:11:04.226 --> 00:11:06.706 A:middle
UI labels, set text, which we'll

00:11:06.706 --> 00:11:09.066 A:middle
need in this case, and we enter

00:11:09.066 --> 00:11:10.966 A:middle
it in Objective-C format because

00:11:11.016 --> 00:11:12.306 A:middle
UIKit is in Objective-C

00:11:12.306 --> 00:11:12.806 A:middle
framework.

00:11:13.546 --> 00:11:14.456 A:middle
The thing to point out, if I

00:11:14.456 --> 00:11:16.516 A:middle
dismiss that, is that below the

00:11:16.786 --> 00:11:18.906 A:middle
breakpoint, there is a

00:11:18.906 --> 00:11:20.586 A:middle
[inaudible] added and this is

00:11:20.586 --> 00:11:21.506 A:middle
the feedback from the debugger

00:11:21.506 --> 00:11:22.696 A:middle
to tell us that it was able to

00:11:22.696 --> 00:11:24.176 A:middle
resolve this breakpoint to one

00:11:24.176 --> 00:11:25.586 A:middle
location in UIKit, Core.

00:11:26.136 --> 00:11:27.336 A:middle
Some symbols may result in

00:11:27.336 --> 00:11:28.466 A:middle
multiple locations, and you

00:11:28.466 --> 00:11:29.306 A:middle
would see them all here.

00:11:29.546 --> 00:11:30.786 A:middle
And if you saw no [inaudible]

00:11:30.786 --> 00:11:32.216 A:middle
entries, that would indicate

00:11:32.256 --> 00:11:33.886 A:middle
that the debugger wasn't able to

00:11:33.886 --> 00:11:35.176 A:middle
resolve your breakpoint, so it

00:11:35.176 --> 00:11:35.606 A:middle
wouldn't hit.

00:11:36.396 --> 00:11:38.216 A:middle
So with that in place, I'm going

00:11:38.216 --> 00:11:40.476 A:middle
to tap the astronaut again, and

00:11:40.476 --> 00:11:41.726 A:middle
now we see that we've hit the

00:11:41.726 --> 00:11:43.416 A:middle
breakpoint in UI label set text.

00:11:43.876 --> 00:11:45.216 A:middle
Now we don't have the source

00:11:45.216 --> 00:11:46.926 A:middle
code for UIKit, of course, so

00:11:46.926 --> 00:11:48.166 A:middle
we're looking at assembly code,

00:11:48.586 --> 00:11:49.716 A:middle
but there's no need to remain in

00:11:49.716 --> 00:11:50.876 A:middle
the dark even if you're in

00:11:50.876 --> 00:11:53.256 A:middle
assembly code of one of the

00:11:53.256 --> 00:11:54.116 A:middle
system frameworks.

00:11:54.426 --> 00:11:56.186 A:middle
We can inspect the arguments

00:11:56.226 --> 00:11:57.196 A:middle
passed into a function.

00:11:57.196 --> 00:11:58.556 A:middle
You just need to know the

00:11:58.556 --> 00:11:59.586 A:middle
calling convention for the

00:11:59.586 --> 00:12:00.446 A:middle
architecture, and you can

00:11:59.586 --> 00:12:00.446 A:middle
architecture, and you can

00:12:00.446 --> 00:12:02.106 A:middle
inspect the registers to see the

00:12:02.106 --> 00:12:02.596 A:middle
arguments.

00:12:03.056 --> 00:12:04.086 A:middle
Well, I'll admit I never

00:12:04.086 --> 00:12:06.486 A:middle
remember what those registers

00:12:06.486 --> 00:12:08.116 A:middle
are but thankfully, I don't have

00:12:08.166 --> 00:12:09.866 A:middle
to because the debugger provides

00:12:09.866 --> 00:12:10.786 A:middle
pseudo-registers.

00:12:11.426 --> 00:12:13.896 A:middle
Dollar arg one is translated to

00:12:13.896 --> 00:12:14.856 A:middle
the register that holds the

00:12:14.856 --> 00:12:15.606 A:middle
first argument.

00:12:15.956 --> 00:12:16.986 A:middle
So in this case, we can have a

00:12:16.986 --> 00:12:18.276 A:middle
look at the receiver of that

00:12:18.276 --> 00:12:19.956 A:middle
Objective-C message, which is a

00:12:19.956 --> 00:12:21.056 A:middle
UI label instance.

00:12:22.056 --> 00:12:23.356 A:middle
Now we see that it has a value

00:12:23.356 --> 00:12:25.916 A:middle
of 17 feet, and that indicates

00:12:25.916 --> 00:12:26.886 A:middle
to me that it's this height

00:12:26.886 --> 00:12:28.496 A:middle
label here, so it's not the

00:12:28.496 --> 00:12:29.746 A:middle
label we're interested in, but

00:12:29.746 --> 00:12:30.556 A:middle
while we're here, let's look at

00:12:30.556 --> 00:12:31.386 A:middle
the other arguments.

00:12:32.186 --> 00:12:32.976 A:middle
If you're familiar with

00:12:32.976 --> 00:12:34.576 A:middle
Objective-C message send, you

00:12:34.576 --> 00:12:35.636 A:middle
may remember that the second

00:12:35.636 --> 00:12:36.876 A:middle
argument should be the selector.

00:12:37.656 --> 00:12:38.576 A:middle
We don't see that here but

00:12:38.576 --> 00:12:39.956 A:middle
that's because LLDB doesn't

00:12:39.956 --> 00:12:41.116 A:middle
implicitly know the types of

00:12:41.476 --> 00:12:42.156 A:middle
these arguments.

00:12:42.156 --> 00:12:43.306 A:middle
So in some cases, we need to

00:12:43.306 --> 00:12:44.836 A:middle
typecast it and now we see the

00:12:44.836 --> 00:12:45.966 A:middle
selector for this message.

00:12:46.376 --> 00:12:48.226 A:middle
Now the third argument is the

00:12:48.226 --> 00:12:50.516 A:middle
first parameter passed into the

00:12:50.516 --> 00:12:50.906 A:middle
method.

00:12:50.986 --> 00:12:52.846 A:middle
In other words, it's the string

00:12:52.846 --> 00:12:53.906 A:middle
passed into the set text.

00:12:54.206 --> 00:12:55.516 A:middle
So this is a great convenience

00:12:55.516 --> 00:12:56.896 A:middle
for inspecting the arguments, if

00:12:56.896 --> 00:12:59.316 A:middle
you're in an assembly frame for

00:12:59.316 --> 00:13:00.216 A:middle
one of the frameworks.

00:12:59.316 --> 00:13:00.216 A:middle
one of the frameworks.

00:13:00.896 --> 00:13:02.206 A:middle
But like I said, this wasn't the

00:13:02.206 --> 00:13:03.306 A:middle
object or the label we're

00:13:03.306 --> 00:13:04.346 A:middle
interested in, so let's press

00:13:04.346 --> 00:13:05.806 A:middle
continue, and now we've hit the

00:13:05.806 --> 00:13:06.526 A:middle
breakpoint again.

00:13:06.526 --> 00:13:08.746 A:middle
So we can inspect dollar arg one

00:13:08.746 --> 00:13:11.046 A:middle
to see what the receiver is, and

00:13:11.046 --> 00:13:12.276 A:middle
it looks like it's the same

00:13:12.396 --> 00:13:13.916 A:middle
height label with zero feet now.

00:13:14.296 --> 00:13:15.276 A:middle
And I can see the problem with

00:13:15.276 --> 00:13:15.916 A:middle
my strategy.

00:13:16.886 --> 00:13:18.306 A:middle
While the astronaut is jumping,

00:13:18.726 --> 00:13:19.956 A:middle
the code is updating the height

00:13:19.956 --> 00:13:22.806 A:middle
label in real time, so the

00:13:23.056 --> 00:13:24.376 A:middle
breakpoint is going to hit on

00:13:24.376 --> 00:13:26.246 A:middle
this object quite frequently,

00:13:26.246 --> 00:13:27.466 A:middle
and it's going to take us a long

00:13:27.466 --> 00:13:27.686 A:middle
time.

00:13:27.686 --> 00:13:28.776 A:middle
It'll be very difficult to hit a

00:13:28.776 --> 00:13:31.116 A:middle
breakpoint on UI label set text

00:13:31.116 --> 00:13:31.986 A:middle
for the attempts label.

00:13:32.386 --> 00:13:33.986 A:middle
So what I think I should do is

00:13:33.986 --> 00:13:35.876 A:middle
only set this symbolic

00:13:35.876 --> 00:13:37.206 A:middle
breakpoint after the jump

00:13:37.206 --> 00:13:39.196 A:middle
animation has completed, so let

00:13:39.196 --> 00:13:40.206 A:middle
me show you a way to do that.

00:13:40.206 --> 00:13:41.736 A:middle
I'm going to switch to the

00:13:41.736 --> 00:13:42.716 A:middle
breakpoint navigator.

00:13:43.116 --> 00:13:44.216 A:middle
And if I double-click on the

00:13:44.216 --> 00:13:45.456 A:middle
indicator for the symbolic

00:13:45.456 --> 00:13:47.036 A:middle
breakpoint, we can bring the

00:13:47.036 --> 00:13:48.746 A:middle
editor back up and we can use

00:13:48.746 --> 00:13:49.736 A:middle
this condition field.

00:13:50.026 --> 00:13:51.236 A:middle
We can enter an expression here

00:13:51.236 --> 00:13:52.906 A:middle
that returns true or false, and

00:13:52.906 --> 00:13:54.216 A:middle
the breakpoint will only trigger

00:13:54.216 --> 00:13:55.436 A:middle
if that expression evaluates to

00:13:55.436 --> 00:13:55.886 A:middle
true.

00:13:56.226 --> 00:13:57.716 A:middle
So if we had a property such as

00:13:57.716 --> 00:13:59.656 A:middle
jump animation in progress, we

00:13:59.656 --> 00:14:01.066 A:middle
could edit an expression to test

00:13:59.656 --> 00:14:01.066 A:middle
could edit an expression to test

00:14:01.066 --> 00:14:02.386 A:middle
if that was false and then the

00:14:02.386 --> 00:14:03.506 A:middle
breakpoint would trigger.

00:14:03.506 --> 00:14:04.876 A:middle
I don't have a property in this

00:14:04.876 --> 00:14:05.866 A:middle
case, so I'm going to show you a

00:14:05.866 --> 00:14:06.536 A:middle
different method.

00:14:06.536 --> 00:14:08.046 A:middle
I'm going to delete that

00:14:08.046 --> 00:14:10.426 A:middle
symbolic breakpoint and instead,

00:14:10.426 --> 00:14:12.196 A:middle
scroll down to this function

00:14:12.196 --> 00:14:13.286 A:middle
jump completed and set a

00:14:13.286 --> 00:14:14.076 A:middle
breakpoint here.

00:14:14.716 --> 00:14:16.046 A:middle
Now jump completed is called

00:14:16.046 --> 00:14:17.896 A:middle
after the animation has finished

00:14:18.256 --> 00:14:19.526 A:middle
so that it can update UI and

00:14:19.526 --> 00:14:20.406 A:middle
update game state.

00:14:20.406 --> 00:14:22.196 A:middle
However, we don't want a break

00:14:22.196 --> 00:14:23.106 A:middle
in this function.

00:14:23.346 --> 00:14:24.526 A:middle
What I want to do is configure

00:14:24.526 --> 00:14:26.436 A:middle
this breakpoint to actually set

00:14:26.436 --> 00:14:27.956 A:middle
the symbolic breakpoint in UI

00:14:27.956 --> 00:14:29.086 A:middle
label set text for me.

00:14:29.126 --> 00:14:30.806 A:middle
And I can do that by adding a

00:14:30.806 --> 00:14:32.736 A:middle
debugger command action, which

00:14:32.736 --> 00:14:34.366 A:middle
is breakpoint set, and I'm going

00:14:34.366 --> 00:14:36.366 A:middle
to use the option one shot true.

00:14:36.576 --> 00:14:38.746 A:middle
And a one shot breakpoint is a

00:14:38.746 --> 00:14:40.396 A:middle
temporary breakpoint that only

00:14:40.396 --> 00:14:41.996 A:middle
exists until it's triggered and

00:14:41.996 --> 00:14:43.196 A:middle
then it's automatically deleted.

00:14:43.716 --> 00:14:45.546 A:middle
And we can give it the symbolic

00:14:45.546 --> 00:14:48.366 A:middle
name, UI label set text, and

00:14:48.366 --> 00:14:49.586 A:middle
make this an order continuing

00:14:49.586 --> 00:14:50.076 A:middle
breakpoint.

00:14:50.466 --> 00:14:51.646 A:middle
So what we've created, in this

00:14:51.646 --> 00:14:53.936 A:middle
case, is a breakpoint that when

00:14:53.936 --> 00:14:55.336 A:middle
the execution enters the jump

00:14:55.396 --> 00:14:57.766 A:middle
completed function, it sets a

00:14:58.146 --> 00:14:59.136 A:middle
temporary breakpoint in the

00:14:59.136 --> 00:15:00.396 A:middle
location we're interested in and

00:14:59.136 --> 00:15:00.396 A:middle
location we're interested in and

00:15:00.396 --> 00:15:01.206 A:middle
then continues.

00:15:01.486 --> 00:15:02.896 A:middle
So then we'll only hit that set

00:15:02.896 --> 00:15:04.756 A:middle
text breakpoint after flowing

00:15:04.756 --> 00:15:05.546 A:middle
through this function.

00:15:06.196 --> 00:15:07.496 A:middle
So let's press continue, and we

00:15:07.496 --> 00:15:08.696 A:middle
see that the jump animation

00:15:08.736 --> 00:15:11.046 A:middle
completes in the simulator, and

00:15:11.046 --> 00:15:12.636 A:middle
now we hit the breakpoint on UI

00:15:12.636 --> 00:15:13.576 A:middle
label set text.

00:15:14.066 --> 00:15:15.396 A:middle
So now we can have a look at the

00:15:15.396 --> 00:15:17.376 A:middle
receiver of that message by

00:15:17.666 --> 00:15:18.906 A:middle
using po dollar arg one.

00:15:18.906 --> 00:15:20.526 A:middle
And we see that is indeed a

00:15:20.526 --> 00:15:22.486 A:middle
different UI label instance with

00:15:22.486 --> 00:15:23.966 A:middle
a value of zero, so that's

00:15:24.046 --> 00:15:25.236 A:middle
likely to be one of these at the

00:15:25.236 --> 00:15:25.776 A:middle
top.

00:15:25.976 --> 00:15:26.766 A:middle
So we think we've found the

00:15:26.766 --> 00:15:28.286 A:middle
right object, so let's have a

00:15:28.286 --> 00:15:29.166 A:middle
look at the code that's

00:15:29.166 --> 00:15:30.546 A:middle
modifying this label's value.

00:15:31.156 --> 00:15:32.596 A:middle
We can do that in the debug

00:15:32.596 --> 00:15:34.046 A:middle
navigator by selecting the next

00:15:34.046 --> 00:15:34.876 A:middle
frame up in the stack.

00:15:34.996 --> 00:15:36.286 A:middle
And now we've found the code

00:15:36.286 --> 00:15:37.346 A:middle
that's modifying the label

00:15:37.346 --> 00:15:37.676 A:middle
value.

00:15:38.186 --> 00:15:39.696 A:middle
It's currently passing in a

00:15:39.696 --> 00:15:41.646 A:middle
string of zero using the label

00:15:41.646 --> 00:15:43.276 A:middle
text variable, and looking up,

00:15:43.276 --> 00:15:44.816 A:middle
we can see that label text is

00:15:44.966 --> 00:15:46.156 A:middle
always set to the label's

00:15:46.156 --> 00:15:47.196 A:middle
current value, so that's not

00:15:47.196 --> 00:15:47.856 A:middle
going to change.

00:15:48.336 --> 00:15:49.846 A:middle
It looks like value text is the

00:15:49.846 --> 00:15:51.826 A:middle
variable that contains the new

00:15:51.826 --> 00:15:53.736 A:middle
value, so probably just a typo;

00:15:53.736 --> 00:15:54.446 A:middle
let's fix that.

00:15:55.606 --> 00:15:57.000 A:middle
Let's make it value text.

00:16:00.266 --> 00:16:01.766 A:middle
And then, what I'd like to do,

00:16:02.376 --> 00:16:03.856 A:middle
rather than recompile and rerun

00:16:03.856 --> 00:16:05.936 A:middle
to test this change, I'd like to

00:16:06.266 --> 00:16:08.336 A:middle
actually test this change in the

00:16:08.336 --> 00:16:09.416 A:middle
context of the current running

00:16:09.416 --> 00:16:10.606 A:middle
application like before.

00:16:10.606 --> 00:16:12.086 A:middle
So I'm going to add a breakpoint

00:16:12.086 --> 00:16:13.276 A:middle
below the current line because

00:16:13.276 --> 00:16:14.286 A:middle
remember, we've changed the code

00:16:14.286 --> 00:16:15.536 A:middle
but we haven't recompiled.

00:16:15.906 --> 00:16:17.076 A:middle
So while the label will still be

00:16:17.076 --> 00:16:19.226 A:middle
set, we'll add our line below

00:16:19.226 --> 00:16:20.366 A:middle
that to set it to the value we

00:16:20.366 --> 00:16:21.046 A:middle
think it should be.

00:16:21.476 --> 00:16:22.906 A:middle
So another custom breakpoint,

00:16:23.276 --> 00:16:24.746 A:middle
and we can use expression once

00:16:24.746 --> 00:16:27.346 A:middle
again to inject that code and

00:16:27.346 --> 00:16:28.566 A:middle
make this auto-continuing.

00:16:29.656 --> 00:16:30.856 A:middle
So now, if I press continue,

00:16:30.986 --> 00:16:32.846 A:middle
code execution will continue to

00:16:32.846 --> 00:16:34.406 A:middle
flow through here, and we see

00:16:34.406 --> 00:16:35.446 A:middle
that the attempts label is

00:16:35.446 --> 00:16:36.236 A:middle
indeed updated.

00:16:36.546 --> 00:16:38.196 A:middle
I'd like to make sure that also

00:16:38.196 --> 00:16:38.676 A:middle
works.

00:16:38.676 --> 00:16:39.226 A:middle
Well, thank you.

00:16:40.516 --> 00:16:43.896 A:middle
[ Applause ]

00:16:44.396 --> 00:16:45.826 A:middle
I'd like to make sure that also

00:16:45.826 --> 00:16:47.676 A:middle
works for the score label after

00:16:47.676 --> 00:16:49.546 A:middle
a successful jump, so let's

00:16:49.826 --> 00:16:51.296 A:middle
navigate back to here.

00:16:51.756 --> 00:16:53.606 A:middle
I can remove this jump-completed

00:16:53.706 --> 00:16:54.916 A:middle
breakpoint that was creating the

00:16:54.916 --> 00:16:56.016 A:middle
one shot breakpoint because we

00:16:56.016 --> 00:16:56.916 A:middle
don't need that anymore.

00:16:57.386 --> 00:16:59.026 A:middle
And I can disable the breakpoint

00:16:59.026 --> 00:17:00.626 A:middle
in jump because we don't want to

00:16:59.026 --> 00:17:00.626 A:middle
in jump because we don't want to

00:17:00.626 --> 00:17:02.016 A:middle
modify did reach selected height

00:17:02.016 --> 00:17:02.396 A:middle
anymore.

00:17:02.666 --> 00:17:03.496 A:middle
And now, when I tap the

00:17:03.496 --> 00:17:04.536 A:middle
astronaut, he performs a

00:17:04.536 --> 00:17:06.296 A:middle
successful jump, and we can see

00:17:06.296 --> 00:17:07.376 A:middle
that all the labels update

00:17:07.376 --> 00:17:08.766 A:middle
properly, so that bug looks

00:17:08.766 --> 00:17:09.836 A:middle
great to me.

00:17:10.955 --> 00:17:12.866 A:middle
So let's return and check that

00:17:12.866 --> 00:17:13.175 A:middle
one off.

00:17:14.185 --> 00:17:14.556 A:middle
All right.

00:17:14.646 --> 00:17:16.215 A:middle
The next bug is a problem with

00:17:16.215 --> 00:17:17.256 A:middle
the end-of-game state.

00:17:17.576 --> 00:17:19.876 A:middle
So the game is meant to end

00:17:19.876 --> 00:17:21.096 A:middle
after 10 attempts, so I could

00:17:21.096 --> 00:17:22.606 A:middle
tap the astronaut, wait for the

00:17:22.606 --> 00:17:24.096 A:middle
animations to play out, and

00:17:24.096 --> 00:17:25.586 A:middle
progress through the game to get

00:17:25.586 --> 00:17:26.576 A:middle
through that state to try and

00:17:26.576 --> 00:17:27.185 A:middle
reproduce it.

00:17:27.626 --> 00:17:28.676 A:middle
But the animations take some

00:17:28.676 --> 00:17:30.316 A:middle
time, and I may need to do this

00:17:30.316 --> 00:17:32.316 A:middle
numerous times while I test and

00:17:32.316 --> 00:17:34.336 A:middle
verify my fixes, so I'd like to

00:17:34.576 --> 00:17:36.156 A:middle
skip all the jump animations.

00:17:36.546 --> 00:17:37.796 A:middle
So let me show you how I'll do

00:17:37.796 --> 00:17:37.906 A:middle
that.

00:17:37.906 --> 00:17:40.556 A:middle
I'm going to navigate to update

00:17:40.596 --> 00:17:43.006 A:middle
UI for jump succeeded, and we

00:17:43.006 --> 00:17:45.596 A:middle
can see this function modifies

00:17:45.596 --> 00:17:47.316 A:middle
some colors and then calls jump

00:17:47.376 --> 00:17:48.596 A:middle
astronaut animated true.

00:17:48.666 --> 00:17:50.066 A:middle
So it looks like I just need to

00:17:50.066 --> 00:17:51.286 A:middle
call jump astronaut animated

00:17:51.286 --> 00:17:51.736 A:middle
false.

00:17:52.166 --> 00:17:53.026 A:middle
I could change the code and

00:17:53.026 --> 00:17:54.106 A:middle
recompile, but like I said

00:17:54.106 --> 00:17:55.546 A:middle
before, I don't like to change

00:17:55.546 --> 00:17:56.826 A:middle
my code for debugging purposes

00:17:56.826 --> 00:17:58.446 A:middle
if I can avoid it, so let me

00:17:58.446 --> 00:17:59.386 A:middle
show you the technique I'll use

00:17:59.386 --> 00:17:59.766 A:middle
instead.

00:18:00.176 --> 00:18:01.356 A:middle
I'm going to set a breakpoint on

00:18:01.356 --> 00:18:01.806 A:middle
this line.

00:18:02.086 --> 00:18:03.466 A:middle
Let's clear the debug console

00:18:03.776 --> 00:18:05.226 A:middle
and initiate a new jump by

00:18:05.226 --> 00:18:06.636 A:middle
tapping the astronaut, and now

00:18:06.636 --> 00:18:07.646 A:middle
we're paused on this line.

00:18:08.156 --> 00:18:10.286 A:middle
So I need to ask the debugger to

00:18:10.286 --> 00:18:11.806 A:middle
replace this line with a call to

00:18:11.806 --> 00:18:13.226 A:middle
jump astronaut animated false.

00:18:13.656 --> 00:18:15.026 A:middle
Well, the code's compiled in, we

00:18:15.076 --> 00:18:16.306 A:middle
can't replace it, but what we

00:18:16.306 --> 00:18:17.756 A:middle
can do is ask the debugger to

00:18:17.926 --> 00:18:19.506 A:middle
skip over this line, to not

00:18:19.506 --> 00:18:20.656 A:middle
execute it but skip over it.

00:18:20.656 --> 00:18:21.776 A:middle
And then we can use expression

00:18:21.776 --> 00:18:23.016 A:middle
to inject the change that we --

00:18:23.016 --> 00:18:24.226 A:middle
or the call that we'd like to

00:18:24.226 --> 00:18:24.506 A:middle
make.

00:18:25.096 --> 00:18:26.416 A:middle
So how do we skip over a line?

00:18:26.626 --> 00:18:27.996 A:middle
Well, let me draw your attention

00:18:27.996 --> 00:18:29.476 A:middle
to this green annotation label

00:18:29.476 --> 00:18:30.116 A:middle
thread one.

00:18:30.566 --> 00:18:31.836 A:middle
We call this the instruction

00:18:31.836 --> 00:18:32.256 A:middle
pointer.

00:18:32.666 --> 00:18:34.076 A:middle
It points to the line containing

00:18:34.076 --> 00:18:35.076 A:middle
the instructions that will be

00:18:35.076 --> 00:18:36.016 A:middle
executed next.

00:18:36.016 --> 00:18:37.576 A:middle
And this icon here, that kind of

00:18:37.576 --> 00:18:39.416 A:middle
looks like a grab handle, in

00:18:39.416 --> 00:18:40.446 A:middle
fact, is a grab handle.

00:18:40.446 --> 00:18:41.616 A:middle
If I hold the mouse down, I can

00:18:41.616 --> 00:18:43.236 A:middle
move this around, and I'm able

00:18:43.236 --> 00:18:44.406 A:middle
to change the instruction

00:18:44.406 --> 00:18:46.166 A:middle
pointer while paused, so I can

00:18:46.166 --> 00:18:47.846 A:middle
move it down one line and let go

00:18:47.936 --> 00:18:49.926 A:middle
and then we get a scary message

00:18:49.926 --> 00:18:50.516 A:middle
from Xcode.

00:18:50.926 --> 00:18:52.166 A:middle
And basically, what it's saying

00:18:52.436 --> 00:18:54.216 A:middle
is, with great power comes great

00:18:54.216 --> 00:18:54.956 A:middle
responsibility.

00:18:55.126 --> 00:18:56.076 A:middle
And I'll be honest with you,

00:18:56.076 --> 00:18:57.076 A:middle
this is the riskiest feature

00:18:57.076 --> 00:18:57.916 A:middle
I'll tell you about today.

00:18:57.916 --> 00:19:00.116 A:middle
But it's only risky because the

00:18:57.916 --> 00:19:00.116 A:middle
But it's only risky because the

00:19:00.116 --> 00:19:01.456 A:middle
debugger allows you to move the

00:19:01.456 --> 00:19:02.416 A:middle
instruction point wherever you

00:19:02.416 --> 00:19:02.736 A:middle
like.

00:19:02.736 --> 00:19:04.266 A:middle
It does not care, but it cannot

00:19:04.266 --> 00:19:05.766 A:middle
guarantee that the application's

00:19:05.766 --> 00:19:06.876 A:middle
state will remain intact.

00:19:07.186 --> 00:19:08.326 A:middle
So you could, for example, cause

00:19:08.326 --> 00:19:10.096 A:middle
memory management issues if you

00:19:10.096 --> 00:19:11.376 A:middle
end up referencing an object

00:19:11.376 --> 00:19:12.146 A:middle
that has not yet been

00:19:12.146 --> 00:19:13.926 A:middle
initialized or over-releasing an

00:19:13.926 --> 00:19:14.756 A:middle
object, for example.

00:19:15.316 --> 00:19:16.826 A:middle
But we've all been to the

00:19:16.826 --> 00:19:17.956 A:middle
advanced debugging session now,

00:19:17.956 --> 00:19:18.766 A:middle
so we know what we're doing.

00:19:18.766 --> 00:19:19.826 A:middle
So let's press the blue button.

00:19:21.416 --> 00:19:21.916 A:middle
All right.

00:19:21.916 --> 00:19:23.076 A:middle
So we've skipped over that line,

00:19:23.076 --> 00:19:24.336 A:middle
and now in the console, we can

00:19:24.336 --> 00:19:25.726 A:middle
use expression and call jump

00:19:25.726 --> 00:19:26.986 A:middle
astronaut animated false.

00:19:28.816 --> 00:19:30.316 A:middle
And now we press continue to see

00:19:30.316 --> 00:19:32.956 A:middle
if all this worked, and indeed,

00:19:33.376 --> 00:19:34.516 A:middle
the game state updated, and we

00:19:34.516 --> 00:19:35.826 A:middle
skipped all the jump animations.

00:19:36.896 --> 00:19:38.436 A:middle
So I'd like that to happen every

00:19:38.436 --> 00:19:40.256 A:middle
time I tap the astronaut, so I'm

00:19:40.256 --> 00:19:41.186 A:middle
going to configure this

00:19:41.186 --> 00:19:42.446 A:middle
breakpoint here to do that for

00:19:42.446 --> 00:19:42.606 A:middle
me.

00:19:43.756 --> 00:19:45.156 A:middle
So first, we need a debugger

00:19:45.156 --> 00:19:47.556 A:middle
action that skips over one line,

00:19:47.716 --> 00:19:48.856 A:middle
and the command for that is

00:19:48.886 --> 00:19:49.536 A:middle
thread jump.

00:19:50.126 --> 00:19:51.426 A:middle
And I give it the option by one,

00:19:51.426 --> 00:19:52.916 A:middle
and this tells the debugger to

00:19:53.156 --> 00:19:55.486 A:middle
jump over one line of code for

00:19:55.486 --> 00:19:55.976 A:middle
the current thread.

00:19:56.216 --> 00:19:58.976 A:middle
And then we just need to call

00:19:58.976 --> 00:20:00.096 A:middle
our expression and we can do

00:19:58.976 --> 00:20:00.096 A:middle
our expression and we can do

00:20:00.096 --> 00:20:01.596 A:middle
that by pressing the plus button

00:20:02.006 --> 00:20:03.446 A:middle
and adding another command

00:20:03.446 --> 00:20:03.786 A:middle
action.

00:20:04.686 --> 00:20:06.756 A:middle
Expression jump astronaut

00:20:06.756 --> 00:20:08.176 A:middle
animated false.

00:20:08.526 --> 00:20:09.566 A:middle
And we make this order

00:20:09.566 --> 00:20:10.086 A:middle
continuing.

00:20:10.736 --> 00:20:11.806 A:middle
So what we've got here is a

00:20:11.806 --> 00:20:14.096 A:middle
breakpoint then when execution

00:20:14.096 --> 00:20:16.336 A:middle
reaches this line but before it

00:20:16.336 --> 00:20:17.526 A:middle
executes this line, the

00:20:17.856 --> 00:20:18.796 A:middle
breakpoint is triggered.

00:20:18.796 --> 00:20:20.686 A:middle
It will perform the command to

00:20:20.686 --> 00:20:22.976 A:middle
jump over that line and then use

00:20:22.976 --> 00:20:25.196 A:middle
expression to call the function

00:20:25.196 --> 00:20:26.126 A:middle
call that we'd like to make

00:20:26.126 --> 00:20:26.966 A:middle
instead.

00:20:27.336 --> 00:20:28.936 A:middle
So now, if we tap on the

00:20:28.936 --> 00:20:30.796 A:middle
astronaut, we can rapidly

00:20:30.796 --> 00:20:31.936 A:middle
progress through the game state

00:20:31.936 --> 00:20:33.386 A:middle
and skip all the animations and

00:20:33.386 --> 00:20:34.476 A:middle
easily reproduce our bug.

00:20:35.396 --> 00:20:36.656 A:middle
So, as I said, the game was

00:20:36.656 --> 00:20:38.646 A:middle
meant to end after 10 attempts,

00:20:38.646 --> 00:20:40.386 A:middle
and we've gone well beyond that,

00:20:40.676 --> 00:20:42.916 A:middle
so let's have a look at the game

00:20:42.916 --> 00:20:43.266 A:middle
state.

00:20:44.206 --> 00:20:45.836 A:middle
That is all stored in a property

00:20:45.836 --> 00:20:48.376 A:middle
up here called GamePlay, so I'm

00:20:48.506 --> 00:20:49.636 A:middle
going to set a breakpoint on

00:20:49.636 --> 00:20:51.736 A:middle
that property and start a new

00:20:51.736 --> 00:20:52.016 A:middle
jump.

00:20:52.196 --> 00:20:53.906 A:middle
And now we've paused at the next

00:20:53.906 --> 00:20:54.916 A:middle
reference to that property.

00:20:55.626 --> 00:20:56.926 A:middle
I'm going to use po to look at

00:20:56.976 --> 00:20:58.296 A:middle
the current state of that

00:20:58.296 --> 00:21:00.026 A:middle
object, and here we see the

00:20:58.296 --> 00:21:00.026 A:middle
object, and here we see the

00:21:00.026 --> 00:21:01.656 A:middle
debugged description for this

00:21:01.656 --> 00:21:02.556 A:middle
GamePlay object.

00:21:02.986 --> 00:21:04.186 A:middle
And we have a custom debugged

00:21:04.186 --> 00:21:05.676 A:middle
description here, so it's worth

00:21:05.736 --> 00:21:07.726 A:middle
pointing out that po requests

00:21:07.726 --> 00:21:08.596 A:middle
the programmatic debug

00:21:08.626 --> 00:21:10.116 A:middle
description of an object and you

00:21:10.116 --> 00:21:11.196 A:middle
can customize these.

00:21:11.696 --> 00:21:12.586 A:middle
I'll show you how we did that

00:21:12.586 --> 00:21:13.246 A:middle
for GamePlay.

00:21:13.316 --> 00:21:14.546 A:middle
If I switch to the source code

00:21:14.906 --> 00:21:16.626 A:middle
and scroll to the bottom, you

00:21:16.626 --> 00:21:17.856 A:middle
can see that we've added an

00:21:17.856 --> 00:21:19.656 A:middle
extension to conform GamePlay to

00:21:19.796 --> 00:21:21.626 A:middle
custom debug string convertible.

00:21:22.206 --> 00:21:23.546 A:middle
And conformance requires that

00:21:23.546 --> 00:21:25.676 A:middle
you implement a property called

00:21:25.676 --> 00:21:27.126 A:middle
debug description and return a

00:21:27.126 --> 00:21:27.526 A:middle
string.

00:21:27.896 --> 00:21:29.656 A:middle
And you can return whatever

00:21:29.656 --> 00:21:31.136 A:middle
string you like to represent

00:21:31.136 --> 00:21:32.756 A:middle
this object for your debugging

00:21:32.756 --> 00:21:33.386 A:middle
purposes.

00:21:34.096 --> 00:21:35.896 A:middle
You can do the same for

00:21:35.976 --> 00:21:37.486 A:middle
Objective-C objects as well by

00:21:37.486 --> 00:21:38.736 A:middle
implementing debug description.

00:21:39.786 --> 00:21:41.366 A:middle
Compare that with the command p

00:21:41.366 --> 00:21:41.826 A:middle
GamePlay.

00:21:43.036 --> 00:21:46.796 A:middle
P is an alternate LLDB command,

00:21:47.136 --> 00:21:48.746 A:middle
which uses LLDB's built-in

00:21:48.746 --> 00:21:50.256 A:middle
formatters to represent the

00:21:50.256 --> 00:21:50.676 A:middle
object.

00:21:50.926 --> 00:21:51.586 A:middle
So here, we see two

00:21:51.586 --> 00:21:52.706 A:middle
representations of the same

00:21:52.706 --> 00:21:55.106 A:middle
object, and default formatter

00:21:55.106 --> 00:21:56.126 A:middle
shows you the full [inaudible]

00:21:56.126 --> 00:21:57.446 A:middle
type name, the memory address,

00:21:57.806 --> 00:21:58.826 A:middle
and then a list of all the

00:21:58.826 --> 00:21:59.986 A:middle
properties and their values.

00:22:00.376 --> 00:22:01.536 A:middle
So we can see here that there is

00:22:01.536 --> 00:22:02.636 A:middle
a max attempts property, and

00:22:02.636 --> 00:22:04.636 A:middle
it's correctly set to 10, so it

00:22:04.636 --> 00:22:06.126 A:middle
looks like there's perhaps a

00:22:06.126 --> 00:22:07.716 A:middle
logic error where, after

00:22:07.716 --> 00:22:08.876 A:middle
attempts is incremented, it's

00:22:08.876 --> 00:22:10.476 A:middle
not successfully determining

00:22:10.476 --> 00:22:11.926 A:middle
that it's past the maximum.

00:22:12.296 --> 00:22:13.406 A:middle
So I'd like to find the code

00:22:13.406 --> 00:22:14.616 A:middle
that's modifying attempts to see

00:22:14.616 --> 00:22:15.646 A:middle
what the logic looks like.

00:22:15.776 --> 00:22:17.646 A:middle
I'm going to open the variables

00:22:17.646 --> 00:22:19.046 A:middle
view and expand the view

00:22:19.046 --> 00:22:20.016 A:middle
controller to see all its

00:22:20.016 --> 00:22:20.886 A:middle
properties and down at the

00:22:20.886 --> 00:22:22.056 A:middle
bottom, I'm going to use the

00:22:22.136 --> 00:22:24.796 A:middle
filter to enter GamePlay to find

00:22:24.796 --> 00:22:25.296 A:middle
that property.

00:22:25.746 --> 00:22:27.286 A:middle
Expand its properties and then

00:22:27.286 --> 00:22:28.586 A:middle
I'm going to select the attempts

00:22:28.616 --> 00:22:28.956 A:middle
property.

00:22:29.516 --> 00:22:31.566 A:middle
And down here, I'm going to open

00:22:31.566 --> 00:22:33.786 A:middle
the contextual menu and select

00:22:34.086 --> 00:22:34.956 A:middle
watch attempts.

00:22:36.276 --> 00:22:37.716 A:middle
Now what this does is creates

00:22:37.716 --> 00:22:39.026 A:middle
what's called a watchpoint.

00:22:39.656 --> 00:22:40.876 A:middle
In the breakpoint navigator,

00:22:40.916 --> 00:22:42.116 A:middle
below all the breakpoints,

00:22:42.406 --> 00:22:43.586 A:middle
you'll see there's a new group

00:22:43.586 --> 00:22:44.926 A:middle
called watchpoints, and we have

00:22:44.926 --> 00:22:46.366 A:middle
one watchpoint for attempts.

00:22:46.706 --> 00:22:48.156 A:middle
And a watchpoint is like a

00:22:48.156 --> 00:22:49.546 A:middle
breakpoint, but it pauses the

00:22:49.546 --> 00:22:50.826 A:middle
debugger the next time the value

00:22:50.826 --> 00:22:52.966 A:middle
of that variable is changed, so

00:22:52.966 --> 00:22:54.126 A:middle
we can remove this property

00:22:54.126 --> 00:22:55.226 A:middle
breakpoint because we no longer

00:22:55.226 --> 00:22:56.766 A:middle
need it and press continue.

00:22:57.186 --> 00:22:58.456 A:middle
And now we've paused at this

00:22:58.456 --> 00:22:59.886 A:middle
watchpoint, and we found the

00:22:59.886 --> 00:23:00.796 A:middle
code that's modifying the

00:22:59.886 --> 00:23:00.796 A:middle
code that's modifying the

00:23:00.796 --> 00:23:01.706 A:middle
attempts variable.

00:23:02.186 --> 00:23:04.436 A:middle
I can disable this watchpoint

00:23:04.436 --> 00:23:05.336 A:middle
because I no longer need it.

00:23:05.336 --> 00:23:06.736 A:middle
And we can look at the code here

00:23:06.936 --> 00:23:07.896 A:middle
while the game's playing,

00:23:07.896 --> 00:23:09.126 A:middle
increment attempts, and if

00:23:09.126 --> 00:23:10.376 A:middle
successful, increment score.

00:23:10.716 --> 00:23:12.106 A:middle
So I'm not seeing any logic that

00:23:12.106 --> 00:23:13.406 A:middle
will detect if attempts has

00:23:13.406 --> 00:23:15.426 A:middle
exceeded maximum and transition

00:23:15.426 --> 00:23:16.526 A:middle
to the end-of-game state.

00:23:17.136 --> 00:23:18.086 A:middle
So I think that's all that's

00:23:18.086 --> 00:23:19.416 A:middle
needed, but in this case, I'd

00:23:19.416 --> 00:23:20.786 A:middle
like to test my hypothesis

00:23:21.006 --> 00:23:22.406 A:middle
before I make any actual code

00:23:22.406 --> 00:23:22.916 A:middle
changes.

00:23:23.316 --> 00:23:24.596 A:middle
So I'm going to create a

00:23:24.596 --> 00:23:26.306 A:middle
breakpoint and configure it to

00:23:26.306 --> 00:23:27.616 A:middle
inject that change to see if it

00:23:27.616 --> 00:23:29.246 A:middle
fixes the problem before I make

00:23:29.246 --> 00:23:30.096 A:middle
any code changes.

00:23:30.536 --> 00:23:31.656 A:middle
So once again, I can add a

00:23:31.656 --> 00:23:32.876 A:middle
debugger command action with an

00:23:32.876 --> 00:23:34.676 A:middle
expression and I think what we

00:23:34.676 --> 00:23:36.406 A:middle
need is if attempts is greater

00:23:36.406 --> 00:23:38.516 A:middle
and equal to max attempts, then

00:23:38.516 --> 00:23:39.826 A:middle
we change the game state to

00:23:39.826 --> 00:23:41.826 A:middle
ended and make this order

00:23:41.826 --> 00:23:42.356 A:middle
continuing.

00:23:42.996 --> 00:23:44.406 A:middle
So now it's easy just to test if

00:23:44.406 --> 00:23:45.666 A:middle
that actually fixes the problem

00:23:45.666 --> 00:23:46.616 A:middle
by pressing continue.

00:23:46.876 --> 00:23:48.136 A:middle
Execution will continue through

00:23:48.136 --> 00:23:48.816 A:middle
this breakpoint.

00:23:49.116 --> 00:23:50.486 A:middle
Inject the code and we can see

00:23:50.546 --> 00:23:51.856 A:middle
that it does look like it fixes

00:23:51.856 --> 00:23:52.286 A:middle
the problem.

00:23:52.386 --> 00:23:54.166 A:middle
I'd like to verify that from the

00:23:54.166 --> 00:23:55.356 A:middle
start of the game and I can

00:23:55.356 --> 00:23:56.386 A:middle
quickly and easily do that by

00:23:56.386 --> 00:23:58.146 A:middle
clicking play again and rapidly

00:23:58.146 --> 00:23:59.526 A:middle
progressing through 10 attempts.

00:23:59.976 --> 00:24:01.186 A:middle
And at the tenth, we see that it

00:23:59.976 --> 00:24:01.186 A:middle
And at the tenth, we see that it

00:24:01.186 --> 00:24:02.566 A:middle
does indeed detect end-of-game

00:24:02.566 --> 00:24:03.586 A:middle
state, so it looks like that's

00:24:03.586 --> 00:24:04.846 A:middle
the fix we need.

00:24:05.516 --> 00:24:11.666 A:middle
[ Applause ]

00:24:12.166 --> 00:24:13.646 A:middle
And now, don't forget to apply

00:24:13.646 --> 00:24:14.326 A:middle
that to your code.

00:24:14.326 --> 00:24:16.276 A:middle
So I'm just copy that out, drag

00:24:16.306 --> 00:24:17.426 A:middle
the breakpoint to delete it.

00:24:17.426 --> 00:24:18.966 A:middle
And then I can paste that in and

00:24:18.966 --> 00:24:19.516 A:middle
that looks good.

00:24:20.396 --> 00:24:21.646 A:middle
So let's check that one off, and

00:24:21.646 --> 00:24:22.776 A:middle
we've only got one more left for

00:24:22.776 --> 00:24:24.326 A:middle
this section and that's the

00:24:24.326 --> 00:24:25.826 A:middle
layout of the attempt and score

00:24:25.826 --> 00:24:26.276 A:middle
labels.

00:24:26.726 --> 00:24:28.076 A:middle
Now, the layout of this

00:24:28.076 --> 00:24:29.406 A:middle
application has been left up to

00:24:29.406 --> 00:24:31.066 A:middle
the engineers, and as good

00:24:31.066 --> 00:24:32.516 A:middle
engineers do, we've found an

00:24:32.516 --> 00:24:34.116 A:middle
efficient location stuffed right

00:24:34.116 --> 00:24:35.136 A:middle
up in the top corners.

00:24:35.556 --> 00:24:37.126 A:middle
But the team decided that wasn't

00:24:37.126 --> 00:24:39.056 A:middle
very appropriate, so they've

00:24:39.056 --> 00:24:40.306 A:middle
sent it back and asked us to try

00:24:40.306 --> 00:24:40.616 A:middle
again.

00:24:40.956 --> 00:24:42.636 A:middle
So I'd like to mock up a new

00:24:42.636 --> 00:24:44.406 A:middle
layout for these score labels.

00:24:44.736 --> 00:24:45.866 A:middle
Now I could get out my graphical

00:24:45.866 --> 00:24:46.986 A:middle
application and start mocking it

00:24:46.986 --> 00:24:48.176 A:middle
up, but I'm an engineer and I

00:24:48.176 --> 00:24:49.236 A:middle
like to mock up using code.

00:24:49.236 --> 00:24:50.466 A:middle
In fact, I'm a debugger

00:24:50.466 --> 00:24:51.796 A:middle
engineer, so I like to mock up

00:24:51.796 --> 00:24:52.896 A:middle
using the debugger with a live

00:24:52.896 --> 00:24:54.026 A:middle
application and real data.

00:24:54.126 --> 00:24:55.006 A:middle
So let me show you how to do

00:24:55.006 --> 00:24:56.000 A:middle
that.

00:24:59.146 --> 00:25:01.226 A:middle
Let's navigate back and put

00:24:59.146 --> 00:25:01.226 A:middle
Let's navigate back and put

00:25:01.226 --> 00:25:02.796 A:middle
breakpoint in the jump function.

00:25:03.136 --> 00:25:04.686 A:middle
What we need to do is first find

00:25:04.686 --> 00:25:06.126 A:middle
a reference to a view that we

00:25:06.126 --> 00:25:07.796 A:middle
can play around with, so I'm

00:25:07.796 --> 00:25:09.466 A:middle
going to clear everything and

00:25:09.466 --> 00:25:10.946 A:middle
open that up and start a new

00:25:10.976 --> 00:25:11.216 A:middle
jump.

00:25:11.216 --> 00:25:12.446 A:middle
So we're paused in the debugger

00:25:13.006 --> 00:25:14.656 A:middle
in this jump function within the

00:25:14.656 --> 00:25:15.336 A:middle
view controller.

00:25:16.016 --> 00:25:17.666 A:middle
So if you have of course a

00:25:17.666 --> 00:25:18.906 A:middle
property or an outlet for a

00:25:18.906 --> 00:25:19.686 A:middle
view, then that's a good

00:25:19.686 --> 00:25:20.176 A:middle
reference.

00:25:20.446 --> 00:25:21.596 A:middle
But if you don't, then you need

00:25:21.596 --> 00:25:22.536 A:middle
to get the memory address of a

00:25:22.536 --> 00:25:22.756 A:middle
view.

00:25:22.756 --> 00:25:24.176 A:middle
So let me show you some ways to

00:25:24.176 --> 00:25:25.286 A:middle
find the memory address and how

00:25:25.286 --> 00:25:26.946 A:middle
to manipulate a view only by

00:25:26.946 --> 00:25:27.636 A:middle
memory address.

00:25:28.206 --> 00:25:30.396 A:middle
Well, like we said before, the

00:25:30.396 --> 00:25:31.686 A:middle
debug description contains a

00:25:31.686 --> 00:25:32.616 A:middle
custom description.

00:25:32.986 --> 00:25:33.826 A:middle
So looking at the view

00:25:33.826 --> 00:25:35.036 A:middle
controller's view, we can see

00:25:35.036 --> 00:25:36.386 A:middle
the default debug description

00:25:36.386 --> 00:25:38.426 A:middle
for a UI view has the class of

00:25:38.426 --> 00:25:39.476 A:middle
the view and then the memory

00:25:39.476 --> 00:25:39.906 A:middle
address.

00:25:40.216 --> 00:25:41.606 A:middle
So one way is to just get the

00:25:41.606 --> 00:25:44.676 A:middle
debug description for objects.

00:25:45.176 --> 00:25:46.476 A:middle
So that's easy to get it for

00:25:46.476 --> 00:25:47.686 A:middle
this one because there's a

00:25:47.686 --> 00:25:48.456 A:middle
property for it.

00:25:48.746 --> 00:25:50.306 A:middle
But how about all of the views

00:25:50.346 --> 00:25:51.976 A:middle
below this view controller's

00:25:51.976 --> 00:25:52.166 A:middle
view?

00:25:52.806 --> 00:25:53.506 A:middle
Well, we need to look at the

00:25:53.506 --> 00:25:55.256 A:middle
view hierarchy and one way to do

00:25:55.256 --> 00:25:57.126 A:middle
that is to use this button here,

00:25:57.126 --> 00:25:59.136 A:middle
which invokes Xcode's visual

00:25:59.136 --> 00:25:59.606 A:middle
view debugger.

00:25:59.676 --> 00:26:01.136 A:middle
It will snapshot the hierarchy

00:25:59.676 --> 00:26:01.136 A:middle
It will snapshot the hierarchy

00:26:01.136 --> 00:26:03.216 A:middle
and give you a 3D exploded view,

00:26:03.216 --> 00:26:04.446 A:middle
and you can use that to inspect

00:26:04.536 --> 00:26:05.166 A:middle
views that way.

00:26:05.676 --> 00:26:06.706 A:middle
Sebastian's going to talk more

00:26:06.706 --> 00:26:07.806 A:middle
about that in a few minutes, so

00:26:07.806 --> 00:26:08.816 A:middle
let me show you an alternative

00:26:08.816 --> 00:26:10.616 A:middle
way, which is good for simpler

00:26:10.616 --> 00:26:13.126 A:middle
hierarchies and keeps you in the

00:26:13.126 --> 00:26:13.846 A:middle
debug console.

00:26:13.976 --> 00:26:15.936 A:middle
And that's using a debug

00:26:16.006 --> 00:26:17.846 A:middle
function on UI view called

00:26:17.846 --> 00:26:18.886 A:middle
recursive description.

00:26:20.296 --> 00:26:21.716 A:middle
So we should be able to call po

00:26:21.716 --> 00:26:23.726 A:middle
self.view recursive description.

00:26:24.806 --> 00:26:25.716 A:middle
However, that doesn't work.

00:26:26.136 --> 00:26:26.816 A:middle
Why is that?

00:26:27.536 --> 00:26:29.066 A:middle
Well, recursive description only

00:26:29.066 --> 00:26:30.376 A:middle
exists for debugging purposes.

00:26:30.506 --> 00:26:31.866 A:middle
It's not part of the public API

00:26:32.286 --> 00:26:33.656 A:middle
and so isn't [inaudible] to

00:26:34.386 --> 00:26:35.146 A:middle
Swift.

00:26:35.546 --> 00:26:37.066 A:middle
And Swift is a strict language

00:26:37.066 --> 00:26:37.886 A:middle
and doesn't allow you to call

00:26:37.886 --> 00:26:38.916 A:middle
functions that haven't been

00:26:38.916 --> 00:26:39.686 A:middle
strictly defined.

00:26:40.536 --> 00:26:41.366 A:middle
However, Objective-C [inaudible]

00:26:41.366 --> 00:26:43.426 A:middle
code can run wild and free in

00:26:43.426 --> 00:26:44.776 A:middle
Objective-C world and you can

00:26:44.776 --> 00:26:45.416 A:middle
pretty much do whatever you

00:26:45.416 --> 00:26:45.646 A:middle
like.

00:26:45.646 --> 00:26:46.746 A:middle
I mean it's a dynamic language

00:26:46.746 --> 00:26:48.276 A:middle
so you can call functions like

00:26:48.276 --> 00:26:48.526 A:middle
this.

00:26:48.846 --> 00:26:51.086 A:middle
So what we need to do is to tell

00:26:51.086 --> 00:26:52.496 A:middle
the debugger to evaluate this

00:26:52.496 --> 00:26:54.986 A:middle
expression in an Objective-C

00:26:55.096 --> 00:26:55.666 A:middle
syntax.

00:26:55.706 --> 00:26:57.166 A:middle
And the way to do that is to use

00:26:57.166 --> 00:26:59.146 A:middle
expression with the option - l

00:26:59.146 --> 00:26:59.726 A:middle
objc.

00:26:59.726 --> 00:27:02.026 A:middle
That tells expression that

00:26:59.726 --> 00:27:02.026 A:middle
That tells expression that

00:27:02.026 --> 00:27:02.706 A:middle
you're about to give it

00:27:02.876 --> 00:27:04.126 A:middle
Objective-C code even though

00:27:04.126 --> 00:27:05.056 A:middle
you're in a Swift frame.

00:27:05.346 --> 00:27:08.226 A:middle
And we'll give it -O, tell it

00:27:08.296 --> 00:27:09.546 A:middle
that we also want the debug

00:27:09.546 --> 00:27:10.956 A:middle
description the same as po would

00:27:10.956 --> 00:27:12.976 A:middle
do and -- to indicate that there

00:27:12.976 --> 00:27:14.156 A:middle
are no more options.

00:27:14.946 --> 00:27:16.406 A:middle
The rest of the line is just raw

00:27:16.406 --> 00:27:17.116 A:middle
expression input.

00:27:17.496 --> 00:27:18.846 A:middle
So we should be able to then

00:27:18.846 --> 00:27:20.996 A:middle
give it the Objective-C format

00:27:20.996 --> 00:27:22.056 A:middle
of this method call.

00:27:22.906 --> 00:27:23.786 A:middle
Unfortunately, that doesn't

00:27:23.786 --> 00:27:25.056 A:middle
quite work and the reason for

00:27:25.056 --> 00:27:26.126 A:middle
that is that expression will

00:27:26.126 --> 00:27:27.366 A:middle
create a temporary expression

00:27:27.366 --> 00:27:28.726 A:middle
context for the Objective-C

00:27:29.016 --> 00:27:30.446 A:middle
compilation, and it doesn't

00:27:30.446 --> 00:27:31.596 A:middle
inherit all the variables from

00:27:31.596 --> 00:27:32.216 A:middle
the Swift frame.

00:27:32.616 --> 00:27:33.486 A:middle
So there's a way around that,

00:27:33.486 --> 00:27:33.686 A:middle
though.

00:27:34.506 --> 00:27:35.566 A:middle
If we just put [inaudible] view

00:27:35.566 --> 00:27:36.216 A:middle
in back ticks.

00:27:36.466 --> 00:27:37.536 A:middle
Back ticks is like a [inaudible]

00:27:37.536 --> 00:27:39.626 A:middle
step that says first, evaluate

00:27:39.626 --> 00:27:40.496 A:middle
the contents of this in the

00:27:40.546 --> 00:27:41.806 A:middle
current frame and insert the

00:27:41.806 --> 00:27:43.026 A:middle
result, and then we can evaluate

00:27:43.026 --> 00:27:43.486 A:middle
the rest.

00:27:43.526 --> 00:27:44.606 A:middle
And now we get the recursive

00:27:44.606 --> 00:27:44.956 A:middle
description.

00:27:45.516 --> 00:27:51.586 A:middle
[ Applause ]

00:27:52.086 --> 00:27:53.246 A:middle
So using this, we can see all

00:27:53.246 --> 00:27:54.346 A:middle
the debug descriptions for all

00:27:54.346 --> 00:27:54.706 A:middle
the views.

00:27:54.866 --> 00:27:56.376 A:middle
And I'm interested in the

00:27:56.376 --> 00:27:57.606 A:middle
scoreboard views, which host

00:27:57.606 --> 00:27:59.196 A:middle
these labels, so we can find the

00:27:59.196 --> 00:28:00.346 A:middle
memory address for one of those.

00:27:59.196 --> 00:28:00.346 A:middle
memory address for one of those.

00:28:00.406 --> 00:28:01.536 A:middle
And now we can use [inaudible]

00:28:01.936 --> 00:28:04.036 A:middle
po memory address, which you

00:28:04.036 --> 00:28:05.116 A:middle
might be familiar with if you're

00:28:05.116 --> 00:28:06.176 A:middle
an Objective-C developer.

00:28:06.526 --> 00:28:07.376 A:middle
Well, that doesn't work and

00:28:07.496 --> 00:28:08.696 A:middle
that's because Swift doesn't

00:28:08.696 --> 00:28:12.046 A:middle
treat numbers as pointers and

00:28:12.046 --> 00:28:12.936 A:middle
de-reference them for you.

00:28:13.236 --> 00:28:14.326 A:middle
So once again, we need to do

00:28:14.326 --> 00:28:16.026 A:middle
this from an Objective-C

00:28:16.026 --> 00:28:16.616 A:middle
context.

00:28:16.986 --> 00:28:18.036 A:middle
So we could do the same thing we

00:28:18.036 --> 00:28:19.566 A:middle
did before, but I find this to

00:28:19.566 --> 00:28:21.296 A:middle
be so convenient that I like to

00:28:21.496 --> 00:28:23.926 A:middle
shortcut this down to just a

00:28:23.926 --> 00:28:25.676 A:middle
simple short command.

00:28:26.136 --> 00:28:27.726 A:middle
So I'm going to do that by using

00:28:27.796 --> 00:28:29.466 A:middle
command alias, and I'm going to

00:28:29.466 --> 00:28:30.616 A:middle
call that command poc.

00:28:31.216 --> 00:28:32.076 A:middle
So now that I've created an

00:28:32.076 --> 00:28:33.416 A:middle
alias, I can simply poc that

00:28:33.416 --> 00:28:34.756 A:middle
memory address and see the debug

00:28:34.756 --> 00:28:35.886 A:middle
description for that object.

00:28:36.326 --> 00:28:37.856 A:middle
I'd like to show you another way

00:28:38.106 --> 00:28:40.396 A:middle
to look at the description of an

00:28:40.396 --> 00:28:41.366 A:middle
object if you only have its

00:28:41.366 --> 00:28:42.066 A:middle
memory address.

00:28:42.396 --> 00:28:43.886 A:middle
And in Swift, you can use a

00:28:43.886 --> 00:28:45.596 A:middle
function called unsafe bit cast.

00:28:46.436 --> 00:28:47.416 A:middle
Give it the memory address and

00:28:47.416 --> 00:28:48.546 A:middle
then it's unsafe because it's up

00:28:48.576 --> 00:28:50.016 A:middle
to you to provide the correct

00:28:50.496 --> 00:28:52.416 A:middle
type, so I'll give it scoreboard

00:28:52.416 --> 00:28:53.096 A:middle
view.self.

00:28:53.736 --> 00:28:55.436 A:middle
And now we see we can use unsafe

00:28:55.496 --> 00:28:57.146 A:middle
bit cast to see the debug

00:28:57.146 --> 00:28:58.146 A:middle
description for an object.

00:28:58.876 --> 00:29:00.366 A:middle
Now the great thing about unsafe

00:28:58.876 --> 00:29:00.366 A:middle
Now the great thing about unsafe

00:29:00.456 --> 00:29:01.926 A:middle
bit cast is that it returns a

00:29:01.926 --> 00:29:04.026 A:middle
typed result, so we can call our

00:29:04.026 --> 00:29:05.266 A:middle
functions and property names on

00:29:05.296 --> 00:29:06.276 A:middle
it such as .frame.

00:29:06.856 --> 00:29:08.036 A:middle
And in this case, I'd like to

00:29:08.036 --> 00:29:09.936 A:middle
inspect a center point and then

00:29:09.936 --> 00:29:11.026 A:middle
modify that center point.

00:29:11.026 --> 00:29:12.216 A:middle
Let's change it to 300

00:29:12.896 --> 00:29:14.276 A:middle
[inaudible] we can see it has

00:29:14.276 --> 00:29:17.076 A:middle
changed to 300, but the view in

00:29:17.076 --> 00:29:18.176 A:middle
the simulator hasn't moved.

00:29:18.376 --> 00:29:18.876 A:middle
Well, why not?

00:29:19.756 --> 00:29:20.526 A:middle
Well, we're paused in the

00:29:20.526 --> 00:29:22.126 A:middle
debugger, so cronomation isn't

00:29:22.126 --> 00:29:23.606 A:middle
currently applying any view

00:29:23.606 --> 00:29:24.776 A:middle
module changes to the screen's

00:29:24.776 --> 00:29:25.156 A:middle
frame buffer.

00:29:25.156 --> 00:29:26.976 A:middle
But we can ask cronomation to do

00:29:26.976 --> 00:29:28.566 A:middle
that for us, just use the

00:29:28.566 --> 00:29:31.526 A:middle
expression ca transaction.flush

00:29:32.016 --> 00:29:34.486 A:middle
and that tells cronomation to

00:29:34.486 --> 00:29:35.606 A:middle
update the screen's frame

00:29:35.606 --> 00:29:35.836 A:middle
buffer.

00:29:36.516 --> 00:29:41.616 A:middle
[ Applause ]

00:29:42.116 --> 00:29:43.436 A:middle
So now, I can just use these two

00:29:43.436 --> 00:29:45.506 A:middle
lines to fix the new positions

00:29:45.596 --> 00:29:46.996 A:middle
and continue flashing and we can

00:29:46.996 --> 00:29:47.516 A:middle
move [inaudible] around.

00:29:48.036 --> 00:29:48.986 A:middle
And in fact, I find this to be

00:29:48.986 --> 00:29:50.046 A:middle
so convenient that I kind of

00:29:50.046 --> 00:29:51.146 A:middle
wanted to wrap all this up in

00:29:51.146 --> 00:29:52.496 A:middle
just a single command to nudge

00:29:52.496 --> 00:29:53.816 A:middle
views around, and so that's what

00:29:53.816 --> 00:29:54.046 A:middle
I did.

00:29:54.726 --> 00:29:55.336 A:middle
Let me show you that.

00:29:55.336 --> 00:29:57.296 A:middle
I'm going to switch to terminal

00:29:57.656 --> 00:29:58.916 A:middle
and open a Python file.

00:29:59.916 --> 00:30:00.926 A:middle
Why a Python file?

00:29:59.916 --> 00:30:00.926 A:middle
Why a Python file?

00:30:01.416 --> 00:30:03.496 A:middle
Well, LLDB is scriptable using

00:30:03.496 --> 00:30:04.536 A:middle
Python, where you get full

00:30:04.536 --> 00:30:06.256 A:middle
access to the LLDB API.

00:30:06.936 --> 00:30:09.436 A:middle
So I've created an LLDB Python

00:30:09.436 --> 00:30:11.176 A:middle
script to create a nudge

00:30:11.176 --> 00:30:12.516 A:middle
command, which takes an x

00:30:12.516 --> 00:30:13.676 A:middle
offset, a y offset and a view

00:30:13.676 --> 00:30:15.156 A:middle
expression, and you can use that

00:30:15.156 --> 00:30:16.186 A:middle
to nudge views around while

00:30:16.236 --> 00:30:16.976 A:middle
paused in the debugger.

00:30:16.976 --> 00:30:18.436 A:middle
Now, it might look like a sort

00:30:18.436 --> 00:30:19.846 A:middle
of long script but most of that

00:30:19.846 --> 00:30:20.876 A:middle
is argument pausing.

00:30:21.366 --> 00:30:22.716 A:middle
The core of it, in the middle,

00:30:22.806 --> 00:30:24.516 A:middle
is just calling out to the

00:30:24.516 --> 00:30:25.726 A:middle
expressions we would call in

00:30:25.726 --> 00:30:26.186 A:middle
manually.

00:30:26.786 --> 00:30:27.956 A:middle
We don't have time unfortunately

00:30:27.956 --> 00:30:28.986 A:middle
to go into detail in this

00:30:28.986 --> 00:30:29.276 A:middle
script.

00:30:29.276 --> 00:30:30.206 A:middle
But we're going to make this

00:30:30.206 --> 00:30:31.116 A:middle
available for you guys to

00:30:31.116 --> 00:30:32.406 A:middle
download, so you can see how it

00:30:32.406 --> 00:30:33.556 A:middle
works and use it as the basis

00:30:33.556 --> 00:30:34.576 A:middle
for your custom debugging

00:30:34.576 --> 00:30:35.096 A:middle
commands.

00:30:36.376 --> 00:30:39.506 A:middle
Let me show you how to enable a

00:30:39.506 --> 00:30:40.376 A:middle
script like this.

00:30:40.666 --> 00:30:42.606 A:middle
Just edit your .lldb in it file

00:30:43.266 --> 00:30:45.846 A:middle
in your home directory and add a

00:30:45.846 --> 00:30:47.196 A:middle
line command script import.

00:30:47.736 --> 00:30:49.056 A:middle
I'd also like to add some of the

00:30:49.056 --> 00:30:50.566 A:middle
aliases that I find convenient,

00:30:50.786 --> 00:30:52.426 A:middle
such as the poc alias I created

00:30:52.426 --> 00:30:53.866 A:middle
before, and an alias for

00:30:53.866 --> 00:30:54.846 A:middle
flushing the transaction.

00:30:55.086 --> 00:30:56.000 A:middle
I think I'll remember this one.

00:31:00.156 --> 00:31:01.326 A:middle
I'm going to copy command script

00:31:01.326 --> 00:31:02.896 A:middle
import so we can just paste it

00:31:02.896 --> 00:31:04.886 A:middle
in to the debug session to save

00:31:04.886 --> 00:31:06.026 A:middle
us restarting that session.

00:31:06.266 --> 00:31:07.406 A:middle
And now we have a command called

00:31:07.406 --> 00:31:07.776 A:middle
nudge.

00:31:08.256 --> 00:31:10.586 A:middle
So I can, let's say, nudge zero

00:31:10.626 --> 00:31:11.986 A:middle
horizontally, minus five

00:31:11.986 --> 00:31:13.606 A:middle
vertically, give it the memory

00:31:13.606 --> 00:31:15.516 A:middle
address of that view and start

00:31:15.516 --> 00:31:17.076 A:middle
just nudging it around in the

00:31:17.376 --> 00:31:17.886 A:middle
simulator.

00:31:18.516 --> 00:31:26.306 A:middle
[ Applause ]

00:31:26.806 --> 00:31:28.176 A:middle
The great thing about LLDB is if

00:31:28.176 --> 00:31:29.746 A:middle
you just hit enter on a blank

00:31:29.746 --> 00:31:30.856 A:middle
line, it repeats the previous

00:31:30.856 --> 00:31:32.006 A:middle
line, so it's great for nudging.

00:31:32.736 --> 00:31:34.446 A:middle
And I can nudge it across to the

00:31:34.446 --> 00:31:35.776 A:middle
right a bit, just to get it

00:31:35.776 --> 00:31:36.136 A:middle
right.

00:31:36.576 --> 00:31:37.966 A:middle
And then let's do the other

00:31:37.966 --> 00:31:38.326 A:middle
view.

00:31:38.326 --> 00:31:41.346 A:middle
We can give it any view

00:31:41.346 --> 00:31:43.096 A:middle
expression, say the attempts

00:31:43.096 --> 00:31:44.026 A:middle
view down to here.

00:31:44.446 --> 00:31:45.606 A:middle
The other feature of nudge is

00:31:45.606 --> 00:31:46.566 A:middle
once you've given it a view

00:31:46.566 --> 00:31:47.826 A:middle
expression, you don't have to

00:31:47.856 --> 00:31:48.816 A:middle
repeat that expression.

00:31:49.436 --> 00:31:51.756 A:middle
It remembers that and applies it

00:31:51.756 --> 00:31:53.886 A:middle
to the same view that you've

00:31:53.886 --> 00:31:54.686 A:middle
specified previously.

00:31:54.686 --> 00:31:55.546 A:middle
So something like that looks

00:31:55.546 --> 00:31:55.866 A:middle
fine.

00:31:56.136 --> 00:31:57.086 A:middle
It's a better layout than we had

00:31:57.086 --> 00:31:57.486 A:middle
before.

00:31:57.666 --> 00:31:59.386 A:middle
And what I can do now is take

00:31:59.806 --> 00:32:01.596 A:middle
the information provided by

00:31:59.806 --> 00:32:01.596 A:middle
the information provided by

00:32:01.596 --> 00:32:03.186 A:middle
nudge, such as the total offset

00:32:03.186 --> 00:32:04.746 A:middle
applied to that view relative to

00:32:04.746 --> 00:32:06.156 A:middle
its original center point, and

00:32:06.156 --> 00:32:07.116 A:middle
then your frame value.

00:32:07.456 --> 00:32:09.026 A:middle
Back to my code and modify my

00:32:09.026 --> 00:32:10.586 A:middle
layout code or my auto-layout

00:32:10.586 --> 00:32:12.086 A:middle
constraints, and I've easily

00:32:12.086 --> 00:32:13.676 A:middle
mocked up a new layout for my

00:32:13.676 --> 00:32:14.026 A:middle
scene.

00:32:14.616 --> 00:32:17.406 A:middle
Now the last thing to do --

00:32:17.736 --> 00:32:19.396 A:middle
well, firstly, don't forget to

00:32:19.396 --> 00:32:21.366 A:middle
check off debug, very important.

00:32:22.006 --> 00:32:23.786 A:middle
And then the last thing to do

00:32:23.786 --> 00:32:25.506 A:middle
before restarting or recompiling

00:32:25.506 --> 00:32:27.516 A:middle
and rerunning is to disable or

00:32:27.516 --> 00:32:29.466 A:middle
remove any breakpoints that are

00:32:29.466 --> 00:32:30.566 A:middle
injecting expressions because

00:32:30.566 --> 00:32:31.606 A:middle
you don't want those lines to be

00:32:31.606 --> 00:32:32.516 A:middle
executed twice.

00:32:33.266 --> 00:32:34.676 A:middle
Simply selecting them or a group

00:32:34.676 --> 00:32:35.686 A:middle
of them and hitting delete is a

00:32:35.686 --> 00:32:36.816 A:middle
quick way to delete those.

00:32:37.546 --> 00:32:38.576 A:middle
And so those are some of the

00:32:38.576 --> 00:32:40.276 A:middle
debugging techniques that I like

00:32:40.276 --> 00:32:41.596 A:middle
to use to enhance my debugging

00:32:41.596 --> 00:32:42.276 A:middle
workflows.

00:32:43.086 --> 00:32:45.346 A:middle
Notice how we were able to

00:32:45.346 --> 00:32:48.196 A:middle
diagnose and fix all four bugs

00:32:48.196 --> 00:32:50.166 A:middle
without having to recompile or

00:32:50.166 --> 00:32:50.626 A:middle
rerun.

00:32:51.336 --> 00:32:53.106 A:middle
This can be a huge timesaver,

00:32:53.106 --> 00:32:54.946 A:middle
especially for complex projects

00:32:55.236 --> 00:32:57.226 A:middle
and can be crucial when trying

00:32:57.226 --> 00:32:59.316 A:middle
to solve hard to reproduce bugs.

00:32:59.756 --> 00:33:01.526 A:middle
So thanks for [inaudible] I hope

00:32:59.756 --> 00:33:01.526 A:middle
So thanks for [inaudible] I hope

00:33:01.616 --> 00:33:02.616 A:middle
you enjoyed that and can use

00:33:02.616 --> 00:33:03.536 A:middle
these techniques in your

00:33:03.536 --> 00:33:04.536 A:middle
debugging sessions.

00:33:05.516 --> 00:33:14.966 A:middle
[ Applause ]

00:33:15.466 --> 00:33:17.396 A:middle
I'd just like to quickly recap

00:33:17.396 --> 00:33:19.556 A:middle
all of the features and tricks

00:33:19.556 --> 00:33:21.676 A:middle
that we went over during that

00:33:21.676 --> 00:33:22.416 A:middle
debug session.

00:33:22.806 --> 00:33:24.486 A:middle
So firstly, we looked at how we

00:33:24.486 --> 00:33:25.926 A:middle
can use Xcode behaviors to

00:33:25.926 --> 00:33:27.246 A:middle
dedicate attempt to debugging

00:33:27.586 --> 00:33:29.196 A:middle
and how to use LLDB expressions

00:33:29.196 --> 00:33:30.416 A:middle
to modify program state.

00:33:31.076 --> 00:33:32.526 A:middle
We can use auto-continuing

00:33:32.526 --> 00:33:33.486 A:middle
breakpoints with debugger

00:33:33.486 --> 00:33:35.136 A:middle
commands to inject code live,

00:33:35.696 --> 00:33:37.246 A:middle
and we can create dependent

00:33:37.246 --> 00:33:38.746 A:middle
breakpoint configurations using

00:33:38.746 --> 00:33:40.696 A:middle
breakpoint set one shot as a

00:33:40.696 --> 00:33:42.056 A:middle
debugger command action for

00:33:42.056 --> 00:33:42.736 A:middle
another breakpoint.

00:33:43.536 --> 00:33:45.286 A:middle
Even when in assembly frames, we

00:33:45.286 --> 00:33:47.036 A:middle
can easily inspect the function

00:33:47.036 --> 00:33:48.626 A:middle
arguments using po dollar arg

00:33:48.626 --> 00:33:49.766 A:middle
one, dollar arg two, et cetera,

00:33:50.256 --> 00:33:52.476 A:middle
and we can skip lines of code by

00:33:52.476 --> 00:33:53.726 A:middle
dragging the instruction pointer

00:33:53.906 --> 00:33:55.206 A:middle
or using the command thread

00:33:55.206 --> 00:33:55.446 A:middle
jump.

00:33:56.336 --> 00:33:57.736 A:middle
We can request that the debugger

00:33:57.736 --> 00:33:58.746 A:middle
pause when a variable is

00:33:58.746 --> 00:34:01.586 A:middle
modified using watchpoints, and

00:33:58.746 --> 00:34:01.586 A:middle
modified using watchpoints, and

00:34:01.756 --> 00:34:03.706 A:middle
we can even evaluate Objective-C

00:34:03.706 --> 00:34:05.336 A:middle
code in Swift frames using

00:34:05.336 --> 00:34:06.686 A:middle
expression -l objc.

00:34:06.816 --> 00:34:10.525 A:middle
We can request that view changes

00:34:10.525 --> 00:34:11.466 A:middle
are flashed directly to the

00:34:11.466 --> 00:34:12.806 A:middle
screen, even while paused in the

00:34:12.806 --> 00:34:14.166 A:middle
debugger, using the expression

00:34:14.216 --> 00:34:15.366 A:middle
ca transition flush.

00:34:16.136 --> 00:34:18.516 A:middle
And you can add custom LLDB

00:34:18.516 --> 00:34:20.116 A:middle
commands, either aliasing

00:34:20.246 --> 00:34:21.596 A:middle
commonly used commands to

00:34:21.596 --> 00:34:23.466 A:middle
correct shortcuts or by

00:34:23.466 --> 00:34:25.196 A:middle
completely customizing and

00:34:25.196 --> 00:34:26.886 A:middle
creating your own command using

00:34:26.886 --> 00:34:28.356 A:middle
LLDB's Python scripting.

00:34:28.775 --> 00:34:29.936 A:middle
And don't forget to check out

00:34:29.936 --> 00:34:30.815 A:middle
our session website.

00:34:30.815 --> 00:34:32.076 A:middle
We'll be posting that nudge

00:34:32.076 --> 00:34:33.436 A:middle
script soon, so you can download

00:34:33.436 --> 00:34:34.746 A:middle
it, check it out, and use it as

00:34:34.746 --> 00:34:36.005 A:middle
the basis for your commands.

00:34:37.956 --> 00:34:39.116 A:middle
There's one more thing I wanted

00:34:39.116 --> 00:34:40.516 A:middle
to cover with you guys and

00:34:40.516 --> 00:34:42.306 A:middle
that's just the current LLDB

00:34:42.306 --> 00:34:43.076 A:middle
print commands.

00:34:43.476 --> 00:34:44.766 A:middle
So you might be familiar with

00:34:44.766 --> 00:34:44.833 A:middle
po.

00:34:44.833 --> 00:34:45.746 A:middle
We used it a lot during the

00:34:45.746 --> 00:34:47.646 A:middle
demo, and we saw that po

00:34:47.646 --> 00:34:49.266 A:middle
requests the debug description

00:34:49.266 --> 00:34:50.346 A:middle
of an object, and you can

00:34:50.346 --> 00:34:51.036 A:middle
customize that.

00:34:51.036 --> 00:34:52.696 A:middle
And that's because po is simply

00:34:52.696 --> 00:34:54.216 A:middle
an alias for expression --

00:34:54.216 --> 00:34:58.156 A:middle
object description or expression

00:34:58.156 --> 00:35:00.866 A:middle
-O, compared with the p

00:34:58.156 --> 00:35:00.866 A:middle
-O, compared with the p

00:35:00.866 --> 00:35:02.046 A:middle
commands, which is simply an

00:35:02.046 --> 00:35:03.006 A:middle
alias for expression.

00:35:03.476 --> 00:35:05.946 A:middle
And it uses LLDB's built-in

00:35:05.946 --> 00:35:07.116 A:middle
formatters to show a

00:35:07.116 --> 00:35:08.716 A:middle
representation of that object.

00:35:10.126 --> 00:35:10.976 A:middle
The third command that's

00:35:10.976 --> 00:35:12.836 A:middle
important to know is frame

00:35:12.836 --> 00:35:13.296 A:middle
variable.

00:35:13.696 --> 00:35:14.916 A:middle
It differs from the previous two

00:35:14.916 --> 00:35:15.736 A:middle
in that it doesn't have to

00:35:15.736 --> 00:35:16.886 A:middle
compile and evaluate an

00:35:16.886 --> 00:35:17.756 A:middle
expression at all.

00:35:17.986 --> 00:35:19.446 A:middle
It simply reads the value of the

00:35:19.446 --> 00:35:21.066 A:middle
name variable directly from

00:35:21.066 --> 00:35:22.686 A:middle
memory and then uses LLDB's

00:35:22.686 --> 00:35:23.586 A:middle
built-in formatters.

00:35:24.216 --> 00:35:25.196 A:middle
So the choice of which command

00:35:25.196 --> 00:35:26.266 A:middle
to use is more personal

00:35:26.266 --> 00:35:27.336 A:middle
preference and the type of

00:35:27.426 --> 00:35:28.436 A:middle
information you want to see

00:35:28.436 --> 00:35:29.076 A:middle
while debugging.

00:35:29.636 --> 00:35:30.876 A:middle
But it's important to remember

00:35:30.876 --> 00:35:31.746 A:middle
that if you ever end up in a

00:35:31.746 --> 00:35:33.986 A:middle
situation where expressions are

00:35:33.986 --> 00:35:36.356 A:middle
failing or so po and p may not

00:35:36.356 --> 00:35:38.036 A:middle
be working for you, if you need

00:35:38.036 --> 00:35:39.006 A:middle
to inspect a variable in the

00:35:39.006 --> 00:35:40.066 A:middle
current frame, then frame

00:35:40.066 --> 00:35:40.906 A:middle
variable should still work for

00:35:40.946 --> 00:35:41.000 A:middle
you.

00:35:44.176 --> 00:35:45.436 A:middle
And with that, I'd like to hand

00:35:45.436 --> 00:35:47.246 A:middle
over to Sebastian, who's going

00:35:47.246 --> 00:35:48.596 A:middle
to tell you about some advanced

00:35:48.596 --> 00:35:49.536 A:middle
view debugging techniques.

00:35:49.536 --> 00:35:49.866 A:middle
Thank you.

00:35:50.516 --> 00:35:55.026 A:middle
[ Applause ]

00:35:55.526 --> 00:35:56.076 A:middle
&gt;&gt; Thank you, Chris.

00:35:58.476 --> 00:36:01.646 A:middle
I'm excited to show you tips and

00:35:58.476 --> 00:36:01.646 A:middle
I'm excited to show you tips and

00:36:01.646 --> 00:36:02.976 A:middle
tricks how to get the most out

00:36:02.976 --> 00:36:03.956 A:middle
of Xcode's view debugger.

00:36:04.226 --> 00:36:05.406 A:middle
And we'll also take a look at

00:36:05.406 --> 00:36:07.506 A:middle
the enhancements we made for

00:36:07.506 --> 00:36:09.266 A:middle
Xcode 10 to provide a great

00:36:09.266 --> 00:36:10.676 A:middle
debugging experience when you

00:36:10.676 --> 00:36:12.696 A:middle
adopt a dark look in macOS

00:36:12.696 --> 00:36:12.763 A:middle
[inaudible].

00:36:12.763 --> 00:36:16.466 A:middle
And we'll take a look at this in

00:36:16.466 --> 00:36:16.756 A:middle
a demo.

00:36:17.696 --> 00:36:19.076 A:middle
So let me switch to the demo

00:36:19.076 --> 00:36:21.826 A:middle
machine, and I'll be using the

00:36:21.896 --> 00:36:23.496 A:middle
same project that Chris has been

00:36:23.496 --> 00:36:24.706 A:middle
using and you already saw that

00:36:24.706 --> 00:36:26.476 A:middle
there are two more bugs we have

00:36:26.526 --> 00:36:26.956 A:middle
to solve.

00:36:27.046 --> 00:36:30.596 A:middle
However, I'm not going to be

00:36:30.596 --> 00:36:33.036 A:middle
using the iOS App, I'm going to

00:36:33.036 --> 00:36:33.756 A:middle
be using the [inaudible].

00:36:34.296 --> 00:36:36.446 A:middle
So we can see the Mac version of

00:36:36.446 --> 00:36:38.296 A:middle
our Solar System app here, we

00:36:38.296 --> 00:36:39.316 A:middle
can see that looks pretty good

00:36:39.316 --> 00:36:41.736 A:middle
in dark mode but there are two

00:36:41.736 --> 00:36:42.606 A:middle
bugs that we have to solve

00:36:42.636 --> 00:36:42.856 A:middle
today.

00:36:43.426 --> 00:36:45.536 A:middle
First of all, the planet image

00:36:45.536 --> 00:36:46.776 A:middle
is not centered horizontally

00:36:46.776 --> 00:36:48.586 A:middle
correctly and that is a very

00:36:48.586 --> 00:36:49.206 A:middle
obvious bug.

00:36:49.446 --> 00:36:50.376 A:middle
You can see on the right-hand

00:36:50.376 --> 00:36:52.526 A:middle
side this Earth image is shifted

00:36:52.526 --> 00:36:54.686 A:middle
to the right-hand side, so we'll

00:36:54.686 --> 00:36:55.676 A:middle
take a look at this problem.

00:36:55.946 --> 00:36:57.506 A:middle
And the second bug is that the

00:36:57.506 --> 00:36:59.666 A:middle
description in a popover is not

00:36:59.696 --> 00:37:00.996 A:middle
readable in dark mode.

00:36:59.696 --> 00:37:00.996 A:middle
readable in dark mode.

00:37:01.226 --> 00:37:02.476 A:middle
Let me show you what that is

00:37:02.476 --> 00:37:03.066 A:middle
referring to.

00:37:03.696 --> 00:37:05.526 A:middle
When I switch to this app, I can

00:37:05.526 --> 00:37:07.006 A:middle
bring up the orbital details

00:37:07.136 --> 00:37:08.376 A:middle
information in this popover

00:37:08.376 --> 00:37:08.676 A:middle
here.

00:37:09.186 --> 00:37:10.256 A:middle
You can see that the labels at

00:37:10.256 --> 00:37:11.426 A:middle
the top and nice and readable;

00:37:11.506 --> 00:37:13.416 A:middle
however, the label at the bottom

00:37:13.416 --> 00:37:14.436 A:middle
is so hard to read, I really

00:37:14.436 --> 00:37:15.666 A:middle
have to select the text to read

00:37:15.666 --> 00:37:15.806 A:middle
it.

00:37:16.616 --> 00:37:17.626 A:middle
So these are the two bugs we

00:37:17.626 --> 00:37:18.626 A:middle
have to take a look at.

00:37:19.196 --> 00:37:20.776 A:middle
Let me hide the to do list and

00:37:20.776 --> 00:37:21.436 A:middle
let's jump right in.

00:37:21.926 --> 00:37:23.536 A:middle
So what I want to do is I want

00:37:23.536 --> 00:37:24.676 A:middle
to capture the view hierarchy of

00:37:24.716 --> 00:37:26.086 A:middle
this application with Xcode,

00:37:26.686 --> 00:37:27.756 A:middle
then inspect it.

00:37:28.566 --> 00:37:29.846 A:middle
We'll find the problem and then

00:37:29.846 --> 00:37:31.026 A:middle
hopefully find the fix, so we

00:37:31.026 --> 00:37:31.746 A:middle
can all have a beer.

00:37:32.876 --> 00:37:34.306 A:middle
The problem is when I switch to

00:37:34.306 --> 00:37:35.386 A:middle
Xcode to capture the view

00:37:35.386 --> 00:37:37.276 A:middle
hierarchy, this popover will be

00:37:37.276 --> 00:37:39.336 A:middle
dismissed since the application

00:37:39.336 --> 00:37:40.756 A:middle
goes into the background, and we

00:37:40.756 --> 00:37:41.936 A:middle
won't be able to capture its

00:37:41.936 --> 00:37:42.396 A:middle
view hierarchy.

00:37:43.226 --> 00:37:44.296 A:middle
So what we have to do is we have

00:37:44.296 --> 00:37:46.056 A:middle
to capture the app in its active

00:37:46.056 --> 00:37:47.586 A:middle
state, and I will show you two

00:37:47.586 --> 00:37:48.526 A:middle
ways how to do that.

00:37:49.876 --> 00:37:50.856 A:middle
And you can see when I now

00:37:50.856 --> 00:37:52.306 A:middle
switch to Xcode how this popover

00:37:52.306 --> 00:37:53.086 A:middle
is being dismissed.

00:37:54.116 --> 00:37:55.486 A:middle
First of all, we can use the

00:37:55.486 --> 00:37:56.776 A:middle
touch bar, and I'll show you

00:37:56.776 --> 00:37:57.896 A:middle
what that looks like by bringing

00:37:57.896 --> 00:37:59.276 A:middle
up the touch bar simulator from

00:37:59.276 --> 00:38:00.306 A:middle
Xcode's window menu.

00:37:59.276 --> 00:38:00.306 A:middle
Xcode's window menu.

00:38:00.816 --> 00:38:01.846 A:middle
I'll switch back to the Solar

00:38:01.846 --> 00:38:02.816 A:middle
System app and bring up the

00:38:03.116 --> 00:38:03.776 A:middle
popover again.

00:38:04.126 --> 00:38:05.606 A:middle
And taking a look at the touch

00:38:05.606 --> 00:38:06.436 A:middle
bar, you can see that there's

00:38:06.516 --> 00:38:08.936 A:middle
this spray can icon, and when I

00:38:08.936 --> 00:38:10.056 A:middle
tap that on the touch bar, you

00:38:10.056 --> 00:38:12.096 A:middle
can see that there's a subset of

00:38:12.096 --> 00:38:14.306 A:middle
the debug option that Xcode

00:38:14.306 --> 00:38:15.536 A:middle
provides in its debug bar.

00:38:15.966 --> 00:38:17.246 A:middle
So it's a very convenient way to

00:38:17.246 --> 00:38:18.816 A:middle
access these from your touch

00:38:18.856 --> 00:38:19.106 A:middle
bar.

00:38:19.456 --> 00:38:20.646 A:middle
And as you can see, I can bring

00:38:20.646 --> 00:38:22.306 A:middle
those up with Xcode being in the

00:38:22.306 --> 00:38:23.456 A:middle
background, so you can access

00:38:23.506 --> 00:38:24.566 A:middle
them even when you're, for

00:38:24.566 --> 00:38:25.866 A:middle
example, developing your app in

00:38:25.866 --> 00:38:26.516 A:middle
full screen mode.

00:38:27.516 --> 00:38:29.386 A:middle
And one of these options allows

00:38:29.386 --> 00:38:31.256 A:middle
me to capture the view

00:38:31.256 --> 00:38:31.646 A:middle
hierarchy.

00:38:32.066 --> 00:38:32.936 A:middle
Now I'm not going to do that

00:38:32.936 --> 00:38:33.766 A:middle
because I know that not

00:38:33.866 --> 00:38:35.056 A:middle
everybody has a touch bar

00:38:35.056 --> 00:38:35.856 A:middle
[inaudible] so I will show you

00:38:35.856 --> 00:38:36.416 A:middle
an alternative.

00:38:36.956 --> 00:38:38.796 A:middle
I'm going to close the

00:38:38.796 --> 00:38:40.186 A:middle
simulator, and I will make use

00:38:40.556 --> 00:38:42.956 A:middle
of command click to perform the

00:38:42.956 --> 00:38:44.706 A:middle
click on the button in Xcode's

00:38:44.706 --> 00:38:45.236 A:middle
debug bar.

00:38:46.536 --> 00:38:47.836 A:middle
Command click is a system-wide

00:38:47.836 --> 00:38:48.746 A:middle
gesture that allows you to

00:38:48.746 --> 00:38:50.366 A:middle
perform mouse events without

00:38:50.366 --> 00:38:51.646 A:middle
activating the application that

00:38:51.646 --> 00:38:52.816 A:middle
the mouse event is performed on.

00:38:53.966 --> 00:38:57.426 A:middle
So this allowed us to invoke the

00:38:57.426 --> 00:38:58.576 A:middle
capture of the view hierarchy.

00:38:58.826 --> 00:38:59.676 A:middle
The debugger paused the

00:38:59.676 --> 00:39:00.676 A:middle
application while it was still

00:38:59.676 --> 00:39:00.676 A:middle
application while it was still

00:39:00.826 --> 00:39:02.476 A:middle
in its active state, and we can

00:39:02.476 --> 00:39:04.346 A:middle
see that the UI still renders as

00:39:04.346 --> 00:39:05.796 A:middle
if the app was front most and

00:39:05.796 --> 00:39:06.556 A:middle
the popover hasn't been

00:39:06.556 --> 00:39:07.006 A:middle
dismissed.

00:39:07.456 --> 00:39:08.266 A:middle
If you're wondering why that

00:39:08.266 --> 00:39:09.406 A:middle
spinning [inaudible] is coming

00:39:09.406 --> 00:39:10.236 A:middle
up, that's because the

00:39:10.236 --> 00:39:11.216 A:middle
application is paused in the

00:39:11.216 --> 00:39:12.226 A:middle
debugger and doesn't respond to

00:39:12.226 --> 00:39:12.986 A:middle
mouse events anymore.

00:39:14.806 --> 00:39:16.116 A:middle
Now, you may be wondering, if we

00:39:16.116 --> 00:39:17.156 A:middle
take a look at the view debugger

00:39:17.156 --> 00:39:19.256 A:middle
here, why the popover isn't

00:39:19.256 --> 00:39:19.616 A:middle
visible.

00:39:20.426 --> 00:39:21.696 A:middle
Don't worry, the view hierarchy

00:39:21.696 --> 00:39:22.396 A:middle
has been captured.

00:39:22.486 --> 00:39:24.176 A:middle
I'll get to how we take a look

00:39:24.176 --> 00:39:25.346 A:middle
at the popover once we get to

00:39:25.346 --> 00:39:26.986 A:middle
that bug, but first I want to

00:39:26.986 --> 00:39:28.176 A:middle
take a look at the layout issue

00:39:28.176 --> 00:39:29.786 A:middle
of this image view here.

00:39:29.836 --> 00:39:31.356 A:middle
So I'll select the image view

00:39:31.356 --> 00:39:32.396 A:middle
here and I'll zoom in a little

00:39:32.586 --> 00:39:32.676 A:middle
bit.

00:39:33.176 --> 00:39:34.096 A:middle
When we take a look at the

00:39:34.096 --> 00:39:35.416 A:middle
inspect on the right-hand side,

00:39:35.906 --> 00:39:37.276 A:middle
we can see that this is an

00:39:37.326 --> 00:39:39.146 A:middle
underscore NS image view simple

00:39:39.146 --> 00:39:39.546 A:middle
image view.

00:39:39.806 --> 00:39:41.556 A:middle
Now the fact that this is prefix

00:39:41.556 --> 00:39:43.426 A:middle
with an underscore usually hints

00:39:43.426 --> 00:39:44.466 A:middle
at the fact that this is an

00:39:44.516 --> 00:39:45.836 A:middle
internal class from a system

00:39:45.836 --> 00:39:48.496 A:middle
framework and not what we use

00:39:48.496 --> 00:39:50.576 A:middle
when we set up image views in

00:39:50.576 --> 00:39:51.716 A:middle
code or in interface builder.

00:39:51.976 --> 00:39:52.876 A:middle
So let's take a look at this

00:39:52.876 --> 00:39:54.486 A:middle
object in the view hierarchy.

00:39:54.656 --> 00:39:55.836 A:middle
And I can do that by using the

00:39:55.836 --> 00:39:57.696 A:middle
navigate menu, select reveal in

00:39:57.696 --> 00:39:58.476 A:middle
debug navigator.

00:39:59.016 --> 00:40:00.016 A:middle
We can now, on the left-hand

00:39:59.016 --> 00:40:00.016 A:middle
We can now, on the left-hand

00:40:00.016 --> 00:40:02.186 A:middle
side, see it relative to its

00:40:02.316 --> 00:40:03.456 A:middle
super and sub views.

00:40:04.526 --> 00:40:05.696 A:middle
Now, we can see that super view

00:40:05.696 --> 00:40:07.216 A:middle
is in fact an NS image view, so

00:40:07.216 --> 00:40:08.116 A:middle
that's what we're looking for.

00:40:08.656 --> 00:40:10.066 A:middle
We can also see that its super

00:40:10.066 --> 00:40:12.226 A:middle
view is a planet globe view, and

00:40:12.696 --> 00:40:14.026 A:middle
the super view of the planet

00:40:14.026 --> 00:40:15.656 A:middle
globe view is an NS effect view.

00:40:16.666 --> 00:40:18.226 A:middle
So I will select the image view

00:40:18.756 --> 00:40:20.856 A:middle
here and we can now also see

00:40:20.856 --> 00:40:22.166 A:middle
other properties of the image

00:40:22.166 --> 00:40:22.956 A:middle
view on the right-hand side.

00:40:23.586 --> 00:40:24.746 A:middle
So let's inspect the layout of

00:40:24.796 --> 00:40:25.176 A:middle
this view.

00:40:25.826 --> 00:40:26.856 A:middle
I'm using auto-layout in this

00:40:26.856 --> 00:40:28.296 A:middle
application, so I want to take a

00:40:28.296 --> 00:40:28.996 A:middle
look at the auto-layout

00:40:28.996 --> 00:40:29.536 A:middle
constraints.

00:40:30.286 --> 00:40:31.656 A:middle
I can show the constraints using

00:40:31.656 --> 00:40:34.466 A:middle
this button here, and we can now

00:40:34.466 --> 00:40:35.666 A:middle
see all the constraints that

00:40:35.666 --> 00:40:36.816 A:middle
currently affect the layout of

00:40:36.886 --> 00:40:37.276 A:middle
this view.

00:40:37.276 --> 00:40:39.406 A:middle
You can see that there's, for

00:40:39.406 --> 00:40:40.176 A:middle
example, an [inaudible]

00:40:40.386 --> 00:40:41.496 A:middle
constraint here.

00:40:42.006 --> 00:40:43.346 A:middle
We can also see this vertical

00:40:43.556 --> 00:40:45.116 A:middle
line here, which is an alignment

00:40:45.116 --> 00:40:45.586 A:middle
constraint.

00:40:46.526 --> 00:40:48.336 A:middle
When I select this constraint,

00:40:48.336 --> 00:40:49.766 A:middle
we can see all the properties in

00:40:49.766 --> 00:40:50.746 A:middle
the inspect on the right-hand

00:40:50.746 --> 00:40:50.976 A:middle
side.

00:40:51.326 --> 00:40:52.326 A:middle
If you're wondering why the view

00:40:52.326 --> 00:40:53.236 A:middle
debugger only shows you

00:40:53.236 --> 00:40:55.086 A:middle
wireframes right now, that is

00:40:55.156 --> 00:40:56.156 A:middle
because it only shows the

00:40:56.156 --> 00:40:57.316 A:middle
content of the views that

00:40:57.406 --> 00:40:58.566 A:middle
currently participate in the

00:40:58.566 --> 00:40:59.706 A:middle
layout of the selected view.

00:41:00.076 --> 00:41:01.246 A:middle
And since all those views

00:41:01.246 --> 00:41:02.776 A:middle
themselves don't have content,

00:41:03.146 --> 00:41:04.186 A:middle
we currently only show

00:41:04.186 --> 00:41:04.676 A:middle
wireframes.

00:41:05.356 --> 00:41:07.626 A:middle
So with the constraint selected,

00:41:08.016 --> 00:41:09.166 A:middle
let's take a look at the inspect

00:41:09.166 --> 00:41:09.916 A:middle
on the right-hand side.

00:41:10.516 --> 00:41:12.696 A:middle
We can see that it aligns the

00:41:12.696 --> 00:41:14.006 A:middle
horizontal center of the image

00:41:14.006 --> 00:41:15.716 A:middle
view with the horizontal center

00:41:15.716 --> 00:41:17.126 A:middle
of the planet globe view and it

00:41:17.126 --> 00:41:18.916 A:middle
does so with a constant of zero.

00:41:19.076 --> 00:41:20.536 A:middle
So it aligns it horizontally

00:41:20.536 --> 00:41:21.516 A:middle
centered in its super view.

00:41:22.606 --> 00:41:24.136 A:middle
Now let's select the planet

00:41:24.136 --> 00:41:26.186 A:middle
globe view from the debug

00:41:26.186 --> 00:41:27.756 A:middle
navigator, and we can see that

00:41:27.756 --> 00:41:29.036 A:middle
it's a little bit larger towards

00:41:29.036 --> 00:41:30.826 A:middle
the left-hand side but it aligns

00:41:30.826 --> 00:41:31.526 A:middle
on the right-hand side.

00:41:31.526 --> 00:41:32.526 A:middle
So that's a little bit weird

00:41:32.526 --> 00:41:33.556 A:middle
because we just saw the

00:41:33.556 --> 00:41:34.746 A:middle
constraints aligning them

00:41:34.816 --> 00:41:36.326 A:middle
correctly or exactly

00:41:36.326 --> 00:41:38.486 A:middle
horizontally, but that's not

00:41:38.556 --> 00:41:39.556 A:middle
really what we see in the view

00:41:39.556 --> 00:41:39.866 A:middle
debugger.

00:41:40.146 --> 00:41:40.986 A:middle
So let's take a look at the

00:41:40.986 --> 00:41:42.666 A:middle
constraints of the planet globe

00:41:42.666 --> 00:41:43.376 A:middle
view and see if we can

00:41:43.426 --> 00:41:45.286 A:middle
understand what's going on.

00:41:45.596 --> 00:41:46.416 A:middle
I'll select the leading

00:41:46.416 --> 00:41:47.956 A:middle
constraint here, and taking a

00:41:47.956 --> 00:41:49.476 A:middle
look at the inspect again, we

00:41:49.476 --> 00:41:50.526 A:middle
can see that it aligns the

00:41:50.526 --> 00:41:51.856 A:middle
leading edge of the planet globe

00:41:51.856 --> 00:41:53.696 A:middle
view with the leading edge of

00:41:53.806 --> 00:41:55.316 A:middle
the NS visual effect view, which

00:41:55.316 --> 00:41:56.446 A:middle
we saw in super view.

00:41:56.906 --> 00:41:58.656 A:middle
So it simply inserts it relative

00:41:58.656 --> 00:42:00.196 A:middle
to its super view and it does so

00:41:58.656 --> 00:42:00.196 A:middle
to its super view and it does so

00:42:00.196 --> 00:42:02.176 A:middle
with a constant of 30, so that

00:42:02.176 --> 00:42:02.666 A:middle
makes sense.

00:42:03.366 --> 00:42:04.536 A:middle
And then the trailing constraint

00:42:04.536 --> 00:42:07.916 A:middle
here aligns the trailing edge of

00:42:07.916 --> 00:42:09.256 A:middle
the planet globe view with the

00:42:09.256 --> 00:42:10.546 A:middle
trailing edge of the super view,

00:42:10.956 --> 00:42:11.956 A:middle
and it also does so with a

00:42:12.096 --> 00:42:12.846 A:middle
constant of 30.

00:42:13.426 --> 00:42:14.156 A:middle
Now the fact that this

00:42:14.156 --> 00:42:15.686 A:middle
constraint doesn't attach to

00:42:15.686 --> 00:42:16.796 A:middle
anything on the right-hand side

00:42:16.796 --> 00:42:17.866 A:middle
is a little bit suspicious and

00:42:17.866 --> 00:42:19.016 A:middle
makes me wonder if we see the

00:42:19.016 --> 00:42:19.716 A:middle
whole picture here.

00:42:20.206 --> 00:42:21.306 A:middle
In such a situation, it's

00:42:21.306 --> 00:42:22.426 A:middle
usually a good idea to see if

00:42:22.426 --> 00:42:23.326 A:middle
there's any content that's

00:42:23.326 --> 00:42:24.396 A:middle
currently being clipped that we

00:42:24.396 --> 00:42:25.336 A:middle
don't see by default.

00:42:26.006 --> 00:42:27.456 A:middle
And you can do so using this

00:42:27.496 --> 00:42:28.776 A:middle
button down here to show clip

00:42:28.826 --> 00:42:29.316 A:middle
content.

00:42:29.706 --> 00:42:30.916 A:middle
Now, when I enable this

00:42:30.916 --> 00:42:32.186 A:middle
functionality, you can see that

00:42:32.186 --> 00:42:33.296 A:middle
the planet globe view actually

00:42:33.326 --> 00:42:34.816 A:middle
extends past the window bounds

00:42:34.816 --> 00:42:36.436 A:middle
towards the right-hand side, and

00:42:36.436 --> 00:42:38.026 A:middle
now the horizontal centering

00:42:38.516 --> 00:42:39.876 A:middle
constraint makes sense again

00:42:39.876 --> 00:42:40.926 A:middle
since it actually correctly

00:42:40.926 --> 00:42:42.946 A:middle
centers it in the super view.

00:42:43.316 --> 00:42:44.916 A:middle
However, the super view just

00:42:44.916 --> 00:42:46.176 A:middle
extends past the window.

00:42:46.326 --> 00:42:48.166 A:middle
This is a very common issue if

00:42:48.166 --> 00:42:49.186 A:middle
you set up your constraints in

00:42:49.186 --> 00:42:50.216 A:middle
code, where you accidentally

00:42:50.216 --> 00:42:51.696 A:middle
swap first and second item and

00:42:51.696 --> 00:42:52.826 A:middle
thereby get the layout direction

00:42:52.826 --> 00:42:53.106 A:middle
wrong.

00:42:53.506 --> 00:42:54.906 A:middle
Or you accidentally invert the

00:42:54.906 --> 00:42:57.166 A:middle
constant, and in this case, we

00:42:57.166 --> 00:42:58.636 A:middle
used 30 instead of using

00:42:58.636 --> 00:43:00.226 A:middle
negative 30 to insert it towards

00:42:58.636 --> 00:43:00.226 A:middle
negative 30 to insert it towards

00:43:00.226 --> 00:43:00.806 A:middle
the left-hand side.

00:43:01.116 --> 00:43:03.246 A:middle
So what I want to do is I want

00:43:03.246 --> 00:43:04.576 A:middle
to try out that fix to invert

00:43:04.576 --> 00:43:05.126 A:middle
the constant.

00:43:05.126 --> 00:43:06.236 A:middle
I will make use of the same

00:43:06.236 --> 00:43:07.986 A:middle
technique that Chris introduced

00:43:07.986 --> 00:43:09.526 A:middle
earlier by simply applying it

00:43:09.666 --> 00:43:10.286 A:middle
through LLDB.

00:43:11.086 --> 00:43:13.096 A:middle
So, with this constraint

00:43:13.096 --> 00:43:19.026 A:middle
selected, I'll select edit,

00:43:19.286 --> 00:43:19.716 A:middle
copy.

00:43:20.396 --> 00:43:22.536 A:middle
And I will bring up the console

00:43:22.536 --> 00:43:24.416 A:middle
area at the bottom, and what

00:43:24.796 --> 00:43:27.916 A:middle
this copying gives me is the

00:43:28.236 --> 00:43:28.986 A:middle
[inaudible] pointer to the

00:43:28.986 --> 00:43:30.246 A:middle
selected object, and that works

00:43:30.246 --> 00:43:31.876 A:middle
for all objects that you select

00:43:31.876 --> 00:43:32.996 A:middle
in the view debugger as well as

00:43:32.996 --> 00:43:33.846 A:middle
in the memory graph debugger.

00:43:33.846 --> 00:43:35.306 A:middle
It makes it super convenient to

00:43:35.306 --> 00:43:36.166 A:middle
use them in the console.

00:43:36.426 --> 00:43:37.206 A:middle
So let's --

00:43:38.516 --> 00:43:41.616 A:middle
[ Applause ]

00:43:42.116 --> 00:43:42.366 A:middle
Thank you.

00:43:43.326 --> 00:43:44.026 A:middle
Let's print the debug

00:43:44.026 --> 00:43:45.366 A:middle
description and we can confirm

00:43:45.366 --> 00:43:46.746 A:middle
that the constant is in fact

00:43:46.966 --> 00:43:47.726 A:middle
positive 30.

00:43:48.236 --> 00:43:49.596 A:middle
That's what we saw in the

00:43:49.596 --> 00:43:50.286 A:middle
inspector as well.

00:43:50.496 --> 00:43:52.236 A:middle
So let's set the constant to

00:43:52.236 --> 00:43:52.846 A:middle
negative 30.

00:43:53.226 --> 00:43:54.836 A:middle
I'll type e, which is the super

00:43:54.836 --> 00:43:57.076 A:middle
short form of expression by

00:43:57.076 --> 00:43:59.786 A:middle
casting the pointer and then say

00:43:59.786 --> 00:44:02.776 A:middle
set constant to negative 30.

00:43:59.786 --> 00:44:02.776 A:middle
set constant to negative 30.

00:44:03.276 --> 00:44:05.006 A:middle
We have the same problem that

00:44:05.306 --> 00:44:06.736 A:middle
the path application doesn't

00:44:06.736 --> 00:44:08.066 A:middle
update that Chris saw earlier,

00:44:08.606 --> 00:44:09.796 A:middle
so what I'm going to do or what

00:44:09.796 --> 00:44:11.006 A:middle
I have to do is I have to

00:44:11.356 --> 00:44:13.076 A:middle
[inaudible] the ca transaction

00:44:13.176 --> 00:44:16.086 A:middle
to [inaudible] application

00:44:16.456 --> 00:44:18.716 A:middle
schedule update of its UI.

00:44:18.716 --> 00:44:21.166 A:middle
I can use the handy command that

00:44:21.166 --> 00:44:24.216 A:middle
Chris added earlier, so I can

00:44:24.616 --> 00:44:25.526 A:middle
take the command from here.

00:44:26.246 --> 00:44:27.896 A:middle
And we can now see that the

00:44:27.926 --> 00:44:29.246 A:middle
planet image is horizontally

00:44:29.246 --> 00:44:30.866 A:middle
centered correctly, so inverting

00:44:30.866 --> 00:44:31.696 A:middle
the constant was the correct

00:44:31.696 --> 00:44:32.066 A:middle
fix.

00:44:32.466 --> 00:44:34.026 A:middle
So we were able to confirm this,

00:44:34.426 --> 00:44:35.676 A:middle
so let's apply this change in

00:44:35.676 --> 00:44:36.126 A:middle
our code.

00:44:36.696 --> 00:44:39.186 A:middle
With the constraints selected,

00:44:39.466 --> 00:44:40.236 A:middle
you can see that on the

00:44:40.236 --> 00:44:42.156 A:middle
right-hand side I can see this

00:44:42.156 --> 00:44:43.416 A:middle
back trace here, and that is the

00:44:43.416 --> 00:44:44.836 A:middle
allocation back trace of the

00:44:44.896 --> 00:44:46.116 A:middle
constraint and tells me exactly

00:44:46.116 --> 00:44:47.746 A:middle
in which frame it was allocated.

00:44:48.016 --> 00:44:49.236 A:middle
So it allows me to jump right to

00:44:49.236 --> 00:44:51.276 A:middle
the code where I created that

00:44:51.276 --> 00:44:51.796 A:middle
constraint.

00:44:52.726 --> 00:44:55.076 A:middle
Now to have this creation back

00:44:55.076 --> 00:44:56.276 A:middle
traces show up, you have to

00:44:56.276 --> 00:44:58.356 A:middle
enable mailx backlogging and let

00:44:58.356 --> 00:44:59.906 A:middle
me show you how you enable that.

00:45:00.366 --> 00:45:01.736 A:middle
You go to your scheme up here

00:45:01.736 --> 00:45:02.816 A:middle
and [inaudible] edit scheme.

00:45:03.836 --> 00:45:05.606 A:middle
And in the diagnostics tab of

00:45:05.656 --> 00:45:08.096 A:middle
the scheme options, under

00:45:08.096 --> 00:45:09.556 A:middle
logging, you can enable mailx

00:45:09.836 --> 00:45:11.396 A:middle
stack logging for all

00:45:11.396 --> 00:45:12.766 A:middle
allocations in prehistory.

00:45:13.606 --> 00:45:14.546 A:middle
And that will provide you with

00:45:14.546 --> 00:45:15.816 A:middle
these handy allocation

00:45:15.816 --> 00:45:17.076 A:middle
backtraces for all selected

00:45:17.076 --> 00:45:18.406 A:middle
objects in the view debugger as

00:45:18.436 --> 00:45:19.766 A:middle
well as in Xcode's memory graph

00:45:19.766 --> 00:45:20.016 A:middle
debugger.

00:45:21.146 --> 00:45:22.766 A:middle
Now, when I mouse over this

00:45:23.256 --> 00:45:24.866 A:middle
stackframe here, we can see the

00:45:24.866 --> 00:45:26.926 A:middle
full name of that frame.

00:45:27.596 --> 00:45:29.546 A:middle
And we can see that it is the

00:45:29.546 --> 00:45:30.886 A:middle
set up planet globe view layout

00:45:30.886 --> 00:45:31.966 A:middle
method in the scene view

00:45:31.966 --> 00:45:32.476 A:middle
controller.

00:45:33.496 --> 00:45:35.956 A:middle
And I can jump to these points

00:45:35.956 --> 00:45:37.706 A:middle
in code using this jump to

00:45:37.706 --> 00:45:38.086 A:middle
arrow.

00:45:38.906 --> 00:45:40.466 A:middle
And I will do so by holding down

00:45:40.466 --> 00:45:42.196 A:middle
shift control option, which

00:45:42.196 --> 00:45:44.096 A:middle
brings us this navigational

00:45:44.246 --> 00:45:45.006 A:middle
[inaudible] and allows me to

00:45:45.006 --> 00:45:46.776 A:middle
open this file in a separate

00:45:46.776 --> 00:45:47.056 A:middle
window.

00:45:47.586 --> 00:45:50.376 A:middle
Now you can see that the line of

00:45:50.486 --> 00:45:51.356 A:middle
code where the constraint is

00:45:51.356 --> 00:45:52.376 A:middle
allocated is highlighted.

00:45:52.896 --> 00:45:54.196 A:middle
We can see the constant of 30,

00:45:54.246 --> 00:45:55.526 A:middle
and I can invert it to negative

00:45:55.526 --> 00:45:55.836 A:middle
30.

00:45:56.526 --> 00:45:58.436 A:middle
I'll save this file and close it

00:45:58.436 --> 00:45:59.736 A:middle
and we're done with our first

00:46:00.256 --> 00:46:00.346 A:middle
bug.

00:46:01.036 --> 00:46:01.576 A:middle
Perfect.

00:46:01.646 --> 00:46:03.636 A:middle
So the second bug was that we

00:46:03.636 --> 00:46:06.076 A:middle
wouldn't be able to read the

00:46:06.076 --> 00:46:08.106 A:middle
description inside that popover,

00:46:08.316 --> 00:46:09.676 A:middle
so let's take a look at that.

00:46:10.446 --> 00:46:11.996 A:middle
First of all, I want to disable

00:46:11.996 --> 00:46:14.456 A:middle
constraint mode and clipping so

00:46:14.456 --> 00:46:17.046 A:middle
we see the constant again.

00:46:17.166 --> 00:46:18.576 A:middle
And I will also clear the

00:46:18.576 --> 00:46:18.926 A:middle
console.

00:46:19.976 --> 00:46:20.736 A:middle
Now, I showed you at the

00:46:20.736 --> 00:46:22.556 A:middle
beginning how to capture this

00:46:22.826 --> 00:46:23.796 A:middle
[inaudible] in its active state

00:46:23.796 --> 00:46:25.566 A:middle
so we would be able to get to

00:46:25.666 --> 00:46:26.646 A:middle
the view hierarchy of the

00:46:26.646 --> 00:46:27.766 A:middle
popover while it's open;

00:46:28.256 --> 00:46:29.186 A:middle
however, we don't see it.

00:46:29.506 --> 00:46:30.416 A:middle
That is because the view

00:46:30.416 --> 00:46:31.816 A:middle
debugger only shows you a single

00:46:31.816 --> 00:46:32.556 A:middle
window at a time.

00:46:33.516 --> 00:46:34.806 A:middle
Let me show you how to take a

00:46:34.806 --> 00:46:35.596 A:middle
look at other windows.

00:46:36.416 --> 00:46:37.436 A:middle
When I scroll up in the view

00:46:37.436 --> 00:46:38.796 A:middle
hierarchy and walk up the view

00:46:38.796 --> 00:46:40.746 A:middle
hierarchy to eventually hit the

00:46:40.746 --> 00:46:42.266 A:middle
window of the current window

00:46:42.266 --> 00:46:43.566 A:middle
that we see, we can see that

00:46:43.566 --> 00:46:44.516 A:middle
it's hosted by a window

00:46:44.516 --> 00:46:44.986 A:middle
controller.

00:46:45.156 --> 00:46:47.196 A:middle
And if I collapse this root

00:46:47.196 --> 00:46:48.846 A:middle
level item here, we can see that

00:46:48.846 --> 00:46:49.946 A:middle
there's actually another root

00:46:49.946 --> 00:46:51.226 A:middle
level item, which is exactly

00:46:51.226 --> 00:46:51.966 A:middle
what we're looking for.

00:46:52.716 --> 00:46:53.416 A:middle
Our popover.

00:46:54.276 --> 00:46:55.286 A:middle
So if your application has

00:46:55.286 --> 00:46:56.446 A:middle
multiple windows, and that is

00:46:56.446 --> 00:46:58.536 A:middle
true for macOS and iOS, they

00:46:58.536 --> 00:46:59.856 A:middle
show up as multiple root level

00:46:59.856 --> 00:47:01.586 A:middle
objects in the outline on the

00:46:59.856 --> 00:47:01.586 A:middle
objects in the outline on the

00:47:01.586 --> 00:47:02.236 A:middle
left-hand side.

00:47:02.756 --> 00:47:05.056 A:middle
So take a look there, if you

00:47:05.056 --> 00:47:06.436 A:middle
think your application should

00:47:06.436 --> 00:47:07.816 A:middle
have multiple windows that

00:47:08.106 --> 00:47:09.186 A:middle
should be captured by the view

00:47:09.186 --> 00:47:09.456 A:middle
debugger.

00:47:10.026 --> 00:47:11.576 A:middle
So we can take a look at this in

00:47:11.576 --> 00:47:12.966 A:middle
3D, and we can see that there's

00:47:12.966 --> 00:47:16.026 A:middle
this large view that's obscuring

00:47:16.426 --> 00:47:18.066 A:middle
clicks to the labels.

00:47:18.066 --> 00:47:18.956 A:middle
I would like to take a look at

00:47:18.956 --> 00:47:20.586 A:middle
the labels to inspect them.

00:47:20.996 --> 00:47:22.556 A:middle
There's a trick to click through

00:47:22.556 --> 00:47:23.456 A:middle
views in the view debugger.

00:47:23.456 --> 00:47:24.526 A:middle
You can simply hold down

00:47:24.526 --> 00:47:25.046 A:middle
command.

00:47:25.666 --> 00:47:27.046 A:middle
So I can click through this view

00:47:27.046 --> 00:47:28.466 A:middle
in front and select this blue

00:47:28.466 --> 00:47:28.816 A:middle
label.

00:47:29.496 --> 00:47:31.346 A:middle
So let's take a look at the text

00:47:31.346 --> 00:47:32.086 A:middle
color for this label.

00:47:32.086 --> 00:47:33.326 A:middle
I want to first look at the

00:47:33.326 --> 00:47:34.566 A:middle
labels that look great in dark

00:47:34.726 --> 00:47:35.896 A:middle
so that we can hopefully derive

00:47:35.926 --> 00:47:37.666 A:middle
a solution for the problematic

00:47:37.666 --> 00:47:38.426 A:middle
label at the bottom.

00:47:38.456 --> 00:47:41.016 A:middle
So let's take a look at the text

00:47:41.016 --> 00:47:42.196 A:middle
color and we can see that this

00:47:42.196 --> 00:47:44.406 A:middle
is a RGB color resulting in this

00:47:44.406 --> 00:47:45.846 A:middle
blue and we can also see that

00:47:45.846 --> 00:47:47.366 A:middle
the inspector provides us with a

00:47:47.366 --> 00:47:48.166 A:middle
name for this color.

00:47:48.276 --> 00:47:49.386 A:middle
Now this indicates that this

00:47:49.386 --> 00:47:51.426 A:middle
color is coming from an asset

00:47:51.426 --> 00:47:53.026 A:middle
catalogue in our project and

00:47:53.026 --> 00:47:54.366 A:middle
with Xcode 10, you can provide

00:47:54.366 --> 00:47:56.506 A:middle
multiple variants of a color for

00:47:56.506 --> 00:47:57.726 A:middle
a single color that you define.

00:47:57.766 --> 00:47:58.956 A:middle
So, for example, you can provide

00:47:58.956 --> 00:48:00.296 A:middle
one for light and one for dark.

00:47:58.956 --> 00:48:00.296 A:middle
one for light and one for dark.

00:48:00.826 --> 00:48:03.376 A:middle
And which variant is picked is

00:48:04.036 --> 00:48:05.546 A:middle
determined by the appearance of

00:48:05.546 --> 00:48:07.416 A:middle
a view, and you can get that

00:48:07.586 --> 00:48:08.716 A:middle
information in the inspector as

00:48:08.716 --> 00:48:08.986 A:middle
well.

00:48:09.456 --> 00:48:10.486 A:middle
And I scroll down here to the

00:48:10.486 --> 00:48:12.096 A:middle
view section in the inspector.

00:48:12.476 --> 00:48:13.186 A:middle
You can see that there's

00:48:13.186 --> 00:48:14.506 A:middle
appearance and effective

00:48:14.506 --> 00:48:15.066 A:middle
appearance.

00:48:15.446 --> 00:48:17.136 A:middle
Now appearance is not set

00:48:17.216 --> 00:48:18.326 A:middle
explicitly on this view.

00:48:18.326 --> 00:48:19.446 A:middle
And this is a very common

00:48:19.446 --> 00:48:20.826 A:middle
scenario because most views

00:48:20.826 --> 00:48:23.706 A:middle
inherit the appearance from

00:48:23.706 --> 00:48:24.866 A:middle
either one of the super views,

00:48:24.916 --> 00:48:26.286 A:middle
the window or the application.

00:48:27.156 --> 00:48:28.476 A:middle
But you can see the inherited

00:48:28.566 --> 00:48:29.676 A:middle
effective appearance here.

00:48:29.676 --> 00:48:31.596 A:middle
And that is vibrant dark, so

00:48:31.596 --> 00:48:33.146 A:middle
that determines which color of

00:48:33.146 --> 00:48:34.086 A:middle
the color that you define in

00:48:34.086 --> 00:48:34.976 A:middle
your asset catalogue is

00:48:34.976 --> 00:48:35.386 A:middle
selected.

00:48:36.526 --> 00:48:38.556 A:middle
Okay. Actually, while I'm down

00:48:38.556 --> 00:48:40.176 A:middle
here in the inspector, I want to

00:48:40.176 --> 00:48:41.166 A:middle
point out the description

00:48:41.166 --> 00:48:42.496 A:middle
property, which is the debug

00:48:42.496 --> 00:48:43.816 A:middle
description of that object.

00:48:44.176 --> 00:48:45.236 A:middle
And Chris showed you earlier how

00:48:45.236 --> 00:48:46.346 A:middle
to provide a custom debug

00:48:46.346 --> 00:48:47.496 A:middle
description for your objects.

00:48:47.596 --> 00:48:49.476 A:middle
So you don't only benefit from

00:48:49.736 --> 00:48:51.046 A:middle
providing a great debug

00:48:51.046 --> 00:48:52.386 A:middle
description in your console when

00:48:52.386 --> 00:48:54.696 A:middle
you use po on an object but you

00:48:54.696 --> 00:48:56.026 A:middle
also benefit from it in the view

00:48:56.026 --> 00:48:57.096 A:middle
debugger, since it shows up

00:48:57.096 --> 00:48:57.846 A:middle
right in the inspector.

00:48:59.226 --> 00:49:01.056 A:middle
Okay, so let's get back to the

00:48:59.226 --> 00:49:01.056 A:middle
Okay, so let's get back to the

00:49:01.056 --> 00:49:01.576 A:middle
text color.

00:49:01.926 --> 00:49:03.126 A:middle
And I want to select the second

00:49:03.126 --> 00:49:04.376 A:middle
label since that also looks good

00:49:04.376 --> 00:49:04.826 A:middle
in dark.

00:49:05.126 --> 00:49:06.326 A:middle
And in this case, we can see

00:49:06.326 --> 00:49:07.456 A:middle
there's also a name color.

00:49:07.456 --> 00:49:08.956 A:middle
It's a label color, but it's

00:49:08.956 --> 00:49:10.046 A:middle
prefixed with system.

00:49:10.226 --> 00:49:11.366 A:middle
And that indicates that it's not

00:49:11.366 --> 00:49:12.506 A:middle
coming from our own asset

00:49:12.506 --> 00:49:13.736 A:middle
catalogue but from the system,

00:49:14.036 --> 00:49:15.226 A:middle
and of course, system colors

00:49:15.226 --> 00:49:16.316 A:middle
automatically adapt to

00:49:16.316 --> 00:49:17.376 A:middle
appearance changes as well.

00:49:18.336 --> 00:49:19.886 A:middle
Now, taking a look at the

00:49:19.886 --> 00:49:21.756 A:middle
problematic label here, we can

00:49:21.756 --> 00:49:23.246 A:middle
see that it's this very dark

00:49:23.246 --> 00:49:24.786 A:middle
gray, and it doesn't have a

00:49:24.786 --> 00:49:25.046 A:middle
name.

00:49:25.176 --> 00:49:27.266 A:middle
That means it's a custom color

00:49:27.436 --> 00:49:29.696 A:middle
that doesn't adapt to appearance

00:49:29.696 --> 00:49:30.066 A:middle
changes.

00:49:30.906 --> 00:49:32.206 A:middle
So what we want to do is we want

00:49:32.206 --> 00:49:34.436 A:middle
to change its color, its text

00:49:34.436 --> 00:49:37.776 A:middle
color, to a system color.

00:49:37.946 --> 00:49:39.316 A:middle
So with this object selected,

00:49:39.316 --> 00:49:40.316 A:middle
I'll hit command c.

00:49:41.196 --> 00:49:43.396 A:middle
I'll type e, paste in the

00:49:43.396 --> 00:49:44.916 A:middle
[inaudible] pointer and say set

00:49:44.916 --> 00:49:49.476 A:middle
text color to NS color text

00:49:49.476 --> 00:49:49.696 A:middle
color.

00:49:51.436 --> 00:49:52.576 A:middle
Again, I have to [inaudible] to

00:49:52.576 --> 00:49:53.296 A:middle
see a transaction.

00:49:53.996 --> 00:49:55.296 A:middle
And we can see that the popover

00:49:55.296 --> 00:49:56.926 A:middle
now updates, and the font is

00:49:56.926 --> 00:49:57.576 A:middle
nice and readable.

00:49:58.556 --> 00:49:59.846 A:middle
Now, I'm not going to apply this

00:49:59.966 --> 00:50:01.866 A:middle
fix in my storybook file.

00:49:59.966 --> 00:50:01.866 A:middle
fix in my storybook file.

00:50:02.626 --> 00:50:03.636 A:middle
But one thing I want to point

00:50:03.636 --> 00:50:05.826 A:middle
out is it's very important that

00:50:05.826 --> 00:50:07.156 A:middle
you verify that your application

00:50:07.156 --> 00:50:08.336 A:middle
still looks good across all

00:50:08.336 --> 00:50:09.806 A:middle
appearances when you make a

00:50:09.806 --> 00:50:10.656 A:middle
change to your [inaudible] now

00:50:10.766 --> 00:50:12.866 A:middle
that there are multiple system

00:50:12.866 --> 00:50:13.406 A:middle
appearances.

00:50:14.096 --> 00:50:15.326 A:middle
And I will show you how to do

00:50:15.326 --> 00:50:15.506 A:middle
that.

00:50:15.506 --> 00:50:17.306 A:middle
I will continue running, and

00:50:18.156 --> 00:50:20.106 A:middle
instead of switching my entire

00:50:20.106 --> 00:50:21.906 A:middle
system appearance to light to

00:50:21.906 --> 00:50:23.266 A:middle
take a look if the label still

00:50:23.266 --> 00:50:24.016 A:middle
looks good on a light

00:50:24.046 --> 00:50:25.936 A:middle
background, Xcode 10 provides

00:50:25.936 --> 00:50:27.416 A:middle
you with a way to override the

00:50:27.416 --> 00:50:28.776 A:middle
appearance only for the target

00:50:28.776 --> 00:50:29.316 A:middle
application.

00:50:29.426 --> 00:50:30.996 A:middle
And you can use this button in

00:50:30.996 --> 00:50:31.646 A:middle
the debug bar.

00:50:31.956 --> 00:50:33.626 A:middle
And I can select light here, and

00:50:33.916 --> 00:50:35.446 A:middle
you can see that the application

00:50:35.446 --> 00:50:36.526 A:middle
now is presented in a light

00:50:36.526 --> 00:50:37.026 A:middle
appearance.

00:50:37.586 --> 00:50:38.796 A:middle
And I can bring up the popover,

00:50:38.796 --> 00:50:41.446 A:middle
and we can verify that the text

00:50:41.446 --> 00:50:42.066 A:middle
is nice and readable.

00:50:42.586 --> 00:50:44.826 A:middle
So that confirms that we fixed

00:50:44.826 --> 00:50:45.326 A:middle
our issue.

00:50:45.786 --> 00:50:46.916 A:middle
Now, since this is a very common

00:50:47.056 --> 00:50:48.486 A:middle
action to take a look at your

00:50:48.486 --> 00:50:49.576 A:middle
application in different

00:50:49.576 --> 00:50:50.656 A:middle
appearances, we actually made

00:50:50.656 --> 00:50:52.286 A:middle
that option available in the

00:50:52.286 --> 00:50:52.766 A:middle
touch bar.

00:50:53.106 --> 00:50:53.756 A:middle
I will show you [inaudible].

00:50:53.756 --> 00:50:55.336 A:middle
I'll bring up the touch bar

00:50:55.336 --> 00:50:57.186 A:middle
simulator again, and with the

00:50:57.186 --> 00:51:00.016 A:middle
popover opened, I can select

00:50:57.186 --> 00:51:00.016 A:middle
popover opened, I can select

00:51:00.016 --> 00:51:00.696 A:middle
this option here.

00:51:01.786 --> 00:51:02.776 A:middle
And you can now see all the

00:51:02.776 --> 00:51:03.976 A:middle
override options right in your

00:51:03.976 --> 00:51:05.526 A:middle
touch bar, so even if your

00:51:05.526 --> 00:51:06.616 A:middle
application is in full screen

00:51:06.616 --> 00:51:07.786 A:middle
mode, for example, I can access

00:51:07.856 --> 00:51:08.016 A:middle
these.

00:51:08.786 --> 00:51:10.026 A:middle
Let me switch to high contrast

00:51:10.026 --> 00:51:12.326 A:middle
light, which enables the

00:51:12.326 --> 00:51:13.906 A:middle
accessibility feature of high

00:51:13.906 --> 00:51:16.006 A:middle
contrast as well as overrides

00:51:16.076 --> 00:51:18.016 A:middle
the appearance to light, so you

00:51:18.016 --> 00:51:18.926 A:middle
can make sure that your app

00:51:18.926 --> 00:51:21.296 A:middle
looks good in that configuration

00:51:21.296 --> 00:51:21.636 A:middle
as well.

00:51:22.346 --> 00:51:23.786 A:middle
And, of course, I can go back to

00:51:23.786 --> 00:51:24.826 A:middle
the system appearance as well.

00:51:25.276 --> 00:51:27.286 A:middle
So we confirmed that our issue

00:51:27.396 --> 00:51:29.036 A:middle
is fixed.

00:51:29.036 --> 00:51:30.216 A:middle
And that allows me to check off

00:51:30.216 --> 00:51:31.916 A:middle
this on our bug list [inaudible]

00:51:32.356 --> 00:51:33.476 A:middle
with this, we're at the end of

00:51:33.476 --> 00:51:34.916 A:middle
the demo and I will go back to

00:51:34.916 --> 00:51:35.366 A:middle
slides.

00:51:36.516 --> 00:51:43.316 A:middle
[ Applause ]

00:51:43.816 --> 00:51:45.776 A:middle
So let's recap what we just saw.

00:51:46.286 --> 00:51:47.926 A:middle
I showed you how to use reveal

00:51:47.926 --> 00:51:49.426 A:middle
in debug navigator to orient

00:51:49.426 --> 00:51:51.136 A:middle
your current selection in the

00:51:51.136 --> 00:51:52.276 A:middle
hierarchical outline on the

00:51:52.276 --> 00:51:52.926 A:middle
left-hand side.

00:51:53.616 --> 00:51:54.946 A:middle
I showed you how to show clip

00:51:55.026 --> 00:51:57.656 A:middle
content, and we made use of the

00:51:57.656 --> 00:51:58.376 A:middle
auto-layout debugging

00:51:58.376 --> 00:51:59.716 A:middle
functionality to track down our

00:51:59.716 --> 00:52:00.486 A:middle
constraint problem.

00:51:59.716 --> 00:52:00.486 A:middle
constraint problem.

00:52:00.716 --> 00:52:03.236 A:middle
I showed you how to use the

00:52:03.236 --> 00:52:04.206 A:middle
object pointers that you can

00:52:04.206 --> 00:52:06.096 A:middle
easily access by just copying

00:52:06.096 --> 00:52:07.506 A:middle
the selected objects and use

00:52:07.506 --> 00:52:08.006 A:middle
them in LLDB.

00:52:08.006 --> 00:52:09.896 A:middle
We had a look at the creation

00:52:09.896 --> 00:52:11.866 A:middle
backtraces, which are available

00:52:11.866 --> 00:52:12.956 A:middle
if you have mailx stack logging

00:52:12.956 --> 00:52:14.276 A:middle
enabled in your scheme options

00:52:15.176 --> 00:52:16.316 A:middle
to jump right to the code and

00:52:16.316 --> 00:52:18.426 A:middle
applied a change that we needed

00:52:18.426 --> 00:52:19.226 A:middle
for our constraint.

00:52:19.876 --> 00:52:21.116 A:middle
We had a look at the debug

00:52:21.116 --> 00:52:22.686 A:middle
description that's conveniently

00:52:22.686 --> 00:52:23.936 A:middle
available in the inspector of

00:52:23.976 --> 00:52:24.556 A:middle
the view debugger.

00:52:25.426 --> 00:52:27.486 A:middle
And we had a look at click

00:52:27.486 --> 00:52:28.766 A:middle
through to select a view that

00:52:28.766 --> 00:52:29.656 A:middle
was behind another view.

00:52:30.106 --> 00:52:32.256 A:middle
And regarding debugging dark

00:52:32.256 --> 00:52:34.086 A:middle
mode, we saw that you can easily

00:52:34.346 --> 00:52:35.526 A:middle
override the appearance of the

00:52:35.526 --> 00:52:37.056 A:middle
target application right from

00:52:37.056 --> 00:52:38.316 A:middle
Xcode's debug bar or from the

00:52:38.316 --> 00:52:38.736 A:middle
touch bar.

00:52:39.706 --> 00:52:40.596 A:middle
I showed you how to capture a

00:52:40.596 --> 00:52:42.256 A:middle
Mac app in its active state.

00:52:42.346 --> 00:52:43.726 A:middle
And we had a look at the name

00:52:43.726 --> 00:52:44.856 A:middle
color information and its

00:52:44.856 --> 00:52:46.006 A:middle
appearance information that is

00:52:46.006 --> 00:52:47.446 A:middle
now available in Xcode's view

00:52:47.446 --> 00:52:48.246 A:middle
debugger inspector.

00:52:48.746 --> 00:52:50.426 A:middle
If you want to learn more about

00:52:50.426 --> 00:52:52.646 A:middle
adapting the dark mode in your

00:52:52.646 --> 00:52:54.226 A:middle
Mac application, please check

00:52:54.226 --> 00:52:55.536 A:middle
out the videos for these two

00:52:55.536 --> 00:52:55.926 A:middle
sessions.

00:52:57.046 --> 00:52:58.716 A:middle
That brings us to the end of

00:52:58.776 --> 00:52:59.246 A:middle
this talk.

00:52:59.906 --> 00:53:01.056 A:middle
If you want more information

00:52:59.906 --> 00:53:01.056 A:middle
If you want more information

00:53:01.056 --> 00:53:02.846 A:middle
about the talk, including the

00:53:02.846 --> 00:53:04.116 A:middle
[inaudible] script that Chris

00:53:04.176 --> 00:53:05.656 A:middle
showed you earlier, it will be

00:53:05.656 --> 00:53:07.226 A:middle
posted on the session's website.

00:53:07.576 --> 00:53:08.846 A:middle
And if you have any questions to

00:53:08.846 --> 00:53:09.716 A:middle
any of the content of this

00:53:09.716 --> 00:53:11.386 A:middle
session, or debugging in

00:53:11.386 --> 00:53:12.896 A:middle
general, there's a profiling and

00:53:12.896 --> 00:53:14.046 A:middle
debugging lab tomorrow morning

00:53:14.046 --> 00:53:14.716 A:middle
at 9 am.

00:53:15.006 --> 00:53:15.856 A:middle
Chris and I will be there.

00:53:15.856 --> 00:53:16.776 A:middle
We'll be happy to answer any

00:53:16.776 --> 00:53:17.656 A:middle
questions you may have.

00:53:18.136 --> 00:53:19.826 A:middle
And there's also an iOS memory

00:53:19.826 --> 00:53:21.346 A:middle
deep dive talk, in case you're

00:53:21.346 --> 00:53:22.756 A:middle
interested, in memory debugging

00:53:22.906 --> 00:53:24.006 A:middle
that is also tomorrow.

00:53:24.976 --> 00:53:26.416 A:middle
With that, I hope you have a

00:53:26.416 --> 00:53:27.796 A:middle
fantastic time at the Beer Bash

00:53:27.796 --> 00:53:28.646 A:middle
and enjoy the rest of the

00:53:28.646 --> 00:53:28.936 A:middle
conference.

00:53:29.516 --> 00:53:32.500 A:middle
[ Applause ]
