WEBVTT

00:00:07.516 --> 00:00:15.500 A:middle
[ Music ]

00:00:22.516 --> 00:00:27.906 A:middle
[ Applause ]

00:00:28.406 --> 00:00:29.736 A:middle
&gt;&gt; Good afternoon and welcome

00:00:29.736 --> 00:00:31.566 A:middle
everybody to our session, what's

00:00:31.566 --> 00:00:33.366 A:middle
new in user notifications.

00:00:33.986 --> 00:00:35.316 A:middle
I'm Kritarth Jain [inaudible] on

00:00:35.316 --> 00:00:38.066 A:middle
the iOS notifications team, and

00:00:38.066 --> 00:00:39.956 A:middle
we're very excited to be back at

00:00:39.956 --> 00:00:42.316 A:middle
WWDC to share with you all the

00:00:42.316 --> 00:00:43.896 A:middle
new and exciting features around

00:00:43.896 --> 00:00:45.566 A:middle
user notifications that your

00:00:45.566 --> 00:00:47.036 A:middle
applications can start using

00:00:47.246 --> 00:00:48.116 A:middle
with iOS 12.

00:00:49.476 --> 00:00:51.446 A:middle
Today, we will be going over a

00:00:51.446 --> 00:00:53.086 A:middle
range of topics as you can see

00:00:53.086 --> 00:00:54.256 A:middle
from the list here.

00:00:54.526 --> 00:00:56.286 A:middle
We will start with talking about

00:00:56.286 --> 00:00:57.996 A:middle
grouped notifications, a new

00:00:57.996 --> 00:00:59.696 A:middle
paradigm that we've introduced

00:00:59.876 --> 00:01:01.476 A:middle
to iOS notifications when


00:00:59.876 --> 00:01:01.476 A:middle
to iOS notifications when

00:01:01.476 --> 00:01:02.736 A:middle
presented in the user's

00:01:02.736 --> 00:01:03.646 A:middle
notification list.

00:01:04.626 --> 00:01:05.896 A:middle
Then we'll talk about

00:01:05.896 --> 00:01:07.546 A:middle
notification content extensions,

00:01:07.886 --> 00:01:09.106 A:middle
which are existing extension

00:01:09.106 --> 00:01:10.696 A:middle
points with notifications, and

00:01:10.696 --> 00:01:12.226 A:middle
discuss new APIs that you've

00:01:12.226 --> 00:01:13.266 A:middle
added around these.

00:01:14.606 --> 00:01:15.906 A:middle
Then, we'll cover notification

00:01:15.906 --> 00:01:17.816 A:middle
management and talk about all

00:01:17.816 --> 00:01:19.116 A:middle
the new ways in which your

00:01:19.116 --> 00:01:20.916 A:middle
application users can now tweak

00:01:20.916 --> 00:01:22.636 A:middle
your notification settings and

00:01:22.636 --> 00:01:24.226 A:middle
what you need to do to respond

00:01:24.426 --> 00:01:25.366 A:middle
to these new options.

00:01:26.556 --> 00:01:27.976 A:middle
Then, we'll cover provisional

00:01:27.976 --> 00:01:29.936 A:middle
authorization, which allows your

00:01:29.936 --> 00:01:31.806 A:middle
applications to have a trial

00:01:31.806 --> 00:01:33.706 A:middle
phase for sending notifications

00:01:33.706 --> 00:01:35.676 A:middle
to users without their explicit

00:01:35.676 --> 00:01:37.366 A:middle
permission but do it quietly.

00:01:38.596 --> 00:01:40.266 A:middle
And lastly, we'll cover critical

00:01:40.266 --> 00:01:42.006 A:middle
alerts, which allows your

00:01:42.006 --> 00:01:43.816 A:middle
applications to send important

00:01:43.816 --> 00:01:45.446 A:middle
notifications to the users,

00:01:46.036 --> 00:01:47.996 A:middle
which bypass certain system

00:01:47.996 --> 00:01:49.846 A:middle
settings if your users allows

00:01:49.846 --> 00:01:51.026 A:middle
your applications to do so.

00:01:51.886 --> 00:01:53.146 A:middle
So there's a range of topics to

00:01:53.146 --> 00:01:54.736 A:middle
be covered today, and let's

00:01:54.736 --> 00:01:56.316 A:middle
begin with looking at grouped

00:01:56.346 --> 00:01:57.136 A:middle
notifications.

00:01:57.136 --> 00:02:01.356 A:middle
Now up to iOS 11, all new


00:01:57.136 --> 00:02:01.356 A:middle
Now up to iOS 11, all new

00:02:01.356 --> 00:02:02.586 A:middle
incoming notifications for the

00:02:02.586 --> 00:02:04.426 A:middle
users were inserted in a

00:02:04.426 --> 00:02:05.816 A:middle
chronological order in the

00:02:05.816 --> 00:02:06.756 A:middle
notification list.

00:02:07.276 --> 00:02:08.735 A:middle
So these would be interspersed

00:02:08.735 --> 00:02:10.376 A:middle
across multiple applications,

00:02:10.705 --> 00:02:12.006 A:middle
and it would be hard for the

00:02:12.006 --> 00:02:13.886 A:middle
user to find a certain

00:02:13.886 --> 00:02:15.656 A:middle
notification or triage multiple

00:02:15.656 --> 00:02:16.746 A:middle
notifications together.

00:02:17.796 --> 00:02:20.346 A:middle
So starting in iOS 12, we've

00:02:20.346 --> 00:02:22.216 A:middle
decided to improve this by

00:02:22.216 --> 00:02:23.676 A:middle
introducing notification

00:02:23.676 --> 00:02:25.696 A:middle
grouping, so now, as you can see

00:02:25.696 --> 00:02:27.586 A:middle
here, all notifications across

00:02:27.586 --> 00:02:29.076 A:middle
different applications get

00:02:29.076 --> 00:02:30.526 A:middle
grouped into their unique

00:02:30.526 --> 00:02:31.036 A:middle
groups.

00:02:32.056 --> 00:02:33.616 A:middle
Let's take a deeper look at how

00:02:33.616 --> 00:02:34.866 A:middle
grouped notifications works.

00:02:36.016 --> 00:02:38.426 A:middle
Now all these notifications will

00:02:38.426 --> 00:02:39.856 A:middle
be automatically grouped, so

00:02:39.856 --> 00:02:41.586 A:middle
there's nothing explicit that

00:02:41.716 --> 00:02:43.626 A:middle
you need to do to start using

00:02:43.706 --> 00:02:44.996 A:middle
notification grouping.

00:02:45.406 --> 00:02:47.016 A:middle
However, if you do want to have

00:02:47.136 --> 00:02:49.426 A:middle
your own custom groups then you

00:02:49.426 --> 00:02:51.176 A:middle
can use the thread identifier,

00:02:51.556 --> 00:02:53.566 A:middle
which is an existing property on

00:02:53.746 --> 00:02:55.556 A:middle
the UN notification content

00:02:55.556 --> 00:02:55.996 A:middle
object.

00:02:57.646 --> 00:02:59.096 A:middle
So some of you might already be

00:02:59.096 --> 00:03:01.276 A:middle
using the thread identifier and


00:02:59.096 --> 00:03:01.276 A:middle
using the thread identifier and

00:03:01.276 --> 00:03:02.406 A:middle
for a local notification.

00:03:02.536 --> 00:03:03.636 A:middle
You can set it on the

00:03:03.806 --> 00:03:05.606 A:middle
UNMutableNotificationContent

00:03:05.606 --> 00:03:06.906 A:middle
object as seen here.

00:03:08.056 --> 00:03:10.096 A:middle
And for a remote notification

00:03:10.096 --> 00:03:11.876 A:middle
payload, you can also include it

00:03:11.876 --> 00:03:13.366 A:middle
as part of your notification

00:03:13.366 --> 00:03:13.706 A:middle
payload.

00:03:15.756 --> 00:03:17.816 A:middle
Now the thread identifier might

00:03:17.816 --> 00:03:19.286 A:middle
be familiar to some of you

00:03:19.286 --> 00:03:19.696 A:middle
already.

00:03:20.996 --> 00:03:23.616 A:middle
We use it today for forwarding

00:03:23.616 --> 00:03:25.486 A:middle
notifications to a notification

00:03:25.486 --> 00:03:27.126 A:middle
content extension that is

00:03:27.126 --> 00:03:28.976 A:middle
presented for your application,

00:03:29.176 --> 00:03:30.406 A:middle
which has the exact same thread

00:03:30.406 --> 00:03:32.336 A:middle
identifier, allowing the content

00:03:32.336 --> 00:03:33.986 A:middle
extension view to update it

00:03:34.026 --> 00:03:35.176 A:middle
based on the new incoming

00:03:35.176 --> 00:03:35.846 A:middle
notification.

00:03:37.256 --> 00:03:39.346 A:middle
Starting in iOS 11, we started

00:03:39.346 --> 00:03:41.536 A:middle
using the thread identifier for

00:03:41.536 --> 00:03:43.386 A:middle
doing grouping of notifications,

00:03:43.386 --> 00:03:44.806 A:middle
if the user had turned on

00:03:45.076 --> 00:03:45.826 A:middle
[inaudible] notification

00:03:45.826 --> 00:03:46.326 A:middle
previous.

00:03:47.156 --> 00:03:48.126 A:middle
So we're just taking this

00:03:48.126 --> 00:03:50.006 A:middle
concept and expanding it for all

00:03:50.006 --> 00:03:51.096 A:middle
notifications in general.

00:03:52.756 --> 00:03:54.726 A:middle
So how does this grouping work?

00:03:55.446 --> 00:03:57.166 A:middle
So when a new notification comes

00:03:57.166 --> 00:03:59.676 A:middle
in to you, the user's device, if

00:03:59.676 --> 00:04:01.556 A:middle
there is no thread identifier


00:03:59.676 --> 00:04:01.556 A:middle
there is no thread identifier

00:04:01.676 --> 00:04:03.826 A:middle
set on this notification, then

00:04:04.246 --> 00:04:05.496 A:middle
this notifications gets grouped

00:04:05.496 --> 00:04:06.926 A:middle
with the application bundle.

00:04:08.146 --> 00:04:09.746 A:middle
We can see that from our sample

00:04:09.746 --> 00:04:11.476 A:middle
application here, that as new

00:04:11.476 --> 00:04:13.496 A:middle
notifications are incoming, they

00:04:13.496 --> 00:04:14.446 A:middle
are getting bundled with the

00:04:14.446 --> 00:04:16.796 A:middle
same group and the group is

00:04:16.796 --> 00:04:17.986 A:middle
getting updated with the latest

00:04:17.986 --> 00:04:18.406 A:middle
content.

00:04:18.476 --> 00:04:20.286 A:middle
And then the user can simply

00:04:20.286 --> 00:04:21.766 A:middle
expand this notification group

00:04:21.935 --> 00:04:23.266 A:middle
to see all the notifications

00:04:23.266 --> 00:04:27.086 A:middle
that are present in that group.

00:04:27.276 --> 00:04:28.706 A:middle
On the other hand, if the

00:04:28.706 --> 00:04:30.296 A:middle
notification does have a thread

00:04:30.296 --> 00:04:32.536 A:middle
identifier set on it, then it

00:04:32.536 --> 00:04:33.976 A:middle
gets grouped with all the other

00:04:33.976 --> 00:04:35.556 A:middle
notifications from that same

00:04:35.556 --> 00:04:37.436 A:middle
application with that exact same

00:04:37.436 --> 00:04:38.116 A:middle
thread ID.

00:04:39.246 --> 00:04:40.666 A:middle
What this also means is that the

00:04:40.666 --> 00:04:42.296 A:middle
same application can then have

00:04:42.296 --> 00:04:43.446 A:middle
multiple different custom

00:04:43.446 --> 00:04:44.596 A:middle
groups, depending upon the

00:04:44.596 --> 00:04:46.046 A:middle
unique thread identifiers that

00:04:46.046 --> 00:04:46.806 A:middle
you're setting on them.

00:04:47.326 --> 00:04:50.346 A:middle
A good example of this is the

00:04:50.346 --> 00:04:52.166 A:middle
messages application, where here

00:04:52.166 --> 00:04:53.176 A:middle
you can see there are two

00:04:53.176 --> 00:04:54.996 A:middle
different threads, and as new

00:04:55.136 --> 00:04:56.596 A:middle
notifications are incoming, they

00:04:56.596 --> 00:04:57.636 A:middle
are going to their own

00:04:57.636 --> 00:04:58.556 A:middle
respective groups.

00:04:59.016 --> 00:05:02.516 A:middle
And then the user can expand a


00:04:59.016 --> 00:05:02.516 A:middle
And then the user can expand a

00:05:02.516 --> 00:05:03.906 A:middle
specific group to see all the

00:05:03.906 --> 00:05:05.356 A:middle
notifications that are part of

00:05:05.396 --> 00:05:05.786 A:middle
that group.

00:05:06.956 --> 00:05:07.926 A:middle
So by using the thread

00:05:07.926 --> 00:05:09.676 A:middle
identifier, messages is able to

00:05:09.676 --> 00:05:12.276 A:middle
do so.

00:05:12.516 --> 00:05:14.426 A:middle
Now, your application users also

00:05:14.426 --> 00:05:16.356 A:middle
have the option of tweaking this

00:05:16.356 --> 00:05:17.636 A:middle
notification grouping setting

00:05:17.956 --> 00:05:19.276 A:middle
from your per application

00:05:19.276 --> 00:05:20.526 A:middle
notification setting's page.

00:05:21.426 --> 00:05:23.216 A:middle
Here, they get three options.

00:05:23.696 --> 00:05:25.536 A:middle
If they choose automatic, then

00:05:25.536 --> 00:05:26.756 A:middle
they get the behavior that we

00:05:26.756 --> 00:05:27.496 A:middle
just described.

00:05:28.836 --> 00:05:30.786 A:middle
However, the user also has the

00:05:30.786 --> 00:05:32.286 A:middle
option of just grouping by

00:05:32.286 --> 00:05:34.146 A:middle
application, where the system

00:05:34.146 --> 00:05:35.156 A:middle
will ignore your thread

00:05:35.156 --> 00:05:36.706 A:middle
identifier and group all

00:05:36.706 --> 00:05:38.376 A:middle
notifications into a single

00:05:38.376 --> 00:05:39.246 A:middle
group.

00:05:39.996 --> 00:05:41.846 A:middle
And if the user wants the same

00:05:41.846 --> 00:05:43.926 A:middle
behavior as it exists in iOS 11

00:05:43.926 --> 00:05:45.596 A:middle
today, then they can simply turn

00:05:45.596 --> 00:05:46.586 A:middle
off grouping for your

00:05:46.586 --> 00:05:47.806 A:middle
applications' notifications.

00:05:48.486 --> 00:05:49.926 A:middle
So do keep this in mind when

00:05:49.926 --> 00:05:50.986 A:middle
you're creating your own custom

00:05:50.986 --> 00:05:53.436 A:middle
groups that they create enough

00:05:53.436 --> 00:05:55.486 A:middle
value for users when they

00:05:55.486 --> 00:05:56.516 A:middle
receive your applications'

00:05:56.516 --> 00:05:57.246 A:middle
notifications.

00:05:58.756 --> 00:06:00.606 A:middle
Now what are the different


00:05:58.756 --> 00:06:00.606 A:middle
Now what are the different

00:06:00.606 --> 00:06:01.956 A:middle
components of a notification

00:06:01.956 --> 00:06:02.186 A:middle
group?

00:06:03.386 --> 00:06:05.076 A:middle
The content that we show is for

00:06:05.076 --> 00:06:06.696 A:middle
the latest notification that was

00:06:06.696 --> 00:06:08.106 A:middle
received as part of that group.

00:06:08.546 --> 00:06:11.996 A:middle
And then the user can simply see

00:06:11.996 --> 00:06:13.936 A:middle
all the notifications by tapping

00:06:13.936 --> 00:06:16.166 A:middle
on this group, and we expand all

00:06:16.166 --> 00:06:17.196 A:middle
the notifications' content.

00:06:17.196 --> 00:06:19.086 A:middle
And then the user can interact

00:06:19.086 --> 00:06:20.356 A:middle
with all these notifications

00:06:20.356 --> 00:06:21.216 A:middle
individually as well.

00:06:22.236 --> 00:06:23.876 A:middle
The two buttons at the top give

00:06:23.876 --> 00:06:25.246 A:middle
the users much greater control

00:06:25.246 --> 00:06:26.956 A:middle
like collapsing the stack as

00:06:26.956 --> 00:06:28.146 A:middle
well as clearing all these

00:06:28.146 --> 00:06:29.466 A:middle
notifications together.

00:06:32.156 --> 00:06:34.206 A:middle
Now, notification grouping also

00:06:34.206 --> 00:06:35.806 A:middle
makes triaging of notifications

00:06:36.066 --> 00:06:36.646 A:middle
much better.

00:06:37.036 --> 00:06:38.446 A:middle
For example, in this case, the

00:06:38.746 --> 00:06:39.896 A:middle
user can clear all these

00:06:39.896 --> 00:06:41.526 A:middle
notifications together by simply

00:06:41.526 --> 00:06:43.116 A:middle
swiping to the right and tapping

00:06:43.116 --> 00:06:43.526 A:middle
clear all.

00:06:46.156 --> 00:06:47.916 A:middle
Apart from the content of the

00:06:47.916 --> 00:06:49.936 A:middle
notification group, we also show

00:06:50.026 --> 00:06:50.986 A:middle
a summary text.

00:06:51.436 --> 00:06:52.906 A:middle
Now, this summary text, by

00:06:52.906 --> 00:06:54.886 A:middle
default, shows the count of all

00:06:54.886 --> 00:06:56.486 A:middle
the notifications that are part

00:06:56.486 --> 00:06:57.126 A:middle
of that group.

00:06:58.436 --> 00:07:00.276 A:middle
However, you can also create a


00:06:58.436 --> 00:07:00.276 A:middle
However, you can also create a

00:07:00.276 --> 00:07:02.046 A:middle
custom summary text so you can

00:07:02.046 --> 00:07:03.756 A:middle
give your users much better

00:07:03.756 --> 00:07:05.556 A:middle
context of what kind of

00:07:05.556 --> 00:07:07.016 A:middle
information is included in that

00:07:07.016 --> 00:07:07.906 A:middle
group.

00:07:09.016 --> 00:07:11.066 A:middle
Now, we will cover this API and

00:07:11.516 --> 00:07:14.276 A:middle
go over much larger use cases of

00:07:14.276 --> 00:07:15.586 A:middle
how you can create your custom

00:07:15.586 --> 00:07:17.406 A:middle
groups in the advanced session

00:07:17.496 --> 00:07:18.236 A:middle
around using group

00:07:18.236 --> 00:07:19.686 A:middle
notifications, which will follow

00:07:19.686 --> 00:07:20.136 A:middle
this session.

00:07:22.036 --> 00:07:23.846 A:middle
So let's do a quick summary of

00:07:23.846 --> 00:07:25.156 A:middle
group notifications as we saw

00:07:25.156 --> 00:07:26.026 A:middle
them today.

00:07:26.696 --> 00:07:28.126 A:middle
Starting in iOS 12, all

00:07:28.126 --> 00:07:29.966 A:middle
application notifications are

00:07:29.966 --> 00:07:30.666 A:middle
going to be grouped

00:07:30.666 --> 00:07:31.376 A:middle
automatically.

00:07:31.886 --> 00:07:34.646 A:middle
You can start using the thread

00:07:34.646 --> 00:07:36.486 A:middle
identifier if you want to create

00:07:36.486 --> 00:07:38.056 A:middle
your own custom groups for your

00:07:38.056 --> 00:07:40.896 A:middle
applications, but the user does

00:07:40.896 --> 00:07:42.736 A:middle
have the option of changing this

00:07:42.736 --> 00:07:43.806 A:middle
grouping setting for your

00:07:43.806 --> 00:07:45.166 A:middle
applications' notifications.

00:07:47.096 --> 00:07:48.486 A:middle
And lastly, you can use the

00:07:48.486 --> 00:07:50.716 A:middle
summary text for customizing the

00:07:50.716 --> 00:07:51.996 A:middle
information you want to provide

00:07:51.996 --> 00:07:53.986 A:middle
the user around the notification

00:07:53.986 --> 00:07:55.006 A:middle
groups that you're creating.

00:07:55.256 --> 00:07:58.706 A:middle
All right, so that was group

00:07:58.706 --> 00:07:59.426 A:middle
notifications.

00:07:59.926 --> 00:08:01.416 A:middle
Now, let's move on to the next


00:07:59.926 --> 00:08:01.416 A:middle
Now, let's move on to the next

00:08:01.416 --> 00:08:03.016 A:middle
topic and talk about

00:08:03.016 --> 00:08:04.706 A:middle
notification content extensions.

00:08:05.236 --> 00:08:07.466 A:middle
Now, some of you might already

00:08:07.466 --> 00:08:08.606 A:middle
be familiar with these content

00:08:08.606 --> 00:08:10.056 A:middle
extensions that we included with

00:08:10.136 --> 00:08:10.716 A:middle
iOS 10.

00:08:11.976 --> 00:08:13.726 A:middle
Content extensions allow your

00:08:13.726 --> 00:08:15.776 A:middle
applications to present a rich

00:08:15.776 --> 00:08:17.686 A:middle
notification view around the

00:08:18.006 --> 00:08:20.076 A:middle
user's notifications, so you can

00:08:20.076 --> 00:08:21.996 A:middle
have a much more customized and

00:08:21.996 --> 00:08:23.706 A:middle
interactive interface for the

00:08:23.706 --> 00:08:25.596 A:middle
notification that the user is

00:08:25.596 --> 00:08:25.936 A:middle
seeing.

00:08:25.936 --> 00:08:28.836 A:middle
Let's do a quick recap of

00:08:28.836 --> 00:08:29.846 A:middle
setting up these content

00:08:29.846 --> 00:08:30.436 A:middle
extensions.

00:08:31.336 --> 00:08:32.686 A:middle
Xcode gives you a standard

00:08:32.686 --> 00:08:34.566 A:middle
template to add a target for the

00:08:34.635 --> 00:08:35.746 A:middle
content extensions to your

00:08:35.746 --> 00:08:39.456 A:middle
applications and once you set

00:08:39.456 --> 00:08:40.986 A:middle
that up, we create a default

00:08:40.986 --> 00:08:42.306 A:middle
class for the notification view

00:08:42.306 --> 00:08:44.476 A:middle
controller, which implements the

00:08:44.476 --> 00:08:46.296 A:middle
UNNotificationContentExtension

00:08:46.296 --> 00:08:46.716 A:middle
protocol.

00:08:47.606 --> 00:08:49.026 A:middle
Here, the did receive

00:08:49.026 --> 00:08:51.186 A:middle
notification method is important

00:08:51.186 --> 00:08:52.516 A:middle
because this is your entry point

00:08:52.516 --> 00:08:53.576 A:middle
for setting up the view

00:08:53.576 --> 00:08:55.116 A:middle
associated with the content

00:08:55.116 --> 00:08:57.096 A:middle
extension, and you can use the

00:08:57.096 --> 00:08:59.276 A:middle
notification object past here to

00:08:59.276 --> 00:09:01.006 A:middle
get all the information around


00:08:59.276 --> 00:09:01.006 A:middle
get all the information around

00:09:01.006 --> 00:09:02.586 A:middle
that notification to set up your

00:09:02.586 --> 00:09:03.126 A:middle
custom view.

00:09:05.436 --> 00:09:07.776 A:middle
The info.plist file associated

00:09:07.776 --> 00:09:08.856 A:middle
with your content extension

00:09:08.996 --> 00:09:10.076 A:middle
gives you more options.

00:09:11.226 --> 00:09:12.876 A:middle
The important thing here is the

00:09:12.876 --> 00:09:14.026 A:middle
category identifier.

00:09:14.466 --> 00:09:16.056 A:middle
Now, this identifier needs to

00:09:16.056 --> 00:09:17.246 A:middle
match the same category

00:09:17.246 --> 00:09:18.846 A:middle
identifier you're setting on

00:09:18.846 --> 00:09:20.066 A:middle
your notification requests

00:09:20.476 --> 00:09:21.546 A:middle
because that's how the system

00:09:21.546 --> 00:09:23.076 A:middle
knows which content extension to

00:09:23.076 --> 00:09:24.566 A:middle
launch with which notification.

00:09:26.236 --> 00:09:28.546 A:middle
Along with this, you can do some

00:09:28.546 --> 00:09:30.516 A:middle
quick configurations of your

00:09:30.516 --> 00:09:31.756 A:middle
content extension such as

00:09:31.756 --> 00:09:33.436 A:middle
setting the initial content size

00:09:33.436 --> 00:09:34.936 A:middle
ratio, hiding the default

00:09:34.936 --> 00:09:36.706 A:middle
content, as well as overriding

00:09:36.836 --> 00:09:38.136 A:middle
the title of this content

00:09:38.136 --> 00:09:38.576 A:middle
extension.

00:09:39.796 --> 00:09:41.896 A:middle
Now, the primary way in which

00:09:41.896 --> 00:09:43.526 A:middle
your users interact with these

00:09:43.526 --> 00:09:45.136 A:middle
content extensions is through

00:09:45.136 --> 00:09:47.086 A:middle
notification actions, and these

00:09:47.086 --> 00:09:48.786 A:middle
actions are presented right

00:09:48.786 --> 00:09:50.366 A:middle
below the content of the content

00:09:50.366 --> 00:09:50.836 A:middle
extension.

00:09:52.136 --> 00:09:53.786 A:middle
Let's summarize how we can set

00:09:53.786 --> 00:09:54.716 A:middle
up these actions as well.

00:09:56.126 --> 00:09:57.866 A:middle
So doing so is fairly trivial in

00:09:57.866 --> 00:09:57.976 A:middle
code.

00:09:58.506 --> 00:10:00.216 A:middle
For example, here, we have two


00:09:58.506 --> 00:10:00.216 A:middle
For example, here, we have two

00:10:00.216 --> 00:10:01.566 A:middle
actions here for like and

00:10:01.566 --> 00:10:03.706 A:middle
comment, and we create a simple

00:10:03.706 --> 00:10:05.336 A:middle
UNNotificationAction for like

00:10:06.746 --> 00:10:08.376 A:middle
and a text input action for

00:10:08.376 --> 00:10:08.966 A:middle
commenting.

00:10:11.596 --> 00:10:12.836 A:middle
And once we've created these

00:10:12.836 --> 00:10:14.236 A:middle
actions, we create a new

00:10:14.236 --> 00:10:16.186 A:middle
category giving it the same

00:10:16.186 --> 00:10:17.616 A:middle
identifier as the content

00:10:17.616 --> 00:10:19.186 A:middle
extension where we want these

00:10:19.186 --> 00:10:20.256 A:middle
actions to be presented.

00:10:20.256 --> 00:10:23.216 A:middle
And then, we pass it, the two

00:10:23.216 --> 00:10:27.656 A:middle
new actions that we created.

00:10:27.656 --> 00:10:29.476 A:middle
Once we've set up this category,

00:10:29.476 --> 00:10:30.406 A:middle
then we call

00:10:30.406 --> 00:10:32.576 A:middle
setNotificationCategories on the

00:10:32.576 --> 00:10:34.436 A:middle
UNNotificationCenter object

00:10:34.436 --> 00:10:35.876 A:middle
associated with our class,

00:10:36.176 --> 00:10:37.596 A:middle
giving it the new category that

00:10:37.596 --> 00:10:38.766 A:middle
we created.

00:10:40.856 --> 00:10:43.276 A:middle
So by simply doing so, the next

00:10:43.276 --> 00:10:44.266 A:middle
time when the user goes to your

00:10:44.266 --> 00:10:46.226 A:middle
content extension we can see

00:10:46.226 --> 00:10:47.486 A:middle
that these actions are now

00:10:47.486 --> 00:10:49.066 A:middle
available for them to interact

00:10:49.066 --> 00:10:50.526 A:middle
with your notification content.

00:10:51.636 --> 00:10:53.216 A:middle
Now let's take a look at how we

00:10:53.216 --> 00:10:54.856 A:middle
can handle the responses from

00:10:54.856 --> 00:10:55.516 A:middle
these actions.

00:10:55.996 --> 00:10:57.306 A:middle
There are two ways to do that.

00:10:58.636 --> 00:11:00.116 A:middle
Firstly, you can handle this


00:10:58.636 --> 00:11:00.116 A:middle
Firstly, you can handle this

00:11:00.116 --> 00:11:02.206 A:middle
response in the AppDelegate that

00:11:02.206 --> 00:11:03.366 A:middle
is associated with your

00:11:03.366 --> 00:11:05.386 A:middle
application that implements the

00:11:05.386 --> 00:11:07.036 A:middle
UNUserNotificationCenter

00:11:07.036 --> 00:11:07.836 A:middle
Delegate protocol.

00:11:08.626 --> 00:11:09.716 A:middle
Here, the function

00:11:09.716 --> 00:11:11.206 A:middle
UserNotificationCenter did

00:11:11.206 --> 00:11:12.906 A:middle
receive response, includes the

00:11:12.906 --> 00:11:15.496 A:middle
response object which includes

00:11:15.496 --> 00:11:17.176 A:middle
information about the request,

00:11:17.516 --> 00:11:18.716 A:middle
the notification request from

00:11:18.716 --> 00:11:20.046 A:middle
which the user took this action.

00:11:21.346 --> 00:11:22.916 A:middle
However, the content extension

00:11:23.176 --> 00:11:24.826 A:middle
also allows you to intercept

00:11:24.946 --> 00:11:26.946 A:middle
this action response so that you

00:11:26.946 --> 00:11:28.906 A:middle
can update your view and make a

00:11:28.906 --> 00:11:30.026 A:middle
much more interactive and

00:11:30.026 --> 00:11:31.906 A:middle
dynamic experience for users for

00:11:31.906 --> 00:11:32.806 A:middle
the content extension.

00:11:33.586 --> 00:11:35.986 A:middle
So for our sample here, we enter

00:11:35.986 --> 00:11:37.506 A:middle
the did receive response method

00:11:38.366 --> 00:11:39.416 A:middle
and checked the action

00:11:39.416 --> 00:11:41.056 A:middle
identifier for the like action.

00:11:42.006 --> 00:11:44.196 A:middle
And then we update our UI with

00:11:44.306 --> 00:11:45.956 A:middle
the new label as well as update

00:11:45.956 --> 00:11:46.886 A:middle
our application state.

00:11:48.476 --> 00:11:50.146 A:middle
Finally calling the completion

00:11:50.146 --> 00:11:51.376 A:middle
block we do not dismiss.

00:11:51.956 --> 00:11:53.266 A:middle
If you do want to dismiss your

00:11:53.266 --> 00:11:54.476 A:middle
content extension view here,

00:11:54.696 --> 00:11:56.486 A:middle
then you can simply change the

00:11:56.486 --> 00:11:57.646 A:middle
parameter you're passing to the

00:11:57.646 --> 00:12:00.796 A:middle
completion block to dismiss or


00:11:57.646 --> 00:12:00.796 A:middle
completion block to dismiss or

00:12:00.796 --> 00:12:02.586 A:middle
dismiss and forward, where we

00:12:02.586 --> 00:12:03.896 A:middle
will forward this response to

00:12:03.896 --> 00:12:05.176 A:middle
your AppDelegate function as

00:12:05.176 --> 00:12:05.346 A:middle
well.

00:12:06.406 --> 00:12:07.676 A:middle
All right, so now that we set

00:12:07.676 --> 00:12:09.396 A:middle
this up, we can see that when

00:12:09.396 --> 00:12:10.776 A:middle
the user takes the like action,

00:12:11.136 --> 00:12:13.206 A:middle
the content extension content

00:12:13.206 --> 00:12:14.276 A:middle
gets updated right there and

00:12:14.276 --> 00:12:14.446 A:middle
then.

00:12:14.966 --> 00:12:16.516 A:middle
So it's a much more interactive

00:12:16.516 --> 00:12:17.946 A:middle
experience for your user and

00:12:17.946 --> 00:12:18.846 A:middle
they're getting real-time

00:12:18.846 --> 00:12:19.886 A:middle
feedback.

00:12:21.116 --> 00:12:22.566 A:middle
However, if you look at the

00:12:22.626 --> 00:12:23.966 A:middle
current state of the content

00:12:23.966 --> 00:12:26.576 A:middle
extension, we see that there is

00:12:26.576 --> 00:12:28.106 A:middle
some redundant information.

00:12:28.996 --> 00:12:30.526 A:middle
The user has already taken the

00:12:30.526 --> 00:12:32.136 A:middle
like action, so having the

00:12:32.136 --> 00:12:33.506 A:middle
action there doesn't really

00:12:33.506 --> 00:12:34.416 A:middle
serve a purpose anymore.

00:12:36.236 --> 00:12:38.206 A:middle
Now notification actions, in

00:12:38.206 --> 00:12:39.416 A:middle
general, have certain

00:12:39.416 --> 00:12:40.176 A:middle
limitations.

00:12:41.606 --> 00:12:43.506 A:middle
They are not very dynamic and

00:12:43.606 --> 00:12:45.316 A:middle
can't be updated based on the

00:12:45.316 --> 00:12:46.646 A:middle
context of your content

00:12:46.646 --> 00:12:47.226 A:middle
extensions.

00:12:48.696 --> 00:12:51.046 A:middle
Also, these tend to be tied to

00:12:51.046 --> 00:12:52.846 A:middle
the notification categories that

00:12:52.846 --> 00:12:54.336 A:middle
you have to define at the time

00:12:54.586 --> 00:12:55.726 A:middle
of your application setup.

00:12:56.946 --> 00:12:58.526 A:middle
So we wanted to address these

00:12:58.526 --> 00:13:00.396 A:middle
issues and we have introduced a


00:12:58.526 --> 00:13:00.396 A:middle
issues and we have introduced a

00:13:00.396 --> 00:13:02.326 A:middle
new API around notification

00:13:02.326 --> 00:13:04.206 A:middle
actions, where now we're

00:13:04.206 --> 00:13:05.496 A:middle
exposing these notification

00:13:05.496 --> 00:13:06.666 A:middle
actions as part of the

00:13:06.666 --> 00:13:08.736 A:middle
NSExtensionContext tied to your

00:13:08.736 --> 00:13:09.596 A:middle
content extension.

00:13:10.686 --> 00:13:12.356 A:middle
What this API allows you to do

00:13:12.576 --> 00:13:14.146 A:middle
is access the currently

00:13:14.146 --> 00:13:15.626 A:middle
presented notification actions

00:13:15.626 --> 00:13:17.626 A:middle
to the user as well as replace

00:13:17.626 --> 00:13:19.526 A:middle
these actions by setting a brand

00:13:19.526 --> 00:13:20.766 A:middle
new array of notification

00:13:20.766 --> 00:13:22.786 A:middle
actions for your content

00:13:25.236 --> 00:13:25.556 A:middle
extension.

00:13:25.556 --> 00:13:27.016 A:middle
So going back to our sample,

00:13:27.076 --> 00:13:28.826 A:middle
what if after the user took the

00:13:28.826 --> 00:13:30.476 A:middle
like action we wanted to replace

00:13:30.476 --> 00:13:32.546 A:middle
it say with the unlike action so

00:13:32.546 --> 00:13:33.896 A:middle
that they can do the reverse of

00:13:33.896 --> 00:13:36.776 A:middle
the action they just took?

00:13:36.956 --> 00:13:39.226 A:middle
So using this new API, let's

00:13:39.226 --> 00:13:40.356 A:middle
take a look of how we can set

00:13:40.356 --> 00:13:41.286 A:middle
this up.

00:13:41.376 --> 00:13:42.816 A:middle
So we go back to our did receive

00:13:42.816 --> 00:13:44.206 A:middle
response method and again

00:13:44.626 --> 00:13:46.296 A:middle
identify the like action and

00:13:46.296 --> 00:13:47.716 A:middle
update our application state.

00:13:48.916 --> 00:13:51.216 A:middle
This time, we also create a new

00:13:51.216 --> 00:13:53.446 A:middle
action for unlike, giving it a

00:13:53.446 --> 00:13:55.146 A:middle
unique identifier as well as a

00:13:55.146 --> 00:13:55.476 A:middle
title.

00:13:56.056 --> 00:13:59.816 A:middle
We can also take a look at the

00:13:59.816 --> 00:14:01.436 A:middle
currently presented actions so


00:13:59.816 --> 00:14:01.436 A:middle
currently presented actions so

00:14:01.436 --> 00:14:02.956 A:middle
that we can extract the comment

00:14:02.956 --> 00:14:04.606 A:middle
action from there without having

00:14:04.606 --> 00:14:06.056 A:middle
to create it again.

00:14:07.276 --> 00:14:09.276 A:middle
Then we create a new array of

00:14:09.276 --> 00:14:10.326 A:middle
these new actions that we've

00:14:10.326 --> 00:14:13.526 A:middle
created and simply set that on

00:14:13.606 --> 00:14:14.626 A:middle
the notification actions

00:14:14.626 --> 00:14:14.936 A:middle
variable.

00:14:17.456 --> 00:14:19.536 A:middle
So once we've done this and the

00:14:19.536 --> 00:14:21.656 A:middle
user takes the like action, then

00:14:21.656 --> 00:14:23.666 A:middle
the UI will automatically update

00:14:23.786 --> 00:14:26.236 A:middle
to show them the new action, and

00:14:26.236 --> 00:14:27.416 A:middle
then the user can then toggle

00:14:27.416 --> 00:14:28.356 A:middle
between the two actions,

00:14:28.566 --> 00:14:29.796 A:middle
depending upon how you handle

00:14:29.796 --> 00:14:30.956 A:middle
that state in your content

00:14:30.956 --> 00:14:31.486 A:middle
extensions.

00:14:32.596 --> 00:14:34.726 A:middle
Now, this API can be used in

00:14:34.726 --> 00:14:36.026 A:middle
multiple other ways as well.

00:14:36.516 --> 00:14:38.696 A:middle
For example, now you can set

00:14:38.696 --> 00:14:40.446 A:middle
your actions at the time you're

00:14:40.446 --> 00:14:41.486 A:middle
setting up your content

00:14:41.486 --> 00:14:43.116 A:middle
extension view in the did

00:14:43.116 --> 00:14:44.306 A:middle
receive notification method.

00:14:45.036 --> 00:14:46.306 A:middle
What this means is your

00:14:46.306 --> 00:14:47.916 A:middle
notification requests are no

00:14:47.916 --> 00:14:49.826 A:middle
longer tied to the category to

00:14:49.826 --> 00:14:51.386 A:middle
define the actions that you want

00:14:51.386 --> 00:14:52.306 A:middle
to present around these

00:14:52.306 --> 00:14:53.016 A:middle
notifications.

00:14:53.016 --> 00:14:57.126 A:middle
You can also now present a

00:14:57.126 --> 00:14:58.956 A:middle
secondary set of actions by

00:14:58.956 --> 00:15:00.026 A:middle
replacing the currently


00:14:58.956 --> 00:15:00.026 A:middle
replacing the currently

00:15:00.026 --> 00:15:00.846 A:middle
presented actions.

00:15:01.236 --> 00:15:03.306 A:middle
For example, if the leading

00:15:03.306 --> 00:15:05.326 A:middle
action was rate, then you can

00:15:05.326 --> 00:15:07.046 A:middle
provide a secondary list of the

00:15:07.046 --> 00:15:08.406 A:middle
different types of ratings that

00:15:08.406 --> 00:15:10.366 A:middle
you want your user to take.

00:15:12.156 --> 00:15:14.556 A:middle
And you can also remove all

00:15:14.556 --> 00:15:16.176 A:middle
these notification actions if

00:15:16.176 --> 00:15:17.746 A:middle
you feel it does not make sense

00:15:17.746 --> 00:15:19.316 A:middle
anymore for your content

00:15:19.316 --> 00:15:20.286 A:middle
extension to present these

00:15:20.286 --> 00:15:20.716 A:middle
actions.

00:15:21.106 --> 00:15:25.426 A:middle
So that's the new API around

00:15:25.456 --> 00:15:26.476 A:middle
notification actions.

00:15:26.796 --> 00:15:28.456 A:middle
And we feel this will really

00:15:28.456 --> 00:15:30.706 A:middle
help you enhance the experience

00:15:30.706 --> 00:15:32.316 A:middle
that your users have around your

00:15:32.316 --> 00:15:33.986 A:middle
content extensions with the

00:15:33.986 --> 00:15:35.196 A:middle
different actions now you can

00:15:35.196 --> 00:15:39.036 A:middle
present to them.

00:15:39.216 --> 00:15:40.576 A:middle
Let's move on and talk about

00:15:40.576 --> 00:15:41.806 A:middle
user interaction with these

00:15:41.806 --> 00:15:42.676 A:middle
content extensions.

00:15:43.836 --> 00:15:45.796 A:middle
Now notification actions were

00:15:45.796 --> 00:15:47.726 A:middle
important up till this point

00:15:48.036 --> 00:15:51.146 A:middle
because till iOS 11 we did not

00:15:51.146 --> 00:15:53.166 A:middle
allow user interaction touches

00:15:53.256 --> 00:15:54.456 A:middle
with your content extension

00:15:56.086 --> 00:15:56.196 A:middle
view.

00:15:56.416 --> 00:15:57.486 A:middle
Now we received a lot of

00:15:57.486 --> 00:15:58.536 A:middle
feedback around this.

00:15:58.906 --> 00:16:00.706 A:middle
And I'm happy to announce that


00:15:58.906 --> 00:16:00.706 A:middle
And I'm happy to announce that

00:16:00.836 --> 00:16:01.846 A:middle
we're taking away this

00:16:01.846 --> 00:16:03.126 A:middle
restriction with iOS 12.

00:16:04.516 --> 00:16:07.546 A:middle
[ Applause ]

00:16:08.046 --> 00:16:09.636 A:middle
So now your content extensions

00:16:09.636 --> 00:16:11.826 A:middle
have the option of opting in to

00:16:11.826 --> 00:16:13.456 A:middle
receiving user interaction

00:16:13.456 --> 00:16:16.286 A:middle
[inaudible] touches, and setting

00:16:16.286 --> 00:16:17.786 A:middle
this up, it's fairly trivial.

00:16:18.046 --> 00:16:20.096 A:middle
All you have to do is add a new

00:16:20.096 --> 00:16:22.446 A:middle
key value option to your

00:16:22.446 --> 00:16:23.326 A:middle
info.plist file.

00:16:23.766 --> 00:16:26.556 A:middle
And the key that we've added is

00:16:26.556 --> 00:16:29.446 A:middle
the UNNotificationExtensionUser

00:16:29.446 --> 00:16:30.386 A:middle
InteractionEnabled.

00:16:32.586 --> 00:16:34.436 A:middle
So going back to our sample,

00:16:34.696 --> 00:16:36.576 A:middle
what if we want to remove the

00:16:36.576 --> 00:16:38.416 A:middle
like action from a notification

00:16:38.416 --> 00:16:40.556 A:middle
action and make it a UI

00:16:40.556 --> 00:16:42.626 A:middle
interaction touch that's part of

00:16:42.626 --> 00:16:43.326 A:middle
the view itself?

00:16:44.316 --> 00:16:45.506 A:middle
So once we've configured our

00:16:45.506 --> 00:16:48.376 A:middle
info.plist file, we can go back

00:16:48.376 --> 00:16:49.776 A:middle
to our content extension view

00:16:50.126 --> 00:16:51.976 A:middle
and create our own custom button

00:16:51.976 --> 00:16:53.366 A:middle
to handle the like gesture.

00:16:54.716 --> 00:16:56.396 A:middle
We add a target for our own

00:16:56.396 --> 00:16:59.806 A:middle
private method and inside that

00:16:59.806 --> 00:17:02.016 A:middle
function, we update the UI as


00:16:59.806 --> 00:17:02.016 A:middle
function, we update the UI as

00:17:02.016 --> 00:17:03.486 A:middle
well as update our application

00:17:03.486 --> 00:17:03.806 A:middle
state.

00:17:05.316 --> 00:17:06.886 A:middle
So here, it's important that

00:17:06.886 --> 00:17:07.986 A:middle
since you're implementing your

00:17:07.986 --> 00:17:09.915 A:middle
own user interactions that you

00:17:09.915 --> 00:17:11.886 A:middle
are responsible for handling all

00:17:11.886 --> 00:17:13.626 A:middle
these actions, responses, and

00:17:13.626 --> 00:17:14.846 A:middle
callbacks from the users

00:17:14.846 --> 00:17:15.316 A:middle
yourself.

00:17:17.976 --> 00:17:20.546 A:middle
So once we've set this up, now

00:17:20.546 --> 00:17:21.556 A:middle
when the user goes to your

00:17:21.556 --> 00:17:23.215 A:middle
content extension we see the

00:17:23.215 --> 00:17:24.556 A:middle
Like button, part of the UI

00:17:24.556 --> 00:17:26.705 A:middle
itself, and the user can simply

00:17:26.705 --> 00:17:28.175 A:middle
interact with that button right

00:17:28.175 --> 00:17:28.666 A:middle
there and then.

00:17:33.126 --> 00:17:35.536 A:middle
So that's the new functionality

00:17:35.536 --> 00:17:36.536 A:middle
that we've added around content

00:17:36.536 --> 00:17:37.096 A:middle
extensions.

00:17:37.396 --> 00:17:38.746 A:middle
And coupled with notification

00:17:38.746 --> 00:17:40.076 A:middle
actions, along with user

00:17:40.076 --> 00:17:41.686 A:middle
interaction touches, you now

00:17:41.686 --> 00:17:43.846 A:middle
have a much richer set of tools

00:17:44.106 --> 00:17:44.966 A:middle
for creating much more

00:17:44.966 --> 00:17:46.646 A:middle
interactive and dynamic content

00:17:46.646 --> 00:17:48.336 A:middle
extension experiences for your

00:17:48.336 --> 00:17:49.986 A:middle
applications notifications

00:17:49.986 --> 00:17:50.416 A:middle
users.

00:17:52.516 --> 00:17:54.346 A:middle
Now let's talk about launching

00:17:54.346 --> 00:17:55.636 A:middle
your application from the

00:17:55.636 --> 00:17:56.906 A:middle
notification content extension.

00:17:58.536 --> 00:18:01.146 A:middle
So today the user can launch


00:17:58.536 --> 00:18:01.146 A:middle
So today the user can launch

00:18:01.146 --> 00:18:03.216 A:middle
your application if touches were

00:18:03.216 --> 00:18:04.706 A:middle
not allowed by simply tapping

00:18:04.916 --> 00:18:07.126 A:middle
the content extension view.

00:18:08.036 --> 00:18:09.786 A:middle
They could also do so by tapping

00:18:10.046 --> 00:18:12.116 A:middle
your application icon in the top

00:18:12.596 --> 00:18:14.126 A:middle
left corner.

00:18:14.226 --> 00:18:15.966 A:middle
Or you could create a foreground

00:18:15.966 --> 00:18:17.786 A:middle
action, which then would in turn

00:18:17.786 --> 00:18:19.266 A:middle
launch the application.

00:18:20.936 --> 00:18:22.926 A:middle
But what if you wanted to do

00:18:22.926 --> 00:18:24.106 A:middle
this from your own custom

00:18:24.106 --> 00:18:24.646 A:middle
control?

00:18:25.986 --> 00:18:27.056 A:middle
What if you wanted to launch the

00:18:27.056 --> 00:18:28.306 A:middle
application programmatically?

00:18:29.206 --> 00:18:30.746 A:middle
To enable this, there is a new

00:18:30.746 --> 00:18:33.136 A:middle
API on the NSExtensionContext

00:18:33.136 --> 00:18:34.656 A:middle
called performNotification

00:18:34.656 --> 00:18:36.476 A:middle
DefaultAction, which would allow

00:18:36.476 --> 00:18:40.936 A:middle
you to do this now.

00:18:40.936 --> 00:18:42.026 A:middle
Now, what does the default

00:18:42.026 --> 00:18:42.546 A:middle
action mean?

00:18:43.156 --> 00:18:45.006 A:middle
So, as we said, it launches the

00:18:45.006 --> 00:18:47.046 A:middle
application, but at the same

00:18:47.046 --> 00:18:48.036 A:middle
time, it calls the

00:18:48.036 --> 00:18:49.776 A:middle
UserNotificationCenter did

00:18:49.776 --> 00:18:51.826 A:middle
receive response method in your

00:18:51.826 --> 00:18:52.656 A:middle
application delegate.

00:18:54.066 --> 00:18:55.416 A:middle
Now the UNNotificationResponse

00:18:55.416 --> 00:18:56.876 A:middle
object contains the information

00:18:56.876 --> 00:18:58.316 A:middle
of the notification from which

00:18:58.316 --> 00:19:00.536 A:middle
the user came, so you can update


00:18:58.316 --> 00:19:00.536 A:middle
the user came, so you can update

00:19:00.536 --> 00:19:02.476 A:middle
your application state based on

00:19:02.686 --> 00:19:03.416 A:middle
the notification.

00:19:04.696 --> 00:19:06.256 A:middle
And the identifier that's passed

00:19:06.256 --> 00:19:07.336 A:middle
here is the

00:19:07.336 --> 00:19:08.766 A:middle
UNNotificationDefault

00:19:08.766 --> 00:19:09.746 A:middle
ActionIdentifier.

00:19:10.246 --> 00:19:12.846 A:middle
So going back to our sample,

00:19:12.956 --> 00:19:14.316 A:middle
let's see how we can set this

00:19:14.316 --> 00:19:15.806 A:middle
custom control up.

00:19:17.096 --> 00:19:19.226 A:middle
Now again, we create our own UI

00:19:19.226 --> 00:19:21.626 A:middle
button for the all comments and

00:19:22.656 --> 00:19:25.736 A:middle
then tie it up with our own

00:19:25.736 --> 00:19:26.386 A:middle
private function.

00:19:27.496 --> 00:19:28.796 A:middle
And in that function, we're

00:19:28.796 --> 00:19:29.546 A:middle
simply calling

00:19:29.546 --> 00:19:30.456 A:middle
PerformNotification

00:19:30.456 --> 00:19:31.036 A:middle
DefaultAction.

00:19:31.826 --> 00:19:33.576 A:middle
So by simply doing that, you get

00:19:33.576 --> 00:19:35.186 A:middle
this functionality to call this

00:19:35.186 --> 00:19:36.446 A:middle
method programmatically from

00:19:36.446 --> 00:19:37.586 A:middle
anywhere in your content

00:19:37.586 --> 00:19:40.526 A:middle
extension code.

00:19:40.726 --> 00:19:42.136 A:middle
So that was launching the

00:19:42.136 --> 00:19:42.676 A:middle
application.

00:19:43.476 --> 00:19:44.556 A:middle
What about dismissing the

00:19:44.556 --> 00:19:48.336 A:middle
content extension view?

00:19:48.546 --> 00:19:49.926 A:middle
Again, let's take a look at how

00:19:49.926 --> 00:19:51.046 A:middle
the user can do that today.

00:19:51.636 --> 00:19:52.866 A:middle
They can do that by tapping the

00:19:52.866 --> 00:19:54.566 A:middle
Dismiss Button in the top right

00:19:55.896 --> 00:19:57.846 A:middle
corner, or you can create your

00:19:57.846 --> 00:19:59.346 A:middle
own custom notification action,

00:19:59.676 --> 00:20:01.126 A:middle
which would in turn dismiss the


00:19:59.676 --> 00:20:01.126 A:middle
which would in turn dismiss the

00:20:01.126 --> 00:20:02.086 A:middle
content extension view.

00:20:02.736 --> 00:20:04.056 A:middle
Which you can set up, as we saw

00:20:04.056 --> 00:20:05.706 A:middle
before, by passing dismiss to

00:20:05.706 --> 00:20:06.456 A:middle
the completion block.

00:20:08.456 --> 00:20:10.476 A:middle
But again, what if we want to

00:20:10.476 --> 00:20:12.326 A:middle
dismiss the view through our own

00:20:12.326 --> 00:20:14.006 A:middle
custom buttons, and we want to

00:20:14.006 --> 00:20:15.006 A:middle
do this programmatically?

00:20:15.436 --> 00:20:16.986 A:middle
Say that when the user taps the

00:20:16.986 --> 00:20:18.146 A:middle
Like button, then the view

00:20:18.146 --> 00:20:19.646 A:middle
dismisses because we feel the

00:20:19.646 --> 00:20:21.276 A:middle
user's done interacting with the

00:20:21.276 --> 00:20:22.046 A:middle
content extension.

00:20:23.436 --> 00:20:25.266 A:middle
To enable this as well, there's

00:20:25.266 --> 00:20:26.616 A:middle
a new API called

00:20:26.616 --> 00:20:27.826 A:middle
dismissNotificationContent

00:20:27.826 --> 00:20:29.306 A:middle
Extension that's on the

00:20:29.306 --> 00:20:30.446 A:middle
NSExtensionContext.

00:20:32.896 --> 00:20:35.046 A:middle
We go back to how we set up our

00:20:35.046 --> 00:20:36.556 A:middle
Like button, and now this time,

00:20:36.986 --> 00:20:39.836 A:middle
we also call the new function

00:20:39.966 --> 00:20:41.376 A:middle
that we added for dismissing the

00:20:41.376 --> 00:20:42.866 A:middle
content extension view.

00:20:44.676 --> 00:20:46.816 A:middle
And once we set this up, now

00:20:46.816 --> 00:20:47.816 A:middle
when the user takes the like

00:20:47.816 --> 00:20:49.526 A:middle
action, the view of the content

00:20:49.526 --> 00:20:52.776 A:middle
extension gets dismissed.

00:20:52.826 --> 00:20:53.986 A:middle
Now one thing to note here.

00:20:53.986 --> 00:20:56.156 A:middle
That calling this method does

00:20:56.156 --> 00:20:57.746 A:middle
not withdraw the notification

00:20:57.876 --> 00:20:59.146 A:middle
that was posted to the user.

00:20:59.836 --> 00:21:01.816 A:middle
If you want to do that then use


00:20:59.836 --> 00:21:01.816 A:middle
If you want to do that then use

00:21:01.816 --> 00:21:04.236 A:middle
the existing API for removing

00:21:04.236 --> 00:21:05.356 A:middle
delivered notifications with

00:21:05.356 --> 00:21:06.696 A:middle
identifiers to get that

00:21:06.696 --> 00:21:07.916 A:middle
functionality.

00:21:09.696 --> 00:21:11.296 A:middle
All right, now let's summarize

00:21:11.296 --> 00:21:13.266 A:middle
all the new APIs that we've

00:21:13.266 --> 00:21:14.486 A:middle
looked at today around the

00:21:14.486 --> 00:21:15.926 A:middle
notification content extensions.

00:21:18.536 --> 00:21:20.506 A:middle
We started with talking about

00:21:20.506 --> 00:21:22.166 A:middle
notification actions where now

00:21:22.376 --> 00:21:23.356 A:middle
you can access these

00:21:23.356 --> 00:21:25.016 A:middle
notification actions as well as

00:21:25.016 --> 00:21:26.686 A:middle
replace them dynamically from

00:21:26.686 --> 00:21:27.656 A:middle
anywhere in your content

00:21:27.656 --> 00:21:28.646 A:middle
extension code.

00:21:28.846 --> 00:21:33.196 A:middle
You can now opt in to having

00:21:33.196 --> 00:21:34.456 A:middle
user interaction based on

00:21:34.456 --> 00:21:35.886 A:middle
touches within your content

00:21:35.886 --> 00:21:36.666 A:middle
extension views.

00:21:36.666 --> 00:21:40.436 A:middle
You can programmatically launch

00:21:40.436 --> 00:21:42.116 A:middle
the application from anywhere in

00:21:42.116 --> 00:21:44.926 A:middle
your content extension code as

00:21:44.926 --> 00:21:46.196 A:middle
well as dismiss the content

00:21:46.196 --> 00:21:48.086 A:middle
extension view, depending upon

00:21:48.266 --> 00:21:49.936 A:middle
where you feel it serves best

00:21:50.056 --> 00:21:51.686 A:middle
your user's experience around

00:21:51.686 --> 00:21:52.576 A:middle
the content extensions.

00:21:52.896 --> 00:21:56.316 A:middle
So that's a varied list of APIs

00:21:56.316 --> 00:21:57.876 A:middle
around content extensions, and

00:21:57.876 --> 00:21:59.436 A:middle
we hope this really helps you

00:21:59.436 --> 00:22:01.366 A:middle
enhance your user's experience


00:21:59.436 --> 00:22:01.366 A:middle
enhance your user's experience

00:22:01.366 --> 00:22:02.476 A:middle
around your content extensions

00:22:02.546 --> 00:22:03.806 A:middle
and then you start using these

00:22:03.806 --> 00:22:04.096 A:middle
APIs.

00:22:04.096 --> 00:22:06.726 A:middle
So that was notification content

00:22:06.726 --> 00:22:07.276 A:middle
extensions.

00:22:07.866 --> 00:22:09.836 A:middle
Now, the next topic today we're

00:22:09.836 --> 00:22:11.316 A:middle
going to look at is notification

00:22:11.316 --> 00:22:12.986 A:middle
management, and to tell you all

00:22:12.986 --> 00:22:14.376 A:middle
about that, let me invite my

00:22:14.376 --> 00:22:15.576 A:middle
colleague Teja to the stage.

00:22:15.776 --> 00:22:15.976 A:middle
Thank you.

00:22:16.516 --> 00:22:22.556 A:middle
[ Applause ]

00:22:23.056 --> 00:22:23.946 A:middle
&gt;&gt; Thank you Kritarth.

00:22:24.136 --> 00:22:24.946 A:middle
Hi everyone.

00:22:25.416 --> 00:22:27.206 A:middle
My name is Teja Kondapalli, and

00:22:27.206 --> 00:22:29.026 A:middle
I'm also an engineer on the iOS

00:22:29.026 --> 00:22:30.146 A:middle
Notifications' Team.

00:22:30.546 --> 00:22:31.746 A:middle
And, of course, I'm here to talk

00:22:31.796 --> 00:22:33.216 A:middle
to you about a couple of the new

00:22:33.216 --> 00:22:34.396 A:middle
APIs that we have.

00:22:35.126 --> 00:22:36.546 A:middle
The first of which is

00:22:36.916 --> 00:22:38.476 A:middle
notification management.

00:22:39.256 --> 00:22:40.896 A:middle
But before I dive into this API,

00:22:40.896 --> 00:22:42.916 A:middle
I want to cover some of the user

00:22:42.916 --> 00:22:46.396 A:middle
facing features to give you some

00:22:46.396 --> 00:22:47.776 A:middle
more context and then we can

00:22:47.776 --> 00:22:48.756 A:middle
deep dive into the API.

00:22:53.136 --> 00:22:54.606 A:middle
As our users get more and more

00:22:54.776 --> 00:22:55.546 A:middle
apps on their phones,

00:22:56.026 --> 00:22:57.856 A:middle
notifications become the primary

00:22:57.856 --> 00:22:59.166 A:middle
way that they interact with

00:22:59.166 --> 00:23:00.426 A:middle
these apps.


00:22:59.166 --> 00:23:00.426 A:middle
these apps.

00:23:00.536 --> 00:23:02.516 A:middle
But often, they find themselves

00:23:02.686 --> 00:23:04.356 A:middle
in a situation like this.

00:23:05.176 --> 00:23:07.446 A:middle
With far too many notifications.

00:23:07.766 --> 00:23:09.026 A:middle
And it becomes hard to sift

00:23:09.076 --> 00:23:10.846 A:middle
through and find the important

00:23:10.846 --> 00:23:11.096 A:middle
ones.

00:23:11.646 --> 00:23:14.756 A:middle
So perhaps to make this easier,

00:23:14.756 --> 00:23:16.726 A:middle
this user has decided that

00:23:17.046 --> 00:23:18.386 A:middle
notifications from podcasts

00:23:19.076 --> 00:23:20.026 A:middle
don't need to be shown on the

00:23:20.026 --> 00:23:20.706 A:middle
locked screen.

00:23:21.476 --> 00:23:22.966 A:middle
Right now to configure that

00:23:23.606 --> 00:23:24.546 A:middle
they'd have to launch the

00:23:24.586 --> 00:23:25.896 A:middle
settings app, find

00:23:25.896 --> 00:23:28.506 A:middle
notifications, find the podcast

00:23:29.426 --> 00:23:30.776 A:middle
app, and then they can configure

00:23:30.776 --> 00:23:31.316 A:middle
their settings.

00:23:32.786 --> 00:23:33.976 A:middle
We wanted to make this easier.

00:23:34.616 --> 00:23:37.146 A:middle
So, in iOS 12, we're introducing

00:23:37.146 --> 00:23:39.936 A:middle
a new management view where the

00:23:39.936 --> 00:23:41.936 A:middle
users can configure their

00:23:41.936 --> 00:23:43.836 A:middle
notification settings directly

00:23:43.836 --> 00:23:45.886 A:middle
from the notification without

00:23:46.026 --> 00:23:46.836 A:middle
having to launch the settings

00:23:46.836 --> 00:23:46.976 A:middle
app.

00:23:51.206 --> 00:23:52.586 A:middle
There's three really easy ways

00:23:52.626 --> 00:23:53.696 A:middle
to get into this management

00:23:53.696 --> 00:23:53.936 A:middle
view.

00:23:54.436 --> 00:23:55.826 A:middle
The first is what we just saw.

00:23:56.476 --> 00:23:57.536 A:middle
You simply swipe over a

00:23:57.536 --> 00:23:59.676 A:middle
notification, tap manage, and


00:24:00.416 --> 00:24:02.126 A:middle
the management view comes up.

00:24:03.776 --> 00:24:07.196 A:middle
The second is if you can go into

00:24:07.196 --> 00:24:08.956 A:middle
the rich notification, you can

00:24:08.956 --> 00:24:10.706 A:middle
tap in the right corner, and you

00:24:10.706 --> 00:24:11.866 A:middle
can also launch the management

00:24:11.866 --> 00:24:12.066 A:middle
view.

00:24:12.596 --> 00:24:15.676 A:middle
And the third is actually in the

00:24:15.676 --> 00:24:16.386 A:middle
list itself.

00:24:17.146 --> 00:24:18.616 A:middle
Depending on how your users are

00:24:18.616 --> 00:24:19.476 A:middle
interacting with their

00:24:19.476 --> 00:24:21.006 A:middle
notifications, they will

00:24:21.006 --> 00:24:22.566 A:middle
occasionally see suggestions,

00:24:22.616 --> 00:24:24.446 A:middle
like this one, that ask them if

00:24:24.446 --> 00:24:25.676 A:middle
they want to keep receiving

00:24:25.926 --> 00:24:27.226 A:middle
podcast notifications.

00:24:27.886 --> 00:24:29.496 A:middle
And from here, as well, they can

00:24:29.496 --> 00:24:31.346 A:middle
tap manage and bring up the

00:24:31.346 --> 00:24:32.086 A:middle
management view.

00:24:32.686 --> 00:24:35.456 A:middle
Let's take a closer look at the

00:24:35.456 --> 00:24:36.196 A:middle
management view.

00:24:36.866 --> 00:24:38.626 A:middle
And we obviously have options

00:24:38.626 --> 00:24:40.436 A:middle
here where users can configure

00:24:40.436 --> 00:24:41.606 A:middle
their notification settings

00:24:41.916 --> 00:24:43.216 A:middle
directly from this view.

00:24:44.136 --> 00:24:45.906 A:middle
But if they want to go into the

00:24:45.906 --> 00:24:47.976 A:middle
settings app and configure in a

00:24:47.976 --> 00:24:50.146 A:middle
more detailed manner, they have

00:24:50.146 --> 00:24:52.146 A:middle
a quick link to the settings for

00:24:52.146 --> 00:24:53.356 A:middle
this application, the

00:24:53.356 --> 00:24:55.446 A:middle
notification settings.

00:24:56.106 --> 00:24:58.676 A:middle
A And also from this view, they

00:24:58.676 --> 00:24:59.896 A:middle
have some actions they can take

00:24:59.946 --> 00:25:02.256 A:middle
directly, the first of which


00:24:59.946 --> 00:25:02.256 A:middle
directly, the first of which

00:25:02.256 --> 00:25:04.046 A:middle
says deliver quietly, which is

00:25:04.046 --> 00:25:05.676 A:middle
probably a concept that's new to

00:25:05.676 --> 00:25:06.276 A:middle
all of you.

00:25:07.446 --> 00:25:08.746 A:middle
Some of these management views

00:25:08.906 --> 00:25:10.546 A:middle
will also have an option that

00:25:10.546 --> 00:25:12.816 A:middle
says deliver prominently, so

00:25:12.816 --> 00:25:16.376 A:middle
let's talk about what this

00:25:16.596 --> 00:25:16.746 A:middle
means.

00:25:16.746 --> 00:25:18.486 A:middle
In iOS, we have a lot of

00:25:18.486 --> 00:25:19.846 A:middle
settings that users can

00:25:19.846 --> 00:25:21.686 A:middle
configure, and this is really

00:25:21.686 --> 00:25:22.896 A:middle
great for the power user.

00:25:23.296 --> 00:25:24.756 A:middle
The can customize their settings

00:25:24.756 --> 00:25:27.326 A:middle
to every detail, but for the

00:25:27.326 --> 00:25:29.576 A:middle
regular user, we think that we

00:25:29.576 --> 00:25:31.046 A:middle
can help them out by

00:25:31.046 --> 00:25:32.706 A:middle
categorizing their notification

00:25:32.706 --> 00:25:34.516 A:middle
settings into two big

00:25:34.516 --> 00:25:35.076 A:middle
categories.

00:25:36.016 --> 00:25:37.436 A:middle
Notifications that are delivered

00:25:37.566 --> 00:25:39.486 A:middle
prominently and notifications

00:25:39.536 --> 00:25:40.796 A:middle
that are delivered quietly.

00:25:43.056 --> 00:25:44.926 A:middle
Notifications that are delivered

00:25:44.926 --> 00:25:46.356 A:middle
prominently are what we're used

00:25:46.436 --> 00:25:46.676 A:middle
to.

00:25:47.076 --> 00:25:48.016 A:middle
They show up on the locked

00:25:48.016 --> 00:25:48.426 A:middle
screen.

00:25:49.926 --> 00:25:50.996 A:middle
They show up in notification

00:25:50.996 --> 00:25:51.416 A:middle
center.

00:25:52.076 --> 00:25:53.486 A:middle
They roll down as banners.

00:25:54.226 --> 00:25:56.376 A:middle
They badge the AP icon and they

00:25:56.376 --> 00:25:59.296 A:middle
can play a sound.

00:25:59.466 --> 00:26:00.806 A:middle
Notifications that are delivered


00:25:59.466 --> 00:26:00.806 A:middle
Notifications that are delivered

00:26:00.806 --> 00:26:02.966 A:middle
quietly only show up in

00:26:02.966 --> 00:26:04.556 A:middle
notification center and they

00:26:04.556 --> 00:26:08.156 A:middle
don't play a sound.

00:26:08.346 --> 00:26:09.876 A:middle
And from the management view, in

00:26:09.876 --> 00:26:12.066 A:middle
addition to configuring whether

00:26:12.066 --> 00:26:13.506 A:middle
they want their notifications

00:26:13.886 --> 00:26:15.176 A:middle
delivered prominently or

00:26:15.176 --> 00:26:17.666 A:middle
quietly, users also have the

00:26:17.696 --> 00:26:19.366 A:middle
option to turn off their

00:26:19.366 --> 00:26:20.226 A:middle
notifications.

00:26:21.636 --> 00:26:23.806 A:middle
Now, I know that you might worry

00:26:23.806 --> 00:26:25.146 A:middle
that your users are going to

00:26:25.146 --> 00:26:26.406 A:middle
turn off the notifications for

00:26:26.406 --> 00:26:29.166 A:middle
your app, so we've added this

00:26:29.166 --> 00:26:31.526 A:middle
extra confirmation sheet just in

00:26:31.526 --> 00:26:33.126 A:middle
case they do tap turn off.

00:26:33.806 --> 00:26:35.476 A:middle
And from here, they can also

00:26:35.766 --> 00:26:36.996 A:middle
turn off their notifications.

00:26:37.426 --> 00:26:39.636 A:middle
But we've also added an API to

00:26:39.636 --> 00:26:41.536 A:middle
add a second option to this

00:26:41.906 --> 00:26:44.386 A:middle
confirmation sheet, and podcast

00:26:44.386 --> 00:26:46.166 A:middle
has taken advantage of this API,

00:26:46.706 --> 00:26:48.476 A:middle
so it says configure in podcast.

00:26:49.556 --> 00:26:52.176 A:middle
This is a link that will deep

00:26:52.176 --> 00:26:54.286 A:middle
link within the podcast app to a

00:26:54.326 --> 00:26:56.776 A:middle
custom settings view that allows

00:26:56.776 --> 00:26:59.256 A:middle
the user more granular control

00:26:59.256 --> 00:27:01.106 A:middle
about what kind of podcast


00:26:59.256 --> 00:27:01.106 A:middle
about what kind of podcast

00:27:01.106 --> 00:27:02.696 A:middle
notifications they want.

00:27:04.056 --> 00:27:06.096 A:middle
And as your apps send more and

00:27:06.096 --> 00:27:07.456 A:middle
more notifications and various

00:27:07.456 --> 00:27:09.536 A:middle
type of notifications, we think

00:27:09.536 --> 00:27:12.276 A:middle
it's really important to allow

00:27:12.276 --> 00:27:13.776 A:middle
them this granular level of

00:27:13.776 --> 00:27:15.986 A:middle
control over what kind of

00:27:15.986 --> 00:27:17.626 A:middle
notifications are important to

00:27:17.626 --> 00:27:17.886 A:middle
them.

00:27:21.476 --> 00:27:23.816 A:middle
This link can also be accessed

00:27:23.966 --> 00:27:26.086 A:middle
from the systems settings app

00:27:26.336 --> 00:27:27.886 A:middle
from your apps' notification

00:27:27.886 --> 00:27:28.256 A:middle
settings.

00:27:28.486 --> 00:27:30.046 A:middle
And you can see for podcasts

00:27:30.376 --> 00:27:31.456 A:middle
it's right at the bottom.

00:27:31.856 --> 00:27:33.926 A:middle
It says podcast notifications

00:27:33.966 --> 00:27:34.296 A:middle
settings.

00:27:34.796 --> 00:27:37.356 A:middle
Let's see how we do this in

00:27:37.356 --> 00:27:37.606 A:middle
code.

00:27:38.196 --> 00:27:41.256 A:middle
In the class that conforms to

00:27:41.436 --> 00:27:43.256 A:middle
UNUserNotificationCenter

00:27:43.356 --> 00:27:45.526 A:middle
Delegate, we have a new delegate

00:27:45.526 --> 00:27:45.906 A:middle
method.

00:27:46.566 --> 00:27:48.986 A:middle
Open settings for notification,

00:27:49.816 --> 00:27:51.316 A:middle
and as long as you implement

00:27:51.316 --> 00:27:53.296 A:middle
this delegate method, those

00:27:53.296 --> 00:27:54.866 A:middle
links that we talked about from

00:27:54.866 --> 00:27:56.206 A:middle
the management view, or from the

00:27:56.206 --> 00:27:57.926 A:middle
settings app, will automatically

00:27:57.926 --> 00:28:00.056 A:middle
be populated by the system for


00:27:57.926 --> 00:28:00.056 A:middle
be populated by the system for

00:28:00.056 --> 00:28:00.266 A:middle
you.

00:28:00.846 --> 00:28:03.206 A:middle
So when the user taps on any of

00:28:03.206 --> 00:28:04.456 A:middle
these links, this delegate

00:28:04.456 --> 00:28:06.816 A:middle
method will be called.

00:28:06.986 --> 00:28:09.426 A:middle
And it's really important when

00:28:09.426 --> 00:28:10.696 A:middle
this delegate method is called

00:28:10.696 --> 00:28:12.096 A:middle
that you immediately take your

00:28:12.096 --> 00:28:13.856 A:middle
users into the view where they

00:28:13.856 --> 00:28:15.906 A:middle
can configure their notification

00:28:15.906 --> 00:28:19.106 A:middle
settings within your app.

00:28:19.366 --> 00:28:22.246 A:middle
And if you notice, we have

00:28:22.246 --> 00:28:23.626 A:middle
[inaudible] parameter to this

00:28:23.626 --> 00:28:25.766 A:middle
method, and it is notification.

00:28:26.236 --> 00:28:27.726 A:middle
So depending on where the link

00:28:27.726 --> 00:28:29.126 A:middle
was tapped from, if it was

00:28:29.126 --> 00:28:29.866 A:middle
tapped from one of the

00:28:29.866 --> 00:28:31.686 A:middle
management views, it will have

00:28:31.686 --> 00:28:33.306 A:middle
the value of the notification

00:28:33.566 --> 00:28:34.776 A:middle
that that management view came

00:28:34.776 --> 00:28:35.006 A:middle
from.

00:28:35.996 --> 00:28:37.496 A:middle
If it was tapped from the

00:28:37.496 --> 00:28:39.176 A:middle
settings app, the value of

00:28:39.176 --> 00:28:41.546 A:middle
notification will be nil, and

00:28:41.546 --> 00:28:43.366 A:middle
you can use this information to

00:28:43.366 --> 00:28:44.466 A:middle
show the appropriate

00:28:44.466 --> 00:28:46.366 A:middle
notification settings when this

00:28:46.366 --> 00:28:47.756 A:middle
delegate method is called.

00:28:48.286 --> 00:28:52.066 A:middle
So that's what we have for

00:28:52.066 --> 00:28:53.316 A:middle
notification management.

00:28:53.726 --> 00:28:56.266 A:middle
It's a new way for your users to

00:28:56.616 --> 00:28:57.726 A:middle
configure whether they want

00:28:57.726 --> 00:28:58.986 A:middle
their notifications delivered

00:28:59.306 --> 00:29:02.246 A:middle
prominently or quietly, or turn


00:28:59.306 --> 00:29:02.246 A:middle
prominently or quietly, or turn

00:29:02.246 --> 00:29:04.346 A:middle
them off, or even configure them

00:29:04.346 --> 00:29:07.866 A:middle
at a granular level within your

00:29:09.226 --> 00:29:09.293 A:middle
app.

00:29:09.616 --> 00:29:12.106 A:middle
And to encourage your users to

00:29:12.246 --> 00:29:13.496 A:middle
keep getting your notifications

00:29:13.496 --> 00:29:15.616 A:middle
delivered, we think it's really

00:29:15.616 --> 00:29:16.976 A:middle
important that you make the

00:29:16.976 --> 00:29:18.576 A:middle
content in the notifications

00:29:18.956 --> 00:29:19.406 A:middle
relevant.

00:29:20.596 --> 00:29:23.276 A:middle
We also encourage you to use

00:29:23.426 --> 00:29:24.826 A:middle
thread identifiers to group the

00:29:24.826 --> 00:29:26.276 A:middle
notifications when you think

00:29:26.276 --> 00:29:26.986 A:middle
it's appropriate.

00:29:28.036 --> 00:29:29.046 A:middle
This will help the users

00:29:29.156 --> 00:29:31.706 A:middle
organize their lists better and

00:29:32.136 --> 00:29:33.556 A:middle
will make sure that they're not

00:29:33.556 --> 00:29:35.186 A:middle
overwhelmed by the notifications

00:29:35.276 --> 00:29:36.526 A:middle
from your app.

00:29:37.716 --> 00:29:40.406 A:middle
We also think that as your apps

00:29:40.486 --> 00:29:41.786 A:middle
send various types of

00:29:41.786 --> 00:29:43.496 A:middle
notifications, it's really

00:29:43.496 --> 00:29:44.996 A:middle
important to provide that custom

00:29:44.996 --> 00:29:47.706 A:middle
settings view within that app so

00:29:47.706 --> 00:29:48.986 A:middle
that users have more granular

00:29:48.986 --> 00:29:50.566 A:middle
control about what kind of

00:29:50.566 --> 00:29:52.336 A:middle
notifications are important to

00:29:52.336 --> 00:29:52.686 A:middle
them.

00:29:54.046 --> 00:29:55.036 A:middle
That's what we have for

00:29:55.036 --> 00:29:56.216 A:middle
notification management.

00:29:57.046 --> 00:29:59.226 A:middle
And the next big feature I want

00:29:59.226 --> 00:30:00.496 A:middle
to talk to you about is


00:29:59.226 --> 00:30:00.496 A:middle
to talk to you about is

00:30:00.496 --> 00:30:01.986 A:middle
provisional authorization.

00:30:02.566 --> 00:30:06.976 A:middle
Right now, when a user installs

00:30:06.976 --> 00:30:08.736 A:middle
your app, before they start

00:30:08.736 --> 00:30:10.606 A:middle
receiving notifications, at some

00:30:10.656 --> 00:30:12.396 A:middle
point they'll have to respond to

00:30:12.396 --> 00:30:13.586 A:middle
a prompt that looks like this,

00:30:14.856 --> 00:30:15.686 A:middle
which is asking them if they

00:30:15.686 --> 00:30:16.906 A:middle
want these notifications.

00:30:17.606 --> 00:30:19.366 A:middle
And the biggest problem with

00:30:19.366 --> 00:30:21.596 A:middle
this is, at this point, the user

00:30:22.146 --> 00:30:23.326 A:middle
doesn't know what kind of

00:30:23.526 --> 00:30:25.126 A:middle
notifications this app is going

00:30:25.186 --> 00:30:26.676 A:middle
to send, so they don't know if

00:30:26.676 --> 00:30:27.876 A:middle
they want them or not.

00:30:29.026 --> 00:30:31.906 A:middle
So, in iOS 12, we're introducing

00:30:32.106 --> 00:30:34.136 A:middle
provisional authorization, and

00:30:34.136 --> 00:30:36.356 A:middle
this is an automatic trial of

00:30:36.356 --> 00:30:38.346 A:middle
the notifications from your app.

00:30:39.376 --> 00:30:41.126 A:middle
This will help your users make a

00:30:41.126 --> 00:30:43.046 A:middle
more informed decision on

00:30:43.046 --> 00:30:44.156 A:middle
whether they want these

00:30:44.156 --> 00:30:45.336 A:middle
notifications or not.

00:30:46.046 --> 00:30:48.366 A:middle
So you can opt into this, and if

00:30:48.366 --> 00:30:51.256 A:middle
you do, your users will not get

00:30:51.256 --> 00:30:52.586 A:middle
that authorization prompt that

00:30:52.586 --> 00:30:53.196 A:middle
we just saw.

00:30:53.816 --> 00:30:55.506 A:middle
Instead, the notifications from

00:30:55.506 --> 00:30:56.686 A:middle
your app will automatically

00:30:56.686 --> 00:30:57.896 A:middle
start getting delivered.

00:30:58.546 --> 00:31:00.946 A:middle
But these notifications will be


00:30:58.546 --> 00:31:00.946 A:middle
But these notifications will be

00:31:00.946 --> 00:31:04.076 A:middle
delivered quietly, and if we

00:31:04.076 --> 00:31:06.086 A:middle
recall, notifications that are

00:31:06.086 --> 00:31:08.416 A:middle
delivered quietly only show up

00:31:08.466 --> 00:31:10.496 A:middle
in notifications center, and

00:31:10.606 --> 00:31:11.586 A:middle
they don't play a sound.

00:31:15.656 --> 00:31:17.796 A:middle
Notifications that are delivered

00:31:17.976 --> 00:31:19.546 A:middle
with provisional authorization

00:31:19.916 --> 00:31:22.156 A:middle
will have a prompt like this on

00:31:22.156 --> 00:31:23.246 A:middle
the notification itself.

00:31:23.846 --> 00:31:26.976 A:middle
And this will help the users

00:31:27.966 --> 00:31:29.666 A:middle
decide after having received a

00:31:29.666 --> 00:31:31.596 A:middle
few notifications whether they

00:31:31.596 --> 00:31:32.736 A:middle
want to keep getting these

00:31:32.736 --> 00:31:35.236 A:middle
notifications or whether they

00:31:35.236 --> 00:31:39.746 A:middle
want to turn them off.

00:31:40.926 --> 00:31:42.226 A:middle
And this turn off confirmation

00:31:42.226 --> 00:31:44.056 A:middle
sheet will also have the custom

00:31:44.056 --> 00:31:46.076 A:middle
settings link if you have

00:31:46.076 --> 00:31:47.346 A:middle
provided it.

00:31:49.176 --> 00:31:50.956 A:middle
Let's see how you can do this in

00:31:50.956 --> 00:31:51.246 A:middle
code.

00:31:52.426 --> 00:31:53.826 A:middle
In the location where you

00:31:53.826 --> 00:31:55.746 A:middle
regularly request authorization,

00:31:56.596 --> 00:31:58.506 A:middle
in addition to whatever options

00:31:58.506 --> 00:32:00.226 A:middle
you might be requesting, you can


00:31:58.506 --> 00:32:00.226 A:middle
you might be requesting, you can

00:32:00.356 --> 00:32:04.366 A:middle
add a dot qualifying option

00:32:04.366 --> 00:32:05.436 A:middle
called .provisional.

00:32:06.176 --> 00:32:09.806 A:middle
And if you include this, you

00:32:10.036 --> 00:32:11.546 A:middle
will automatically start

00:32:11.546 --> 00:32:13.246 A:middle
participating in the trial.

00:32:14.786 --> 00:32:16.126 A:middle
It's really important to note

00:32:16.356 --> 00:32:19.656 A:middle
that the .provisional option is

00:32:19.656 --> 00:32:21.036 A:middle
in addition to whatever other

00:32:21.036 --> 00:32:22.826 A:middle
options you may be providing.

00:32:23.626 --> 00:32:24.796 A:middle
That's because if the users

00:32:24.796 --> 00:32:25.856 A:middle
decide to keep getting your

00:32:25.856 --> 00:32:27.826 A:middle
notifications delivered, we want

00:32:27.826 --> 00:32:28.896 A:middle
to know how you want them

00:32:28.896 --> 00:32:31.736 A:middle
delivered, with badges or sounds

00:32:31.856 --> 00:32:32.536 A:middle
or as alerts.

00:32:33.186 --> 00:32:35.436 A:middle
So that's what provisional

00:32:35.436 --> 00:32:36.386 A:middle
authorization is.

00:32:36.526 --> 00:32:38.236 A:middle
It's an automatic trial of the

00:32:38.236 --> 00:32:40.156 A:middle
notifications from your app to

00:32:40.156 --> 00:32:41.546 A:middle
help your users make a more

00:32:41.546 --> 00:32:43.616 A:middle
informed decision about whether

00:32:43.616 --> 00:32:45.116 A:middle
they want these notifications.

00:32:46.466 --> 00:32:48.366 A:middle
And again, to encourage your

00:32:48.366 --> 00:32:49.716 A:middle
users to keep getting your

00:32:49.716 --> 00:32:51.586 A:middle
notifications delivered, it's

00:32:51.626 --> 00:32:53.266 A:middle
really important to make the

00:32:53.266 --> 00:32:55.316 A:middle
content in your notifications

00:32:55.576 --> 00:32:56.066 A:middle
relevant.

00:32:57.226 --> 00:32:59.756 A:middle
And also, it's really important

00:32:59.756 --> 00:33:01.356 A:middle
to use .provisional as a


00:32:59.756 --> 00:33:01.356 A:middle
to use .provisional as a

00:33:01.406 --> 00:33:03.506 A:middle
qualifier option in addition to

00:33:03.766 --> 00:33:05.206 A:middle
whatever other options you're

00:33:05.206 --> 00:33:05.846 A:middle
requesting.

00:33:06.806 --> 00:33:07.836 A:middle
That's what we have for

00:33:07.836 --> 00:33:09.426 A:middle
provisional authorization.

00:33:10.016 --> 00:33:14.816 A:middle
And the last big feature that I

00:33:14.816 --> 00:33:16.396 A:middle
want to talk to you about are

00:33:16.396 --> 00:33:17.456 A:middle
critical alerts.

00:33:18.096 --> 00:33:22.466 A:middle
Often when I'm in the middle of

00:33:22.466 --> 00:33:23.906 A:middle
a meeting or attending something

00:33:23.906 --> 00:33:25.906 A:middle
important, my phone looks like

00:33:25.966 --> 00:33:26.086 A:middle
this.

00:33:26.506 --> 00:33:27.936 A:middle
And as you can see, I have do

00:33:27.936 --> 00:33:29.026 A:middle
not disturb turned on.

00:33:29.736 --> 00:33:31.156 A:middle
Or at least I have the ringer

00:33:31.156 --> 00:33:32.606 A:middle
switch turned off so that I

00:33:32.606 --> 00:33:34.476 A:middle
don't hear any sounds when I get

00:33:34.836 --> 00:33:35.616 A:middle
notifications.

00:33:36.506 --> 00:33:38.326 A:middle
And usually this is really good,

00:33:39.346 --> 00:33:42.836 A:middle
but I would have missed a really

00:33:42.836 --> 00:33:44.626 A:middle
important notification like this

00:33:44.626 --> 00:33:44.856 A:middle
one.

00:33:45.606 --> 00:33:46.666 A:middle
This is a health-related

00:33:46.666 --> 00:33:47.526 A:middle
notification.

00:33:48.016 --> 00:33:49.326 A:middle
That's from a glucose monitor

00:33:49.606 --> 00:33:51.336 A:middle
that's warning me of low blood

00:33:51.336 --> 00:33:53.456 A:middle
sugar, and this is something I

00:33:53.456 --> 00:33:54.746 A:middle
would want to see immediately.

00:33:55.996 --> 00:33:58.156 A:middle
Scenarios like this made us

00:33:58.156 --> 00:34:00.396 A:middle
realize that we need a new type


00:33:58.156 --> 00:34:00.396 A:middle
realize that we need a new type

00:34:00.396 --> 00:34:02.556 A:middle
of notification, and this is

00:34:02.556 --> 00:34:04.686 A:middle
what we call critical alerts.

00:34:05.596 --> 00:34:08.025 A:middle
Critical alerts are medical- and

00:34:08.025 --> 00:34:09.626 A:middle
health-related notifications.

00:34:10.706 --> 00:34:12.176 A:middle
Or home- and security-related

00:34:12.176 --> 00:34:13.005 A:middle
notifications.

00:34:14.286 --> 00:34:16.406 A:middle
Or public safety notifications.

00:34:16.766 --> 00:34:18.446 A:middle
And the key to a critical alert

00:34:19.106 --> 00:34:21.616 A:middle
is that it requires the user to

00:34:21.616 --> 00:34:22.976 A:middle
take action immediately.

00:34:26.235 --> 00:34:27.716 A:middle
The way that critical alerts

00:34:27.746 --> 00:34:30.065 A:middle
behave is that they bypass both

00:34:30.166 --> 00:34:31.516 A:middle
do not disturb and the ringer

00:34:31.516 --> 00:34:34.186 A:middle
switch, and they will play a

00:34:34.186 --> 00:34:34.585 A:middle
sound.

00:34:34.726 --> 00:34:35.936 A:middle
And they can even play a custom

00:34:35.936 --> 00:34:36.315 A:middle
sound.

00:34:37.406 --> 00:34:38.616 A:middle
But what that means is that

00:34:38.616 --> 00:34:40.896 A:middle
these are very disruptive, and

00:34:40.896 --> 00:34:42.795 A:middle
for that reason we don't think

00:34:43.106 --> 00:34:44.806 A:middle
that all apps should be able to

00:34:44.806 --> 00:34:46.856 A:middle
send critical notifications.

00:34:47.315 --> 00:34:47.996 A:middle
Critical alerts.

00:34:49.626 --> 00:34:51.266 A:middle
So in order to start sending a

00:34:51.266 --> 00:34:53.096 A:middle
critical alert, you will need to

00:34:53.096 --> 00:34:55.436 A:middle
apply for entitlement, and you

00:34:55.436 --> 00:34:56.315 A:middle
can do that on the

00:34:56.315 --> 00:34:58.176 A:middle
developer.apple website.

00:34:59.776 --> 00:35:01.236 A:middle
This is what a critical alert


00:34:59.776 --> 00:35:01.236 A:middle
This is what a critical alert

00:35:01.236 --> 00:35:03.556 A:middle
looks like, and you can see that

00:35:03.556 --> 00:35:05.446 A:middle
it has a unique icon indicating

00:35:05.446 --> 00:35:06.156 A:middle
that it's critical.

00:35:06.706 --> 00:35:08.486 A:middle
And it would have also come in

00:35:08.616 --> 00:35:08.976 A:middle
with a sound.

00:35:12.336 --> 00:35:14.126 A:middle
Critical alerts also have their

00:35:14.196 --> 00:35:16.256 A:middle
own section in notifications

00:35:16.256 --> 00:35:16.626 A:middle
settings.

00:35:17.996 --> 00:35:20.446 A:middle
This means that a user can

00:35:20.446 --> 00:35:22.126 A:middle
choose to allow critical alerts

00:35:22.126 --> 00:35:24.456 A:middle
for a particular application but

00:35:24.456 --> 00:35:26.276 A:middle
choose not to allow any other

00:35:26.276 --> 00:35:27.386 A:middle
type of notification.

00:35:27.926 --> 00:35:32.306 A:middle
And before users start receiving

00:35:32.306 --> 00:35:33.936 A:middle
critical alerts, they will have

00:35:33.936 --> 00:35:35.866 A:middle
to accept a prompt that looks

00:35:35.866 --> 00:35:37.416 A:middle
like this that's asking them

00:35:37.416 --> 00:35:39.216 A:middle
specifically whether they want

00:35:39.216 --> 00:35:41.046 A:middle
to accept critical alerts from a

00:35:41.046 --> 00:35:42.266 A:middle
particular application.

00:35:43.576 --> 00:35:45.346 A:middle
So, of course, in order to start

00:35:45.456 --> 00:35:47.196 A:middle
sending critical alerts, you'll

00:35:47.196 --> 00:35:48.576 A:middle
have to request authorization.

00:35:49.266 --> 00:35:50.536 A:middle
So after you apply for

00:35:50.536 --> 00:35:53.166 A:middle
entitlement and get it, in the

00:35:53.166 --> 00:35:54.356 A:middle
place where you regularly

00:35:54.356 --> 00:35:56.586 A:middle
request authorization, in

00:35:56.586 --> 00:35:58.366 A:middle
addition to whatever other

00:35:58.366 --> 00:36:00.916 A:middle
options you want to request, you


00:35:58.366 --> 00:36:00.916 A:middle
options you want to request, you

00:36:00.916 --> 00:36:02.146 A:middle
can also request a

00:36:02.146 --> 00:36:04.096 A:middle
.criticalAlert option.

00:36:05.126 --> 00:36:07.086 A:middle
And this will give your users

00:36:07.086 --> 00:36:07.696 A:middle
the prompt.

00:36:13.046 --> 00:36:14.116 A:middle
And let's see how it actually

00:36:14.116 --> 00:36:15.416 A:middle
set up and send a critical

00:36:15.416 --> 00:36:15.646 A:middle
alert.

00:36:15.646 --> 00:36:17.596 A:middle
It actually behaves very

00:36:17.596 --> 00:36:18.926 A:middle
similarly to a regular

00:36:18.926 --> 00:36:19.696 A:middle
notification.

00:36:20.376 --> 00:36:21.726 A:middle
You can see that I just set up a

00:36:21.726 --> 00:36:23.476 A:middle
notification with the title body

00:36:23.476 --> 00:36:25.576 A:middle
and category identifier, but

00:36:25.576 --> 00:36:26.986 A:middle
what distinguishes this as a

00:36:26.986 --> 00:36:28.536 A:middle
critical alert is that it plays

00:36:28.536 --> 00:36:29.136 A:middle
a sound.

00:36:29.596 --> 00:36:31.046 A:middle
So I need to set a critical

00:36:31.046 --> 00:36:32.166 A:middle
alert sound.

00:36:32.806 --> 00:36:35.346 A:middle
And here, you can see that I'm

00:36:35.346 --> 00:36:37.286 A:middle
setting the default critical

00:36:37.286 --> 00:36:38.926 A:middle
alert sound that's provided by

00:36:38.926 --> 00:36:39.456 A:middle
the framework.

00:36:40.186 --> 00:36:43.756 A:middle
I can also set a custom sound.

00:36:44.716 --> 00:36:46.726 A:middle
And I can also set a custom

00:36:46.816 --> 00:36:48.006 A:middle
audio volume level.

00:36:48.996 --> 00:36:52.896 A:middle
And of course, critical alerts

00:36:52.896 --> 00:36:54.926 A:middle
can also be push notifications

00:36:55.326 --> 00:36:57.356 A:middle
so all of this information can

00:36:57.356 --> 00:36:59.616 A:middle
be set in the push payload as

00:36:59.616 --> 00:36:59.826 A:middle
well.


00:37:01.106 --> 00:37:01.966 A:middle
So that's what we have for

00:37:01.966 --> 00:37:02.746 A:middle
critical alerts.

00:37:03.356 --> 00:37:04.586 A:middle
They're a new type of

00:37:05.326 --> 00:37:07.266 A:middle
notification that requires the

00:37:07.306 --> 00:37:08.886 A:middle
users to take action

00:37:08.966 --> 00:37:09.796 A:middle
immediately.

00:37:10.376 --> 00:37:12.666 A:middle
And they're very disruptive, so

00:37:12.666 --> 00:37:14.206 A:middle
you need entitlement to be able

00:37:14.206 --> 00:37:14.656 A:middle
to send them.

00:37:18.496 --> 00:37:20.226 A:middle
So that's all the new exciting

00:37:20.226 --> 00:37:22.396 A:middle
APIs that we have for you today.

00:37:23.036 --> 00:37:24.486 A:middle
I just want to quickly go over

00:37:24.816 --> 00:37:25.996 A:middle
all the things that we covered.

00:37:26.656 --> 00:37:30.656 A:middle
We talked about how you can use

00:37:30.756 --> 00:37:32.356 A:middle
thread identifiers to group your

00:37:32.356 --> 00:37:35.136 A:middle
notifications to help your users

00:37:35.136 --> 00:37:36.576 A:middle
organize their notification

00:37:36.576 --> 00:37:38.706 A:middle
lists better.

00:37:38.896 --> 00:37:40.206 A:middle
We talked about all the great

00:37:40.206 --> 00:37:42.116 A:middle
new APIs around notification

00:37:42.116 --> 00:37:44.046 A:middle
content extensions, which will

00:37:44.046 --> 00:37:45.366 A:middle
help you make your rich

00:37:45.366 --> 00:37:46.956 A:middle
notifications much more

00:37:46.996 --> 00:37:47.676 A:middle
interactive.

00:37:48.256 --> 00:37:51.176 A:middle
We talked about how you can

00:37:51.176 --> 00:37:52.796 A:middle
provide a custom settings view

00:37:52.796 --> 00:37:54.746 A:middle
within your app to allow your

00:37:54.746 --> 00:37:57.256 A:middle
users more granular control over

00:37:57.256 --> 00:37:59.626 A:middle
what kind of notifications they

00:37:59.626 --> 00:38:02.926 A:middle
want to receive.


00:37:59.626 --> 00:38:02.926 A:middle
want to receive.

00:38:03.096 --> 00:38:04.496 A:middle
We also talked about provisional

00:38:04.496 --> 00:38:06.086 A:middle
authorizations, which is an

00:38:06.146 --> 00:38:07.306 A:middle
automatic trial of the

00:38:07.306 --> 00:38:08.876 A:middle
notifications from your app,

00:38:09.626 --> 00:38:10.806 A:middle
which will help you users make a

00:38:10.806 --> 00:38:13.196 A:middle
more informed decision about

00:38:13.196 --> 00:38:14.146 A:middle
whether they want these

00:38:14.146 --> 00:38:15.386 A:middle
notifications or not.

00:38:15.956 --> 00:38:18.416 A:middle
And last, we talked about

00:38:18.456 --> 00:38:20.546 A:middle
critical alerts, which are a new

00:38:20.546 --> 00:38:22.606 A:middle
type of notification that

00:38:22.976 --> 00:38:24.566 A:middle
requires the user to take action

00:38:24.566 --> 00:38:25.976 A:middle
immediately and that are

00:38:25.976 --> 00:38:26.686 A:middle
disruptive.

00:38:27.446 --> 00:38:29.236 A:middle
So we hope you take advantage of

00:38:29.306 --> 00:38:31.506 A:middle
all of these great APIs and make

00:38:31.506 --> 00:38:33.236 A:middle
the notification experience for

00:38:33.236 --> 00:38:34.556 A:middle
your users even better.

00:38:35.556 --> 00:38:36.886 A:middle
You can find all the information

00:38:36.886 --> 00:38:37.976 A:middle
about this session on our

00:38:37.976 --> 00:38:39.206 A:middle
sessions' page at

00:38:39.206 --> 00:38:40.776 A:middle
developer.apple.com.

00:38:41.136 --> 00:38:42.726 A:middle
We're session 710.

00:38:43.406 --> 00:38:45.096 A:middle
We have another session just

00:38:45.096 --> 00:38:46.636 A:middle
following this one in hall three

00:38:46.966 --> 00:38:48.136 A:middle
called using grouped

00:38:48.196 --> 00:38:50.096 A:middle
notification where we'll help

00:38:50.096 --> 00:38:52.136 A:middle
you determine how to best group

00:38:52.136 --> 00:38:54.346 A:middle
notifications for your app.

00:38:54.736 --> 00:38:56.336 A:middle
We have two notifications labs,

00:38:56.686 --> 00:38:58.176 A:middle
one today and one tomorrow,

00:38:58.426 --> 00:38:59.636 A:middle
where you can come and ask the

00:38:59.636 --> 00:39:01.396 A:middle
engineers on our team any


00:38:59.636 --> 00:39:01.396 A:middle
engineers on our team any

00:39:01.396 --> 00:39:03.456 A:middle
questions that you may have.

00:39:03.456 --> 00:39:05.416 A:middle
And on Friday morning, we have

00:39:05.416 --> 00:39:06.806 A:middle
an interesting session called

00:39:06.806 --> 00:39:08.166 A:middle
designing notifications.

00:39:08.656 --> 00:39:09.776 A:middle
That's going to be hosted by the

00:39:09.776 --> 00:39:11.726 A:middle
designers who helped us come up

00:39:11.726 --> 00:39:13.526 A:middle
with the designs for these, and

00:39:13.566 --> 00:39:14.566 A:middle
they'll be talking about

00:39:14.916 --> 00:39:16.716 A:middle
notification best practices.

00:39:17.466 --> 00:39:18.866 A:middle
Thank you and have a great dot

00:39:18.866 --> 00:39:18.976 A:middle
dot.

00:39:19.508 --> 00:39:21.508 A:middle
[ Applause ]
