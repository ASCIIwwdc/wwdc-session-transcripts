WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:00:00.506 --> 00:00:11.026 A:middle
[ Silence ]

00:00:11.526 --> 00:00:15.686 A:middle
&gt;&gt; Hi and welcome to Integrating
Passbook into your Ecosystem.

00:00:16.056 --> 00:00:18.676 A:middle
My name is Joelle Lam,
an Engineering Manager

00:00:18.676 --> 00:00:22.736 A:middle
at the Apple Store App Team,
also the Engineering Lead

00:00:22.736 --> 00:00:26.436 A:middle
of Apple Store Gift Card
in Passbook from WWDC

00:00:26.436 --> 00:00:28.696 A:middle
to its launch in October.

00:00:29.296 --> 00:00:33.746 A:middle
Last year iOS 6 announced
Passbook.

00:00:34.616 --> 00:00:37.756 A:middle
Passbook was this way you can
include your boarding passes,

00:00:38.086 --> 00:00:42.566 A:middle
your movie tickets and more on
your iPhone or your iPod Touch.

00:00:44.056 --> 00:00:48.086 A:middle
Now, us being the Apple
Store Engineering Team,

00:00:48.656 --> 00:00:52.616 A:middle
we knew we wanted to be part of
this, we knew we were missing

00:00:52.616 --> 00:00:56.196 A:middle
out if we didn't get involved
in the Passbook Ecosystem.

00:00:57.216 --> 00:01:03.006 A:middle
So, very quickly came Apple
Store Gift Card in Passbook.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:00:57.216 --> 00:01:03.006 A:middle
So, very quickly came Apple
Store Gift Card in Passbook.

00:01:04.396 --> 00:01:07.496 A:middle
Now, I'm not from
the Passbook Team.

00:01:07.706 --> 00:01:10.776 A:middle
If anything I'm more
like you, I sat there

00:01:10.896 --> 00:01:12.506 A:middle
and watched the WWDC sessions,

00:01:12.596 --> 00:01:15.816 A:middle
I'm like an external
developer looking

00:01:15.816 --> 00:01:18.986 A:middle
onto iOS technologies asking,

00:01:19.776 --> 00:01:22.296 A:middle
"How do I enrich
the user experience?

00:01:22.796 --> 00:01:26.436 A:middle
How do I bring to life
some everyday things,

00:01:26.486 --> 00:01:29.596 A:middle
these everyday things that
used to exist in our pockets?"

00:01:30.076 --> 00:01:33.986 A:middle
OK. So, let's do
a quick overview.

00:01:33.986 --> 00:01:37.936 A:middle
We're first going to talk
about Apple Store Gift Card,

00:01:38.236 --> 00:01:40.576 A:middle
this is all about
pulling back that curtain

00:01:41.076 --> 00:01:42.106 A:middle
and showing you a little bit

00:01:42.106 --> 00:01:44.446 A:middle
about what we did
and why we did it.

00:01:45.736 --> 00:01:48.316 A:middle
Then we'll go into
leveraging existing systems.

00:01:48.516 --> 00:01:53.376 A:middle
I thought this was so important
because some of you guys are

00:01:53.376 --> 00:01:57.766 A:middle
out there, you have these huge
systems and you're wondering,

00:01:58.146 --> 00:02:00.546 A:middle
"Can I bring Passbook
to my Ecosystem?"

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:01:58.146 --> 00:02:00.546 A:middle
"Can I bring Passbook
to my Ecosystem?"

00:02:01.226 --> 00:02:05.936 A:middle
You have ASP downstream, how
many weeks do I have to prepare

00:02:05.936 --> 00:02:07.596 A:middle
for it, to talk to a DVA just

00:02:07.596 --> 00:02:10.126 A:middle
to get a database
let alone 3, right?

00:02:11.466 --> 00:02:15.576 A:middle
And then I have to do security
review just to get the ACLs

00:02:15.576 --> 00:02:19.206 A:middle
to talk to my security
systems or talk to my services.

00:02:19.236 --> 00:02:24.406 A:middle
So, leveraging existing systems
is all about bringing Passbook

00:02:24.406 --> 00:02:28.426 A:middle
to your Ecosystem no
matter how complex it is.

00:02:30.436 --> 00:02:32.666 A:middle
Then we'll talk about
determining complexity.

00:02:33.676 --> 00:02:38.186 A:middle
This is kind of an experience of
wisdom of what we think it talks

00:02:38.186 --> 00:02:41.336 A:middle
to determine the level of
effort to build your pass.

00:02:42.546 --> 00:02:46.136 A:middle
And finally, we'll do some
web services tips and tricks.

00:02:46.136 --> 00:02:49.456 A:middle
These tips and tricks are kind
of separated by complexity level

00:02:49.456 --> 00:02:52.006 A:middle
so they'll be something
there a lot of good meat

00:02:52.006 --> 00:02:53.976 A:middle
but something there for
every single one of you guys.

00:02:55.136 --> 00:02:59.026 A:middle
So, let's get started.

00:02:59.076 --> 00:03:03.156 A:middle
Apple Store Gift Card is all
about giving the people you care

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:02:59.076 --> 00:03:03.156 A:middle
Apple Store Gift Card is all
about giving the people you care

00:03:03.156 --> 00:03:05.246 A:middle
about the products
you love, right?

00:03:06.066 --> 00:03:09.466 A:middle
If you look at this life cycle

00:03:09.466 --> 00:03:13.466 A:middle
of our gift card somebody
will go into the app

00:03:13.736 --> 00:03:16.426 A:middle
or on the website and
they'll purchase a gift card

00:03:17.266 --> 00:03:21.996 A:middle
and this gift card will then
get emailed to the giftee.

00:03:23.206 --> 00:03:24.806 A:middle
So, when we're delivering
that card,

00:03:24.806 --> 00:03:27.706 A:middle
we're actually delivering
an email with a link in it

00:03:28.386 --> 00:03:31.676 A:middle
which allows that person, the
giftee, to receive that card.

00:03:32.866 --> 00:03:34.826 A:middle
Finally, that card is
open to the Passbook

00:03:34.826 --> 00:03:37.336 A:middle
and the user can
look at the pass.

00:03:38.586 --> 00:03:42.156 A:middle
From there the Passbook can--
the gift card can be brought

00:03:42.156 --> 00:03:45.536 A:middle
into a store used
online and redeemed.

00:03:46.406 --> 00:03:47.916 A:middle
You can use it to
purchase something.

00:03:48.516 --> 00:03:51.076 A:middle
And if immediately when
that purchase occurs,

00:03:52.246 --> 00:03:55.496 A:middle
we send an update and the update
will actually update the path

00:03:55.496 --> 00:03:59.056 A:middle
and the giftee can now see
their new value in the pass.

00:03:59.946 --> 00:04:01.636 A:middle
Of course if they
have a value left,

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:03:59.946 --> 00:04:01.636 A:middle
Of course if they
have a value left,

00:04:01.926 --> 00:04:03.796 A:middle
they can continue
that cycle again.

00:04:04.356 --> 00:04:12.006 A:middle
OK. So, delivering the pass.

00:04:12.156 --> 00:04:15.256 A:middle
Apple Store Gift Card
is kind of a different--

00:04:15.566 --> 00:04:17.796 A:middle
a little bit of an advance pass.

00:04:18.305 --> 00:04:22.426 A:middle
You'll see that its flow and
giving a user pass is different

00:04:22.426 --> 00:04:23.496 A:middle
than what you would expect.

00:04:23.756 --> 00:04:28.396 A:middle
It doesn't actually
use a Companion App,

00:04:28.396 --> 00:04:30.076 A:middle
we use quite a few things.

00:04:30.416 --> 00:04:33.986 A:middle
So, if you get overwhelmed as
you're looking at our lifecycle

00:04:33.986 --> 00:04:36.916 A:middle
or as you're looking at
our flows, don't worry,

00:04:36.916 --> 00:04:39.856 A:middle
when we get to kind of
determining your complexity,

00:04:39.856 --> 00:04:43.316 A:middle
you will realize that you don't
need to do everything we did

00:04:43.316 --> 00:04:45.676 A:middle
but there'll be a lot of good
things you can carry away

00:04:45.676 --> 00:04:49.216 A:middle
from this, OK?

00:04:49.416 --> 00:04:51.486 A:middle
So, how many guys have the App?

00:04:51.486 --> 00:04:51.926 A:middle
Apple Store App?

00:04:52.206 --> 00:04:54.156 A:middle
You guys have it?

00:04:54.156 --> 00:04:57.486 A:middle
Good. Good, that's like
60, 70 percent, I like it.

00:04:57.836 --> 00:05:00.476 A:middle
How many of you don't?

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:04:57.836 --> 00:05:00.476 A:middle
How many of you don't?

00:05:00.476 --> 00:05:02.816 A:middle
You guys, OK.

00:05:03.146 --> 00:05:06.576 A:middle
[laughs] I'm impressed
though, that's honest.

00:05:06.576 --> 00:05:10.816 A:middle
OK? So, step one,
download the App.

00:05:10.816 --> 00:05:14.926 A:middle
Step one, open the App and
you get to look at the passes.

00:05:14.926 --> 00:05:19.846 A:middle
For me, I'm going to purchase a
pass for-- one of my coworkers,

00:05:19.906 --> 00:05:24.196 A:middle
Sonal, she's been working really
hard and she's kind of new

00:05:24.196 --> 00:05:26.546 A:middle
to Apple, she doesn't
have all the technologies,

00:05:26.546 --> 00:05:27.306 A:middle
all the products yet.

00:05:27.306 --> 00:05:28.876 A:middle
So, I'm going to
buy her an Apple TV,

00:05:28.876 --> 00:05:30.826 A:middle
I've picked out a
nice pass here.

00:05:30.826 --> 00:05:33.606 A:middle
110 dollars, you buy
her an Apple TV, right?

00:05:33.606 --> 00:05:38.026 A:middle
Then I'll put a nice little
message in there, say,

00:05:38.026 --> 00:05:40.366 A:middle
it's to Sona and from me.

00:05:41.566 --> 00:05:43.366 A:middle
And I'm telling her
to enjoy her Apple TV.

00:05:43.366 --> 00:05:44.166 A:middle
She's worked really hard.

00:05:44.716 --> 00:05:50.626 A:middle
OK, then once the order is
submitted, gift process,

00:05:50.746 --> 00:05:52.116 A:middle
an email gets sent out.

00:05:52.526 --> 00:05:55.406 A:middle
Just like every single Gift Card
email that we previously had.

00:05:56.536 --> 00:05:58.446 A:middle
Sonal will read this
and go, "Cool,

00:05:58.446 --> 00:06:00.386 A:middle
I got an apple TV,
this is so great."

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:05:58.446 --> 00:06:00.386 A:middle
I got an apple TV,
this is so great."

00:06:00.386 --> 00:06:01.326 A:middle
She's going to open it up.

00:06:01.886 --> 00:06:04.286 A:middle
So, notice the add
to Passbook link.

00:06:05.146 --> 00:06:08.286 A:middle
So, click on it and be
brought to mobile Safari.

00:06:08.966 --> 00:06:14.676 A:middle
Now, this is our opportunity
to basically tag this pass

00:06:15.086 --> 00:06:17.086 A:middle
with the ten years Apple Stores.

00:06:18.036 --> 00:06:21.486 A:middle
You can use iBeacons now
if you prefer to do that,

00:06:22.186 --> 00:06:23.486 A:middle
but or you could use both.

00:06:23.486 --> 00:06:26.376 A:middle
So, that if she ever
forgets that she has this

00:06:26.376 --> 00:06:28.786 A:middle
and she walks near one of
our stores, she'll remember.

00:06:29.876 --> 00:06:32.666 A:middle
Then she clicks to
create the pass and be--

00:06:32.666 --> 00:06:38.446 A:middle
there it is, her Apple TV
ready for her to pick up.

00:06:38.646 --> 00:06:42.616 A:middle
OK. So, what were some
of the Apple Stores goals

00:06:42.616 --> 00:06:44.846 A:middle
in building this pass?

00:06:46.276 --> 00:06:49.226 A:middle
Passbook was an additional
avenue

00:06:50.286 --> 00:06:51.726 A:middle
to get in Gift Cards users.

00:06:52.796 --> 00:06:56.496 A:middle
It's not like I was able to
reimagine my backend systems,

00:06:56.496 --> 00:06:59.926 A:middle
I wasn't able to reimagine
the paper gift card, I mean,

00:06:59.926 --> 00:07:01.446 A:middle
if I had a choice,
I would do way

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:06:59.926 --> 00:07:01.446 A:middle
if I had a choice,
I would do way

00:07:01.446 --> 00:07:03.096 A:middle
with the paper gift
card entirely.

00:07:03.476 --> 00:07:04.456 A:middle
But I didn't have a choice.

00:07:05.446 --> 00:07:08.466 A:middle
Those avenues had to
continue to coexist

00:07:08.956 --> 00:07:11.806 A:middle
with the Passbook avenue.

00:07:11.906 --> 00:07:15.676 A:middle
So, really, Passbook is
complimenting the entire system.

00:07:16.426 --> 00:07:19.316 A:middle
Existing avenues
shouldn't get harder, right?

00:07:19.316 --> 00:07:24.866 A:middle
And then a great fine that I
think that we stumbled upon.

00:07:25.716 --> 00:07:30.146 A:middle
Last year, when we were watching
the Passbook presentations,

00:07:30.676 --> 00:07:32.386 A:middle
we thought, "oh, oK, so we have

00:07:32.426 --> 00:07:35.776 A:middle
to make sure we have a Companion
App and somehow this has to work

00:07:35.986 --> 00:07:39.366 A:middle
with Apple Store App even though
the gifter is not the giftee"

00:07:40.076 --> 00:07:45.486 A:middle
and it occurred to me that
our Companion App is not

00:07:45.486 --> 00:07:46.166 A:middle
really acquired.

00:07:47.336 --> 00:07:51.406 A:middle
In fact, there's a
larger base of users

00:07:52.176 --> 00:07:53.416 A:middle
that have access to mail.

00:07:54.426 --> 00:07:57.156 A:middle
So, if you can detach
yourself from the requirement

00:07:57.156 --> 00:08:00.456 A:middle
of a companion app, you
actually have access

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:07:57.156 --> 00:08:00.456 A:middle
of a companion app, you
actually have access

00:08:01.026 --> 00:08:03.356 A:middle
to much larger user base, right?

00:08:03.356 --> 00:08:05.736 A:middle
There's more of a chance
that they will see,

00:08:06.476 --> 00:08:11.616 A:middle
they'll see my Gift
Card then if it goes

00:08:11.616 --> 00:08:13.616 A:middle
to your mail then they have
download my pass because--

00:08:13.716 --> 00:08:14.596 A:middle
or downloaded my app,

00:08:14.596 --> 00:08:16.056 A:middle
not everyone has
downloaded their app,

00:08:16.056 --> 00:08:17.006 A:middle
right, as we saw here.

00:08:17.246 --> 00:08:20.286 A:middle
But everyone in here
has access to mail, OK?

00:08:20.286 --> 00:08:24.796 A:middle
So, no companion app
required, and then lastly,

00:08:24.906 --> 00:08:26.496 A:middle
integrating with
existing systems.

00:08:28.056 --> 00:08:31.026 A:middle
I couldn't touch or change many

00:08:31.026 --> 00:08:32.775 A:middle
of the systems that
I have below me.

00:08:32.836 --> 00:08:35.566 A:middle
So, we have to make sure
that we minimize our changes

00:08:36.166 --> 00:08:39.996 A:middle
and we'll talk about that
one little later, OK?

00:08:41.145 --> 00:08:43.926 A:middle
So, Sonal, she works
really hard, she doesn't go

00:08:43.926 --> 00:08:45.796 A:middle
to the mall a lot, but
now she's in the mall

00:08:45.796 --> 00:08:48.656 A:middle
and she's walking along and she
walks across the Apple Store.

00:08:49.216 --> 00:08:52.096 A:middle
And boom, her pass lights up
and says, "Hey, don't forget"

00:08:52.306 --> 00:08:55.176 A:middle
or sorry, she gets a lock screen
notice that says, "Don't forget

00:08:55.176 --> 00:08:56.756 A:middle
to use your-- go
get your Apple TV."

00:08:57.376 --> 00:09:00.946 A:middle
So, she goes in, she picks
up her Apple TV or her--

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:08:57.376 --> 00:09:00.946 A:middle
So, she goes in, she picks
up her Apple TV or her--

00:09:00.946 --> 00:09:03.396 A:middle
she picks up her Apple TV and
picks up her pass and says,

00:09:03.656 --> 00:09:04.546 A:middle
"Yes, I want to purchase.

00:09:04.636 --> 00:09:07.996 A:middle
And so you just can see
we use the QR code there.

00:09:07.996 --> 00:09:11.556 A:middle
Lucky for us, our point of
cell devices are iPhones.

00:09:11.946 --> 00:09:13.416 A:middle
So, we simply have to enable

00:09:13.416 --> 00:09:16.146 A:middle
that camera and scan
the QR code.

00:09:16.846 --> 00:09:20.456 A:middle
And lucky for you, AV Foundation
is going to do all that work

00:09:20.516 --> 00:09:22.766 A:middle
for you, you guys don't have
to think about shake factor

00:09:23.076 --> 00:09:25.146 A:middle
and a lot of things that we
have to be concerned about.

00:09:25.416 --> 00:09:26.866 A:middle
So, definitely take
advantage of that.

00:09:27.816 --> 00:09:29.886 A:middle
But let's say she
never gets to the mall.

00:09:30.466 --> 00:09:35.466 A:middle
Let's say she still wants
to get her Apple TV.

00:09:36.426 --> 00:09:38.936 A:middle
She still has to be able to
purchase on the web, right?

00:09:38.936 --> 00:09:42.856 A:middle
She has to be able to turn that
pass over reading clear text

00:09:42.856 --> 00:09:45.796 A:middle
to gift card and a pin
number and make the purchase.

00:09:46.296 --> 00:09:49.436 A:middle
So, we actually have to provide
the data both in the QR code

00:09:49.746 --> 00:09:52.906 A:middle
and on the back of the pass
in clear text, make sense?

00:09:53.076 --> 00:09:55.946 A:middle
Good, I see some of you nodding.

00:09:55.946 --> 00:10:00.366 A:middle
OK. So, using the pass,
you'll see this kind of theme

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:09:55.946 --> 00:10:00.366 A:middle
OK. So, using the pass,
you'll see this kind of theme

00:10:00.366 --> 00:10:03.336 A:middle
or reusing and leveraging
existing systems,

00:10:03.696 --> 00:10:06.006 A:middle
we reused the point of sale
devices, we didn't have

00:10:06.006 --> 00:10:07.526 A:middle
to replace them if you need to,

00:10:07.856 --> 00:10:10.176 A:middle
write an app Leverage
AV Foundation

00:10:10.696 --> 00:10:12.136 A:middle
to use optical scanners.

00:10:14.296 --> 00:10:16.066 A:middle
And then we have the
support, the web.

00:10:16.246 --> 00:10:17.926 A:middle
We even have to support
the phone.

00:10:17.926 --> 00:10:19.256 A:middle
Yes, people still use a phone.

00:10:20.066 --> 00:10:23.826 A:middle
But something that
surprised us, little it was,

00:10:24.336 --> 00:10:26.406 A:middle
it was a little bit--
at least the surprise

00:10:26.406 --> 00:10:28.596 A:middle
for me was the human factor.

00:10:29.556 --> 00:10:32.566 A:middle
Apple have some of the
greatest retail employees.

00:10:33.746 --> 00:10:35.646 A:middle
But as you know,
retail employees ebb

00:10:35.646 --> 00:10:37.366 A:middle
and flow based on the seasons.

00:10:38.256 --> 00:10:41.966 A:middle
So, when we first decided
to launch the Passbook,

00:10:41.966 --> 00:10:43.206 A:middle
we've trained a bunch of people.

00:10:43.616 --> 00:10:46.356 A:middle
But there was no guarantee
just a few months later

00:10:46.356 --> 00:10:48.546 A:middle
that the people that
we trained we're going

00:10:48.546 --> 00:10:51.206 A:middle
to be the people we would
go live with or launch with.

00:10:51.726 --> 00:10:55.706 A:middle
What I've learned from
this is how important it is

00:10:56.076 --> 00:10:59.756 A:middle
that we design and develop
even our point of sale devices

00:10:59.756 --> 00:11:02.516 A:middle
that only our sales
agents use to make sure

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:10:59.756 --> 00:11:02.516 A:middle
that only our sales
agents use to make sure

00:11:02.516 --> 00:11:05.906 A:middle
that it's almost impossible
for them to make a mistake.

00:11:06.766 --> 00:11:08.996 A:middle
So, what kind of mistakes
could they have possibly made,

00:11:08.996 --> 00:11:10.476 A:middle
it's just an optical
scanner, right?

00:11:11.526 --> 00:11:14.926 A:middle
Well, actually one of the
Apple employees they walked

00:11:14.926 --> 00:11:17.436 A:middle
into the Apple store
with their Passbook

00:11:17.436 --> 00:11:22.526 A:middle
and the sales agent was trying
to laser scan this QR code

00:11:22.526 --> 00:11:24.006 A:middle
and he's like, "Why
isn't this working?"

00:11:24.006 --> 00:11:26.056 A:middle
You just sitting there looking,
"Should I say something?"

00:11:26.816 --> 00:11:28.656 A:middle
Well, they are looking
at, you know,

00:11:28.656 --> 00:11:30.656 A:middle
they usually see this one
dimensional bar codes,

00:11:30.856 --> 00:11:32.726 A:middle
a two dimensional bar code

00:11:32.726 --> 00:11:34.916 A:middle
to a retail employee may
not be that different.

00:11:36.226 --> 00:11:41.136 A:middle
So, bottom line is target
user experience consistency.

00:11:42.016 --> 00:11:45.916 A:middle
If you're trying to be very
consistent for every user,

00:11:45.916 --> 00:11:48.896 A:middle
you'll realize you cannot
train every sales agent.

00:11:49.156 --> 00:11:49.636 A:middle
You just can't.

00:11:50.556 --> 00:11:53.636 A:middle
So, build into your
point of sale device.

00:11:54.906 --> 00:11:57.126 A:middle
The obvious thing
that the user should--

00:11:57.126 --> 00:12:00.666 A:middle
that the sales agent should
do out of a button there

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:11:57.126 --> 00:12:00.666 A:middle
that the sales agent should
do out of a button there

00:12:00.666 --> 00:12:03.586 A:middle
that says check out with
Passbook, make it very clear

00:12:03.586 --> 00:12:06.906 A:middle
so nobody [inaudible] both the
sales agent and the customers.

00:12:07.536 --> 00:12:11.376 A:middle
OK, updating the pass.

00:12:13.116 --> 00:12:15.126 A:middle
This is the web services
portions, right?

00:12:15.126 --> 00:12:20.466 A:middle
This is the feedback loop
bringing to life your pass.

00:12:20.656 --> 00:12:25.086 A:middle
Once a redemption occurs,
if you can tell the user

00:12:25.086 --> 00:12:28.546 A:middle
that something has happened
it's so much more rewarding.

00:12:28.716 --> 00:12:31.616 A:middle
And I do it every time I go
in and if I have a gift card

00:12:31.616 --> 00:12:33.286 A:middle
and the sales agent
makes the purchase

00:12:33.716 --> 00:12:36.986 A:middle
and almost seconds later you
guys should try almost seconds

00:12:36.986 --> 00:12:40.136 A:middle
later the value updates
and you're like, "Oh OK,

00:12:40.136 --> 00:12:42.166 A:middle
what I just did actually
happened."

00:12:42.556 --> 00:12:45.836 A:middle
There's kind of event in a--
a satisfaction that occurs.

00:12:46.396 --> 00:12:49.866 A:middle
So, update your passes, use
Apple Push Notification service.

00:12:49.956 --> 00:12:54.336 A:middle
Super easy to do and bring
that feedback look all the way

00:12:54.336 --> 00:12:58.526 A:middle
around feedback to the user,
feedback to your sales agent.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:13:00.306 --> 00:13:04.556 A:middle
Apple Store Gift Card.

00:13:04.746 --> 00:13:05.926 A:middle
OK, let's move on.

00:13:07.516 --> 00:13:11.046 A:middle
[ Pause ]

00:13:11.546 --> 00:13:13.696 A:middle
Leveraging your existing
systems.

00:13:14.486 --> 00:13:18.166 A:middle
If you come from a
larger organization

00:13:18.166 --> 00:13:20.996 A:middle
or an organization even that's
been around for a while,

00:13:21.476 --> 00:13:23.976 A:middle
your systems architecture
diagram might look something

00:13:23.976 --> 00:13:24.526 A:middle
like this.

00:13:26.076 --> 00:13:28.636 A:middle
You start with an App
and this is the App

00:13:28.696 --> 00:13:30.246 A:middle
that we purchase with, right?

00:13:30.616 --> 00:13:32.916 A:middle
And it talks to our
applications and services layer.

00:13:32.916 --> 00:13:38.576 A:middle
And then it talks to our
order processor and then it--

00:13:38.576 --> 00:13:40.016 A:middle
the order is inducted by ASP,

00:13:40.016 --> 00:13:42.016 A:middle
it's probably written
to a database.

00:13:43.036 --> 00:13:45.536 A:middle
We notify our physical
gift card services.

00:13:45.726 --> 00:13:47.866 A:middle
Hey, we have a gift card
that we need you to generate.

00:13:48.506 --> 00:13:50.986 A:middle
And when that card gets
generated it probably writes

00:13:51.026 --> 00:13:55.186 A:middle
to a data base and then e-mail
gets sent out and on and on

00:13:55.186 --> 00:13:57.626 A:middle
and on and there's a lot
of boxes there, right?

00:13:57.796 --> 00:13:59.576 A:middle
That's really all you're
thinking about right now

00:13:59.576 --> 00:14:01.416 A:middle
and I would agree with you,
there are a lot of boxes there.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:13:59.576 --> 00:14:01.416 A:middle
and I would agree with you,
there are a lot of boxes there.

00:14:02.576 --> 00:14:08.006 A:middle
So, the goal is to identify all
those boxes that do not matter.

00:14:09.296 --> 00:14:11.836 A:middle
Maintain only the
relevant boxes.

00:14:12.316 --> 00:14:14.206 A:middle
Maintain only the ones
you need to change.

00:14:14.456 --> 00:14:18.906 A:middle
So, then you're pushing into
this black box all the things

00:14:18.906 --> 00:14:22.746 A:middle
that are no longer relevant, and
you can push and push and push

00:14:22.746 --> 00:14:24.746 A:middle
and identify those things
you don't need to touch

00:14:24.746 --> 00:14:26.026 A:middle
until you end up
looking like this.

00:14:27.546 --> 00:14:31.386 A:middle
There are four interfaces
no matter how complex your

00:14:31.466 --> 00:14:35.476 A:middle
Ecosystem is, there are four
interfaces you must work with.

00:14:37.216 --> 00:14:41.556 A:middle
Number one, creating the pass.

00:14:41.766 --> 00:14:43.326 A:middle
This was-- we used
e-mail, right?

00:14:43.326 --> 00:14:44.586 A:middle
There is a link in the e-mail.

00:14:44.836 --> 00:14:48.676 A:middle
What is the interface in which
you generate or create and get

00:14:48.676 --> 00:14:49.636 A:middle
that pass to that user.

00:14:51.186 --> 00:14:53.866 A:middle
Number two, source of truth.

00:14:55.066 --> 00:14:58.946 A:middle
This is the system that knows
the ultimate value of your pass.

00:14:59.736 --> 00:15:02.646 A:middle
It's what your pass
primarily represents.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:14:59.736 --> 00:15:02.646 A:middle
It's what your pass
primarily represents.

00:15:04.236 --> 00:15:07.626 A:middle
Number three, redeeming
your pass.

00:15:07.746 --> 00:15:12.956 A:middle
The interface for redeeming your
pass, how do you use that pass?

00:15:13.326 --> 00:15:16.936 A:middle
And number four, this is the
call back for the update.

00:15:17.326 --> 00:15:20.096 A:middle
Once the pass has been
redeemed, how do you know

00:15:20.096 --> 00:15:23.056 A:middle
that there has been a change or
once the pass has been changed

00:15:23.056 --> 00:15:26.166 A:middle
in any way, how do you know
the pass has been changed?

00:15:27.046 --> 00:15:28.276 A:middle
So, four interfaces, right?

00:15:31.766 --> 00:15:36.256 A:middle
Then, you need to
identify the common factor

00:15:36.256 --> 00:15:37.466 A:middle
between all four of those.

00:15:38.116 --> 00:15:41.886 A:middle
The common currency,
for us I used GCN here

00:15:41.886 --> 00:15:42.956 A:middle
but it's a Gift Card Number.

00:15:43.436 --> 00:15:45.796 A:middle
All of these systems
that I must interface

00:15:45.896 --> 00:15:48.296 A:middle
with know what a
gift card number is.

00:15:48.536 --> 00:15:50.746 A:middle
So, if you have these
four interfaces,

00:15:51.076 --> 00:15:53.086 A:middle
you have the common currency.

00:15:53.756 --> 00:15:58.476 A:middle
You'll be able to bring Passbook
guaranteed to your Ecosystem.

00:15:59.356 --> 00:16:01.436 A:middle
OK, what are some common
currencies for you guys?

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:15:59.356 --> 00:16:01.436 A:middle
OK, what are some common
currencies for you guys?

00:16:02.916 --> 00:16:04.196 A:middle
So, we use gift card number.

00:16:04.806 --> 00:16:09.776 A:middle
They might be club card number,
an Event ID, and Event ID

00:16:09.776 --> 00:16:11.796 A:middle
with the customer
ID and order number.

00:16:12.236 --> 00:16:15.256 A:middle
There are a lot of things but
just identify that shared piece

00:16:15.256 --> 00:16:17.516 A:middle
of information is probably
a primary key somewhere

00:16:17.516 --> 00:16:21.496 A:middle
in one of your data bases.

00:16:22.976 --> 00:16:24.896 A:middle
OK, so then six months later

00:16:25.336 --> 00:16:27.156 A:middle
when your boss is
giving a presentation

00:16:27.156 --> 00:16:29.936 A:middle
about how awesome your team
is because we integrated

00:16:29.936 --> 00:16:32.396 A:middle
with all these systems,
you can say, "Yeah,

00:16:33.126 --> 00:16:35.436 A:middle
but this is really what
I did, four interfaces.

00:16:35.996 --> 00:16:40.296 A:middle
OK, determining complexity.

00:16:41.006 --> 00:16:45.496 A:middle
Now, stepping back from
everything that we needed to do

00:16:45.496 --> 00:16:49.216 A:middle
to bring Passbook, to
bring this pass to Apple,

00:16:49.216 --> 00:16:53.596 A:middle
I think we can kind of impart
an experience or wisdom

00:16:53.906 --> 00:16:58.326 A:middle
of what it takes to determine
the level of effort required

00:16:58.726 --> 00:17:01.076 A:middle
to bringing a pass
to your system.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:16:58.726 --> 00:17:01.076 A:middle
to bringing a pass
to your system.

00:17:01.616 --> 00:17:08.006 A:middle
I've identified five facets that
I think are really significant.

00:17:09.195 --> 00:17:15.036 A:middle
First one is value, uniqueness,
static versus dynamic,

00:17:15.906 --> 00:17:18.846 A:middle
scale and systems integration.

00:17:20.116 --> 00:17:23.496 A:middle
And on each of these facets
is kind of a sub scale

00:17:23.496 --> 00:17:24.826 A:middle
or scale within itself.

00:17:27.175 --> 00:17:29.066 A:middle
I'm using mountains
of science here.

00:17:29.066 --> 00:17:30.986 A:middle
I don't know, do you
guys snowboarder or ski?

00:17:30.986 --> 00:17:32.506 A:middle
Thought something you
guys do around here, no?

00:17:32.966 --> 00:17:35.266 A:middle
No? a little bit of
clapping out there.

00:17:35.496 --> 00:17:38.096 A:middle
OK so, the greens, you
guys know what those are?

00:17:38.566 --> 00:17:40.496 A:middle
The greens are for
people who kind

00:17:40.496 --> 00:17:42.816 A:middle
of don't know what they're
doing but still are courageous

00:17:42.816 --> 00:17:43.636 A:middle
and want to be out there.

00:17:43.636 --> 00:17:47.446 A:middle
And then hopefully at some point
they transition to intermediate

00:17:48.326 --> 00:17:51.056 A:middle
and intermediate is a little
bit harder, you need some skill,

00:17:51.056 --> 00:17:54.636 A:middle
you maybe took some classes and
then you move to the blacks,

00:17:54.636 --> 00:17:56.006 A:middle
the advanced category.

00:17:56.336 --> 00:17:57.676 A:middle
And the advanced is where you--

00:17:57.676 --> 00:18:00.186 A:middle
you're kind of parsing
through the snow

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:17:57.676 --> 00:18:00.186 A:middle
you're kind of parsing
through the snow

00:18:00.186 --> 00:18:01.986 A:middle
and you know exactly
what's going on.

00:18:01.986 --> 00:18:02.886 A:middle
I see some nodding.

00:18:04.496 --> 00:18:06.056 A:middle
So, there's a small scale.

00:18:06.096 --> 00:18:08.206 A:middle
There's a scale within
each one of these facets

00:18:08.206 --> 00:18:09.386 A:middle
and we're going to review them.

00:18:09.766 --> 00:18:19.016 A:middle
Value, value as a value
of your pass increases,

00:18:19.546 --> 00:18:21.366 A:middle
the complexity is
going to increase.

00:18:22.316 --> 00:18:25.566 A:middle
So, when you start with a
newspaper ad for instance,

00:18:26.326 --> 00:18:30.516 A:middle
a newspaper coupon might be free
because anybody can get to it.

00:18:30.516 --> 00:18:32.986 A:middle
And I know it might
have some value

00:18:32.986 --> 00:18:36.326 A:middle
because with redemption it
ends up adding value to you

00:18:36.326 --> 00:18:39.816 A:middle
but we really don't care
who's stealing that coupon.

00:18:41.256 --> 00:18:45.136 A:middle
Then a movie ticket, we
move up to the movie ticket.

00:18:45.316 --> 00:18:46.816 A:middle
It has more value.

00:18:47.456 --> 00:18:51.206 A:middle
You don't want people just
generating and stealing this,

00:18:51.206 --> 00:18:52.726 A:middle
you know, left and right.

00:18:53.006 --> 00:18:54.496 A:middle
You got to protect
it a little bit.

00:18:55.456 --> 00:18:59.346 A:middle
But at the same time if you got
out there, if you know big deal,

00:18:59.506 --> 00:19:01.076 A:middle
it wouldn't-- it wouldn't
be the end of the world.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:18:59.506 --> 00:19:01.076 A:middle
it wouldn't-- it wouldn't
be the end of the world.

00:19:02.196 --> 00:19:06.436 A:middle
And finally, you kind of have
the gold vault of passes.

00:19:06.436 --> 00:19:10.166 A:middle
I was imagining boarding
passes would be in this.

00:19:11.156 --> 00:19:14.756 A:middle
You really don't want people
stealing them because they tend

00:19:14.756 --> 00:19:16.306 A:middle
to have quite a bit of value

00:19:16.936 --> 00:19:19.856 A:middle
and not only is the value
in one of the passes.

00:19:20.816 --> 00:19:25.316 A:middle
Not only is the value in all of
the boarding passes of that--

00:19:25.316 --> 00:19:26.996 A:middle
or that exist in Passbook.

00:19:27.316 --> 00:19:31.676 A:middle
But actually those services are
protecting all boarding passes

00:19:31.676 --> 00:19:33.456 A:middle
that exists very likely, right?

00:19:33.456 --> 00:19:38.446 A:middle
They have access to systems that
can see all boarding passes.

00:19:38.446 --> 00:19:41.476 A:middle
So, it's supper important
as you increase in value

00:19:41.736 --> 00:19:43.696 A:middle
that you spend more
time thinking about some

00:19:43.696 --> 00:19:46.326 A:middle
of the web services and tricks
we'll talk about later thinking

00:19:46.326 --> 00:19:48.886 A:middle
about reliability,
scalability and performance.

00:19:51.256 --> 00:19:57.676 A:middle
Uniqueness, a coupon can
be used my multiple people,

00:19:57.676 --> 00:19:59.696 A:middle
can be used multiple times.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:20:00.586 --> 00:20:02.306 A:middle
There's really no
sense of counting.

00:20:02.306 --> 00:20:05.226 A:middle
There's no sense of
checking that much.

00:20:05.226 --> 00:20:10.356 A:middle
You could almost put the
value within the pass itself.

00:20:10.466 --> 00:20:12.896 A:middle
So, that is much easier to do

00:20:12.896 --> 00:20:14.526 A:middle
than let's say a
membership card.

00:20:15.886 --> 00:20:18.766 A:middle
A membership card might be
used by a single household

00:20:18.766 --> 00:20:22.076 A:middle
or a single family but
it's used many times.

00:20:22.616 --> 00:20:24.996 A:middle
And your systems might

00:20:24.996 --> 00:20:27.386 A:middle
in the backend be doing some
really advanced statistics

00:20:27.386 --> 00:20:29.616 A:middle
and processing on every use.

00:20:30.426 --> 00:20:33.256 A:middle
But if you miss one
use, if for some reason,

00:20:33.306 --> 00:20:36.256 A:middle
you received an event that says
"Oh, I need to use this now

00:20:36.256 --> 00:20:39.356 A:middle
and you couldn't actually
serve all the data,

00:20:39.356 --> 00:20:40.266 A:middle
it wouldn't be a big deal."

00:20:40.796 --> 00:20:43.856 A:middle
And then there's the
quantified use category.

00:20:45.276 --> 00:20:48.146 A:middle
The quantified use is
all about taking score

00:20:48.146 --> 00:20:51.566 A:middle
and counting every single
use a gift card is perfect

00:20:51.566 --> 00:20:52.236 A:middle
for this, right?

00:20:52.826 --> 00:20:56.966 A:middle
A gift card, you actually
decrement that value.

00:20:56.966 --> 00:20:59.236 A:middle
You never want to
over decrement, right,

00:20:59.236 --> 00:21:01.206 A:middle
but unless you want to give
some things away for free.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:20:59.236 --> 00:21:01.206 A:middle
but unless you want to give
some things away for free.

00:21:01.636 --> 00:21:03.826 A:middle
So, as a uniqueness increases--

00:21:04.966 --> 00:21:08.616 A:middle
sorry, as it becomes less unique
it's going to be more complex.

00:21:08.616 --> 00:21:12.546 A:middle
It's going to take a little bit
more time to build that pass.

00:21:12.736 --> 00:21:13.996 A:middle
Static versus dynamic.

00:21:15.276 --> 00:21:17.506 A:middle
I don't know how many of
guys have one of these.

00:21:17.506 --> 00:21:20.206 A:middle
The little blue social
security cards and they're

00:21:20.286 --> 00:21:22.906 A:middle
like there's nothing
on it except the number

00:21:22.906 --> 00:21:23.836 A:middle
and it looks really cheap.

00:21:24.776 --> 00:21:26.626 A:middle
Well, it's just a
piece of information

00:21:26.626 --> 00:21:27.806 A:middle
and the pass can be exactly

00:21:27.806 --> 00:21:29.816 A:middle
that can just be a
piece of information.

00:21:30.026 --> 00:21:32.736 A:middle
And the simpler it is if
it's just informational,

00:21:34.736 --> 00:21:36.446 A:middle
then it's much easier to write.

00:21:37.496 --> 00:21:41.076 A:middle
As you move up, maybe you're
changing one state or one field

00:21:41.076 --> 00:21:43.996 A:middle
in the pass [inaudible],
it might be an event

00:21:43.996 --> 00:21:46.386 A:middle
and you're kind of remind
somebody about an event

00:21:46.696 --> 00:21:49.086 A:middle
and it's going to get a
little bit more advanced.

00:21:50.376 --> 00:21:53.646 A:middle
But the multi-state pass where
you're updating multiple pieces

00:21:53.646 --> 00:21:56.336 A:middle
within the pass and I thought
a score board was a perfect

00:21:56.336 --> 00:21:57.566 A:middle
representation of this.

00:21:58.216 --> 00:21:59.646 A:middle
You're counting the
number of innings,

00:21:59.646 --> 00:22:01.036 A:middle
you're counting the
number of balls

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:21:59.646 --> 00:22:01.036 A:middle
you're counting the
number of balls

00:22:01.036 --> 00:22:03.466 A:middle
or you're counting the
score, all these are kind

00:22:03.466 --> 00:22:05.856 A:middle
of dynamically updating
as needed.

00:22:06.376 --> 00:22:09.756 A:middle
The more states you have
to update on your pass,

00:22:09.756 --> 00:22:12.676 A:middle
the more time you need to spend.

00:22:12.676 --> 00:22:13.116 A:middle
OK, scale.

00:22:13.116 --> 00:22:18.976 A:middle
Scale is about the number
of passes that you have

00:22:19.646 --> 00:22:23.956 A:middle
or the number of locations that
you have or even the number

00:22:23.956 --> 00:22:25.526 A:middle
or points of sales
that you have.

00:22:26.086 --> 00:22:28.886 A:middle
So, it could just be that
you have a few passes.

00:22:28.886 --> 00:22:31.136 A:middle
You're maybe a mom and
pop shop and you're kind

00:22:31.136 --> 00:22:32.686 A:middle
of in the center category

00:22:32.686 --> 00:22:35.516 A:middle
where you have a few
passes not too big of a deal

00:22:35.836 --> 00:22:37.996 A:middle
or maybe you're chain,
you have even more passes.

00:22:38.716 --> 00:22:41.226 A:middle
Or you're a huge
enterprise and you have a ton

00:22:41.226 --> 00:22:44.136 A:middle
of passes you have to worry
everyday about reliability,

00:22:44.216 --> 00:22:45.566 A:middle
scalability and performance.

00:22:46.836 --> 00:22:50.466 A:middle
Another thing, another one
I mentioned was the point

00:22:50.466 --> 00:22:52.066 A:middle
of sales devices.

00:22:52.176 --> 00:22:54.456 A:middle
Let's say you're in a department
store and you're downstairs

00:22:54.456 --> 00:22:56.036 A:middle
and you're buying shoes.

00:22:56.816 --> 00:22:59.346 A:middle
And in the meantime
you're spouse is upstairs,

00:22:59.816 --> 00:23:02.816 A:middle
they're buying a shirt,
if you're using that pass

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:22:59.816 --> 00:23:02.816 A:middle
they're buying a shirt,
if you're using that pass

00:23:03.106 --> 00:23:07.336 A:middle
in both places you need to
make sure that data is correct

00:23:07.336 --> 00:23:09.076 A:middle
at the moment that pass is used.

00:23:10.326 --> 00:23:11.006 A:middle
OK, scale.

00:23:11.726 --> 00:23:13.846 A:middle
You with me still?

00:23:14.006 --> 00:23:16.766 A:middle
Systems integration, the last
one on the complexity scale,

00:23:17.496 --> 00:23:20.546 A:middle
the more systems you
need to integrate with,

00:23:21.256 --> 00:23:22.386 A:middle
the harder this is going to be.

00:23:22.876 --> 00:23:26.216 A:middle
So, if you can reimagine you're
Ecosystem, if you can say,

00:23:26.516 --> 00:23:28.626 A:middle
"I only need to support
the iPhone

00:23:28.626 --> 00:23:31.626 A:middle
or the iPod Touch"
it's much easier

00:23:31.626 --> 00:23:33.626 A:middle
to bring Passbook in, right?

00:23:34.476 --> 00:23:37.326 A:middle
But if you have to support
many electronic devices

00:23:37.446 --> 00:23:42.896 A:middle
like the desktop when Sonal
had to purchase on the web.

00:23:43.796 --> 00:23:45.776 A:middle
You're going to have to think
about a little bit more.

00:23:45.936 --> 00:23:47.706 A:middle
You're going to have
to make sure

00:23:47.706 --> 00:23:49.086 A:middle
that you cover all your bases

00:23:49.086 --> 00:23:53.006 A:middle
and you support those
users hopefully as richly.

00:23:54.116 --> 00:23:56.916 A:middle
And then of course the
most complicated one

00:23:56.916 --> 00:24:01.196 A:middle
when you still have the physical
gift cards to support you have

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:23:56.916 --> 00:24:01.196 A:middle
when you still have the physical
gift cards to support you have

00:24:01.416 --> 00:24:04.066 A:middle
to make sure you keep
those users in mind.

00:24:04.696 --> 00:24:05.876 A:middle
OK, systems integration.

00:24:05.876 --> 00:24:07.306 A:middle
That was the last facet.

00:24:07.616 --> 00:24:12.116 A:middle
So, we said value,
static versus dynamic,

00:24:12.616 --> 00:24:14.516 A:middle
scale, what's the last one?

00:24:14.516 --> 00:24:19.506 A:middle
Come on you guys,
systems integration

00:24:19.506 --> 00:24:21.006 A:middle
and I think I missed
one but that's OK.

00:24:21.426 --> 00:24:22.326 A:middle
I'm glad you're still awake.

00:24:23.456 --> 00:24:25.846 A:middle
Don't assume, don't assume

00:24:26.226 --> 00:24:32.026 A:middle
that complexity equals
better because it doesn't.

00:24:32.586 --> 00:24:36.206 A:middle
You guys can have great passes
you can enrich the user's

00:24:36.206 --> 00:24:39.096 A:middle
experience with the
simplest of passes.

00:24:39.616 --> 00:24:42.356 A:middle
We were in Passbook
labs earlier and story

00:24:42.356 --> 00:24:44.626 A:middle
after story, people
are doing it.

00:24:44.926 --> 00:24:46.076 A:middle
So, I encourage you.

00:24:47.016 --> 00:24:48.096 A:middle
Create a pass.

00:24:48.486 --> 00:24:50.176 A:middle
Figure out what you
can do that enriches

00:24:50.176 --> 00:24:51.186 A:middle
that user's experiences.

00:24:52.536 --> 00:24:54.596 A:middle
OK, that was where
my summary slide was.

00:24:54.866 --> 00:25:01.156 A:middle
Web services tips and tricks.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:24:54.866 --> 00:25:01.156 A:middle
Web services tips and tricks.

00:25:01.266 --> 00:25:09.476 A:middle
OK, reviewing the
pass asset sizes.

00:25:10.376 --> 00:25:15.226 A:middle
This is the green category
in which we're telling you

00:25:15.226 --> 00:25:21.366 A:middle
if you're in the basic area, you
should-- if you're in the basic,

00:25:21.366 --> 00:25:22.926 A:middle
you should do these 4 things.

00:25:23.686 --> 00:25:26.706 A:middle
So, review your pass
asset sizes,

00:25:26.706 --> 00:25:30.846 A:middle
adhere to if modified since,
implement logging endpoints

00:25:30.846 --> 00:25:32.666 A:middle
and expect dependency outages.

00:25:33.406 --> 00:25:38.056 A:middle
What does it mean to review
your pass asset sizes?

00:25:39.506 --> 00:25:43.186 A:middle
Performance and scalability
is super important at Apple,

00:25:44.096 --> 00:25:48.626 A:middle
often times before we have
a launch we'll test and test

00:25:48.626 --> 00:25:56.086 A:middle
and test until we know that
our systems will stay up.

00:25:56.086 --> 00:25:59.336 A:middle
And we were doing this in
QA over and over and over

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:26:00.006 --> 00:26:05.516 A:middle
and suddenly we were struggling,
we were getting these slow,

00:26:05.516 --> 00:26:09.326 A:middle
slow response time, it's taking
forever to zip up our files.

00:26:09.416 --> 00:26:14.286 A:middle
We looked a little
deeper and we found

00:26:14.286 --> 00:26:16.416 A:middle
out our asset sizes had changed.

00:26:16.416 --> 00:26:20.656 A:middle
They went from 4 kilobytes
to 280 kilobytes, what?

00:26:21.196 --> 00:26:21.876 A:middle
Right? What?

00:26:22.646 --> 00:26:24.906 A:middle
So, we have publishers
and they have the ability

00:26:24.906 --> 00:26:26.646 A:middle
to change our assets on a dime.

00:26:26.886 --> 00:26:29.726 A:middle
They decided they wanted
print quality and something

00:26:29.726 --> 00:26:31.756 A:middle
that wasn't going to
show them that quality.

00:26:32.536 --> 00:26:38.826 A:middle
So, what I highly recommend
you do, size your image assets,

00:26:39.596 --> 00:26:42.306 A:middle
make sure that they
don't exceed a limit

00:26:43.476 --> 00:26:46.096 A:middle
and log them as necessary.

00:26:46.546 --> 00:26:50.996 A:middle
Number 2, adhere to
if modified sense.

00:26:52.206 --> 00:26:57.976 A:middle
This is an RFC 2616, it
let's your clients make

00:26:57.976 --> 00:26:59.086 A:middle
conditional requests.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:27:00.696 --> 00:27:05.796 A:middle
Basically, let's say-- let's
say there's this awesome WWDC

00:27:05.796 --> 00:27:10.816 A:middle
exclusive party pass and if
anybody was going to have it

00:27:11.066 --> 00:27:14.716 A:middle
on my team, it'd be Alberto,
he is the partier of our team

00:27:14.716 --> 00:27:18.316 A:middle
and so he gets his great
pass, and he's probably--

00:27:18.316 --> 00:27:20.736 A:middle
he last updated at noon and
he's probably sitting here

00:27:20.736 --> 00:27:23.136 A:middle
and thinking I've heard this
presentation a thousand times.

00:27:23.386 --> 00:27:24.886 A:middle
He's looking at the
back of the pass, right?

00:27:24.886 --> 00:27:27.516 A:middle
And he's like, it shows
this pass by the way,

00:27:27.556 --> 00:27:29.996 A:middle
shows all the parties that
are happening and when,

00:27:29.996 --> 00:27:31.596 A:middle
which hotel rooms and so forth.

00:27:31.596 --> 00:27:34.206 A:middle
So, he's pulling down,
so he pulls it down.

00:27:34.206 --> 00:27:36.826 A:middle
He hasn't updated since
12, that request comes

00:27:36.826 --> 00:27:39.066 A:middle
over to our servers
and on the servers,

00:27:39.066 --> 00:27:41.256 A:middle
we look at that database
and say for this pass,

00:27:41.426 --> 00:27:43.816 A:middle
has there been any updates?

00:27:43.816 --> 00:27:45.836 A:middle
Has there been any
new parties added?

00:27:46.046 --> 00:27:48.926 A:middle
And if there has been,
scoop up all the contents,

00:27:48.926 --> 00:27:52.486 A:middle
make that PK pass file,
get it back to Alberto,

00:27:52.486 --> 00:27:54.406 A:middle
and Alberto is like,
"Yes, score,

00:27:54.406 --> 00:27:56.766 A:middle
there's another party" right?

00:27:57.956 --> 00:28:01.216 A:middle
And then five minutes
pass, he slips that pass

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:27:57.956 --> 00:28:01.216 A:middle
And then five minutes
pass, he slips that pass

00:28:01.216 --> 00:28:02.476 A:middle
over and he pulls it down.

00:28:02.896 --> 00:28:06.886 A:middle
Request comes back to the
server, I look at the database,

00:28:06.886 --> 00:28:07.946 A:middle
and there's nothing new.

00:28:08.326 --> 00:28:10.526 A:middle
Sorry, Alberto, I'm
going to send you a 304--

00:28:10.526 --> 00:28:13.706 A:middle
I'm not going to spend any time
building your PK pass file.

00:28:13.916 --> 00:28:15.436 A:middle
I'm not going to
waste your bandwidth.

00:28:15.936 --> 00:28:18.076 A:middle
I'm just going to tell
you, you have the latest.

00:28:18.846 --> 00:28:21.616 A:middle
That's what adhere to if
modified sense and you can kind

00:28:21.616 --> 00:28:26.916 A:middle
of see this the request and
then the response starts,

00:28:26.916 --> 00:28:28.796 A:middle
you first respond with a 200

00:28:29.146 --> 00:28:34.946 A:middle
and if it's not modified
you return a 304.

00:28:35.136 --> 00:28:36.586 A:middle
OK, implement logging endpoints.

00:28:39.556 --> 00:28:42.616 A:middle
Implementing the logging
endpoints can sometimes be

00:28:42.616 --> 00:28:48.416 A:middle
forgettable, often times
our first kind of shot

00:28:48.416 --> 00:28:52.406 A:middle
at building these things as to
get all the basics down, right?

00:28:52.406 --> 00:28:55.366 A:middle
There are 5 endpoints
and you'll do the first 4

00:28:55.366 --> 00:28:56.666 A:middle
and you'll get those
knocked out.

00:28:57.386 --> 00:29:01.166 A:middle
But I highly recommend that you
make sure you've implemented

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:28:57.386 --> 00:29:01.166 A:middle
But I highly recommend that you
make sure you've implemented

00:29:02.056 --> 00:29:02.586 A:middle
the log.

00:29:04.236 --> 00:29:05.696 A:middle
What will this do for you?

00:29:06.096 --> 00:29:09.536 A:middle
This will send you
human-readable information

00:29:09.876 --> 00:29:12.456 A:middle
about mistakes in
your implementation.

00:29:13.256 --> 00:29:16.726 A:middle
We spent so much time paying
people to give us feedback,

00:29:16.886 --> 00:29:18.226 A:middle
these usability studies.

00:29:18.226 --> 00:29:20.946 A:middle
We give them lots of money
to know more information.

00:29:21.746 --> 00:29:25.386 A:middle
But this is free feedback,
so why wouldn't we use it?

00:29:26.586 --> 00:29:28.316 A:middle
Implement the logging endpoint.

00:29:28.856 --> 00:29:34.136 A:middle
OK, number 4, expect
dependency outages.

00:29:34.136 --> 00:29:40.616 A:middle
If you have a service
out there, what happens

00:29:40.616 --> 00:29:41.786 A:middle
when that service goes down?

00:29:43.236 --> 00:29:46.146 A:middle
Are you in good shape because
you really put a load balancer

00:29:46.146 --> 00:29:47.806 A:middle
in front of it and
you actually have 2,

00:29:47.806 --> 00:29:49.646 A:middle
so it's no big deal
if one goes down.

00:29:50.876 --> 00:29:52.466 A:middle
If you can, try to make--

00:29:52.466 --> 00:29:55.546 A:middle
put multiple instances of
your web services out there.

00:29:55.716 --> 00:30:00.976 A:middle
For us, we talk to something
called Location Services.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:29:55.716 --> 00:30:00.976 A:middle
For us, we talk to something
called Location Services.

00:30:01.056 --> 00:30:07.716 A:middle
Location Services is-- it gives
us the 10 nearest Apple Stores

00:30:07.716 --> 00:30:09.586 A:middle
or it actually gives us
all the Apple Stores.

00:30:10.186 --> 00:30:15.276 A:middle
But we go to-- we go and
ask location services

00:30:15.276 --> 00:30:17.336 A:middle
when we generate a
pass, "Hey, you know,

00:30:17.336 --> 00:30:19.756 A:middle
where are my 10 nearest
Apple Stores?

00:30:20.376 --> 00:30:24.626 A:middle
We then can cache
that response locally

00:30:25.526 --> 00:30:29.506 A:middle
so that every time the request
comes in to build that pass,

00:30:29.506 --> 00:30:31.376 A:middle
we don't have to check
Location Services.

00:30:32.286 --> 00:30:34.086 A:middle
And where this is
super helpful is

00:30:34.086 --> 00:30:35.866 A:middle
when Location Services
goes down.

00:30:38.416 --> 00:30:40.626 A:middle
Did you need Location Services?

00:30:41.306 --> 00:30:44.216 A:middle
Could you have survived with
just putting in a long cache

00:30:44.216 --> 00:30:46.526 A:middle
so that if Location
Services goes down,

00:30:47.036 --> 00:30:48.436 A:middle
it's not that big of a deal.

00:30:48.436 --> 00:30:50.326 A:middle
It doesn't have to have
a 100 percent uptime.

00:30:50.716 --> 00:30:52.596 A:middle
And even better, show
this with the gray,

00:30:53.156 --> 00:30:54.916 A:middle
if you can have a fullback file.

00:30:55.396 --> 00:30:58.036 A:middle
So, we could just have a
fullback of all the locations

00:30:58.446 --> 00:31:00.976 A:middle
that Apple had at
the time of launch.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:30:58.446 --> 00:31:00.976 A:middle
that Apple had at
the time of launch.

00:31:01.316 --> 00:31:04.986 A:middle
At least we were able to serve
the user with something, right?

00:31:04.986 --> 00:31:06.736 A:middle
I mean how many of you want

00:31:06.736 --> 00:31:08.886 A:middle
to hear I couldn't get
my Apple Store Gift Card

00:31:08.886 --> 00:31:11.826 A:middle
because they couldn't
find the nearest stores,

00:31:11.906 --> 00:31:13.106 A:middle
it's just ridiculous, right?

00:31:14.016 --> 00:31:15.866 A:middle
So, pass should serve--

00:31:15.866 --> 00:31:18.236 A:middle
be served with the
bare minimum assets,

00:31:18.736 --> 00:31:20.786 A:middle
even when dependencies
are not responding.

00:31:22.076 --> 00:31:25.576 A:middle
And set up default back
up in data if you have to.

00:31:26.596 --> 00:31:28.786 A:middle
Do your best to serve
every request,

00:31:29.696 --> 00:31:32.206 A:middle
but don't create
unnecessary dependencies.

00:31:32.876 --> 00:31:41.406 A:middle
OK, tips in the intermediate
category.

00:31:42.446 --> 00:31:43.996 A:middle
Validating your origin.

00:31:44.596 --> 00:31:52.346 A:middle
It's not sufficient to simply
test, "Hey, is this pass valid

00:31:52.746 --> 00:31:53.876 A:middle
from a data standpoint?"

00:31:54.776 --> 00:31:57.876 A:middle
So, what I mean by that is
for us, we have gift card

00:31:58.356 --> 00:32:02.336 A:middle
and we could just for every
request, simply test, "Hey,

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:31:58.356 --> 00:32:02.336 A:middle
and we could just for every
request, simply test, "Hey,

00:32:02.336 --> 00:32:05.266 A:middle
is this gift card number valid?

00:32:05.506 --> 00:32:06.546 A:middle
Does it have value?

00:32:07.356 --> 00:32:08.976 A:middle
But my recommendation is

00:32:08.976 --> 00:32:13.326 A:middle
that you step back a little
bit before even checking the

00:32:13.326 --> 00:32:16.236 A:middle
contents of the pass,
check who's the author.

00:32:16.236 --> 00:32:18.206 A:middle
Are you the origin?

00:32:19.766 --> 00:32:22.816 A:middle
The last thing you want to
be is a movie card generator

00:32:23.296 --> 00:32:24.906 A:middle
or a gift card checker, right?

00:32:25.636 --> 00:32:28.926 A:middle
If you check the signature
before you even serve the

00:32:28.926 --> 00:32:31.926 A:middle
request, you won't have
people out there building

00:32:32.356 --> 00:32:35.296 A:middle
or getting a valid gift card
for instance in our case,

00:32:35.526 --> 00:32:37.226 A:middle
and starting to tweak, right?

00:32:37.226 --> 00:32:40.156 A:middle
They're tweaking each of those
values to figure out the form

00:32:40.156 --> 00:32:41.646 A:middle
of your system and
understand it more.

00:32:42.316 --> 00:32:46.276 A:middle
If you sign the pass
first, if you sign the--

00:32:46.576 --> 00:32:47.676 A:middle
and I'm going to show
you how to do this,

00:32:47.676 --> 00:32:50.546 A:middle
the authentication token
first, you're going to see

00:32:50.546 --> 00:32:52.156 A:middle
that you can protect
yourself a lot more.

00:32:53.356 --> 00:32:56.366 A:middle
OK, so how many of guys remember
the authentication token?

00:32:56.366 --> 00:32:57.286 A:middle
Do you guys remember this?

00:32:57.896 --> 00:33:00.806 A:middle
A few of you, oh, that's
like 10 percent, 15 percent.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:32:57.896 --> 00:33:00.806 A:middle
A few of you, oh, that's
like 10 percent, 15 percent.

00:33:00.806 --> 00:33:02.656 A:middle
OK, authentication token.

00:33:03.546 --> 00:33:12.086 A:middle
It's in the pass.json, and
it actually comes over on 3

00:33:12.086 --> 00:33:17.836 A:middle
of these requests, register
a device, unregister a device

00:33:18.816 --> 00:33:20.216 A:middle
and get the latest version.

00:33:21.436 --> 00:33:25.546 A:middle
That means on all 3 of these
request, if you know how

00:33:25.546 --> 00:33:28.696 A:middle
to check your signature,
you don't even have

00:33:28.696 --> 00:33:32.476 A:middle
to serve any part of that
request unless you know it came

00:33:32.476 --> 00:33:32.766 A:middle
from you.

00:33:32.766 --> 00:33:35.646 A:middle
How am I to do this?

00:33:36.536 --> 00:33:42.096 A:middle
Try using HMAC, pick a
message, any message, HMAC it,

00:33:42.096 --> 00:33:45.876 A:middle
append it to the
front, maybe sign

00:33:46.146 --> 00:33:49.836 A:middle
or maybe add a few characters,
some constants here and there,

00:33:49.836 --> 00:33:51.306 A:middle
so you know how to recognize it.

00:33:51.846 --> 00:33:55.056 A:middle
And now, put that in your
authentication token.

00:33:58.416 --> 00:34:00.196 A:middle
HMAC is super easy to do.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:33:58.416 --> 00:34:00.196 A:middle
HMAC is super easy to do.

00:34:00.196 --> 00:34:03.036 A:middle
It's available on practically
any language you're probably

00:34:03.036 --> 00:34:05.616 A:middle
going to write a web
service implementation in.

00:34:06.016 --> 00:34:10.626 A:middle
Ruby has a PHP, Python, Java,
it's available in the language

00:34:10.626 --> 00:34:13.085 A:middle
or some third party library,

00:34:13.085 --> 00:34:20.626 A:middle
Bouncy Castle is a
good example of that.

00:34:21.255 --> 00:34:23.746 A:middle
OK, validate significant
contents.

00:34:25.426 --> 00:34:29.726 A:middle
Anyone can create a
pass and with that said,

00:34:29.726 --> 00:34:32.306 A:middle
the pass itself cannot
be authoritative.

00:34:32.306 --> 00:34:35.206 A:middle
In fact, even if they
didn't create the pass

00:34:35.206 --> 00:34:36.795 A:middle
and it just hasn't
updated recently,

00:34:36.795 --> 00:34:39.815 A:middle
you may not have the latest
gift card value, right?

00:34:41.076 --> 00:34:43.426 A:middle
So, make sure you check
that source of truth.

00:34:43.426 --> 00:34:46.186 A:middle
Go back and check
gift card services

00:34:46.186 --> 00:34:48.946 A:middle
or whatever your
equivalent is, check it.

00:34:51.936 --> 00:34:55.456 A:middle
Number 3, leveraging caching,

00:34:56.025 --> 00:35:00.636 A:middle
cache as much downstream
information as possible.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:34:56.025 --> 00:35:00.636 A:middle
cache as much downstream
information as possible.

00:35:01.736 --> 00:35:03.576 A:middle
We talked about Location
Services.

00:35:03.576 --> 00:35:05.856 A:middle
We have the ability of
caching Location Services.

00:35:06.296 --> 00:35:09.136 A:middle
Cache or product
services, if for instance,

00:35:09.436 --> 00:35:13.166 A:middle
a pass is also represented by
associated product, cache that.

00:35:13.456 --> 00:35:14.756 A:middle
Cache your image services,

00:35:14.756 --> 00:35:17.486 A:middle
so if you use an image
service, like Scene7.

00:35:18.576 --> 00:35:21.176 A:middle
Take those images and
put them in local cache.

00:35:21.326 --> 00:35:22.956 A:middle
Do not fetch them
on every request.

00:35:22.956 --> 00:35:25.296 A:middle
I highly recommend
not to fetch them.

00:35:26.276 --> 00:35:28.886 A:middle
You can even cache your
encryption and decryption

00:35:28.886 --> 00:35:30.236 A:middle
of your authentication token.

00:35:30.236 --> 00:35:34.686 A:middle
And then the last one which I
think is kind of interesting,

00:35:35.136 --> 00:35:37.406 A:middle
consider caching
the PK pass file.

00:35:38.936 --> 00:35:41.806 A:middle
Remember that WWDC
exclusive party pass

00:35:41.806 --> 00:35:42.846 A:middle
that I was telling you about?

00:35:43.986 --> 00:35:45.426 A:middle
Well, if that's going around,

00:35:46.186 --> 00:35:48.816 A:middle
guaranteed Stefan [phonetic]
would have gotten it.

00:35:48.816 --> 00:35:52.886 A:middle
Now, Stefan, he knows everyone
and he's definitely going

00:35:52.886 --> 00:35:54.856 A:middle
to share with iMessage his pass.

00:35:55.026 --> 00:35:57.966 A:middle
So, he's going to say, "This
is all the people I know

00:35:57.966 --> 00:36:00.286 A:middle
at a queue listed,
yes, yes, OK."

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:35:57.966 --> 00:36:00.286 A:middle
at a queue listed,
yes, yes, OK."

00:36:00.816 --> 00:36:04.396 A:middle
Forming out the WWDC party
pass and all of them are going

00:36:04.396 --> 00:36:06.386 A:middle
to start requesting
updates all at once.

00:36:07.396 --> 00:36:11.686 A:middle
Now, if I was smart, and I
cache the entire PK pass file,

00:36:12.036 --> 00:36:15.966 A:middle
I could recognize based on
the parameters of the URL

00:36:16.336 --> 00:36:19.786 A:middle
that I just need to scoop up
my PK pass file, and serve it.

00:36:19.906 --> 00:36:23.766 A:middle
I didn't spend any time
zipping that pass file up.

00:36:24.936 --> 00:36:26.366 A:middle
Cool, huh?

00:36:27.776 --> 00:36:32.496 A:middle
OK. Four, in the intermediate
category, monitoring.

00:36:33.986 --> 00:36:36.356 A:middle
Be the first to know when
your service is down.

00:36:37.446 --> 00:36:40.896 A:middle
I hate it and hopefully, and it
happens rarely, but I hate it

00:36:40.896 --> 00:36:43.596 A:middle
when my boss comes in and says,
"What's going on with this?"

00:36:43.686 --> 00:36:48.856 A:middle
If you can know that your pass,
your web services have gone

00:36:48.856 --> 00:36:50.996 A:middle
down first, it's a huge win.

00:36:51.256 --> 00:36:56.126 A:middle
There is so many monitoring
systems out there, Site24x7.

00:36:56.126 --> 00:36:58.966 A:middle
They allow you to send
request, HTTP request,

00:36:59.016 --> 00:37:02.086 A:middle
and you can configure
everything.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:36:59.016 --> 00:37:02.086 A:middle
and you can configure
everything.

00:37:02.086 --> 00:37:04.896 A:middle
You can configure the post,
you can configure the headers

00:37:04.896 --> 00:37:08.386 A:middle
and then on the response,
you can check, is it a 200?

00:37:08.386 --> 00:37:14.466 A:middle
Is the pass-- is it a
correct response type?

00:37:14.656 --> 00:37:17.466 A:middle
So, monitor from
external systems and then

00:37:17.466 --> 00:37:19.476 A:middle
when systems go down,
you're going to get a text,

00:37:19.476 --> 00:37:21.606 A:middle
and you might be out but
you're the first person on it

00:37:21.606 --> 00:37:25.246 A:middle
because you know it happened.

00:37:25.246 --> 00:37:28.296 A:middle
Internal logging, this
one is really easy,

00:37:28.796 --> 00:37:32.076 A:middle
especially if you can add
log aggregation like Splunk.

00:37:32.506 --> 00:37:36.646 A:middle
But log things that matter
whether it's a logging endpoints

00:37:36.646 --> 00:37:37.416 A:middle
that came in.

00:37:38.026 --> 00:37:39.596 A:middle
The asset sizes we talked

00:37:39.596 --> 00:37:44.156 A:middle
about when you start
exceeding a level, log that.

00:37:44.156 --> 00:37:47.726 A:middle
Another one, if your
certificate is about to expire,

00:37:47.726 --> 00:37:49.036 A:middle
you guys get one year, right?

00:37:49.866 --> 00:37:51.046 A:middle
And sometimes we don't think

00:37:51.046 --> 00:37:53.726 A:middle
about these things a year
later, so start to log.

00:37:53.826 --> 00:37:58.096 A:middle
And then when you hit a certain
size or maybe get a daily digest

00:37:58.096 --> 00:38:00.416 A:middle
of the logs, you
get top 10 logs.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:37:58.096 --> 00:38:00.416 A:middle
of the logs, you
get top 10 logs.

00:38:00.896 --> 00:38:03.686 A:middle
This will help you monitor
and keep your systems healthy

00:38:03.686 --> 00:38:04.846 A:middle
without a lot of effort.

00:38:05.786 --> 00:38:08.986 A:middle
Of course there's internal
monitoring also, you can Nagios,

00:38:08.986 --> 00:38:09.986 A:middle
make sure those bits are up.

00:38:10.626 --> 00:38:14.416 A:middle
But think about monitoring,
so those were kind

00:38:14.416 --> 00:38:17.296 A:middle
of the intermediate items.

00:38:17.946 --> 00:38:24.856 A:middle
Tips for the advanced, the first
one I have is rate limiting.

00:38:26.206 --> 00:38:31.396 A:middle
Rate limiting is all about
making sure you don't

00:38:31.396 --> 00:38:34.986 A:middle
over serve the request
that are coming in

00:38:34.986 --> 00:38:39.076 A:middle
or unnecessarily serve the
request that are coming in.

00:38:39.896 --> 00:38:41.966 A:middle
So, if you have a
denial of service attack,

00:38:42.486 --> 00:38:46.096 A:middle
and you can identify, hey, this
pattern of request is too fast.

00:38:47.156 --> 00:38:48.976 A:middle
You can pull back, and you
can just let them drop.

00:38:49.636 --> 00:38:52.366 A:middle
And your whole system
can set up and continue

00:38:52.366 --> 00:38:58.176 A:middle
to serve valid requests without
kind of going down, kind--

00:38:58.176 --> 00:39:00.546 A:middle
attempting to serve all
these invalid requests.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:38:58.176 --> 00:39:00.546 A:middle
attempting to serve all
these invalid requests.

00:39:01.026 --> 00:39:04.086 A:middle
It protects you from a
denial of service attack

00:39:04.086 --> 00:39:05.436 A:middle
and a brute force attack.

00:39:05.836 --> 00:39:09.256 A:middle
You can rate limit on a serial
number, although be careful now

00:39:09.256 --> 00:39:10.826 A:middle
that sharing is going
to be prevalent.

00:39:10.826 --> 00:39:13.366 A:middle
You want to make sure it makes
sense for your pass type.

00:39:14.486 --> 00:39:17.986 A:middle
You can rate limit on an
IP, be careful with that

00:39:17.986 --> 00:39:20.066 A:middle
because probably a lot of
people have passes in WWDC

00:39:20.066 --> 00:39:21.486 A:middle
and the last thing you want

00:39:21.486 --> 00:39:24.376 A:middle
to do is shutdown
request coming from WWDC.

00:39:25.186 --> 00:39:31.076 A:middle
But think about rate limiting,
process asynchronously.

00:39:32.456 --> 00:39:36.186 A:middle
When a request comes
in, you want to serve

00:39:36.186 --> 00:39:38.246 A:middle
that request just
quickly as possible.

00:39:38.976 --> 00:39:43.116 A:middle
The more time you spend doing
downstream things and holding

00:39:43.116 --> 00:39:45.846 A:middle
that connection, the less
people you can serve,

00:39:46.126 --> 00:39:47.976 A:middle
the more systems you have to put

00:39:48.076 --> 00:39:49.836 A:middle
up to serve all the
incoming request.

00:39:51.026 --> 00:39:54.326 A:middle
So, if you go out and you
try to pre-warm your caches,

00:39:54.326 --> 00:39:58.136 A:middle
get all the information you can
as soon as possible right even

00:39:58.136 --> 00:39:58.976 A:middle
when your system starts up.

00:39:59.626 --> 00:40:02.286 A:middle
So, for example like I said,

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:39:59.626 --> 00:40:02.286 A:middle
So, for example like I said,

00:40:02.286 --> 00:40:04.096 A:middle
gift cards can be
associated for--

00:40:04.096 --> 00:40:06.456 A:middle
with a product, and that's
how when you're purchasing

00:40:06.456 --> 00:40:09.426 A:middle
in the store, the strip
looks very similar

00:40:09.426 --> 00:40:10.676 A:middle
to the original gift card.

00:40:11.536 --> 00:40:14.106 A:middle
What I can do is I can go
to product services as soon

00:40:14.106 --> 00:40:15.016 A:middle
as I start up and I say,

00:40:15.016 --> 00:40:17.336 A:middle
"Give me all the gift
cards that are out there.

00:40:18.076 --> 00:40:21.706 A:middle
And give me all the related
strips that are out" then

00:40:21.706 --> 00:40:23.586 A:middle
when the request comes in,

00:40:23.586 --> 00:40:26.816 A:middle
I'm not wasting time getting
those downstream items,

00:40:27.116 --> 00:40:31.756 A:middle
I'm just pulling them
from my local cache.

00:40:31.966 --> 00:40:36.126 A:middle
Logs. Writing to
disk is expensive.

00:40:36.656 --> 00:40:41.606 A:middle
If you allow every log
that comes in especially

00:40:41.606 --> 00:40:43.366 A:middle
on the endpoint to
write to disk,

00:40:43.436 --> 00:40:44.806 A:middle
you could be in a
dangerous spot.

00:40:45.326 --> 00:40:47.036 A:middle
So, if you throw it in memory

00:40:47.496 --> 00:40:50.576 A:middle
and you have a write behind the
disk, you're going to be able

00:40:50.576 --> 00:40:52.376 A:middle
to serve that request
a lot faster

00:40:52.376 --> 00:40:56.646 A:middle
without impacting the
rest of your systems.

00:40:56.736 --> 00:41:00.146 A:middle
Using a queue for push
notifications and this is

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:40:56.736 --> 00:41:00.146 A:middle
Using a queue for push
notifications and this is

00:41:00.146 --> 00:41:04.196 A:middle
that callback update, so when
you find out that the pass needs

00:41:04.196 --> 00:41:08.606 A:middle
to be updated, instead of
holding that connection for us

00:41:08.606 --> 00:41:11.266 A:middle
from gift card services,
we can just say, "Yeah,

00:41:11.266 --> 00:41:13.396 A:middle
we got the request and
we drop it in a queue."

00:41:13.776 --> 00:41:16.946 A:middle
And then later on as soon
our systems are ready,

00:41:17.276 --> 00:41:19.496 A:middle
we just serve it to Push
Notification Service.

00:41:19.786 --> 00:41:21.456 A:middle
We don't have to wait to find

00:41:21.456 --> 00:41:24.056 A:middle
out that Apple Push Notification
service received the request.

00:41:24.556 --> 00:41:29.086 A:middle
There's no need to,
just drop it in a queue.

00:41:29.206 --> 00:41:33.626 A:middle
Avoid holding those connections,
those connections open as--

00:41:33.666 --> 00:41:36.116 A:middle
make it as short of
a period as possible.

00:41:37.436 --> 00:41:42.276 A:middle
OK, 3, leveraging
auth token as storage.

00:41:43.906 --> 00:41:45.886 A:middle
If you don't want to do this

00:41:45.886 --> 00:41:48.216 A:middle
or you don't understand
this, don't feel bad.

00:41:48.586 --> 00:41:50.726 A:middle
This is super cool
though, so pay attention.

00:41:51.346 --> 00:41:53.566 A:middle
These impacts performance
reliability

00:41:53.566 --> 00:41:55.946 A:middle
but the basic concept is here.

00:41:57.476 --> 00:42:01.586 A:middle
On our request, Apple
Store pass services needs

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:41:57.476 --> 00:42:01.586 A:middle
On our request, Apple
Store pass services needs

00:42:01.586 --> 00:42:04.236 A:middle
to take the serial number I
got from the pass and I need

00:42:04.236 --> 00:42:06.596 A:middle
to crosscheck and get the
gift card and the pin.

00:42:07.136 --> 00:42:09.826 A:middle
Because remember the gift
card is my common currency

00:42:09.826 --> 00:42:13.816 A:middle
with gift card services, so I
have to go, I got to go look

00:42:13.816 --> 00:42:18.766 A:middle
at my database, and find the
gift card and associated pin.

00:42:19.576 --> 00:42:22.976 A:middle
That means before
I can even check

00:42:23.556 --> 00:42:27.636 A:middle
if the gift card has value,
I've had to hit my database,

00:42:28.366 --> 00:42:30.986 A:middle
and we know database, talk
into a database can be slow.

00:42:32.156 --> 00:42:36.726 A:middle
So, one of the things you can do
is embed your gift card and pin

00:42:36.726 --> 00:42:37.976 A:middle
or your common currency

00:42:37.976 --> 00:42:40.406 A:middle
or whatever information
that's relevant

00:42:40.446 --> 00:42:43.606 A:middle
to you inside your
authentication token.

00:42:44.076 --> 00:42:46.276 A:middle
OK, so how many of you guys
remember authentication

00:42:46.276 --> 00:42:46.966 A:middle
token now?

00:42:48.226 --> 00:42:51.646 A:middle
Little bit more, OK.

00:42:51.646 --> 00:42:55.686 A:middle
[laughs] If you embed gift card,
the gift card number and the pin

00:42:55.856 --> 00:42:59.196 A:middle
in the authentication token,
you actually don't have

00:42:59.236 --> 00:43:03.186 A:middle
to ask your database
what is associated

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:42:59.236 --> 00:43:03.186 A:middle
to ask your database
what is associated

00:43:03.186 --> 00:43:04.016 A:middle
with that serial number.

00:43:04.316 --> 00:43:06.356 A:middle
You can go directly to
the source of truth,

00:43:06.356 --> 00:43:09.406 A:middle
your gift card services and
say, "Hey, what's the value?"

00:43:10.966 --> 00:43:13.596 A:middle
One last conversation with your
database, pretty cool, right?

00:43:15.036 --> 00:43:19.406 A:middle
So, take your authentication
token and remember that message

00:43:19.406 --> 00:43:20.776 A:middle
that I said, just
pick a message.

00:43:21.776 --> 00:43:24.506 A:middle
Well, pick the gift card
number, pick the pin.

00:43:24.826 --> 00:43:26.536 A:middle
Pick something that's
relevant to you.

00:43:26.536 --> 00:43:27.926 A:middle
It could be a product number.

00:43:28.326 --> 00:43:30.336 A:middle
It could be the URL
for your image strip,

00:43:30.336 --> 00:43:33.506 A:middle
so if you're building
different passes,

00:43:33.596 --> 00:43:36.006 A:middle
if you're building different
passes with different images,

00:43:36.176 --> 00:43:40.826 A:middle
you can actually embed the image
URL inside the authentication

00:43:40.826 --> 00:43:41.666 A:middle
token, so you don't have

00:43:41.666 --> 00:43:45.056 A:middle
to check your database
what image is associated

00:43:45.056 --> 00:43:47.216 A:middle
with that pass.

00:43:47.216 --> 00:43:49.306 A:middle
It's kind of cool.

00:43:49.516 --> 00:43:52.426 A:middle
OK. So, I said some other things
you can embed important dates

00:43:52.426 --> 00:43:56.296 A:middle
like expiriees in your
top 10 nearest location,

00:43:56.296 --> 00:43:59.376 A:middle
so I don't actually-- once I've
gotten the 10 nearest locations

00:43:59.376 --> 00:44:01.876 A:middle
for a pass, I never check
my Location Services again

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:43:59.376 --> 00:44:01.876 A:middle
for a pass, I never check
my Location Services again

00:44:02.406 --> 00:44:06.256 A:middle
because I have it there.

00:44:06.436 --> 00:44:09.826 A:middle
Four, distinguish
test and production.

00:44:11.316 --> 00:44:12.936 A:middle
This actually happened to us.

00:44:13.446 --> 00:44:16.886 A:middle
We're building in QA
our test environment

00:44:16.886 --> 00:44:20.436 A:middle
and we have Quality
Assurance is helping us out

00:44:20.436 --> 00:44:22.286 A:middle
and they're building
pass after pass,

00:44:22.286 --> 00:44:25.976 A:middle
every permutation you could
imagine, and someone said,

00:44:25.976 --> 00:44:28.876 A:middle
"what happens if we took
these test passes to a store?

00:44:28.876 --> 00:44:31.746 A:middle
They sure look real" and
in fact, they are real

00:44:31.746 --> 00:44:35.126 A:middle
because we signed them with
our pass type identifier

00:44:35.126 --> 00:44:36.556 A:middle
and the certificate we had.

00:44:36.616 --> 00:44:38.516 A:middle
So, we had to rethink that.

00:44:38.516 --> 00:44:41.656 A:middle
So, what you can do is take
that pass type identifier

00:44:41.656 --> 00:44:43.396 A:middle
that you embed in the pass.json

00:44:43.956 --> 00:44:49.596 A:middle
and you can create a new
pass identifier and test,

00:44:49.596 --> 00:44:51.386 A:middle
and just have a different
one for production.

00:44:52.026 --> 00:44:53.616 A:middle
Now, if you have
a companion app,

00:44:53.616 --> 00:44:55.876 A:middle
make sure your companion
app can work with both--

00:44:56.056 --> 00:44:57.986 A:middle
is entitled to work
with both of these,

00:44:57.986 --> 00:45:02.546 A:middle
but keeping the pass type
identifier, will make it so that

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:44:57.986 --> 00:45:02.546 A:middle
but keeping the pass type
identifier, will make it so that

00:45:02.546 --> 00:45:05.276 A:middle
if somebody walks into your
store with a different pass

00:45:05.906 --> 00:45:08.986 A:middle
with the test pass, your
point of sale device

00:45:08.986 --> 00:45:12.136 A:middle
or whatever you're using to
redeem it can first check, "hey,

00:45:12.296 --> 00:45:16.426 A:middle
do I recognize this pass type
identifier" nicely say, "Hey,

00:45:16.426 --> 00:45:17.386 A:middle
you're using a test pass.

00:45:17.426 --> 00:45:18.596 A:middle
This is not going to work."

00:45:19.696 --> 00:45:23.026 A:middle
Very easy way to
distinguish between the two.

00:45:23.656 --> 00:45:28.086 A:middle
OK. Building and debug ability.

00:45:28.756 --> 00:45:32.546 A:middle
If something goes wrong in prod,

00:45:33.716 --> 00:45:36.676 A:middle
in fact when something
goes wrong in production,

00:45:37.966 --> 00:45:39.696 A:middle
how are you going to
find out went wrong?

00:45:41.176 --> 00:45:44.456 A:middle
This is a perfect example, I
get a text from a friend of mine

00:45:44.456 --> 00:45:46.946 A:middle
and they said, "Hey, I
walked by the Apple Store

00:45:47.306 --> 00:45:50.656 A:middle
and it didn't tell me that
Apple Store was right there."

00:45:51.576 --> 00:45:53.296 A:middle
So, I find out their
serial number,

00:45:53.646 --> 00:45:57.086 A:middle
and how do I really know what
were the 10 locations embedded

00:45:57.086 --> 00:45:57.496 A:middle
in their pass?

00:45:58.476 --> 00:46:01.406 A:middle
Well, if you planned
for it, you can make it

<HTML><HEAD>
<TITLE>Request Timeout</TITLE>
</HEAD><BODY>
<H1>Request Timeout</H1>
The server timed out while waiting for the browser's request.<P>
Reference&#32;&#35;2&#46;c6524817&#46;1373787862&#46;0
</BODY></HTML>
WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:46:59.916 --> 00:47:07.556 A:middle
we had kind of the easy, the
intermediate, and the advanced.

00:47:08.006 --> 00:47:10.326 A:middle
Today, we talked about
Apple Store gift card,

00:47:10.646 --> 00:47:12.826 A:middle
we pulled that curtain
back a little bit for you,

00:47:13.046 --> 00:47:15.596 A:middle
showed you what we
did, why we did it,

00:47:16.946 --> 00:47:20.806 A:middle
leveraging existing
systems, 4 interfaces, right,

00:47:22.086 --> 00:47:26.576 A:middle
obtaining the pass, your source
of truth, redeeming the pass

00:47:27.386 --> 00:47:28.456 A:middle
and the callback update.

00:47:29.836 --> 00:47:32.486 A:middle
Determining complexity, we
went through some facets

00:47:32.976 --> 00:47:36.346 A:middle
that allowed you to
measure the level of effort.

00:47:36.776 --> 00:47:38.966 A:middle
Basically, you can go back
to your bosses and say,

00:47:39.126 --> 00:47:40.436 A:middle
"Hey, I thought about this.

00:47:40.776 --> 00:47:42.126 A:middle
I've looked at the Ecosystem.

00:47:42.376 --> 00:47:44.026 A:middle
I know the facets
that I need to think

00:47:44.026 --> 00:47:45.746 A:middle
about and we can do it too.

00:47:45.746 --> 00:47:46.726 A:middle
We can have a pass too."

00:47:46.726 --> 00:47:49.016 A:middle
And then some web services tips

00:47:49.016 --> 00:47:51.426 A:middle
and tricks, those
are all online.

00:47:51.426 --> 00:47:52.706 A:middle
You can go back through them.

00:47:53.016 --> 00:47:54.756 A:middle
Read them, understand them more.

00:47:56.976 --> 00:47:59.866 A:middle
Paul Marcos, he does
a lot of this for you.

00:47:59.866 --> 00:48:01.526 A:middle
He helps us prepare.

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:47:59.866 --> 00:48:01.526 A:middle
He helps us prepare.

00:48:01.686 --> 00:48:03.976 A:middle
He's our evangelist,
great access

00:48:04.016 --> 00:48:05.846 A:middle
or he has great information,

00:48:05.846 --> 00:48:07.686 A:middle
so if you have any
questions, contact him.

00:48:08.386 --> 00:48:10.086 A:middle
There's documentation online.

00:48:10.816 --> 00:48:14.016 A:middle
In addition, if you missed
it earlier on the What's New

00:48:14.016 --> 00:48:15.986 A:middle
in Passbook, it's recorded.

00:48:15.986 --> 00:48:16.836 A:middle
So, check that out.

00:48:16.966 --> 00:48:21.176 A:middle
I want to call out
Harnessing iOS to Create Magic

00:48:21.176 --> 00:48:22.886 A:middle
in Your Apps specifically.

00:48:23.476 --> 00:48:26.416 A:middle
This session as well
as the next session

00:48:26.416 --> 00:48:30.036 A:middle
and especially the
next session is again

00:48:30.036 --> 00:48:33.116 A:middle
about using standard
iOS technologies,

00:48:33.326 --> 00:48:35.036 A:middle
kind of as an external
developer,

00:48:35.036 --> 00:48:39.266 A:middle
but using those technologies to
enrich the users' experiences.

00:48:40.336 --> 00:48:42.736 A:middle
So, they do some really
basic easy things,

00:48:43.226 --> 00:48:45.336 A:middle
but it just changes
the life of your apps

00:48:46.256 --> 00:48:47.636 A:middle
from an external standpoint.

00:48:48.136 --> 00:48:50.156 A:middle
Thank you so much
for joining us.

00:48:50.656 --> 00:49:04.850 A:middle
[Applause]

WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:48:50.656 --> 00:49:04.850 A:middle
[Applause]

