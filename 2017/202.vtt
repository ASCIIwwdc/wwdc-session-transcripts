WEBVTT

00:00:20.516 --> 00:00:22.916 A:middle
[ Applause ]

00:00:23.416 --> 00:00:23.596 A:middle
&gt;&gt; Morning.

00:00:25.956 --> 00:00:28.146 A:middle
Welcome to Advances in TVMLKit.

00:00:28.526 --> 00:00:29.146 A:middle
I'm Trevor.

00:00:29.146 --> 00:00:30.486 A:middle
I work in Localization, and

00:00:30.486 --> 00:00:31.526 A:middle
later, I'll be joined by my

00:00:31.526 --> 00:00:32.936 A:middle
colleagues, Parry and Jeremy,

00:00:32.936 --> 00:00:33.866 A:middle
from tvOS.

00:00:34.366 --> 00:00:35.656 A:middle
Today, we are really excited to

00:00:35.656 --> 00:00:37.146 A:middle
talk to you about three new

00:00:37.146 --> 00:00:39.586 A:middle
advances that we have made.

00:00:39.586 --> 00:00:41.226 A:middle
TVMLKit is Apple's developer

00:00:41.226 --> 00:00:42.586 A:middle
framework for building native

00:00:42.586 --> 00:00:45.246 A:middle
applications for Apple TV using

00:00:45.466 --> 00:00:47.356 A:middle
JavaScript and a markup language

00:00:47.356 --> 00:00:48.646 A:middle
that we call TVML.

00:00:51.376 --> 00:00:52.716 A:middle
I am going to get things started

00:00:52.716 --> 00:00:54.146 A:middle
by talking about right-to-left

00:00:54.146 --> 00:00:54.786 A:middle
languages.

00:00:55.166 --> 00:00:56.866 A:middle
Then Parry will show us how to

00:00:56.866 --> 00:00:57.876 A:middle
take advantage of new

00:00:57.876 --> 00:00:59.426 A:middle
optimizations in your templates,

00:00:59.696 --> 00:01:01.066 A:middle
to take performance to the next

00:01:01.066 --> 00:01:01.376 A:middle
level.

00:01:02.016 --> 00:01:03.456 A:middle
Finally, Jeremy will show us

00:01:03.456 --> 00:01:04.996 A:middle
some awesome new features that

00:01:04.996 --> 00:01:06.376 A:middle
you can use in the Web Inspector

00:01:06.436 --> 00:01:07.286 A:middle
to make debugging your

00:01:07.286 --> 00:01:08.826 A:middle
applications easier than ever.

00:01:09.316 --> 00:01:10.636 A:middle
So let's dive right in with

00:01:10.636 --> 00:01:11.896 A:middle
right-to-left language support.

00:01:14.836 --> 00:01:16.456 A:middle
Arabic and Hebrew are

00:01:16.456 --> 00:01:17.996 A:middle
newly-selectable languages in

00:01:17.996 --> 00:01:18.946 A:middle
tvOS 11.

00:01:20.206 --> 00:01:22.386 A:middle
With over 400 million speakers

00:01:22.386 --> 00:01:23.806 A:middle
worldwide, this is a huge

00:01:23.806 --> 00:01:25.436 A:middle
opportunity for you developers

00:01:25.666 --> 00:01:27.106 A:middle
to reach new audiences with your

00:01:28.276 --> 00:01:28.416 A:middle
app.

00:01:28.416 --> 00:01:29.626 A:middle
Now, what makes Arabic and

00:01:29.626 --> 00:01:30.846 A:middle
Hebrew different compared to

00:01:30.846 --> 00:01:31.986 A:middle
other languages you might be

00:01:31.986 --> 00:01:33.556 A:middle
supporting already is that they

00:01:33.556 --> 00:01:35.156 A:middle
are written and read from right

00:01:35.196 --> 00:01:35.646 A:middle
to left.

00:01:36.686 --> 00:01:37.646 A:middle
Let's take a look at some

00:01:37.646 --> 00:01:38.786 A:middle
examples, so we can really

00:01:38.786 --> 00:01:40.066 A:middle
understand what that means for

00:01:40.066 --> 00:01:41.036 A:middle
your applications.

00:01:45.056 --> 00:01:46.846 A:middle
What you see here is our product

00:01:46.846 --> 00:01:47.926 A:middle
template in a left-to-right

00:01:47.926 --> 00:01:50.126 A:middle
language, and it looks really

00:01:50.126 --> 00:01:51.256 A:middle
normal to most of you in the

00:01:51.256 --> 00:01:51.826 A:middle
audience.

00:01:51.916 --> 00:01:53.446 A:middle
The text is aligned on the left,

00:01:53.796 --> 00:01:55.226 A:middle
the content is flowing from the

00:01:55.226 --> 00:01:56.376 A:middle
left side of the screen to the

00:01:56.376 --> 00:01:57.426 A:middle
right side of the screen.

00:01:58.006 --> 00:01:59.126 A:middle
You see the focus is on the

00:01:59.126 --> 00:02:00.186 A:middle
first button, which is the

00:02:00.186 --> 00:02:00.966 A:middle
left-most button.

00:02:02.096 --> 00:02:03.446 A:middle
So, when you take this template,

00:02:03.896 --> 00:02:04.846 A:middle
and you load it in a

00:02:04.846 --> 00:02:06.376 A:middle
right-to-left language, for

00:02:06.376 --> 00:02:08.406 A:middle
example, Hebrew, you see the

00:02:08.406 --> 00:02:09.466 A:middle
content is mirrored.

00:02:09.466 --> 00:02:11.606 A:middle
It is now flowing from the right

00:02:11.606 --> 00:02:12.786 A:middle
side of the screen to the left

00:02:12.786 --> 00:02:13.526 A:middle
side of the screen.

00:02:13.826 --> 00:02:15.146 A:middle
Our text is aligned to the

00:02:15.146 --> 00:02:15.476 A:middle
right.

00:02:15.646 --> 00:02:17.106 A:middle
Our focus is still on the first

00:02:17.106 --> 00:02:18.326 A:middle
button, but now you see it is on

00:02:18.326 --> 00:02:19.016 A:middle
the other side.

00:02:19.506 --> 00:02:21.386 A:middle
Let's look at another example.

00:02:23.296 --> 00:02:24.976 A:middle
Here, we have the catalogue

00:02:24.976 --> 00:02:27.146 A:middle
template, and again, it looks

00:02:27.146 --> 00:02:28.646 A:middle
very normal and natural if you

00:02:28.646 --> 00:02:29.986 A:middle
are a reader of a left-to-right

00:02:29.986 --> 00:02:30.536 A:middle
language.

00:02:30.976 --> 00:02:32.026 A:middle
So when you look at this same

00:02:32.026 --> 00:02:33.396 A:middle
example in a right-to-left

00:02:33.396 --> 00:02:35.126 A:middle
language, you see that the

00:02:35.126 --> 00:02:36.676 A:middle
content is mirrored again.

00:02:36.866 --> 00:02:38.196 A:middle
It is flowing from right to

00:02:38.196 --> 00:02:38.626 A:middle
left.

00:02:38.836 --> 00:02:40.016 A:middle
The first image is still the

00:02:40.016 --> 00:02:41.106 A:middle
desert, but it is on the other

00:02:41.106 --> 00:02:41.876 A:middle
side of the screen.

00:02:42.876 --> 00:02:44.136 A:middle
So that is how these apps look

00:02:44.136 --> 00:02:46.056 A:middle
in right-to-left languages, and

00:02:46.346 --> 00:02:47.276 A:middle
as you can see from these

00:02:47.276 --> 00:02:48.416 A:middle
examples, we've built the

00:02:48.416 --> 00:02:49.896 A:middle
support into TVMLKit.

00:02:50.416 --> 00:02:52.036 A:middle
So when you're using the default

00:02:52.036 --> 00:02:53.306 A:middle
templates, you get the support

00:02:53.306 --> 00:02:55.836 A:middle
for free in your apps.

00:02:56.006 --> 00:02:57.946 A:middle
Now, supporting a right-to-left

00:02:57.946 --> 00:02:59.756 A:middle
language works the same way as

00:02:59.756 --> 00:03:01.026 A:middle
supporting any other languages

00:03:01.026 --> 00:03:01.486 A:middle
in your app.

00:03:02.176 --> 00:03:03.816 A:middle
You need to go into X code in

00:03:03.816 --> 00:03:05.646 A:middle
your project settings, and in

00:03:05.646 --> 00:03:07.996 A:middle
the localizations, just add

00:03:07.996 --> 00:03:09.336 A:middle
Arabic or Hebrew, which are

00:03:09.336 --> 00:03:10.366 A:middle
supported languages.

00:03:12.076 --> 00:03:13.946 A:middle
This is really key to make sure

00:03:13.946 --> 00:03:15.696 A:middle
that TVMLKit knows when to

00:03:15.696 --> 00:03:16.616 A:middle
render these views at

00:03:16.616 --> 00:03:17.786 A:middle
right-to-left at run time.

00:03:18.496 --> 00:03:19.846 A:middle
And for more coverage about

00:03:19.846 --> 00:03:20.866 A:middle
everything that it takes to

00:03:20.866 --> 00:03:22.146 A:middle
support localizations in your

00:03:22.146 --> 00:03:23.396 A:middle
apps, including localizing

00:03:23.396 --> 00:03:24.516 A:middle
content and dealing with

00:03:24.516 --> 00:03:25.946 A:middle
formatters for dates and times,

00:03:26.306 --> 00:03:27.606 A:middle
I recommend checking out this

00:03:27.606 --> 00:03:29.266 A:middle
year's talk, Localizing With X

00:03:29.266 --> 00:03:30.646 A:middle
Code 9, which goes into much

00:03:30.646 --> 00:03:33.086 A:middle
greater detail.

00:03:33.226 --> 00:03:35.036 A:middle
So the default templates work

00:03:35.036 --> 00:03:36.856 A:middle
out of the box, but what if you

00:03:36.856 --> 00:03:38.526 A:middle
have custom views, and you want

00:03:38.526 --> 00:03:39.946 A:middle
to customize the behavior beyond

00:03:39.946 --> 00:03:40.696 A:middle
those templates.

00:03:41.306 --> 00:03:42.666 A:middle
Well in tvOS 11 we have

00:03:42.666 --> 00:03:44.456 A:middle
introduced three specific areas

00:03:44.456 --> 00:03:46.956 A:middle
where you can customize layout,

00:03:47.536 --> 00:03:49.316 A:middle
text alignment and images.

00:03:49.706 --> 00:03:51.356 A:middle
Let's get started with layout.

00:03:52.556 --> 00:03:54.296 A:middle
Today, you might be customizing

00:03:54.296 --> 00:03:56.456 A:middle
your layout using tv-align, and

00:03:56.456 --> 00:03:57.476 A:middle
tv-position, and you are

00:03:57.476 --> 00:03:59.446 A:middle
probably using values of left

00:03:59.446 --> 00:03:59.846 A:middle
and right.

00:04:01.046 --> 00:04:01.946 A:middle
Well, for right-to-left

00:04:01.946 --> 00:04:03.836 A:middle
languages, left becomes left and

00:04:03.836 --> 00:04:05.516 A:middle
right becomes left, or something

00:04:05.516 --> 00:04:07.366 A:middle
like that, so you need to take

00:04:07.366 --> 00:04:10.076 A:middle
care to use the right direction.

00:04:10.266 --> 00:04:11.436 A:middle
And for that, we've introduced

00:04:11.436 --> 00:04:12.446 A:middle
leading and trailing.

00:04:13.496 --> 00:04:14.496 A:middle
Leading and trailing will

00:04:14.496 --> 00:04:15.796 A:middle
automatically resolve to the

00:04:15.796 --> 00:04:17.336 A:middle
corresponding values of left and

00:04:17.336 --> 00:04:18.676 A:middle
right at run time, based on the

00:04:18.676 --> 00:04:19.486 A:middle
running language of your

00:04:19.486 --> 00:04:20.056 A:middle
application.

00:04:20.886 --> 00:04:22.096 A:middle
So, for example, if you have a

00:04:22.096 --> 00:04:23.156 A:middle
style defined where you're

00:04:23.156 --> 00:04:24.806 A:middle
setting a tv-position to right

00:04:25.116 --> 00:04:26.946 A:middle
or tv-align to left, just

00:04:26.946 --> 00:04:28.216 A:middle
replace those values with

00:04:28.216 --> 00:04:29.246 A:middle
trailing and leading.

00:04:29.876 --> 00:04:31.336 A:middle
This is going to ensure that in

00:04:31.336 --> 00:04:32.506 A:middle
your left-to-right language,

00:04:32.506 --> 00:04:33.716 A:middle
everything looks exactly the

00:04:33.716 --> 00:04:35.596 A:middle
same, but in a right-to-left

00:04:35.596 --> 00:04:37.016 A:middle
language, content is flowing

00:04:37.016 --> 00:04:37.476 A:middle
correctly.

00:04:40.116 --> 00:04:41.726 A:middle
For values of margin and

00:04:41.726 --> 00:04:43.166 A:middle
padding, we've introduced a

00:04:43.166 --> 00:04:45.386 A:middle
brand-new media query in tvOS 11

00:04:45.836 --> 00:04:47.336 A:middle
called Layout Direction.

00:04:48.056 --> 00:04:49.366 A:middle
You might already be using media

00:04:49.366 --> 00:04:51.166 A:middle
queries today for customizing

00:04:51.166 --> 00:04:52.336 A:middle
your appearance for light and

00:04:52.336 --> 00:04:52.636 A:middle
dark.

00:04:52.976 --> 00:04:54.166 A:middle
These work just the same way.

00:04:54.606 --> 00:04:56.016 A:middle
Any styles that you define

00:04:56.016 --> 00:04:57.906 A:middle
inside the media query will be

00:04:57.906 --> 00:04:59.706 A:middle
active for that media query.

00:05:00.306 --> 00:05:02.336 A:middle
So, here in our example, we have

00:05:02.506 --> 00:05:04.786 A:middle
two styles defined, one in our

00:05:04.786 --> 00:05:06.406 A:middle
LTR layout direction, left to

00:05:06.406 --> 00:05:08.256 A:middle
right, and one in our RTL layout

00:05:08.256 --> 00:05:08.696 A:middle
direction.

00:05:09.356 --> 00:05:11.396 A:middle
And we take care to ensure that

00:05:11.396 --> 00:05:13.466 A:middle
any horizontal values are

00:05:13.466 --> 00:05:15.106 A:middle
flipped according to the side

00:05:15.106 --> 00:05:16.016 A:middle
that they need to be on.

00:05:16.376 --> 00:05:17.556 A:middle
So here, in our example, our

00:05:17.556 --> 00:05:19.136 A:middle
margin of 12 needs to be on the

00:05:19.186 --> 00:05:20.756 A:middle
correct side of the element.

00:05:21.216 --> 00:05:23.556 A:middle
So that's layout.

00:05:23.556 --> 00:05:25.356 A:middle
What about text direction?

00:05:26.216 --> 00:05:28.446 A:middle
So for alignment, you're used to

00:05:28.446 --> 00:05:30.436 A:middle
using things like left, center

00:05:30.436 --> 00:05:30.856 A:middle
and right.

00:05:31.316 --> 00:05:32.526 A:middle
And when you look at the text on

00:05:32.526 --> 00:05:34.536 A:middle
the screen, two kind of jump out

00:05:34.536 --> 00:05:35.826 A:middle
to you as a more natural

00:05:35.826 --> 00:05:37.676 A:middle
presentation for a left-to-right

00:05:37.676 --> 00:05:39.086 A:middle
language, left alignment is

00:05:39.086 --> 00:05:40.776 A:middle
natural, and for a right-to-left

00:05:40.776 --> 00:05:42.066 A:middle
language, right alignment is

00:05:42.066 --> 00:05:42.516 A:middle
natural.

00:05:43.166 --> 00:05:45.216 A:middle
So, for that, we got with our

00:05:45.216 --> 00:05:46.436 A:middle
marketing team and thought

00:05:46.436 --> 00:05:48.666 A:middle
really deeply about what kind of

00:05:48.736 --> 00:05:50.256 A:middle
term could we use here, and we

00:05:50.256 --> 00:05:51.596 A:middle
came up with a new value for

00:05:51.596 --> 00:05:52.826 A:middle
text alignment of natural.

00:05:53.716 --> 00:05:55.096 A:middle
Natural does just what you'd

00:05:55.096 --> 00:05:55.936 A:middle
expect it to do.

00:05:55.936 --> 00:05:57.616 A:middle
It aligns a text naturally based

00:05:57.616 --> 00:05:59.006 A:middle
on the UI language of your app.

00:05:59.506 --> 00:05:59.956 A:middle
Easy stuff.

00:06:02.496 --> 00:06:04.156 A:middle
When it comes to images in your

00:06:04.156 --> 00:06:06.126 A:middle
apps, the majority of the images

00:06:06.126 --> 00:06:07.296 A:middle
you have are universal.

00:06:07.386 --> 00:06:08.586 A:middle
They are appropriate to show for

00:06:08.586 --> 00:06:09.566 A:middle
any layout direction.

00:06:10.146 --> 00:06:12.076 A:middle
But in some cases, an image has

00:06:12.076 --> 00:06:13.906 A:middle
an implied directionality, like

00:06:13.906 --> 00:06:15.336 A:middle
this Chevron at the end of a

00:06:15.336 --> 00:06:15.956 A:middle
list item.

00:06:16.506 --> 00:06:17.636 A:middle
In this case, it's really

00:06:17.636 --> 00:06:18.706 A:middle
important that the arrow is

00:06:18.706 --> 00:06:19.626 A:middle
pointing in the correct

00:06:19.626 --> 00:06:21.436 A:middle
direction, otherwise it would

00:06:21.436 --> 00:06:22.896 A:middle
look really weird and probably

00:06:22.896 --> 00:06:23.366 A:middle
broken.

00:06:24.226 --> 00:06:26.086 A:middle
So there's two ways that you can

00:06:26.086 --> 00:06:27.316 A:middle
support these in your apps.

00:06:27.626 --> 00:06:29.006 A:middle
The first is for resource

00:06:29.006 --> 00:06:29.576 A:middle
images.

00:06:30.006 --> 00:06:31.186 A:middle
Images that are coming from

00:06:31.186 --> 00:06:32.626 A:middle
inside your application bundle

00:06:33.216 --> 00:06:35.916 A:middle
can be specified in asset

00:06:35.916 --> 00:06:37.576 A:middle
catalogs, which provide a really

00:06:37.576 --> 00:06:39.706 A:middle
convenient way for customizing

00:06:39.706 --> 00:06:41.946 A:middle
if the image is fixed for all

00:06:41.946 --> 00:06:43.446 A:middle
layout directions, can be

00:06:43.446 --> 00:06:45.066 A:middle
graphically mirrored at runtime,

00:06:45.256 --> 00:06:46.946 A:middle
like our chevron, or if we

00:06:46.946 --> 00:06:48.486 A:middle
needed a dedicated asset for

00:06:48.486 --> 00:06:49.546 A:middle
each language.

00:06:51.526 --> 00:06:53.896 A:middle
For images that are coming from

00:06:53.896 --> 00:06:56.916 A:middle
your server, we have a brand new

00:06:56.916 --> 00:06:58.246 A:middle
attribute that you can set on

00:06:58.246 --> 00:06:59.396 A:middle
your image elements, called

00:06:59.396 --> 00:06:59.906 A:middle
Source Set.

00:07:01.226 --> 00:07:02.376 A:middle
Source Set allows you to

00:07:02.376 --> 00:07:04.906 A:middle
identify a given URL for a given

00:07:04.906 --> 00:07:05.706 A:middle
layout direction.

00:07:06.596 --> 00:07:07.826 A:middle
What's great about Source Set is

00:07:07.826 --> 00:07:09.116 A:middle
that you can also use these for

00:07:09.116 --> 00:07:10.706 A:middle
customizing your appearances for

00:07:10.706 --> 00:07:11.336 A:middle
light and dark.

00:07:12.006 --> 00:07:15.346 A:middle
So here URL one will be loaded

00:07:15.486 --> 00:07:17.126 A:middle
when my layout direction is LTR,

00:07:17.896 --> 00:07:20.046 A:middle
and URL2 will be loaded when my

00:07:20.046 --> 00:07:21.296 A:middle
layout direction is RTL.

00:07:21.296 --> 00:07:23.306 A:middle
So this is a really concise way

00:07:23.306 --> 00:07:24.856 A:middle
for you to just define a single

00:07:24.856 --> 00:07:26.406 A:middle
image, and have the correct

00:07:26.406 --> 00:07:29.006 A:middle
thing happen at runtime.

00:07:29.096 --> 00:07:30.476 A:middle
So I'd like to see if we can

00:07:30.476 --> 00:07:31.846 A:middle
take all of these pieces and put

00:07:31.846 --> 00:07:33.026 A:middle
them together with a little

00:07:33.026 --> 00:07:33.706 A:middle
sample app that I've been

00:07:33.706 --> 00:07:33.936 A:middle
working on.

00:07:44.386 --> 00:07:45.876 A:middle
So I've been working on an app

00:07:45.876 --> 00:07:48.186 A:middle
that lets me showcase the WWDC

00:07:48.186 --> 00:07:49.516 A:middle
sessions from last year's

00:07:49.516 --> 00:07:51.096 A:middle
conference, and I'd love to show

00:07:51.096 --> 00:07:51.506 A:middle
it to you now.

00:08:02.316 --> 00:08:03.436 A:middle
So here you can see I have a

00:08:03.436 --> 00:08:05.346 A:middle
grid of the past sessions, and

00:08:05.346 --> 00:08:06.656 A:middle
at the top, I have a banner,

00:08:06.656 --> 00:08:07.976 A:middle
where I have a featured session.

00:08:09.036 --> 00:08:11.026 A:middle
So before I want to support a

00:08:11.026 --> 00:08:12.106 A:middle
right-to-left language in my

00:08:12.106 --> 00:08:14.116 A:middle
app, I can do a few things

00:08:14.116 --> 00:08:15.026 A:middle
without even adding a

00:08:15.026 --> 00:08:15.786 A:middle
localization.

00:08:16.926 --> 00:08:21.056 A:middle
In the edit scheme, in our run

00:08:21.136 --> 00:08:22.966 A:middle
options, I can change the

00:08:22.966 --> 00:08:24.826 A:middle
application language from the

00:08:24.826 --> 00:08:25.966 A:middle
system language to a

00:08:25.966 --> 00:08:27.286 A:middle
right-to-left pseudolanguage.

00:08:27.836 --> 00:08:29.476 A:middle
This lets me simulate what it's

00:08:29.476 --> 00:08:30.366 A:middle
going to be like in a

00:08:30.366 --> 00:08:31.796 A:middle
right-to-left language without

00:08:31.796 --> 00:08:32.996 A:middle
having to change anything about

00:08:32.996 --> 00:08:33.646 A:middle
my project.

00:08:34.856 --> 00:08:36.466 A:middle
So now, when I build and run,

00:08:36.946 --> 00:08:38.466 A:middle
you see our grid is now flowing

00:08:38.466 --> 00:08:39.396 A:middle
from right to left.

00:08:39.816 --> 00:08:41.636 A:middle
So because we're using a grid,

00:08:41.636 --> 00:08:42.976 A:middle
we get that support for free

00:08:42.976 --> 00:08:43.696 A:middle
from our template.

00:08:44.126 --> 00:08:45.616 A:middle
But because my banner was

00:08:45.616 --> 00:08:47.146 A:middle
custom, that I added with my own

00:08:47.146 --> 00:08:48.816 A:middle
styles, looks like I still have

00:08:48.816 --> 00:08:49.426 A:middle
some work to do.

00:08:49.936 --> 00:08:51.436 A:middle
So let's see if I can apply the

00:08:51.436 --> 00:08:53.746 A:middle
new API in tvOS 11 to fix these

00:08:53.746 --> 00:08:54.196 A:middle
problems?

00:08:55.836 --> 00:08:57.056 A:middle
The first thing that I'm going

00:08:57.056 --> 00:08:59.126 A:middle
to do is check my style in my

00:08:59.126 --> 00:09:01.126 A:middle
TVML and replace all of my

00:09:01.226 --> 00:09:03.936 A:middle
hard-coded references of left to

00:09:03.936 --> 00:09:05.656 A:middle
leading, which is the left side

00:09:05.656 --> 00:09:07.036 A:middle
of the screen in my development

00:09:07.036 --> 00:09:07.496 A:middle
language.

00:09:08.386 --> 00:09:09.836 A:middle
Similarly, I'll replace my

00:09:09.836 --> 00:09:11.776 A:middle
values of right with trailing.

00:09:14.156 --> 00:09:15.636 A:middle
Now, when I build and run my

00:09:15.686 --> 00:09:17.176 A:middle
app, hopefully we will have some

00:09:17.176 --> 00:09:17.816 A:middle
progress.

00:09:19.696 --> 00:09:21.736 A:middle
So great, looks like our text

00:09:21.736 --> 00:09:22.676 A:middle
has now flipped to the other

00:09:22.676 --> 00:09:24.366 A:middle
side, and our play button is on

00:09:24.366 --> 00:09:25.366 A:middle
the right side of the screen,

00:09:25.676 --> 00:09:27.356 A:middle
but it seems like it's a little

00:09:27.356 --> 00:09:29.896 A:middle
bit too close to the edge.

00:09:30.116 --> 00:09:31.996 A:middle
If I look at my style, my banner

00:09:31.996 --> 00:09:33.626 A:middle
play button lockup has a custom

00:09:33.626 --> 00:09:34.766 A:middle
margin that is applied to the

00:09:34.766 --> 00:09:35.706 A:middle
right side of the element.

00:09:36.016 --> 00:09:37.426 A:middle
We need to make sure that margin

00:09:37.426 --> 00:09:38.656 A:middle
is on the other side when we are

00:09:38.656 --> 00:09:39.626 A:middle
running in right to left.

00:09:41.096 --> 00:09:43.116 A:middle
To save time, I added a snippet

00:09:43.116 --> 00:09:44.686 A:middle
earlier that defines the two

00:09:44.686 --> 00:09:46.496 A:middle
media queries for my Banner Play

00:09:46.496 --> 00:09:48.686 A:middle
Button Lockup for LTR and RTL.

00:09:48.816 --> 00:09:51.576 A:middle
I'm going to move my definition

00:09:51.576 --> 00:09:54.646 A:middle
of the margin into the LTR, and

00:09:55.436 --> 00:09:57.326 A:middle
in my RTL definition, I'm going

00:09:57.326 --> 00:09:59.036 A:middle
to swap the horizontal position

00:09:59.416 --> 00:10:00.276 A:middle
of that 60.

00:10:02.916 --> 00:10:05.896 A:middle
Now, when I build and run, looks

00:10:05.896 --> 00:10:07.076 A:middle
like our play button has the

00:10:07.076 --> 00:10:07.636 A:middle
right padding.

00:10:08.146 --> 00:10:09.876 A:middle
So we are nearly there, but

00:10:09.876 --> 00:10:11.356 A:middle
looking at this app now, we can

00:10:11.356 --> 00:10:12.766 A:middle
kind of see that the text is on

00:10:12.766 --> 00:10:13.406 A:middle
the other side.

00:10:13.406 --> 00:10:14.826 A:middle
It is a little hard to read with

00:10:14.826 --> 00:10:16.126 A:middle
that image right underneath it.

00:10:17.166 --> 00:10:18.426 A:middle
So my designer gave me an

00:10:18.426 --> 00:10:19.826 A:middle
alternate asset that I can use

00:10:19.826 --> 00:10:21.176 A:middle
in my right-to-left languages,

00:10:21.486 --> 00:10:23.006 A:middle
so I can add that to my project,

00:10:23.006 --> 00:10:24.756 A:middle
since I'm using Asset Catalogs.

00:10:25.556 --> 00:10:26.966 A:middle
Here, in my Asset Catalogue, I

00:10:26.966 --> 00:10:28.436 A:middle
have a single image defined for

00:10:28.436 --> 00:10:29.906 A:middle
my banner, and then in the

00:10:29.906 --> 00:10:31.796 A:middle
attribute inspector, I can

00:10:31.796 --> 00:10:33.416 A:middle
change the direction from fixed

00:10:33.626 --> 00:10:34.106 A:middle
to both.

00:10:34.846 --> 00:10:36.346 A:middle
This now gives me a well where I

00:10:36.346 --> 00:10:37.576 A:middle
can drop the asset that should

00:10:37.576 --> 00:10:38.696 A:middle
be used in our right-to-left

00:10:38.696 --> 00:10:39.146 A:middle
language.

00:10:40.656 --> 00:10:44.366 A:middle
So I'll drop that in place and

00:10:44.596 --> 00:10:46.036 A:middle
build and run my app one last

00:10:50.116 --> 00:10:50.226 A:middle
time.

00:10:50.436 --> 00:10:51.306 A:middle
And there you have it.

00:10:51.586 --> 00:10:52.996 A:middle
With just a few small changes,

00:10:52.996 --> 00:10:54.536 A:middle
our app is now ready to support

00:10:54.536 --> 00:10:54.976 A:middle
right to left.

00:10:55.516 --> 00:11:01.396 A:middle
[ Applause ]

00:11:01.896 --> 00:11:04.076 A:middle
So as you saw, with just a few

00:11:04.076 --> 00:11:05.276 A:middle
small changes to our app,

00:11:05.586 --> 00:11:06.866 A:middle
because the default templates

00:11:06.866 --> 00:11:08.536 A:middle
give us the support for free, we

00:11:08.536 --> 00:11:09.956 A:middle
can have an app that fully

00:11:09.956 --> 00:11:10.916 A:middle
supports a right-to-left

00:11:10.916 --> 00:11:12.606 A:middle
language, with very few changes

00:11:12.606 --> 00:11:13.386 A:middle
needed from us.

00:11:13.926 --> 00:11:15.356 A:middle
We also have a really powerful

00:11:15.356 --> 00:11:16.366 A:middle
tool in the right-to-left

00:11:16.366 --> 00:11:17.626 A:middle
pseudolanguage, that allows us

00:11:17.626 --> 00:11:19.036 A:middle
to simulate the effects of a

00:11:19.036 --> 00:11:20.566 A:middle
right-to-left layout without

00:11:20.566 --> 00:11:21.806 A:middle
having to read a right-to-left

00:11:21.806 --> 00:11:22.286 A:middle
language.

00:11:23.196 --> 00:11:25.116 A:middle
Now, one last note, if you're

00:11:25.116 --> 00:11:26.356 A:middle
using custom views in your

00:11:26.356 --> 00:11:28.746 A:middle
application, we have a system of

00:11:28.746 --> 00:11:30.336 A:middle
constraints in auto layout

00:11:30.336 --> 00:11:32.076 A:middle
engine that is a really powerful

00:11:32.076 --> 00:11:34.496 A:middle
tool to take care of layout for

00:11:34.496 --> 00:11:35.606 A:middle
right to left languages.

00:11:36.366 --> 00:11:38.066 A:middle
We also have an API effective

00:11:38.066 --> 00:11:39.346 A:middle
layout direction, which will

00:11:39.346 --> 00:11:40.686 A:middle
return to you if you are in a

00:11:40.686 --> 00:11:42.186 A:middle
left-to-right or a right-to-left

00:11:42.186 --> 00:11:43.446 A:middle
layout direction at run time,

00:11:43.856 --> 00:11:45.396 A:middle
which is really useful for doing

00:11:45.456 --> 00:11:46.986 A:middle
things like frame math in an

00:11:46.986 --> 00:11:47.486 A:middle
animation.

00:11:48.486 --> 00:11:50.086 A:middle
For more in-depth coverage about

00:11:50.086 --> 00:11:52.016 A:middle
all the things, and nuances for

00:11:52.016 --> 00:11:52.926 A:middle
supporting right-to-left

00:11:52.926 --> 00:11:54.316 A:middle
languages, I recommend checking

00:11:54.316 --> 00:11:55.436 A:middle
out last year's talks,

00:11:55.656 --> 00:11:56.826 A:middle
Internationalization Best

00:11:56.826 --> 00:11:58.396 A:middle
Practices, and What's New In

00:11:58.396 --> 00:11:59.846 A:middle
International User Interfaces.

00:12:01.756 --> 00:12:03.756 A:middle
I can't wait to see your apps

00:12:03.756 --> 00:12:04.706 A:middle
supporting right-to-left

00:12:04.706 --> 00:12:06.186 A:middle
languages later this fall.

00:12:06.696 --> 00:12:07.746 A:middle
Now, here is Parry, with

00:12:07.746 --> 00:12:08.826 A:middle
template optimizations.

00:12:09.026 --> 00:12:09.386 A:middle
Thank you.

00:12:10.516 --> 00:12:12.546 A:middle
[ Applause ]

00:12:13.046 --> 00:12:14.896 A:middle
&gt;&gt; Thank you, Trevor.

00:12:14.896 --> 00:12:16.406 A:middle
Hi! I'm Parry.

00:12:16.676 --> 00:12:17.676 A:middle
I'm going to walk you through

00:12:17.676 --> 00:12:18.996 A:middle
some of the enhancements we made

00:12:18.996 --> 00:12:20.496 A:middle
to our templates that is going

00:12:20.496 --> 00:12:21.656 A:middle
to improve the performance of

00:12:21.696 --> 00:12:23.346 A:middle
your app, both in terms of time

00:12:23.466 --> 00:12:23.936 A:middle
and memory.

00:12:24.836 --> 00:12:26.426 A:middle
If you worked with TVMLKit apps

00:12:26.426 --> 00:12:28.166 A:middle
before, you might have noticed

00:12:28.166 --> 00:12:29.656 A:middle
that the performance of a

00:12:29.656 --> 00:12:31.676 A:middle
template degrades as you try to

00:12:31.676 --> 00:12:33.406 A:middle
add more content into it.

00:12:33.546 --> 00:12:34.396 A:middle
Let me illustrate with an

00:12:34.396 --> 00:12:34.816 A:middle
example.

00:12:36.076 --> 00:12:37.756 A:middle
So I'm working with Trevor on

00:12:37.756 --> 00:12:40.246 A:middle
our sample WWDC app, and I'm

00:12:40.246 --> 00:12:43.066 A:middle
trying to enhance it to add all

00:12:43.066 --> 00:12:44.156 A:middle
the sessions from the past,

00:12:44.156 --> 00:12:45.236 A:middle
instead of just the last year's

00:12:45.236 --> 00:12:45.586 A:middle
sessions.

00:12:46.016 --> 00:12:47.506 A:middle
We are keeping a simple design

00:12:48.236 --> 00:12:50.036 A:middle
with a grid to showcase all the

00:12:50.036 --> 00:12:50.606 A:middle
sessions.

00:12:51.096 --> 00:12:52.606 A:middle
Each session being represented

00:12:52.606 --> 00:12:55.686 A:middle
by a lockup composed of an image

00:12:55.906 --> 00:12:56.426 A:middle
and a title.

00:12:56.426 --> 00:12:58.716 A:middle
Now, you can imagine that there

00:12:58.716 --> 00:12:59.806 A:middle
are thousands of these sessions

00:12:59.806 --> 00:13:00.506 A:middle
to show.

00:13:01.126 --> 00:13:02.426 A:middle
So in a typical scenario like

00:13:02.426 --> 00:13:03.986 A:middle
this, you don't want to show all

00:13:03.986 --> 00:13:05.596 A:middle
your content up front, because

00:13:05.596 --> 00:13:07.026 A:middle
A, it is going to take a long

00:13:07.026 --> 00:13:09.196 A:middle
time to load, and B, it might

00:13:09.196 --> 00:13:10.606 A:middle
not even be possible, because

00:13:10.606 --> 00:13:11.876 A:middle
your servers might not support

00:13:11.876 --> 00:13:12.316 A:middle
that.

00:13:13.066 --> 00:13:14.846 A:middle
But instead, you paginate your

00:13:14.846 --> 00:13:15.396 A:middle
data.

00:13:15.856 --> 00:13:17.036 A:middle
You start off with something

00:13:17.036 --> 00:13:18.856 A:middle
small, let's say about 500

00:13:18.856 --> 00:13:20.626 A:middle
items, and then you keep adding

00:13:20.626 --> 00:13:22.516 A:middle
to it, as the users scroll

00:13:22.516 --> 00:13:23.826 A:middle
through the end of your content.

00:13:25.056 --> 00:13:26.916 A:middle
Now, we did a bit of performance

00:13:26.916 --> 00:13:28.586 A:middle
analysis for such a scenario,

00:13:28.946 --> 00:13:30.076 A:middle
and this is what it looks like.

00:13:31.636 --> 00:13:33.766 A:middle
What you see in this graph is

00:13:33.766 --> 00:13:35.866 A:middle
the time it took to build the

00:13:35.866 --> 00:13:36.996 A:middle
template with a certain number

00:13:36.996 --> 00:13:40.786 A:middle
of items, and what you see on

00:13:40.786 --> 00:13:42.056 A:middle
the x axis is the number of

00:13:42.056 --> 00:13:43.736 A:middle
items in the template, and what

00:13:43.736 --> 00:13:45.126 A:middle
you see on the y is the time it

00:13:45.126 --> 00:13:45.796 A:middle
took to reach there.

00:13:46.506 --> 00:13:48.346 A:middle
And as you can see, it's an

00:13:48.346 --> 00:13:49.426 A:middle
exponential curve.

00:13:50.596 --> 00:13:51.926 A:middle
Meaning that it takes longer to

00:13:51.926 --> 00:13:53.586 A:middle
add the same number of items to

00:13:53.586 --> 00:13:55.526 A:middle
the template as the size of the

00:13:55.526 --> 00:13:56.306 A:middle
template grows.

00:13:56.306 --> 00:13:58.726 A:middle
But why is that?

00:13:59.476 --> 00:14:01.236 A:middle
Well, one of the major factors

00:14:01.496 --> 00:14:02.876 A:middle
is the size of the document

00:14:02.876 --> 00:14:04.426 A:middle
object model back in these

00:14:04.456 --> 00:14:04.936 A:middle
templates.

00:14:05.416 --> 00:14:06.786 A:middle
The problem is two-fold.

00:14:07.686 --> 00:14:08.946 A:middle
On one hand, you have the

00:14:08.946 --> 00:14:09.786 A:middle
parsing overhead.

00:14:10.086 --> 00:14:11.816 A:middle
First, in your JavaScript, when

00:14:11.816 --> 00:14:13.076 A:middle
you parse your data into the

00:14:13.076 --> 00:14:15.016 A:middle
DOM, so when the DOM size

00:14:15.016 --> 00:14:16.376 A:middle
increases it takes longer to add

00:14:16.376 --> 00:14:18.356 A:middle
more stuff to it, and then when

00:14:18.356 --> 00:14:20.486 A:middle
TVMLKit has to parse a DOM in

00:14:20.486 --> 00:14:21.616 A:middle
order to calculate out

00:14:21.616 --> 00:14:24.156 A:middle
information, like cell sizes,

00:14:24.266 --> 00:14:26.156 A:middle
line spacing, even scrolling

00:14:26.156 --> 00:14:26.616 A:middle
offsets.

00:14:27.106 --> 00:14:28.316 A:middle
All the things that make your

00:14:28.316 --> 00:14:29.976 A:middle
TVMLKit app look beautiful.

00:14:30.966 --> 00:14:32.096 A:middle
But as you can imagine, as the

00:14:32.096 --> 00:14:33.966 A:middle
size of the DOM increases, it

00:14:33.966 --> 00:14:35.346 A:middle
takes longer to perform these

00:14:35.346 --> 00:14:35.826 A:middle
operations.

00:14:37.226 --> 00:14:39.886 A:middle
And on the other hand, you have

00:14:39.886 --> 00:14:41.626 A:middle
an increasing memory pressure

00:14:41.626 --> 00:14:42.926 A:middle
because of an increasing DOM

00:14:42.926 --> 00:14:44.656 A:middle
size, which slows down your app

00:14:44.656 --> 00:14:44.976 A:middle
as a whole.

00:14:47.186 --> 00:14:49.506 A:middle
So to solve these problems, in

00:14:49.506 --> 00:14:52.386 A:middle
tvOS 11, we've come up with a

00:14:52.386 --> 00:14:54.296 A:middle
brand new paradigm of defining

00:14:54.296 --> 00:14:56.446 A:middle
templates using prototype and

00:14:56.626 --> 00:14:59.396 A:middle
data binding which is going to

00:14:59.396 --> 00:15:00.976 A:middle
significantly reduce the size of

00:15:01.016 --> 00:15:02.786 A:middle
your DOM, hence improving your

00:15:02.786 --> 00:15:05.526 A:middle
app's performance, and on top of

00:15:05.526 --> 00:15:07.386 A:middle
that, we've added APIs to

00:15:07.386 --> 00:15:08.336 A:middle
support pagination.

00:15:09.286 --> 00:15:10.246 A:middle
Let's look at these in more

00:15:10.246 --> 00:15:10.586 A:middle
detail.

00:15:12.036 --> 00:15:13.996 A:middle
In order to understand what a

00:15:13.996 --> 00:15:15.786 A:middle
prototype is, I'm going to walk

00:15:15.786 --> 00:15:17.486 A:middle
you through a typical template

00:15:17.486 --> 00:15:18.336 A:middle
building process.

00:15:18.916 --> 00:15:20.296 A:middle
You start off with the data from

00:15:20.296 --> 00:15:22.776 A:middle
your servers, and an empty shell

00:15:22.776 --> 00:15:23.336 A:middle
of a template.

00:15:23.336 --> 00:15:24.456 A:middle
In our case, it's a grid.

00:15:24.456 --> 00:15:27.086 A:middle
And in your JavaScript, you go

00:15:27.086 --> 00:15:27.886 A:middle
through each one of these

00:15:27.886 --> 00:15:30.936 A:middle
objects, and you can word them

00:15:30.936 --> 00:15:32.446 A:middle
into their corresponding TVML

00:15:32.446 --> 00:15:33.096 A:middle
markup.

00:15:33.496 --> 00:15:35.056 A:middle
In our case, it's a lockup.

00:15:36.086 --> 00:15:37.866 A:middle
Once you've done that, you parse

00:15:37.866 --> 00:15:40.736 A:middle
that into a DOM, and that is

00:15:40.736 --> 00:15:42.296 A:middle
when TVMLKit starts producing

00:15:42.296 --> 00:15:43.386 A:middle
the user interface for it.

00:15:44.056 --> 00:15:46.286 A:middle
But if you look closely, you'll

00:15:46.286 --> 00:15:47.826 A:middle
see that all of these lockups,

00:15:47.826 --> 00:15:49.016 A:middle
they look very similar.

00:15:49.016 --> 00:15:51.736 A:middle
In fact, the only thing that is

00:15:51.826 --> 00:15:52.856 A:middle
different between them are the

00:15:52.856 --> 00:15:53.846 A:middle
values that are coming from the

00:15:53.846 --> 00:15:53.976 A:middle
data.

00:15:56.796 --> 00:15:58.606 A:middle
Once you remove these values,

00:15:59.076 --> 00:16:00.806 A:middle
what you end up with is an

00:16:00.876 --> 00:16:03.756 A:middle
identical looking lockup that

00:16:03.756 --> 00:16:05.326 A:middle
has all the information that

00:16:05.326 --> 00:16:07.386 A:middle
TVMLKit needs to compute that

00:16:07.386 --> 00:16:08.306 A:middle
layout up front.

00:16:09.216 --> 00:16:10.856 A:middle
So it turns out, you don't need

00:16:10.856 --> 00:16:12.706 A:middle
all of these lockups, you just

00:16:12.706 --> 00:16:14.146 A:middle
need one of them.

00:16:14.466 --> 00:16:15.896 A:middle
And that's what we call a

00:16:15.896 --> 00:16:16.586 A:middle
prototype.

00:16:17.596 --> 00:16:20.306 A:middle
So a prototype is a TVML schema

00:16:20.306 --> 00:16:22.386 A:middle
for your data objects that

00:16:22.386 --> 00:16:24.196 A:middle
TVMLKit can use to compute the

00:16:24.196 --> 00:16:26.636 A:middle
layout up front, and then at

00:16:26.636 --> 00:16:28.116 A:middle
runtime, it can combine it with

00:16:28.116 --> 00:16:30.786 A:middle
the data to author the DOM for

00:16:30.786 --> 00:16:32.266 A:middle
you, but only the parts that it

00:16:32.266 --> 00:16:34.056 A:middle
needs when it needs it.

00:16:34.876 --> 00:16:36.616 A:middle
So the DOM size remains concise,

00:16:36.926 --> 00:16:38.176 A:middle
and independent of your data set

00:16:38.176 --> 00:16:38.476 A:middle
size.

00:16:40.386 --> 00:16:42.836 A:middle
Now, you can imagine a template

00:16:42.836 --> 00:16:44.166 A:middle
with just a prototype would be

00:16:44.166 --> 00:16:45.776 A:middle
incomplete, because you also

00:16:45.776 --> 00:16:46.546 A:middle
need to provide data.

00:16:47.696 --> 00:16:49.036 A:middle
But on top of that, you also

00:16:49.036 --> 00:16:51.146 A:middle
need to provide a link between

00:16:51.146 --> 00:16:52.936 A:middle
your template and your data.

00:16:53.226 --> 00:16:54.826 A:middle
This is how TVMLKit can make

00:16:54.936 --> 00:16:56.756 A:middle
sense of what your data is, and

00:16:56.756 --> 00:16:58.016 A:middle
complete the template for you.

00:16:58.746 --> 00:17:01.736 A:middle
And you specify that using data

00:17:01.736 --> 00:17:02.176 A:middle
bindings.

00:17:03.696 --> 00:17:05.976 A:middle
There are three ways that you

00:17:05.976 --> 00:17:07.746 A:middle
can bind data to your templates

00:17:08.056 --> 00:17:09.116 A:middle
in tvOS 11.

00:17:09.706 --> 00:17:12.546 A:middle
First, you can bind a source and

00:17:12.666 --> 00:17:13.806 A:middle
attribute of an element.

00:17:14.086 --> 00:17:15.426 A:middle
In this example, the source

00:17:15.426 --> 00:17:17.286 A:middle
attribute of the image element,

00:17:17.666 --> 00:17:18.776 A:middle
which is bound to the URL

00:17:18.776 --> 00:17:19.646 A:middle
property of the data.

00:17:20.896 --> 00:17:22.666 A:middle
You can also bind text content

00:17:22.666 --> 00:17:23.956 A:middle
of an element, like in this

00:17:23.956 --> 00:17:25.856 A:middle
case, binding the text content

00:17:26.146 --> 00:17:28.046 A:middle
of the title element, with the

00:17:28.046 --> 00:17:29.526 A:middle
title property in the data.

00:17:30.646 --> 00:17:33.106 A:middle
And finally, you can bind items

00:17:33.106 --> 00:17:35.966 A:middle
of a section using the items

00:17:35.966 --> 00:17:36.346 A:middle
binding.

00:17:37.416 --> 00:17:38.906 A:middle
With this, you can bind the

00:17:38.906 --> 00:17:40.156 A:middle
trial DOM elements of the

00:17:40.156 --> 00:17:41.356 A:middle
section with an array of

00:17:41.356 --> 00:17:41.986 A:middle
objects.

00:17:44.546 --> 00:17:46.786 A:middle
So in a nutshell, data binding

00:17:46.786 --> 00:17:47.886 A:middle
provides the association between

00:17:47.936 --> 00:17:48.656 A:middle
a TVML property and a data

00:17:48.686 --> 00:17:48.896 A:middle
property.

00:17:48.926 --> 00:17:49.796 A:middle
And you can intuitively specify

00:17:49.826 --> 00:17:50.606 A:middle
it directly in TVML using a

00:17:50.636 --> 00:17:51.086 A:middle
binding attribute.

00:17:51.116 --> 00:17:51.896 A:middle
Now, when it comes to providing

00:17:51.926 --> 00:17:52.796 A:middle
data to TVMLKit, you can do that

00:17:52.826 --> 00:17:53.666 A:middle
in your JavaScript using a new

00:17:53.696 --> 00:17:54.476 A:middle
property you've introduced on a

00:17:54.506 --> 00:17:55.286 A:middle
DOM element called Data Item.

00:17:55.316 --> 00:17:55.856 A:middle
Here is an example.

00:17:55.886 --> 00:17:56.516 A:middle
You parse your JSON into

00:17:56.546 --> 00:17:57.296 A:middle
JavaScript Objects, then you

00:17:57.326 --> 00:17:58.166 A:middle
attach it to the section element

00:17:58.196 --> 00:17:58.976 A:middle
using the data item property.

00:18:01.456 --> 00:18:02.996 A:middle
Now, let's move on to

00:18:02.996 --> 00:18:03.656 A:middle
pagination.

00:18:03.656 --> 00:18:06.046 A:middle
In tvOS 11 we have introduced a

00:18:06.686 --> 00:18:08.386 A:middle
new event called Needs More that

00:18:08.386 --> 00:18:09.986 A:middle
you can use to conveniently

00:18:09.986 --> 00:18:10.986 A:middle
implement pagination.

00:18:11.026 --> 00:18:13.666 A:middle
This event gets invoked as the

00:18:13.816 --> 00:18:15.586 A:middle
users scroll toward the end of

00:18:15.586 --> 00:18:18.886 A:middle
your content, and you get it on

00:18:18.886 --> 00:18:20.676 A:middle
list, shelf, grid, and even

00:18:26.756 --> 00:18:28.416 A:middle
stack template, so it's very

00:18:29.246 --> 00:18:32.266 A:middle
versatile, and you can use it in

00:18:32.266 --> 00:18:33.086 A:middle
almost any template.

00:18:33.356 --> 00:18:35.416 A:middle
However, if you're using

00:18:35.416 --> 00:18:37.696 A:middle
pagination on a data bound

00:18:37.696 --> 00:18:40.676 A:middle
template, you need to create

00:18:40.676 --> 00:18:41.946 A:middle
observable objects for your

00:18:41.946 --> 00:18:42.766 A:middle
data.

00:18:42.766 --> 00:18:45.436 A:middle
This is how TVMLKit can observe

00:18:45.616 --> 00:18:47.176 A:middle
the changes that you make in the

00:18:47.176 --> 00:18:49.556 A:middle
data, and push those updates to

00:18:50.406 --> 00:18:51.916 A:middle
the user interface.

00:18:52.196 --> 00:18:54.286 A:middle
Let's take an example of how to

00:18:54.706 --> 00:18:57.976 A:middle
create these observable objects.

00:18:57.976 --> 00:19:00.006 A:middle
So you start off just the same.

00:19:00.146 --> 00:19:04.216 A:middle
You parse your JSON into

00:19:04.216 --> 00:19:08.756 A:middle
JavaScript objects, but then you

00:19:08.756 --> 00:19:11.176 A:middle
go through each one of these

00:19:11.176 --> 00:19:17.486 A:middle
objects and map them into a data

00:19:17.486 --> 00:19:19.176 A:middle
item class.

00:19:19.316 --> 00:19:22.406 A:middle
This is something that they've

00:19:22.406 --> 00:19:25.416 A:middle
also introduced in tvOS 11 that

00:19:25.416 --> 00:19:27.046 A:middle
has an observer pattern built

00:19:27.146 --> 00:19:27.366 A:middle
in.

00:19:28.656 --> 00:19:30.096 A:middle
You construct the data item

00:19:30.096 --> 00:19:31.686 A:middle
class with an optional type, in

00:19:31.686 --> 00:19:32.876 A:middle
case you want to have multiple

00:19:32.876 --> 00:19:35.166 A:middle
prototypes in your template, and

00:19:35.166 --> 00:19:38.326 A:middle
a required identifier that

00:19:38.326 --> 00:19:39.936 A:middle
TVMLKit uses to push those

00:19:39.936 --> 00:19:41.906 A:middle
updates to the user interface

00:19:41.906 --> 00:19:42.516 A:middle
efficiently.

00:19:43.846 --> 00:19:45.566 A:middle
And once you have all of these

00:19:45.566 --> 00:19:47.156 A:middle
objects mapped, you want to wrap

00:19:47.156 --> 00:19:48.596 A:middle
them up in another data item,

00:19:49.426 --> 00:19:51.946 A:middle
and that is what you attach to

00:19:52.736 --> 00:19:53.366 A:middle
the element.

00:19:53.806 --> 00:19:57.546 A:middle
Let's take an example of how to

00:19:57.546 --> 00:19:58.516 A:middle
handle Needs More.

00:19:59.636 --> 00:20:01.226 A:middle
Now, Needs More is just like any

00:20:01.226 --> 00:20:01.976 A:middle
other event.

00:20:02.046 --> 00:20:03.806 A:middle
So you listen for it by using

00:20:03.806 --> 00:20:05.776 A:middle
the Add Event Listener method on

00:20:05.776 --> 00:20:07.846 A:middle
a DOM element, and you provide a

00:20:07.846 --> 00:20:10.516 A:middle
function that would have kind of

00:20:10.516 --> 00:20:11.976 A:middle
a similar implementation to what

00:20:11.976 --> 00:20:13.576 A:middle
you would have when creating the

00:20:13.576 --> 00:20:13.986 A:middle
template.

00:20:14.176 --> 00:20:16.216 A:middle
So you fetch the data from your

00:20:16.216 --> 00:20:18.296 A:middle
servers, map those objects into

00:20:18.296 --> 00:20:21.376 A:middle
data item, but finally, instead

00:20:21.376 --> 00:20:23.066 A:middle
of attaching those data items

00:20:23.066 --> 00:20:24.156 A:middle
directly to the element, you

00:20:24.156 --> 00:20:26.006 A:middle
append to the existing elements.

00:20:26.746 --> 00:20:28.266 A:middle
And once you've done that, you

00:20:28.266 --> 00:20:30.196 A:middle
call Touch Property Path Method

00:20:30.246 --> 00:20:32.216 A:middle
on the data item class to push

00:20:32.216 --> 00:20:33.466 A:middle
your updates to the user

00:20:33.466 --> 00:20:33.956 A:middle
interface.

00:20:35.496 --> 00:20:37.036 A:middle
Now, let's put all of these

00:20:37.036 --> 00:20:42.096 A:middle
pieces together in a demo.

00:20:42.256 --> 00:20:44.166 A:middle
So as Trevor was doing his demo,

00:20:44.166 --> 00:20:45.366 A:middle
I actually went in and

00:20:45.366 --> 00:20:47.376 A:middle
implemented pagination in the

00:20:47.376 --> 00:20:47.966 A:middle
sample app.

00:20:48.556 --> 00:20:49.896 A:middle
So why don't we start from

00:20:49.896 --> 00:20:50.076 A:middle
there?

00:20:51.646 --> 00:20:53.836 A:middle
So I am going to take you

00:20:53.836 --> 00:20:55.076 A:middle
directly to the part where I

00:20:55.076 --> 00:20:56.846 A:middle
construct the stack document,

00:20:57.786 --> 00:20:59.816 A:middle
and the event I'm handling is

00:20:59.866 --> 00:21:01.536 A:middle
directly on the stack element

00:21:01.536 --> 00:21:01.986 A:middle
itself.

00:21:02.856 --> 00:21:04.266 A:middle
And as you can see, what I'm

00:21:04.266 --> 00:21:05.736 A:middle
doing is fetching the next batch

00:21:05.736 --> 00:21:06.996 A:middle
of assets that I want to push in

00:21:06.996 --> 00:21:08.906 A:middle
the template, creating

00:21:08.906 --> 00:21:10.696 A:middle
JavaScript objects from the JSON

00:21:10.696 --> 00:21:12.156 A:middle
that is returned, and then

00:21:12.156 --> 00:21:15.226 A:middle
recalling populateGrid to add it

00:21:15.256 --> 00:21:15.966 A:middle
to the template.

00:21:16.426 --> 00:21:17.666 A:middle
Let's see what populateGrid

00:21:17.666 --> 00:21:17.946 A:middle
does.

00:21:18.276 --> 00:21:21.746 A:middle
Now, at this point, I haven't

00:21:21.746 --> 00:21:23.356 A:middle
converted my templates using

00:21:23.416 --> 00:21:24.666 A:middle
prototype and data binding.

00:21:24.666 --> 00:21:25.836 A:middle
So what you see here is very

00:21:25.836 --> 00:21:26.386 A:middle
familiar.

00:21:26.816 --> 00:21:28.246 A:middle
You would probably already know

00:21:28.246 --> 00:21:29.116 A:middle
what is happening here.

00:21:29.946 --> 00:21:34.586 A:middle
I start off with an empty grid

00:21:34.766 --> 00:21:37.056 A:middle
and I map all of my objects into

00:21:37.056 --> 00:21:38.976 A:middle
the corresponding TVML markup,

00:21:39.456 --> 00:21:40.666 A:middle
which is a lockup in this case,

00:21:41.456 --> 00:21:43.486 A:middle
and finally I parse all of those

00:21:43.486 --> 00:21:44.926 A:middle
lockups directly into the DOM.

00:21:46.176 --> 00:21:47.386 A:middle
Now, before I go ahead and

00:21:47.386 --> 00:21:49.796 A:middle
convert it into a data bound

00:21:49.796 --> 00:21:51.506 A:middle
template, let's run this app,

00:21:51.686 --> 00:21:52.696 A:middle
just to get a feel of what

00:21:52.696 --> 00:21:53.746 A:middle
pagination looks like in

00:21:53.746 --> 00:21:54.336 A:middle
TVMLKit.

00:22:02.046 --> 00:22:03.066 A:middle
So as you can see, it starts off

00:22:03.096 --> 00:22:03.796 A:middle
just the same.

00:22:04.266 --> 00:22:05.856 A:middle
But notice as I scroll toward

00:22:05.896 --> 00:22:08.826 A:middle
the end of this grid, the index

00:22:08.826 --> 00:22:10.086 A:middle
bar on the right side jumps

00:22:10.086 --> 00:22:12.506 A:middle
back, and that is because we are

00:22:12.506 --> 00:22:14.146 A:middle
adding all those items as we

00:22:14.146 --> 00:22:15.276 A:middle
approach toward the end.

00:22:16.016 --> 00:22:17.706 A:middle
So great, our pagination works.

00:22:18.646 --> 00:22:20.596 A:middle
But let's go back and complete

00:22:20.596 --> 00:22:22.866 A:middle
this example by converting our

00:22:22.866 --> 00:22:24.646 A:middle
templates to using prototype and

00:22:24.646 --> 00:22:25.256 A:middle
data binding.

00:22:29.456 --> 00:22:30.946 A:middle
Now, as you might have imagined,

00:22:31.066 --> 00:22:32.346 A:middle
all the changes that I need to

00:22:32.346 --> 00:22:34.706 A:middle
make in order to convert it into

00:22:34.706 --> 00:22:36.346 A:middle
a data bound template are in

00:22:36.346 --> 00:22:38.486 A:middle
this one function, populateGrid.

00:22:39.156 --> 00:22:40.626 A:middle
And the first thing I want to do

00:22:40.626 --> 00:22:44.566 A:middle
is, instead of adding a simple

00:22:44.566 --> 00:22:47.336 A:middle
grid, I want to add prototypes

00:22:48.076 --> 00:22:49.936 A:middle
and a bound grid, like this.

00:22:54.196 --> 00:22:56.076 A:middle
The next thing I want to do is,

00:22:56.076 --> 00:22:57.926 A:middle
instead of mapping all of these

00:22:57.926 --> 00:23:00.436 A:middle
objects into their markup, I

00:23:02.206 --> 00:23:04.216 A:middle
want to map them into observable

00:23:04.216 --> 00:23:05.746 A:middle
objects using data item class.

00:23:06.326 --> 00:23:12.056 A:middle
Just like that.

00:23:12.056 --> 00:23:15.796 A:middle
And finally, instead of creating

00:23:15.796 --> 00:23:19.136 A:middle
all of these markups into the

00:23:19.136 --> 00:23:21.636 A:middle
DOM itself, I want to append my

00:23:21.636 --> 00:23:23.606 A:middle
created data items into the

00:23:23.606 --> 00:23:26.726 A:middle
existing ones.

00:23:26.816 --> 00:23:32.486 A:middle
Like so. So now that we have all

00:23:32.486 --> 00:23:34.166 A:middle
of these pieces in, let's re-run

00:23:34.226 --> 00:23:34.976 A:middle
this app and check it out.

00:23:43.556 --> 00:23:45.426 A:middle
Now, right out of the box, one

00:23:45.426 --> 00:23:46.416 A:middle
thing that I have noticed is

00:23:46.416 --> 00:23:47.936 A:middle
that it loads faster, even with

00:23:47.936 --> 00:23:49.746 A:middle
such a small subset of content

00:23:49.746 --> 00:23:51.506 A:middle
that I'm loading up front, it

00:23:51.536 --> 00:23:52.696 A:middle
takes less time to load.

00:23:53.086 --> 00:23:54.446 A:middle
And as I scroll toward the

00:23:54.446 --> 00:23:57.316 A:middle
bottom, it has flawless

00:23:57.316 --> 00:24:00.056 A:middle
performance with buttery smooth

00:24:00.056 --> 00:24:00.496 A:middle
scrolling.

00:24:01.296 --> 00:24:03.006 A:middle
It is quite addictive, I could

00:24:03.006 --> 00:24:04.106 A:middle
scroll all day actually.

00:24:06.516 --> 00:24:12.016 A:middle
[ Applause ]

00:24:12.516 --> 00:24:14.766 A:middle
So let's do a quick recap of

00:24:14.796 --> 00:24:15.356 A:middle
what you saw.

00:24:18.656 --> 00:24:20.446 A:middle
What you saw is how to implement

00:24:20.446 --> 00:24:22.456 A:middle
your templates using a better

00:24:22.716 --> 00:24:25.046 A:middle
paradigm of prototypes and data

00:24:25.046 --> 00:24:25.486 A:middle
binding.

00:24:26.496 --> 00:24:27.926 A:middle
That is going to reduce your DOM

00:24:27.926 --> 00:24:29.076 A:middle
size, and make your apps

00:24:29.776 --> 00:24:32.106 A:middle
perform, and how to implement

00:24:32.106 --> 00:24:33.766 A:middle
pagination conveniently using

00:24:33.766 --> 00:24:34.506 A:middle
Needs More event.

00:24:35.826 --> 00:24:37.166 A:middle
Now, there is one more thing

00:24:37.166 --> 00:24:38.986 A:middle
that I want to recreate before I

00:24:38.986 --> 00:24:39.216 A:middle
go.

00:24:40.386 --> 00:24:41.516 A:middle
Remember this graph that I

00:24:41.516 --> 00:24:43.086 A:middle
showed you earlier, about how

00:24:43.086 --> 00:24:44.276 A:middle
long it takes to build a

00:24:44.276 --> 00:24:45.536 A:middle
template to a certain number of

00:24:45.536 --> 00:24:45.866 A:middle
items?

00:24:46.946 --> 00:24:48.606 A:middle
After re-implementing our

00:24:48.606 --> 00:24:50.626 A:middle
example with prototypes and data

00:24:50.626 --> 00:24:52.676 A:middle
binding, we re-ran this test,

00:24:53.536 --> 00:24:55.956 A:middle
and we found there were more

00:24:55.956 --> 00:24:58.406 A:middle
than 50% reduction in the time

00:24:58.406 --> 00:24:59.426 A:middle
it took to build these

00:24:59.486 --> 00:25:00.036 A:middle
templates.

00:25:00.486 --> 00:25:01.816 A:middle
So we were really happy with it.

00:25:02.716 --> 00:25:04.706 A:middle
So I encourage you to check out

00:25:04.706 --> 00:25:06.446 A:middle
these APIs, and try them out in

00:25:06.446 --> 00:25:08.596 A:middle
your apps, and see what you can

00:25:08.596 --> 00:25:09.296 A:middle
gain from them.

00:25:09.356 --> 00:25:10.986 A:middle
I am going to hand it over to

00:25:10.986 --> 00:25:12.396 A:middle
Jeremy now, to talk all about

00:25:12.666 --> 00:25:13.316 A:middle
Web Inspector.

00:25:13.436 --> 00:25:13.806 A:middle
Thank you.

00:25:14.516 --> 00:25:20.546 A:middle
[ Applause ]

00:25:21.046 --> 00:25:21.666 A:middle
&gt;&gt; Thank you Parry.

00:25:21.666 --> 00:25:23.366 A:middle
Hi everyone, my name is Jeremy.

00:25:23.366 --> 00:25:24.866 A:middle
And today I am here to tell you

00:25:24.866 --> 00:25:26.276 A:middle
how you can achieve happiness

00:25:26.406 --> 00:25:28.336 A:middle
when you do TVMLKit development

00:25:28.336 --> 00:25:30.676 A:middle
with the help of Web Inspector.

00:25:31.976 --> 00:25:34.306 A:middle
Now, we have seen amazing demos

00:25:34.306 --> 00:25:36.126 A:middle
from Parry and Trevor, trying to

00:25:36.126 --> 00:25:38.066 A:middle
build up a simple WWDC app.

00:25:38.066 --> 00:25:39.986 A:middle
And at this point in time, it is

00:25:39.986 --> 00:25:40.786 A:middle
fairly capable.

00:25:41.526 --> 00:25:43.236 A:middle
It supports RTL, so it can be

00:25:43.236 --> 00:25:44.466 A:middle
localized immediately to

00:25:44.466 --> 00:25:46.396 A:middle
right-to-left languages.

00:25:46.396 --> 00:25:48.176 A:middle
And it uses data binding and

00:25:48.176 --> 00:25:49.266 A:middle
prototypes, so you could scroll

00:25:49.266 --> 00:25:50.976 A:middle
forever, and not stop.

00:25:52.656 --> 00:25:56.406 A:middle
Now, as luck would have it, just

00:25:56.406 --> 00:25:57.456 A:middle
a few days before we are ready

00:25:57.456 --> 00:25:59.406 A:middle
to ship, the designer comes over

00:25:59.406 --> 00:26:00.926 A:middle
and hands us this mock-up.

00:26:01.296 --> 00:26:02.466 A:middle
He gives you a thumbs up and

00:26:02.466 --> 00:26:03.916 A:middle
says, "this should be easy to

00:26:03.916 --> 00:26:04.366 A:middle
fix."

00:26:05.096 --> 00:26:06.716 A:middle
Now, we all know that is not

00:26:06.716 --> 00:26:07.206 A:middle
true.

00:26:07.616 --> 00:26:08.946 A:middle
And I empathize with that, and I

00:26:08.946 --> 00:26:10.516 A:middle
can hear all the inward groaning

00:26:10.516 --> 00:26:12.056 A:middle
in all your bellies.

00:26:13.016 --> 00:26:14.516 A:middle
So let's try to articulate this

00:26:14.516 --> 00:26:16.336 A:middle
feeling that we have by looking

00:26:16.336 --> 00:26:17.346 A:middle
at the development cycle,

00:26:17.346 --> 00:26:18.576 A:middle
especially when it comes to

00:26:18.576 --> 00:26:19.786 A:middle
updating user interface.

00:26:20.216 --> 00:26:21.916 A:middle
The very first thing you have to

00:26:21.916 --> 00:26:24.066 A:middle
do is that you have to formulate

00:26:24.066 --> 00:26:26.176 A:middle
speculative fixes, guess well as

00:26:26.176 --> 00:26:27.996 A:middle
to what it involves to fix the

00:26:27.996 --> 00:26:28.236 A:middle
UI.

00:26:28.826 --> 00:26:30.016 A:middle
Is the margin one pixel to the

00:26:30.016 --> 00:26:31.036 A:middle
right, or to the left?

00:26:31.036 --> 00:26:33.346 A:middle
Once you have formulated all

00:26:33.346 --> 00:26:35.106 A:middle
your fixes, you have to go

00:26:35.106 --> 00:26:36.436 A:middle
through this tedious Build and

00:26:36.436 --> 00:26:37.156 A:middle
Run cycle.

00:26:37.326 --> 00:26:38.626 A:middle
You build and run in X code,

00:26:38.786 --> 00:26:40.656 A:middle
wait for the app to start, look

00:26:40.656 --> 00:26:42.036 A:middle
at the changes, is this right or

00:26:42.036 --> 00:26:42.326 A:middle
not?

00:26:42.326 --> 00:26:43.576 A:middle
And if it is wrong, you go

00:26:43.576 --> 00:26:45.136 A:middle
through that over and over again

00:26:45.136 --> 00:26:45.926 A:middle
until it is right.

00:26:47.166 --> 00:26:48.956 A:middle
Consequently, because of that,

00:26:48.956 --> 00:26:51.076 A:middle
there is a huge loss of context.

00:26:51.346 --> 00:26:52.866 A:middle
You forgot where you were and

00:26:52.866 --> 00:26:53.626 A:middle
what you're trying to fix,

00:26:53.626 --> 00:26:55.016 A:middle
simply because there is this

00:26:55.016 --> 00:26:56.506 A:middle
huge time gap between the

00:26:56.506 --> 00:26:57.906 A:middle
changes you make, and seeing

00:26:57.906 --> 00:26:58.546 A:middle
them on the screen.

00:26:59.886 --> 00:27:02.006 A:middle
So how amazing would it be if

00:27:02.006 --> 00:27:02.966 A:middle
there was something that could

00:27:02.966 --> 00:27:04.806 A:middle
help us fix all these problems?

00:27:05.856 --> 00:27:07.056 A:middle
Seasoned web developers out

00:27:07.056 --> 00:27:08.686 A:middle
there already use Web Inspector,

00:27:08.686 --> 00:27:10.206 A:middle
with all these amazing features.

00:27:10.416 --> 00:27:11.986 A:middle
It is about visual debugging,

00:27:12.486 --> 00:27:13.546 A:middle
local and session storage

00:27:13.546 --> 00:27:15.056 A:middle
introspection, even performance

00:27:15.056 --> 00:27:16.306 A:middle
analysis for JavaScript.

00:27:17.396 --> 00:27:20.156 A:middle
And today, tvOS only supports

00:27:20.156 --> 00:27:22.596 A:middle
this small subset of features in

00:27:22.596 --> 00:27:24.126 A:middle
TVMLKit for Web Inspector.

00:27:25.186 --> 00:27:26.746 A:middle
So today I am really pleased to

00:27:26.746 --> 00:27:29.186 A:middle
announce that in tvOS 11 we are

00:27:29.186 --> 00:27:30.646 A:middle
adding support for the remaining

00:27:30.646 --> 00:27:32.116 A:middle
few bits of Web Inspector.

00:27:33.516 --> 00:27:36.556 A:middle
[ Applause ]

00:27:37.056 --> 00:27:38.356 A:middle
&gt;&gt; So to get us started, let's

00:27:38.356 --> 00:27:39.396 A:middle
talk about visual debugging.

00:27:40.646 --> 00:27:42.656 A:middle
Your TVML app is a document that

00:27:42.656 --> 00:27:44.816 A:middle
is represented as a DOM, and to

00:27:44.816 --> 00:27:46.156 A:middle
visualize that, Web Inspector

00:27:46.156 --> 00:27:47.466 A:middle
has the Elements tab.

00:27:47.716 --> 00:27:49.616 A:middle
It shows a tree of all the nodes

00:27:49.616 --> 00:27:51.936 A:middle
that TVML uses to render UI on

00:27:51.936 --> 00:27:52.846 A:middle
the screen.

00:27:53.536 --> 00:27:54.786 A:middle
So the very first thing we did

00:27:54.786 --> 00:27:56.906 A:middle
is we wanted to eliminate all

00:27:57.006 --> 00:27:58.256 A:middle
guesswork as to the things you

00:27:58.256 --> 00:27:59.756 A:middle
actually have to fix, and that

00:27:59.756 --> 00:28:00.936 A:middle
is through the usage of

00:28:00.936 --> 00:28:01.756 A:middle
visualization.

00:28:01.806 --> 00:28:03.536 A:middle
If you move your mouse slowly

00:28:03.536 --> 00:28:05.576 A:middle
over the nodes in your tree, we

00:28:05.726 --> 00:28:06.456 A:middle
would highlight the

00:28:06.456 --> 00:28:07.586 A:middle
corresponding views on the

00:28:07.586 --> 00:28:08.286 A:middle
screen itself.

00:28:08.736 --> 00:28:09.756 A:middle
We even give you information

00:28:09.756 --> 00:28:11.756 A:middle
about its dimensions, and its

00:28:11.756 --> 00:28:13.116 A:middle
elements that it is associated

00:28:14.656 --> 00:28:14.956 A:middle
with.

00:28:14.956 --> 00:28:16.966 A:middle
So now that you know the exact

00:28:16.966 --> 00:28:18.326 A:middle
node you have to fix, you can

00:28:18.326 --> 00:28:19.966 A:middle
edit the individual XML

00:28:19.966 --> 00:28:21.836 A:middle
structure of that node itself.

00:28:22.506 --> 00:28:23.646 A:middle
Any changes you make will

00:28:23.646 --> 00:28:25.616 A:middle
validate before rendering UI for

00:28:25.616 --> 00:28:25.716 A:middle
it.

00:28:26.876 --> 00:28:27.926 A:middle
Now, if you don't want to deal

00:28:27.926 --> 00:28:29.126 A:middle
with XML, and you just want to

00:28:29.126 --> 00:28:30.886 A:middle
reorder nodes on the screen, you

00:28:30.886 --> 00:28:31.886 A:middle
can also do that.

00:28:32.196 --> 00:28:33.826 A:middle
It is as simple as dragging the

00:28:33.826 --> 00:28:35.206 A:middle
nodes between the areas that you

00:28:35.206 --> 00:28:36.756 A:middle
want it to go and then the

00:28:36.756 --> 00:28:37.756 A:middle
screen updates itself.

00:28:39.386 --> 00:28:40.916 A:middle
For developers that want to see

00:28:40.916 --> 00:28:42.036 A:middle
their applications in a

00:28:42.036 --> 00:28:43.746 A:middle
different light, light or dark,

00:28:44.026 --> 00:28:45.376 A:middle
you can change the attributes on

00:28:45.376 --> 00:28:46.076 A:middle
the template itself.

00:28:46.076 --> 00:28:47.336 A:middle
In fact, you can change any

00:28:47.336 --> 00:28:49.106 A:middle
attributes on any nodes you

00:28:49.106 --> 00:28:49.366 A:middle
want.

00:28:49.956 --> 00:28:51.626 A:middle
And finally, all these changes

00:28:51.626 --> 00:28:53.246 A:middle
that you have made, you are able

00:28:53.246 --> 00:28:55.116 A:middle
to copy it out and paste it in

00:28:55.116 --> 00:28:56.056 A:middle
any file you want.

00:28:57.386 --> 00:28:58.646 A:middle
Now that we've seen how we can

00:28:58.646 --> 00:29:00.136 A:middle
change the layout itself, let's

00:29:00.136 --> 00:29:01.696 A:middle
look at the properties we use to

00:29:01.696 --> 00:29:02.906 A:middle
render UI on the screen.

00:29:04.046 --> 00:29:06.026 A:middle
Web Inspector allows you now to

00:29:06.026 --> 00:29:07.266 A:middle
look at the individual rules

00:29:07.266 --> 00:29:08.446 A:middle
that are attached to individual

00:29:08.446 --> 00:29:09.856 A:middle
nodes, so you can see every

00:29:09.856 --> 00:29:11.586 A:middle
single rule that is used to

00:29:11.586 --> 00:29:12.826 A:middle
render them on the screen.

00:29:14.156 --> 00:29:15.986 A:middle
These are arranged in a cascade

00:29:15.986 --> 00:29:17.326 A:middle
ordering, rules that matter the

00:29:17.326 --> 00:29:18.916 A:middle
most are right at the top, and

00:29:18.916 --> 00:29:20.136 A:middle
things that it overrides is

00:29:20.136 --> 00:29:22.586 A:middle
loaded right at the bottom.

00:29:22.726 --> 00:29:24.446 A:middle
Media queries are able to be

00:29:24.446 --> 00:29:25.736 A:middle
visualized as well, so you'll be

00:29:25.736 --> 00:29:27.466 A:middle
able to see the individual rules

00:29:27.536 --> 00:29:28.926 A:middle
that correspond to specific

00:29:28.926 --> 00:29:30.596 A:middle
media queries, so for example,

00:29:30.596 --> 00:29:32.906 A:middle
you have rules for LTR, you will

00:29:32.906 --> 00:29:35.246 A:middle
be able to see them grouped that

00:29:35.276 --> 00:29:35.446 A:middle
way too.

00:29:35.446 --> 00:29:37.696 A:middle
Finally, the Web Inspector

00:29:37.696 --> 00:29:38.866 A:middle
allows you to look at the

00:29:38.866 --> 00:29:40.336 A:middle
default rules that ship with the

00:29:40.336 --> 00:29:41.376 A:middle
framework itself, so that

00:29:41.376 --> 00:29:43.106 A:middle
totally takes guesswork out of

00:29:43.106 --> 00:29:44.286 A:middle
figuring out what is the default

00:29:44.286 --> 00:29:46.126 A:middle
rules that you have to change in

00:29:46.126 --> 00:29:47.566 A:middle
order to make your UI look like

00:29:47.656 --> 00:29:50.216 A:middle
the beauty it is.

00:29:50.216 --> 00:29:51.576 A:middle
And of course, with all these

00:29:51.616 --> 00:29:53.576 A:middle
rules that are displayed, we

00:29:53.956 --> 00:29:55.476 A:middle
will also show you the coalesced

00:29:55.476 --> 00:29:56.506 A:middle
version of it.

00:29:56.506 --> 00:29:57.886 A:middle
These are the exact styles that

00:29:57.886 --> 00:29:59.246 A:middle
the framework uses to render UI

00:29:59.246 --> 00:29:59.886 A:middle
on the screen.

00:29:59.886 --> 00:30:04.106 A:middle
In Web Inspector, there is a

00:30:04.106 --> 00:30:05.686 A:middle
reload button, and now, by

00:30:05.686 --> 00:30:06.666 A:middle
hitting the reload button, you

00:30:06.666 --> 00:30:08.326 A:middle
are able to restart the entire

00:30:08.326 --> 00:30:10.036 A:middle
JavaScript context without going

00:30:10.036 --> 00:30:11.336 A:middle
through Build and Run over and

00:30:11.336 --> 00:30:11.916 A:middle
over again.

00:30:12.536 --> 00:30:13.696 A:middle
So with that, I'd love to show

00:30:13.696 --> 00:30:15.776 A:middle
you a demo of all these features

00:30:15.776 --> 00:30:16.526 A:middle
that I've talked about.

00:30:21.046 --> 00:30:23.496 A:middle
So I have gone ahead and gotten

00:30:23.726 --> 00:30:25.316 A:middle
the project ready, and updated

00:30:25.316 --> 00:30:27.016 A:middle
the UI, but the last bit to do

00:30:27.016 --> 00:30:28.326 A:middle
is to check if it accurately

00:30:28.326 --> 00:30:28.856 A:middle
supports RTL.

00:30:28.856 --> 00:30:29.236 A:middle
There we go.

00:30:29.236 --> 00:30:35.126 A:middle
And once again, we are going to

00:30:35.126 --> 00:30:36.496 A:middle
use the thing that Trevor taught

00:30:36.496 --> 00:30:37.966 A:middle
us, by going to the scheme, and

00:30:38.186 --> 00:30:39.566 A:middle
changing the system language to

00:30:39.566 --> 00:30:40.876 A:middle
right-to-left pseudolanguage.

00:30:41.296 --> 00:30:42.976 A:middle
Let's build and run.

00:30:55.046 --> 00:30:55.216 A:middle
All right.

00:30:55.216 --> 00:30:57.006 A:middle
As we can see, everything looks

00:30:57.076 --> 00:30:58.396 A:middle
kind of right, except the banner

00:30:58.396 --> 00:30:59.826 A:middle
right up there, which we haven't

00:30:59.826 --> 00:31:01.106 A:middle
optimized for RTL.

00:31:01.726 --> 00:31:02.896 A:middle
So instead of going through that

00:31:02.896 --> 00:31:04.276 A:middle
Build and Run cycle that Trevor

00:31:04.276 --> 00:31:05.866 A:middle
was doing, let's try to do it in

00:31:05.866 --> 00:31:06.536 A:middle
Web Inspector.

00:31:06.916 --> 00:31:08.136 A:middle
The way to do this is that you

00:31:08.136 --> 00:31:11.666 A:middle
start Safari, there is a develop

00:31:11.666 --> 00:31:13.016 A:middle
menu that I've already enabled,

00:31:13.016 --> 00:31:14.576 A:middle
and you go into Simulator, and

00:31:14.576 --> 00:31:16.756 A:middle
inspect the app that you want to

00:31:16.756 --> 00:31:17.796 A:middle
look at.

00:31:20.266 --> 00:31:23.026 A:middle
So Web Inspector starts up, and

00:31:23.026 --> 00:31:23.916 A:middle
let's get going.

00:31:24.566 --> 00:31:26.946 A:middle
So we want to change specific

00:31:26.946 --> 00:31:28.116 A:middle
user interface elements on the

00:31:28.116 --> 00:31:29.506 A:middle
screen, and we can see that the

00:31:29.506 --> 00:31:30.646 A:middle
title, the subtitle, and the

00:31:30.646 --> 00:31:31.676 A:middle
button needs some work.

00:31:31.676 --> 00:31:33.636 A:middle
With Web Inspector, you can

00:31:33.636 --> 00:31:35.236 A:middle
easily drill down to the exact

00:31:35.236 --> 00:31:37.006 A:middle
nodes that it is related to by

00:31:37.006 --> 00:31:37.976 A:middle
moving the mouse, and you can

00:31:37.976 --> 00:31:39.076 A:middle
see that things start getting

00:31:39.076 --> 00:31:39.646 A:middle
highlighted.

00:31:40.276 --> 00:31:41.626 A:middle
So let's go quickly to the title

00:31:41.626 --> 00:31:41.976 A:middle
and change it.

00:31:44.916 --> 00:31:46.706 A:middle
Now, Web Inspector shows you all

00:31:46.706 --> 00:31:47.876 A:middle
the rules that correspond to

00:31:47.876 --> 00:31:49.506 A:middle
this node, and all we need to do

00:31:49.506 --> 00:31:51.396 A:middle
is hunt for this pesky bottom

00:31:51.396 --> 00:31:52.436 A:middle
left that should be actually

00:31:52.436 --> 00:31:53.186 A:middle
bottom viewing.

00:31:53.516 --> 00:31:55.656 A:middle
And as I type, observe what

00:31:55.656 --> 00:31:57.126 A:middle
happens on the simulator screen

00:31:57.126 --> 00:31:57.526 A:middle
itself.

00:31:59.316 --> 00:32:01.206 A:middle
Boom, it updates automatically

00:32:01.206 --> 00:32:03.336 A:middle
without needing to build and

00:32:03.336 --> 00:32:03.556 A:middle
run.

00:32:03.556 --> 00:32:05.946 A:middle
So it's so quick, so for those

00:32:05.946 --> 00:32:07.376 A:middle
that missed it, let's try to do

00:32:07.376 --> 00:32:08.406 A:middle
it again for the subtitle

00:32:08.406 --> 00:32:10.256 A:middle
itself, and it's the same steps.

00:32:10.546 --> 00:32:12.426 A:middle
Locate the element you want, and

00:32:12.426 --> 00:32:14.066 A:middle
change the style associated with

00:32:14.066 --> 00:32:14.346 A:middle
it.

00:32:16.186 --> 00:32:16.896 A:middle
There we go.

00:32:17.876 --> 00:32:19.466 A:middle
Now, let's quickly update the

00:32:19.466 --> 00:32:20.536 A:middle
Play button as well, so it's on

00:32:20.536 --> 00:32:21.676 A:middle
the right side of the screen.

00:32:23.496 --> 00:32:24.916 A:middle
For that, we are going to change

00:32:24.916 --> 00:32:26.166 A:middle
all right to trailing.

00:32:27.866 --> 00:32:34.026 A:middle
Trailing. And of course, like

00:32:34.026 --> 00:32:35.526 A:middle
Trevor did as well, we need a

00:32:35.526 --> 00:32:36.636 A:middle
special media created for its

00:32:36.636 --> 00:32:38.676 A:middle
margins, because it is different

00:32:38.676 --> 00:32:40.106 A:middle
when in RTL language.

00:32:40.106 --> 00:32:41.666 A:middle
So I am going to copy margin

00:32:41.666 --> 00:32:41.886 A:middle
here.

00:32:43.096 --> 00:32:43.846 A:middle
Paste it over.

00:32:45.106 --> 00:32:46.246 A:middle
And change all that.

00:32:46.786 --> 00:32:47.806 A:middle
And there we have it.

00:32:48.566 --> 00:32:49.786 A:middle
Now, since all these changes

00:32:49.786 --> 00:32:51.176 A:middle
were made to the author style

00:32:51.176 --> 00:32:52.596 A:middle
sheet itself, which is contained

00:32:52.596 --> 00:32:54.876 A:middle
in the style attribute, the

00:32:54.876 --> 00:32:56.376 A:middle
style tag, we are going to copy

00:32:56.376 --> 00:32:57.016 A:middle
this out.

00:32:58.216 --> 00:32:59.456 A:middle
In order to verify, we are going

00:32:59.456 --> 00:33:00.786 A:middle
to paste it into our TVML

00:33:00.786 --> 00:33:01.286 A:middle
document.

00:33:01.796 --> 00:33:05.046 A:middle
So here we go.

00:33:05.126 --> 00:33:08.626 A:middle
And then instead of building and

00:33:08.626 --> 00:33:10.966 A:middle
run, we're just going to hit

00:33:10.966 --> 00:33:11.396 A:middle
Reload.

00:33:12.246 --> 00:33:12.896 A:middle
And there we have it.

00:33:12.896 --> 00:33:14.416 A:middle
Everything works correctly

00:33:14.416 --> 00:33:14.886 A:middle
[applause].

00:33:14.886 --> 00:33:16.296 A:middle
Let's go back to the slides.

00:33:17.516 --> 00:33:19.776 A:middle
[ Applause ]

00:33:20.276 --> 00:33:21.496 A:middle
So what we are seeing is a very

00:33:21.496 --> 00:33:22.926 A:middle
quick way to figure out user

00:33:22.926 --> 00:33:24.286 A:middle
interface issues and fix them.

00:33:24.286 --> 00:33:26.266 A:middle
What we've done is we have

00:33:26.266 --> 00:33:27.776 A:middle
looked for the particular nodes

00:33:27.776 --> 00:33:29.916 A:middle
that it has affected, edited

00:33:29.916 --> 00:33:31.486 A:middle
them in real time, and finally,

00:33:31.486 --> 00:33:32.936 A:middle
verification is just done by

00:33:33.246 --> 00:33:35.276 A:middle
copying the TVML properties out

00:33:35.446 --> 00:33:36.706 A:middle
and restarting your JavaScript

00:33:36.706 --> 00:33:38.706 A:middle
context without doing build and

00:33:38.706 --> 00:33:39.896 A:middle
run over and over again.

00:33:40.946 --> 00:33:42.406 A:middle
So that is the visual debugging.

00:33:42.406 --> 00:33:43.916 A:middle
I would like to now move on to

00:33:43.916 --> 00:33:44.936 A:middle
network analysis.

00:33:46.036 --> 00:33:47.526 A:middle
Web Inspector now supports

00:33:47.526 --> 00:33:49.336 A:middle
looking at all network requests

00:33:49.336 --> 00:33:50.686 A:middle
that are sent from TVMLKit

00:33:50.686 --> 00:33:51.306 A:middle
application.

00:33:52.166 --> 00:33:53.846 A:middle
We will show you individual

00:33:53.846 --> 00:33:55.026 A:middle
request timing information.

00:33:55.026 --> 00:33:56.996 A:middle
So how long a DNS query takes.

00:33:56.996 --> 00:33:58.396 A:middle
How long a response takes to get

00:33:58.396 --> 00:33:59.436 A:middle
sent over the wire.

00:34:00.206 --> 00:34:01.846 A:middle
You will inspect the individual

00:34:01.846 --> 00:34:03.246 A:middle
request properties that you set

00:34:03.246 --> 00:34:04.626 A:middle
on your request, so you can

00:34:04.626 --> 00:34:06.336 A:middle
verify if these are the exact

00:34:06.336 --> 00:34:07.326 A:middle
things we are sending out.

00:34:07.326 --> 00:34:09.556 A:middle
And finally, response and

00:34:09.556 --> 00:34:11.206 A:middle
request headers is something you

00:34:11.206 --> 00:34:13.996 A:middle
can look at as well.

00:34:14.056 --> 00:34:15.276 A:middle
You may have scripts already

00:34:15.276 --> 00:34:17.506 A:middle
today that you use to develop

00:34:17.506 --> 00:34:18.806 A:middle
local and session storage.

00:34:19.206 --> 00:34:20.286 A:middle
There is no need to do that

00:34:20.286 --> 00:34:21.426 A:middle
anymore, because Web Inspector

00:34:21.426 --> 00:34:23.126 A:middle
provides a nice user interface

00:34:23.406 --> 00:34:24.696 A:middle
to look at every single key

00:34:24.696 --> 00:34:26.816 A:middle
value pass that is in your local

00:34:26.816 --> 00:34:28.936 A:middle
and session storage, and because

00:34:28.936 --> 00:34:30.456 A:middle
you can look at them, it also

00:34:30.456 --> 00:34:31.766 A:middle
means you can modify them.

00:34:32.016 --> 00:34:33.776 A:middle
So you can copy them, delete,

00:34:33.776 --> 00:34:34.766 A:middle
and move them around.

00:34:35.326 --> 00:34:38.516 A:middle
With that, that is TVMLKit and

00:34:38.516 --> 00:34:39.986 A:middle
Web Inspector support, and that

00:34:39.986 --> 00:34:40.966 A:middle
is also how you achieve

00:34:40.966 --> 00:34:41.606 A:middle
happiness.

00:34:42.516 --> 00:34:45.546 A:middle
[ Applause ]

00:34:46.046 --> 00:34:47.046 A:middle
So what we've seen today,

00:34:47.776 --> 00:34:49.666 A:middle
TVMLKit supports RTL right out

00:34:49.666 --> 00:34:50.806 A:middle
of the box for all default

00:34:50.806 --> 00:34:51.356 A:middle
templates.

00:34:51.476 --> 00:34:52.616 A:middle
It is a little bit of work if

00:34:52.616 --> 00:34:54.436 A:middle
you have custom styles, but it

00:34:54.436 --> 00:34:55.296 A:middle
is easy to do.

00:34:56.006 --> 00:34:57.326 A:middle
Use data binding and prototypes

00:34:57.326 --> 00:34:58.286 A:middle
if you want buttery smooth

00:34:58.286 --> 00:35:00.606 A:middle
scrolling, like Parry has said,

00:35:00.736 --> 00:35:02.906 A:middle
and finally, use Web Inspector

00:35:02.906 --> 00:35:04.426 A:middle
if you want to reduce the amount

00:35:04.426 --> 00:35:05.876 A:middle
of development time it takes to

00:35:05.876 --> 00:35:06.456 A:middle
fix bugs.

00:35:06.646 --> 00:35:08.386 A:middle
For more information, please

00:35:08.386 --> 00:35:09.456 A:middle
visit the following URL.

00:35:09.756 --> 00:35:10.656 A:middle
We have sample code and

00:35:10.656 --> 00:35:11.646 A:middle
documentation that you should

00:35:11.646 --> 00:35:12.606 A:middle
really look at.

00:35:13.286 --> 00:35:15.026 A:middle
There are amazing sessions, as

00:35:15.026 --> 00:35:16.686 A:middle
well, especially What's New in

00:35:16.686 --> 00:35:18.116 A:middle
tvOS tomorrow.

00:35:18.956 --> 00:35:21.486 A:middle
Thank you for attending WWDC 17,

00:35:21.556 --> 00:35:22.456 A:middle
and have a great rest of the

00:35:22.456 --> 00:35:22.946 A:middle
conference.

00:35:23.516 --> 00:35:32.870 A:middle
[ Applause ]