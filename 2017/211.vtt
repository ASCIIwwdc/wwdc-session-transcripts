WEBVTT

00:00:19.636 --> 00:00:20.386 A:middle
&gt;&gt; Good morning

00:00:21.029 --> 00:00:23.029 A:middle
[ Applause ]

00:00:23.042 --> 00:00:25.042 A:middle
.

00:00:25.056 --> 00:00:25.386 A:middle
Thank you.

00:00:26.066 --> 00:00:27.156 A:middle
I'm Chris Dreessen.

00:00:27.396 --> 00:00:28.766 A:middle
This is Touch Bar Fundamentals.

00:00:29.136 --> 00:00:30.646 A:middle
If you have no idea whatsoever

00:00:30.646 --> 00:00:32.236 A:middle
what Touch Bar is, I'm not sure

00:00:32.236 --> 00:00:33.336 A:middle
how you got here, but I'm glad

00:00:33.336 --> 00:00:33.656 A:middle
you're here.

00:00:34.286 --> 00:00:36.876 A:middle
Likely most of us are a bit more

00:00:36.876 --> 00:00:38.776 A:middle
familiar with Touch Bar, but we

00:00:38.776 --> 00:00:39.596 A:middle
may not have had a chance to

00:00:39.596 --> 00:00:40.296 A:middle
actually play with it.

00:00:40.296 --> 00:00:42.426 A:middle
So, let me orient you to it.

00:00:42.806 --> 00:00:44.346 A:middle
So, we have here a picture of a

00:00:44.346 --> 00:00:45.856 A:middle
MacBook Pro and in place of the

00:00:45.856 --> 00:00:47.586 A:middle
F keys you might be used to, we

00:00:47.586 --> 00:00:48.566 A:middle
have this thing we call Touch

00:00:48.606 --> 00:00:48.846 A:middle
Bar.

00:00:49.146 --> 00:00:50.816 A:middle
And this is an interactive input

00:00:50.816 --> 00:00:51.796 A:middle
and display device.

00:00:52.226 --> 00:00:53.596 A:middle
And let me familiarize you with

00:00:53.596 --> 00:00:53.996 A:middle
these parts.

00:00:53.996 --> 00:00:56.686 A:middle
On the left, we have the escape

00:00:56.686 --> 00:00:58.216 A:middle
key, which should be pretty

00:00:58.216 --> 00:00:58.896 A:middle
familiar to everyone.

00:00:59.226 --> 00:01:00.026 A:middle
And on the right, we have this

00:01:00.026 --> 00:01:01.136 A:middle
thing called the control script.

00:01:01.586 --> 00:01:02.756 A:middle
And you can go ahead and

00:01:02.756 --> 00:01:04.086 A:middle
disclose the control strip if

00:01:04.086 --> 00:01:04.446 A:middle
you want.

00:01:04.796 --> 00:01:05.886 A:middle
And you'll have basically the

00:01:05.886 --> 00:01:07.406 A:middle
old media functions the F keys

00:01:07.406 --> 00:01:07.766 A:middle
offer.

00:01:08.206 --> 00:01:09.276 A:middle
And you can use this the same

00:01:09.276 --> 00:01:10.566 A:middle
way you always have, button

00:01:11.286 --> 00:01:12.246 A:middle
presses.

00:01:12.646 --> 00:01:14.366 A:middle
You don't have to disclose it

00:01:14.616 --> 00:01:15.006 A:middle
thought.

00:01:16.006 --> 00:01:18.556 A:middle
You can actually just go ahead

00:01:18.556 --> 00:01:20.086 A:middle
and use it in its collapsed

00:01:20.086 --> 00:01:20.346 A:middle
form.

00:01:20.756 --> 00:01:21.846 A:middle
And when it's its collapsed form

00:01:21.846 --> 00:01:22.906 A:middle
it has some neat functions too.

00:01:23.166 --> 00:01:24.706 A:middle
We can just do like a glancing

00:01:24.706 --> 00:01:26.296 A:middle
swipe over the volume button and

00:01:26.296 --> 00:01:27.376 A:middle
adjust the volume directly.

00:01:27.796 --> 00:01:28.886 A:middle
So, there's a lot of

00:01:28.886 --> 00:01:30.306 A:middle
conveniences here for adjusting

00:01:30.306 --> 00:01:31.346 A:middle
certain system functions.

00:01:31.866 --> 00:01:33.586 A:middle
But, that's not really the most

00:01:33.586 --> 00:01:34.566 A:middle
interesting parts of Touch Bar,

00:01:34.566 --> 00:01:35.866 A:middle
the most interesting parts are

00:01:35.866 --> 00:01:37.546 A:middle
between the escape key and the

00:01:37.546 --> 00:01:38.126 A:middle
control strip.

00:01:38.426 --> 00:01:38.936 A:middle
And that's where your

00:01:38.936 --> 00:01:40.066 A:middle
application content is going to

00:01:40.066 --> 00:01:40.266 A:middle
go.

00:01:40.676 --> 00:01:41.446 A:middle
And so, let me show you what

00:01:41.446 --> 00:01:42.636 A:middle
some of our system applications

00:01:42.636 --> 00:01:43.306 A:middle
have done with this.

00:01:44.616 --> 00:01:45.696 A:middle
So, here we have photos.

00:01:46.316 --> 00:01:47.646 A:middle
And this is just browsing the

00:01:47.646 --> 00:01:48.436 A:middle
photos library.

00:01:48.636 --> 00:01:50.016 A:middle
And we can actually go ahead and

00:01:50.016 --> 00:01:51.836 A:middle
scrub through our photo library

00:01:51.836 --> 00:01:52.056 A:middle
here.

00:01:52.056 --> 00:01:53.306 A:middle
It's just like in iOS with

00:01:53.306 --> 00:01:54.586 A:middle
direct input with our finger, so

00:01:54.586 --> 00:01:56.006 A:middle
we plop our finger down on the

00:01:56.006 --> 00:01:57.616 A:middle
Touch Bar and it's just tracking

00:01:57.616 --> 00:01:57.766 A:middle
it.

00:01:57.886 --> 00:01:59.476 A:middle
We also have momentum swipes

00:01:59.476 --> 00:02:01.386 A:middle
there if we want to browse

00:02:01.386 --> 00:02:02.056 A:middle
through it quickly.

00:02:02.116 --> 00:02:05.106 A:middle
If you go to edit a photo, this

00:02:05.216 --> 00:02:07.106 A:middle
is the photos crop and rotate

00:02:07.106 --> 00:02:07.326 A:middle
tool.

00:02:07.596 --> 00:02:08.506 A:middle
And they have this rotation

00:02:08.506 --> 00:02:09.326 A:middle
thing in the middle of the Touch

00:02:09.326 --> 00:02:10.626 A:middle
Bar and it tracks your finger

00:02:10.846 --> 00:02:11.996 A:middle
directly, which is pretty fun,

00:02:11.996 --> 00:02:12.666 A:middle
because it's sort of like

00:02:12.666 --> 00:02:15.596 A:middle
actually rotating a picture on a

00:02:15.906 --> 00:02:16.226 A:middle
table.

00:02:16.846 --> 00:02:19.046 A:middle
Finally, photos also exposes

00:02:19.046 --> 00:02:19.506 A:middle
filters.

00:02:19.606 --> 00:02:21.106 A:middle
So, we can scrub and swipe

00:02:21.106 --> 00:02:21.856 A:middle
through our filters here.

00:02:22.116 --> 00:02:23.196 A:middle
And this is an interesting use

00:02:23.196 --> 00:02:24.736 A:middle
of Touch Bar, because normally

00:02:24.736 --> 00:02:25.716 A:middle
if we were using a mouse or a

00:02:25.716 --> 00:02:27.316 A:middle
track pad, we'd go ahead and

00:02:27.316 --> 00:02:29.006 A:middle
look at our photo and then look

00:02:29.006 --> 00:02:30.656 A:middle
at the filters section and move

00:02:30.656 --> 00:02:31.876 A:middle
the mouse or track pad to that,

00:02:31.876 --> 00:02:32.946 A:middle
select the next filter.

00:02:33.166 --> 00:02:34.036 A:middle
And with Touch Bar we can

00:02:34.036 --> 00:02:35.406 A:middle
actually keep our eyes on the

00:02:36.076 --> 00:02:36.186 A:middle
cat.

00:02:37.376 --> 00:02:38.926 A:middle
Here's QuickTime Player.

00:02:38.926 --> 00:02:40.546 A:middle
QuickTime Player has a scrubber

00:02:40.546 --> 00:02:41.666 A:middle
control directly in the touch

00:02:41.666 --> 00:02:43.006 A:middle
bar, so we can move a movie back

00:02:43.006 --> 00:02:44.486 A:middle
and forth, it's pretty neat.

00:02:44.616 --> 00:02:45.526 A:middle
And they've also gone ahead and

00:02:45.526 --> 00:02:46.776 A:middle
exposed a similar control for

00:02:46.776 --> 00:02:48.976 A:middle
trimming, so we can adjust the

00:02:48.976 --> 00:02:50.396 A:middle
beginning and end of a movie

00:02:50.396 --> 00:02:51.156 A:middle
that we've recorded.

00:02:51.766 --> 00:02:52.866 A:middle
Something I'd like to point out

00:02:52.906 --> 00:02:54.206 A:middle
about QuickTime Player here, is

00:02:54.206 --> 00:02:55.176 A:middle
that QuickTime Player didn't

00:02:55.176 --> 00:02:56.756 A:middle
write any code to do this, this

00:02:56.756 --> 00:02:58.306 A:middle
is all inside of AVKit and

00:02:58.306 --> 00:02:58.896 A:middle
AVPlayer view.

00:02:58.896 --> 00:03:00.236 A:middle
So, if you're already using

00:03:00.236 --> 00:03:01.446 A:middle
AVKit, you've probably got this

00:03:01.446 --> 00:03:02.426 A:middle
functionality for free,

00:03:02.706 --> 00:03:03.506 A:middle
congratulations.

00:03:04.496 --> 00:03:06.496 A:middle
Let's look at text edit for a

00:03:06.496 --> 00:03:06.796 A:middle
moment.

00:03:07.226 --> 00:03:08.586 A:middle
So, everyone's familiar with

00:03:08.586 --> 00:03:09.646 A:middle
QuickType on iOS.

00:03:09.886 --> 00:03:10.956 A:middle
And We've gone ahead and brought

00:03:10.956 --> 00:03:12.636 A:middle
QuickType over to Touch Bar on

00:03:12.636 --> 00:03:14.036 A:middle
macOS, and as everyone know

00:03:14.036 --> 00:03:15.426 A:middle
QuickType is a great short

00:03:15.426 --> 00:03:16.366 A:middle
fiction writing tool.

00:03:16.776 --> 00:03:18.176 A:middle
So, if we go ahead and write a

00:03:18.176 --> 00:03:20.456 A:middle
short story here, 'the fact is

00:03:20.456 --> 00:03:21.996 A:middle
he has to;' this is not the best

00:03:21.996 --> 00:03:22.986 A:middle
short fiction I've read.

00:03:23.456 --> 00:03:24.856 A:middle
But that's okay, because Touch

00:03:24.856 --> 00:03:25.836 A:middle
Bar gives us a way of spicing

00:03:25.836 --> 00:03:26.096 A:middle
that up.

00:03:26.096 --> 00:03:27.456 A:middle
We also have the emoji picker.

00:03:28.426 --> 00:03:30.696 A:middle
And, let's go ahead and spice it

00:03:30.696 --> 00:03:31.026 A:middle
up a bit.

00:03:31.026 --> 00:03:33.056 A:middle
We can browse our emoji here and

00:03:33.056 --> 00:03:34.306 A:middle
say I laughed until I cried, I

00:03:34.306 --> 00:03:36.236 A:middle
was turned into a frog, and I'm

00:03:36.236 --> 00:03:37.526 A:middle
happy I'm no longer a frog.

00:03:37.826 --> 00:03:39.126 A:middle
So, we've added some nice human

00:03:39.126 --> 00:03:40.826 A:middle
emotion and drama to our story,

00:03:41.136 --> 00:03:42.076 A:middle
all thanks to Touch Bar.

00:03:43.286 --> 00:03:45.756 A:middle
TextEdit of course, is a text

00:03:45.756 --> 00:03:46.806 A:middle
editing tool also, so we can

00:03:46.806 --> 00:03:48.626 A:middle
collapse the QuickType options

00:03:48.626 --> 00:03:49.766 A:middle
here and bring up text

00:03:49.766 --> 00:03:50.586 A:middle
formatting controls.

00:03:50.766 --> 00:03:51.916 A:middle
And maybe the most useful thing

00:03:51.916 --> 00:03:53.116 A:middle
is to make it bold, or italic,

00:03:53.116 --> 00:03:54.636 A:middle
or add some color to it and pink

00:03:54.636 --> 00:03:55.856 A:middle
feels right for the story where

00:03:55.856 --> 00:03:57.076 A:middle
I'm turned into a frog, and not

00:03:57.076 --> 00:03:57.656 A:middle
a frog again.

00:03:57.996 --> 00:03:58.946 A:middle
Anyway, let's never speak of

00:03:58.946 --> 00:03:59.516 A:middle
that.

00:04:00.886 --> 00:04:02.406 A:middle
Something else I want to point

00:04:02.406 --> 00:04:03.456 A:middle
out about all these examples

00:04:03.456 --> 00:04:04.656 A:middle
I've show you is that they're

00:04:04.656 --> 00:04:05.356 A:middle
customizable.

00:04:05.356 --> 00:04:07.056 A:middle
We have a customization panel

00:04:07.396 --> 00:04:08.696 A:middle
for Touch Bar.

00:04:09.036 --> 00:04:10.286 A:middle
And you can rearrange items in

00:04:10.286 --> 00:04:10.406 A:middle
it.

00:04:10.646 --> 00:04:11.876 A:middle
You can add items from the

00:04:11.876 --> 00:04:12.876 A:middle
customization panel on the

00:04:12.876 --> 00:04:14.086 A:middle
screen or remove them from the

00:04:14.086 --> 00:04:14.576 A:middle
Touch Bar.

00:04:14.886 --> 00:04:16.326 A:middle
And this is important, because

00:04:16.326 --> 00:04:17.456 A:middle
every user's workflow is a

00:04:17.456 --> 00:04:18.286 A:middle
little bit different.

00:04:18.286 --> 00:04:19.246 A:middle
Some are doing different things

00:04:19.246 --> 00:04:20.376 A:middle
with your application, and

00:04:20.376 --> 00:04:21.366 A:middle
others just prefer to use the

00:04:21.366 --> 00:04:22.396 A:middle
computer in a different way.

00:04:22.616 --> 00:04:24.196 A:middle
And by enabling customization,

00:04:24.486 --> 00:04:25.766 A:middle
you can give users the exact

00:04:25.766 --> 00:04:26.606 A:middle
experience they want.

00:04:27.116 --> 00:04:28.086 A:middle
And I'll teach you how to do

00:04:28.086 --> 00:04:29.126 A:middle
that programmatically in just a

00:04:29.126 --> 00:04:29.626 A:middle
little bit.

00:04:30.376 --> 00:04:31.526 A:middle
Let's cover some of the

00:04:31.526 --> 00:04:33.046 A:middle
technical details and some of

00:04:33.926 --> 00:04:35.026 A:middle
the implications that come with

00:04:35.026 --> 00:04:35.256 A:middle
that.

00:04:35.646 --> 00:04:36.776 A:middle
So, the Touch Bar is the

00:04:36.776 --> 00:04:38.406 A:middle
beautiful P3 retina display.

00:04:38.406 --> 00:04:40.456 A:middle
It has a nice P3 color gamut,

00:04:40.766 --> 00:04:42.496 A:middle
great blacks, wonderful

00:04:42.496 --> 00:04:43.076 A:middle
contrast.

00:04:43.436 --> 00:04:46.276 A:middle
And that means that our assets

00:04:46.276 --> 00:04:47.586 A:middle
we include in our applications

00:04:47.586 --> 00:04:49.046 A:middle
don't have to cover as much as

00:04:49.046 --> 00:04:50.176 A:middle
what we do on the main screen.

00:04:50.866 --> 00:04:52.736 A:middle
Additionally, it's a true multi

00:04:52.736 --> 00:04:54.476 A:middle
touch device, which means we can

00:04:54.476 --> 00:04:55.906 A:middle
actually track multiple fingers.

00:04:56.276 --> 00:04:57.836 A:middle
And that affords us some new

00:04:57.836 --> 00:04:58.726 A:middle
options for what sort of

00:04:58.726 --> 00:04:59.536 A:middle
controls we might make.

00:04:59.696 --> 00:05:01.326 A:middle
You're going to hear this a lot

00:05:01.326 --> 00:05:02.176 A:middle
about Touch Bar, that it's

00:05:02.176 --> 00:05:02.996 A:middle
context sensitive.

00:05:03.556 --> 00:05:05.626 A:middle
And that's very neat in terms of

00:05:05.676 --> 00:05:07.336 A:middle
enabling the user to work with

00:05:07.336 --> 00:05:08.536 A:middle
functions in the application

00:05:08.536 --> 00:05:10.606 A:middle
that are appropriate, but it has

00:05:10.606 --> 00:05:11.916 A:middle
implications for event handling,

00:05:11.916 --> 00:05:13.116 A:middle
because the context in the

00:05:13.116 --> 00:05:14.956 A:middle
application might change, which

00:05:14.956 --> 00:05:16.286 A:middle
the user is using the Touch Bar,

00:05:16.396 --> 00:05:17.876 A:middle
and our controls need to react

00:05:18.716 --> 00:05:19.176 A:middle
to that.

00:05:19.246 --> 00:05:20.686 A:middle
And finally, we actually go

00:05:20.686 --> 00:05:22.726 A:middle
ahead and take some care to

00:05:22.726 --> 00:05:24.426 A:middle
match the key taps and glyphs on

00:05:24.426 --> 00:05:25.946 A:middle
the Touch Bar to those on the

00:05:25.946 --> 00:05:27.016 A:middle
physical keyboard, and we do

00:05:27.016 --> 00:05:28.136 A:middle
that by watching the ambient

00:05:28.136 --> 00:05:29.446 A:middle
brightness, and knowing whether

00:05:29.446 --> 00:05:30.626 A:middle
or not the keyboard backlight is

00:05:30.626 --> 00:05:30.816 A:middle
on.

00:05:31.126 --> 00:05:32.296 A:middle
But this has implications for

00:05:32.296 --> 00:05:33.336 A:middle
how we might draw custom

00:05:33.336 --> 00:05:33.876 A:middle
controls.

00:05:34.246 --> 00:05:35.116 A:middle
And we're not going to go into

00:05:35.116 --> 00:05:35.996 A:middle
detail on any of those

00:05:35.996 --> 00:05:37.196 A:middle
implications in this session,

00:05:37.196 --> 00:05:38.316 A:middle
but we do have a session later

00:05:38.316 --> 00:05:39.846 A:middle
this afternoon that will cover

00:05:39.846 --> 00:05:40.616 A:middle
all these topics.

00:05:41.876 --> 00:05:44.856 A:middle
So, I'm assuming that once

00:05:44.856 --> 00:05:45.676 A:middle
you're done here, maybe even

00:05:45.676 --> 00:05:46.516 A:middle
before that, you're going to be

00:05:46.516 --> 00:05:47.746 A:middle
really jazzed to add Touch Bar

00:05:47.746 --> 00:05:49.006 A:middle
support to your application if

00:05:49.006 --> 00:05:49.686 A:middle
you haven't already.

00:05:49.686 --> 00:05:50.896 A:middle
But when you're coming up with

00:05:50.896 --> 00:05:52.326 A:middle
your UI's there's a few things

00:05:52.326 --> 00:05:53.056 A:middle
to keep in mind.

00:05:53.396 --> 00:05:54.506 A:middle
And the first of them, the prime

00:05:54.506 --> 00:05:56.146 A:middle
directive of Touch Bar is that

00:05:56.146 --> 00:05:57.316 A:middle
the Touch Bar is an input

00:05:57.316 --> 00:05:57.716 A:middle
device.

00:05:57.716 --> 00:05:58.936 A:middle
It's meant to be interacted with

00:05:58.936 --> 00:05:59.516 A:middle
by the user.

00:05:59.766 --> 00:06:00.616 A:middle
It's not supposed to be

00:06:00.616 --> 00:06:01.416 A:middle
displaying things.

00:06:01.416 --> 00:06:02.696 A:middle
So, no status indicators or

00:06:02.696 --> 00:06:03.406 A:middle
stock tickers.

00:06:04.046 --> 00:06:05.656 A:middle
The next thing we should keep in

00:06:05.656 --> 00:06:06.706 A:middle
mind when making our Touch Bar

00:06:06.706 --> 00:06:09.046 A:middle
UI's is that we don't want to

00:06:09.046 --> 00:06:10.396 A:middle
put functionality in the Touch

00:06:10.426 --> 00:06:11.886 A:middle
Bar that doesn't exist anywhere

00:06:11.886 --> 00:06:12.906 A:middle
else in the application.

00:06:13.226 --> 00:06:14.746 A:middle
It's great to have null and fun

00:06:14.746 --> 00:06:16.066 A:middle
Touch Bar UI's, but it shouldn't

00:06:16.066 --> 00:06:17.216 A:middle
be the only way of accessing

00:06:17.216 --> 00:06:17.876 A:middle
functionality.

00:06:18.326 --> 00:06:19.736 A:middle
And there's a good reason for a

00:06:19.736 --> 00:06:21.526 A:middle
lot of that, and that's that not

00:06:21.526 --> 00:06:23.106 A:middle
every user has a Touch Bar, so

00:06:23.106 --> 00:06:24.336 A:middle
if you only put something in the

00:06:24.336 --> 00:06:25.306 A:middle
Touch Bar, you're going to be

00:06:25.306 --> 00:06:26.546 A:middle
losing out on functionality for

00:06:26.546 --> 00:06:27.216 A:middle
a lot of users.

00:06:27.866 --> 00:06:30.476 A:middle
And finally, this is almost a

00:06:30.476 --> 00:06:31.616 A:middle
side effect of saying the Touch

00:06:31.616 --> 00:06:32.476 A:middle
Bar is an input device.

00:06:32.866 --> 00:06:34.206 A:middle
While we want creative beautiful

00:06:34.206 --> 00:06:35.386 A:middle
UI's in the Touch Bar, they

00:06:35.386 --> 00:06:36.486 A:middle
shouldn't be taking center

00:06:36.486 --> 00:06:36.966 A:middle
stage.

00:06:37.206 --> 00:06:38.476 A:middle
The content the user's working

00:06:38.476 --> 00:06:40.226 A:middle
with on the main screen should

00:06:40.226 --> 00:06:41.316 A:middle
always be their focus.

00:06:41.316 --> 00:06:42.256 A:middle
So, the Touch Bar shouldn't be

00:06:42.256 --> 00:06:42.826 A:middle
distracting.

00:06:43.806 --> 00:06:45.506 A:middle
With that out of the way, we're

00:06:45.506 --> 00:06:46.436 A:middle
going to go ahead and cover the

00:06:46.436 --> 00:06:48.016 A:middle
core classes that let you use

00:06:48.016 --> 00:06:48.706 A:middle
the Touch Bar in your

00:06:48.706 --> 00:06:49.336 A:middle
application.

00:06:49.626 --> 00:06:50.666 A:middle
We're going to cover how the

00:06:50.666 --> 00:06:52.006 A:middle
responder change is integrated

00:06:52.006 --> 00:06:53.266 A:middle
with these for discovering what

00:06:53.266 --> 00:06:54.736 A:middle
context sensitive functionality

00:06:54.736 --> 00:06:55.336 A:middle
to display.

00:06:55.336 --> 00:06:56.666 A:middle
And then, we're going to go

00:06:56.666 --> 00:06:58.136 A:middle
ahead and take a deep dive on

00:06:58.136 --> 00:06:59.666 A:middle
one of those core classes and

00:06:59.666 --> 00:07:00.756 A:middle
show you most of what it can do.

00:07:01.646 --> 00:07:02.356 A:middle
So, let's start with the

00:07:02.356 --> 00:07:02.816 A:middle
classes.

00:07:03.596 --> 00:07:05.436 A:middle
The first class is of course

00:07:05.506 --> 00:07:06.296 A:middle
NSTouchBarItem.

00:07:06.786 --> 00:07:08.096 A:middle
And that plays with NSTouchBar

00:07:08.096 --> 00:07:08.886 A:middle
and NSResponder.

00:07:09.206 --> 00:07:10.486 A:middle
And let's just take a closer

00:07:10.856 --> 00:07:11.106 A:middle
look.

00:07:11.106 --> 00:07:12.466 A:middle
This is a mockup of the mail

00:07:12.466 --> 00:07:13.306 A:middle
Touch Bar I've made.

00:07:13.306 --> 00:07:14.546 A:middle
And everything I'm highlighting

00:07:14.546 --> 00:07:16.486 A:middle
here, is an NS view, or NS

00:07:16.486 --> 00:07:17.426 A:middle
control, or NS button.

00:07:17.426 --> 00:07:18.386 A:middle
They're all things you're very

00:07:18.386 --> 00:07:19.826 A:middle
familiar with because Touch Bar

00:07:20.116 --> 00:07:21.646 A:middle
is reusing the existing view

00:07:21.646 --> 00:07:23.216 A:middle
functionality we've been using

00:07:23.216 --> 00:07:24.636 A:middle
in our Cocoa apps for very long

00:07:25.806 --> 00:07:26.456 A:middle
time.

00:07:26.456 --> 00:07:27.556 A:middle
There's a few things though that

00:07:27.556 --> 00:07:28.936 A:middle
Touch Bar does, that view isn't

00:07:28.936 --> 00:07:29.776 A:middle
prepared to do.

00:07:30.036 --> 00:07:31.346 A:middle
So, we need some way of adapting

00:07:31.346 --> 00:07:31.556 A:middle
that.

00:07:31.556 --> 00:07:32.296 A:middle
And that's what this

00:07:32.296 --> 00:07:33.396 A:middle
NSTouchBarItem class does.

00:07:33.396 --> 00:07:35.186 A:middle
So, it binds a view to the Touch

00:07:35.226 --> 00:07:35.446 A:middle
Bar.

00:07:36.186 --> 00:07:37.786 A:middle
NSTouchBarItem itself is a very

00:07:37.786 --> 00:07:38.596 A:middle
basic class.

00:07:38.656 --> 00:07:40.726 A:middle
It's intended to be sub classed

00:07:40.726 --> 00:07:41.956 A:middle
and that's probably not

00:07:41.956 --> 00:07:43.036 A:middle
something you're actually going

00:07:43.036 --> 00:07:43.716 A:middle
to have to do.

00:07:43.716 --> 00:07:45.286 A:middle
Because AppKit includes about

00:07:45.286 --> 00:07:46.896 A:middle
half a dozen existing Touch Bar

00:07:46.896 --> 00:07:48.106 A:middle
subclasses that will handle a

00:07:48.106 --> 00:07:49.626 A:middle
lot of the needs you're going to

00:07:49.626 --> 00:07:49.896 A:middle
have.

00:07:50.266 --> 00:07:51.976 A:middle
And finally one of the most

00:07:51.976 --> 00:07:52.886 A:middle
important features of the

00:07:52.886 --> 00:07:54.866 A:middle
NSTouchBarItem class is that it

00:07:54.866 --> 00:07:56.566 A:middle
has an identifier that uniquely

00:07:56.566 --> 00:07:57.776 A:middle
identifies that item and

00:07:57.776 --> 00:07:59.216 A:middle
functionality within its

00:07:59.276 --> 00:08:00.296 A:middle
NSTouchBar instance.

00:08:01.066 --> 00:08:03.016 A:middle
So, let's talk about NSTouchBar

00:08:03.016 --> 00:08:03.686 A:middle
itself.

00:08:03.836 --> 00:08:05.446 A:middle
The most important thing is that

00:08:05.446 --> 00:08:06.936 A:middle
it has an array of those item

00:08:06.936 --> 00:08:08.486 A:middle
identifiers that identify the

00:08:08.486 --> 00:08:08.876 A:middle
items.

00:08:08.876 --> 00:08:10.286 A:middle
And this is important for

00:08:10.406 --> 00:08:12.056 A:middle
resolving what functionalities

00:08:12.056 --> 00:08:13.026 A:middle
goes into the Touch Bar to the

00:08:13.026 --> 00:08:14.206 A:middle
views used to display it.

00:08:14.676 --> 00:08:15.736 A:middle
Let's take a quick look at a

00:08:15.736 --> 00:08:16.306 A:middle
code snippet.

00:08:17.106 --> 00:08:18.556 A:middle
So, here we're going to go ahead

00:08:18.556 --> 00:08:19.376 A:middle
and just declare some

00:08:19.376 --> 00:08:21.046 A:middle
identifiers for a shark and sea

00:08:21.046 --> 00:08:21.366 A:middle
turtle.

00:08:21.876 --> 00:08:23.026 A:middle
Usually when you come up with

00:08:23.026 --> 00:08:24.736 A:middle
identifiers for our code, we

00:08:24.736 --> 00:08:26.496 A:middle
recommend using reverse DNS, but

00:08:26.496 --> 00:08:27.276 A:middle
these are a little bit more

00:08:27.276 --> 00:08:27.686 A:middle
legible.

00:08:27.776 --> 00:08:30.306 A:middle
And once we have those

00:08:30.306 --> 00:08:31.886 A:middle
identifiers, we're going to go

00:08:31.886 --> 00:08:33.156 A:middle
ahead and instantiate a new

00:08:33.156 --> 00:08:34.546 A:middle
NSTouchBar and just set the

00:08:34.546 --> 00:08:35.856 A:middle
default the item identifiers

00:08:35.856 --> 00:08:36.096 A:middle
array.

00:08:36.506 --> 00:08:38.206 A:middle
And this let's AppKit know what

00:08:38.206 --> 00:08:39.546 A:middle
sort of semantic functionality

00:08:39.546 --> 00:08:40.986 A:middle
we're putting in the Touch Bar.

00:08:41.466 --> 00:08:43.016 A:middle
What we're going to cover now is

00:08:43.016 --> 00:08:44.426 A:middle
how AppKit resolves that.

00:08:44.866 --> 00:08:46.096 A:middle
And there's two ways we do this

00:08:46.096 --> 00:08:46.386 A:middle
look up.

00:08:46.386 --> 00:08:47.446 A:middle
There's two ways we find

00:08:47.446 --> 00:08:48.696 A:middle
NSTouchBarItem from the item

00:08:48.696 --> 00:08:49.346 A:middle
identifiers.

00:08:49.756 --> 00:08:51.256 A:middle
And the first is a property on

00:08:51.296 --> 00:08:52.356 A:middle
NSTouchBar called template

00:08:52.356 --> 00:08:52.726 A:middle
items.

00:08:53.086 --> 00:08:54.496 A:middle
And this is just a set of items.

00:08:54.936 --> 00:08:56.176 A:middle
So, if we go back to some code

00:08:56.176 --> 00:08:57.436 A:middle
snippets, this is what we had

00:08:57.436 --> 00:08:59.386 A:middle
before, exactly the same, and

00:08:59.386 --> 00:09:00.096 A:middle
we've added some.

00:09:00.516 --> 00:09:02.226 A:middle
So, here I'm using an

00:09:02.226 --> 00:09:04.536 A:middle
NSCustomTouchBar item class for

00:09:04.536 --> 00:09:05.346 A:middle
the shark and turtles

00:09:05.346 --> 00:09:05.976 A:middle
respectively.

00:09:05.976 --> 00:09:06.986 A:middle
And this is one of those

00:09:06.986 --> 00:09:07.996 A:middle
subclasses I mentioned.

00:09:08.436 --> 00:09:09.726 A:middle
And we're just setting the view

00:09:10.016 --> 00:09:12.586 A:middle
of these items to an NS button.

00:09:13.456 --> 00:09:14.516 A:middle
And we go ahead and we make the

00:09:14.516 --> 00:09:15.696 A:middle
title, you know the shark emoji

00:09:15.696 --> 00:09:16.476 A:middle
or the turtle emoji.

00:09:16.856 --> 00:09:18.216 A:middle
You'll notice we're using the NS

00:09:18.246 --> 00:09:19.596 A:middle
button convenience constructor

00:09:19.596 --> 00:09:22.116 A:middle
we introduced in macOS 10.12,

00:09:22.566 --> 00:09:23.866 A:middle
and that's important because

00:09:23.866 --> 00:09:24.966 A:middle
these convenience constructors

00:09:24.966 --> 00:09:26.326 A:middle
will configure the buttons to be

00:09:26.326 --> 00:09:27.946 A:middle
appearance sensitive to use the

00:09:27.946 --> 00:09:29.246 A:middle
right styling and font.

00:09:29.616 --> 00:09:30.896 A:middle
And if we build an NS button

00:09:30.896 --> 00:09:32.466 A:middle
directly, we may not get that

00:09:32.466 --> 00:09:33.036 A:middle
functionality.

00:09:33.036 --> 00:09:34.166 A:middle
So, this is a big time saver.

00:09:34.756 --> 00:09:36.676 A:middle
But, finally after instantiating

00:09:36.676 --> 00:09:37.976 A:middle
these items, we're just going to

00:09:37.976 --> 00:09:39.116 A:middle
go ahead and stuff them in the

00:09:39.116 --> 00:09:39.976 A:middle
template item set.

00:09:40.586 --> 00:09:41.596 A:middle
And if we do all of this, we're

00:09:41.596 --> 00:09:42.416 A:middle
going to wind up with the Touch

00:09:42.416 --> 00:09:43.316 A:middle
Bar we see at the bottom of the

00:09:43.316 --> 00:09:44.766 A:middle
screen, with our shark button

00:09:44.766 --> 00:09:45.576 A:middle
and our turtle button.

00:09:47.036 --> 00:09:48.186 A:middle
Something I'd like to mention,

00:09:48.416 --> 00:09:50.426 A:middle
if you go ahead and copy and

00:09:50.426 --> 00:09:52.366 A:middle
paste the code on the slide into

00:09:52.366 --> 00:09:54.296 A:middle
a Swift playground, XCode will

00:09:54.296 --> 00:09:55.976 A:middle
go ahead and preview the Touch

00:09:56.006 --> 00:09:57.216 A:middle
Bar items we construct and the

00:09:57.216 --> 00:09:58.406 A:middle
Touch Bar itself.

00:09:58.406 --> 00:09:59.756 A:middle
And this is a pretty useful way

00:09:59.756 --> 00:10:01.006 A:middle
of rapidly prototyping your

00:10:01.006 --> 00:10:01.816 A:middle
Touch Bar UIs.

00:10:03.046 --> 00:10:03.946 A:middle
So, that's template items.

00:10:04.386 --> 00:10:06.036 A:middle
Let's go ahead and cover what we

00:10:06.036 --> 00:10:08.056 A:middle
can do with the delegate.

00:10:08.056 --> 00:10:10.066 A:middle
So, there's a single delegate

00:10:10.066 --> 00:10:11.476 A:middle
method in the NSTouchBarDelegate

00:10:11.476 --> 00:10:11.986 A:middle
protocol.

00:10:11.986 --> 00:10:12.776 A:middle
And that's Touch Bar,

00:10:12.776 --> 00:10:14.076 A:middle
makeItemForIdentifier.

00:10:14.976 --> 00:10:16.426 A:middle
And it's pretty simple.

00:10:16.556 --> 00:10:17.566 A:middle
If we take a look at this code

00:10:17.566 --> 00:10:19.076 A:middle
here, this is exactly the same

00:10:19.076 --> 00:10:20.106 A:middle
as the template items case.

00:10:20.106 --> 00:10:20.966 A:middle
What's different is we've

00:10:20.966 --> 00:10:21.986 A:middle
structured it in a switch

00:10:21.986 --> 00:10:23.786 A:middle
statement, so we can go ahead

00:10:23.786 --> 00:10:25.276 A:middle
and conditionally create a new

00:10:25.276 --> 00:10:27.366 A:middle
item when AppKit asks for one of

00:10:27.366 --> 00:10:28.616 A:middle
our specific identifiers.

00:10:29.596 --> 00:10:31.906 A:middle
AppKit cahces the result of this

00:10:31.906 --> 00:10:32.266 A:middle
method.

00:10:32.556 --> 00:10:33.806 A:middle
So, you really can just treat

00:10:33.806 --> 00:10:35.106 A:middle
this as a factory and make a new

00:10:35.106 --> 00:10:35.896 A:middle
instance each time.

00:10:35.896 --> 00:10:36.856 A:middle
You don't have to maintain a

00:10:36.856 --> 00:10:38.096 A:middle
back pointer yourself, unless

00:10:38.096 --> 00:10:39.346 A:middle
that's useful for other reasons.

00:10:40.536 --> 00:10:43.236 A:middle
Something else that's important

00:10:43.236 --> 00:10:44.646 A:middle
to mention is, you know I've

00:10:44.646 --> 00:10:46.806 A:middle
covered customizability a little

00:10:47.196 --> 00:10:48.346 A:middle
bit, and let's take that Touch

00:10:48.346 --> 00:10:49.146 A:middle
Bar we've made and make it

00:10:49.146 --> 00:10:49.816 A:middle
customizable.

00:10:50.626 --> 00:10:52.066 A:middle
So, that involves adding a few

00:10:52.066 --> 00:10:52.376 A:middle
things.

00:10:52.666 --> 00:10:54.226 A:middle
The first bit is actually this

00:10:54.226 --> 00:10:55.756 A:middle
top line, where we go ahead and

00:10:55.756 --> 00:10:57.156 A:middle
tell NS application to set

00:10:57.386 --> 00:10:58.766 A:middle
isAutomaticCustomize

00:10:58.766 --> 00:11:00.226 A:middle
TouchBarMenuItemEnabled.

00:11:00.906 --> 00:11:02.606 A:middle
That's a mouthful, but it's

00:11:02.606 --> 00:11:03.636 A:middle
actually a very simply way of

00:11:03.636 --> 00:11:04.196 A:middle
handling this.

00:11:04.196 --> 00:11:05.506 A:middle
If you set this to true,

00:11:05.876 --> 00:11:07.126 A:middle
NSApplication is going to go

00:11:07.126 --> 00:11:08.496 A:middle
ahead and create a menu item for

00:11:08.496 --> 00:11:10.276 A:middle
you automatically that will show

00:11:10.276 --> 00:11:11.306 A:middle
and hide the customization

00:11:11.306 --> 00:11:11.626 A:middle
panel.

00:11:12.156 --> 00:11:13.306 A:middle
You don't have to use that.

00:11:13.346 --> 00:11:14.786 A:middle
NSApplication has a method to

00:11:14.786 --> 00:11:16.296 A:middle
show and hide it explicitly and

00:11:16.296 --> 00:11:17.236 A:middle
you can wire that up to your

00:11:17.236 --> 00:11:18.896 A:middle
menu item if you want a little

00:11:19.746 --> 00:11:20.666 A:middle
bit more control.

00:11:20.666 --> 00:11:21.546 A:middle
But with that out of the way,

00:11:21.866 --> 00:11:23.106 A:middle
let's look at the bottom of the

00:11:23.106 --> 00:11:24.626 A:middle
code in this slide, where we set

00:11:24.626 --> 00:11:26.026 A:middle
the customization identifier.

00:11:26.456 --> 00:11:27.826 A:middle
And in this case, I'm just

00:11:27.826 --> 00:11:29.246 A:middle
making up an ocean animal

00:11:29.246 --> 00:11:29.836 A:middle
identifier.

00:11:30.486 --> 00:11:32.166 A:middle
But it's important to set this,

00:11:32.166 --> 00:11:33.566 A:middle
because this is the token which

00:11:33.606 --> 00:11:35.076 A:middle
enables persistence of the Touch

00:11:35.076 --> 00:11:36.446 A:middle
Bar configuration across

00:11:36.446 --> 00:11:37.936 A:middle
launches of your application or

00:11:37.936 --> 00:11:38.926 A:middle
reboots of the system.

00:11:39.736 --> 00:11:41.246 A:middle
And there's one other important

00:11:41.246 --> 00:11:42.576 A:middle
step for enabling customization,

00:11:42.576 --> 00:11:43.376 A:middle
and that is to set this

00:11:43.376 --> 00:11:44.686 A:middle
customizationAllowedItem

00:11:44.686 --> 00:11:45.526 A:middle
Identifiers array.

00:11:45.916 --> 00:11:47.076 A:middle
And we're just going ahead and

00:11:47.076 --> 00:11:48.076 A:middle
set it to our shark and sea

00:11:48.076 --> 00:11:48.576 A:middle
turtle again.

00:11:48.976 --> 00:11:50.306 A:middle
But setting this allows the

00:11:50.306 --> 00:11:51.466 A:middle
customization panel to know

00:11:51.466 --> 00:11:52.686 A:middle
which items can be added and

00:11:52.686 --> 00:11:53.046 A:middle
removed.

00:11:53.706 --> 00:11:54.676 A:middle
If we do all of that, we can

00:11:54.676 --> 00:11:55.976 A:middle
bring up the customization panel

00:11:55.976 --> 00:11:57.586 A:middle
and we'll see exactly this, the

00:11:57.586 --> 00:11:59.186 A:middle
defaultItemIdentifiers array is

00:11:59.186 --> 00:12:00.366 A:middle
translated faithfully to the

00:12:00.366 --> 00:12:01.326 A:middle
default set of items on the

00:12:01.326 --> 00:12:01.736 A:middle
left.

00:12:01.776 --> 00:12:03.036 A:middle
And the individual items from

00:12:03.036 --> 00:12:04.686 A:middle
the allowed item identifiers are

00:12:04.686 --> 00:12:05.516 A:middle
shown on the right.

00:12:06.236 --> 00:12:07.176 A:middle
This is kind of a boring

00:12:07.176 --> 00:12:08.336 A:middle
customization panel and we can

00:12:08.336 --> 00:12:09.286 A:middle
spice it up a little.

00:12:10.186 --> 00:12:11.926 A:middle
So, here's a whole menagerie of

00:12:11.926 --> 00:12:12.576 A:middle
ocean animals.

00:12:13.326 --> 00:12:15.806 A:middle
Something I want to mention, and

00:12:15.806 --> 00:12:16.866 A:middle
it will come into play with

00:12:16.926 --> 00:12:18.406 A:middle
deciding whether you're going to

00:12:18.406 --> 00:12:19.496 A:middle
set the template items on a

00:12:19.496 --> 00:12:20.766 A:middle
Touch Bar when you create it, or

00:12:20.816 --> 00:12:22.696 A:middle
whether to use the delegate is

00:12:22.796 --> 00:12:24.196 A:middle
by default we were only showing

00:12:24.196 --> 00:12:25.126 A:middle
the shark and sea turtle.

00:12:25.326 --> 00:12:26.026 A:middle
And there's a lot of

00:12:26.026 --> 00:12:27.266 A:middle
applications where your default

00:12:27.266 --> 00:12:28.456 A:middle
functionality in the Touch Bar

00:12:28.736 --> 00:12:30.416 A:middle
is going to be a very small

00:12:30.416 --> 00:12:31.706 A:middle
subset of the total

00:12:31.706 --> 00:12:32.796 A:middle
functionality you can add

00:12:32.796 --> 00:12:33.656 A:middle
through customization.

00:12:34.716 --> 00:12:36.626 A:middle
By using the delegate, users who

00:12:36.626 --> 00:12:37.776 A:middle
don't bring up the customization

00:12:37.776 --> 00:12:38.836 A:middle
panel aren't going to pay the

00:12:38.836 --> 00:12:43.106 A:middle
CPU time of creating new items.

00:12:43.626 --> 00:12:44.946 A:middle
Something else to mention here

00:12:44.946 --> 00:12:46.596 A:middle
is you may have a situation

00:12:46.596 --> 00:12:47.426 A:middle
where you're building a Touch

00:12:47.426 --> 00:12:48.376 A:middle
Bar UI and there's some

00:12:48.376 --> 00:12:49.556 A:middle
functionality you want to be

00:12:49.556 --> 00:12:50.886 A:middle
there all the time, you don't

00:12:50.886 --> 00:12:51.896 A:middle
want the user to be able to

00:12:51.896 --> 00:12:53.646 A:middle
remove it in customization, and

00:12:53.646 --> 00:12:54.876 A:middle
if you have a case like that you

00:12:54.876 --> 00:12:56.086 A:middle
can set the customization

00:12:56.086 --> 00:12:57.666 A:middle
required item identifiers array.

00:12:58.216 --> 00:12:59.706 A:middle
And in this case, obviously, the

00:12:59.706 --> 00:13:00.936 A:middle
sea turtle is critical for the

00:13:00.936 --> 00:13:02.006 A:middle
function of our application.

00:13:02.006 --> 00:13:02.926 A:middle
So, we're going to prevent it

00:13:02.926 --> 00:13:03.586 A:middle
from being removed.

00:13:03.626 --> 00:13:07.196 A:middle
So, that kind of covers how to

00:13:07.196 --> 00:13:09.156 A:middle
make instances of NSTouchBar and

00:13:09.156 --> 00:13:11.206 A:middle
how to facilitate item lookup by

00:13:11.206 --> 00:13:12.306 A:middle
the item identifier, through the

00:13:12.306 --> 00:13:13.846 A:middle
template items and delegate

00:13:13.846 --> 00:13:14.266 A:middle
methods.

00:13:14.636 --> 00:13:15.826 A:middle
But one of the things we're

00:13:15.826 --> 00:13:17.596 A:middle
missing is how the applicant

00:13:17.596 --> 00:13:18.786 A:middle
finds those instances of

00:13:18.786 --> 00:13:19.396 A:middle
NSTouchBar.

00:13:19.396 --> 00:13:21.286 A:middle
And I big part of that is the

00:13:21.286 --> 00:13:22.626 A:middle
NSTouchBarProvider protocol.

00:13:23.436 --> 00:13:24.786 A:middle
And it's a fairly simple

00:13:24.786 --> 00:13:25.256 A:middle
protocol.

00:13:25.496 --> 00:13:26.976 A:middle
It's just exposing a read-only

00:13:26.976 --> 00:13:28.886 A:middle
Touch Bar property.

00:13:28.886 --> 00:13:30.846 A:middle
NSResponder itself implements

00:13:30.846 --> 00:13:31.866 A:middle
this protocol right out of the

00:13:31.866 --> 00:13:32.346 A:middle
box.

00:13:32.346 --> 00:13:33.256 A:middle
And we'll cover that in just a

00:13:33.256 --> 00:13:33.636 A:middle
second.

00:13:34.006 --> 00:13:35.556 A:middle
But sometimes it's useful to

00:13:35.556 --> 00:13:36.676 A:middle
attach a Touch Bar to your

00:13:36.676 --> 00:13:38.386 A:middle
application delegate, or window

00:13:38.386 --> 00:13:38.976 A:middle
delegate.

00:13:38.976 --> 00:13:40.156 A:middle
And neither of those is likely

00:13:40.156 --> 00:13:41.656 A:middle
to be a subclass of NSResponder.

00:13:41.966 --> 00:13:43.016 A:middle
So, let's see how you go ahead

00:13:43.016 --> 00:13:44.016 A:middle
and implement that protocol

00:13:44.016 --> 00:13:44.486 A:middle
yourself.

00:13:45.436 --> 00:13:47.256 A:middle
This looks like a lot of code,

00:13:47.256 --> 00:13:48.486 A:middle
but really we're just using a

00:13:48.486 --> 00:13:50.586 A:middle
Swift lazy variable here for the

00:13:50.586 --> 00:13:51.396 A:middle
Touch Bar property.

00:13:51.986 --> 00:13:53.216 A:middle
And the first time the Touch Bar

00:13:53.216 --> 00:13:54.556 A:middle
property is accessed, Swift is

00:13:54.556 --> 00:13:55.576 A:middle
going to go ahead and run this

00:13:55.576 --> 00:13:56.966 A:middle
block to instantiate our Touch

00:13:56.996 --> 00:13:57.196 A:middle
Bar.

00:13:57.416 --> 00:13:58.696 A:middle
All the code to create the item

00:13:58.696 --> 00:13:59.886 A:middle
in bar and stuff we looked at in

00:13:59.886 --> 00:14:00.786 A:middle
the previous slides.

00:14:02.176 --> 00:14:03.936 A:middle
Something else to mention is

00:14:03.936 --> 00:14:05.706 A:middle
that AppKit key value observes

00:14:05.706 --> 00:14:06.296 A:middle
this property.

00:14:06.296 --> 00:14:07.606 A:middle
So, if you feel the need to

00:14:07.756 --> 00:14:08.706 A:middle
replace your Touch Bar

00:14:08.706 --> 00:14:09.876 A:middle
wholesale, we'll notice that

00:14:09.876 --> 00:14:10.526 A:middle
sort of change.

00:14:11.706 --> 00:14:13.756 A:middle
Let's look at how NSResponder

00:14:13.756 --> 00:14:14.926 A:middle
implements this.

00:14:14.926 --> 00:14:16.426 A:middle
First, it exposes that Touch Bar

00:14:16.426 --> 00:14:17.456 A:middle
property as a read-write

00:14:17.456 --> 00:14:18.906 A:middle
property instead of read-only.

00:14:19.226 --> 00:14:20.596 A:middle
And the significance of that is

00:14:20.596 --> 00:14:22.076 A:middle
that you can set instances of

00:14:22.186 --> 00:14:24.286 A:middle
NSTouchBar on various pieces of

00:14:24.286 --> 00:14:24.946 A:middle
your application.

00:14:24.946 --> 00:14:26.086 A:middle
On the responders, you have in

00:14:26.086 --> 00:14:26.596 A:middle
your windows.

00:14:26.596 --> 00:14:27.856 A:middle
Like views and view controllers,

00:14:27.856 --> 00:14:28.696 A:middle
and window controllers.

00:14:29.176 --> 00:14:31.086 A:middle
And that's really neat because

00:14:31.086 --> 00:14:32.076 A:middle
you don't necessarily have a

00:14:32.076 --> 00:14:33.306 A:middle
subclass for each and every one

00:14:33.306 --> 00:14:34.056 A:middle
of those controls.

00:14:34.746 --> 00:14:36.636 A:middle
If you are making a subclass of

00:14:36.636 --> 00:14:37.676 A:middle
a control, or really any

00:14:37.766 --> 00:14:39.826 A:middle
NSResponder, NSResponder also

00:14:39.826 --> 00:14:41.136 A:middle
exposes this makeTouchBar

00:14:41.136 --> 00:14:41.476 A:middle
method.

00:14:42.506 --> 00:14:43.536 A:middle
So, makeTouchBar is pretty

00:14:43.536 --> 00:14:43.886 A:middle
simple.

00:14:44.456 --> 00:14:45.956 A:middle
The first time the Touch Bar

00:14:45.956 --> 00:14:47.296 A:middle
property is accessed on an

00:14:47.326 --> 00:14:48.996 A:middle
NSResponder, it's going to call

00:14:49.276 --> 00:14:50.976 A:middle
self makeTouchBar and run this

00:14:50.976 --> 00:14:51.316 A:middle
code.

00:14:51.316 --> 00:14:52.416 A:middle
And we just have to return a new

00:14:52.416 --> 00:14:53.216 A:middle
Touch Bar for it.

00:14:53.606 --> 00:14:55.286 A:middle
A lot of the system controls and

00:14:55.286 --> 00:14:56.606 A:middle
system frameworks, which expose

00:14:56.606 --> 00:14:58.316 A:middle
functionality use this method to

00:14:58.316 --> 00:14:59.976 A:middle
provide it.

00:15:00.656 --> 00:15:02.436 A:middle
So, I mentioned that NSResponder

00:15:02.436 --> 00:15:03.586 A:middle
has a read-write Touch Bar

00:15:03.586 --> 00:15:04.556 A:middle
property and you can set the

00:15:04.556 --> 00:15:05.106 A:middle
touch bar.

00:15:05.106 --> 00:15:06.186 A:middle
And one of the most important

00:15:06.186 --> 00:15:07.346 A:middle
clients of that is actually

00:15:07.346 --> 00:15:08.096 A:middle
Interface Builder.

00:15:08.906 --> 00:15:10.026 A:middle
So, let me show you how to build

00:15:10.026 --> 00:15:11.196 A:middle
a Touch Bar UI from Interface

00:15:11.196 --> 00:15:11.496 A:middle
Builder.

00:15:11.956 --> 00:15:13.646 A:middle
If we go ahead and start with a

00:15:13.646 --> 00:15:14.616 A:middle
new story board, we have a

00:15:14.616 --> 00:15:16.136 A:middle
window controller seen here, and

00:15:16.136 --> 00:15:17.616 A:middle
we can filter the object library

00:15:17.996 --> 00:15:19.546 A:middle
to show us Touch Bar controls.

00:15:20.166 --> 00:15:22.106 A:middle
So, if we just check the object

00:15:22.106 --> 00:15:23.316 A:middle
library, here an instance of NS

00:15:23.316 --> 00:15:24.746 A:middle
Touch Bar and we can drag that

00:15:24.746 --> 00:15:25.876 A:middle
onto our window controller.

00:15:26.336 --> 00:15:27.506 A:middle
And now we have an empty Touch

00:15:27.506 --> 00:15:29.066 A:middle
Bar to play with and going back

00:15:29.066 --> 00:15:31.026 A:middle
to the object library, we can go

00:15:31.026 --> 00:15:32.426 A:middle
ahead and see that there's

00:15:32.476 --> 00:15:33.856 A:middle
dozens and dozens of

00:15:33.856 --> 00:15:35.486 A:middle
preconfigured controls and Touch

00:15:35.526 --> 00:15:36.836 A:middle
Bar items we can just drag into

00:15:36.836 --> 00:15:37.376 A:middle
the Touch Bar.

00:15:37.626 --> 00:15:40.896 A:middle
And from here, we can wire these

00:15:40.896 --> 00:15:42.776 A:middle
items up with ID connections, or

00:15:42.776 --> 00:15:43.636 A:middle
bindings or whatever.

00:15:43.886 --> 00:15:45.626 A:middle
And it's actually very possible

00:15:45.626 --> 00:15:47.056 A:middle
to write Touch Bar apps that are

00:15:47.056 --> 00:15:48.336 A:middle
perfectly functional and useable

00:15:48.526 --> 00:15:49.646 A:middle
without ever writing a line of

00:15:49.646 --> 00:15:50.806 A:middle
code for it.

00:15:51.556 --> 00:15:53.606 A:middle
So, that covers creating

00:15:53.606 --> 00:15:54.906 A:middle
instances of NSTouchBarItem.

00:15:55.236 --> 00:15:56.506 A:middle
Let's see how this fits into the

00:15:56.506 --> 00:15:57.886 A:middle
bigger responder chain and how

00:15:57.886 --> 00:15:59.506 A:middle
we discover all of these

00:15:59.506 --> 00:16:01.826 A:middle
individual Touch Bar instances.

00:16:01.826 --> 00:16:03.766 A:middle
So, a refresher, a responder

00:16:03.766 --> 00:16:05.266 A:middle
chain is made up of instances of

00:16:05.266 --> 00:16:06.516 A:middle
the NSResponder class.

00:16:06.836 --> 00:16:08.036 A:middle
And one of the most important

00:16:08.036 --> 00:16:09.336 A:middle
properties of the NSResponder

00:16:09.336 --> 00:16:11.416 A:middle
class is this next responder

00:16:11.416 --> 00:16:12.776 A:middle
property it has.

00:16:13.266 --> 00:16:14.546 A:middle
And that just points at another

00:16:14.546 --> 00:16:15.056 A:middle
responder.

00:16:15.406 --> 00:16:16.396 A:middle
But it basically means that

00:16:16.396 --> 00:16:17.956 A:middle
given a responder, we've

00:16:17.956 --> 00:16:20.246 A:middle
anchored an entire chain of

00:16:20.246 --> 00:16:21.936 A:middle
responders capable of handling

00:16:21.936 --> 00:16:23.256 A:middle
events and actions and things.

00:16:23.656 --> 00:16:26.386 A:middle
And AppKit uses many different

00:16:26.486 --> 00:16:28.196 A:middle
responders as the anchors for

00:16:28.196 --> 00:16:29.276 A:middle
chains for handling keyboard

00:16:29.276 --> 00:16:31.256 A:middle
events, and actions and kit

00:16:31.256 --> 00:16:32.846 A:middle
testing and routing mouse events

00:16:32.846 --> 00:16:34.316 A:middle
and things, but let's cover how

00:16:34.316 --> 00:16:35.226 A:middle
keyboard event works.

00:16:35.226 --> 00:16:36.376 A:middle
Because Touch Bar is part of the

00:16:36.376 --> 00:16:36.786 A:middle
keyboard.

00:16:37.596 --> 00:16:38.846 A:middle
So, we're going to have an

00:16:38.846 --> 00:16:39.886 A:middle
NSEvent handed to us by the

00:16:39.886 --> 00:16:41.296 A:middle
system, and that's going to go

00:16:41.296 --> 00:16:42.376 A:middle
over the NSApplication.

00:16:43.006 --> 00:16:44.236 A:middle
And NSApplication is going to

00:16:44.236 --> 00:16:45.236 A:middle
say what do I do with this

00:16:45.236 --> 00:16:45.796 A:middle
keyboard event.

00:16:46.446 --> 00:16:48.246 A:middle
And most NSApplications are

00:16:48.246 --> 00:16:49.346 A:middle
going to say do I have a key

00:16:49.346 --> 00:16:49.756 A:middle
window?

00:16:49.906 --> 00:16:51.796 A:middle
Okay, it gets the keyboard event

00:16:51.796 --> 00:16:51.936 A:middle
now.

00:16:52.926 --> 00:16:54.266 A:middle
And the key window meanwhile is

00:16:54.266 --> 00:16:55.256 A:middle
going to have the same question,

00:16:55.256 --> 00:16:56.426 A:middle
what do I do with this keyboard

00:16:57.186 --> 00:16:57.506 A:middle
event.

00:16:57.506 --> 00:16:59.616 A:middle
Every NS Window had a property

00:16:59.616 --> 00:17:01.086 A:middle
called first responder and

00:17:01.086 --> 00:17:03.186 A:middle
that's designating where the

00:17:03.186 --> 00:17:04.356 A:middle
responder chain starts for

00:17:04.356 --> 00:17:05.616 A:middle
keyboard events and actions and

00:17:05.616 --> 00:17:05.926 A:middle
things.

00:17:06.166 --> 00:17:06.966 A:middle
So, the key window is going to

00:17:06.966 --> 00:17:07.996 A:middle
go ahead and say, all right

00:17:07.996 --> 00:17:08.916 A:middle
let's send this event to my

00:17:08.916 --> 00:17:11.466 A:middle
first responder, like in its key

00:17:11.466 --> 00:17:12.326 A:middle
down or key up method.

00:17:13.236 --> 00:17:14.516 A:middle
So, the first responder

00:17:14.516 --> 00:17:16.966 A:middle
meanwhile it's interesting,

00:17:16.966 --> 00:17:17.846 A:middle
because that's where it's

00:17:17.846 --> 00:17:19.096 A:middle
anchoring the responder chain,

00:17:19.096 --> 00:17:19.906 A:middle
where we're going to be handling

00:17:19.906 --> 00:17:21.126 A:middle
this as a responder method, not

00:17:21.126 --> 00:17:22.106 A:middle
just generic event routing.

00:17:22.106 --> 00:17:23.276 A:middle
But it's going to have a

00:17:23.276 --> 00:17:24.976 A:middle
decision, do I handle the event

00:17:24.976 --> 00:17:27.076 A:middle
in key down, or do I call super

00:17:27.076 --> 00:17:28.256 A:middle
and let it pass that to the next

00:17:28.256 --> 00:17:28.756 A:middle
responder.

00:17:29.456 --> 00:17:30.596 A:middle
So, let's say it passes it to

00:17:30.596 --> 00:17:31.296 A:middle
the next responder.

00:17:31.296 --> 00:17:33.196 A:middle
Usually the first responder will

00:17:33.196 --> 00:17:34.496 A:middle
be a view, the second responder

00:17:34.496 --> 00:17:35.266 A:middle
will be a super view.

00:17:35.786 --> 00:17:37.206 A:middle
It will make the same choice.

00:17:37.576 --> 00:17:39.046 A:middle
And these days, use and view

00:17:39.046 --> 00:17:40.256 A:middle
controllers tend to be

00:17:40.256 --> 00:17:40.876 A:middle
[inaudible] in the responder

00:17:40.876 --> 00:17:41.156 A:middle
chain.

00:17:41.426 --> 00:17:42.976 A:middle
So, pass it up to a view

00:17:42.976 --> 00:17:44.216 A:middle
controller, have the same choice

00:17:44.216 --> 00:17:45.276 A:middle
handler call super.

00:17:45.356 --> 00:17:46.156 A:middle
It doesn't handle it.

00:17:46.426 --> 00:17:48.146 A:middle
It might even go and reach all

00:17:48.146 --> 00:17:49.016 A:middle
the way back to the initial

00:17:49.016 --> 00:17:50.526 A:middle
window that routed the event in

00:17:50.526 --> 00:17:51.246 A:middle
the first place.

00:17:51.546 --> 00:17:52.336 A:middle
And that, as part of the

00:17:52.336 --> 00:17:53.416 A:middle
responder chain, can make the

00:17:53.416 --> 00:17:54.636 A:middle
same decisions whether to handle

00:17:54.636 --> 00:17:55.336 A:middle
it or pass it on.

00:17:55.646 --> 00:17:56.676 A:middle
And that can percolate all the

00:17:56.676 --> 00:17:57.936 A:middle
way back up to the application.

00:17:58.626 --> 00:17:59.436 A:middle
So, that's how we handle

00:17:59.436 --> 00:18:00.156 A:middle
keyboard events.

00:18:00.536 --> 00:18:01.316 A:middle
Touch Bar is part of the

00:18:01.316 --> 00:18:01.716 A:middle
keyboard.

00:18:01.946 --> 00:18:03.156 A:middle
So, it also turns out these are

00:18:03.156 --> 00:18:04.606 A:middle
all the places we can attach

00:18:04.606 --> 00:18:05.766 A:middle
instances of NSTouchBar.

00:18:06.246 --> 00:18:07.886 A:middle
And we search them in exactly

00:18:07.886 --> 00:18:08.976 A:middle
the same order the keyboard

00:18:08.976 --> 00:18:10.256 A:middle
event was routed through the

00:18:10.256 --> 00:18:10.996 A:middle
responder chain.

00:18:11.926 --> 00:18:13.616 A:middle
So, one question you should be

00:18:13.616 --> 00:18:15.276 A:middle
asking is hey, I notice you have

00:18:15.276 --> 00:18:16.836 A:middle
five instances of NSTouchBar

00:18:16.836 --> 00:18:17.076 A:middle
here.

00:18:17.326 --> 00:18:18.966 A:middle
How do you go from that to one

00:18:18.966 --> 00:18:20.216 A:middle
Touch Bar on the device.

00:18:20.686 --> 00:18:21.926 A:middle
And I'm going to cover that in

00:18:21.926 --> 00:18:22.546 A:middle
just a second.

00:18:22.926 --> 00:18:25.036 A:middle
But first I want to make a small

00:18:25.036 --> 00:18:26.006 A:middle
note about views and views

00:18:26.006 --> 00:18:26.576 A:middle
controllers.

00:18:27.386 --> 00:18:28.276 A:middle
You're probably going to be

00:18:28.276 --> 00:18:29.466 A:middle
attaching a Touch Bar to a view

00:18:29.466 --> 00:18:31.216 A:middle
controller at some point, making

00:18:31.436 --> 00:18:32.376 A:middle
your application.

00:18:32.956 --> 00:18:34.046 A:middle
And you'll run and test this.

00:18:34.046 --> 00:18:34.786 A:middle
And you're going to see that

00:18:34.786 --> 00:18:35.816 A:middle
your Touch Bar doesn't show up

00:18:35.816 --> 00:18:37.016 A:middle
at all and you'll think, oh, I

00:18:37.016 --> 00:18:38.206 A:middle
guess my view controller is not

00:18:38.206 --> 00:18:39.186 A:middle
in the responder chain.

00:18:39.356 --> 00:18:40.356 A:middle
And you'll go ahead and look at

00:18:40.356 --> 00:18:41.466 A:middle
your view controllers view and

00:18:41.466 --> 00:18:42.846 A:middle
see that its next responder is

00:18:42.846 --> 00:18:43.866 A:middle
indeed your view controller.

00:18:44.376 --> 00:18:45.926 A:middle
And what's going on here is that

00:18:46.376 --> 00:18:48.786 A:middle
while your particular responder

00:18:48.786 --> 00:18:50.216 A:middle
chain is set up correctly, it's

00:18:50.216 --> 00:18:51.226 A:middle
not anchored in the first

00:18:51.226 --> 00:18:52.246 A:middle
responder of the window.

00:18:52.806 --> 00:18:54.326 A:middle
And that's often because the

00:18:54.326 --> 00:18:55.506 A:middle
first responder of the window

00:18:55.506 --> 00:18:56.906 A:middle
has to return true for the

00:18:56.906 --> 00:18:58.426 A:middle
acceptsFirstResponder method.

00:18:58.876 --> 00:18:59.736 A:middle
So, if you wind up in this

00:18:59.736 --> 00:19:00.946 A:middle
situation, it's really easy to

00:19:00.946 --> 00:19:02.456 A:middle
subclass NS View or whatever

00:19:02.456 --> 00:19:03.926 A:middle
your first responder is to

00:19:03.926 --> 00:19:06.236 A:middle
accept first responder and make

00:19:06.236 --> 00:19:07.506 A:middle
a valid responder chain anchored

00:19:07.506 --> 00:19:08.316 A:middle
at the first responder.

00:19:09.396 --> 00:19:10.956 A:middle
So, let's get back to how we're

00:19:10.956 --> 00:19:11.736 A:middle
going to handle multiple

00:19:11.736 --> 00:19:13.006 A:middle
NSTouchBar instances on this.

00:19:13.326 --> 00:19:15.296 A:middle
The easiest thing to remember is

00:19:15.296 --> 00:19:17.196 A:middle
that the responder, with an

00:19:17.226 --> 00:19:18.856 A:middle
NSTouchBar closest to that first

00:19:18.856 --> 00:19:20.026 A:middle
responder, so closest to the

00:19:20.026 --> 00:19:22.506 A:middle
keyboard input, its Touch Bar is

00:19:22.506 --> 00:19:23.556 A:middle
going to win and take over the

00:19:23.556 --> 00:19:24.126 A:middle
whole thing.

00:19:24.726 --> 00:19:26.286 A:middle
Calling back to earlier where I

00:19:26.286 --> 00:19:27.486 A:middle
mentioned that AVKit and some

00:19:27.486 --> 00:19:28.646 A:middle
other system frameworks provide

00:19:28.646 --> 00:19:29.876 A:middle
support, you're probably

00:19:29.876 --> 00:19:30.886 A:middle
thinking that they're likely

00:19:30.886 --> 00:19:32.096 A:middle
going to provide support in NS

00:19:32.096 --> 00:19:33.006 A:middle
Views which are going to be

00:19:33.006 --> 00:19:34.576 A:middle
closer to the first responder

00:19:34.946 --> 00:19:36.266 A:middle
than your window controllers or

00:19:36.266 --> 00:19:37.556 A:middle
application delegates might be.

00:19:38.256 --> 00:19:39.996 A:middle
So, we need some way of sharing

00:19:40.276 --> 00:19:41.556 A:middle
the device Touch Bar across

00:19:41.556 --> 00:19:43.096 A:middle
multiple instances of NSTouchBar

00:19:43.096 --> 00:19:44.266 A:middle
and we have a way of doing that.

00:19:44.756 --> 00:19:45.856 A:middle
And that's accomplished with

00:19:45.856 --> 00:19:47.136 A:middle
this special item identifier,

00:19:47.356 --> 00:19:48.646 A:middle
called the otherItemsProxy.

00:19:49.426 --> 00:19:50.586 A:middle
I say it's a special item

00:19:50.586 --> 00:19:52.116 A:middle
identifier because you don't

00:19:52.116 --> 00:19:53.176 A:middle
have to create any item for

00:19:53.176 --> 00:19:53.406 A:middle
this.

00:19:53.406 --> 00:19:54.316 A:middle
You don't have to put it in your

00:19:54.316 --> 00:19:55.786 A:middle
template item set, you don't

00:19:55.786 --> 00:19:57.596 A:middle
have to handle that identifier

00:19:57.746 --> 00:19:58.866 A:middle
in your delegate and make item

00:19:58.866 --> 00:19:59.936 A:middle
for identifier case.

00:20:01.166 --> 00:20:02.146 A:middle
But when you go ahead and

00:20:02.146 --> 00:20:03.956 A:middle
include other items proxy in

00:20:03.956 --> 00:20:05.196 A:middle
your default item identifier

00:20:05.246 --> 00:20:07.926 A:middle
array, when AppKit is harvesting

00:20:08.006 --> 00:20:09.226 A:middle
NSTouchBar from the responder

00:20:09.226 --> 00:20:10.636 A:middle
chain, it will go ahead and

00:20:10.636 --> 00:20:12.566 A:middle
replace the otherItemsProxy with

00:20:12.566 --> 00:20:14.186 A:middle
the items from responders closer

00:20:14.186 --> 00:20:15.286 A:middle
to the first responder.

00:20:16.406 --> 00:20:17.716 A:middle
So, let's look at that in

00:20:17.716 --> 00:20:17.986 A:middle
action.

00:20:17.986 --> 00:20:18.976 A:middle
Here's an example of mail.

00:20:19.396 --> 00:20:20.556 A:middle
My keyboard focus is on the

00:20:20.556 --> 00:20:21.346 A:middle
recipient's field.

00:20:21.346 --> 00:20:22.796 A:middle
And the recipient's field is

00:20:22.796 --> 00:20:24.386 A:middle
providing suggestions for who I

00:20:24.386 --> 00:20:25.446 A:middle
might to send the email to.

00:20:25.786 --> 00:20:27.716 A:middle
I also have this send button on

00:20:27.716 --> 00:20:29.016 A:middle
the left side of the application

00:20:29.016 --> 00:20:29.896 A:middle
section of the Touch Bar.

00:20:30.766 --> 00:20:32.026 A:middle
If I were to change my keyboard

00:20:32.026 --> 00:20:34.886 A:middle
focus instead to the composition

00:20:34.886 --> 00:20:36.416 A:middle
view in the window, I have a

00:20:36.416 --> 00:20:37.346 A:middle
bunch of text formatting

00:20:37.346 --> 00:20:38.446 A:middle
controls and an emoji picker.

00:20:38.486 --> 00:20:39.576 A:middle
But I still have that send

00:20:39.576 --> 00:20:39.856 A:middle
button.

00:20:40.596 --> 00:20:42.246 A:middle
And the way this breaks down is

00:20:42.246 --> 00:20:44.726 A:middle
that mail's composed window

00:20:44.726 --> 00:20:46.806 A:middle
controller has a Touch Bar with

00:20:46.806 --> 00:20:47.776 A:middle
a send button and an

00:20:47.776 --> 00:20:48.796 A:middle
otherItemsProxy.

00:20:50.036 --> 00:20:51.566 A:middle
And the recipient's field is

00:20:51.626 --> 00:20:52.696 A:middle
providing the candidates.

00:20:52.696 --> 00:20:53.936 A:middle
And the recipient's field is

00:20:53.936 --> 00:20:54.816 A:middle
very close to the first

00:20:54.816 --> 00:20:55.916 A:middle
responder, so it's going to get

00:20:55.916 --> 00:20:57.416 A:middle
first shot at that.

00:20:57.766 --> 00:20:58.776 A:middle
But the window controller

00:20:58.776 --> 00:21:00.506 A:middle
including the otherItemsProxy

00:21:00.816 --> 00:21:01.926 A:middle
means we can merge those two

00:21:01.926 --> 00:21:03.606 A:middle
Touch Bars.

00:21:03.726 --> 00:21:05.146 A:middle
Likewise, for the composition

00:21:05.146 --> 00:21:06.956 A:middle
view, the window controller is

00:21:06.956 --> 00:21:08.446 A:middle
exactly the same instance, it's

00:21:09.076 --> 00:21:11.276 A:middle
just the responder chain

00:21:11.276 --> 00:21:12.436 A:middle
anchored at the first responder

00:21:12.706 --> 00:21:15.026 A:middle
includes the composition view

00:21:15.316 --> 00:21:16.386 A:middle
before the window controller.

00:21:17.176 --> 00:21:18.556 A:middle
Something else to mention is

00:21:18.626 --> 00:21:19.486 A:middle
that this is completely

00:21:19.486 --> 00:21:20.936 A:middle
compatible with customization.

00:21:20.986 --> 00:21:22.636 A:middle
We use the otherItemsProxy to

00:21:22.756 --> 00:21:24.106 A:middle
build the default set of items,

00:21:24.476 --> 00:21:25.346 A:middle
like you'd expect.

00:21:25.676 --> 00:21:26.786 A:middle
And we go ahead and union the

00:21:26.786 --> 00:21:28.066 A:middle
allowed items from the eligible

00:21:28.066 --> 00:21:28.646 A:middle
touch bars.

00:21:28.946 --> 00:21:30.336 A:middle
So, we can see we can customize

00:21:30.336 --> 00:21:31.436 A:middle
the send button in mail, even

00:21:31.436 --> 00:21:32.296 A:middle
though it's provided by a

00:21:32.296 --> 00:21:34.176 A:middle
different responder than the

00:21:34.176 --> 00:21:35.096 A:middle
formatting controls.

00:21:36.966 --> 00:21:39.406 A:middle
You might think, hey the

00:21:39.406 --> 00:21:40.636 A:middle
otherItemsProxy sounds pretty

00:21:40.636 --> 00:21:41.926 A:middle
great for the reliable

00:21:41.926 --> 00:21:42.926 A:middle
functioning of my Touch Bar

00:21:42.926 --> 00:21:44.036 A:middle
stuff, and you'd be right, but

00:21:44.036 --> 00:21:45.216 A:middle
there's a few cases where you do

00:21:45.216 --> 00:21:46.146 A:middle
want to omit it.

00:21:46.526 --> 00:21:48.346 A:middle
And if we go back to mail, but

00:21:48.346 --> 00:21:49.796 A:middle
close all the windows, we're

00:21:49.796 --> 00:21:50.846 A:middle
going to see that we have a new

00:21:50.846 --> 00:21:52.006 A:middle
viewer window button in the

00:21:52.006 --> 00:21:52.476 A:middle
Touch Bar.

00:21:53.076 --> 00:21:54.336 A:middle
And that's provided by the

00:21:54.336 --> 00:21:56.006 A:middle
application, but it omits the

00:21:56.006 --> 00:21:56.896 A:middle
otherItemsProxy.

00:21:57.296 --> 00:21:59.216 A:middle
When we go ahead and bring a

00:21:59.216 --> 00:22:00.526 A:middle
window up that has Touch Bar

00:22:00.526 --> 00:22:02.046 A:middle
content it's going to be closer

00:22:02.046 --> 00:22:03.336 A:middle
to the first responder, and the

00:22:03.336 --> 00:22:05.336 A:middle
lack of the otherItemsProxy in

00:22:05.336 --> 00:22:06.846 A:middle
the farther out Touch Bar means

00:22:06.846 --> 00:22:07.996 A:middle
it gets replaced entirely.

00:22:09.446 --> 00:22:10.776 A:middle
So, there's another sort of

00:22:10.776 --> 00:22:11.946 A:middle
special item identifier I want

00:22:11.946 --> 00:22:13.176 A:middle
to cover and those are spaces.

00:22:13.606 --> 00:22:15.236 A:middle
So, if you see here, we've made

00:22:15.236 --> 00:22:16.526 A:middle
a mockup Touch Bar and we have a

00:22:16.526 --> 00:22:17.956 A:middle
shark item and an angelfish.

00:22:18.456 --> 00:22:20.546 A:middle
And the angel fish probably

00:22:20.546 --> 00:22:21.546 A:middle
isn't that comfortable being so

00:22:21.546 --> 00:22:22.456 A:middle
close to the shark.

00:22:22.456 --> 00:22:24.016 A:middle
Thankfully, the shark is facing

00:22:24.016 --> 00:22:25.046 A:middle
the wrong way so the fish

00:22:25.046 --> 00:22:26.356 A:middle
probably isn't on the menu yet.

00:22:26.966 --> 00:22:28.446 A:middle
But we can go ahead and give the

00:22:28.446 --> 00:22:29.366 A:middle
angelfish some breathing room.

00:22:29.366 --> 00:22:30.716 A:middle
And we can do that by adding a

00:22:30.716 --> 00:22:32.006 A:middle
fixed space small item

00:22:32.006 --> 00:22:33.666 A:middle
identifier in the default item

00:22:33.666 --> 00:22:35.166 A:middle
identifiers array in between the

00:22:35.166 --> 00:22:36.246 A:middle
shark and angelfish item

00:22:36.246 --> 00:22:36.866 A:middle
identifiers.

00:22:37.296 --> 00:22:38.646 A:middle
And we don't have to settle for

00:22:38.646 --> 00:22:40.236 A:middle
small, we can also use a large

00:22:40.236 --> 00:22:41.066 A:middle
one and give it a little bit

00:22:41.066 --> 00:22:42.126 A:middle
more space.

00:22:42.206 --> 00:22:43.786 A:middle
And it's useful to use these

00:22:43.786 --> 00:22:44.996 A:middle
instead of hard coding your own

00:22:44.996 --> 00:22:46.206 A:middle
space, because these are our

00:22:46.206 --> 00:22:47.626 A:middle
system defined values that may

00:22:47.626 --> 00:22:48.506 A:middle
change from release to release,

00:22:48.506 --> 00:22:50.506 A:middle
but they also give your app an

00:22:50.506 --> 00:22:51.836 A:middle
appearance similar to other apps

00:22:51.836 --> 00:22:52.356 A:middle
on the system.

00:22:52.986 --> 00:22:54.406 A:middle
We don't have to stop with fixed

00:22:54.406 --> 00:22:55.356 A:middle
spaces though, we also have a

00:22:55.356 --> 00:22:57.096 A:middle
flexible space identifier.

00:22:57.246 --> 00:22:58.286 A:middle
And the flexible space is

00:22:58.286 --> 00:22:59.256 A:middle
interesting in that it's going

00:22:59.256 --> 00:23:00.786 A:middle
to push the adjacent items as

00:23:00.786 --> 00:23:02.326 A:middle
far away from each other as they

00:23:02.326 --> 00:23:03.956 A:middle
can get.

00:23:03.956 --> 00:23:05.676 A:middle
So, in this case, the angelfish

00:23:05.676 --> 00:23:06.916 A:middle
probably feels a lot better with

00:23:06.916 --> 00:23:08.016 A:middle
that flexible space between it

00:23:08.016 --> 00:23:08.526 A:middle
and the shark.

00:23:09.246 --> 00:23:11.006 A:middle
You might be thinking you could

00:23:11.006 --> 00:23:12.656 A:middle
put flexible space on two side

00:23:12.656 --> 00:23:13.606 A:middle
of an item to center it.

00:23:13.906 --> 00:23:15.286 A:middle
And that's a very reasonable

00:23:15.286 --> 00:23:15.606 A:middle
thought.

00:23:16.126 --> 00:23:17.206 A:middle
If you do that, you're going,

00:23:17.376 --> 00:23:18.446 A:middle
actually, let's say we do that

00:23:18.446 --> 00:23:19.476 A:middle
with our purple circle.

00:23:19.616 --> 00:23:21.496 A:middle
We put flexible space on the

00:23:21.496 --> 00:23:22.396 A:middle
left and right sides of it.

00:23:22.766 --> 00:23:23.886 A:middle
The circle is centered within

00:23:23.886 --> 00:23:24.986 A:middle
the application section of the

00:23:24.986 --> 00:23:26.276 A:middle
Touch Bar, which might be what

00:23:26.276 --> 00:23:26.966 A:middle
you're going for.

00:23:27.286 --> 00:23:28.416 A:middle
But you might also want to be

00:23:28.416 --> 00:23:29.626 A:middle
centering that item on the

00:23:29.626 --> 00:23:31.286 A:middle
actual device, and it's not

00:23:31.286 --> 00:23:31.646 A:middle
there.

00:23:31.646 --> 00:23:34.566 A:middle
We're a little bit to the left.

00:23:34.566 --> 00:23:36.136 A:middle
So, we can fix that by using and

00:23:36.136 --> 00:23:37.556 A:middle
NSTouchBar property called the

00:23:37.556 --> 00:23:38.726 A:middle
principal item identifier.

00:23:39.686 --> 00:23:41.376 A:middle
And we can go ahead and set a

00:23:41.376 --> 00:23:41.816 A:middle
Touch Bar's

00:23:41.816 --> 00:23:43.116 A:middle
principalItemIdentifier to the

00:23:43.116 --> 00:23:44.676 A:middle
identifier of any visible item,

00:23:45.076 --> 00:23:47.106 A:middle
and it's going to go ahead and

00:23:47.106 --> 00:23:48.656 A:middle
actually place that item in the

00:23:48.656 --> 00:23:49.656 A:middle
center of the device.

00:23:50.186 --> 00:23:51.896 A:middle
So, if we go ahead and look at

00:23:51.896 --> 00:23:53.456 A:middle
this example, all the code in

00:23:53.456 --> 00:23:54.176 A:middle
here is stuff we see in our

00:23:54.176 --> 00:23:55.986 A:middle
previous slides except this last

00:23:55.986 --> 00:23:56.686 A:middle
line where we set the

00:23:56.686 --> 00:23:57.776 A:middle
principalItemIdentifier.

00:23:58.186 --> 00:23:59.306 A:middle
And by setting to the shark

00:23:59.306 --> 00:24:01.016 A:middle
identifier, we go ahead and move

00:24:01.016 --> 00:24:02.296 A:middle
and the shark to the middle of

00:24:02.296 --> 00:24:03.966 A:middle
the Touch Bar and lay out the

00:24:03.966 --> 00:24:05.256 A:middle
items left to right like we did

00:24:05.256 --> 00:24:05.946 A:middle
in other cases.

00:24:06.506 --> 00:24:07.456 A:middle
If we were to use the turtle

00:24:07.456 --> 00:24:09.356 A:middle
instead, the shark winds up on

00:24:09.356 --> 00:24:10.296 A:middle
the left side like it would

00:24:10.296 --> 00:24:11.376 A:middle
normally, and the turtle is

00:24:11.376 --> 00:24:12.266 A:middle
centered on the device.

00:24:13.076 --> 00:24:14.356 A:middle
And this plays really well with

00:24:14.356 --> 00:24:16.056 A:middle
flexible spaces and other

00:24:16.056 --> 00:24:16.346 A:middle
things.

00:24:16.346 --> 00:24:17.246 A:middle
Son you can make some nuance

00:24:17.246 --> 00:24:17.796 A:middle
device with that.

00:24:17.976 --> 00:24:19.076 A:middle
And there's additionally types

00:24:19.236 --> 00:24:20.796 A:middle
of NSTouchBar items subclasses

00:24:21.136 --> 00:24:22.656 A:middle
that modify the behavior of the

00:24:22.656 --> 00:24:23.816 A:middle
principalItemIdentifier.

00:24:24.156 --> 00:24:25.576 A:middle
And John is going to go ahead

00:24:25.896 --> 00:24:27.846 A:middle
and cover those as we take a

00:24:27.846 --> 00:24:29.626 A:middle
deep dive into NSTouchBar item.

00:24:30.396 --> 00:24:31.336 A:middle
Welcome John Tegtmeyer.

00:24:32.516 --> 00:24:35.856 A:middle
[ Applause ]

00:24:36.356 --> 00:24:38.186 A:middle
So, Chris gave us an overview

00:24:38.186 --> 00:24:39.866 A:middle
over the NSTouchBar API and how

00:24:39.866 --> 00:24:41.726 A:middle
it's tied to the responder chain

00:24:41.726 --> 00:24:43.186 A:middle
allowing us to provide context

00:24:43.186 --> 00:24:44.806 A:middle
sensitive controls to our users.

00:24:45.316 --> 00:24:46.546 A:middle
He also eluded to this

00:24:46.586 --> 00:24:48.196 A:middle
NSTouchBar item object, which is

00:24:48.196 --> 00:24:50.026 A:middle
the wrap around all the views in

00:24:50.026 --> 00:24:50.626 A:middle
the Touch Bar.

00:24:51.346 --> 00:24:52.486 A:middle
Now, AppKit provides a lot of

00:24:52.486 --> 00:24:54.096 A:middle
subclasses of this item, and

00:24:54.096 --> 00:24:54.956 A:middle
they all offer some really

00:24:54.956 --> 00:24:56.536 A:middle
unique, very cool functionality.

00:24:56.796 --> 00:24:57.776 A:middle
So, I'm here to give us a deep

00:24:57.776 --> 00:24:58.986 A:middle
dive into those items.

00:24:59.686 --> 00:25:01.996 A:middle
NSTouchBar item is a base class

00:25:01.996 --> 00:25:02.946 A:middle
of everything that we'll talk

00:25:02.946 --> 00:25:03.426 A:middle
about today.

00:25:03.826 --> 00:25:04.976 A:middle
That means the properties on

00:25:04.976 --> 00:25:05.996 A:middle
this will be inherited by the

00:25:05.996 --> 00:25:06.736 A:middle
subclass.

00:25:07.256 --> 00:25:08.266 A:middle
The first thing that all Touch

00:25:08.266 --> 00:25:09.596 A:middle
Bar items have is a unique

00:25:09.596 --> 00:25:10.346 A:middle
identifier.

00:25:11.116 --> 00:25:13.806 A:middle
This is what NSTouchBar will use

00:25:13.806 --> 00:25:14.696 A:middle
when looking up your item

00:25:14.696 --> 00:25:15.956 A:middle
through the template items

00:25:15.956 --> 00:25:17.896 A:middle
array, or through the delegate.

00:25:18.666 --> 00:25:20.216 A:middle
Items also have a view or a view

00:25:20.216 --> 00:25:20.716 A:middle
controller.

00:25:20.996 --> 00:25:21.736 A:middle
This is what's actually

00:25:21.736 --> 00:25:23.056 A:middle
presented to your users.

00:25:23.316 --> 00:25:24.246 A:middle
And if you're using the view

00:25:24.246 --> 00:25:25.236 A:middle
controller, this is a good

00:25:25.236 --> 00:25:27.336 A:middle
opportunity to lazily load your

00:25:27.336 --> 00:25:27.836 A:middle
views.

00:25:28.736 --> 00:25:30.066 A:middle
We also have a customization

00:25:30.066 --> 00:25:30.436 A:middle
label.

00:25:30.436 --> 00:25:31.736 A:middle
And this is the string that's

00:25:31.736 --> 00:25:33.146 A:middle
presented in the customization

00:25:33.146 --> 00:25:33.626 A:middle
UI.

00:25:33.916 --> 00:25:35.156 A:middle
And describes what your control

00:25:35.156 --> 00:25:35.926 A:middle
actually does.

00:25:36.796 --> 00:25:38.396 A:middle
I hope you notice one thing that

00:25:38.396 --> 00:25:39.466 A:middle
we don't have here is an

00:25:39.466 --> 00:25:41.246 A:middle
explicit minimum or maximum size

00:25:41.276 --> 00:25:41.736 A:middle
property.

00:25:42.276 --> 00:25:43.756 A:middle
That's because, unlike tool bar

00:25:43.756 --> 00:25:46.016 A:middle
item, which does have these

00:25:46.016 --> 00:25:47.926 A:middle
explicit properties Touch Bar

00:25:47.926 --> 00:25:49.336 A:middle
items are actually measured

00:25:49.336 --> 00:25:50.366 A:middle
using constraints.

00:25:50.776 --> 00:25:51.956 A:middle
That means if you're using

00:25:51.956 --> 00:25:53.666 A:middle
something like an NS button

00:25:53.666 --> 00:25:54.956 A:middle
which has an intrinsic content

00:25:54.956 --> 00:25:56.526 A:middle
size, it will automatically be

00:25:56.526 --> 00:25:58.166 A:middle
sized to fit its title and its

00:25:58.166 --> 00:25:58.626 A:middle
image.

00:25:59.196 --> 00:26:00.356 A:middle
You can also choose to use

00:26:00.356 --> 00:26:01.796 A:middle
inequality constraints to set up

00:26:01.846 --> 00:26:03.456 A:middle
minimum and maximum sizes.

00:26:03.836 --> 00:26:04.996 A:middle
And AppKit will automatically

00:26:04.996 --> 00:26:06.726 A:middle
size you view based on how much

00:26:06.726 --> 00:26:07.996 A:middle
space is available in the

00:26:07.996 --> 00:26:09.026 A:middle
application section.

00:26:09.286 --> 00:26:10.596 A:middle
And you can find out more about

00:26:10.596 --> 00:26:11.986 A:middle
how items are sized at the

00:26:11.986 --> 00:26:13.636 A:middle
"Advanced Touch Bar Talk" later

00:26:15.256 --> 00:26:15.386 A:middle
today.

00:26:15.576 --> 00:26:17.496 A:middle
Now, as I mentioned, AppKit

00:26:17.606 --> 00:26:20.156 A:middle
provides lots of subclasses of

00:26:20.156 --> 00:26:20.646 A:middle
this item.

00:26:21.276 --> 00:26:22.296 A:middle
And we'll talk about each of

00:26:22.296 --> 00:26:22.576 A:middle
these.

00:26:22.576 --> 00:26:23.486 A:middle
We'll talk about the custom

00:26:23.486 --> 00:26:25.326 A:middle
Touch Bar item, pop overs,

00:26:25.326 --> 00:26:27.436 A:middle
sliders, group item, as well as

00:26:27.436 --> 00:26:28.736 A:middle
a few bonus topics at the end.

00:26:28.976 --> 00:26:30.306 A:middle
So, let's get started with the

00:26:30.306 --> 00:26:31.306 A:middle
custom Touch Bar item.

00:26:31.886 --> 00:26:34.256 A:middle
Now, the custom item offers

00:26:34.316 --> 00:26:35.666 A:middle
rewrite properties on everything

00:26:35.666 --> 00:26:36.566 A:middle
that we just talked about on the

00:26:36.566 --> 00:26:37.236 A:middle
base class.

00:26:37.346 --> 00:26:38.526 A:middle
That means you can simply set

00:26:38.526 --> 00:26:39.816 A:middle
the view of the view controller

00:26:39.816 --> 00:26:40.916 A:middle
rather than subclassing your

00:26:40.916 --> 00:26:41.286 A:middle
item.

00:26:41.886 --> 00:26:43.066 A:middle
This is likely the item that

00:26:43.066 --> 00:26:44.196 A:middle
you'll use if you want to show

00:26:44.196 --> 00:26:45.356 A:middle
something like a button or a

00:26:45.356 --> 00:26:46.376 A:middle
segmented control.

00:26:47.096 --> 00:26:48.426 A:middle
Anything that you're familiar

00:26:48.426 --> 00:26:49.876 A:middle
with through AppKit, or custom

00:26:49.876 --> 00:26:50.736 A:middle
container views.

00:26:52.296 --> 00:26:53.566 A:middle
Now, this is also a really great

00:26:53.566 --> 00:26:54.716 A:middle
opportunity to use some of the

00:26:54.716 --> 00:26:56.016 A:middle
convenience constructors that we

00:26:56.016 --> 00:26:57.126 A:middle
introduced in 10.12.

00:26:57.596 --> 00:26:58.226 A:middle
Let's take a look.

00:26:59.206 --> 00:27:00.556 A:middle
In this example, we're going to

00:27:00.556 --> 00:27:01.696 A:middle
create a simple button for Touch

00:27:01.696 --> 00:27:01.916 A:middle
Bar.

00:27:02.356 --> 00:27:04.376 A:middle
We're doing that by creating a

00:27:04.376 --> 00:27:05.506 A:middle
custom Touch Bar item and

00:27:05.506 --> 00:27:07.026 A:middle
providing a unique identifier.

00:27:07.026 --> 00:27:08.486 A:middle
And then we're going to set the

00:27:08.486 --> 00:27:10.166 A:middle
items view to be an NS button

00:27:10.166 --> 00:27:11.636 A:middle
using the title target action

00:27:11.636 --> 00:27:13.006 A:middle
constructor that we saw earlier.

00:27:13.696 --> 00:27:15.156 A:middle
And as Chris mentioned, this

00:27:15.156 --> 00:27:16.616 A:middle
will assign the correct font and

00:27:16.616 --> 00:27:17.606 A:middle
the correct appearance to this

00:27:17.606 --> 00:27:17.886 A:middle
button.

00:27:17.886 --> 00:27:18.966 A:middle
So, we have a great looking

00:27:18.966 --> 00:27:20.256 A:middle
button that's ready for Touch

00:27:20.256 --> 00:27:21.736 A:middle
Bar in two simple lines of code.

00:27:22.656 --> 00:27:23.846 A:middle
This is also true for a more

00:27:23.846 --> 00:27:24.936 A:middle
complicated control.

00:27:25.336 --> 00:27:26.826 A:middle
In this case, this is a

00:27:26.826 --> 00:27:27.806 A:middle
segmented control.

00:27:28.096 --> 00:27:29.356 A:middle
Segmented control also has a

00:27:29.356 --> 00:27:30.416 A:middle
convenience constructor.

00:27:30.766 --> 00:27:32.306 A:middle
And so, again with two lines of

00:27:32.306 --> 00:27:34.376 A:middle
code, my spacing for clarity, we

00:27:34.376 --> 00:27:35.416 A:middle
have a great looking control

00:27:35.416 --> 00:27:36.776 A:middle
that's ready for Touch Bar with

00:27:36.776 --> 00:27:39.656 A:middle
the right appearance and the

00:27:39.656 --> 00:27:39.916 A:middle
right font.

00:27:40.056 --> 00:27:41.636 A:middle
Next, let's talk about popovers.

00:27:42.386 --> 00:27:43.596 A:middle
Popover item is really cool

00:27:43.596 --> 00:27:44.756 A:middle
because it allows you to provide

00:27:44.806 --> 00:27:46.776 A:middle
extra content to your user, but

00:27:46.776 --> 00:27:49.166 A:middle
only when the user requests it.

00:27:49.606 --> 00:27:50.916 A:middle
Popovers have two parts.

00:27:51.496 --> 00:27:52.396 A:middle
The first is the class

00:27:52.396 --> 00:27:53.486 A:middle
representation, which is the

00:27:53.486 --> 00:27:55.066 A:middle
view presented to your user when

00:27:55.066 --> 00:27:56.226 A:middle
the popovers close.

00:27:56.806 --> 00:27:57.876 A:middle
And the second piece is the

00:27:57.876 --> 00:27:59.266 A:middle
popover's NSTouchBar, which

00:27:59.266 --> 00:28:00.166 A:middle
actually takes over the

00:28:00.166 --> 00:28:01.316 A:middle
application section when the

00:28:01.316 --> 00:28:02.276 A:middle
popover is open.

00:28:02.276 --> 00:28:03.646 A:middle
And this lets you use things

00:28:03.646 --> 00:28:03.856 A:middle
like the

00:28:03.856 --> 00:28:05.916 A:middle
principalItemIdentifier, or even

00:28:05.916 --> 00:28:07.076 A:middle
enabling customization.

00:28:08.386 --> 00:28:09.576 A:middle
Let's talk more about the class

00:28:09.576 --> 00:28:10.366 A:middle
representation.

00:28:11.826 --> 00:28:13.056 A:middle
AppKit will provide a default on

00:28:13.056 --> 00:28:14.816 A:middle
for you and you can customize

00:28:14.816 --> 00:28:15.946 A:middle
the way it looks by using the

00:28:15.946 --> 00:28:17.826 A:middle
class representation image, or

00:28:17.826 --> 00:28:18.806 A:middle
label properties.

00:28:19.116 --> 00:28:20.176 A:middle
And you can see an example of

00:28:20.176 --> 00:28:21.596 A:middle
this in the list in alignment

00:28:21.596 --> 00:28:22.766 A:middle
popovers and the formatting

00:28:22.766 --> 00:28:23.326 A:middle
controls.

00:28:23.976 --> 00:28:25.686 A:middle
You can also choose to use

00:28:25.686 --> 00:28:26.826 A:middle
something more custom.

00:28:27.206 --> 00:28:28.896 A:middle
Mail chooses to use a segmented

00:28:28.896 --> 00:28:29.406 A:middle
control.

00:28:29.406 --> 00:28:30.826 A:middle
And if you tap the main portion

00:28:30.826 --> 00:28:31.656 A:middle
of this control, it will

00:28:31.656 --> 00:28:33.516 A:middle
immediately move a message to

00:28:33.606 --> 00:28:35.696 A:middle
the suggest mailbox.

00:28:36.446 --> 00:28:37.546 A:middle
But if you tap the arrow, it

00:28:37.546 --> 00:28:38.556 A:middle
will show a popover with

00:28:38.556 --> 00:28:39.716 A:middle
additional suggestions.

00:28:40.336 --> 00:28:41.566 A:middle
This is actually really easy to

00:28:41.566 --> 00:28:43.756 A:middle
achieve by providing your own

00:28:43.756 --> 00:28:44.846 A:middle
view for the class

00:28:44.846 --> 00:28:46.536 A:middle
representation and then using

00:28:46.536 --> 00:28:47.746 A:middle
the show popover and dismiss

00:28:47.746 --> 00:28:48.856 A:middle
popover methods.

00:28:50.066 --> 00:28:51.446 A:middle
Popovers also have two

00:28:51.446 --> 00:28:52.406 A:middle
interaction models.

00:28:52.746 --> 00:28:53.826 A:middle
First is touch and show.

00:28:54.636 --> 00:28:55.896 A:middle
This happens when the user taps

00:28:55.936 --> 00:28:58.176 A:middle
the class representation.

00:28:58.476 --> 00:29:00.776 A:middle
The popover's opened and it's

00:29:00.776 --> 00:29:02.456 A:middle
sticky allowing you to make

00:29:02.766 --> 00:29:04.136 A:middle
multiple selections.

00:29:04.766 --> 00:29:05.956 A:middle
It's only closed when the user

00:29:05.956 --> 00:29:06.946 A:middle
taps the closed button.

00:29:07.776 --> 00:29:08.996 A:middle
The second interaction model is

00:29:08.996 --> 00:29:09.706 A:middle
press and hold.

00:29:10.046 --> 00:29:11.126 A:middle
And this happens when the user

00:29:11.126 --> 00:29:12.356 A:middle
presses and holds on the class

00:29:12.356 --> 00:29:13.136 A:middle
representation.

00:29:13.436 --> 00:29:14.826 A:middle
The popover's open directly by

00:29:14.826 --> 00:29:16.246 A:middle
the user's finger when possible

00:29:16.536 --> 00:29:17.736 A:middle
and immediately starts tracking

00:29:17.736 --> 00:29:18.286 A:middle
their input.

00:29:18.696 --> 00:29:19.816 A:middle
It's closed when the user lifts

00:29:19.816 --> 00:29:21.186 A:middle
their finger and a selection is

00:29:21.186 --> 00:29:21.596 A:middle
made.

00:29:21.906 --> 00:29:23.646 A:middle
But you'll notice that in these

00:29:23.646 --> 00:29:25.226 A:middle
two examples, the popovers

00:29:25.226 --> 00:29:26.006 A:middle
actually showed different

00:29:26.006 --> 00:29:26.476 A:middle
content.

00:29:27.316 --> 00:29:29.026 A:middle
Touch and show showed several

00:29:29.026 --> 00:29:30.256 A:middle
controls whereas press and hold

00:29:30.256 --> 00:29:31.656 A:middle
only showed a single segmented

00:29:31.656 --> 00:29:32.036 A:middle
control.

00:29:32.356 --> 00:29:33.196 A:middle
And that's because press and

00:29:33.196 --> 00:29:34.596 A:middle
hold is tracking the user's

00:29:34.596 --> 00:29:35.776 A:middle
finger the entire time.

00:29:36.076 --> 00:29:37.446 A:middle
And so, it's best to leave that

00:29:37.446 --> 00:29:39.216 A:middle
kind of interaction to a single

00:29:39.216 --> 00:29:39.736 A:middle
control.

00:29:39.916 --> 00:29:40.886 A:middle
In this case a segmented

00:29:40.886 --> 00:29:42.036 A:middle
control, or even something like

00:29:42.036 --> 00:29:42.886 A:middle
the slider item.

00:29:43.996 --> 00:29:46.286 A:middle
This is easy to achieve because

00:29:46.516 --> 00:29:47.566 A:middle
popovers actually have two

00:29:47.566 --> 00:29:49.176 A:middle
different NSTouchBar properties.

00:29:49.456 --> 00:29:50.546 A:middle
One for the touch and hold

00:29:50.546 --> 00:29:51.926 A:middle
popover and another for the

00:29:51.926 --> 00:29:52.616 A:middle
press and hold.

00:29:53.746 --> 00:29:55.786 A:middle
Press and hold, if you do not

00:29:55.786 --> 00:29:57.176 A:middle
provide an NSTouchBar for press

00:29:57.176 --> 00:29:58.346 A:middle
and hold, press and hold will

00:29:58.346 --> 00:29:58.976 A:middle
not be enabled.

00:29:59.636 --> 00:30:01.616 A:middle
It is possible to provide the

00:30:01.616 --> 00:30:03.146 A:middle
same NSTouchBar object for both

00:30:03.146 --> 00:30:03.986 A:middle
of these properties and that

00:30:03.986 --> 00:30:04.886 A:middle
will work just fine.

00:30:05.266 --> 00:30:06.366 A:middle
But as I mentioned press and

00:30:06.366 --> 00:30:08.226 A:middle
hold is best left reserved for

00:30:08.456 --> 00:30:10.146 A:middle
single things, single items like

00:30:10.146 --> 00:30:12.676 A:middle
a segmented control or a slider

00:30:12.676 --> 00:30:12.946 A:middle
item.

00:30:14.416 --> 00:30:15.826 A:middle
Speaking of the slider item,

00:30:15.826 --> 00:30:16.536 A:middle
let's talk about it.

00:30:17.246 --> 00:30:18.106 A:middle
Now, you might be thinking

00:30:18.106 --> 00:30:19.046 A:middle
what's the difference between a

00:30:19.046 --> 00:30:20.416 A:middle
slider item and a custom Touch

00:30:20.466 --> 00:30:21.986 A:middle
Bar item with an NSSlider as its

00:30:21.986 --> 00:30:22.296 A:middle
view.

00:30:22.866 --> 00:30:23.936 A:middle
Well, let me explain.

00:30:24.916 --> 00:30:25.946 A:middle
Sliders have a few different

00:30:25.946 --> 00:30:26.576 A:middle
parts.

00:30:26.676 --> 00:30:27.976 A:middle
First we have the slider itself.

00:30:28.506 --> 00:30:29.646 A:middle
Then, we have these new value

00:30:29.646 --> 00:30:30.996 A:middle
accessories, which are images

00:30:30.996 --> 00:30:32.176 A:middle
and are actually intractable.

00:30:32.176 --> 00:30:34.026 A:middle
You can tap on them to increment

00:30:34.026 --> 00:30:35.256 A:middle
or decrement the value of your

00:30:35.256 --> 00:30:35.756 A:middle
slider.

00:30:36.416 --> 00:30:37.386 A:middle
We also have a label.

00:30:38.276 --> 00:30:39.556 A:middle
This can make it extra clear to

00:30:39.556 --> 00:30:41.656 A:middle
your users what this slider is

00:30:41.656 --> 00:30:42.526 A:middle
actually controlling.

00:30:42.726 --> 00:30:43.696 A:middle
And it's really useful if you

00:30:43.696 --> 00:30:45.206 A:middle
have multiple sliders in your

00:30:45.586 --> 00:30:45.676 A:middle
UI.

00:30:46.196 --> 00:30:47.896 A:middle
As I mentioned these make really

00:30:47.896 --> 00:30:49.126 A:middle
great content for press and hold

00:30:49.126 --> 00:30:49.696 A:middle
popover.

00:30:49.976 --> 00:30:50.636 A:middle
And that's because the

00:30:50.636 --> 00:30:51.906 A:middle
immediately start tracking the

00:30:51.906 --> 00:30:53.416 A:middle
user's finger, even though the

00:30:53.416 --> 00:30:54.846 A:middle
touch is offset from the knob of

00:30:54.846 --> 00:30:55.426 A:middle
the slider.

00:30:55.906 --> 00:30:56.726 A:middle
That means the user can

00:30:56.726 --> 00:30:57.906 A:middle
immediately start interacting

00:30:57.906 --> 00:30:59.086 A:middle
with it and not go searching

00:30:59.086 --> 00:31:00.306 A:middle
around for the knob for

00:31:00.306 --> 00:31:01.346 A:middle
interacting with the slider.

00:31:01.886 --> 00:31:04.026 A:middle
Let's take a look at what this

00:31:04.026 --> 00:31:04.986 A:middle
actually looks like in code,

00:31:04.986 --> 00:31:05.166 A:middle
though.

00:31:05.926 --> 00:31:06.846 A:middle
First, we're going to create the

00:31:06.846 --> 00:31:07.616 A:middle
item itself.

00:31:07.796 --> 00:31:08.866 A:middle
We're going to provide a unique

00:31:08.866 --> 00:31:09.546 A:middle
identifier.

00:31:10.346 --> 00:31:11.366 A:middle
Next, we're going to assign it

00:31:11.366 --> 00:31:13.046 A:middle
minimum and maximum value

00:31:13.046 --> 00:31:14.056 A:middle
accessories and we're going to

00:31:14.056 --> 00:31:15.756 A:middle
use images that AppKit provides.

00:31:16.336 --> 00:31:17.166 A:middle
And lastly, we're going to

00:31:17.166 --> 00:31:18.476 A:middle
assign a label, because maybe we

00:31:18.476 --> 00:31:19.836 A:middle
want multiple sliders in our UI.

00:31:19.836 --> 00:31:21.966 A:middle
But you'll notice that the

00:31:21.966 --> 00:31:23.006 A:middle
slider is actually taking up the

00:31:23.006 --> 00:31:24.516 A:middle
entire application section.

00:31:24.516 --> 00:31:25.776 A:middle
Well, that's because sliders do

00:31:25.776 --> 00:31:27.166 A:middle
not have an intrinsic content

00:31:27.166 --> 00:31:27.476 A:middle
size.

00:31:27.526 --> 00:31:28.446 A:middle
They're happy to be whatever

00:31:28.446 --> 00:31:29.786 A:middle
size is available in the

00:31:29.786 --> 00:31:30.786 A:middle
application section.

00:31:31.546 --> 00:31:33.416 A:middle
You can change this by adding a

00:31:33.416 --> 00:31:34.966 A:middle
constraint to the slider and

00:31:34.966 --> 00:31:36.606 A:middle
AppKit will check that and

00:31:36.606 --> 00:31:38.316 A:middle
automatically remeasure and

00:31:38.316 --> 00:31:39.226 A:middle
resize the item.

00:31:39.586 --> 00:31:40.546 A:middle
But notice that we're doing this

00:31:40.546 --> 00:31:42.036 A:middle
on the slider itself, and not

00:31:42.036 --> 00:31:43.866 A:middle
the slider items view and that's

00:31:43.866 --> 00:31:45.086 A:middle
because we have a label here.

00:31:45.416 --> 00:31:47.096 A:middle
And if we change localizations

00:31:47.226 --> 00:31:48.186 A:middle
the length of this string will

00:31:48.186 --> 00:31:49.996 A:middle
also change and we don't want to

00:31:50.526 --> 00:31:51.676 A:middle
cause clipping.

00:31:52.396 --> 00:31:53.326 A:middle
Next, let's talk about group

00:31:53.326 --> 00:31:54.006 A:middle
Touch Bar item.

00:31:54.726 --> 00:31:56.086 A:middle
Group item is neat because it

00:31:56.086 --> 00:31:57.286 A:middle
allows you to group multiple

00:31:57.286 --> 00:31:58.706 A:middle
Touch Bar items into a single

00:31:58.706 --> 00:32:00.176 A:middle
NSTouchBarItem instance.

00:32:00.576 --> 00:32:01.686 A:middle
This is because it's similar to

00:32:01.686 --> 00:32:03.216 A:middle
popovers in that it offers its

00:32:03.346 --> 00:32:04.696 A:middle
NSTouchBar property.

00:32:05.426 --> 00:32:06.386 A:middle
An example of this is the

00:32:06.386 --> 00:32:07.686 A:middle
formatting controls above me.

00:32:08.036 --> 00:32:08.966 A:middle
These have actually been grouped

00:32:08.966 --> 00:32:10.886 A:middle
into a single NSTouchBarItem.

00:32:11.426 --> 00:32:12.736 A:middle
There are several reasons you

00:32:12.736 --> 00:32:13.976 A:middle
might want to do this, and we'll

00:32:13.976 --> 00:32:14.966 A:middle
talk about each of these.

00:32:15.766 --> 00:32:17.286 A:middle
When centering multiple items,

00:32:17.586 --> 00:32:18.446 A:middle
there's some tricks you can play

00:32:18.446 --> 00:32:19.826 A:middle
with customization as well as

00:32:19.826 --> 00:32:21.296 A:middle
localization purposes.

00:32:22.236 --> 00:32:23.266 A:middle
If you remember a few minutes

00:32:23.266 --> 00:32:24.176 A:middle
ago, when Chris was talking

00:32:24.176 --> 00:32:24.436 A:middle
about the

00:32:24.436 --> 00:32:26.236 A:middle
principalItemIdentifier, you'll

00:32:26.236 --> 00:32:27.566 A:middle
recall that a single item

00:32:27.566 --> 00:32:28.866 A:middle
identifier is actually provided

00:32:28.866 --> 00:32:29.576 A:middle
as principal.

00:32:29.576 --> 00:32:32.276 A:middle
But what happens if you want to

00:32:32.276 --> 00:32:34.146 A:middle
center multiple items together

00:32:34.146 --> 00:32:35.336 A:middle
like FaceTime is doing here.

00:32:36.026 --> 00:32:37.396 A:middle
Well, you can group these items

00:32:37.476 --> 00:32:39.006 A:middle
to a single group Touch Bar item

00:32:39.006 --> 00:32:40.426 A:middle
and then provide that item's

00:32:40.426 --> 00:32:42.126 A:middle
identifier as the principal item

00:32:42.126 --> 00:32:42.746 A:middle
identifier.

00:32:43.026 --> 00:32:45.776 A:middle
You can also play some cool

00:32:45.776 --> 00:32:47.266 A:middle
tricks with the customization.

00:32:47.516 --> 00:32:48.886 A:middle
If you have a non-customizable

00:32:48.886 --> 00:32:50.506 A:middle
group like we do here, you'll

00:32:50.506 --> 00:32:51.766 A:middle
notice that these items are

00:32:51.766 --> 00:32:52.766 A:middle
actually grouped together.

00:32:53.116 --> 00:32:54.666 A:middle
That means when the user drags

00:32:54.666 --> 00:32:56.536 A:middle
these things into, these buttons

00:32:56.536 --> 00:32:58.156 A:middle
into the Touch Bar, all three of

00:32:58.156 --> 00:32:59.126 A:middle
these will come together.

00:32:59.856 --> 00:33:00.936 A:middle
There's also a single

00:33:00.936 --> 00:33:02.516 A:middle
customization label describing

00:33:02.516 --> 00:33:04.046 A:middle
these controls as the playback

00:33:04.456 --> 00:33:05.776 A:middle
controls.

00:33:06.986 --> 00:33:08.696 A:middle
If you do choose to enable

00:33:08.696 --> 00:33:09.936 A:middle
customization on your groups,

00:33:09.936 --> 00:33:11.276 A:middle
you get some cool behavior there

00:33:11.276 --> 00:33:11.726 A:middle
as well.

00:33:12.296 --> 00:33:13.606 A:middle
In this example, we have two

00:33:13.606 --> 00:33:14.716 A:middle
group Touch Bar items.

00:33:15.136 --> 00:33:16.456 A:middle
Both of them have customization

00:33:16.456 --> 00:33:16.926 A:middle
enabled.

00:33:17.376 --> 00:33:18.906 A:middle
One contains a group of animals

00:33:18.906 --> 00:33:19.726 A:middle
that you might find in the

00:33:19.726 --> 00:33:21.066 A:middle
ocean, and another on a farm.

00:33:22.096 --> 00:33:23.406 A:middle
If I start customizing this,

00:33:23.406 --> 00:33:24.706 A:middle
you'll notice that I'm free to

00:33:24.706 --> 00:33:26.146 A:middle
re-order these items however I

00:33:26.146 --> 00:33:27.426 A:middle
choose within their groups.

00:33:28.656 --> 00:33:30.666 A:middle
If I try, however, to grab one

00:33:30.806 --> 00:33:32.846 A:middle
of the ocean animals and put it

00:33:32.846 --> 00:33:34.496 A:middle
into the farm animals group, it

00:33:34.496 --> 00:33:35.716 A:middle
snaps back to where it was.

00:33:35.896 --> 00:33:36.996 A:middle
Because that would be removing

00:33:36.996 --> 00:33:38.186 A:middle
the item from its group and

00:33:38.186 --> 00:33:39.076 A:middle
that's not supported.

00:33:41.926 --> 00:33:43.176 A:middle
GroupTouchBarItem also has

00:33:43.176 --> 00:33:44.256 A:middle
really cool purposes for

00:33:44.256 --> 00:33:45.096 A:middle
localization.

00:33:45.526 --> 00:33:46.776 A:middle
Now, I'm sure your applications

00:33:46.776 --> 00:33:47.976 A:middle
reach lots of users.

00:33:47.976 --> 00:33:49.176 A:middle
Some of those users might be

00:33:49.176 --> 00:33:51.246 A:middle
native right to left speakers of

00:33:51.246 --> 00:33:52.866 A:middle
languages like Hebrew or Arabic.

00:33:53.396 --> 00:33:54.686 A:middle
And I'm sure your applications

00:33:54.686 --> 00:33:55.826 A:middle
are already flipping were

00:33:55.826 --> 00:33:57.106 A:middle
appropriate for those users.

00:33:57.326 --> 00:33:58.556 A:middle
And we want Touch Bar to reflect

00:33:58.556 --> 00:33:59.126 A:middle
that as well.

00:34:00.116 --> 00:34:01.376 A:middle
A good example of this is

00:34:01.376 --> 00:34:02.206 A:middle
FaceTime's UI.

00:34:02.356 --> 00:34:04.236 A:middle
FaceTime chooses to show a full

00:34:04.236 --> 00:34:06.466 A:middle
screen and a mute button both on

00:34:06.466 --> 00:34:07.436 A:middle
the screen as well as within

00:34:07.436 --> 00:34:07.966 A:middle
Touch Bar.

00:34:08.256 --> 00:34:09.376 A:middle
And you'll notice that the order

00:34:09.376 --> 00:34:10.326 A:middle
of these buttons match.

00:34:11.146 --> 00:34:12.336 A:middle
If I go ahead and change the

00:34:12.336 --> 00:34:14.456 A:middle
language to Arabic, you'll

00:34:14.456 --> 00:34:15.596 A:middle
notice that the on-screen

00:34:15.826 --> 00:34:17.366 A:middle
buttons will actually reverse

00:34:17.366 --> 00:34:17.816 A:middle
their order.

00:34:18.106 --> 00:34:19.376 A:middle
And we do the same in Touch Bar

00:34:19.376 --> 00:34:21.476 A:middle
to maintain that matching order.

00:34:22.536 --> 00:34:23.626 A:middle
But it's important to note that

00:34:23.626 --> 00:34:25.216 A:middle
not everything actually flips.

00:34:25.276 --> 00:34:26.326 A:middle
The escape key and the control

00:34:26.326 --> 00:34:27.666 A:middle
strip stay where they're at

00:34:27.666 --> 00:34:28.546 A:middle
whether it's left to right or

00:34:28.546 --> 00:34:29.086 A:middle
right to left.

00:34:29.566 --> 00:34:30.876 A:middle
And only specific groups of

00:34:30.876 --> 00:34:32.796 A:middle
items should possibly flip.

00:34:32.916 --> 00:34:34.596 A:middle
Such as the center controls

00:34:34.596 --> 00:34:35.596 A:middle
here, which we're flipping to

00:34:35.596 --> 00:34:36.706 A:middle
match on-screen UI.

00:34:37.116 --> 00:34:38.396 A:middle
As well as the image and label

00:34:38.396 --> 00:34:39.456 A:middle
about the incoming call are

00:34:39.456 --> 00:34:39.846 A:middle
flipped.

00:34:40.306 --> 00:34:41.566 A:middle
But the position of that item

00:34:41.566 --> 00:34:42.616 A:middle
did not move to the opposite

00:34:42.616 --> 00:34:43.396 A:middle
side of the Touch Bar.

00:34:44.506 --> 00:34:46.276 A:middle
This is easy to achieve using

00:34:46.276 --> 00:34:47.876 A:middle
GroupTouchBarItem's new group

00:34:47.876 --> 00:34:49.216 A:middle
user interface layout direction

00:34:49.216 --> 00:34:50.536 A:middle
property in 10.13.

00:34:50.976 --> 00:34:51.906 A:middle
You can simply set this to

00:34:51.906 --> 00:34:53.526 A:middle
reflect NSAppuserInterface

00:34:53.526 --> 00:34:54.246 A:middle
LayoutDirection.

00:34:55.806 --> 00:34:56.676 A:middle
Now, I'm sure you're aware

00:34:56.676 --> 00:34:57.936 A:middle
languages aren't just left to

00:34:57.936 --> 00:34:58.846 A:middle
right or right to left, they

00:34:58.846 --> 00:34:59.816 A:middle
also have variable length

00:34:59.816 --> 00:35:00.356 A:middle
strings.

00:35:00.356 --> 00:35:01.396 A:middle
And it's important to remember

00:35:01.396 --> 00:35:02.776 A:middle
that when you're designing your

00:35:02.776 --> 00:35:02.866 A:middle
UI.

00:35:03.646 --> 00:35:04.786 A:middle
In this example, I have a list

00:35:04.786 --> 00:35:05.806 A:middle
of some of my favorite ocean

00:35:05.806 --> 00:35:06.256 A:middle
animals.

00:35:06.626 --> 00:35:08.406 A:middle
And I ran this exact same app in

00:35:08.406 --> 00:35:09.576 A:middle
both English and in German.

00:35:10.186 --> 00:35:11.716 A:middle
In English I was able to fit 6

00:35:11.716 --> 00:35:12.246 A:middle
items here.

00:35:12.246 --> 00:35:13.756 A:middle
But in German I only have 5.

00:35:14.236 --> 00:35:15.366 A:middle
That's because the shark item

00:35:15.366 --> 00:35:16.636 A:middle
actually didn't have enough room

00:35:16.636 --> 00:35:17.926 A:middle
to fit in Touch Bar and so it

00:35:17.926 --> 00:35:18.986 A:middle
was hidden from the user.

00:35:19.316 --> 00:35:20.486 A:middle
Which is really unfortunate for

00:35:20.486 --> 00:35:21.346 A:middle
our German friends.

00:35:22.186 --> 00:35:23.946 A:middle
Now, you might be tempted to fix

00:35:23.946 --> 00:35:25.176 A:middle
this using constraints, tying

00:35:25.176 --> 00:35:26.426 A:middle
each button to be a specific

00:35:26.426 --> 00:35:26.726 A:middle
width.

00:35:26.726 --> 00:35:28.126 A:middle
But that's actually not a great

00:35:28.126 --> 00:35:29.766 A:middle
solution because as we change

00:35:29.766 --> 00:35:31.716 A:middle
localizations, we're almost

00:35:31.716 --> 00:35:32.566 A:middle
certainly going to cause

00:35:32.566 --> 00:35:33.556 A:middle
clipping in one of them.

00:35:34.516 --> 00:35:35.876 A:middle
Now, GroupTouchBarItem actually

00:35:35.876 --> 00:35:36.936 A:middle
has a great way of handling this

00:35:36.936 --> 00:35:38.276 A:middle
for you automatically starting

00:35:38.276 --> 00:35:39.086 A:middle
in 10.13.

00:35:39.386 --> 00:35:40.456 A:middle
And I encourage you to check out

00:35:40.456 --> 00:35:41.546 A:middle
the "Advanced Touch Bar Talk"

00:35:41.546 --> 00:35:43.116 A:middle
later today which will do a dive

00:35:43.116 --> 00:35:44.446 A:middle
into exactly what happens.

00:35:46.126 --> 00:35:48.096 A:middle
Now, we have a few bonus topics.

00:35:48.096 --> 00:35:49.056 A:middle
These are all covered great in

00:35:49.056 --> 00:35:50.416 A:middle
documentation, but we'll mention

00:35:50.416 --> 00:35:51.146 A:middle
them briefly now.

00:35:51.606 --> 00:35:52.716 A:middle
First is the

00:35:52.716 --> 00:35:54.006 A:middle
ColorPickerTouchBarItem.

00:35:54.476 --> 00:35:55.896 A:middle
This allows users to interact

00:35:55.896 --> 00:35:56.826 A:middle
with the color picker right

00:35:56.826 --> 00:35:57.486 A:middle
through Touch Bar.

00:35:57.916 --> 00:35:59.016 A:middle
They can choose the exact color

00:35:59.016 --> 00:35:59.636 A:middle
that they want.

00:35:59.996 --> 00:36:00.946 A:middle
They can even change color

00:36:00.946 --> 00:36:02.416 A:middle
models and your document can

00:36:02.416 --> 00:36:03.756 A:middle
restrict which color models are

00:36:03.756 --> 00:36:04.346 A:middle
supported.

00:36:04.986 --> 00:36:06.366 A:middle
Users also have access to their

00:36:06.366 --> 00:36:07.296 A:middle
favorite color swatches.

00:36:07.296 --> 00:36:07.956 A:middle
So, it's a really great

00:36:07.956 --> 00:36:08.666 A:middle
experience.

00:36:10.036 --> 00:36:10.816 A:middle
We also have a

00:36:10.816 --> 00:36:11.846 A:middle
SharingServicePicker.

00:36:12.306 --> 00:36:13.646 A:middle
This lets you easily share a

00:36:13.646 --> 00:36:15.426 A:middle
document through mail, messages,

00:36:15.426 --> 00:36:16.856 A:middle
air drop, or even third-party

00:36:16.856 --> 00:36:17.726 A:middle
insurance services.

00:36:17.726 --> 00:36:18.566 A:middle
And these are all the same

00:36:18.566 --> 00:36:20.096 A:middle
services available through the

00:36:20.096 --> 00:36:20.676 A:middle
share sheet.

00:36:22.066 --> 00:36:22.856 A:middle
And finally, we have an

00:36:22.896 --> 00:36:24.066 A:middle
NSScrubber, which is actually a

00:36:24.066 --> 00:36:25.156 A:middle
view, not an item.

00:36:25.186 --> 00:36:26.146 A:middle
This could be the view of a

00:36:26.146 --> 00:36:26.886 A:middle
Touch Bar item.

00:36:27.536 --> 00:36:28.256 A:middle
And you can see in an

00:36:28.256 --> 00:36:29.746 A:middle
application such as calendar's

00:36:30.076 --> 00:36:32.236 A:middle
timeline, Safari's tabs or even

00:36:32.236 --> 00:36:33.546 A:middle
the color swatches of the color

00:36:33.546 --> 00:36:34.416 A:middle
picker that we just talked

00:36:34.416 --> 00:36:34.676 A:middle
about.

00:36:35.506 --> 00:36:36.836 A:middle
It's a very versatile, very

00:36:36.836 --> 00:36:37.746 A:middle
fluid control.

00:36:37.746 --> 00:36:39.296 A:middle
And it was designed specifically

00:36:39.296 --> 00:36:40.086 A:middle
for Touch Bar.

00:36:40.426 --> 00:36:41.836 A:middle
You can find out more about this

00:36:41.836 --> 00:36:42.926 A:middle
at the advanced talk, which will

00:36:42.926 --> 00:36:44.856 A:middle
do a deep dive on exactly how to

00:36:44.856 --> 00:36:45.626 A:middle
use this control.

00:36:47.286 --> 00:36:48.616 A:middle
Now, we've covered a ton of

00:36:48.616 --> 00:36:49.436 A:middle
material today.

00:36:49.766 --> 00:36:51.106 A:middle
We talked about the NSTouchBar

00:36:51.106 --> 00:36:52.726 A:middle
API, how it's tied to the

00:36:52.726 --> 00:36:54.486 A:middle
responder chain, how you can use

00:36:54.486 --> 00:36:55.886 A:middle
it to provide context-sensitive

00:36:55.886 --> 00:36:57.136 A:middle
controls for your users.

00:36:57.376 --> 00:36:58.106 A:middle
We've talked about the

00:36:58.106 --> 00:36:59.696 A:middle
NSTouchBarItem and all of its

00:36:59.696 --> 00:37:01.036 A:middle
subclasses that AppKit provides

00:37:01.036 --> 00:37:02.386 A:middle
and their unique functionality.

00:37:02.566 --> 00:37:04.096 A:middle
So, you now know enough to go

00:37:04.096 --> 00:37:04.986 A:middle
adopt Touch Bar in your

00:37:04.986 --> 00:37:06.096 A:middle
applications today.

00:37:06.826 --> 00:37:08.036 A:middle
While you're there, you should

00:37:08.036 --> 00:37:08.976 A:middle
definitely enable user

00:37:08.976 --> 00:37:10.426 A:middle
customization so that users can

00:37:10.426 --> 00:37:11.886 A:middle
get the exact experience that

00:37:11.886 --> 00:37:12.646 A:middle
they're looking for.

00:37:12.646 --> 00:37:14.056 A:middle
And definitely remember to

00:37:14.056 --> 00:37:15.806 A:middle
design you UI with localization

00:37:15.806 --> 00:37:17.646 A:middle
in mind so that all users have a

00:37:17.646 --> 00:37:18.536 A:middle
great experience.

00:37:19.106 --> 00:37:20.576 A:middle
For more information, you can

00:37:20.576 --> 00:37:21.776 A:middle
check out our developer website.

00:37:21.776 --> 00:37:24.276 A:middle
We have some related sessions

00:37:24.276 --> 00:37:25.216 A:middle
you might be interested in.

00:37:25.626 --> 00:37:26.556 A:middle
"Choosing the Right Cocoa

00:37:26.556 --> 00:37:27.776 A:middle
Container View" will look at

00:37:28.026 --> 00:37:28.966 A:middle
when you might want to choose a

00:37:28.966 --> 00:37:30.586 A:middle
grid view over a stack view.

00:37:30.586 --> 00:37:31.866 A:middle
And this could be important

00:37:31.866 --> 00:37:32.806 A:middle
because you could use one of

00:37:32.806 --> 00:37:34.356 A:middle
these container views as the

00:37:34.356 --> 00:37:36.366 A:middle
content view of a TouchBarItem.

00:37:37.196 --> 00:37:38.366 A:middle
We also have the "Advanced Touch

00:37:38.366 --> 00:37:39.406 A:middle
Bar Talk" which we mentioned

00:37:39.406 --> 00:37:40.916 A:middle
several times, which will do a

00:37:40.916 --> 00:37:42.396 A:middle
dive into extra functionality of

00:37:42.436 --> 00:37:42.886 A:middle
Touch Bar.

00:37:43.186 --> 00:37:44.356 A:middle
Thank you all so much for

00:37:44.356 --> 00:37:45.016 A:middle
joining us today.

00:37:45.016 --> 00:37:45.846 A:middle
Enjoy the rest of your

00:37:45.846 --> 00:37:46.346 A:middle
conference

00:37:47.016 --> 00:37:48.398 A:middle
[ Applause ]

00:37:48.398 --> 00:37:49.780 A:middle
.