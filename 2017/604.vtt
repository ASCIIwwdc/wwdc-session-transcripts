WEBVTT

00:00:27.686 --> 00:00:29.246 A:middle
&gt;&gt; Good morning, everyone, and

00:00:29.246 --> 00:00:30.806 A:middle
welcome to the SceneKit, What's

00:00:30.806 --> 00:00:31.586 A:middle
New session.

00:00:31.896 --> 00:00:34.456 A:middle
As you already know, SceneKit is

00:00:34.456 --> 00:00:36.736 A:middle
Apple's high-level API for 3D.

00:00:37.006 --> 00:00:38.816 A:middle
It's built on top of Metal and

00:00:38.816 --> 00:00:40.506 A:middle
it's available on all our

00:00:40.506 --> 00:00:41.056 A:middle
platforms.

00:00:41.746 --> 00:00:43.686 A:middle
This session will be about the

00:00:43.686 --> 00:00:45.436 A:middle
new feature we are adding to

00:00:45.436 --> 00:00:45.996 A:middle
SceneKit.

00:00:46.676 --> 00:00:48.006 A:middle
We will not cover the basics

00:00:48.006 --> 00:00:49.556 A:middle
today, so if you are new to

00:00:49.556 --> 00:00:50.656 A:middle
SceneKit, I encourage you to

00:00:50.656 --> 00:00:52.346 A:middle
watch our previous presentations

00:00:52.666 --> 00:00:53.496 A:middle
from the past years.

00:00:55.316 --> 00:00:56.866 A:middle
So here's our agenda for today.

00:00:57.876 --> 00:01:00.516 A:middle
I will first present some camera

00:01:00.516 --> 00:01:03.366 A:middle
improvements that includes some

00:01:03.366 --> 00:01:04.976 A:middle
new camera effects and some new

00:01:04.976 --> 00:01:07.376 A:middle
APIs to simplify the control of

00:01:07.996 --> 00:01:08.706 A:middle
cameras.

00:01:08.706 --> 00:01:10.056 A:middle
Then, Amaury will come on stage

00:01:10.056 --> 00:01:11.416 A:middle
and talk about tessellation and

00:01:11.416 --> 00:01:13.726 A:middle
subdivision, some improvements

00:01:13.726 --> 00:01:15.506 A:middle
and new APIs on the animation

00:01:15.506 --> 00:01:18.376 A:middle
front, and to finish, we'll

00:01:18.376 --> 00:01:20.106 A:middle
present some new developer tools

00:01:20.516 --> 00:01:22.416 A:middle
and talk about some related

00:01:22.416 --> 00:01:24.586 A:middle
technologies, including ARKit.

00:01:26.016 --> 00:01:27.596 A:middle
Now, to start, I would like to

00:01:27.596 --> 00:01:29.656 A:middle
show you a little demo that

00:01:29.656 --> 00:01:31.346 A:middle
illustrates some of the new API

00:01:31.346 --> 00:01:33.876 A:middle
I'm going to detail later during

00:01:33.876 --> 00:01:34.616 A:middle
the session.

00:01:40.886 --> 00:01:42.636 A:middle
So this demo is a simple game

00:01:42.636 --> 00:01:44.436 A:middle
example with a character that I

00:01:44.436 --> 00:01:45.816 A:middle
can manipulate with a virtual

00:01:45.816 --> 00:01:46.286 A:middle
D-pad.

00:01:46.866 --> 00:01:49.966 A:middle
I can attack, jump, and we are

00:01:49.966 --> 00:01:51.236 A:middle
on the camera with the virtual

00:01:51.236 --> 00:01:51.676 A:middle
D-pad.

00:01:52.056 --> 00:01:54.076 A:middle
And the first thing I would like

00:01:54.076 --> 00:01:56.086 A:middle
to highlight in the demo is the

00:01:56.086 --> 00:01:57.346 A:middle
behavior of the camera.

00:01:57.996 --> 00:01:59.916 A:middle
As you can see, the camera

00:01:59.916 --> 00:02:01.426 A:middle
follows the character smoothly.

00:02:01.426 --> 00:02:03.766 A:middle
And by smoothly, I mean it

00:02:03.986 --> 00:02:05.656 A:middle
doesn't strictly reproduce the

00:02:05.656 --> 00:02:07.546 A:middle
movement of the character, but

00:02:07.546 --> 00:02:09.146 A:middle
it tries to keep a constant

00:02:09.146 --> 00:02:11.206 A:middle
distance an elevation with the

00:02:11.206 --> 00:02:13.926 A:middle
character, but always move with

00:02:13.926 --> 00:02:15.346 A:middle
a smooth acceleration and

00:02:15.346 --> 00:02:16.136 A:middle
deceleration.

00:02:17.046 --> 00:02:18.326 A:middle
And you will see that the

00:02:18.326 --> 00:02:19.506 A:middle
behavior of the camera will

00:02:19.506 --> 00:02:20.936 A:middle
adapt, depending on the

00:02:20.936 --> 00:02:22.256 A:middle
different zones of the game.

00:02:22.336 --> 00:02:25.116 A:middle
For example, here as I approach

00:02:25.116 --> 00:02:27.326 A:middle
this fight area, the camera

00:02:27.536 --> 00:02:29.016 A:middle
moved down a little bit and

00:02:29.016 --> 00:02:30.656 A:middle
adjust the depth of field to

00:02:30.656 --> 00:02:32.116 A:middle
focus on the character and the

00:02:32.116 --> 00:02:32.796 A:middle
enemies.

00:02:34.416 --> 00:02:35.646 A:middle
Speaking of enemies, we have two

00:02:35.646 --> 00:02:37.036 A:middle
enemies here with very basic

00:02:37.036 --> 00:02:37.646 A:middle
behavior.

00:02:38.436 --> 00:02:39.806 A:middle
One is chasing me while the

00:02:39.806 --> 00:02:41.466 A:middle
other is moving away, and I will

00:02:41.466 --> 00:02:42.876 A:middle
explain briefly how this was

00:02:42.876 --> 00:02:44.536 A:middle
implemented using GameplayKit.

00:02:44.536 --> 00:02:46.706 A:middle
For now, let's just kill them,

00:02:49.336 --> 00:02:51.376 A:middle
and the other one.

00:02:52.806 --> 00:02:54.696 A:middle
And collect that gem here.

00:02:55.846 --> 00:02:57.296 A:middle
Here the camera smoothly

00:02:57.296 --> 00:02:58.616 A:middle
transitioned to a cinematic view

00:02:59.546 --> 00:03:01.046 A:middle
with a strong depth of field to

00:03:01.106 --> 00:03:02.246 A:middle
emphasize the key, and you can

00:03:02.246 --> 00:03:03.446 A:middle
notice also some nice

00:03:03.446 --> 00:03:04.216 A:middle
bokeh in the background.

00:03:05.326 --> 00:03:08.506 A:middle
So let's collect that key.

00:03:08.506 --> 00:03:09.656 A:middle
And as I get close to this new

00:03:09.656 --> 00:03:11.006 A:middle
zone here, where I have to

00:03:11.006 --> 00:03:13.306 A:middle
carefully jump on platforms, the

00:03:13.306 --> 00:03:15.146 A:middle
camera smoothly transitioned to

00:03:15.146 --> 00:03:16.836 A:middle
a new behavior where it now

00:03:16.836 --> 00:03:18.726 A:middle
stops rotating and stay aligned

00:03:19.096 --> 00:03:21.216 A:middle
with the platform.

00:03:21.216 --> 00:03:23.156 A:middle
To simplify my jumps to the

00:03:23.156 --> 00:03:25.646 A:middle
platforms, so let's jump.

00:03:25.866 --> 00:03:27.816 A:middle
That was intentional.

00:03:29.146 --> 00:03:32.026 A:middle
And let's collect the key.

00:03:32.966 --> 00:03:34.176 A:middle
Again, a new zone where the

00:03:34.176 --> 00:03:35.296 A:middle
camera will automatically

00:03:35.296 --> 00:03:37.706 A:middle
reorient itself and stay aligned

00:03:37.766 --> 00:03:38.686 A:middle
with the platform.

00:03:45.086 --> 00:03:46.116 A:middle
And it looks like there are some

00:03:46.196 --> 00:03:47.756 A:middle
friends to free here, and I have

00:03:47.756 --> 00:03:50.036 A:middle
the key, so let's do it.

00:03:52.096 --> 00:03:54.576 A:middle
And to finish, the new cinematic

00:03:54.576 --> 00:03:57.406 A:middle
view with many characters

00:03:57.406 --> 00:03:58.106 A:middle
running around.

00:03:58.526 --> 00:04:02.016 A:middle
And here we have 3200 bots to

00:04:02.016 --> 00:04:03.636 A:middle
animate, and we are going to

00:04:03.636 --> 00:04:04.416 A:middle
achieve that in half a millisecond on

00:04:04.456 --> 00:04:06.516 A:middle
this new iPad Pro.

00:04:06.556 --> 00:04:07.986 A:middle
So this is really fast.

00:04:08.076 --> 00:04:09.026 A:middle
We have been focusing on

00:04:09.026 --> 00:04:10.416 A:middle
character animation performance

00:04:10.506 --> 00:04:11.126 A:middle
in this release.

00:04:11.276 --> 00:04:13.066 A:middle
And implementing all this has

00:04:13.066 --> 00:04:14.776 A:middle
been much simpler with the new

00:04:14.776 --> 00:04:16.916 A:middle
APIs, with the new animation

00:04:16.916 --> 00:04:18.106 A:middle
APIs I will present later.

00:04:18.416 --> 00:04:20.176 A:middle
So that's all the demo.

00:04:21.516 --> 00:04:26.756 A:middle
[ Applause ]

00:04:27.256 --> 00:04:28.906 A:middle
Other ways we are really happy

00:04:28.906 --> 00:04:31.016 A:middle
to share this demo with you as a

00:04:31.066 --> 00:04:33.856 A:middle
sample code, and the sample code

00:04:33.856 --> 00:04:35.506 A:middle
runs on iOS, tvOS, and macOS,

00:04:35.506 --> 00:04:38.676 A:middle
and is available in Swift and

00:04:39.276 --> 00:04:40.766 A:middle
Objective-C.

00:04:41.786 --> 00:04:43.846 A:middle
During the demo, I insisted on

00:04:43.846 --> 00:04:45.566 A:middle
the camera behavior because this

00:04:45.566 --> 00:04:46.526 A:middle
is something that is really

00:04:46.526 --> 00:04:47.916 A:middle
difficult to write.

00:04:48.696 --> 00:04:50.586 A:middle
We are seeing many questions and

00:04:50.586 --> 00:04:51.856 A:middle
related requests on developer

00:04:51.856 --> 00:04:53.826 A:middle
forums about this, and so we

00:04:53.826 --> 00:04:55.836 A:middle
are, we improved our camera API

00:04:55.836 --> 00:04:59.236 A:middle
in this release to both simplify

00:04:59.236 --> 00:05:00.646 A:middle
this problem and also improve

00:05:00.646 --> 00:05:01.416 A:middle
the ongoing quality.

00:05:02.046 --> 00:05:05.656 A:middle
So to do this, we are

00:05:05.656 --> 00:05:07.136 A:middle
transitioning to a physically

00:05:07.136 --> 00:05:09.276 A:middle
based camera API, and we

00:05:09.276 --> 00:05:10.626 A:middle
leveraged this new API to

00:05:10.626 --> 00:05:11.646 A:middle
implement the physically

00:05:11.646 --> 00:05:12.886 A:middle
plausible depth of field.

00:05:13.266 --> 00:05:14.896 A:middle
We also improved the motion blur

00:05:14.896 --> 00:05:16.236 A:middle
and added built-in support

00:05:16.236 --> 00:05:17.246 A:middle
for screen space ambient

00:05:17.246 --> 00:05:17.836 A:middle
occlusion.

00:05:17.886 --> 00:05:20.226 A:middle
And I will then, I will talk

00:05:20.226 --> 00:05:21.876 A:middle
next about the new APIs, what I

00:05:21.876 --> 00:05:23.496 A:middle
did to simplify the control of

00:05:23.496 --> 00:05:23.996 A:middle
cameras.

00:05:24.776 --> 00:05:27.166 A:middle
So transitioning to physically

00:05:27.166 --> 00:05:29.196 A:middle
based API, camera API.

00:05:30.236 --> 00:05:31.946 A:middle
First, we are deprecating our

00:05:31.946 --> 00:05:34.656 A:middle
legacy projection model, so

00:05:34.656 --> 00:05:35.986 A:middle
will, of course, ensure the

00:05:35.986 --> 00:05:38.066 A:middle
backward compatibility, but be aware that

00:05:38.066 --> 00:05:39.196 A:middle
we are moving away from the x4

00:05:39.196 --> 00:05:42.486 A:middle
and y4 properties to adopt some

00:05:42.486 --> 00:05:43.526 A:middle
things that closer match real photo cameras.

00:05:43.526 --> 00:05:46.096 A:middle
For example, if you want to

00:05:46.096 --> 00:05:46.806 A:middle
configure your perspective projection

00:05:46.806 --> 00:05:49.626 A:middle
projection, you can now either

00:05:49.626 --> 00:05:52.046 A:middle
set the fieldOfView property or

00:05:52.046 --> 00:05:53.416 A:middle
configure the focalLength and

00:05:53.416 --> 00:05:54.146 A:middle
sensorHeight.

00:05:55.136 --> 00:05:55.996 A:middle
These properties are linked

00:05:55.996 --> 00:05:57.526 A:middle
together, so if you configure

00:05:57.526 --> 00:05:58.236 A:middle
the focalLength for instance,

00:05:58.236 --> 00:06:00.066 A:middle
it will update the fieldOfView

00:06:00.066 --> 00:06:01.366 A:middle
accordingly, and vice versa.

00:06:03.076 --> 00:06:04.646 A:middle
Then, SceneKit is modeling

00:06:04.826 --> 00:06:06.506 A:middle
a real photo camera depth of

00:06:06.506 --> 00:06:06.916 A:middle
field.

00:06:07.656 --> 00:06:08.636 A:middle
To achieve at the depth of

00:06:08.636 --> 00:06:10.576 A:middle
field, set the wantsDepthOfField

00:06:10.576 --> 00:06:11.986 A:middle
property to true, and then

00:06:11.986 --> 00:06:13.696 A:middle
configure it by setting the

00:06:13.696 --> 00:06:15.336 A:middle
focusDistance and fStop

00:06:15.336 --> 00:06:15.906 A:middle
properties.

00:06:16.796 --> 00:06:18.756 A:middle
SceneKit will approximate

00:06:18.756 --> 00:06:19.706 A:middle
real photo camera depth

00:06:19.706 --> 00:06:21.556 A:middle
of field, and it will blur the

00:06:21.556 --> 00:06:23.076 A:middle
scene in a way that is

00:06:23.076 --> 00:06:25.016 A:middle
consistent with these parameters

00:06:25.016 --> 00:06:26.216 A:middle
that come from the photography

00:06:26.216 --> 00:06:26.546 A:middle
world.

00:06:27.086 --> 00:06:31.136 A:middle
So new depth of field will also

00:06:31.136 --> 00:06:33.046 A:middle
simulate the bokeh you would get

00:06:33.046 --> 00:06:34.206 A:middle
with real photo cameras.

00:06:35.306 --> 00:06:37.646 A:middle
Bokeh appear on bright objects

00:06:37.646 --> 00:06:40.016 A:middle
that are out of focus, and

00:06:40.016 --> 00:06:42.016 A:middle
because they are generated by

00:06:42.016 --> 00:06:44.136 A:middle
pixels with very high intensity,

00:06:44.526 --> 00:06:46.036 A:middle
this feature works best if you

00:06:46.106 --> 00:06:47.556 A:middle
render your scene with an HDR

00:06:47.556 --> 00:06:47.946 A:middle
camera.

00:06:48.516 --> 00:06:49.816 A:middle
And to configure this, just set

00:06:49.816 --> 00:06:52.606 A:middle
wantsHDR property to true on

00:06:53.586 --> 00:06:54.636 A:middle
SCNCamera.

00:06:54.636 --> 00:06:56.126 A:middle
Then, the shape of the bokeh

00:06:56.126 --> 00:06:57.736 A:middle
depends on the number of blade

00:06:57.736 --> 00:06:58.676 A:middle
of the aperture.

00:06:58.746 --> 00:07:00.546 A:middle
And you can also configure that

00:07:00.546 --> 00:07:01.176 A:middle
on SCNCamera.

00:07:01.176 --> 00:07:03.726 A:middle
Here are a few examples with a

00:07:03.726 --> 00:07:05.266 A:middle
different value for this

00:07:07.396 --> 00:07:07.616 A:middle
property.

00:07:08.746 --> 00:07:10.716 A:middle
Then, we improved our motion

00:07:10.716 --> 00:07:11.666 A:middle
blur in this release.

00:07:11.666 --> 00:07:13.516 A:middle
We already presented a first

00:07:13.516 --> 00:07:15.226 A:middle
report of motion blur last year

00:07:15.586 --> 00:07:18.016 A:middle
that was able to blur the scene

00:07:18.266 --> 00:07:19.256 A:middle
based on the motion of the

00:07:19.256 --> 00:07:19.636 A:middle
camera.

00:07:19.966 --> 00:07:20.986 A:middle
That means that if your camera

00:07:20.986 --> 00:07:23.046 A:middle
was moving fast in a scene, you

00:07:23.046 --> 00:07:24.166 A:middle
would get the motion blur.

00:07:24.386 --> 00:07:25.876 A:middle
But if your camera was static

00:07:26.046 --> 00:07:26.966 A:middle
and the objects were moving

00:07:26.966 --> 00:07:27.976 A:middle
around, you would not get any

00:07:27.976 --> 00:07:28.476 A:middle
motion blur.

00:07:29.506 --> 00:07:30.646 A:middle
So in this release, we are

00:07:30.646 --> 00:07:32.486 A:middle
adding support for object motion

00:07:32.486 --> 00:07:34.916 A:middle
blur, and you get per-object

00:07:35.196 --> 00:07:37.126 A:middle
blur automatically when you

00:07:37.126 --> 00:07:39.096 A:middle
activate the motion blur on your

00:07:40.776 --> 00:07:41.016 A:middle
camera.

00:07:41.456 --> 00:07:42.866 A:middle
One more effect provided by

00:07:42.866 --> 00:07:44.066 A:middle
SCNCamera is now the

00:07:44.066 --> 00:07:44.996 A:middle
ambient occlusion.

00:07:45.586 --> 00:07:48.166 A:middle
The principle of ambient

00:07:48.166 --> 00:07:49.366 A:middle
occlusion is simple.

00:07:50.026 --> 00:07:52.086 A:middle
The idea is that a point on a

00:07:52.086 --> 00:07:54.306 A:middle
flat surface receives all the

00:07:54.306 --> 00:07:55.986 A:middle
environment incoming light,

00:07:57.226 --> 00:07:59.436 A:middle
whereas points in cavities will

00:07:59.436 --> 00:08:01.576 A:middle
just receive part of it because

00:08:01.846 --> 00:08:02.896 A:middle
some of this light will be

00:08:02.896 --> 00:08:04.056 A:middle
occluded by the surface.

00:08:05.676 --> 00:08:07.636 A:middle
Simply to put, screen space

00:08:07.636 --> 00:08:09.316 A:middle
ambient occlusion, which means

00:08:09.316 --> 00:08:11.306 A:middle
that this occlusion factor will

00:08:11.306 --> 00:08:13.506 A:middle
be computed in screen space for

00:08:13.506 --> 00:08:14.306 A:middle
every pixels.

00:08:15.416 --> 00:08:16.996 A:middle
This is done by analyzing the

00:08:16.996 --> 00:08:18.496 A:middle
depth buffer and normal buffer,

00:08:18.496 --> 00:08:20.766 A:middle
and SceneKit will determine if a

00:08:20.766 --> 00:08:22.786 A:middle
point is in a cavity or not by

00:08:22.786 --> 00:08:24.396 A:middle
comparing its depth and normal

00:08:24.396 --> 00:08:25.786 A:middle
with the neighbor fragments.

00:08:27.406 --> 00:08:28.896 A:middle
So here's an example of an

00:08:28.896 --> 00:08:30.396 A:middle
object with no ambient

00:08:30.396 --> 00:08:32.346 A:middle
occlusion, and here with a very

00:08:32.346 --> 00:08:33.956 A:middle
strong ambient occlusion to make

00:08:33.956 --> 00:08:35.116 A:middle
the effect of use on the slide.

00:08:37.096 --> 00:08:38.856 A:middle
To activate the screen space

00:08:38.856 --> 00:08:40.906 A:middle
ambient occlusion, just set the

00:08:40.906 --> 00:08:41.886 A:middle
screenSpaceAmbient

00:08:41.886 --> 00:08:43.536 A:middle
OcclusionIntensity to a value

00:08:43.536 --> 00:08:45.956 A:middle
greater than 0, and then you

00:08:45.956 --> 00:08:47.576 A:middle
have a few parameters you can

00:08:47.576 --> 00:08:49.796 A:middle
tune that will depend on the

00:08:49.796 --> 00:08:51.226 A:middle
look you want to achieve and on

00:08:51.226 --> 00:08:52.596 A:middle
the size and the topology of

00:08:52.646 --> 00:08:53.106 A:middle
your scene.

00:08:53.406 --> 00:08:55.136 A:middle
But let's see all these effects

00:08:55.136 --> 00:08:56.806 A:middle
live in a demo, and for this,

00:08:56.806 --> 00:08:58.076 A:middle
please welcome Anatole on stage.

00:08:59.266 --> 00:09:01.266 A:middle
[ Applause ]

00:09:01.516 --> 00:09:02.086 A:middle
&gt;&gt; Thank you, Thomas.

00:09:03.656 --> 00:09:04.516 A:middle
Good morning, everyone.

00:09:07.216 --> 00:09:08.856 A:middle
So let's come back to the first

00:09:08.856 --> 00:09:11.066 A:middle
demo and bring up some debug UI

00:09:11.066 --> 00:09:12.556 A:middle
to help me show you our new

00:09:12.556 --> 00:09:13.466 A:middle
depth of field effect.

00:09:15.306 --> 00:09:16.926 A:middle
Here we have -- sorry.

00:09:17.866 --> 00:09:21.656 A:middle
Here we have a beautiful

00:09:21.656 --> 00:09:22.196 A:middle
golden key in the foreground.

00:09:22.196 --> 00:09:23.986 A:middle
The focus distance is set to a

00:09:23.986 --> 00:09:25.606 A:middle
small distance because the key

00:09:25.656 --> 00:09:26.696 A:middle
is close to the camera.

00:09:26.896 --> 00:09:29.276 A:middle
And the effect number is set to

00:09:29.276 --> 00:09:30.926 A:middle
a small value because we want a

00:09:30.926 --> 00:09:31.436 A:middle
strong blur.

00:09:32.366 --> 00:09:33.976 A:middle
As you can see, nice work here

00:09:33.976 --> 00:09:35.506 A:middle
on the background due to the

00:09:35.506 --> 00:09:38.656 A:middle
illuminance of the particle.

00:09:39.326 --> 00:09:41.246 A:middle
Now, with the second camera, I

00:09:41.246 --> 00:09:42.726 A:middle
now have a far-focused distance.

00:09:43.316 --> 00:09:45.066 A:middle
So the objects in the background

00:09:45.066 --> 00:09:47.266 A:middle
are sharp and the flowers in the

00:09:47.266 --> 00:09:48.866 A:middle
foreground are blurred.

00:09:50.096 --> 00:09:51.986 A:middle
Yet another point of view, and

00:09:52.066 --> 00:09:53.726 A:middle
here I can, for example, play

00:09:53.726 --> 00:09:55.546 A:middle
with the FStop number to get

00:09:55.546 --> 00:09:57.716 A:middle
more or less blur.

00:09:57.716 --> 00:10:00.756 A:middle
And I can wait for the camera.

00:10:00.876 --> 00:10:02.636 A:middle
And then with the second slider,

00:10:02.636 --> 00:10:04.316 A:middle
we define where we want to focus

00:10:04.316 --> 00:10:04.926 A:middle
in this scene.

00:10:05.506 --> 00:10:08.646 A:middle
So this new depth of field

00:10:08.646 --> 00:10:10.486 A:middle
effect can be incredibly useful

00:10:10.486 --> 00:10:11.966 A:middle
for instance to produce

00:10:11.966 --> 00:10:14.966 A:middle
cinematic effect in video game.

00:10:15.186 --> 00:10:16.936 A:middle
Now, let's open another app to

00:10:16.936 --> 00:10:18.046 A:middle
show you of our new per

00:10:18.046 --> 00:10:19.016 A:middle
object motion blur.

00:10:20.666 --> 00:10:21.666 A:middle
Here we have a scene with a

00:10:21.666 --> 00:10:22.706 A:middle
tower of blocks.

00:10:23.506 --> 00:10:25.156 A:middle
If I press the Shoot button, I

00:10:25.236 --> 00:10:26.716 A:middle
throw some spheres on the tower.

00:10:27.236 --> 00:10:30.716 A:middle
And this is how it looks by

00:10:30.716 --> 00:10:32.456 A:middle
default without any motion blur.

00:10:33.726 --> 00:10:35.336 A:middle
Now, I reset the scene, enable

00:10:35.336 --> 00:10:37.086 A:middle
the Motion Blur, and toss

00:10:37.086 --> 00:10:37.376 A:middle
in some more spheres.

00:10:37.876 --> 00:10:42.436 A:middle
You can see the effect of the

00:10:42.436 --> 00:10:44.106 A:middle
motion blur on those spheres

00:10:44.106 --> 00:10:45.646 A:middle
because they move really fast.

00:10:46.406 --> 00:10:48.216 A:middle
And you can also see the effect

00:10:48.216 --> 00:10:49.696 A:middle
applied to the blocks when the

00:10:49.696 --> 00:10:50.466 A:middle
tower explodes.

00:10:51.386 --> 00:10:52.936 A:middle
But now, let's take a closer

00:10:53.546 --> 00:10:53.656 A:middle
look.

00:10:53.656 --> 00:10:55.426 A:middle
I can for that freeze the scene

00:10:55.426 --> 00:10:56.846 A:middle
and move closer a little bit.

00:10:57.916 --> 00:10:59.686 A:middle
Our brain interprets the blur's

00:10:59.686 --> 00:11:01.706 A:middle
movement, and you can actually

00:11:01.706 --> 00:11:03.806 A:middle
see the objects in motion

00:11:03.806 --> 00:11:04.306 A:middle
even if the image is static.

00:11:05.806 --> 00:11:07.056 A:middle
We can even change the point of

00:11:07.056 --> 00:11:08.366 A:middle
view, and we still have a good

00:11:08.366 --> 00:11:09.986 A:middle
idea of the direction of each

00:11:09.986 --> 00:11:10.256 A:middle
object.

00:11:10.986 --> 00:11:13.866 A:middle
So this really improves the

00:11:13.866 --> 00:11:15.626 A:middle
perception of motion in the

00:11:15.956 --> 00:11:17.476 A:middle
scene, and the result looks more

00:11:17.476 --> 00:11:17.906 A:middle
realistic.

00:11:18.486 --> 00:11:20.726 A:middle
And now, let's see the screen

00:11:20.726 --> 00:11:22.106 A:middle
space ambient occlusion in

00:11:22.106 --> 00:11:24.096 A:middle
demo.

00:11:24.096 --> 00:11:25.206 A:middle
You can see some spheres

00:11:25.206 --> 00:11:27.076 A:middle
illuminated by the sky and the

00:11:27.076 --> 00:11:27.776 A:middle
direction of light.

00:11:29.536 --> 00:11:31.026 A:middle
With the first slider, I can add

00:11:31.026 --> 00:11:32.386 A:middle
some ambient occlusion to the

00:11:32.386 --> 00:11:32.736 A:middle
scene.

00:11:33.956 --> 00:11:35.286 A:middle
As you can see, some ambient

00:11:35.286 --> 00:11:36.776 A:middle
shadow is added, and I can

00:11:36.776 --> 00:11:38.376 A:middle
change the intensity to give the

00:11:38.376 --> 00:11:39.736 A:middle
sphere more or less shadows.

00:11:41.536 --> 00:11:43.416 A:middle
The amount of occlusion depend

00:11:43.416 --> 00:11:44.836 A:middle
on the curvature of the surface.

00:11:45.816 --> 00:11:47.476 A:middle
To know if a pixel is in the

00:11:47.476 --> 00:11:49.216 A:middle
cavity or not, we inspect the

00:11:49.216 --> 00:11:50.136 A:middle
neighbor pixels.

00:11:50.886 --> 00:11:52.406 A:middle
And so we have this radius

00:11:52.456 --> 00:11:54.526 A:middle
parameter that let us define how

00:11:54.526 --> 00:11:55.696 A:middle
far we look from neighboring

00:11:55.696 --> 00:11:56.176 A:middle
pixels.

00:11:57.576 --> 00:11:59.386 A:middle
The visual result is sharper

00:11:59.386 --> 00:12:02.186 A:middle
occlusion with small radius and

00:12:02.186 --> 00:12:03.896 A:middle
more spread out shadows with

00:12:03.896 --> 00:12:04.666 A:middle
large radius.

00:12:05.076 --> 00:12:08.116 A:middle
This is computed in real time,

00:12:08.116 --> 00:12:09.586 A:middle
so it is perfect if you work

00:12:09.586 --> 00:12:11.056 A:middle
with dynamic objects when

00:12:11.056 --> 00:12:12.236 A:middle
pre-baked ambient occlusion

00:12:12.236 --> 00:12:13.146 A:middle
maps or [inaudible].

00:12:13.746 --> 00:12:16.576 A:middle
That adds some detail to the

00:12:16.576 --> 00:12:17.916 A:middle
perception of the deeps -- of

00:12:17.916 --> 00:12:19.876 A:middle
the depths, sorry -- and take a

00:12:19.876 --> 00:12:21.376 A:middle
look of global illumination to

00:12:21.506 --> 00:12:22.336 A:middle
your scene.

00:12:23.396 --> 00:12:24.206 A:middle
That's it for the demo.

00:12:24.206 --> 00:12:25.736 A:middle
Let's come back to the slide,

00:12:25.736 --> 00:12:27.296 A:middle
and I'll hand it back to Thomas.

00:12:28.516 --> 00:12:33.796 A:middle
[ Applause ]

00:12:34.296 --> 00:12:35.196 A:middle
Thank you, Anatole.

00:12:35.726 --> 00:12:37.216 A:middle
So we have talked about some new

00:12:37.216 --> 00:12:38.106 A:middle
camera effects.

00:12:38.336 --> 00:12:39.826 A:middle
Now, let's talk about camera

00:12:39.826 --> 00:12:40.426 A:middle
control.

00:12:41.156 --> 00:12:42.516 A:middle
I did say earlier this is a

00:12:42.516 --> 00:12:43.716 A:middle
difficult problem, and we see

00:12:43.716 --> 00:12:45.256 A:middle
many questions about it.

00:12:45.256 --> 00:12:47.626 A:middle
And we identified two

00:12:48.436 --> 00:12:50.706 A:middle
main use cases -- people will want

00:12:50.916 --> 00:12:52.446 A:middle
to inspect a 3D object by

00:12:52.446 --> 00:12:54.316 A:middle
rotating a 3D object or rotating

00:12:54.376 --> 00:12:55.496 A:middle
around the 3D object.

00:12:55.836 --> 00:12:57.746 A:middle
For example, developers who are

00:12:57.746 --> 00:12:59.596 A:middle
building a simple 3D viewer or

00:12:59.596 --> 00:13:03.826 A:middle
an editor and developers who

00:13:03.826 --> 00:13:05.236 A:middle
need a, some more sophisticated

00:13:05.236 --> 00:13:06.026 A:middle
camera behavior.

00:13:06.026 --> 00:13:08.156 A:middle
For example, for games or a more

00:13:08.156 --> 00:13:08.856 A:middle
advanced app.

00:13:09.626 --> 00:13:10.736 A:middle
So let's start with the first

00:13:10.736 --> 00:13:11.516 A:middle
use case for now.

00:13:12.826 --> 00:13:14.746 A:middle
Until now, if you wanted to

00:13:14.746 --> 00:13:17.336 A:middle
manipulate a 3D object, you had

00:13:17.336 --> 00:13:18.906 A:middle
to implement your own management

00:13:18.906 --> 00:13:21.116 A:middle
of events and move the camera

00:13:21.116 --> 00:13:23.096 A:middle
position and orientation based

00:13:23.096 --> 00:13:24.716 A:middle
on gestures or mouse events.

00:13:25.856 --> 00:13:27.146 A:middle
For convenience, we are

00:13:27.146 --> 00:13:28.926 A:middle
providing an allowCameraControl

00:13:28.926 --> 00:13:31.716 A:middle
API on SCNView, but these were

00:13:31.716 --> 00:13:33.096 A:middle
just providing you a default

00:13:33.096 --> 00:13:35.606 A:middle
camera behavior that was not

00:13:35.636 --> 00:13:37.366 A:middle
configurable and that was

00:13:37.366 --> 00:13:38.896 A:middle
essentially there for debugging

00:13:38.896 --> 00:13:39.476 A:middle
properties.

00:13:39.676 --> 00:13:42.406 A:middle
So in this new release, we are

00:13:42.406 --> 00:13:44.466 A:middle
introducing a new class named

00:13:44.466 --> 00:13:47.076 A:middle
SCNCameraController, and the

00:13:47.076 --> 00:13:48.946 A:middle
SCNCameraController allows you

00:13:48.946 --> 00:13:50.966 A:middle
to manipulate a camera with the

00:13:50.966 --> 00:13:52.706 A:middle
most common camera behavior you

00:13:52.706 --> 00:13:54.206 A:middle
would find in 3D software.

00:13:55.856 --> 00:13:57.516 A:middle
So the, this behavior had built

00:13:57.516 --> 00:13:59.116 A:middle
in in the camera controller, and

00:13:59.116 --> 00:14:00.936 A:middle
the SCNView has a built-in

00:14:00.936 --> 00:14:02.536 A:middle
default camera controller that

00:14:02.536 --> 00:14:04.626 A:middle
you can directly configure for

00:14:04.626 --> 00:14:05.986 A:middle
the need of your application.

00:14:06.986 --> 00:14:08.016 A:middle
Now, if you need something more

00:14:08.016 --> 00:14:09.746 A:middle
specific, you can still

00:14:09.746 --> 00:14:10.856 A:middle
instantiate your own

00:14:10.856 --> 00:14:12.476 A:middle
SCNCameraController and drive it

00:14:12.476 --> 00:14:15.396 A:middle
programmatically if you want.

00:14:15.896 --> 00:14:17.666 A:middle
So the SCNCameraController

00:14:17.666 --> 00:14:19.406 A:middle
provide out of the box most of

00:14:19.406 --> 00:14:21.166 A:middle
the common camera operation

00:14:21.166 --> 00:14:21.486 A:middle
tools.

00:14:22.326 --> 00:14:25.176 A:middle
And to give some examples, the

00:14:25.176 --> 00:14:27.316 A:middle
Orbit Turntable allows you to

00:14:27.316 --> 00:14:29.056 A:middle
orbit your camera around a 3D

00:14:29.056 --> 00:14:31.476 A:middle
object and will prevent roll.

00:14:31.616 --> 00:14:33.786 A:middle
That means that the horizon will

00:14:33.786 --> 00:14:35.846 A:middle
always remain level, regardless

00:14:35.846 --> 00:14:37.396 A:middle
of the rotations you are doing.

00:14:38.796 --> 00:14:41.656 A:middle
The Orbit Arcball will orbit the

00:14:41.656 --> 00:14:43.566 A:middle
camera using the vertical and

00:14:43.566 --> 00:14:45.716 A:middle
horizontal axes in screen space.

00:14:45.846 --> 00:14:47.626 A:middle
So this mode can be more

00:14:47.626 --> 00:14:49.376 A:middle
intuitive in some cases, but it

00:14:49.376 --> 00:14:51.656 A:middle
doesn't prevent roll, so it

00:14:51.656 --> 00:14:52.706 A:middle
really depends on your

00:14:52.706 --> 00:14:53.326 A:middle
application.

00:14:55.356 --> 00:14:58.066 A:middle
[inaudible] the Fly mode is more

00:14:58.066 --> 00:15:00.206 A:middle
suitable for lap scenes you want

00:15:00.206 --> 00:15:01.136 A:middle
to maybe get into.

00:15:01.626 --> 00:15:03.786 A:middle
And in that case, the center of

00:15:03.836 --> 00:15:05.466 A:middle
rotation of the camera is a

00:15:05.466 --> 00:15:07.366 A:middle
camera itself, which means that

00:15:07.476 --> 00:15:09.856 A:middle
you rotate the camera to look

00:15:09.856 --> 00:15:11.756 A:middle
around in a position to orbit

00:15:11.756 --> 00:15:12.696 A:middle
around an object.

00:15:14.576 --> 00:15:16.576 A:middle
So again, we believe that the

00:15:16.576 --> 00:15:18.136 A:middle
scene camera controller will

00:15:18.476 --> 00:15:19.836 A:middle
provide most of the common

00:15:19.836 --> 00:15:21.296 A:middle
camera operation tools.

00:15:21.296 --> 00:15:22.716 A:middle
And if you need something very

00:15:22.716 --> 00:15:24.146 A:middle
specific, you will be able, you

00:15:24.146 --> 00:15:25.676 A:middle
can still try your camera

00:15:25.676 --> 00:15:26.656 A:middle
controller and your camera

00:15:26.656 --> 00:15:27.356 A:middle
programmatically.

00:15:28.856 --> 00:15:29.896 A:middle
Now, let's see the second class

00:15:29.896 --> 00:15:30.496 A:middle
of programs.

00:15:30.996 --> 00:15:32.336 A:middle
Developing, we need a more

00:15:32.336 --> 00:15:33.786 A:middle
sophisticated camera behavior.

00:15:33.786 --> 00:15:34.816 A:middle
For example, for games.

00:15:35.806 --> 00:15:37.906 A:middle
And we address this problem by

00:15:37.976 --> 00:15:40.376 A:middle
chaining constraints to define a

00:15:40.376 --> 00:15:41.306 A:middle
camera behavior.

00:15:43.076 --> 00:15:45.976 A:middle
SceneKit was already providing a

00:15:45.976 --> 00:15:47.816 A:middle
bunch of built-in constraints,

00:15:47.996 --> 00:15:49.936 A:middle
and we're adding a few new this

00:15:49.936 --> 00:15:51.696 A:middle
year that will work on any

00:15:51.696 --> 00:15:53.956 A:middle
arbitrary node but work well in

00:15:53.956 --> 00:15:55.086 A:middle
particular for camera.

00:15:55.566 --> 00:15:57.836 A:middle
And to illustrate some of them,

00:15:57.836 --> 00:16:01.376 A:middle
the SCNDistanceConstraint forces

00:16:01.376 --> 00:16:02.716 A:middle
a node to keep a minimum and

00:16:02.716 --> 00:16:04.866 A:middle
maximum distance with another

00:16:04.866 --> 00:16:06.526 A:middle
specified target node.

00:16:07.836 --> 00:16:09.336 A:middle
So replicate our constraints.

00:16:09.336 --> 00:16:12.006 A:middle
We replicate a node position and

00:16:12.006 --> 00:16:14.246 A:middle
orientation with an optional

00:16:14.246 --> 00:16:14.756 A:middle
offset.

00:16:15.436 --> 00:16:18.216 A:middle
And the acceleration constraint

00:16:18.216 --> 00:16:20.146 A:middle
will ensure that the node won't

00:16:20.146 --> 00:16:22.316 A:middle
move or accelerate faster than a

00:16:22.316 --> 00:16:24.236 A:middle
given maximum velocity and

00:16:24.236 --> 00:16:25.056 A:middle
acceleration.

00:16:25.696 --> 00:16:27.296 A:middle
So these are just examples.

00:16:27.296 --> 00:16:28.576 A:middle
Let's see what we can do with

00:16:28.576 --> 00:16:29.166 A:middle
this constraint.

00:16:30.476 --> 00:16:32.696 A:middle
So here we have a character

00:16:32.696 --> 00:16:33.856 A:middle
moving around in a scene, and

00:16:34.206 --> 00:16:35.556 A:middle
the camera has no constraint

00:16:35.556 --> 00:16:37.056 A:middle
yet, and he's therefore static.

00:16:37.826 --> 00:16:40.066 A:middle
If I add the look at constraint

00:16:40.066 --> 00:16:42.086 A:middle
to the camera with the character

00:16:42.086 --> 00:16:44.566 A:middle
as a target node, I now have my

00:16:44.566 --> 00:16:46.416 A:middle
camera that rotates to satisfy

00:16:46.416 --> 00:16:47.786 A:middle
the look at constraint and I

00:16:47.786 --> 00:16:48.906 A:middle
have the camera that look in the

00:16:48.906 --> 00:16:50.136 A:middle
direction of the character.

00:16:51.756 --> 00:16:54.186 A:middle
If I add a replicator constraint

00:16:54.616 --> 00:16:56.946 A:middle
and I have basic camera

00:16:56.946 --> 00:16:59.396 A:middle
behavior, that replicate the

00:16:59.506 --> 00:17:01.146 A:middle
movement of the character with

00:17:01.146 --> 00:17:02.866 A:middle
some offset and continue to look

00:17:02.866 --> 00:17:04.086 A:middle
in the direction of the

00:17:04.596 --> 00:17:04.836 A:middle
character.

00:17:05.376 --> 00:17:06.616 A:middle
If I add into that an

00:17:06.616 --> 00:17:08.586 A:middle
acceleration constraint, I now

00:17:08.636 --> 00:17:10.526 A:middle
have the same behavior, but that

00:17:10.526 --> 00:17:12.276 A:middle
is most thanks to the

00:17:12.276 --> 00:17:14.026 A:middle
acceleration constraint that is

00:17:14.026 --> 00:17:15.186 A:middle
applied after the other

00:17:15.186 --> 00:17:15.936 A:middle
constraint.

00:17:17.236 --> 00:17:19.416 A:middle
And if I replace the replicator

00:17:19.416 --> 00:17:21.666 A:middle
constraint by a distance

00:17:21.666 --> 00:17:23.636 A:middle
constraint, I now have a new

00:17:23.636 --> 00:17:25.506 A:middle
camera behavior that now follows

00:17:25.506 --> 00:17:26.936 A:middle
a character to satisfy the

00:17:26.936 --> 00:17:27.966 A:middle
distance constraint.

00:17:29.086 --> 00:17:30.186 A:middle
It continued to look into the

00:17:30.186 --> 00:17:31.186 A:middle
direction of the character, of

00:17:31.216 --> 00:17:33.006 A:middle
course, and all this will be

00:17:33.006 --> 00:17:34.726 A:middle
always moves, regardless of the

00:17:34.726 --> 00:17:36.386 A:middle
movement of the character,

00:17:36.656 --> 00:17:37.886 A:middle
thanks to the acceleration

00:17:37.886 --> 00:17:38.436 A:middle
constraint.

00:17:38.686 --> 00:17:41.366 A:middle
And so that's how easy it is to

00:17:41.366 --> 00:17:42.756 A:middle
define a camera behavior, and

00:17:42.756 --> 00:17:45.086 A:middle
that's what we did in our Fox 2

00:17:45.366 --> 00:17:46.276 A:middle
example.

00:17:46.946 --> 00:17:48.826 A:middle
And just by defining a different

00:17:48.916 --> 00:17:50.906 A:middle
set of constraints, depending on

00:17:50.906 --> 00:17:52.836 A:middle
the different zones of the game,

00:17:52.966 --> 00:17:54.336 A:middle
we were able to define the

00:17:54.336 --> 00:17:56.516 A:middle
camera behavior for the entire

00:17:56.516 --> 00:17:56.906 A:middle
game.

00:17:59.616 --> 00:18:01.216 A:middle
One more note about camera

00:18:01.216 --> 00:18:01.746 A:middle
control.

00:18:03.086 --> 00:18:04.896 A:middle
We extended SCNNode with the

00:18:04.896 --> 00:18:06.746 A:middle
categories that provide much

00:18:06.746 --> 00:18:09.706 A:middle
utilities for you to convert and

00:18:09.706 --> 00:18:11.036 A:middle
access vectors in different

00:18:11.066 --> 00:18:11.696 A:middle
spaces.

00:18:12.636 --> 00:18:14.956 A:middle
But most of all, all the node

00:18:14.956 --> 00:18:16.296 A:middle
transform properties,

00:18:16.296 --> 00:18:17.616 A:middle
access position, rotation,

00:18:17.616 --> 00:18:19.456 A:middle
scale, and matrix, and

00:18:19.456 --> 00:18:21.576 A:middle
transform, are now directly

00:18:21.666 --> 00:18:24.496 A:middle
available as SIMD properties

00:18:24.706 --> 00:18:26.526 A:middle
for, to ease math operations.

00:18:27.196 --> 00:18:30.086 A:middle
So thanks to SIMD types,

00:18:30.086 --> 00:18:30.866 A:middle
operations on quaternions

00:18:30.866 --> 00:18:32.706 A:middle
vectors, and matrices are much

00:18:32.706 --> 00:18:34.196 A:middle
simpler to write and they are

00:18:34.196 --> 00:18:35.496 A:middle
much more performant anyway.

00:18:36.276 --> 00:18:37.306 A:middle
Just be aware of a few

00:18:37.306 --> 00:18:38.856 A:middle
limitations with SMD types, as

00:18:38.856 --> 00:18:40.526 A:middle
they are not KVO and KVC

00:18:40.526 --> 00:18:42.216 A:middle
compliant and they cannot be

00:18:42.216 --> 00:18:43.546 A:middle
included as an NSValue.

00:18:43.976 --> 00:18:46.686 A:middle
So that's for camera controller.

00:18:46.846 --> 00:18:47.916 A:middle
Now, I'll hand it over to Amaury

00:18:47.916 --> 00:18:49.146 A:middle
to talk about tessellation and

00:18:49.146 --> 00:18:49.726 A:middle
subdivision.

00:18:50.516 --> 00:18:53.136 A:middle
[ Applause ]

00:18:53.636 --> 00:18:54.226 A:middle
&gt;&gt; Thank you, Thomas.

00:18:56.436 --> 00:18:57.886 A:middle
So we know that great graphics

00:18:58.026 --> 00:18:59.156 A:middle
are essential to your

00:18:59.156 --> 00:19:01.096 A:middle
application to build engagement

00:19:01.096 --> 00:19:01.886 A:middle
and delight your users.

00:19:01.886 --> 00:19:04.386 A:middle
And there are many aspects to

00:19:04.386 --> 00:19:05.046 A:middle
great graphics.

00:19:05.696 --> 00:19:07.296 A:middle
For instance, there is added

00:19:07.296 --> 00:19:07.736 A:middle
realism.

00:19:07.736 --> 00:19:09.566 A:middle
And that's why over the years

00:19:09.566 --> 00:19:11.496 A:middle
we've introduced new rendering

00:19:11.496 --> 00:19:13.206 A:middle
capabilities, such as

00:19:13.206 --> 00:19:15.316 A:middle
physically-based shading and

00:19:15.646 --> 00:19:16.726 A:middle
this year's push for more realistic

00:19:17.126 --> 00:19:18.546 A:middle
camera optics.

00:19:19.436 --> 00:19:22.866 A:middle
But high-resolution assets is

00:19:23.016 --> 00:19:24.476 A:middle
another very important aspect.

00:19:25.726 --> 00:19:27.206 A:middle
In your application, you want to

00:19:27.206 --> 00:19:29.076 A:middle
be able to have both very smooth

00:19:29.076 --> 00:19:32.186 A:middle
surfaces as well as very rich

00:19:32.326 --> 00:19:33.166 A:middle
and detailed ones.

00:19:33.946 --> 00:19:35.336 A:middle
Now, the issue is that when you

00:19:35.336 --> 00:19:36.586 A:middle
deal with high-resolution

00:19:36.586 --> 00:19:38.476 A:middle
assets, they require more

00:19:38.476 --> 00:19:40.696 A:middle
memory, both on disk and at

00:19:40.696 --> 00:19:42.676 A:middle
runtime, and they would require

00:19:42.676 --> 00:19:43.656 A:middle
more processing time.

00:19:43.886 --> 00:19:45.626 A:middle
So in this section, we will have

00:19:45.626 --> 00:19:47.436 A:middle
a look at proper techniques that

00:19:47.436 --> 00:19:49.686 A:middle
allow artists and you developers

00:19:49.936 --> 00:19:51.276 A:middle
to work with low-resolution

00:19:51.276 --> 00:19:53.146 A:middle
models that can become of high

00:19:53.146 --> 00:19:54.676 A:middle
quality when rendered on the

00:19:54.676 --> 00:19:55.116 A:middle
screen.

00:19:56.796 --> 00:19:58.516 A:middle
So I will start by explaining

00:19:58.516 --> 00:20:00.126 A:middle
what tessellation is and how it

00:20:00.126 --> 00:20:01.876 A:middle
works, then I will show you how

00:20:01.876 --> 00:20:03.546 A:middle
you can leverage this in

00:20:03.546 --> 00:20:03.926 A:middle
SceneKit.

00:20:04.416 --> 00:20:05.746 A:middle
And finally, we will have a look

00:20:05.746 --> 00:20:07.186 A:middle
at something a little different,

00:20:07.186 --> 00:20:08.526 A:middle
subdivision surfaces.

00:20:09.426 --> 00:20:11.356 A:middle
So tessellation.

00:20:12.396 --> 00:20:13.696 A:middle
Tessellation is a feature

00:20:13.696 --> 00:20:15.996 A:middle
applied last year in Metal, and

00:20:16.056 --> 00:20:17.766 A:middle
the idea behind this feature is

00:20:17.766 --> 00:20:19.666 A:middle
that you provide the GPU with a

00:20:19.666 --> 00:20:21.656 A:middle
low-resolution mesh, or coarse

00:20:21.656 --> 00:20:24.116 A:middle
mesh, and then you let the GPU

00:20:24.116 --> 00:20:25.856 A:middle
generate model memory that has

00:20:25.856 --> 00:20:28.376 A:middle
more vertices on the fly when

00:20:28.376 --> 00:20:29.216 A:middle
the model is rendered.

00:20:30.736 --> 00:20:33.366 A:middle
So subdivision surfaces really

00:20:33.456 --> 00:20:34.576 A:middle
are a powerful tool.

00:20:35.046 --> 00:20:36.876 A:middle
They are what you use in the

00:20:36.976 --> 00:20:38.986 A:middle
industry to easily create,

00:20:40.016 --> 00:20:41.546 A:middle
store, and animate

00:20:42.006 --> 00:20:43.456 A:middle
low-resolution models that can

00:20:43.456 --> 00:20:45.326 A:middle
become of very high quality when

00:20:45.326 --> 00:20:45.656 A:middle
rendered.

00:20:45.726 --> 00:20:46.656 A:middle
So let's have a look.

00:20:46.976 --> 00:20:49.336 A:middle
So this is a triangle, and this

00:20:49.336 --> 00:20:52.606 A:middle
is a tessellated version of it.

00:20:52.906 --> 00:20:55.566 A:middle
So SceneKit gets to decide how

00:20:55.566 --> 00:20:57.826 A:middle
much an edge can be split.

00:20:58.026 --> 00:20:59.916 A:middle
It can decide how much vertices

00:20:59.916 --> 00:21:01.456 A:middle
can be created on the first edge

00:21:02.026 --> 00:21:03.116 A:middle
and on the second edge.

00:21:03.536 --> 00:21:04.586 A:middle
And of course, it can do that

00:21:05.146 --> 00:21:05.916 A:middle
for the third edge.

00:21:06.776 --> 00:21:08.576 A:middle
And what's nice is that SceneKit

00:21:08.576 --> 00:21:10.096 A:middle
also gets to generate more

00:21:10.096 --> 00:21:12.296 A:middle
vertices inside the triangle.

00:21:13.786 --> 00:21:16.346 A:middle
So these are called tessellation

00:21:16.716 --> 00:21:17.126 A:middle
factors.

00:21:17.126 --> 00:21:18.626 A:middle
SceneKit is a high-level API,

00:21:18.626 --> 00:21:20.926 A:middle
and we made it super easy for

00:21:20.926 --> 00:21:22.176 A:middle
you to perform tessellation.

00:21:23.126 --> 00:21:24.296 A:middle
We are adding the new

00:21:24.296 --> 00:21:27.436 A:middle
SCNGeometryTessellator class as

00:21:27.436 --> 00:21:29.246 A:middle
well as the tessellator property

00:21:29.316 --> 00:21:30.346 A:middle
on SCNGeometry.

00:21:31.136 --> 00:21:32.846 A:middle
And the tessellator exposes a

00:21:32.846 --> 00:21:34.746 A:middle
few properties that allow for

00:21:34.746 --> 00:21:35.386 A:middle
different modes.

00:21:35.916 --> 00:21:38.126 A:middle
So let's have a look at the

00:21:38.126 --> 00:21:39.706 A:middle
simplest example first.

00:21:41.056 --> 00:21:42.516 A:middle
In this mode, you provide

00:21:42.516 --> 00:21:45.416 A:middle
SceneKit with constant edge and

00:21:45.476 --> 00:21:47.556 A:middle
inside tessellation factors that

00:21:47.556 --> 00:21:49.376 A:middle
will be used for all the

00:21:49.376 --> 00:21:50.786 A:middle
triangles in the coarse mesh.

00:21:51.166 --> 00:21:52.326 A:middle
So with this mode, you will have

00:21:52.326 --> 00:21:54.846 A:middle
a uniform tessellation, and you

00:21:54.846 --> 00:21:56.216 A:middle
will add the same amount of

00:21:56.216 --> 00:21:58.046 A:middle
geometry everywhere across the

00:21:58.046 --> 00:21:58.626 A:middle
coarse mesh.

00:21:58.976 --> 00:22:02.686 A:middle
So let's take a look at the more

00:22:02.686 --> 00:22:04.616 A:middle
complex example now.

00:22:05.286 --> 00:22:06.566 A:middle
Here you can ask SceneKit to

00:22:06.566 --> 00:22:07.866 A:middle
come up with special

00:22:07.866 --> 00:22:10.176 A:middle
tessellation factors so that no

00:22:10.176 --> 00:22:11.336 A:middle
edge is too long.

00:22:11.796 --> 00:22:13.656 A:middle
So here you provide a maximum

00:22:13.656 --> 00:22:15.416 A:middle
edge length in local space.

00:22:17.006 --> 00:22:19.006 A:middle
Even more powerful, you can ask

00:22:19.006 --> 00:22:21.226 A:middle
SceneKit to constantly evaluate

00:22:21.226 --> 00:22:22.936 A:middle
at each frame the tessellation

00:22:22.936 --> 00:22:25.486 A:middle
factors, depending on the

00:22:25.486 --> 00:22:27.296 A:middle
project inside of the object.

00:22:28.186 --> 00:22:30.376 A:middle
So in this mode, you will

00:22:30.376 --> 00:22:32.376 A:middle
provide the maximum edge length

00:22:32.696 --> 00:22:34.956 A:middle
in screen space that is in

00:22:34.956 --> 00:22:35.456 A:middle
pixels.

00:22:35.806 --> 00:22:40.496 A:middle
So that's it for tessellation.

00:22:41.126 --> 00:22:42.326 A:middle
And now, if you have a look at

00:22:43.316 --> 00:22:44.786 A:middle
the original triangle and the

00:22:44.836 --> 00:22:46.526 A:middle
tessellated version, you might

00:22:46.526 --> 00:22:48.386 A:middle
be a little disappointed, and

00:22:48.806 --> 00:22:49.926 A:middle
that's because all the new

00:22:49.926 --> 00:22:52.956 A:middle
geometry data actually lies in

00:22:52.956 --> 00:22:54.026 A:middle
the original triangle.

00:22:54.596 --> 00:22:55.976 A:middle
So for your highly-detailed

00:22:55.976 --> 00:22:57.636 A:middle
mesh, you want to do something

00:22:57.636 --> 00:23:00.316 A:middle
with this extra geometry.

00:23:01.036 --> 00:23:02.436 A:middle
And that leads us to the new

00:23:02.496 --> 00:23:04.256 A:middle
tessellation-based geometry

00:23:04.366 --> 00:23:04.676 A:middle
APIs.

00:23:05.316 --> 00:23:08.876 A:middle
So first of all, let me remind

00:23:08.876 --> 00:23:09.796 A:middle
you of shader modifiers.

00:23:10.866 --> 00:23:12.966 A:middle
Shader modifiers are completely

00:23:12.966 --> 00:23:13.876 A:middle
supported with the new

00:23:13.876 --> 00:23:15.076 A:middle
tessellation pipeline.

00:23:15.426 --> 00:23:16.806 A:middle
And with a few lines of code,

00:23:16.806 --> 00:23:18.196 A:middle
you can create really custom

00:23:18.226 --> 00:23:18.586 A:middle
effects.

00:23:19.336 --> 00:23:20.786 A:middle
So for instance, if you have an

00:23:20.786 --> 00:23:22.946 A:middle
application, and there's water,

00:23:22.946 --> 00:23:24.036 A:middle
and you want to simulate an

00:23:24.036 --> 00:23:26.156 A:middle
ocean with waves or really any

00:23:26.466 --> 00:23:28.086 A:middle
idea, an effect of your own,

00:23:28.966 --> 00:23:30.326 A:middle
shader modifiers are the right

00:23:30.326 --> 00:23:31.796 A:middle
tools, are really powerful for

00:23:32.026 --> 00:23:32.116 A:middle
that.

00:23:32.626 --> 00:23:33.676 A:middle
But of course, we are also

00:23:33.676 --> 00:23:35.616 A:middle
adding out-of-the-box effects,

00:23:35.886 --> 00:23:37.546 A:middle
such as geometry smoothing.

00:23:38.586 --> 00:23:39.506 A:middle
This is a new feature.

00:23:40.396 --> 00:23:42.126 A:middle
And for instance, if you specify

00:23:42.706 --> 00:23:44.316 A:middle
the pnTriangles smoothingMode,

00:23:45.046 --> 00:23:47.386 A:middle
SceneKit will take into account

00:23:47.496 --> 00:23:49.536 A:middle
the position in normal of each

00:23:49.536 --> 00:23:53.066 A:middle
vertex as well as the position

00:23:53.066 --> 00:23:54.726 A:middle
in normal of its neighbors to

00:23:55.246 --> 00:23:56.576 A:middle
project them on a smooth

00:23:56.576 --> 00:23:56.856 A:middle
surface.

00:23:57.296 --> 00:23:59.156 A:middle
Another effect that you might

00:23:59.156 --> 00:24:01.026 A:middle
have heard about -- displacement

00:24:01.026 --> 00:24:02.156 A:middle
maps and height maps.

00:24:03.326 --> 00:24:04.226 A:middle
So what's a height map?

00:24:05.196 --> 00:24:06.066 A:middle
Well, height map is a

00:24:06.066 --> 00:24:08.286 A:middle
gray-scaled image that stores

00:24:08.286 --> 00:24:10.936 A:middle
the elevation or altitude of any

00:24:11.016 --> 00:24:12.356 A:middle
point on the surface.

00:24:13.526 --> 00:24:15.016 A:middle
This technique is commonly used

00:24:15.016 --> 00:24:17.076 A:middle
for effects such as terrain

00:24:17.246 --> 00:24:19.086 A:middle
rendering, so let's take that as

00:24:19.176 --> 00:24:20.576 A:middle
an example.

00:24:21.706 --> 00:24:24.626 A:middle
We start with a plane that we

00:24:24.736 --> 00:24:27.456 A:middle
tessellate and that we deform

00:24:27.456 --> 00:24:29.626 A:middle
using the height map.

00:24:31.076 --> 00:24:33.226 A:middle
So it's a really simple example,

00:24:33.826 --> 00:24:34.906 A:middle
but it's highly effective.

00:24:35.756 --> 00:24:37.806 A:middle
And the API is really simple

00:24:37.806 --> 00:24:38.016 A:middle
too.

00:24:38.686 --> 00:24:39.686 A:middle
We are adding the new

00:24:39.686 --> 00:24:41.516 A:middle
displacement material property

00:24:41.646 --> 00:24:43.876 A:middle
on SCNMaterial, and so I bet you

00:24:43.876 --> 00:24:45.106 A:middle
already know how to use it.

00:24:45.376 --> 00:24:47.016 A:middle
You just specify its contents,

00:24:47.526 --> 00:24:48.916 A:middle
and then if you modify its

00:24:48.916 --> 00:24:51.036 A:middle
intensity, you can come up with

00:24:51.036 --> 00:24:52.316 A:middle
the animation I just showed.

00:24:53.136 --> 00:24:54.526 A:middle
Now, let's get one step further

00:24:54.526 --> 00:24:56.706 A:middle
with vector displacement maps.

00:24:58.256 --> 00:25:00.306 A:middle
Vector displacement maps are the

00:25:00.306 --> 00:25:02.336 A:middle
extension of height maps, but

00:25:02.336 --> 00:25:03.586 A:middle
instead of only storing the

00:25:03.586 --> 00:25:05.916 A:middle
elevation, you can store a

00:25:05.916 --> 00:25:07.186 A:middle
displacement is all three

00:25:07.186 --> 00:25:09.026 A:middle
directions, and that's why you

00:25:09.026 --> 00:25:10.156 A:middle
have a cut-out image.

00:25:10.856 --> 00:25:12.996 A:middle
For instance, green is the

00:25:12.996 --> 00:25:14.666 A:middle
displacement along the normal,

00:25:15.056 --> 00:25:16.636 A:middle
and red and blue along the

00:25:16.636 --> 00:25:17.946 A:middle
tangent and bitangent.

00:25:19.266 --> 00:25:20.316 A:middle
So will you guess what that

00:25:20.316 --> 00:25:20.566 A:middle
does?

00:25:21.386 --> 00:25:22.686 A:middle
Let's have a look.

00:25:25.466 --> 00:25:27.996 A:middle
Okay, so this is a, see, the

00:25:27.996 --> 00:25:29.566 A:middle
example, but in your

00:25:29.626 --> 00:25:30.536 A:middle
application, you can use

00:25:30.596 --> 00:25:32.336 A:middle
displacement maps to add the

00:25:32.476 --> 00:25:34.276 A:middle
details, fine details to your

00:25:34.276 --> 00:25:34.786 A:middle
geometry.

00:25:35.336 --> 00:25:37.536 A:middle
So for instance, if you have a

00:25:37.746 --> 00:25:39.866 A:middle
demo with a chameleon, you can

00:25:39.866 --> 00:25:41.306 A:middle
add detail to its skin.

00:25:41.836 --> 00:25:44.286 A:middle
Or if you have an application

00:25:44.406 --> 00:25:45.856 A:middle
and there are rocks you can get

00:25:45.856 --> 00:25:47.006 A:middle
really close to, vector

00:25:47.006 --> 00:25:48.646 A:middle
displacement maps are the right

00:25:48.646 --> 00:25:48.866 A:middle
tool.

00:25:49.786 --> 00:25:52.636 A:middle
The API is the same, except that

00:25:53.166 --> 00:25:55.146 A:middle
instead of just red, you specify

00:25:55.336 --> 00:25:57.406 A:middle
"all" for the texture components

00:25:57.616 --> 00:25:58.696 A:middle
to indicate that you are

00:25:58.746 --> 00:26:00.726 A:middle
interested in more than one

00:26:00.726 --> 00:26:03.126 A:middle
color option of the input image.

00:26:03.366 --> 00:26:06.666 A:middle
So that's it for tessellation

00:26:06.666 --> 00:26:08.306 A:middle
and tessellation-based effects.

00:26:08.606 --> 00:26:09.636 A:middle
Now, let's have a look at

00:26:09.946 --> 00:26:11.346 A:middle
subdivision surfaces.

00:26:13.416 --> 00:26:15.236 A:middle
So you might already have heard

00:26:15.236 --> 00:26:17.326 A:middle
of our subdivision surfaces and

00:26:17.326 --> 00:26:18.766 A:middle
[inaudible] class subdivision.

00:26:19.386 --> 00:26:21.266 A:middle
It's a standardized algorithm

00:26:21.616 --> 00:26:23.316 A:middle
that starts with a coarse mesh

00:26:23.746 --> 00:26:26.626 A:middle
and that iteratively refines it.

00:26:31.866 --> 00:26:33.346 A:middle
And so you see how quickly we

00:26:33.346 --> 00:26:35.486 A:middle
get from a coarse mesh to a very

00:26:35.556 --> 00:26:36.686 A:middle
smooth and detailed one.

00:26:37.716 --> 00:26:40.086 A:middle
Now, not everything is perfectly

00:26:40.086 --> 00:26:41.756 A:middle
round, so with subdivision

00:26:41.756 --> 00:26:43.346 A:middle
surfaces, you can specify

00:26:43.346 --> 00:26:45.356 A:middle
creases and corners to have

00:26:45.886 --> 00:26:47.916 A:middle
distinct sharpnesses for your

00:26:47.916 --> 00:26:50.986 A:middle
edges and vertices.

00:26:52.386 --> 00:26:54.336 A:middle
So subdivision surfaces, they

00:26:54.596 --> 00:26:56.536 A:middle
are extensively used in the

00:26:56.536 --> 00:26:58.576 A:middle
industry to easily create,

00:26:59.156 --> 00:27:01.276 A:middle
store, and animate your

00:27:01.276 --> 00:27:02.786 A:middle
resolution models that can

00:27:02.786 --> 00:27:04.566 A:middle
become of very high quality when

00:27:04.566 --> 00:27:05.386 A:middle
rendered on the screen.

00:27:05.646 --> 00:27:08.216 A:middle
And it turns out that we added

00:27:08.216 --> 00:27:10.156 A:middle
support for subdivision surfaces

00:27:10.316 --> 00:27:12.676 A:middle
a few years ago in SceneKit, but

00:27:12.996 --> 00:27:14.876 A:middle
we used to run the subdivision

00:27:14.876 --> 00:27:16.106 A:middle
code on the CPU.

00:27:16.906 --> 00:27:18.816 A:middle
And so that takes some time and

00:27:18.816 --> 00:27:20.276 A:middle
a huge amount of memory,

00:27:20.406 --> 00:27:21.876 A:middle
especially when you go to higher

00:27:21.876 --> 00:27:24.016 A:middle
level of subdivision, as the

00:27:24.016 --> 00:27:26.326 A:middle
number of vertices generated

00:27:26.326 --> 00:27:27.656 A:middle
grows exponentially.

00:27:29.356 --> 00:27:30.786 A:middle
So we have great news this year.

00:27:32.826 --> 00:27:34.206 A:middle
You might have heard about the

00:27:34.206 --> 00:27:36.266 A:middle
OpenSubdiv project from Pixar,

00:27:36.266 --> 00:27:37.466 A:middle
which is an open tools

00:27:37.466 --> 00:27:39.306 A:middle
implementation for efficiently

00:27:39.306 --> 00:27:40.516 A:middle
evaluation of subdivision

00:27:40.516 --> 00:27:41.046 A:middle
surfaces.

00:27:41.046 --> 00:27:44.176 A:middle
And last year at WWDC, Apple

00:27:44.176 --> 00:27:45.756 A:middle
announced that we would be

00:27:45.756 --> 00:27:47.166 A:middle
contributing to this project

00:27:47.336 --> 00:27:48.316 A:middle
with a Metal-based

00:27:48.316 --> 00:27:50.496 A:middle
implementation so that you can

00:27:50.496 --> 00:27:52.276 A:middle
run the subdivision code on the

00:27:52.316 --> 00:27:53.526 A:middle
GPU using Metal.

00:27:54.556 --> 00:27:55.896 A:middle
And so this year, you can

00:27:56.156 --> 00:27:57.406 A:middle
leverage all these amazing

00:27:57.406 --> 00:27:58.956 A:middle
technologies very easily.

00:27:59.666 --> 00:28:02.126 A:middle
And with the Metal-based

00:28:02.126 --> 00:28:03.576 A:middle
implementation come many

00:28:03.576 --> 00:28:04.296 A:middle
advantages.

00:28:04.816 --> 00:28:07.266 A:middle
First, we leverage tessellation,

00:28:07.506 --> 00:28:08.806 A:middle
and it comes with all the memory

00:28:08.806 --> 00:28:10.616 A:middle
benefits I've talked about

00:28:10.646 --> 00:28:10.776 A:middle
earlier.

00:28:11.306 --> 00:28:13.426 A:middle
And with the tessellation, we'll

00:28:13.426 --> 00:28:15.506 A:middle
have very smooth surfaces even

00:28:15.506 --> 00:28:17.206 A:middle
for low subdivision levels.

00:28:18.216 --> 00:28:19.926 A:middle
Now, in addition to uniform

00:28:19.926 --> 00:28:21.336 A:middle
subdivision, we support

00:28:21.336 --> 00:28:22.726 A:middle
feature-adaptive subdivision,

00:28:23.186 --> 00:28:24.166 A:middle
which I will explain in a

00:28:24.166 --> 00:28:24.446 A:middle
minute.

00:28:25.186 --> 00:28:27.356 A:middle
And last, we have an all-GPU

00:28:27.356 --> 00:28:29.526 A:middle
pipeline for efficient animation

00:28:29.586 --> 00:28:31.106 A:middle
of subdivided meshes.

00:28:31.226 --> 00:28:34.086 A:middle
So let's take a look at this

00:28:34.136 --> 00:28:34.836 A:middle
example.

00:28:35.136 --> 00:28:36.076 A:middle
It's the key you saw in the

00:28:36.076 --> 00:28:37.896 A:middle
demo, and as you see, it's a

00:28:37.966 --> 00:28:39.606 A:middle
very coarse mesh.

00:28:40.206 --> 00:28:41.046 A:middle
Not much detail.

00:28:42.326 --> 00:28:43.596 A:middle
And this is a tessellation

00:28:43.596 --> 00:28:45.026 A:middle
version, subdivided one.

00:28:46.036 --> 00:28:47.836 A:middle
So with asset, you can see that

00:28:47.836 --> 00:28:49.946 A:middle
you have hard edges but also

00:28:49.946 --> 00:28:50.486 A:middle
nice curves.

00:28:50.516 --> 00:28:52.686 A:middle
So how did we do that?

00:28:53.626 --> 00:28:54.376 A:middle
Using creases.

00:28:56.336 --> 00:28:58.166 A:middle
So with subdivision surfaces,

00:28:58.326 --> 00:28:59.816 A:middle
artists can really come up with

00:28:59.816 --> 00:29:01.806 A:middle
great designs and they can

00:29:01.806 --> 00:29:04.276 A:middle
easily create them and then tune

00:29:04.276 --> 00:29:07.246 A:middle
them to have the desired look

00:29:08.356 --> 00:29:09.466 A:middle
they want.

00:29:09.786 --> 00:29:11.506 A:middle
Now, feature-adaptive

00:29:11.506 --> 00:29:12.116 A:middle
subdivision.

00:29:14.746 --> 00:29:16.296 A:middle
When uniform subdivision

00:29:16.586 --> 00:29:18.216 A:middle
converges towards a [inaudible]

00:29:18.216 --> 00:29:19.596 A:middle
face that this moves by

00:29:19.626 --> 00:29:21.446 A:middle
exponentially increasing the

00:29:21.446 --> 00:29:22.506 A:middle
number of polygons,

00:29:23.766 --> 00:29:25.556 A:middle
feature-adaptive subdivision can

00:29:25.606 --> 00:29:27.786 A:middle
isolate irregular parts of your

00:29:27.786 --> 00:29:30.346 A:middle
mesh and create busy patches as

00:29:30.346 --> 00:29:30.576 A:middle
well.

00:29:31.286 --> 00:29:32.716 A:middle
So then, with tessellation, we

00:29:32.716 --> 00:29:34.456 A:middle
can create new vertices on these

00:29:34.586 --> 00:29:36.576 A:middle
perfect mathematical curves, and

00:29:36.576 --> 00:29:38.006 A:middle
so it leads to very smooth

00:29:38.006 --> 00:29:40.376 A:middle
surfaces with a lower memory

00:29:40.406 --> 00:29:40.806 A:middle
footprint.

00:29:41.376 --> 00:29:44.386 A:middle
Now, the API is really simple.

00:29:45.366 --> 00:29:46.846 A:middle
You just specify a subdivision

00:29:46.846 --> 00:29:49.116 A:middle
level and then you opt into

00:29:49.566 --> 00:29:50.416 A:middle
tessellation.

00:29:51.646 --> 00:29:53.246 A:middle
And then for feature-adaptive

00:29:53.246 --> 00:29:54.536 A:middle
subdivision, it's really easy to

00:29:54.576 --> 00:29:55.286 A:middle
configure too.

00:29:56.226 --> 00:29:58.856 A:middle
Now, last, animation of

00:29:58.856 --> 00:29:59.986 A:middle
subdivision surfaces.

00:30:01.076 --> 00:30:02.556 A:middle
This year, we have an all-GPU

00:30:02.556 --> 00:30:04.516 A:middle
pipeline that is really

00:30:04.516 --> 00:30:05.106 A:middle
efficient.

00:30:05.556 --> 00:30:07.866 A:middle
You can have a coarse mesh that

00:30:07.866 --> 00:30:10.766 A:middle
you can deform using morphing.

00:30:10.766 --> 00:30:12.966 A:middle
And then if you want, you can

00:30:12.966 --> 00:30:14.126 A:middle
add skeletal with skinning.

00:30:14.466 --> 00:30:15.836 A:middle
And finally, as the last step,

00:30:16.066 --> 00:30:17.776 A:middle
we run the refinement code on

00:30:17.776 --> 00:30:18.356 A:middle
the GPU.

00:30:18.816 --> 00:30:20.066 A:middle
And this is very performant

00:30:20.176 --> 00:30:21.516 A:middle
because we are working on the

00:30:21.516 --> 00:30:23.596 A:middle
GPU on the low-resolution mesh,

00:30:24.036 --> 00:30:25.616 A:middle
and then the very detailed one

00:30:25.736 --> 00:30:27.466 A:middle
is generated on the fly by the

00:30:27.616 --> 00:30:28.916 A:middle
GPU using tessellation.

00:30:30.796 --> 00:30:31.996 A:middle
So now that you want to give

00:30:31.996 --> 00:30:33.996 A:middle
subdivision surfaces a try, just

00:30:33.996 --> 00:30:35.156 A:middle
remember two things.

00:30:35.306 --> 00:30:37.196 A:middle
First, if you are loading a set

00:30:37.196 --> 00:30:39.556 A:middle
from files, specify the

00:30:39.556 --> 00:30:41.966 A:middle
preserveOriginalTopology option.

00:30:42.906 --> 00:30:44.236 A:middle
And if you are creating

00:30:44.236 --> 00:30:45.646 A:middle
geometries programmatically,

00:30:45.786 --> 00:30:47.086 A:middle
remember to use the polygon

00:30:47.086 --> 00:30:47.756 A:middle
primitive type.

00:30:48.586 --> 00:30:49.246 A:middle
This is because with

00:30:49.246 --> 00:30:50.746 A:middle
subdivision, working with

00:30:50.836 --> 00:30:52.466 A:middle
triangles is not the same as

00:30:52.466 --> 00:30:53.296 A:middle
working with quads.

00:30:54.556 --> 00:30:55.656 A:middle
And with that, let's have a

00:30:55.656 --> 00:30:56.506 A:middle
quick demo.

00:31:05.646 --> 00:31:07.916 A:middle
OK. So this is a simple

00:31:07.916 --> 00:31:09.186 A:middle
pottery application I'm

00:31:09.286 --> 00:31:10.166 A:middle
going to be working on.

00:31:10.936 --> 00:31:14.226 A:middle
So I can easily pinch to zoom,

00:31:15.076 --> 00:31:16.986 A:middle
and I can drag to rotate.

00:31:18.066 --> 00:31:19.106 A:middle
It's very easy.

00:31:19.646 --> 00:31:21.556 A:middle
Now, if I pinch, then pay

00:31:21.556 --> 00:31:22.876 A:middle
attention to the silhouette of

00:31:22.916 --> 00:31:23.336 A:middle
the object.

00:31:24.356 --> 00:31:25.586 A:middle
As you can see, it's very

00:31:25.586 --> 00:31:28.236 A:middle
smooth, and you can use a normal

00:31:28.236 --> 00:31:30.656 A:middle
map to add detail on the

00:31:30.656 --> 00:31:31.316 A:middle
surface.

00:31:31.696 --> 00:31:34.376 A:middle
And now, the purpose of this

00:31:34.376 --> 00:31:35.846 A:middle
application is very simple.

00:31:35.846 --> 00:31:39.466 A:middle
I can take my finger and simply

00:31:39.806 --> 00:31:40.396 A:middle
sketch on the mesh.

00:31:41.776 --> 00:31:44.406 A:middle
So let's kill that and let's

00:31:44.406 --> 00:31:45.046 A:middle
write something.

00:31:45.856 --> 00:31:48.096 A:middle
So as I draw, pay a look at the

00:31:48.096 --> 00:31:49.116 A:middle
silhouette of the object.

00:31:50.986 --> 00:31:52.986 A:middle
Here I'm actually modifying the

00:31:53.026 --> 00:31:53.576 A:middle
geometry.

00:31:54.286 --> 00:31:55.596 A:middle
I'm not just adding surface

00:31:55.636 --> 00:31:58.336 A:middle
details like we do with a normal

00:31:58.336 --> 00:31:58.566 A:middle
map.

00:32:06.496 --> 00:32:07.906 A:middle
OK, so how was that done?

00:32:08.276 --> 00:32:10.576 A:middle
Well, with subdivision surfaces,

00:32:10.646 --> 00:32:12.016 A:middle
tessellation, and height maps.

00:32:12.236 --> 00:32:13.036 A:middle
So let's have a look.

00:32:13.856 --> 00:32:17.526 A:middle
What we do is that we start with

00:32:17.526 --> 00:32:18.726 A:middle
a very coarse mesh.

00:32:18.726 --> 00:32:21.036 A:middle
As you can see, very low

00:32:21.036 --> 00:32:21.496 A:middle
polygon.

00:32:22.316 --> 00:32:25.106 A:middle
It doesn't come with normals, so

00:32:25.106 --> 00:32:27.126 A:middle
we have flat shading here, but

00:32:27.126 --> 00:32:28.876 A:middle
it has texture coordinates.

00:32:29.386 --> 00:32:31.876 A:middle
So we can simply map a normal on

00:32:31.876 --> 00:32:34.726 A:middle
it and later a height map.

00:32:34.916 --> 00:32:36.866 A:middle
So now, let's subdivide it.

00:32:38.186 --> 00:32:40.156 A:middle
Let's see the smooth normals

00:32:40.286 --> 00:32:42.806 A:middle
that are generated, and then

00:32:43.236 --> 00:32:45.946 A:middle
let's have a look at the wire

00:32:45.946 --> 00:32:48.176 A:middle
frame and see how much vertices

00:32:48.176 --> 00:32:51.396 A:middle
are created, how many vertices

00:32:51.396 --> 00:32:52.986 A:middle
are created when I enabled

00:32:53.226 --> 00:32:55.246 A:middle
subdivision on it.

00:32:56.056 --> 00:32:58.506 A:middle
When I take my finger, I simply

00:32:58.556 --> 00:33:02.546 A:middle
draw in the height map, and all

00:33:02.546 --> 00:33:04.426 A:middle
the vertices are displaced.

00:33:05.856 --> 00:33:07.536 A:middle
Now, let's clear that.

00:33:07.646 --> 00:33:09.166 A:middle
And just for fun, let's enable

00:33:09.976 --> 00:33:11.326 A:middle
screen space tessellation.

00:33:12.136 --> 00:33:14.166 A:middle
Now, I will pinch and take a

00:33:14.166 --> 00:33:15.536 A:middle
look at when I get close or

00:33:15.536 --> 00:33:16.486 A:middle
farther from the object.

00:33:18.006 --> 00:33:19.206 A:middle
SceneKit will come up with new

00:33:19.206 --> 00:33:21.066 A:middle
tessellation factors, and it

00:33:21.066 --> 00:33:23.316 A:middle
will create new vertices on the

00:33:23.316 --> 00:33:23.606 A:middle
fly.

00:33:24.216 --> 00:33:28.326 A:middle
And that's it for the demo.

00:33:29.516 --> 00:33:34.686 A:middle
[ Applause ]

00:33:35.186 --> 00:33:35.526 A:middle
Thank you.

00:33:36.066 --> 00:33:39.476 A:middle
So as a wrap up, tessellation

00:33:39.846 --> 00:33:41.046 A:middle
and features relying on

00:33:41.046 --> 00:33:42.926 A:middle
tessellation are available with

00:33:42.926 --> 00:33:45.926 A:middle
Metal on all Macs and available

00:33:45.966 --> 00:33:48.486 A:middle
on iOS devices with the A9 chip

00:33:48.486 --> 00:33:50.086 A:middle
or later, so that includes

00:33:50.416 --> 00:33:52.676 A:middle
iPhone 6S and all of the iPad

00:33:52.706 --> 00:33:53.536 A:middle
Pro models.

00:33:56.056 --> 00:33:58.016 A:middle
Now, let's have a look at

00:33:58.106 --> 00:33:59.336 A:middle
something completely different

00:33:59.826 --> 00:34:02.676 A:middle
-- our enhancements to animation

00:34:02.766 --> 00:34:02.976 A:middle
APIs.

00:34:10.616 --> 00:34:12.526 A:middle
This year, we are introducing

00:34:12.526 --> 00:34:16.206 A:middle
the new SCNAnimation protocol as

00:34:16.306 --> 00:34:18.456 A:middle
well as the SCNAnimationPlayer

00:34:18.456 --> 00:34:18.846 A:middle
class.

00:34:19.926 --> 00:34:23.356 A:middle
They make it easier to start

00:34:23.736 --> 00:34:25.656 A:middle
animations and to mutate it,

00:34:25.916 --> 00:34:27.466 A:middle
mutate them while they are

00:34:27.466 --> 00:34:27.686 A:middle
running.

00:34:28.866 --> 00:34:30.326 A:middle
So for instance, now you can

00:34:30.326 --> 00:34:32.336 A:middle
easily change the speed of an

00:34:32.336 --> 00:34:34.266 A:middle
animation and you can blend

00:34:34.356 --> 00:34:35.806 A:middle
animations on the fly.

00:34:36.476 --> 00:34:37.616 A:middle
Of course, we still fully

00:34:37.616 --> 00:34:40.756 A:middle
support CA animation APIs.

00:34:40.756 --> 00:34:43.496 A:middle
CA animation conforms to our new

00:34:43.496 --> 00:34:44.146 A:middle
protocol.

00:34:44.946 --> 00:34:47.056 A:middle
But with the new APIs, it's much

00:34:47.056 --> 00:34:47.316 A:middle
easier.

00:34:47.316 --> 00:34:51.236 A:middle
You can work dynamically on

00:34:51.236 --> 00:34:52.316 A:middle
animations while they are

00:34:52.316 --> 00:34:54.306 A:middle
running, and these APIs are

00:34:54.306 --> 00:34:55.806 A:middle
available on all platforms,

00:34:55.966 --> 00:34:56.826 A:middle
including watchOS.

00:34:58.116 --> 00:34:59.836 A:middle
So let's take a look at the old

00:34:59.836 --> 00:34:59.976 A:middle
way.

00:35:01.176 --> 00:35:02.446 A:middle
So let's say you had a character

00:35:02.446 --> 00:35:04.426 A:middle
that could walk and jump.

00:35:05.086 --> 00:35:06.376 A:middle
You would first start by adding

00:35:06.376 --> 00:35:08.216 A:middle
the walk animation, and then

00:35:08.216 --> 00:35:09.586 A:middle
when you wanted the character to

00:35:09.586 --> 00:35:11.566 A:middle
jump, you would add the jump

00:35:11.566 --> 00:35:14.676 A:middle
animation to replace the other

00:35:15.616 --> 00:35:15.816 A:middle
one.

00:35:15.926 --> 00:35:18.116 A:middle
Now, with the new API, you start

00:35:18.116 --> 00:35:20.096 A:middle
by creating and configuring

00:35:20.146 --> 00:35:22.226 A:middle
animation players, and then when

00:35:22.226 --> 00:35:23.476 A:middle
you want a character to jump,

00:35:23.796 --> 00:35:25.056 A:middle
you manipulate the player

00:35:25.056 --> 00:35:26.996 A:middle
instead of the animation

00:35:26.996 --> 00:35:27.516 A:middle
directly.

00:35:27.886 --> 00:35:29.506 A:middle
So it's a very similar API.

00:35:30.586 --> 00:35:31.626 A:middle
The difference is that now you

00:35:31.626 --> 00:35:33.766 A:middle
can mutate animations while they

00:35:33.766 --> 00:35:34.326 A:middle
are running.

00:35:34.426 --> 00:35:36.016 A:middle
So you can change their speed

00:35:36.406 --> 00:35:37.626 A:middle
and you can mix animations.

00:35:38.576 --> 00:35:39.976 A:middle
And animation blending is

00:35:39.976 --> 00:35:40.936 A:middle
actually new this year.

00:35:41.886 --> 00:35:43.256 A:middle
So let's take the example of

00:35:43.256 --> 00:35:46.166 A:middle
Max, who can walk, run, but also

00:35:46.276 --> 00:35:46.466 A:middle
step.

00:35:47.046 --> 00:35:48.826 A:middle
We have different animation

00:35:48.826 --> 00:35:51.016 A:middle
files for each kind of motion.

00:35:52.776 --> 00:35:55.156 A:middle
With the new blending API, you

00:35:55.156 --> 00:35:57.446 A:middle
can easily transition from the

00:35:57.596 --> 00:35:58.996 A:middle
step animation to the walk

00:35:58.996 --> 00:36:00.956 A:middle
animation, and so you can bring

00:36:00.956 --> 00:36:02.856 A:middle
fluidity and be more expressive

00:36:02.986 --> 00:36:03.936 A:middle
in your applications.

00:36:04.586 --> 00:36:06.656 A:middle
And after you blend animation,

00:36:06.656 --> 00:36:07.646 A:middle
you can also play with the

00:36:07.646 --> 00:36:07.976 A:middle
speed.

00:36:08.316 --> 00:36:14.286 A:middle
So Max can run slower on it.

00:36:14.576 --> 00:36:16.366 A:middle
Finally, let me mention

00:36:16.506 --> 00:36:18.356 A:middle
enhancements to our animation

00:36:18.356 --> 00:36:19.466 A:middle
evaluation code.

00:36:20.596 --> 00:36:23.296 A:middle
So we have a new implementation

00:36:23.296 --> 00:36:25.416 A:middle
that makes it faster to start

00:36:25.416 --> 00:36:27.416 A:middle
animations on arbitrary objects

00:36:27.416 --> 00:36:29.376 A:middle
in the scene.

00:36:29.416 --> 00:36:31.186 A:middle
And we made the evaluation of

00:36:31.186 --> 00:36:32.826 A:middle
skeletal animation much more

00:36:32.826 --> 00:36:33.376 A:middle
performant.

00:36:33.376 --> 00:36:35.506 A:middle
So if you have a lot of

00:36:35.506 --> 00:36:36.526 A:middle
characters, you have a lot of

00:36:36.526 --> 00:36:39.796 A:middle
bones in your scene, such as in

00:36:39.836 --> 00:36:41.296 A:middle
the Fox demo you just saw.

00:36:42.316 --> 00:36:43.746 A:middle
We have this new implementation

00:36:43.746 --> 00:36:45.256 A:middle
that makes things much faster.

00:36:46.396 --> 00:36:48.636 A:middle
And with that, let me hand over

00:36:48.696 --> 00:36:50.976 A:middle
to Sebastien for updates on our

00:36:50.976 --> 00:36:51.596 A:middle
developer tools.

00:36:52.391 --> 00:36:54.391 A:middle
[ Applause ]

00:36:54.766 --> 00:36:55.326 A:middle
&gt;&gt; Thank you, Amaury.

00:36:58.856 --> 00:37:00.616 A:middle
So last year, we introduced FPS

00:37:00.666 --> 00:37:01.286 A:middle
Gauges.

00:37:02.176 --> 00:37:03.396 A:middle
It's a great way to have an

00:37:03.396 --> 00:37:04.686 A:middle
overview of the performance of

00:37:04.686 --> 00:37:05.576 A:middle
your application regarding

00:37:05.576 --> 00:37:05.996 A:middle
SceneKit.

00:37:06.726 --> 00:37:08.646 A:middle
And they split the categories so

00:37:08.646 --> 00:37:09.966 A:middle
that you can see exactly where

00:37:09.966 --> 00:37:11.526 A:middle
the time is taken for the CPU

00:37:11.526 --> 00:37:12.156 A:middle
and the GPU.

00:37:12.486 --> 00:37:13.626 A:middle
So you can know if it's going in

00:37:13.626 --> 00:37:14.916 A:middle
the rendering and physics or

00:37:14.916 --> 00:37:15.356 A:middle
particles.

00:37:15.956 --> 00:37:17.636 A:middle
It's integrated in Xcode, and

00:37:17.636 --> 00:37:19.166 A:middle
you can have a look at exactly

00:37:19.166 --> 00:37:20.396 A:middle
how it behaves all the time.

00:37:21.006 --> 00:37:22.626 A:middle
And it's cool to exactly know

00:37:22.626 --> 00:37:24.946 A:middle
what's taking time so you can

00:37:24.946 --> 00:37:26.976 A:middle
reuse your meshes or animations,

00:37:26.976 --> 00:37:27.476 A:middle
for example.

00:37:28.406 --> 00:37:29.636 A:middle
But what happens with, when you

00:37:29.636 --> 00:37:30.416 A:middle
skip a frame?

00:37:30.416 --> 00:37:31.636 A:middle
How do you know exactly what

00:37:31.636 --> 00:37:32.106 A:middle
happened?

00:37:32.256 --> 00:37:35.596 A:middle
What caused the frame skipping?

00:37:36.896 --> 00:37:38.106 A:middle
This year, we are introducing a

00:37:38.106 --> 00:37:38.846 A:middle
new instrument.

00:37:39.346 --> 00:37:41.086 A:middle
It's a template for SceneKit

00:37:41.666 --> 00:37:42.936 A:middle
that you can use to record the

00:37:42.936 --> 00:37:44.766 A:middle
trace of your application and

00:37:44.766 --> 00:37:46.486 A:middle
exactly know what happens frame

00:37:46.486 --> 00:37:47.106 A:middle
by frame.

00:37:47.576 --> 00:37:49.796 A:middle
It's very simple to use.

00:37:49.796 --> 00:37:52.366 A:middle
You just create a template as

00:37:52.366 --> 00:37:54.076 A:middle
you would for any other trace,

00:37:54.586 --> 00:37:55.336 A:middle
and it'll record your

00:37:55.336 --> 00:37:57.416 A:middle
application performance, and you

00:37:57.416 --> 00:37:58.656 A:middle
will get this view.

00:37:59.036 --> 00:38:01.436 A:middle
It's full length that detail

00:38:01.436 --> 00:38:02.216 A:middle
what's happening in your

00:38:02.216 --> 00:38:02.726 A:middle
application.

00:38:02.886 --> 00:38:04.046 A:middle
The first one is the frame.

00:38:04.046 --> 00:38:05.116 A:middle
It gives you the time that is

00:38:05.116 --> 00:38:07.836 A:middle
taken to render one frame for

00:38:07.836 --> 00:38:10.016 A:middle
your application, and you can

00:38:10.016 --> 00:38:11.266 A:middle
see exactly how long it takes.

00:38:12.546 --> 00:38:14.286 A:middle
The second one gives you the

00:38:14.286 --> 00:38:15.096 A:middle
rendering time.

00:38:15.276 --> 00:38:16.906 A:middle
It's the time that is taken by

00:38:16.906 --> 00:38:18.666 A:middle
SceneKit to actually gather all

00:38:18.666 --> 00:38:20.216 A:middle
the data and send it to the GPU.

00:38:20.776 --> 00:38:24.056 A:middle
The third one gives you the

00:38:24.116 --> 00:38:25.566 A:middle
updating stage.

00:38:25.896 --> 00:38:26.976 A:middle
It's the time that is taken to

00:38:26.976 --> 00:38:28.926 A:middle
update the physics, particles,

00:38:29.066 --> 00:38:31.326 A:middle
and your custom delegate, if you

00:38:31.326 --> 00:38:31.776 A:middle
have one.

00:38:32.096 --> 00:38:34.586 A:middle
And the last one, but not the

00:38:34.586 --> 00:38:36.316 A:middle
least, is the time that is taken

00:38:36.316 --> 00:38:38.346 A:middle
to upload texture to the GPU as

00:38:38.346 --> 00:38:39.486 A:middle
well as compile shaders.

00:38:40.416 --> 00:38:42.666 A:middle
And let's see how it looks when

00:38:42.666 --> 00:38:44.106 A:middle
we have a skipped frame.

00:38:44.606 --> 00:38:45.826 A:middle
This is a very simple example.

00:38:47.056 --> 00:38:48.196 A:middle
You can see that all the frames

00:38:48.196 --> 00:38:49.696 A:middle
are very slow to render and that

00:38:49.696 --> 00:38:52.816 A:middle
at one point we have one frame

00:38:52.816 --> 00:38:54.036 A:middle
that is taking the time that it

00:38:54.076 --> 00:38:55.476 A:middle
would take normally for four

00:38:55.476 --> 00:38:56.416 A:middle
frames to render.

00:38:57.036 --> 00:38:59.826 A:middle
And when we dig down, we dig

00:38:59.826 --> 00:39:01.456 A:middle
what exactly is happening, we

00:39:01.456 --> 00:39:02.796 A:middle
can see that a new shader was

00:39:02.796 --> 00:39:04.186 A:middle
compiled, and it takes a lot of

00:39:04.186 --> 00:39:04.426 A:middle
time.

00:39:04.906 --> 00:39:07.236 A:middle
In this case, we can know, maybe

00:39:07.636 --> 00:39:09.926 A:middle
try to find a strategy to load

00:39:09.926 --> 00:39:11.616 A:middle
the shader at the start of the

00:39:11.616 --> 00:39:12.876 A:middle
application.

00:39:13.596 --> 00:39:17.006 A:middle
We have also added a way to

00:39:17.006 --> 00:39:19.436 A:middle
combine the SceneKit instrument

00:39:19.436 --> 00:39:20.666 A:middle
with the Metal instrument trace.

00:39:20.666 --> 00:39:23.496 A:middle
So you can see the combination

00:39:23.576 --> 00:39:25.246 A:middle
of both at the same time and see

00:39:25.246 --> 00:39:26.956 A:middle
exactly what happens behind the

00:39:26.956 --> 00:39:29.026 A:middle
screen to understand what's

00:39:29.026 --> 00:39:30.426 A:middle
happening in your application.

00:39:31.236 --> 00:39:33.566 A:middle
This year, we have also added a

00:39:33.566 --> 00:39:34.596 A:middle
new debug tool.

00:39:35.466 --> 00:39:36.626 A:middle
It's an enhancement to the view

00:39:36.626 --> 00:39:38.286 A:middle
debugger in Xcode.

00:39:38.726 --> 00:39:39.796 A:middle
It's very simple to use.

00:39:39.796 --> 00:39:41.076 A:middle
You just use the regular view

00:39:41.076 --> 00:39:42.676 A:middle
debugger as you would normally.

00:39:43.466 --> 00:39:45.076 A:middle
And it will capture the view

00:39:45.076 --> 00:39:47.756 A:middle
hierarchy as well as the scene

00:39:47.986 --> 00:39:48.636 A:middle
automatically.

00:39:48.796 --> 00:39:50.686 A:middle
So if there is a SceneKit scene,

00:39:51.116 --> 00:39:53.006 A:middle
SceneKit view in your

00:39:53.006 --> 00:39:54.386 A:middle
application, it will capture the

00:39:54.386 --> 00:39:54.746 A:middle
scene.

00:39:55.116 --> 00:39:57.086 A:middle
And if you select the scene in

00:39:57.086 --> 00:39:58.806 A:middle
the view hierarchy, it will

00:39:58.806 --> 00:40:00.466 A:middle
automatically send it to the

00:40:00.466 --> 00:40:01.756 A:middle
SceneKit editor, where you can

00:40:02.026 --> 00:40:03.826 A:middle
inspect all your objects, move

00:40:03.896 --> 00:40:05.276 A:middle
the camera around, and see

00:40:05.276 --> 00:40:07.576 A:middle
exactly how, what is in your

00:40:07.576 --> 00:40:08.596 A:middle
application and what is in your

00:40:08.596 --> 00:40:09.036 A:middle
scene.

00:40:09.596 --> 00:40:13.456 A:middle
We have also added support for

00:40:13.456 --> 00:40:14.646 A:middle
the new features this year.

00:40:14.976 --> 00:40:17.426 A:middle
So we have a new way to handle

00:40:17.426 --> 00:40:18.986 A:middle
the cameras in Xcode.

00:40:19.466 --> 00:40:21.316 A:middle
You can see that there is a new

00:40:21.316 --> 00:40:22.686 A:middle
way to choose the behavior that

00:40:22.686 --> 00:40:23.046 A:middle
you want.

00:40:24.596 --> 00:40:26.546 A:middle
We have added perspective and

00:40:26.546 --> 00:40:28.116 A:middle
autographic cameras so that you

00:40:28.116 --> 00:40:29.966 A:middle
can actually inspect your scene

00:40:29.966 --> 00:40:32.316 A:middle
much easier, and you'll still

00:40:32.316 --> 00:40:33.526 A:middle
have access to all your regular

00:40:33.526 --> 00:40:34.066 A:middle
cameras.

00:40:34.636 --> 00:40:37.436 A:middle
We have also added the new

00:40:37.436 --> 00:40:39.516 A:middle
behavior, so you can fly around

00:40:39.516 --> 00:40:41.256 A:middle
on turn and use the arcball.

00:40:41.486 --> 00:40:43.916 A:middle
It's much easier to inspect very

00:40:43.916 --> 00:40:44.436 A:middle
big scenes.

00:40:44.956 --> 00:40:48.556 A:middle
We have also completely revamped

00:40:48.656 --> 00:40:50.086 A:middle
the Shader Modifier Editor.

00:40:50.086 --> 00:40:52.016 A:middle
So now, you can edit your shader

00:40:52.016 --> 00:40:54.476 A:middle
modifiers as well as your

00:40:54.476 --> 00:40:56.446 A:middle
material at the same time in one

00:40:56.446 --> 00:40:56.776 A:middle
screen.

00:40:56.776 --> 00:40:57.806 A:middle
You don't have to go back and

00:40:57.806 --> 00:41:00.676 A:middle
forth in selecting objects.

00:41:00.676 --> 00:41:01.466 A:middle
It's a completely new

00:41:01.466 --> 00:41:02.986 A:middle
implementation, and it also

00:41:02.986 --> 00:41:04.586 A:middle
supports custom material

00:41:04.586 --> 00:41:05.046 A:middle
properties.

00:41:05.046 --> 00:41:06.906 A:middle
So if there is no, not enough

00:41:06.906 --> 00:41:09.616 A:middle
property slots in your material,

00:41:09.756 --> 00:41:12.946 A:middle
you can add colors, floats, or

00:41:12.946 --> 00:41:14.266 A:middle
vectors to add your own

00:41:14.266 --> 00:41:16.136 A:middle
implementation in your shader

00:41:16.136 --> 00:41:16.716 A:middle
modifier.

00:41:17.266 --> 00:41:18.136 A:middle
Very easy to use.

00:41:18.886 --> 00:41:21.286 A:middle
We have added support for more

00:41:21.486 --> 00:41:22.626 A:middle
features that we have added this

00:41:22.626 --> 00:41:22.956 A:middle
year.

00:41:23.566 --> 00:41:24.836 A:middle
So first is there is a new

00:41:24.836 --> 00:41:27.526 A:middle
displacement material slot that

00:41:27.526 --> 00:41:28.956 A:middle
you can use for the

00:41:28.956 --> 00:41:29.676 A:middle
tessellation.

00:41:30.416 --> 00:41:32.126 A:middle
Of course, we have tessellation.

00:41:32.686 --> 00:41:34.376 A:middle
We have added support for the

00:41:34.376 --> 00:41:35.146 A:middle
new constraints.

00:41:35.306 --> 00:41:36.946 A:middle
So you can add them into your

00:41:36.946 --> 00:41:38.546 A:middle
nodes, and test them in real

00:41:38.546 --> 00:41:40.596 A:middle
time in Xcode, and edit them in

00:41:40.596 --> 00:41:41.326 A:middle
the inspector.

00:41:41.326 --> 00:41:43.836 A:middle
We have support for cascaded

00:41:43.836 --> 00:41:45.236 A:middle
shadows that we will tell you

00:41:45.236 --> 00:41:46.476 A:middle
about more later.

00:41:47.246 --> 00:41:48.616 A:middle
And we also have a new

00:41:48.616 --> 00:41:50.226 A:middle
procedural sky that is very easy

00:41:50.226 --> 00:41:51.596 A:middle
to use as a background or the

00:41:51.596 --> 00:41:52.486 A:middle
lighting environment.

00:41:52.766 --> 00:41:54.176 A:middle
For example, to test your

00:41:54.176 --> 00:41:54.846 A:middle
[inaudible] material when you

00:41:54.846 --> 00:41:56.186 A:middle
don't have a proper [inaudible]

00:41:56.186 --> 00:41:56.956 A:middle
map set.

00:41:57.486 --> 00:41:58.346 A:middle
And it's completely

00:41:58.346 --> 00:42:00.346 A:middle
configurable, so you can get day

00:42:00.346 --> 00:42:01.546 A:middle
or night sky, for example.

00:42:01.546 --> 00:42:04.566 A:middle
And last, but not least, we have

00:42:04.566 --> 00:42:06.496 A:middle
added the possibility to

00:42:06.496 --> 00:42:08.066 A:middle
override the material for

00:42:08.346 --> 00:42:09.306 A:middle
reference nodes.

00:42:09.816 --> 00:42:10.986 A:middle
And what are reference nodes?

00:42:11.546 --> 00:42:12.686 A:middle
Reference nodes are actually

00:42:12.686 --> 00:42:15.776 A:middle
nodes that refer to one, only

00:42:15.776 --> 00:42:19.546 A:middle
one, scene file but used more

00:42:19.546 --> 00:42:20.776 A:middle
than once in your scene.

00:42:22.046 --> 00:42:23.556 A:middle
Until now, you could only have

00:42:23.556 --> 00:42:25.896 A:middle
exactly the same rendering for

00:42:25.896 --> 00:42:27.176 A:middle
both, for all the nodes.

00:42:27.176 --> 00:42:28.396 A:middle
It's not only two nodes.

00:42:28.946 --> 00:42:30.606 A:middle
But now, you can overwrite some

00:42:30.606 --> 00:42:32.946 A:middle
or all of the materials of, that

00:42:32.946 --> 00:42:34.346 A:middle
you are using in the scene and

00:42:34.346 --> 00:42:35.696 A:middle
change the look of some of, or

00:42:35.726 --> 00:42:37.346 A:middle
all the instance.

00:42:38.196 --> 00:42:40.176 A:middle
And with that, I hand it over to

00:42:40.176 --> 00:42:41.826 A:middle
Thomas to tell you about related

00:42:41.826 --> 00:42:42.436 A:middle
technologies.

00:42:43.221 --> 00:42:45.221 A:middle
[ Applause ]

00:42:45.426 --> 00:42:45.746 A:middle
&gt;&gt; Thank you.

00:42:49.496 --> 00:42:51.136 A:middle
OK, so let's talk about related

00:42:51.136 --> 00:42:53.336 A:middle
technologies and start with

00:42:53.336 --> 00:42:53.836 A:middle
ARKit.

00:42:54.516 --> 00:42:59.096 A:middle
So you have [applause] -- yeah.

00:42:59.096 --> 00:43:01.236 A:middle
[laughs] So you have all seen

00:43:01.236 --> 00:43:02.496 A:middle
the introduction of ARKit on

00:43:02.496 --> 00:43:03.966 A:middle
Monday during the keynote and

00:43:03.966 --> 00:43:05.696 A:middle
State of the Union, and you may

00:43:05.696 --> 00:43:08.586 A:middle
have noticed that ARKit provides

00:43:08.586 --> 00:43:11.556 A:middle
an ARSCNView that provides an

00:43:11.556 --> 00:43:13.926 A:middle
easy solution for AR that just

00:43:13.926 --> 00:43:15.226 A:middle
work out of the box.

00:43:16.116 --> 00:43:18.836 A:middle
And in fact, the ARSCNView is a

00:43:18.836 --> 00:43:20.396 A:middle
subclass of SCNView.

00:43:20.606 --> 00:43:21.826 A:middle
And that means that you have

00:43:21.896 --> 00:43:23.866 A:middle
full access to SceneKit via

00:43:23.866 --> 00:43:24.326 A:middle
ARKit.

00:43:24.326 --> 00:43:25.846 A:middle
You have access to the scene

00:43:25.846 --> 00:43:26.246 A:middle
graph.

00:43:26.616 --> 00:43:28.026 A:middle
You can add post processes,

00:43:28.106 --> 00:43:30.006 A:middle
particles, physics, force fields,

00:43:30.386 --> 00:43:31.666 A:middle
custom shaders.

00:43:31.666 --> 00:43:32.506 A:middle
If you want, you can do

00:43:32.506 --> 00:43:33.616 A:middle
basically everything.

00:43:34.626 --> 00:43:36.916 A:middle
And so with ARKit and SceneKit,

00:43:36.916 --> 00:43:38.866 A:middle
it's really easy to set up a

00:43:38.866 --> 00:43:40.786 A:middle
scene like in this example here.

00:43:41.056 --> 00:43:43.026 A:middle
I would let you guess where this

00:43:43.026 --> 00:43:44.276 A:middle
video is shot.

00:43:44.396 --> 00:43:45.226 A:middle
There is a hint in the

00:43:45.226 --> 00:43:47.096 A:middle
background, and my accent is

00:43:47.096 --> 00:43:47.656 A:middle
another hint.

00:43:48.666 --> 00:43:50.786 A:middle
And so here, to set up a scene

00:43:50.786 --> 00:43:52.256 A:middle
like this, we just needed to

00:43:52.256 --> 00:43:55.636 A:middle
load a SceneKit object, as you

00:43:55.636 --> 00:43:58.166 A:middle
usually do, and set up an ARView,

00:43:58.166 --> 00:43:59.676 A:middle
and run an AR session.

00:43:59.826 --> 00:44:02.026 A:middle
And then, from the ARSCNView

00:44:02.026 --> 00:44:04.646 A:middle
delegate, you just need to

00:44:04.646 --> 00:44:07.316 A:middle
attach your 3D objects

00:44:07.316 --> 00:44:09.556 A:middle
to the anchor detected by ARKit.

00:44:09.556 --> 00:44:10.466 A:middle
It's that simple.

00:44:11.506 --> 00:44:15.076 A:middle
And to support ARSCNView, we

00:44:15.076 --> 00:44:17.266 A:middle
extended our material property

00:44:17.636 --> 00:44:20.076 A:middle
to support AVCaptureDevice and

00:44:20.076 --> 00:44:23.346 A:middle
AVPlayer as a natively supported

00:44:23.346 --> 00:44:24.116 A:middle
type of content.

00:44:25.086 --> 00:44:26.266 A:middle
So that means that it's very

00:44:26.266 --> 00:44:26.526 A:middle
easy.

00:44:26.526 --> 00:44:27.776 A:middle
With just one line of code, you

00:44:27.776 --> 00:44:29.616 A:middle
can now directly connect.

00:44:29.896 --> 00:44:31.616 A:middle
So you do a feed off your iPhone

00:44:31.616 --> 00:44:34.066 A:middle
or iPad directly to a texture in

00:44:34.066 --> 00:44:35.386 A:middle
SceneKit or to the scene

00:44:35.386 --> 00:44:35.966 A:middle
background.

00:44:36.596 --> 00:44:36.776 A:middle
Yeah.

00:44:38.516 --> 00:44:41.896 A:middle
[ Applause ]

00:44:42.396 --> 00:44:43.256 A:middle
Now, I would like to give you a

00:44:43.256 --> 00:44:45.306 A:middle
little trick regarding augmented

00:44:45.306 --> 00:44:46.896 A:middle
reality and shadows.

00:44:47.076 --> 00:44:48.716 A:middle
So the fact is that your object

00:44:48.896 --> 00:44:50.926 A:middle
will look better integrated if

00:44:50.926 --> 00:44:52.706 A:middle
your object casts some shadows

00:44:52.706 --> 00:44:54.576 A:middle
on the ground like in this

00:44:54.576 --> 00:44:57.756 A:middle
example here.

00:44:57.756 --> 00:45:00.266 A:middle
And so the trick is that to

00:45:00.266 --> 00:45:02.266 A:middle
achieve this, we editing our

00:45:02.266 --> 00:45:04.496 A:middle
object in Xcode, we added a

00:45:04.496 --> 00:45:05.886 A:middle
directional light that casts

00:45:05.886 --> 00:45:09.026 A:middle
some shadows, and then we added

00:45:09.026 --> 00:45:10.596 A:middle
a plane to receive the shadows.

00:45:11.166 --> 00:45:12.476 A:middle
Now, the goal is to hide the

00:45:12.476 --> 00:45:13.546 A:middle
plane because we don't want to

00:45:13.546 --> 00:45:16.096 A:middle
see it in our scene, but we

00:45:16.096 --> 00:45:17.576 A:middle
cannot simply make the plane

00:45:17.576 --> 00:45:18.116 A:middle
hidden.

00:45:18.296 --> 00:45:19.866 A:middle
Otherwise, the shadow would

00:45:19.866 --> 00:45:20.366 A:middle
disappear.

00:45:21.136 --> 00:45:23.966 A:middle
So the trick is to configure the

00:45:23.966 --> 00:45:26.306 A:middle
plane to not write in the color

00:45:26.396 --> 00:45:26.666 A:middle
buffer.

00:45:27.396 --> 00:45:28.456 A:middle
This can be done

00:45:28.676 --> 00:45:31.206 A:middle
programmatically or using the

00:45:31.206 --> 00:45:32.356 A:middle
inspector in Xcode.

00:45:32.626 --> 00:45:34.296 A:middle
And if I do this, the plane will

00:45:34.296 --> 00:45:35.736 A:middle
disappear, but the shadow as

00:45:35.736 --> 00:45:35.946 A:middle
well.

00:45:36.896 --> 00:45:38.856 A:middle
But the plane still writes in

00:45:38.856 --> 00:45:40.796 A:middle
the depth buffer, which means

00:45:40.796 --> 00:45:42.046 A:middle
that I cannot configure my

00:45:42.096 --> 00:45:43.236 A:middle
light, and change the shadow

00:45:43.236 --> 00:45:45.826 A:middle
technique, and move from forward

00:45:46.676 --> 00:45:49.126 A:middle
here to default shadows.

00:45:50.166 --> 00:45:52.266 A:middle
And now, the shadow will come

00:45:52.266 --> 00:45:54.306 A:middle
back because default shadows

00:45:54.306 --> 00:45:55.776 A:middle
work as a second pass full

00:45:56.166 --> 00:45:58.416 A:middle
screen, and it will compose

00:45:58.416 --> 00:46:01.286 A:middle
shadows over the image based on

00:46:01.286 --> 00:46:02.756 A:middle
the depth buffer of the scene

00:46:02.756 --> 00:46:03.986 A:middle
and the depth buffer of the

00:46:03.986 --> 00:46:04.506 A:middle
light map.

00:46:05.136 --> 00:46:06.676 A:middle
And so for default shadows, the

00:46:06.676 --> 00:46:08.256 A:middle
plane still exists because the

00:46:08.256 --> 00:46:09.926 A:middle
plane still rendered into the

00:46:09.926 --> 00:46:10.416 A:middle
depth buffer.

00:46:10.416 --> 00:46:13.026 A:middle
So that's for the trick for

00:46:13.026 --> 00:46:14.066 A:middle
shadows in ARKit.

00:46:14.366 --> 00:46:15.656 A:middle
Now, I would like to talk about

00:46:15.656 --> 00:46:16.316 A:middle
GameplayKit.

00:46:17.116 --> 00:46:19.066 A:middle
GameplayKit entity and

00:46:19.066 --> 00:46:20.956 A:middle
components now support driving

00:46:20.956 --> 00:46:21.906 A:middle
SceneKit objects.

00:46:22.416 --> 00:46:23.956 A:middle
The typical use case is when you

00:46:23.956 --> 00:46:25.176 A:middle
want to implement character

00:46:25.176 --> 00:46:26.436 A:middle
behaviors, and that's what we

00:46:26.436 --> 00:46:28.406 A:middle
did in our Fox 2 example for the

00:46:28.406 --> 00:46:28.946 A:middle
enemies.

00:46:29.666 --> 00:46:31.396 A:middle
In our case, we have GKScene

00:46:31.656 --> 00:46:33.446 A:middle
with two entities, one for each

00:46:33.446 --> 00:46:33.866 A:middle
enemy.

00:46:34.616 --> 00:46:36.826 A:middle
And we implemented two behaviors

00:46:36.826 --> 00:46:37.816 A:middle
as GKComponent.

00:46:38.526 --> 00:46:40.516 A:middle
Now, the main interest resides

00:46:40.516 --> 00:46:42.646 A:middle
in the Xcode integration that

00:46:42.646 --> 00:46:44.326 A:middle
allows us to directly assign the

00:46:44.326 --> 00:46:46.566 A:middle
behavior to our enemies directly

00:46:46.566 --> 00:46:47.096 A:middle
in Xcode.

00:46:47.256 --> 00:46:49.186 A:middle
And we can also use the Xcode

00:46:49.186 --> 00:46:51.416 A:middle
inspector to directly edit the

00:46:51.416 --> 00:46:54.446 A:middle
properties of our behaviors.

00:46:56.686 --> 00:46:57.946 A:middle
Next, Model I/O.

00:46:57.946 --> 00:47:00.816 A:middle
Model I/O improved their support

00:47:00.816 --> 00:47:02.426 A:middle
for USD in the 3D.

00:47:02.826 --> 00:47:04.556 A:middle
As a reminder, USD stands for

00:47:04.736 --> 00:47:06.396 A:middle
Universal Scene Description, and

00:47:06.396 --> 00:47:08.766 A:middle
it is a 3D file format developed

00:47:08.766 --> 00:47:09.446 A:middle
by Pixar.

00:47:11.386 --> 00:47:13.056 A:middle
So SceneKit and Model I/O

00:47:13.056 --> 00:47:14.066 A:middle
improved the support for USD

00:47:14.066 --> 00:47:16.206 A:middle
and, in particular, for Metal

00:47:16.206 --> 00:47:17.736 A:middle
I/O's and for animations.

00:47:18.096 --> 00:47:19.286 A:middle
If you want more information

00:47:19.286 --> 00:47:21.626 A:middle
about USD, you can check our

00:47:21.626 --> 00:47:23.996 A:middle
previous presentation from last

00:47:23.996 --> 00:47:25.626 A:middle
year, and that will also be in

00:47:25.626 --> 00:47:27.456 A:middle
our session on Friday afternoon,

00:47:27.746 --> 00:47:29.396 A:middle
From Art to Engine with Model

00:47:29.396 --> 00:47:29.676 A:middle
I/O.

00:47:31.456 --> 00:47:32.956 A:middle
Next is UIFocus.

00:47:33.266 --> 00:47:36.406 A:middle
And so UIFocus engine is part of

00:47:36.486 --> 00:47:38.416 A:middle
UIKit, and it allows you to

00:47:38.416 --> 00:47:40.516 A:middle
select and focus objects on your

00:47:40.516 --> 00:47:43.166 A:middle
Apple TV using the Siri Remote.

00:47:44.406 --> 00:47:46.816 A:middle
Now, SCN, it now conforms to

00:47:46.816 --> 00:47:49.366 A:middle
UIFocusItem, which means that

00:47:49.366 --> 00:47:52.446 A:middle
you can decide which object in

00:47:52.446 --> 00:47:54.736 A:middle
your scene, which object would

00:47:54.736 --> 00:47:56.106 A:middle
be focusable on it.

00:47:57.186 --> 00:47:58.806 A:middle
And then, the focus engine will

00:47:58.806 --> 00:48:00.476 A:middle
call you back and will tell you

00:48:00.476 --> 00:48:01.696 A:middle
what object should be now

00:48:01.696 --> 00:48:03.336 A:middle
focused in response to gestures

00:48:03.336 --> 00:48:04.746 A:middle
on the Apple Siri Remote.

00:48:06.136 --> 00:48:07.196 A:middle
And then, it's up to you to

00:48:07.196 --> 00:48:08.236 A:middle
decide what action you want to

00:48:08.236 --> 00:48:09.726 A:middle
take and what visual feedback

00:48:09.796 --> 00:48:10.526 A:middle
you want to provide.

00:48:11.286 --> 00:48:12.436 A:middle
To briefly explain how this

00:48:12.466 --> 00:48:14.596 A:middle
works, let's say here I

00:48:14.596 --> 00:48:16.116 A:middle
configure the white pieces to be

00:48:16.116 --> 00:48:16.786 A:middle
focusable.

00:48:17.996 --> 00:48:19.316 A:middle
SceneKit will automatically

00:48:19.316 --> 00:48:20.946 A:middle
compute the projected area of

00:48:21.006 --> 00:48:23.296 A:middle
your object and give that to the

00:48:23.296 --> 00:48:23.986 A:middle
focus engine.

00:48:25.066 --> 00:48:26.726 A:middle
Then, the focus engine will take

00:48:26.726 --> 00:48:29.836 A:middle
care of selecting the right

00:48:30.416 --> 00:48:32.566 A:middle
object based on the gestures on

00:48:32.566 --> 00:48:33.096 A:middle
the remote.

00:48:33.656 --> 00:48:36.526 A:middle
And SceneKit will take care of

00:48:37.016 --> 00:48:38.406 A:middle
keeping the projected areas on

00:48:38.406 --> 00:48:40.186 A:middle
the screen updated if you move

00:48:40.186 --> 00:48:41.656 A:middle
your objects or if you move the

00:48:41.656 --> 00:48:42.516 A:middle
camera around.

00:48:43.566 --> 00:48:44.896 A:middle
So the only thing you have to do

00:48:44.896 --> 00:48:46.456 A:middle
here is just to define what

00:48:46.456 --> 00:48:48.006 A:middle
object should be focusable on

00:48:48.006 --> 00:48:48.576 A:middle
it, and that's all.

00:48:49.516 --> 00:48:54.096 A:middle
[ Applause ]

00:48:54.596 --> 00:48:55.316 A:middle
Now, to conclude this

00:48:55.316 --> 00:48:56.736 A:middle
presentation, I would like to

00:48:56.736 --> 00:48:57.896 A:middle
mention a few rendering

00:48:57.896 --> 00:48:59.346 A:middle
additions that we added to our

00:48:59.346 --> 00:48:59.846 A:middle
renderer.

00:49:00.316 --> 00:49:02.066 A:middle
And the first one is a support

00:49:02.066 --> 00:49:03.586 A:middle
for point cloud rendering.

00:49:04.696 --> 00:49:06.466 A:middle
We improved our [inaudible]

00:49:06.466 --> 00:49:07.366 A:middle
object and added these

00:49:07.366 --> 00:49:09.156 A:middle
properties that will allow you

00:49:09.156 --> 00:49:10.736 A:middle
to configure the appearance of

00:49:10.856 --> 00:49:11.536 A:middle
point cloud.

00:49:11.906 --> 00:49:13.796 A:middle
So these properties were

00:49:13.796 --> 00:49:15.826 A:middle
[inaudible] point cloud, which

00:49:15.826 --> 00:49:16.736 A:middle
means that they were created

00:49:16.736 --> 00:49:18.356 A:middle
with an area of point and with a

00:49:18.356 --> 00:49:19.476 A:middle
primitive type point.

00:49:19.966 --> 00:49:21.446 A:middle
And with these properties, you

00:49:21.446 --> 00:49:23.156 A:middle
can configure the size in screen

00:49:23.156 --> 00:49:25.596 A:middle
space and in world space, and

00:49:25.596 --> 00:49:26.916 A:middle
SceneKit will render your point

00:49:26.916 --> 00:49:29.116 A:middle
cloud, and texture them, and

00:49:29.116 --> 00:49:30.386 A:middle
light them according to the

00:49:30.386 --> 00:49:31.956 A:middle
materials that are attached to

00:49:31.956 --> 00:49:32.606 A:middle
your geometry.

00:49:33.086 --> 00:49:37.346 A:middle
Then, we added two new

00:49:37.346 --> 00:49:39.176 A:middle
transparency modes to our

00:49:39.176 --> 00:49:41.736 A:middle
material to address the problems

00:49:41.736 --> 00:49:44.366 A:middle
of double-sided objects or

00:49:44.366 --> 00:49:45.786 A:middle
concave objects that are

00:49:45.826 --> 00:49:46.676 A:middle
semitransparent.

00:49:47.456 --> 00:49:49.006 A:middle
So if you take the object on the

00:49:49.006 --> 00:49:51.346 A:middle
left, you can see a double-sided

00:49:51.346 --> 00:49:53.786 A:middle
sphere, semitransparent, and you

00:49:53.786 --> 00:49:55.616 A:middle
will notice the artifact because

00:49:55.616 --> 00:49:57.386 A:middle
the polygons are not rendered

00:49:57.386 --> 00:49:58.246 A:middle
from back to front.

00:49:58.866 --> 00:50:00.086 A:middle
So SceneKit will render your

00:50:00.086 --> 00:50:01.806 A:middle
objects from back to front for

00:50:01.806 --> 00:50:04.426 A:middle
great transparency, but it won't

00:50:04.736 --> 00:50:07.066 A:middle
sort the individual polygons of

00:50:07.066 --> 00:50:07.706 A:middle
a geometry.

00:50:08.486 --> 00:50:09.846 A:middle
And so to address that problem,

00:50:09.966 --> 00:50:11.256 A:middle
we introduced two new

00:50:11.256 --> 00:50:12.056 A:middle
transparency mode.

00:50:12.306 --> 00:50:15.166 A:middle
So first one, single layer, will

00:50:15.166 --> 00:50:16.906 A:middle
render your object in two passes

00:50:16.906 --> 00:50:19.006 A:middle
to only render the front-most

00:50:19.006 --> 00:50:20.406 A:middle
faces in the second pass.

00:50:20.676 --> 00:50:23.296 A:middle
So that fixes the artifact, but,

00:50:23.296 --> 00:50:24.556 A:middle
as you can see, object doesn't

00:50:24.556 --> 00:50:25.486 A:middle
look double sided.

00:50:25.486 --> 00:50:26.926 A:middle
And the typical use case for

00:50:26.926 --> 00:50:28.416 A:middle
this mode is when you want to

00:50:28.416 --> 00:50:31.136 A:middle
fade out an object and avoid the

00:50:31.336 --> 00:50:34.716 A:middle
artifacts due to the overlapping

00:50:34.716 --> 00:50:36.706 A:middle
polygon during the fade-out.

00:50:37.506 --> 00:50:40.176 A:middle
So second mode, dual layer, will

00:50:40.176 --> 00:50:41.566 A:middle
also render your object in two

00:50:41.566 --> 00:50:42.076 A:middle
passes.

00:50:42.546 --> 00:50:43.646 A:middle
So first pass with render the

00:50:43.646 --> 00:50:45.606 A:middle
back faces, and the second pass

00:50:45.606 --> 00:50:46.926 A:middle
will render the front faces.

00:50:46.996 --> 00:50:48.826 A:middle
And it allows us to render this

00:50:48.826 --> 00:50:50.176 A:middle
double-sided sphere correctly

00:50:50.276 --> 00:50:52.716 A:middle
here and also the gem from our

00:50:52.716 --> 00:50:53.516 A:middle
Fox demo.

00:50:53.836 --> 00:50:55.446 A:middle
And this gem, that comes from

00:50:55.446 --> 00:50:56.976 A:middle
the Swift Playground Learn to

00:50:57.136 --> 00:50:58.186 A:middle
Code curriculum.

00:50:59.976 --> 00:51:02.576 A:middle
One last addition is a support

00:51:02.576 --> 00:51:03.866 A:middle
for cascaded shadow maps.

00:51:04.066 --> 00:51:05.756 A:middle
So cascaded shadow maps is an

00:51:05.756 --> 00:51:07.776 A:middle
optimization of shadow maps.

00:51:08.276 --> 00:51:10.716 A:middle
The idea is that it splits your

00:51:10.716 --> 00:51:12.076 A:middle
shadow maps into multiple

00:51:12.076 --> 00:51:15.246 A:middle
textures or multiple cascades to

00:51:15.246 --> 00:51:17.726 A:middle
allocate more precision to areas

00:51:17.726 --> 00:51:19.256 A:middle
that are closer to the camera

00:51:19.586 --> 00:51:21.156 A:middle
and less precision for areas

00:51:21.156 --> 00:51:21.916 A:middle
that are far away.

00:51:22.896 --> 00:51:24.406 A:middle
To configure cascaded shadow

00:51:24.406 --> 00:51:26.086 A:middle
maps, just tell us how many

00:51:26.086 --> 00:51:27.506 A:middle
cascades you want, you can

00:51:27.506 --> 00:51:28.546 A:middle
configure the size of your

00:51:28.546 --> 00:51:30.486 A:middle
cascade, and then you have a

00:51:30.486 --> 00:51:32.566 A:middle
parameter named

00:51:32.656 --> 00:51:35.626 A:middle
shadowCascadeSplittingFactor

00:51:35.626 --> 00:51:38.316 A:middle
that you can adjust to control

00:51:38.426 --> 00:51:39.736 A:middle
the distribution of your

00:51:39.736 --> 00:51:41.336 A:middle
cascades, depending on the

00:51:41.336 --> 00:51:42.736 A:middle
distance from the point of view.

00:51:43.396 --> 00:51:45.516 A:middle
For example, this is a recording

00:51:45.516 --> 00:51:48.476 A:middle
on, from our Fox 2 example, and

00:51:48.476 --> 00:51:49.696 A:middle
in our case, we're using full

00:51:49.696 --> 00:51:51.336 A:middle
cascade, represented by

00:51:51.336 --> 00:51:56.426 A:middle
different color tint here, and

00:51:56.426 --> 00:51:57.676 A:middle
here I'm playing with the

00:51:57.676 --> 00:51:59.286 A:middle
splitting factor so that you can

00:51:59.286 --> 00:52:01.186 A:middle
get an idea on how this impacts

00:52:01.186 --> 00:52:03.306 A:middle
distribution on the cascade

00:52:03.306 --> 00:52:04.346 A:middle
depending on the distance from

00:52:04.346 --> 00:52:04.906 A:middle
the point of view.

00:52:05.966 --> 00:52:07.646 A:middle
As you can see, the right area

00:52:07.646 --> 00:52:09.096 A:middle
represents the first cascade,

00:52:09.216 --> 00:52:10.686 A:middle
and so it represents a smaller

00:52:10.686 --> 00:52:12.536 A:middle
area of the world, and so we

00:52:12.536 --> 00:52:14.016 A:middle
have higher precision there,

00:52:14.626 --> 00:52:16.686 A:middle
whereas the green cascade in the

00:52:16.686 --> 00:52:18.206 A:middle
back represents a much larger

00:52:18.206 --> 00:52:19.486 A:middle
area, and so we're fewer

00:52:19.486 --> 00:52:21.516 A:middle
precision for the green cascade.

00:52:22.466 --> 00:52:24.236 A:middle
Note that you can, you are also

00:52:24.236 --> 00:52:26.516 A:middle
able to visualize cascaded

00:52:26.516 --> 00:52:28.716 A:middle
shadow maps with your own scene

00:52:28.776 --> 00:52:29.706 A:middle
using Xcode.

00:52:32.096 --> 00:52:34.996 A:middle
Okay, to wrap up, so this new

00:52:34.996 --> 00:52:37.716 A:middle
version of SceneKit introduced

00:52:37.716 --> 00:52:39.596 A:middle
new camera APIs to simplify the

00:52:39.596 --> 00:52:41.336 A:middle
control of cameras with some new

00:52:41.336 --> 00:52:42.696 A:middle
great effects like depths of

00:52:42.696 --> 00:52:44.856 A:middle
field, motion blur, and screen

00:52:44.856 --> 00:52:45.926 A:middle
space ambient occlusion.

00:52:47.346 --> 00:52:49.266 A:middle
Also, a great GPU support for

00:52:49.266 --> 00:52:50.626 A:middle
tessellation and subdivision.

00:52:51.076 --> 00:52:52.306 A:middle
Some new APIs.

00:52:52.526 --> 00:52:53.676 A:middle
Much more performant for

00:52:53.676 --> 00:52:55.126 A:middle
animations and with the

00:52:55.126 --> 00:52:56.196 A:middle
animation blending.

00:52:57.276 --> 00:52:58.586 A:middle
Some new, great tools to

00:52:58.806 --> 00:53:01.056 A:middle
capture, trace, and edit your

00:53:01.116 --> 00:53:01.416 A:middle
scenes.

00:53:01.746 --> 00:53:02.986 A:middle
And of course, a really great

00:53:02.986 --> 00:53:04.596 A:middle
story for augmented reality

00:53:04.876 --> 00:53:05.876 A:middle
thanks to ARKit.

00:53:07.796 --> 00:53:09.406 A:middle
For more information, please

00:53:09.406 --> 00:53:10.856 A:middle
check our developer website.

00:53:11.376 --> 00:53:13.696 A:middle
You can access our sample code

00:53:13.696 --> 00:53:15.836 A:middle
from there.

00:53:15.946 --> 00:53:19.506 A:middle
Some related sessions.

00:53:19.926 --> 00:53:21.606 A:middle
So [inaudible], graphic

00:53:21.606 --> 00:53:23.566 A:middle
technologies that SceneKit

00:53:23.566 --> 00:53:25.556 A:middle
integrate with, like Metal,

00:53:25.556 --> 00:53:26.976 A:middle
SpriteKit, and Model I/O, of

00:53:26.976 --> 00:53:27.366 A:middle
course.

00:53:28.396 --> 00:53:30.446 A:middle
There will be, there is a

00:53:30.446 --> 00:53:32.316 A:middle
session about tvOS and UIFocus

00:53:32.476 --> 00:53:33.156 A:middle
support.

00:53:33.156 --> 00:53:34.276 A:middle
And there will be a great

00:53:34.276 --> 00:53:36.176 A:middle
session tomorrow about SceneKit,

00:53:36.176 --> 00:53:37.466 A:middle
using SceneKit in Swift

00:53:37.466 --> 00:53:39.896 A:middle
Playground tomorrow morning.

00:53:40.246 --> 00:53:41.446 A:middle
And that's about it.

00:53:41.976 --> 00:53:42.336 A:middle
Thank you.

00:53:43.016 --> 00:53:45.000 A:middle
[ Applause ]