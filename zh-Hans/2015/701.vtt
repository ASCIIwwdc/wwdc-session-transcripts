WEBVTT

00:00:20.954 --> 00:00:25.959 align:middle
《Wallet—苹果付款与
更多功能的所在地》

00:00:27.327 --> 00:00:28.795 align:middle
好的 大家早上好

00:00:28.862 --> 00:00:31.532 align:middle
欢迎来到第701讲座环节

00:00:31.798 --> 00:00:32.665 align:middle
我叫达文

00:00:32.933 --> 00:00:34.501 align:middle
我非常高兴在这里

00:00:34.635 --> 00:00:37.204 align:middle
跟大家谈谈"Wallet"

00:00:37.604 --> 00:00:40.140 align:middle
就是之前被称为
"通行证"的app

00:00:40.607 --> 00:00:42.009 align:middle
有了新名字

00:00:42.176 --> 00:00:44.745 align:middle
我们也换了新logo

00:00:45.812 --> 00:00:47.281 align:middle
如果你安装了iOS 9你也许

00:00:47.681 --> 00:00:49.016 align:middle
已经见到我们的图标了

00:00:49.216 --> 00:00:50.784 align:middle
这就是我们的新图标

00:00:51.952 --> 00:00:54.154 align:middle
但是美丽不仅在于外表

00:00:54.788 --> 00:00:57.391 align:middle
过去几年
我们一直在为Wallet

00:00:57.457 --> 00:00:58.358 align:middle
开发新的特性

00:00:58.592 --> 00:01:00.827 align:middle
今天我们会谈到几个那样的特性

00:00:58.592 --> 00:01:00.827 align:middle
今天我们会谈到几个那样的特性

00:01:01.161 --> 00:01:02.362 align:middle
让我们看看今天的安排

00:01:03.197 --> 00:01:05.199 align:middle
和今天要谈论的内容

00:01:05.999 --> 00:01:08.168 align:middle
首先 我们看一下
我们一直在做的事情

00:01:08.936 --> 00:01:11.672 align:middle
之后
简要回顾一下历史

00:01:12.005 --> 00:01:13.974 align:middle
关于Wallet所有特性的回顾

00:01:14.541 --> 00:01:16.610 align:middle
我们会讲到什么是通行证

00:01:17.077 --> 00:01:19.913 align:middle
我们会谈谈iOS内的
PassKit框架

00:01:20.314 --> 00:01:21.748 align:middle
我们还要谈谈苹果支付

00:01:22.349 --> 00:01:24.351 align:middle
和...其他内容

00:01:24.484 --> 00:01:25.319 align:middle
所以别走开

00:01:25.385 --> 00:01:27.321 align:middle
今天要谈的内容非常丰富

00:01:27.855 --> 00:01:29.289 align:middle
那么我们一直在做些什么呢？

00:01:29.556 --> 00:01:32.025 align:middle
苹果支付就是我们一直在做的工作

00:01:32.392 --> 00:01:34.828 align:middle
苹果支付是去年秋天推出的

00:01:35.362 --> 00:01:36.630 align:middle
反应...

00:01:37.030 --> 00:01:37.865 align:middle
非常好！

00:01:38.232 --> 00:01:40.534 align:middle
消费者们喜欢它的简单易用

00:01:40.734 --> 00:01:43.737 align:middle
商户们喜欢它的高转化率

00:01:45.205 --> 00:01:48.275 align:middle
现在有了苹果支付
就能完成无接触付款

00:01:48.642 --> 00:01:50.511 align:middle
无论是在我们的手机上
还是在手表上

00:01:50.777 --> 00:01:52.446 align:middle
我们甚至发布了一个API

00:01:52.513 --> 00:01:56.950 align:middle
所以你可以在你的app中
安装苹果支付

00:01:58.218 --> 00:02:00.888 align:middle
为了更好地理解Wallet的实质

00:01:58.218 --> 00:02:00.888 align:middle
为了更好地理解Wallet的实质

00:02:01.088 --> 00:02:02.556 align:middle
理解我们为什么开发它

00:02:02.756 --> 00:02:04.758 align:middle
我们要回顾一下

00:02:05.392 --> 00:02:06.360 align:middle
回顾我们过去的足迹

00:02:06.493 --> 00:02:08.428 align:middle
了解我们如何来到这里

00:02:10.163 --> 00:02:10.997 align:middle
这...

00:02:11.698 --> 00:02:12.833 align:middle
是不是似曾相识？

00:02:12.900 --> 00:02:13.734 align:middle
是不是眼熟？

00:02:14.067 --> 00:02:15.969 align:middle
是不是谁有这样的Wallet？

00:02:17.304 --> 00:02:18.138 align:middle
我敢肯定观众中

00:02:18.205 --> 00:02:20.073 align:middle
有人的Wallet是像这样的！

00:02:20.407 --> 00:02:21.708 align:middle
这就是真正的问题所在

00:02:22.409 --> 00:02:23.977 align:middle
我们把礼品卡放在这里

00:02:24.044 --> 00:02:26.079 align:middle
借记卡和信用卡放这里

00:02:26.280 --> 00:02:27.247 align:middle
还有优惠券

00:02:27.981 --> 00:02:29.550 align:middle
然后当我们想要找东西时

00:02:30.250 --> 00:02:31.385 align:middle
我们却找不到

00:02:32.619 --> 00:02:34.054 align:middle
Wallet里塞的东西太多

00:02:34.254 --> 00:02:36.056 align:middle
这真的是个问题

00:02:36.757 --> 00:02:39.193 align:middle
我们在试图用
Wallet解决这个问题

00:02:40.027 --> 00:02:42.262 align:middle
我们是用通行证实现的

00:02:43.363 --> 00:02:45.165 align:middle
在Wallet中有好看的通行证

00:02:45.599 --> 00:02:46.633 align:middle
我们有通行证

00:02:46.900 --> 00:02:47.768 align:middle
优惠券

00:02:48.268 --> 00:02:49.236 align:middle
有活动门票

00:02:49.803 --> 00:02:50.904 align:middle
有商家卡

00:02:51.171 --> 00:02:53.006 align:middle
甚至有登机牌

00:02:53.707 --> 00:02:56.109 align:middle
但所有这些通行证的
共同点就是

00:02:56.410 --> 00:03:00.647 align:middle
它们让我们能够
将其用于现实世界中

00:02:56.410 --> 00:03:00.647 align:middle
它们让我们能够
将其用于现实世界中

00:03:01.215 --> 00:03:02.049 align:middle
现在

00:03:03.150 --> 00:03:05.519 align:middle
有了苹果支付
我们的信用卡

00:03:05.786 --> 00:03:08.322 align:middle
借记卡也都可以放在Wallet里

00:03:09.022 --> 00:03:10.057 align:middle
不仅如此

00:03:10.123 --> 00:03:11.925 align:middle
我们想要解决无法
在合适的地点

00:03:11.992 --> 00:03:13.594 align:middle
合适的时间找到东西这一问题

00:03:13.660 --> 00:03:14.595 align:middle
所以我们在

00:03:15.295 --> 00:03:16.997 align:middle
所有通行证内部建立了关联性

00:03:17.064 --> 00:03:17.931 align:middle
看起来就是这样子

00:03:17.998 --> 00:03:19.399 align:middle
如果你到了机场

00:03:19.700 --> 00:03:21.802 align:middle
你的登机牌就在那里等你

00:03:22.302 --> 00:03:24.638 align:middle
我要做的就是
把锁定的手机屏幕划开

00:03:24.872 --> 00:03:25.939 align:middle
然后我的登机牌...

00:03:26.306 --> 00:03:27.774 align:middle
就能...用了

00:03:28.509 --> 00:03:29.743 align:middle
太棒了！

00:03:29.810 --> 00:03:32.846 align:middle
这真的是带来了莫大的惊喜

00:03:33.580 --> 00:03:34.882 align:middle
让我们看看这些通行证

00:03:37.351 --> 00:03:39.987 align:middle
从根本上讲
这些通行证包含信息

00:03:41.555 --> 00:03:43.790 align:middle
在左上角你会看到一个logo

00:03:44.291 --> 00:03:47.861 align:middle
清楚表明这个通行证
属于哪个实体

00:03:48.028 --> 00:03:49.096 align:middle
现在我们专门来看一下

00:03:49.162 --> 00:03:50.797 align:middle
美国联合航空公司的登机牌

00:03:51.532 --> 00:03:52.633 align:middle
他们的logo...

00:03:52.833 --> 00:03:54.668 align:middle
就在上方的显著位置

00:03:54.735 --> 00:03:55.569 align:middle
在左上角

00:03:56.737 --> 00:03:59.439 align:middle
我们把重要的信息都放在标头栏

00:04:00.541 --> 00:04:02.709 align:middle
就像登机口信息就在这里

00:04:03.177 --> 00:04:05.812 align:middle
用户将会清楚地知道
在他们的登机时间

00:04:06.213 --> 00:04:07.915 align:middle
他们该去哪个登机口

00:04:08.782 --> 00:04:10.717 align:middle
再往下的主要区域

00:04:10.951 --> 00:04:12.819 align:middle
是我们的其他重要信息

00:04:13.620 --> 00:04:15.589 align:middle
就这个例子而言
我们的航班

00:04:16.423 --> 00:04:17.624 align:middle
从纽瓦克起飞

00:04:18.392 --> 00:04:20.060 align:middle
终点是斯德哥尔摩

00:04:22.196 --> 00:04:24.765 align:middle
还有辅助和次要区域

00:04:24.998 --> 00:04:28.402 align:middle
那里有我们最好知道的
其他信息

00:04:28.468 --> 00:04:30.204 align:middle
比如说座位号

00:04:31.839 --> 00:04:33.540 align:middle
当然了我们有...

00:04:34.208 --> 00:04:35.075 align:middle
条形码

00:04:35.142 --> 00:04:36.276 align:middle
这就是那个链接

00:04:36.677 --> 00:04:39.746 align:middle
它所含的信息
把用户链接到您的系统

00:04:39.813 --> 00:04:41.782 align:middle
以便在现实世界中完成操作
在刚才的例子中

00:04:41.915 --> 00:04:46.887 align:middle
登机牌帮助我们的用户登机

00:04:48.755 --> 00:04:50.791 align:middle
我们把它翻到背面

00:04:51.024 --> 00:04:52.893 align:middle
通行证的背面

00:04:53.493 --> 00:04:54.361 align:middle
你马上会注意到

00:04:54.428 --> 00:04:58.298 align:middle
在最顶端
您可以把某个app与通行证关联

00:04:58.632 --> 00:04:59.466 align:middle
准确无误地

00:05:00.000 --> 00:05:01.535 align:middle
我们让
联合航空公司的app

00:05:02.302 --> 00:05:03.737 align:middle
与这个登机牌进行关联

00:05:04.371 --> 00:05:06.139 align:middle
这里也有两个用户选项

00:05:06.473 --> 00:05:08.675 align:middle
能自动升级这个登机牌

00:05:08.742 --> 00:05:09.576 align:middle
这很重要

00:05:09.643 --> 00:05:12.646 align:middle
我们在稍后的讲解中会谈到这点

00:05:12.713 --> 00:05:16.450 align:middle
能够升级这些登机牌
就是保持信息的更新

00:05:17.184 --> 00:05:19.786 align:middle
我们也能够在登机牌背面

00:05:19.953 --> 00:05:21.154 align:middle
开启关闭关联

00:05:21.221 --> 00:05:24.258 align:middle
这就是选项按钮
"在锁屏上提示登机牌"

00:05:24.658 --> 00:05:26.493 align:middle
除此之外 在登机牌背面

00:05:26.560 --> 00:05:29.062 align:middle
还含有其他一些需要了解的信息

00:05:29.129 --> 00:05:32.633 align:middle
比如说条款之类的东西
也可以出现在登机牌背面

00:05:33.834 --> 00:05:36.803 align:middle
那么是什么让通行证
成为通行证？

00:05:37.304 --> 00:05:40.407 align:middle
让我们看看这个漂亮的美国职业
棒球大联盟(MLB)赛事门票

00:05:42.042 --> 00:05:45.479 align:middle
这个通行证由一个
pass.json file生成

00:05:45.546 --> 00:05:47.381 align:middle
它的内容和版面

00:05:47.447 --> 00:05:49.149 align:middle
由这个文件定义的

00:05:49.216 --> 00:05:52.419 align:middle
它就是您的标准JSON文件
含有各种键和值

00:05:52.819 --> 00:05:55.556 align:middle
在本例中
键和值决定通行证的

00:05:55.789 --> 00:05:58.125 align:middle
内容
风格和版面

00:05:59.459 --> 00:06:02.896 align:middle
这个MLB通行证
有些的确漂亮的图片

00:05:59.459 --> 00:06:02.896 align:middle
这个MLB通行证
有些的确漂亮的图片

00:06:03.797 --> 00:06:06.533 align:middle
我们在左上角有个logo图片

00:06:07.467 --> 00:06:09.703 align:middle
我们有个横跨通行证左右两侧的
长条形图片

00:06:09.770 --> 00:06:11.572 align:middle
它让整个通行证生动起来

00:06:13.140 --> 00:06:14.408 align:middle
当我们把所有这些打包

00:06:14.474 --> 00:06:18.245 align:middle
我们就得到了被称为
PKPass的文件

00:06:19.513 --> 00:06:21.748 align:middle
文件的层次结构就是这样

00:06:22.516 --> 00:06:25.118 align:middle
你的PKPass文件包含
pass.json

00:06:25.752 --> 00:06:27.321 align:middle
和刚才讲过的图片

00:06:27.855 --> 00:06:30.490 align:middle
以及另外几个我要讲到的文件

00:06:31.291 --> 00:06:33.393 align:middle
首先 这里包含本地化字符串

00:06:33.961 --> 00:06:35.529 align:middle
是的 通行证能被本地化

00:06:35.596 --> 00:06:37.397 align:middle
我建议你们这么做

00:06:38.832 --> 00:06:39.867 align:middle
你还会在底部注意到

00:06:40.067 --> 00:06:43.704 align:middle
清单文件和签名文件

00:06:44.738 --> 00:06:46.640 align:middle
我们的通行证签名加密的

00:06:46.740 --> 00:06:49.042 align:middle
这样它的真实性才能被验证

00:06:49.510 --> 00:06:52.713 align:middle
用户们也能知道
通行证来自于一个已知实体

00:06:54.047 --> 00:06:54.882 align:middle
这很不错

00:06:54.982 --> 00:06:56.683 align:middle
所以现在有了PK通行证文件

00:06:56.750 --> 00:06:58.385 align:middle
到这里它只是个
普通的通行证文件

00:06:58.452 --> 00:06:59.753 align:middle
我们如何把它变成独一无二？

00:06:59.820 --> 00:07:02.122 align:middle
成为你的通行证呢？

00:06:59.820 --> 00:07:02.122 align:middle
成为你的通行证呢？

00:07:02.422 --> 00:07:04.091 align:middle
我们使用三个不同的值

00:07:04.358 --> 00:07:07.361 align:middle
确保你的通行证是独一无二的

00:07:08.495 --> 00:07:10.998 align:middle
第一个是团队标识符

00:07:11.064 --> 00:07:13.100 align:middle
这是有10个字母的字符串

00:07:13.400 --> 00:07:15.169 align:middle
在开发者门户网站里能够找到

00:07:15.536 --> 00:07:17.471 align:middle
我们用它来让app

00:07:17.871 --> 00:07:20.741 align:middle
通过PassKit即我们的架构
获得访问授权

00:07:22.543 --> 00:07:25.612 align:middle
我们使用的第二值是
passTypeIdentifier

00:07:25.979 --> 00:07:29.316 align:middle
现在
它可以对通行证进行分类

00:07:29.383 --> 00:07:30.951 align:middle
确定它是哪类通行证

00:07:31.485 --> 00:07:34.221 align:middle
你也需在开发者
门户网站进行注册

00:07:34.855 --> 00:07:38.025 align:middle
我们也用它对通行证进行归类

00:07:39.059 --> 00:07:42.329 align:middle
最后
我们有通行证序列号

00:07:43.230 --> 00:07:45.732 align:middle
每个通行证的序列号都是唯一的

00:07:45.799 --> 00:07:48.569 align:middle
完全由你个人自行选择
我们无法获晓

00:07:49.570 --> 00:07:52.105 align:middle
现在我们把这个值
即序列号

00:07:52.573 --> 00:07:53.974 align:middle
和通行证类型标识结合起来

00:07:54.675 --> 00:07:58.212 align:middle
就能确保你的通行证
在世界上是独一无二的

00:07:59.913 --> 00:08:02.883 align:middle
和所有这些值一道
您也通过pass.json

00:07:59.913 --> 00:08:02.883 align:middle
和所有这些值一道
您也通过pass.json

00:08:02.950 --> 00:08:05.252 align:middle
声明您的通行证的关联性

00:08:05.552 --> 00:08:06.954 align:middle
我们现在就看看关联性

00:08:07.955 --> 00:08:08.922 align:middle
关联性...

00:08:09.356 --> 00:08:11.625 align:middle
有三个层面

00:08:13.393 --> 00:08:14.595 align:middle
你可以使用日期

00:08:15.295 --> 00:08:16.430 align:middle
可以用位置

00:08:17.130 --> 00:08:18.732 align:middle
还可以用信标

00:08:18.899 --> 00:08:22.269 align:middle
是三者的结合

00:08:22.469 --> 00:08:25.272 align:middle
使得通行证变得
真真正正的强大

00:08:26.773 --> 00:08:28.876 align:middle
下面我们看一下
我们如何在pass.json

00:08:28.942 --> 00:08:30.844 align:middle
实施关联性

00:08:31.278 --> 00:08:32.279 align:middle
我们有几个键

00:08:32.846 --> 00:08:35.616 align:middle
首先我们来看位置键

00:08:36.015 --> 00:08:37.017 align:middle
这需要...

00:08:37.384 --> 00:08:38.352 align:middle
字典阵列

00:08:38.652 --> 00:08:43.123 align:middle
字典内含一对经纬度坐标

00:08:43.390 --> 00:08:44.858 align:middle
和一个可选的关联性文本

00:08:45.058 --> 00:08:47.160 align:middle
当你的用户
位于或接近那个位置时

00:08:47.261 --> 00:08:48.996 align:middle
这个关联性文本会出现

00:08:49.463 --> 00:08:51.932 align:middle
因此
向用户声明...

00:08:52.232 --> 00:08:53.901 align:middle
能够向用户阐明

00:08:53.967 --> 00:08:56.770 align:middle
为何展示那个内容
是有帮助的

00:08:57.571 --> 00:08:59.740 align:middle
我们还有关联日期

00:09:00.374 --> 00:09:03.810 align:middle
而那正是您使用的标准的
W3C格式relevantDate

00:09:04.545 --> 00:09:06.613 align:middle
然后 我们有信标

00:09:08.081 --> 00:09:09.116 align:middle
信标键...

00:09:09.583 --> 00:09:10.417 align:middle
是一个阵列

00:09:10.884 --> 00:09:12.619 align:middle
在这个阵列中是字典

00:09:13.220 --> 00:09:16.823 align:middle
proximityUUID
能确认你的信标的唯一性

00:09:17.291 --> 00:09:19.159 align:middle
这里又再次出现了关联文本

00:09:19.226 --> 00:09:20.928 align:middle
还有可选的姓名字段

00:09:21.228 --> 00:09:22.396 align:middle
再强调一遍
当你把所有

00:09:22.462 --> 00:09:24.531 align:middle
这些关联分类组合在一起

00:09:24.865 --> 00:09:28.268 align:middle
你的通行证就能变得
真真正正的强大

00:09:28.335 --> 00:09:30.003 align:middle
这些已经在发挥功效的特性

00:09:30.070 --> 00:09:31.438 align:middle
对您的用户也是莫大的惊喜

00:09:32.472 --> 00:09:34.608 align:middle
用户对通行证感兴趣的前提

00:09:34.675 --> 00:09:37.277 align:middle
是他们的信息是最新的

00:09:37.578 --> 00:09:39.746 align:middle
那么如何让我们的通行证
保持最新状态？

00:09:39.813 --> 00:09:42.883 align:middle
现在我将从一个非常高的
层面上来看一下

00:09:42.950 --> 00:09:43.917 align:middle
它是如何工作的

00:09:44.218 --> 00:09:45.519 align:middle
而且我将参考回顾一个

00:09:45.586 --> 00:09:48.789 align:middle
我们在2012年的
WWDC上的讲座

00:09:49.022 --> 00:09:50.924 align:middle
那个讲座深入探讨了这一话题

00:09:51.291 --> 00:09:52.526 align:middle
现在就让我们观看这段讲座

00:09:54.895 --> 00:09:57.698 align:middle
因此你的服务器将实施
苹果推送服务

00:09:57.764 --> 00:09:59.533 align:middle
我们就是利用苹果推送服务

00:09:59.600 --> 00:10:01.768 align:middle
来启动通行证更新

00:09:59.600 --> 00:10:01.768 align:middle
来启动通行证更新

00:10:02.970 --> 00:10:06.206 align:middle
我们向下传递通行证类型标识

00:10:06.340 --> 00:10:08.475 align:middle
刚刚前面几个幻灯片讲到过

00:10:09.643 --> 00:10:12.713 align:middle
有了通行证类型标识 我们就
可以查看你的pass.json

00:10:13.146 --> 00:10:15.716 align:middle
寻找网络服务密钥

00:10:16.750 --> 00:10:18.785 align:middle
这个密钥中将包含一个URL

00:10:19.086 --> 00:10:19.920 align:middle
利用它我们就能

00:10:20.354 --> 00:10:21.989 align:middle
请求更新通行证

00:10:22.456 --> 00:10:26.326 align:middle
然后我们就能让带有所有
更新内容的全新 pkpass文件

00:10:26.393 --> 00:10:30.030 align:middle
向下传递到我们的设备
之后我们就更新用户通行证

00:10:30.898 --> 00:10:33.300 align:middle
那就是站在一个很高的层面上看
它是如何工作的

00:10:33.600 --> 00:10:37.371 align:middle
我强烈推荐大家回去看看
那个2012年的WWDC讲座

00:10:37.838 --> 00:10:42.109 align:middle
探究如何为通行证实施网络服务

00:10:43.544 --> 00:10:46.947 align:middle
非常好 现在让我们看看
如何以编程方式

00:10:47.014 --> 00:10:48.015 align:middle
获取这些通行证

00:10:48.515 --> 00:10:50.851 align:middle
我们确实在iOS操作系统内
内置了PassKit

00:10:50.984 --> 00:10:52.119 align:middle
我们看怎么用这个工具包

00:10:53.020 --> 00:10:54.855 align:middle
我们在PassKit中
使用较多的类是

00:10:54.922 --> 00:10:59.259 align:middle
是工具包里的PK通行证库
(PKPassLibrary)

00:10:59.693 --> 00:11:01.161 align:middle
这是为您提供的链接

00:10:59.693 --> 00:11:01.161 align:middle
这是为您提供的链接

00:11:01.228 --> 00:11:04.131 align:middle
你用它能够查询你用户的通行证

00:11:05.032 --> 00:11:07.401 align:middle
而对它的访问
则需要授权

00:11:07.768 --> 00:11:09.203 align:middle
我们在前面一点讲到过

00:11:09.469 --> 00:11:12.005 align:middle
是通过使用你的通行证类型标识

00:11:12.806 --> 00:11:15.909 align:middle
下面来看一下
PKPassLibrary的一些使用方法

00:11:17.611 --> 00:11:20.581 align:middle
首先我们有个函数
它询问：

00:11:20.881 --> 00:11:24.251 align:middle
在这台设备上是否有通行证库可用

00:11:24.318 --> 00:11:25.385 align:middle
这是个很必要的问题

00:11:26.720 --> 00:11:28.922 align:middle
如果答案是有
我们就能得到...

00:11:30.157 --> 00:11:30.991 align:middle
通行证

00:11:32.359 --> 00:11:35.863 align:middle
当你调用通行证时
你会取回一个PK Pass阵列

00:11:36.496 --> 00:11:39.366 align:middle
这些是你被授权看到的
所有通行证

00:11:40.667 --> 00:11:42.870 align:middle
你也会找到一个你正在寻找的

00:11:42.936 --> 00:11:43.904 align:middle
特别的 具体的通行证

00:11:43.971 --> 00:11:46.740 align:middle
方法是通过调用
passWithPassTypeIdentifier

00:11:47.207 --> 00:11:49.743 align:middle
传递标识后加字符串

00:11:49.810 --> 00:11:50.811 align:middle
序列号后加字符串

00:11:50.878 --> 00:11:53.046 align:middle
这样你就能得到
你想要找的通行证了

00:11:53.447 --> 00:11:56.450 align:middle
我们还有另一个
passesOfType

00:11:56.950 --> 00:11:58.151 align:middle
用来传递PK通行证类型

00:11:58.218 --> 00:12:00.420 align:middle
你可能会想知道
都有哪些不同类型的通行证？

00:11:58.218 --> 00:12:00.420 align:middle
你可能会想知道
都有哪些不同类型的通行证？

00:12:00.821 --> 00:12:01.655 align:middle
它们分为...

00:12:02.022 --> 00:12:02.856 align:middle
条形码

00:12:03.357 --> 00:12:04.191 align:middle
支付

00:12:04.691 --> 00:12:05.526 align:middle
和任意类型

00:12:06.560 --> 00:12:07.995 align:middle
你也许还会问

00:12:08.161 --> 00:12:10.030 align:middle
达文
为什么要获取通行证？

00:12:10.097 --> 00:12:11.765 align:middle
为什么要看用户的通行证？

00:12:12.199 --> 00:12:14.134 align:middle
作为开发者你应该知道

00:12:14.201 --> 00:12:18.372 align:middle
你用户系统上已安装的所有通行证

00:12:18.672 --> 00:12:20.007 align:middle
那样你就不用再重做一遍了

00:12:20.674 --> 00:12:23.510 align:middle
对于支付通行证
我们前面讲到了

00:12:23.577 --> 00:12:25.712 align:middle
银行和其他商户要能够激活

00:12:26.146 --> 00:12:30.317 align:middle
你用户通行证库里的支付通行证

00:12:30.384 --> 00:12:33.053 align:middle
我们进到苹果支付部分内容后
将对其进行深入探讨

00:12:33.654 --> 00:12:35.789 align:middle
现在我们把所有通行证汇集在一起

00:12:35.856 --> 00:12:36.957 align:middle
他们设计美观
相互关联

00:12:37.024 --> 00:12:38.125 align:middle
实时更新
我们如何能够

00:12:38.192 --> 00:12:39.726 align:middle
让它们进入我们的用户手中呢？

00:12:40.827 --> 00:12:43.363 align:middle
PKPass文件非常的便携

00:12:44.531 --> 00:12:46.166 align:middle
你可以从网址上下载

00:12:46.633 --> 00:12:48.202 align:middle
用电子邮件发送给你的用户

00:12:48.502 --> 00:12:50.904 align:middle
你甚至可以把它装进你的apps

00:12:52.339 --> 00:12:54.908 align:middle
我还要指出它的一个小功能

00:12:55.209 --> 00:12:57.144 align:middle
让我们专门看一下

00:12:57.211 --> 00:12:59.880 align:middle
iOS apps里的PKPass
文档 比如邮件

00:13:01.515 --> 00:13:04.551 align:middle
当我们用电子邮件
接收了一个PKPass文档

00:13:04.885 --> 00:13:06.987 align:middle
Mail会对它进行特殊的处理

00:13:07.054 --> 00:13:10.691 align:middle
点击这个按钮你就能获悉
在这封电子邮件里

00:13:10.757 --> 00:13:12.626 align:middle
是什么PKPass文档

00:13:13.527 --> 00:13:17.397 align:middle
如果你在某个网站上托管它
或把它装进某个app

00:13:17.464 --> 00:13:19.066 align:middle
我们甚至为您提供一个横幅广告

00:13:19.132 --> 00:13:22.302 align:middle
你可以把它加入网站
或装在你的app上

00:13:24.004 --> 00:13:24.838 align:middle
但你会告诉说：

00:13:24.905 --> 00:13:27.441 align:middle
达文
你知道你是在讲Passbook吧

00:13:28.141 --> 00:13:30.010 align:middle
是的 我知道
这是在说Passbook

00:13:30.077 --> 00:13:32.579 align:middle
这个是我正在谈的
一个不错的小过渡

00:13:33.814 --> 00:13:35.249 align:middle
我们正处于过渡期

00:13:35.682 --> 00:13:37.718 align:middle
我们正要从Passbook
过渡到Wallet

00:13:37.985 --> 00:13:40.888 align:middle
目前 在公共场合
我们还叫Passbook

00:13:40.954 --> 00:13:42.022 align:middle
所以请记住这一点

00:13:42.856 --> 00:13:45.325 align:middle
但请随时关注
随着离我们发布iOS 9的

00:13:45.392 --> 00:13:47.094 align:middle
时间越来越近

00:13:47.160 --> 00:13:50.063 align:middle
我们会让大家第一时间知晓

00:13:51.164 --> 00:13:52.699 align:middle
很高兴能谈到这些

00:13:53.500 --> 00:13:57.304 align:middle
但我们要说必须以编程方式
添加这些通行证

00:13:57.371 --> 00:13:58.238 align:middle
你要怎么来做呢？

00:13:58.872 --> 00:14:00.607 align:middle
是的PKPassLibrary
能够做到

00:13:58.872 --> 00:14:00.607 align:middle
是的PKPassLibrary
能够做到

00:14:01.074 --> 00:14:04.344 align:middle
我们有个函数叫
addPasses

00:14:05.078 --> 00:14:06.647 align:middle
对了
多个通行证

00:14:06.713 --> 00:14:07.981 align:middle
为什么要这样做？

00:14:08.482 --> 00:14:09.316 align:middle
设想一下...

00:14:09.683 --> 00:14:12.219 align:middle
就像一个航班分为几段

00:14:12.452 --> 00:14:16.256 align:middle
而你想要一次处理所有通行证

00:14:16.823 --> 00:14:17.958 align:middle
这是个很好的方法

00:14:18.025 --> 00:14:22.029 align:middle
所以addPasses
withCompletionHandler

00:14:22.362 --> 00:14:24.064 align:middle
会用非常简短巧妙的对话
提醒用户

00:14:24.131 --> 00:14:26.233 align:middle
向库中添加这些通行证

00:14:26.300 --> 00:14:28.535 align:middle
有一点你要确定
在调用前你已告知用户

00:14:28.735 --> 00:14:32.206 align:middle
他们正在添加通行证

00:14:33.707 --> 00:14:36.510 align:middle
当然我们还有另一种方式
添加通行证入库

00:14:37.110 --> 00:14:39.813 align:middle
即使用
PKAddPassesViewController

00:14:40.514 --> 00:14:43.283 align:middle
若你曾在Mail里加过通行证
那么你可能见过这个命令

00:14:43.450 --> 00:14:44.751 align:middle
它看上去和这个类似

00:14:45.519 --> 00:14:46.553 align:middle
您点击一个通行证

00:14:47.321 --> 00:14:49.990 align:middle
它们会调用
PKAddPassesViewController

00:14:50.057 --> 00:14:52.259 align:middle
就会出现一个已经过充分渲染的
漂亮的视图控件

00:14:52.326 --> 00:14:55.462 align:middle
并在顶部提供了
用户可以选择的动作

00:14:56.396 --> 00:14:57.264 align:middle
这是如何工作的？

00:14:57.397 --> 00:15:00.100 align:middle
PKAddPassesViewerController
有个功能

00:14:57.397 --> 00:15:00.100 align:middle
PKAddPassesViewerController
有个功能

00:15:00.167 --> 00:15:02.269 align:middle
它向你核实：
你要添加通行证到此设备吗？

00:15:03.170 --> 00:15:05.639 align:middle
那么和以前一样
你可添加一个

00:15:06.907 --> 00:15:07.875 align:middle
或多个通行证

00:15:08.141 --> 00:15:09.376 align:middle
因此
你选择其中的一个

00:15:09.476 --> 00:15:11.645 align:middle
展示这个视图控件
然后我们就负责

00:15:11.712 --> 00:15:13.480 align:middle
为您执行那个通行证

00:15:14.481 --> 00:15:15.315 align:middle
很棒

00:15:15.382 --> 00:15:17.985 align:middle
现在我们可以添加通行证

00:15:18.051 --> 00:15:18.919 align:middle
更新它们

00:15:18.986 --> 00:15:20.187 align:middle
我们可以保持它们的关联性

00:15:21.121 --> 00:15:23.323 align:middle
但是怎么能让这些通行证
具有持续的吸引力呢？

00:15:23.624 --> 00:15:25.325 align:middle
我们希望用户不断地回访

00:15:25.392 --> 00:15:26.793 align:middle
关注我们的通行证

00:15:27.361 --> 00:15:30.497 align:middle
这儿有几个小窍门
让您维持通行证的吸引力

00:15:31.365 --> 00:15:33.800 align:middle
就像我之前讲的
关联是件大事

00:15:33.901 --> 00:15:36.470 align:middle
关联能在生活中带来巨大的惊喜

00:15:37.037 --> 00:15:38.939 align:middle
你要为用户着想

00:15:40.174 --> 00:15:41.408 align:middle
你应该让通行证实时升级

00:15:41.475 --> 00:15:43.377 align:middle
比如说
这个登机通行证

00:15:44.111 --> 00:15:48.081 align:middle
如果没有最新的登机口信息
它就毫无用处

00:15:49.383 --> 00:15:52.386 align:middle
用户们要不断回来
查看你的通行证

00:15:53.687 --> 00:15:54.755 align:middle
图像很管用

00:15:55.122 --> 00:15:56.823 align:middle
看这个
这个MLB通行证

00:15:56.890 --> 00:16:00.394 align:middle
这个长条形图片横跨整个通行证

00:15:56.890 --> 00:16:00.394 align:middle
这个长条形图片横跨整个通行证

00:16:00.928 --> 00:16:01.895 align:middle
感觉生动明了

00:16:02.095 --> 00:16:05.999 align:middle
让人一下子明白这个通行证的
目的和用途

00:16:06.500 --> 00:16:07.634 align:middle
这是个长条形图片

00:16:07.801 --> 00:16:09.436 align:middle
你注意到
这里并没有其他多余信息

00:16:09.503 --> 00:16:10.871 align:middle
就只是环境的信息

00:16:10.938 --> 00:16:11.772 align:middle
非常美观！

00:16:12.840 --> 00:16:15.108 align:middle
最后我要讲讲格式

00:16:16.677 --> 00:16:18.445 align:middle
格式有点棘手

00:16:19.046 --> 00:16:20.280 align:middle
但让我们帮你处理

00:16:20.514 --> 00:16:22.282 align:middle
现在我们知道有不同的设备

00:16:22.349 --> 00:16:23.717 align:middle
屏幕的尺寸不同

00:16:23.984 --> 00:16:24.985 align:middle
我建议...

00:16:25.719 --> 00:16:27.621 align:middle
你参考我们网站上的
《人机界面指南》

00:16:27.688 --> 00:16:30.924 align:middle
按照指示操作
然后我们就能尽量

00:16:30.991 --> 00:16:35.896 align:middle
让您的通行证
适用我们的所有设备

00:16:37.030 --> 00:16:39.299 align:middle
很棒
这些通行证真的好用

00:16:39.366 --> 00:16:41.435 align:middle
它们真的让我们
将其用于现实生活中

00:16:42.369 --> 00:16:44.571 align:middle
但真正用起来还是比不上

00:16:44.638 --> 00:16:46.173 align:middle
苹果支付那样顺手

00:16:47.140 --> 00:16:49.576 align:middle
我们如何大幅改进那种体验呢？

00:16:50.110 --> 00:16:52.579 align:middle
好了 现在我们就来谈谈
从这里开始我们会走向何方

00:16:54.948 --> 00:16:56.049 align:middle
让我给您设想一个情景

00:16:57.384 --> 00:17:00.687 align:middle
有一天我来到我小区内的杂货店

00:16:57.384 --> 00:17:00.687 align:middle
有一天我来到我小区内的杂货店

00:17:00.954 --> 00:17:01.989 align:middle
拿上要买的东西

00:17:02.122 --> 00:17:03.123 align:middle
准备结账

00:17:03.524 --> 00:17:05.392 align:middle
太好了
他们支持苹果支付

00:17:05.526 --> 00:17:06.894 align:middle
我走向款台

00:17:07.227 --> 00:17:08.795 align:middle
收银员扫描我买的商品

00:17:08.929 --> 00:17:11.330 align:middle
我准备好手机
用苹果支付结账

00:17:12.733 --> 00:17:13.567 align:middle
好

00:17:14.001 --> 00:17:15.169 align:middle
他们扫描完了我的商品

00:17:15.402 --> 00:17:17.204 align:middle
我把我的手机
靠近销售终端...

00:17:17.804 --> 00:17:19.573 align:middle
您有我们的会员通行证吗？

00:17:20.607 --> 00:17:21.909 align:middle
我想我是有的

00:17:21.974 --> 00:17:25.612 align:middle
收银员坚持要看会员卡

00:17:25.679 --> 00:17:28.182 align:middle
我想它是在我那个鼓鼓的
钱包里面

00:17:28.248 --> 00:17:30.384 align:middle
但我现在就是找不到它

00:17:30.450 --> 00:17:31.418 align:middle
我觉得它应该是

00:17:31.485 --> 00:17:32.753 align:middle
是用我手机号注册的

00:17:32.819 --> 00:17:34.688 align:middle
我把手机号报给收银员

00:17:35.889 --> 00:17:36.723 align:middle
不对

00:17:36.890 --> 00:17:38.125 align:middle
不是用那个电话号码注册的

00:17:38.525 --> 00:17:41.628 align:middle
我泄气了 后面的队伍
已经有二三米远了

00:17:41.695 --> 00:17:44.031 align:middle
我又报出我妈妈的手机号

00:17:44.097 --> 00:17:45.866 align:middle
因为我知道我妈妈
会有这种会员通行证

00:17:46.333 --> 00:17:47.501 align:middle
好极了 行！

00:17:47.968 --> 00:17:49.102 align:middle
我终于能用苹果支付了

00:17:49.469 --> 00:17:51.605 align:middle
拿上我的东西出店门

00:17:53.273 --> 00:17:54.708 align:middle
不顺的事情一件又一件
是吧

00:17:55.642 --> 00:17:57.978 align:middle
作为消费者
我只求顺利支付

00:17:58.946 --> 00:18:01.048 align:middle
迅速结账走人

00:17:58.946 --> 00:18:01.048 align:middle
迅速结账走人

00:18:01.982 --> 00:18:02.983 align:middle
*对于商户

00:18:03.550 --> 00:18:06.153 align:middle
他们得到是完全错误的会员信息

00:18:06.220 --> 00:18:08.589 align:middle
他们掌握的是我妈妈的会员信息
而不是我的

00:18:10.023 --> 00:18:11.124 align:middle
我们要对此加以改进

00:18:12.159 --> 00:18:13.527 align:middle
这就是为什么我们要推出

00:18:14.161 --> 00:18:16.330 align:middle
与苹果支付相匹配的通行证

00:18:17.898 --> 00:18:19.499 align:middle
通行证与苹果支付结合

00:18:20.501 --> 00:18:22.436 align:middle
传递你的会员信息

00:18:22.503 --> 00:18:25.906 align:middle
通过苹果支付完成无接触式付款

00:18:27.608 --> 00:18:30.644 align:middle
我们遵循增值业务协议

00:18:30.711 --> 00:18:33.080 align:middle
一直致力于与
主要的收银机厂商合作

00:18:33.347 --> 00:18:35.449 align:middle
促进采用这种新的协议

00:18:36.550 --> 00:18:39.086 align:middle
现在再看一下刚才的场景

00:18:40.087 --> 00:18:43.190 align:middle
我来到好客的小区便利店
Walgreens

00:18:44.625 --> 00:18:46.159 align:middle
他们支持苹果支付
太好了

00:18:46.727 --> 00:18:48.529 align:middle
我使用苹果支付
我使用iOS新特性

00:18:48.595 --> 00:18:51.064 align:middle
双击主页按钮
激活我的卡片

00:18:51.265 --> 00:18:54.868 align:middle
在我到款台前
我的卡已经准备完毕

00:18:54.935 --> 00:18:56.170 align:middle
太棒了
卡已备好

00:18:56.603 --> 00:18:58.972 align:middle
我马上就能支付

00:18:59.873 --> 00:19:01.742 align:middle
我把手机放到收银机上

00:18:59.873 --> 00:19:01.742 align:middle
我把手机放到收银机上

00:19:02.809 --> 00:19:04.511 align:middle
我的Walgreen会员信息

00:19:04.778 --> 00:19:06.246 align:middle
被无接触式传输

00:19:06.313 --> 00:19:08.115 align:middle
还有支付信息

00:19:08.382 --> 00:19:10.117 align:middle
轻击即可完成

00:19:11.251 --> 00:19:12.085 align:middle
就这么简单！

00:19:12.886 --> 00:19:15.889 align:middle
我笑着对收银员说了声：谢谢！

00:19:16.490 --> 00:19:17.324 align:middle
然后出门

00:19:19.459 --> 00:19:20.294 align:middle
实在太棒了！

00:19:21.161 --> 00:19:24.064 align:middle
那让整个过程顺畅多了

00:19:24.898 --> 00:19:25.766 align:middle
这是怎么做到的？

00:19:25.832 --> 00:19:29.703 align:middle
我们怎么把这个特性
加入到您的通行证？

00:19:30.237 --> 00:19:31.071 align:middle
我们有个新方法

00:19:31.371 --> 00:19:32.739 align:middle
就是pass.json

00:19:33.507 --> 00:19:35.275 align:middle
确切是说是nfc

00:19:36.643 --> 00:19:40.147 align:middle
Nfc是个接受信息的字典

00:19:40.714 --> 00:19:43.217 align:middle
有点像条形码
这是将此用户身份

00:19:43.283 --> 00:19:44.852 align:middle
与您的系统连接的会员信息

00:19:44.918 --> 00:19:46.753 align:middle
或任何相关信息

00:19:47.487 --> 00:19:50.224 align:middle
我们有可选的
encryptionPublicKey

00:19:51.725 --> 00:19:53.927 align:middle
这能确保这个通行证的真实性

00:19:54.094 --> 00:19:55.796 align:middle
这有点像您自己作为商户

00:19:56.029 --> 00:19:57.664 align:middle
和您的收银机...

00:19:58.198 --> 00:19:59.032 align:middle
进行握手

00:19:59.833 --> 00:20:01.969 align:middle
那么 这就是你如何...

00:19:59.833 --> 00:20:01.969 align:middle
那么 这就是你如何...

00:20:02.970 --> 00:20:04.404 align:middle
把与苹果支付结合的通行证

00:20:04.805 --> 00:20:06.073 align:middle
整合到你的通行证中

00:20:06.139 --> 00:20:08.008 align:middle
如果你是商户或收银机厂商

00:20:08.075 --> 00:20:09.343 align:middle
对此感兴趣

00:20:10.177 --> 00:20:11.144 align:middle
请联系我们

00:20:11.545 --> 00:20:13.747 align:middle
我们的开发者关系团队
本周都在这里

00:20:13.814 --> 00:20:15.249 align:middle
你可以和他们联系

00:20:15.315 --> 00:20:17.851 align:middle
讲座后我会给出联系方式

00:20:18.185 --> 00:20:19.853 align:middle
如果您感兴趣
请告知他们

00:20:19.920 --> 00:20:23.557 align:middle
我们会着手为你进行
苹果支付与通行证的整合工作

00:20:25.259 --> 00:20:26.360 align:middle
说到苹果支付

00:20:26.960 --> 00:20:27.928 align:middle
它真的非常棒

00:20:28.161 --> 00:20:29.129 align:middle
就像我刚刚说过的

00:20:29.596 --> 00:20:33.767 align:middle
我们现在已经实现了在手机上
手表上的无接触式支付

00:20:34.334 --> 00:20:37.004 align:middle
甚至也支持API

00:20:37.070 --> 00:20:39.907 align:middle
所以你可以把苹果支付
整合入您的app内

00:20:41.241 --> 00:20:42.543 align:middle
苹果支付确实很棒

00:20:43.076 --> 00:20:45.846 align:middle
因为它能为您的用户
带来无缝支付体验

00:20:46.313 --> 00:20:49.049 align:middle
商户将全面获得更高的转化率

00:20:49.950 --> 00:20:52.019 align:middle
所以我们鼓励我们的用户

00:20:52.252 --> 00:20:55.088 align:middle
在他们的设备上
添加苹果支付卡

00:20:55.722 --> 00:20:56.557 align:middle
具体做法呢？

00:20:56.623 --> 00:20:59.226 align:middle
我们将提供给你们
所需的API来完成

00:21:00.060 --> 00:21:00.894 align:middle
有两种方式

00:21:01.962 --> 00:21:05.299 align:middle
第一种是直接将您的用户
引导入我们的Wallet app

00:21:05.933 --> 00:21:07.000 align:middle
并且从那里开始安装

00:21:08.035 --> 00:21:10.337 align:middle
第二种是在您自己的app里

00:21:10.537 --> 00:21:12.172 align:middle
设置这些卡片

00:21:13.040 --> 00:21:14.107 align:middle
先看第一种

00:21:15.576 --> 00:21:17.177 align:middle
进入PKPassLibrary

00:21:17.444 --> 00:21:19.146 align:middle
操作非常简单

00:21:20.814 --> 00:21:22.916 align:middle
我们调用
openPaymentSetup

00:21:23.083 --> 00:21:25.219 align:middle
那将让用户直接进入Wallet

00:21:25.485 --> 00:21:27.020 align:middle
启动安装流程

00:21:27.588 --> 00:21:29.556 align:middle
而现在
有了iOS 9的新特性

00:21:29.723 --> 00:21:32.726 align:middle
你的用户可以轻松地
返回到你的app

00:21:32.860 --> 00:21:35.796 align:middle
我们给他们留了一点面包屑导航
让他们点击

00:21:35.963 --> 00:21:37.364 align:middle
这样他们就会返回到你的app

00:21:37.431 --> 00:21:38.732 align:middle
并继续做他们之前在做的事情

00:21:38.799 --> 00:21:39.633 align:middle
希望是购物

00:21:42.269 --> 00:21:45.772 align:middle
如果你是一家银行
或是推出了赊购卡

00:21:45.839 --> 00:21:47.307 align:middle
或自有品牌信用卡的商户

00:21:47.374 --> 00:21:49.576 align:middle
你当然希望这种事情
在您自己的app里发生

00:21:50.344 --> 00:21:51.645 align:middle
我们也有相应的API

00:21:52.713 --> 00:21:53.847 align:middle
那其实是视图控件

00:21:54.147 --> 00:21:57.417 align:middle
就是
PKAddPaymentPassViewController

00:21:57.885 --> 00:22:01.255 align:middle
当然你需要确定这个特定设备

00:21:57.885 --> 00:22:01.255 align:middle
当然你需要确定这个特定设备

00:22:01.355 --> 00:22:02.923 align:middle
是否能够添加支付通行证

00:22:04.558 --> 00:22:06.660 align:middle
如果能
我们就设置这样的一个通行证

00:22:06.927 --> 00:22:10.030 align:middle
我们可以将其写入
requestConfiguration

00:22:10.564 --> 00:22:12.232 align:middle
并将其传入委托语句

00:22:13.367 --> 00:22:16.003 align:middle
这个您在自己的app中
执行的授权语句

00:22:16.703 --> 00:22:19.273 align:middle
将把那些信息片段组合在一起

00:22:19.339 --> 00:22:21.408 align:middle
如nonceSignature
会组成

00:22:22.276 --> 00:22:24.778 align:middle
AddPaymentPassRequest

00:22:25.546 --> 00:22:27.347 align:middle
这个真的深究起来
要讲很长时间

00:22:27.414 --> 00:22:28.849 align:middle
今天这节专题讲座上
我没有时间

00:22:28.916 --> 00:22:30.250 align:middle
对此进行深入探讨

00:22:30.617 --> 00:22:33.487 align:middle
所以如果关于如何使用这个类
你有任何问题

00:22:33.554 --> 00:22:36.190 align:middle
请大家自己查看文稿

00:22:36.690 --> 00:22:38.992 align:middle
这个类将是大家有权查看的

00:22:39.092 --> 00:22:41.128 align:middle
那么 如果您愿意
在你的app中使用这个类

00:22:41.195 --> 00:22:42.396 align:middle
也请告诉我们

00:22:43.397 --> 00:22:48.902 align:middle
当把支付通行证
加入苹果支付时

00:22:48.969 --> 00:22:51.071 align:middle
用户们可能还需执行的
另外一个必要步骤是

00:22:51.138 --> 00:22:53.307 align:middle
需要进行支付通行证验证

00:22:53.507 --> 00:22:55.108 align:middle
或
“第二因素验证”

00:22:55.175 --> 00:22:57.044 align:middle
有些人知道这个

00:22:57.978 --> 00:23:00.514 align:middle
在使用普通流量的同时

00:22:57.978 --> 00:23:00.514 align:middle
在使用普通流量的同时

00:23:00.814 --> 00:23:03.851 align:middle
比如使用SMS或通过打电话

00:23:03.917 --> 00:23:07.621 align:middle
或电子邮件
你还可以选择使用app

00:23:08.255 --> 00:23:10.691 align:middle
大家看Capital One
如何利用他们的app

00:23:10.757 --> 00:23:12.793 align:middle
验证用户的身份

00:23:13.627 --> 00:23:14.494 align:middle
我们要如何做呢？

00:23:15.362 --> 00:23:17.264 align:middle
我们给你们几个API

00:23:17.331 --> 00:23:20.234 align:middle
帮助在您的app里完成验证

00:23:22.836 --> 00:23:24.705 align:middle
它也在
PKPassLibrary中

00:23:25.706 --> 00:23:26.540 align:middle
先检查...

00:23:26.907 --> 00:23:27.941 align:middle
是否有支付通行证

00:23:28.008 --> 00:23:29.009 align:middle
是否可激活？

00:23:30.677 --> 00:23:33.247 align:middle
还记得当我们从用户库中

00:23:33.313 --> 00:23:35.148 align:middle
提取PKPasses时吗？

00:23:35.215 --> 00:23:36.783 align:middle
这就是激活的用处所在

00:23:37.251 --> 00:23:41.755 align:middle
你可以把PKPaymentPass

00:23:42.389 --> 00:23:43.590 align:middle
传递到这个调用命令中去

00:23:43.824 --> 00:23:45.058 align:middle
并向其中传入一些激活数据

00:23:45.726 --> 00:23:47.594 align:middle
然后你会得到一个
表示已完成的反馈

00:23:47.661 --> 00:23:49.596 align:middle
告知您激活是否成功

00:23:50.597 --> 00:23:55.369 align:middle
那就是您如何在自己的app里
执行验证程序

00:23:56.336 --> 00:23:58.505 align:middle
这也是我们的手机
一直非常受欢迎的原因

00:23:58.739 --> 00:24:00.140 align:middle
除此之外我们还有特别棒

00:23:58.739 --> 00:24:00.140 align:middle
除此之外我们还有特别棒

00:24:00.207 --> 00:24:01.708 align:middle
真的非常棒的辅助程序

00:24:02.776 --> 00:24:04.144 align:middle
还会衍生出一些功能

00:24:04.711 --> 00:24:06.113 align:middle
我们应该好好利用

00:24:06.380 --> 00:24:07.347 align:middle
这些辅助程序功能

00:24:08.015 --> 00:24:09.516 align:middle
我们现在宣布与iOS 9一起推出

00:24:09.850 --> 00:24:12.753 align:middle
一个无接触界面按压API

00:24:14.154 --> 00:24:17.591 align:middle
它会暂时使用户界面失效

00:24:18.025 --> 00:24:19.793 align:middle
这是你看到的通行证表单

00:24:20.961 --> 00:24:23.163 align:middle
这将需要征得用户允许

00:24:24.898 --> 00:24:26.033 align:middle
来看一下我们是如何做的

00:24:27.668 --> 00:24:29.603 align:middle
还是在那个
PKPassLibrary中

00:24:30.437 --> 00:24:33.273 align:middle
PKPassLibrary
有一个新函数 名为

00:24:33.507 --> 00:24:38.679 align:middle
requestAutomaticPassPresentation
SuppressionWithResponseHandler

00:24:38.779 --> 00:24:39.613 align:middle
太绕嘴了

00:24:40.614 --> 00:24:44.451 align:middle
你能得到一个回复结果

00:24:44.518 --> 00:24:46.220 align:middle
关于用户是否同意

00:24:46.286 --> 00:24:49.690 align:middle
在你的app里允许按压

00:24:50.791 --> 00:24:52.226 align:middle
同时还有一个申请图标

00:24:52.292 --> 00:24:54.995 align:middle
用这个图标
你就可以再一次调用

00:24:55.295 --> 00:24:57.865 align:middle
endAutomaticPassPresentation

00:24:57.998 --> 00:24:59.967 align:middle
传递进去这个
requestToken

00:25:00.734 --> 00:25:04.071 align:middle
payment UI
就会再次出现在你的app中

00:25:04.338 --> 00:25:08.108 align:middle
你也可以查看是否
automaticPassPresentation

00:25:08.175 --> 00:25:09.576 align:middle
Suppression已经

00:25:09.643 --> 00:25:11.178 align:middle
通过使用这个函数
而出现在这里

00:25:11.945 --> 00:25:13.881 align:middle
正如我刚刚讲到的
这只是暂时的

00:25:13.947 --> 00:25:16.016 align:middle
如果你的app被停用

00:25:16.783 --> 00:25:19.152 align:middle
支付通行证 UI
会重新出现在用户面前

00:25:19.253 --> 00:25:22.055 align:middle
或者在你上一次请求24小时后

00:25:22.389 --> 00:25:25.092 align:middle
你需要再次申请征得你用户的允许

00:25:26.126 --> 00:25:28.595 align:middle
这些类和调用已被授权

00:25:28.662 --> 00:25:30.497 align:middle
所以如果你有意向使用它们
请一定告诉我们

00:25:32.232 --> 00:25:33.967 align:middle
去年秋天

00:25:34.501 --> 00:25:37.237 align:middle
与苹果支付一起推出的
还有Apple Watch

00:25:38.839 --> 00:25:40.440 align:middle
现在我非常高兴的宣布:

00:25:40.807 --> 00:25:42.509 align:middle
我们将在watchOS 2中

00:25:43.010 --> 00:25:47.047 align:middle
内置对Apple Watch的
全面PassKit支持

00:25:48.015 --> 00:25:49.516 align:middle
这很了不起 因为现在

00:25:49.983 --> 00:25:52.586 align:middle
在Apple Watch上
你可以添加

00:25:53.086 --> 00:25:56.156 align:middle
移除 查询通行证
就像你原来

00:25:57.024 --> 00:25:58.525 align:middle
在手机上做的...

00:25:59.259 --> 00:26:00.093 align:middle
那样

00:25:59.259 --> 00:26:00.093 align:middle
那样

00:26:01.161 --> 00:26:05.766 align:middle
所以Apple Watch和watchOS 2
将获得全面PassKit支持

00:26:06.233 --> 00:26:08.035 align:middle
我想说的还有一件事

00:26:08.335 --> 00:26:10.838 align:middle
是关于Apple Watch
屏幕尺寸的

00:26:11.872 --> 00:26:15.576 align:middle
Apple Watch屏幕要小很多

00:26:15.642 --> 00:26:16.877 align:middle
我要指出的是正因如此

00:26:17.444 --> 00:26:19.413 align:middle
通行证的调用有些不同

00:26:20.113 --> 00:26:21.081 align:middle
在Apple Watch上

00:26:22.049 --> 00:26:23.150 align:middle
请看这个漂亮的界面

00:26:23.717 --> 00:26:27.654 align:middle
这是通行证在
Apple Watch上的样子

00:26:28.755 --> 00:26:30.490 align:middle
如您所见 这是MLB通行证

00:26:30.858 --> 00:26:32.092 align:middle
前面的幻灯片出现过

00:26:33.093 --> 00:26:34.228 align:middle
你会马上发现...

00:26:35.062 --> 00:26:36.029 align:middle
它的些许不同

00:26:37.130 --> 00:26:39.266 align:middle
长条形图片没有了

00:26:39.733 --> 00:26:41.835 align:middle
而且通行证也没有反面

00:26:43.570 --> 00:26:45.906 align:middle
所以请看一下并且记住
在不同的设备上

00:26:45.973 --> 00:26:48.842 align:middle
通行证看起来确实不一样
尤其是在Apple Watch上

00:26:48.942 --> 00:26:51.778 align:middle
因此设计通行证并实施的时候

00:26:51.845 --> 00:26:52.746 align:middle
请考虑到那一点

00:26:53.480 --> 00:26:56.016 align:middle
当然了 如果你遵循
《人机界面指南》

00:26:56.149 --> 00:27:01.221 align:middle
我们将承诺
尽力让你的通行证看起来很棒

00:26:56.149 --> 00:27:01.221 align:middle
我们将承诺
尽力让你的通行证看起来很棒

00:27:01.522 --> 00:27:04.691 align:middle
无论在我们的何种设备上

00:27:05.592 --> 00:27:07.294 align:middle
这就是PassKit
和Apple Watch

00:27:09.129 --> 00:27:10.831 align:middle
还有一件事我要讲

00:27:11.765 --> 00:27:13.166 align:middle
一维条形码

00:27:14.501 --> 00:27:17.271 align:middle
我们一直在收到很多
使用一维条形码的申请

00:27:18.906 --> 00:27:20.908 align:middle
我很高兴告诉大家在iOS 9中

00:27:20.974 --> 00:27:23.544 align:middle
我们将对Wallet
提供一维条形码支持

00:27:27.981 --> 00:27:28.815 align:middle
很高兴大家喜欢

00:27:29.449 --> 00:27:32.586 align:middle
所以我们有个新的条形码格式

00:27:33.086 --> 00:27:35.589 align:middle
就是
PKBarcodeFormatCode128

00:27:36.290 --> 00:27:39.660 align:middle
你也许要问:我那些
仍用iOS 8或更低版本的用户

00:27:39.726 --> 00:27:41.128 align:middle
怎么办呢？
他们能享用这些吗？

00:27:41.828 --> 00:27:45.732 align:middle
很遗憾不能
这也是你们为何会有这条退路

00:27:46.533 --> 00:27:47.901 align:middle
我们还是有条形码密钥

00:27:48.268 --> 00:27:50.204 align:middle
那个条形码密钥
是非常非常重要的

00:27:50.270 --> 00:27:53.473 align:middle
这里我们要做的
是实施二维条形码

00:27:53.907 --> 00:27:56.443 align:middle
我们有新的多条形码密钥

00:27:56.977 --> 00:27:58.011 align:middle
它是一个阵列

00:27:58.078 --> 00:27:59.980 align:middle
包括一个由多个条形码
组成的字典

00:28:00.681 --> 00:28:03.350 align:middle
所以你看在第一个字典里

00:28:03.417 --> 00:28:05.219 align:middle
我们有个新的条形码阵列

00:28:05.552 --> 00:28:09.656 align:middle
PKBarcodeFormatCode128
的条形码

00:28:09.723 --> 00:28:11.024 align:middle
就是一维条形码

00:28:11.425 --> 00:28:13.594 align:middle
因此
请大家在实施时

00:28:14.228 --> 00:28:15.062 align:middle
拜托大家

00:28:15.462 --> 00:28:18.098 align:middle
一定要核实
你的系统支持一维条形码

00:28:18.799 --> 00:28:21.101 align:middle
我指的是光学扫描仪

00:28:22.736 --> 00:28:25.839 align:middle
请大家记住要退回到二维条形码

00:28:26.173 --> 00:28:28.375 align:middle
只有这样使用iOS 8
或更低版本的用户

00:28:28.876 --> 00:28:30.978 align:middle
他们的通行证才有条形码

00:28:31.745 --> 00:28:34.081 align:middle
好了
今早我已经讲了很多

00:28:34.448 --> 00:28:39.386 align:middle
如果一定要我说
应该记住本讲座的哪些内容的话

00:28:39.620 --> 00:28:40.587 align:middle
那就是这些内容：

00:28:41.588 --> 00:28:43.457 align:middle
我们正在解决现实中钱包过满的问题

00:28:44.358 --> 00:28:45.859 align:middle
我们现在不需要那个实物钱包了

00:28:45.926 --> 00:28:47.261 align:middle
我们不想再查看钱夹子了

00:28:47.895 --> 00:28:49.229 align:middle
我们用通行证实现

00:28:49.930 --> 00:28:52.999 align:middle
通行证让我们
在现实世界通行无阻

00:28:53.567 --> 00:28:54.902 align:middle
它们能被很容易被整合

00:28:54.968 --> 00:28:56.737 align:middle
融入你的app
你的现金流

00:28:57.604 --> 00:29:00.841 align:middle
当通行证有了吸引力
它们能让你的用户们

00:28:57.604 --> 00:29:00.841 align:middle
当通行证有了吸引力
它们能让你的用户们

00:29:01.542 --> 00:29:04.645 align:middle
在你的系统里保持互动
并持续关注您的系统

00:29:05.646 --> 00:29:06.780 align:middle
而我想要提醒大家的是

00:29:06.847 --> 00:29:08.182 align:middle
把苹果支付集成进您的app

00:29:08.248 --> 00:29:11.118 align:middle
并鼓励你的用户在他们的app里
使用苹果支付

00:29:11.785 --> 00:29:14.788 align:middle
记住你要的是平稳无缝的
支付流程

00:29:15.289 --> 00:29:17.391 align:middle
我们也想要为我们的商户

00:29:17.491 --> 00:29:18.325 align:middle
带来高的转换率

00:29:19.459 --> 00:29:21.628 align:middle
我甚至都没谈到把苹果支付

00:29:21.695 --> 00:29:23.397 align:middle
作为支付手段集成到app内

00:29:23.497 --> 00:29:26.266 align:middle
本讲座不包括那么大的话题

00:29:26.667 --> 00:29:27.768 align:middle
但紧接着的...

00:29:28.302 --> 00:29:33.607 align:middle
讲座主讲人是我的同事
Nick和Rachel

00:29:34.041 --> 00:29:35.542 align:middle
将是非常非常棒的

00:29:35.609 --> 00:29:37.911 align:middle
他们会讲到我略过的话题

00:29:38.478 --> 00:29:41.949 align:middle
他们会帮大家
将苹果支付集成到您的app中

00:29:42.950 --> 00:29:45.819 align:middle
请记住
使用Wallet和苹果支付

00:29:45.886 --> 00:29:47.554 align:middle
去吧 去兑换优惠券！

00:29:47.921 --> 00:29:49.122 align:middle
去吧 去花钱消费吧！

00:29:52.793 --> 00:29:55.429 align:middle
我讲的过程中提到了很多资源

00:29:55.495 --> 00:29:56.897 align:middle
有几个我想要告诉大家

00:29:57.431 --> 00:29:59.733 align:middle
首先
在我们的开发者网站上

00:29:59.800 --> 00:30:02.703 align:middle
有个Passbook for Developers
专属站点

00:29:59.800 --> 00:30:02.703 align:middle
有个Passbook for Developers
专属站点

00:30:02.769 --> 00:30:04.771 align:middle
我们还有一个
苹果支付专属站点

00:30:05.739 --> 00:30:08.442 align:middle
我还提到了往年WWDC的
几次讲座

00:30:09.209 --> 00:30:10.544 align:middle
这是2012年的

00:30:10.811 --> 00:30:13.714 align:middle
名为"Passbook简介:
第一和第二部分"

00:30:14.081 --> 00:30:16.183 align:middle
它将真正地深入探讨
如何设计通行证

00:30:16.283 --> 00:30:17.484 align:middle
以及如何升级通行证

00:30:18.218 --> 00:30:20.187 align:middle
然后是2013WWDC讲座

00:30:20.254 --> 00:30:23.090 align:middle
“将Passbook
融入您的生态系统”

00:30:24.024 --> 00:30:25.993 align:middle
这些是大家应该查看的
真的很棒的资源

00:30:26.593 --> 00:30:28.362 align:middle
当然我们的开发者论坛

00:30:28.862 --> 00:30:30.797 align:middle
也供大家使用

00:30:32.032 --> 00:30:35.903 align:middle
一个真正了不起的技术传播者
保羅随时帮助你们

00:30:35.969 --> 00:30:37.804 align:middle
这是他的电子邮件地址

00:30:38.672 --> 00:30:41.909 align:middle
再次感谢您拨冗出席
感谢您的到来

00:30:41.975 --> 00:30:44.945 align:middle
并倾听关于Wallet
和苹果支付的内容

00:30:45.245 --> 00:30:48.115 align:middle
希望大家过得愉快

00:30:48.182 --> 00:30:49.016 align:middle
非常感谢
