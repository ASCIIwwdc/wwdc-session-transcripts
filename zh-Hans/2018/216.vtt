WEBVTT

00:00:07.516 --> 00:00:20.516 A:middle
［ 音乐 ］

00:00:21.246 --> 00:00:23.246 A:middle
［ 掌声 ］

00:00:23.476 --> 00:00:23.976 A:middle
&gt;&gt; 早上好

00:00:25.526 --> 00:00:27.136 A:middle
早上好 欢迎来到

00:00:27.136 --> 00:00:29.756 A:middle
管理你的 iOS App 上的文稿

00:00:30.836 --> 00:00:32.436 A:middle
我是 Brandon Tennant 一名

00:00:32.436 --> 00:00:33.446 A:middle
Apple 和文稿管理团队的

00:00:33.446 --> 00:00:34.736 A:middle
软件工程师

00:00:35.156 --> 00:00:36.276 A:middle
稍后 一起加入我的还有

00:00:36.276 --> 00:00:38.786 A:middle
我的同事 Thomas Deniau 和 Rony Fadel

00:00:39.386 --> 00:00:41.476 A:middle
今天我们将

00:00:41.476 --> 00:00:43.316 A:middle
为你简单描述

00:00:43.316 --> 00:00:45.076 A:middle
iOS 上的文稿管理是什么

00:00:45.106 --> 00:00:46.286 A:middle
接下来我们将分享一些

00:00:46.286 --> 00:00:47.246 A:middle
这个领域的新发现

00:00:48.376 --> 00:00:49.576 A:middle
Thomas 将上台

00:00:49.576 --> 00:00:51.966 A:middle
展示如何在你的 App 上

00:00:51.966 --> 00:00:54.236 A:middle
使用文稿管理 API

00:00:55.056 --> 00:00:56.886 A:middle
最后 Rony 将加入我们

00:00:56.886 --> 00:00:58.576 A:middle
上台展示几个小建议

00:00:58.576 --> 00:01:00.136 A:middle
和小窍门来提升

00:00:58.576 --> 00:01:00.136 A:middle
和小窍门来提升

00:01:00.326 --> 00:01:01.256 A:middle
App 的性能

00:01:02.436 --> 00:01:04.385 A:middle
让我们先开始

00:01:04.385 --> 00:01:05.686 A:middle
复习一下 iOS 上的文稿

00:01:05.686 --> 00:01:07.026 A:middle
管理是什么

00:01:08.486 --> 00:01:10.096 A:middle
它是一个多种技术的集合

00:01:10.416 --> 00:01:13.056 A:middle
首先 为 App 开发人员提供一个 API

00:01:13.946 --> 00:01:15.206 A:middle
为云服务供应商也提供

00:01:15.206 --> 00:01:16.286 A:middle
File Provider API

00:01:16.286 --> 00:01:19.406 A:middle
还有 Files App

00:01:20.796 --> 00:01:22.976 A:middle
在 iOS 11 中 我们引入了

00:01:23.046 --> 00:01:24.766 A:middle
UIDocumentBrowserViewController

00:01:25.046 --> 00:01:26.686 A:middle
也显著地改进了

00:01:26.756 --> 00:01:28.266 A:middle
UIDocumentPickerViewController

00:01:30.166 --> 00:01:31.406 A:middle
在你的 App 中使用这个新的控制器

00:01:31.406 --> 00:01:33.776 A:middle
你的顾客将

00:01:33.776 --> 00:01:35.186 A:middle
能够从所有最喜欢的云服务

00:01:35.186 --> 00:01:36.716 A:middle
供应商中 管理和浏览

00:01:36.716 --> 00:01:37.466 A:middle
他们的文件

00:01:38.396 --> 00:01:39.836 A:middle
搜索功能也很强大

00:01:39.836 --> 00:01:41.146 A:middle
可以搜索所有的

00:01:41.146 --> 00:01:42.046 A:middle
云服务供应商

00:01:43.276 --> 00:01:44.236 A:middle
能够发现你喜欢用的文件夹

00:01:45.096 --> 00:01:46.276 A:middle
这些你最喜欢的文件夹

00:01:46.276 --> 00:01:47.586 A:middle
将会出现在侧边栏

00:01:48.636 --> 00:01:51.946 A:middle
也能够用标签来管理文件夹

00:01:53.006 --> 00:01:55.196 A:middle
最近项目使用的文件夹也会出现在

00:01:55.286 --> 00:01:55.946 A:middle
最近项目标签中

00:02:00.186 --> 00:02:01.316 A:middle
所以 通过在你的 App 中使用

00:02:01.316 --> 00:02:02.826 A:middle
UIDocumentBrowserViewController

00:02:02.896 --> 00:02:04.276 A:middle
你将为顾客提供

00:02:04.276 --> 00:02:05.796 A:middle
一种连贯的体验

00:02:05.796 --> 00:02:07.166 A:middle
把文件中的所有优势

00:02:07.166 --> 00:02:08.925 A:middle
都聚集到你的 App 中

00:02:09.425 --> 00:02:11.026 A:middle
它也使得你

00:02:11.026 --> 00:02:12.416 A:middle
不需要编写自己的文稿浏览器

00:02:14.406 --> 00:02:15.686 A:middle
这也允许你将精力放在

00:02:15.686 --> 00:02:16.846 A:middle
完善你顾客的体验上

00:02:16.846 --> 00:02:18.966 A:middle
当他们用你的 App 浏览

00:02:18.966 --> 00:02:20.566 A:middle
或者编辑文稿时

00:02:21.716 --> 00:02:24.916 A:middle
首先让我们看看去年的大会

00:02:24.916 --> 00:02:28.566 A:middle
“建立伟大的基于文稿的 iOS App”

00:02:29.876 --> 00:02:32.096 A:middle
为云服务供应商也提供了 API

00:02:33.786 --> 00:02:35.306 A:middle
这个叫做 File Provider API

00:02:36.076 --> 00:02:37.506 A:middle
你用这个来编写

00:02:37.506 --> 00:02:39.576 A:middle
文件提供程序扩展

00:02:39.796 --> 00:02:42.196 A:middle
和客户 UI 行为

00:02:42.196 --> 00:02:43.656 A:middle
包括帐户登录界面

00:02:45.766 --> 00:02:47.466 A:middle
对于 App 开发人员来说

00:02:47.466 --> 00:02:48.826 A:middle
你不必通过 API 来

00:02:48.826 --> 00:02:50.246 A:middle
让大家访问文件

00:02:50.246 --> 00:02:53.586 A:middle
当你编写一个

00:02:53.996 --> 00:02:56.086 A:middle
文件提供程序扩展 时

00:02:56.086 --> 00:02:57.336 A:middle
它将会出现在文件 App 中

00:02:57.336 --> 00:02:58.296 A:middle
出现在 UIDocumentBrowserView

00:02:58.296 --> 00:03:00.256 A:middle
Controllers 中 在定位

00:02:58.296 --> 00:03:00.256 A:middle
Controllers 中 在定位

00:03:00.256 --> 00:03:01.896 A:middle
标签下 位于 Locations 这个部分

00:03:03.946 --> 00:03:07.746 A:middle
因为登录是通过 FPUI

00:03:07.816 --> 00:03:09.596 A:middle
ActionExtensionViewController 实现的

00:03:10.376 --> 00:03:11.646 A:middle
你想要使用这个

00:03:11.646 --> 00:03:12.646 A:middle
来减少和你的顾客之间的摩擦

00:03:12.646 --> 00:03:14.306 A:middle
通过这种方式

00:03:14.306 --> 00:03:15.206 A:middle
使得登录你的服务器更简单

00:03:16.096 --> 00:03:19.696 A:middle
让我们通过几个例子来说明一下

00:03:19.916 --> 00:03:23.126 A:middle
首先 在这个例子当中

00:03:23.126 --> 00:03:24.136 A:middle
你可以做的 或者用户

00:03:24.136 --> 00:03:25.796 A:middle
可以做的 是登录到

00:03:25.796 --> 00:03:27.016 A:middle
服务系统中 不被

00:03:27.016 --> 00:03:28.286 A:middle
他们的工作流程所打断

00:03:28.366 --> 00:03:29.456 A:middle
他们也不用离开 App

00:03:29.676 --> 00:03:30.566 A:middle
他们仅仅需要登录

00:03:30.566 --> 00:03:32.326 A:middle
然后继续他们的工作就行

00:03:32.866 --> 00:03:35.056 A:middle
应该尝试避免的是

00:03:35.056 --> 00:03:37.066 A:middle
一些类似这样的东西

00:03:37.066 --> 00:03:39.096 A:middle
有多余的 UI 元素

00:03:39.096 --> 00:03:40.576 A:middle
或者屏幕商标

00:03:40.726 --> 00:03:41.766 A:middle
你可以看到这个例子中的

00:03:41.766 --> 00:03:43.516 A:middle
两个导航栏 或者两个取消按钮

00:03:44.386 --> 00:03:46.216 A:middle
另一个尝试避免的例子是

00:03:46.216 --> 00:03:48.906 A:middle
有一个简单的登录按钮

00:03:48.906 --> 00:03:50.616 A:middle
在按钮中 登录所要做的是

00:03:50.616 --> 00:03:52.186 A:middle
启动你的 App

00:03:53.046 --> 00:03:54.656 A:middle
这会中断顾客的工作流程

00:03:55.036 --> 00:03:58.256 A:middle
所以 我们应该努力避免这些

00:03:58.876 --> 00:04:00.136 A:middle
最后 我们已经看到

00:03:58.876 --> 00:04:00.136 A:middle
最后 我们已经看到

00:04:00.136 --> 00:04:02.996 A:middle
所有开发人员和云服务供应商在去年

00:04:02.996 --> 00:04:04.246 A:middle
所采用的这些技术

00:04:05.026 --> 00:04:06.966 A:middle
所以有很多 App 早已使用了

00:04:06.966 --> 00:04:07.826 A:middle
这项技术

00:04:08.706 --> 00:04:10.686 A:middle
所以现在是在你的 App 中尝试采用

00:04:10.686 --> 00:04:12.236 A:middle
UIDocumentBrowserViewController

00:04:12.236 --> 00:04:13.536 A:middle
的最佳时机

00:04:14.426 --> 00:04:15.516 A:middle
如果你是一个

00:04:15.516 --> 00:04:17.396 A:middle
现在还未被提供

00:04:17.476 --> 00:04:18.946 A:middle
文件提供程序扩展 的云服务供应商

00:04:18.946 --> 00:04:19.805 A:middle
如今是时候这样做了

00:04:20.696 --> 00:04:23.836 A:middle
让我们谈谈一些新的东西

00:04:24.616 --> 00:04:26.636 A:middle
首先 对于云服务供应商来说

00:04:26.636 --> 00:04:28.956 A:middle
我们在从事文件提供程序扩展时

00:04:28.956 --> 00:04:30.586 A:middle
已经遇到了一些困难

00:04:31.316 --> 00:04:32.056 A:middle
今天我们很开心地宣布

00:04:32.056 --> 00:04:34.036 A:middle
有新工具的出现可以解决这些难题

00:04:34.446 --> 00:04:35.126 A:middle
这个工具叫做 File

00:04:35.126 --> 00:04:36.586 A:middle
Provider-Validation 工具

00:04:37.756 --> 00:04:39.486 A:middle
这个工具将指导你帮助你

00:04:39.486 --> 00:04:41.376 A:middle
将运行测试

00:04:41.376 --> 00:04:42.376 A:middle
向你展示 文件提供程序扩展 中的问题

00:04:42.376 --> 00:04:44.836 A:middle
指导你修复这些问题

00:04:45.496 --> 00:04:46.466 A:middle
如今从 developer.apple.com 中

00:04:46.466 --> 00:04:48.206 A:middle
下载也是可行的

00:04:48.336 --> 00:04:49.886 A:middle
当你下载的时候

00:04:50.666 --> 00:04:51.876 A:middle
你将遇到一些东西

00:04:52.706 --> 00:04:53.746 A:middle
你将遇到一组资源文件

00:04:53.746 --> 00:04:56.196 A:middle
你需要添加到你的 文件提供程序扩展中

00:04:56.196 --> 00:04:58.666 A:middle
安装一个 iOS App

00:04:58.666 --> 00:05:01.306 A:middle
在你的 iPad 中运行

00:04:58.666 --> 00:05:01.306 A:middle
在你的 iPad 中运行

00:05:03.046 --> 00:05:04.506 A:middle
一旦你修改了你的文件提供程序项目

00:05:04.506 --> 00:05:07.076 A:middle
在你的 iPad 上安装了这个 App

00:05:07.076 --> 00:05:08.486 A:middle
并且运行它

00:05:08.946 --> 00:05:09.876 A:middle
将会出现一个

00:05:09.876 --> 00:05:11.446 A:middle
像这样的屏幕

00:05:11.866 --> 00:05:13.056 A:middle
你的文件提供程序将会被列出来

00:05:13.056 --> 00:05:14.106 A:middle
在左侧进行展示

00:05:14.106 --> 00:05:15.566 A:middle
当你轻点时

00:05:15.626 --> 00:05:16.886 A:middle
会有一个运行按钮

00:05:16.886 --> 00:05:18.676 A:middle
你可以点按然后

00:05:18.676 --> 00:05:21.136 A:middle
按照你的文件提供拓展程序 来运行全套测试

00:05:22.246 --> 00:05:23.106 A:middle
当你做完这件事情

00:05:23.106 --> 00:05:25.466 A:middle
你会看到一个成功和失败的列表

00:05:26.066 --> 00:05:26.846 A:middle
你想要轻点那些失败的

00:05:26.846 --> 00:05:29.446 A:middle
搞清楚失败的原因

00:05:29.446 --> 00:05:30.376 A:middle
找出你代码中的错误

00:05:31.186 --> 00:05:32.056 A:middle
在周四和周五的实验室

00:05:32.056 --> 00:05:33.676 A:middle
我们将对你们

00:05:33.676 --> 00:05:36.956 A:middle
提供帮助

00:05:38.516 --> 00:05:40.656 A:middle
今年要宣布的还有一个令人激动的消息

00:05:40.656 --> 00:05:43.096 A:middle
就是 Siri 捷径

00:05:43.126 --> 00:05:45.946 A:middle
我们很高兴的地说 Siri 捷径

00:05:45.946 --> 00:05:47.386 A:middle
也列入文件提供程序拓展中了

00:05:48.266 --> 00:05:50.136 A:middle
这个所做的是屏幕会出现

00:05:50.196 --> 00:05:52.306 A:middle
最近项目使用的

00:05:52.306 --> 00:05:54.116 A:middle
被打开或者被创建的文件

00:05:54.116 --> 00:05:55.326 A:middle
它们在搜索者锁屏

00:05:55.326 --> 00:05:57.896 A:middle
中都会出现

00:05:58.986 --> 00:06:01.796 A:middle
你能够你的顾客也能够

00:05:58.986 --> 00:06:01.796 A:middle
你能够你的顾客也能够

00:06:01.796 --> 00:06:05.096 A:middle
在设备之间同步使用捷径

00:06:05.566 --> 00:06:06.436 A:middle
需要注意的是

00:06:06.436 --> 00:06:07.686 A:middle
在设备之间同步时

00:06:08.666 --> 00:06:10.526 A:middle
为了支持这项功能

00:06:10.526 --> 00:06:12.396 A:middle
你的文件提供程序

00:06:12.396 --> 00:06:14.376 A:middle
需要为每一个特定客户

00:06:14.486 --> 00:06:16.656 A:middle
的所有使用设备

00:06:16.656 --> 00:06:18.616 A:middle
使用特定标识符

00:06:19.426 --> 00:06:21.266 A:middle
如果是这样

00:06:21.316 --> 00:06:22.976 A:middle
或者你可以使其发生

00:06:22.976 --> 00:06:24.456 A:middle
你所需要做的是在你的文件提供程序中

00:06:24.456 --> 00:06:26.366 A:middle
支持 Siri 捷径

00:06:26.366 --> 00:06:27.986 A:middle
即添加 NSFileProvider

00:06:28.116 --> 00:06:30.136 A:middle
UsesUniqueItemIdentifiers

00:06:30.136 --> 00:06:32.296 A:middle
AcrossDevices 到你的文件提供拓展程序

00:06:32.296 --> 00:06:34.406 A:middle
中的 info.plist 文件

00:06:35.126 --> 00:06:36.026 A:middle
一旦你完成这个

00:06:36.026 --> 00:06:37.846 A:middle
提交到商店 你就操作好了

00:06:38.726 --> 00:06:40.476 A:middle
对于 App 的开发人员来说

00:06:40.476 --> 00:06:41.416 A:middle
你不需要做任何事

00:06:42.616 --> 00:06:44.196 A:middle
有关 Siri 捷径的信息

00:06:44.196 --> 00:06:45.736 A:middle
请查看一下昨天的大会

00:06:45.736 --> 00:06:47.836 A:middle
介绍 Siri 捷径

00:06:50.596 --> 00:06:54.176 A:middle
今年同样 我们很高兴地宣布

00:06:54.176 --> 00:06:55.256 A:middle
我们正在发布

00:06:55.256 --> 00:06:56.426 A:middle
Particle Sample App

00:06:57.206 --> 00:06:58.196 A:middle
这是一个我们示例代码

00:06:58.196 --> 00:06:59.516 A:middle
我们去年在大会上使用过

00:06:59.516 --> 00:07:00.516 A:middle
来展示如何在你的 App 中使用

00:06:59.516 --> 00:07:00.516 A:middle
来展示如何在你的 App 中使用

00:07:00.516 --> 00:07:03.056 A:middle
UIDocumentBrowserViewController 的

00:07:03.056 --> 00:07:05.826 A:middle
它看起来是这样的

00:07:06.366 --> 00:07:07.836 A:middle
使用 UIDocumentBrowserViewController

00:07:08.206 --> 00:07:09.416 A:middle
作为它主要的 viewController

00:07:09.806 --> 00:07:12.546 A:middle
它定义一个文件的格式

00:07:13.296 --> 00:07:17.046 A:middle
完成状态的恢复

00:07:17.606 --> 00:07:20.056 A:middle
并且运用 UIDocumentPickerViewController

00:07:20.056 --> 00:07:21.796 A:middle
来输入素材

00:07:23.406 --> 00:07:24.676 A:middle
现在你能够下载这个了

00:07:25.336 --> 00:07:27.266 A:middle
在 WW App 中可以获得链接

00:07:27.266 --> 00:07:29.226 A:middle
你也可以上网找

00:07:29.786 --> 00:07:31.656 A:middle
这就是 Particles

00:07:33.356 --> 00:07:34.636 A:middle
所以 为此 我想要

00:07:34.636 --> 00:07:35.976 A:middle
介绍 Thomas 来到台上

00:07:36.516 --> 00:07:41.546 A:middle
[ 掌声 ]

00:07:42.046 --> 00:07:42.676 A:middle
&gt;&gt; 大家好

00:07:43.286 --> 00:07:44.856 A:middle
我是 Thomas 一名

00:07:44.856 --> 00:07:46.136 A:middle
文稿管理团队的软件工程师

00:07:46.526 --> 00:07:47.796 A:middle
我将要教大家

00:07:47.796 --> 00:07:49.806 A:middle
如何利用你的 App 中的

00:07:49.806 --> 00:07:54.026 A:middle
iOS 的文稿管理功能

00:07:54.616 --> 00:07:56.836 A:middle
我们还会一起讨论

00:07:56.946 --> 00:07:58.536 A:middle
文稿选取器

00:07:58.536 --> 00:08:01.686 A:middle
和文稿浏览器是什么

00:07:58.536 --> 00:08:01.686 A:middle
和文稿浏览器是什么

00:08:01.686 --> 00:08:02.476 A:middle
什么时候以及如何使用它们

00:08:03.566 --> 00:08:05.356 A:middle
我们将添加一个文稿选取器到

00:08:05.356 --> 00:08:07.676 A:middle
我们的样本 App Particles 中

00:08:08.696 --> 00:08:11.266 A:middle
最后我们讨论文稿的类型

00:08:11.356 --> 00:08:13.016 A:middle
以及如何

00:08:13.016 --> 00:08:14.696 A:middle
在 Xcode 中正确地配置它们

00:08:17.256 --> 00:08:18.936 A:middle
如今与这些文稿

00:08:18.936 --> 00:08:21.146 A:middle
交互意味着什么呢

00:08:21.626 --> 00:08:26.926 A:middle
当然 这意味着你需要提供 UI

00:08:26.926 --> 00:08:29.356 A:middle
让你的顾客组织他们文稿

00:08:29.816 --> 00:08:32.246 A:middle
在你的 App 容器中开始

00:08:32.846 --> 00:08:35.846 A:middle
但是由于大多数文稿

00:08:35.846 --> 00:08:38.265 A:middle
现在都在云端中 这意味着

00:08:38.426 --> 00:08:39.556 A:middle
你需要让它们访问

00:08:39.556 --> 00:08:41.246 A:middle
储存在云服务的文稿

00:08:41.936 --> 00:08:43.946 A:middle
以及其他 App 中的文稿

00:08:44.876 --> 00:08:47.346 A:middle
你应该怎么做

00:08:47.546 --> 00:08:50.196 A:middle
我们为你准备两种解决方案

00:08:50.966 --> 00:08:53.336 A:middle
文稿选取器

00:08:53.336 --> 00:08:55.136 A:middle
和文稿浏览器

00:08:55.246 --> 00:08:56.936 A:middle
二者之间的区别

00:08:56.936 --> 00:08:57.936 A:middle
又是什么呢

00:08:59.636 --> 00:09:02.956 A:middle
它们都让你浏览

00:08:59.636 --> 00:09:02.956 A:middle
它们都让你浏览

00:09:02.956 --> 00:09:04.606 A:middle
存储在你的 iOS 设备中的文件

00:09:04.606 --> 00:09:06.946 A:middle
和在多种云服务中的文件

00:09:07.426 --> 00:09:11.796 A:middle
也让你从其他 App 中访问文件

00:09:13.616 --> 00:09:16.076 A:middle
然而 它们有不同的使用案例

00:09:16.656 --> 00:09:19.186 A:middle
在很短的时间内

00:09:19.416 --> 00:09:21.286 A:middle
你可以使用文稿选取器

00:09:21.286 --> 00:09:23.496 A:middle
和你想要寻找的文件

00:09:23.496 --> 00:09:26.566 A:middle
进行快速的用户交互

00:09:27.096 --> 00:09:29.906 A:middle
另一方面文稿浏览器

00:09:29.906 --> 00:09:35.906 A:middle
有望成为你 App 中主要的文稿浏览 UI

00:09:38.616 --> 00:09:41.146 A:middle
让我们先开始看文稿浏览器

00:09:44.936 --> 00:09:46.986 A:middle
就像 Brandon 提到的

00:09:46.986 --> 00:09:48.536 A:middle
文稿浏览器是

00:09:48.646 --> 00:09:49.956 A:middle
当你启动任何 UI App 时

00:09:49.956 --> 00:09:50.876 A:middle
所看到的东西

00:09:50.876 --> 00:09:54.136 A:middle
如果你的 App 是基于文稿的

00:09:54.696 --> 00:09:56.206 A:middle
你应该使用一个

00:09:56.236 --> 00:09:58.786 A:middle
文稿浏览器来展示这些文件

00:10:00.316 --> 00:10:01.686 A:middle
如果你这样做了

00:10:02.596 --> 00:10:04.026 A:middle
你的顾客启动 App 时会

00:10:04.026 --> 00:10:06.266 A:middle
看到这些

00:10:06.936 --> 00:10:08.796 A:middle
他们会立马找到这些文件

00:10:08.796 --> 00:10:11.796 A:middle
这是很重要的事情

00:10:13.176 --> 00:10:14.756 A:middle
文稿浏览器是全屏的

00:10:14.756 --> 00:10:17.236 A:middle
可以让你的顾客

00:10:17.236 --> 00:10:19.506 A:middle
打开和组织你的 App

00:10:19.506 --> 00:10:21.496 A:middle
所处理的文稿

00:10:25.076 --> 00:10:26.966 A:middle
就像 Brandon 所说

00:10:26.966 --> 00:10:28.206 A:middle
它拥有所有文件 App 的功能

00:10:29.556 --> 00:10:32.326 A:middle
所以搜索 标签 收藏

00:10:32.456 --> 00:10:34.546 A:middle
最近项目 所有的这些都是免费的

00:10:34.546 --> 00:10:36.976 A:middle
我们可以为你编辑所有内容

00:10:41.046 --> 00:10:43.966 A:middle
可以使用自己的按钮

00:10:43.966 --> 00:10:46.096 A:middle
进行自定义 比如

00:10:46.096 --> 00:10:47.116 A:middle
右上角的按钮

00:10:47.116 --> 00:10:51.486 A:middle
或者来匹配你的 App 外观

00:10:52.316 --> 00:10:53.986 A:middle
正如你所看到的 Numbers 表格和

00:10:53.986 --> 00:10:56.106 A:middle
Keynote 讲演看起来完全不同

00:10:56.106 --> 00:10:58.206 A:middle
但是都在文稿浏览器控制器的

00:10:58.206 --> 00:10:59.036 A:middle
基础上建立的

00:11:00.616 --> 00:11:02.856 A:middle
当然 一旦你的顾客

00:11:02.856 --> 00:11:05.096 A:middle
打开一个文稿

00:11:05.096 --> 00:11:08.186 A:middle
你将会在浏览器顶端

00:11:08.356 --> 00:11:10.076 A:middle
呈现你自己的 UI

00:11:10.076 --> 00:11:11.576 A:middle
例如呈现你的文稿 UI

00:11:12.146 --> 00:11:13.866 A:middle
如今 因为文稿

00:11:13.866 --> 00:11:15.466 A:middle
浏览器是你 App 的入口点

00:11:15.466 --> 00:11:18.916 A:middle
最好让它成为根视图控制器

00:11:18.916 --> 00:11:21.996 A:middle
然而 我们去年从你们那里

00:11:21.996 --> 00:11:23.616 A:middle
得到很多反馈说

00:11:23.616 --> 00:11:25.696 A:middle
使它成为

00:11:25.696 --> 00:11:27.626 A:middle
根视图控制器并不容易

00:11:28.156 --> 00:11:31.116 A:middle
如果是这样 我们想要

00:11:31.116 --> 00:11:33.246 A:middle
说明一下去年给出的指南

00:11:33.776 --> 00:11:36.556 A:middle
文稿浏览器也可以

00:11:36.556 --> 00:11:38.016 A:middle
以全屏的方式进行呈现文稿

00:11:38.016 --> 00:11:41.976 A:middle
很可能就在启动后不久

00:11:43.496 --> 00:11:45.956 A:middle
然而 这也意味着

00:11:45.956 --> 00:11:48.466 A:middle
你 App 的起点

00:11:48.466 --> 00:11:50.806 A:middle
在基于文稿的 App 中

00:11:50.806 --> 00:11:52.976 A:middle
我们首先应该看到的是文稿

00:11:55.956 --> 00:11:58.286 A:middle
所以 我们不建议

00:11:58.286 --> 00:12:01.996 A:middle
离开浏览器

00:11:58.286 --> 00:12:01.996 A:middle
离开浏览器

00:12:02.636 --> 00:12:04.686 A:middle
如果你认为你需要隐藏

00:12:04.866 --> 00:12:07.816 A:middle
浏览器 也许你可能

00:12:07.816 --> 00:12:09.586 A:middle
需要寻找的是文稿

00:12:09.586 --> 00:12:11.686 A:middle
选取起 我们接下来会进行讨论

00:12:14.056 --> 00:12:16.156 A:middle
如何通过新的

00:12:16.226 --> 00:12:18.296 A:middle
文稿浏览器控制器开始

00:12:18.626 --> 00:12:19.806 A:middle
你可以在 Xcode 中打开一个新的 App

00:12:19.806 --> 00:12:21.676 A:middle
然后使用

00:12:21.676 --> 00:12:23.006 A:middle
基于文稿的 App 模板

00:12:24.446 --> 00:12:26.016 A:middle
这个模板将给你

00:12:26.106 --> 00:12:28.116 A:middle
基于文稿浏览器控制器的 App

00:12:29.226 --> 00:12:31.286 A:middle
如果你有正在用的 App

00:12:31.286 --> 00:12:32.576 A:middle
你想向其中添加一个

00:12:32.576 --> 00:12:34.226 A:middle
DocumentBrowserViewController

00:12:34.226 --> 00:12:36.946 A:middle
你可以拖一个文稿浏览器

00:12:36.946 --> 00:12:39.336 A:middle
到你的 Storyboard 中

00:12:39.336 --> 00:12:41.976 A:middle
并且在 Xcode 中用初始试图控制器复选框

00:12:47.606 --> 00:12:48.966 A:middle
一旦你有了文稿

00:12:48.966 --> 00:12:50.846 A:middle
浏览器控制器 你就可以进行自定义

00:12:52.216 --> 00:12:54.096 A:middle
你可以把自己的按钮加到

00:12:54.096 --> 00:12:55.496 A:middle
栏和菜单中

00:12:56.036 --> 00:12:58.966 A:middle
你也可以设置自己的颜色

00:12:58.966 --> 00:12:59.966 A:middle
和主题来匹配你 App 的外观

00:13:04.536 --> 00:13:07.356 A:middle
你也可以自定义开关

00:13:07.356 --> 00:13:08.796 A:middle
文稿动画

00:13:09.186 --> 00:13:10.436 A:middle
这样一来你就可以放大

00:13:10.436 --> 00:13:12.016 A:middle
从文稿的中心

00:13:12.016 --> 00:13:14.376 A:middle
转换到你自己的文件附加 UI

00:13:14.376 --> 00:13:16.136 A:middle
想要了解这个

00:13:16.136 --> 00:13:18.196 A:middle
请观看去年的大会

00:13:18.196 --> 00:13:19.986 A:middle
我们在其中详细讲解了这些

00:13:22.046 --> 00:13:24.776 A:middle
正如 Brandon 所说 我们

00:13:24.776 --> 00:13:26.906 A:middle
在去年的大会上已经制作了示例 App

00:13:26.906 --> 00:13:28.816 A:middle
就像现在可以获得的

00:13:28.846 --> 00:13:30.356 A:middle
示例代码

00:13:32.766 --> 00:13:34.816 A:middle
如今文稿选取器是一件

00:13:34.816 --> 00:13:36.606 A:middle
截然不同的东西

00:13:36.656 --> 00:13:40.896 A:middle
你使用它来让你的客户

00:13:41.016 --> 00:13:42.986 A:middle
打开存储在

00:13:43.046 --> 00:13:45.046 A:middle
云服务或者其他

00:13:45.046 --> 00:13:47.886 A:middle
App 中的文稿或素材 但是只在

00:13:47.886 --> 00:13:50.226 A:middle
选择文稿的时候它出现 一会就消失了

00:13:51.556 --> 00:13:53.576 A:middle
文稿选取起就是我们

00:13:53.576 --> 00:13:54.236 A:middle
在邮件中使用的东西

00:13:55.776 --> 00:13:57.686 A:middle
当你想在邮件中加入一个文件

00:13:57.686 --> 00:14:00.316 A:middle
你点击添加附件按钮

00:13:57.686 --> 00:14:00.316 A:middle
你点击添加附件按钮

00:14:00.316 --> 00:14:03.526 A:middle
这张表单就会弹出来

00:14:04.576 --> 00:14:05.976 A:middle
这就是一个文稿选取器

00:14:06.986 --> 00:14:09.416 A:middle
你选择一个添加一个文件

00:14:10.206 --> 00:14:11.236 A:middle
这个表就消失了

00:14:11.806 --> 00:14:15.086 A:middle
在 iWork 中是一样的

00:14:15.976 --> 00:14:18.056 A:middle
如果你想添加一个 PDF

00:14:18.376 --> 00:14:20.516 A:middle
到你的 Pages 文稿中

00:14:22.066 --> 00:14:23.736 A:middle
你将从按钮轻点插入

00:14:23.736 --> 00:14:26.226 A:middle
相同的表单会弹出来

00:14:26.866 --> 00:14:28.506 A:middle
你选择一个文件 表单就消失了

00:14:29.856 --> 00:14:31.436 A:middle
所以如果你需要展示用户

00:14:31.436 --> 00:14:33.676 A:middle
界面来让你的客户

00:14:34.556 --> 00:14:36.406 A:middle
打开 从云端中浏览东西

00:14:36.406 --> 00:14:39.176 A:middle
一旦选中文件它就会藏起来

00:14:39.176 --> 00:14:41.136 A:middle
文稿选取器对你来说

00:14:41.136 --> 00:14:42.726 A:middle
是个很好的选择

00:14:45.336 --> 00:14:48.746 A:middle
我们为什么需要给你一个文稿选取器呢

00:14:50.066 --> 00:14:52.156 A:middle
因为正如我们所说的

00:14:52.426 --> 00:14:54.696 A:middle
文稿可能在多个位置中

00:14:55.276 --> 00:14:57.386 A:middle
它们可能在云端中

00:14:57.386 --> 00:14:58.316 A:middle
也可能在其他 App 容器中

00:14:59.106 --> 00:15:03.576 A:middle
而且在默认情况下 你无法添加访问权限

00:14:59.106 --> 00:15:03.576 A:middle
而且在默认情况下 你无法添加访问权限

00:15:03.796 --> 00:15:06.226 A:middle
所以 你需要做一些事情来获得

00:15:06.256 --> 00:15:08.586 A:middle
访问权限 在这些不同的位置中

00:15:08.586 --> 00:15:10.236 A:middle
复制和移动文稿

00:15:10.236 --> 00:15:16.986 A:middle
这就是文稿选取器所做的事

00:15:17.636 --> 00:15:19.676 A:middle
一旦文件被选中 它就消失

00:15:19.676 --> 00:15:21.756 A:middle
所以如果你想让

00:15:21.866 --> 00:15:23.566 A:middle
什么在屏幕上待的久一点

00:15:23.566 --> 00:15:24.986 A:middle
你应该查看

00:15:24.986 --> 00:15:25.916 A:middle
文稿浏览器

00:15:31.406 --> 00:15:33.136 A:middle
你可以用文件选取器做什么呢

00:15:33.996 --> 00:15:35.466 A:middle
你可以用它干很多事情

00:15:36.346 --> 00:15:38.216 A:middle
你可以用它在云端中

00:15:38.316 --> 00:15:39.466 A:middle
直接访问文件

00:15:42.536 --> 00:15:45.646 A:middle
现在 通过复制 你可以

00:15:45.786 --> 00:15:50.106 A:middle
把文件移动到

00:15:50.106 --> 00:15:52.366 A:middle
云端中来实现一个安全的

00:15:52.366 --> 00:15:52.956 A:middle
云服务功能

00:15:53.456 --> 00:15:56.556 A:middle
复制文稿通常令人

00:15:56.676 --> 00:15:59.106 A:middle
很困惑 但是如果你

00:15:59.106 --> 00:16:00.896 A:middle
真的想复制文件 你可以使用它

00:15:59.106 --> 00:16:00.896 A:middle
真的想复制文件 你可以使用它

00:16:01.366 --> 00:16:04.796 A:middle
从云端复制东西或者复制东西到云端中去

00:16:09.336 --> 00:16:12.506 A:middle
让我们假设我们的顾客

00:16:12.506 --> 00:16:14.646 A:middle
想要访问一部

00:16:14.646 --> 00:16:15.646 A:middle
他们储存在云服务中的电影

00:16:16.506 --> 00:16:18.076 A:middle
这就是使用文稿

00:16:18.076 --> 00:16:18.746 A:middle
选取器控制器的一个绝佳例子

00:16:20.116 --> 00:16:21.626 A:middle
你创建一个文稿选取器

00:16:21.626 --> 00:16:23.426 A:middle
控制器 你指定

00:16:23.426 --> 00:16:25.566 A:middle
你想让用户选择的文件类型

00:16:25.566 --> 00:16:27.306 A:middle
作为第一个文稿

00:16:28.166 --> 00:16:29.666 A:middle
第二个文稿是

00:16:29.666 --> 00:16:34.276 A:middle
我们在之前的幻灯片中描述的常量之一

00:16:34.366 --> 00:16:36.046 A:middle
然后你设置文稿

00:16:36.046 --> 00:16:38.026 A:middle
picker.delegate 因为这是

00:16:38.026 --> 00:16:41.446 A:middle
我们得知你的

00:16:41.706 --> 00:16:43.106 A:middle
顾客已经选择他们的文件的一种方式

00:16:43.106 --> 00:16:45.866 A:middle
然后你将它呈现出来

00:16:47.016 --> 00:16:49.376 A:middle
一旦文件被选中 你将

00:16:49.376 --> 00:16:53.976 A:middle
调用这个委托方法

00:16:54.136 --> 00:16:55.296 A:middle
你用这种方法获得

00:16:55.296 --> 00:16:56.766 A:middle
你的文件 URL

00:16:57.426 --> 00:16:58.586 A:middle
你可以直接使用它们

00:17:00.076 --> 00:17:03.196 A:middle
你可以获得不止一个 URL

00:17:03.636 --> 00:17:05.236 A:middle
因为你可以在

00:17:05.236 --> 00:17:07.646 A:middle
选取器中设置一种属性

00:17:07.646 --> 00:17:09.566 A:middle
你的顾客可以一次同时选择

00:17:09.566 --> 00:17:11.185 A:middle
多种文件

00:17:15.386 --> 00:17:17.156 A:middle
所以 让我们继续

00:17:17.286 --> 00:17:20.286 A:middle
添加一个文稿选取器到我们去年的

00:17:20.286 --> 00:17:21.886 A:middle
示例 App Particles 中

00:17:26.455 --> 00:17:28.626 A:middle
这是去年选择的 App

00:17:28.986 --> 00:17:30.316 A:middle
它在文稿浏览器的基础之上

00:17:30.316 --> 00:17:32.486 A:middle
允许我选择一个文件来打开

00:17:33.496 --> 00:17:35.116 A:middle
正如你所看到的 我有最近项目

00:17:35.116 --> 00:17:36.876 A:middle
有标签 有搜索

00:17:36.876 --> 00:17:39.276 A:middle
有浏览 来列出所有的来源

00:17:39.796 --> 00:17:41.136 A:middle
所有这些都是免费的

00:17:42.506 --> 00:17:44.976 A:middle
现在 我可以继续 打开

00:17:44.976 --> 00:17:48.006 A:middle
这个文件 可以微调这个

00:17:48.006 --> 00:17:49.536 A:middle
漂亮的粒子系统

00:17:50.076 --> 00:17:53.586 A:middle
现在 我的顾客喜欢这款 App

00:17:54.436 --> 00:17:56.546 A:middle
但是他们想要

00:17:56.546 --> 00:17:59.906 A:middle
粒子变得更好看一点儿

00:18:00.086 --> 00:18:02.386 A:middle
所以他们要求设计师们

00:18:02.426 --> 00:18:03.926 A:middle
设计出一些更好看的

00:18:03.976 --> 00:18:05.586 A:middle
粒子图像

00:18:05.586 --> 00:18:07.336 A:middle
设计师们已经在 iCloud 中共享了

00:18:07.336 --> 00:18:08.476 A:middle
这些图像

00:18:09.346 --> 00:18:11.456 A:middle
所以我们怎样获取这些图像然后

00:18:11.746 --> 00:18:12.496 A:middle
对它们进行自定义呢

00:18:13.246 --> 00:18:15.726 A:middle
我们将要做的是添加一个

00:18:15.726 --> 00:18:17.146 A:middle
选择图像按钮在

00:18:17.146 --> 00:18:19.866 A:middle
导航栏中 从 iCloud 中选择一个

00:18:19.866 --> 00:18:22.546 A:middle
文件 然后自定义

00:18:22.816 --> 00:18:23.496 A:middle
这些粒子

00:18:25.196 --> 00:18:26.476 A:middle
所以 你可以打开你的

00:18:26.476 --> 00:18:29.946 A:middle
Storyboard 在这里我在操作控制器

00:18:30.836 --> 00:18:32.306 A:middle
我将拖一个新的按钮

00:18:32.306 --> 00:18:34.966 A:middle
到编辑器中

00:18:40.616 --> 00:18:44.846 A:middle
我将设置选择图像

00:18:51.156 --> 00:18:54.586 A:middle
选择图像 现在 我要写代码来呈现

00:18:55.066 --> 00:18:59.206 A:middle
控制器中的

00:18:59.206 --> 00:19:00.696 A:middle
文稿选取器

00:18:59.206 --> 00:19:00.696 A:middle
文稿选取器

00:19:01.116 --> 00:19:05.956 A:middle
我可以从我的按钮中

00:19:06.786 --> 00:19:10.036 A:middle
拖到源代码中

00:19:10.036 --> 00:19:11.996 A:middle
我同意叫它选择图像

00:19:12.556 --> 00:19:14.986 A:middle
然后选择这里再连接

00:19:16.386 --> 00:19:17.546 A:middle
现在我的代码出现了两次

00:19:17.886 --> 00:19:20.406 A:middle
让我在一个更大的窗口

00:19:21.156 --> 00:19:21.976 A:middle
为大家进行展示

00:19:26.076 --> 00:19:28.556 A:middle
我在使用我的 ChooseImage 方法

00:19:28.996 --> 00:19:31.396 A:middle
我首先要创建

00:19:31.486 --> 00:19:32.696 A:middle
一个 UIDocumentPickerController

00:19:32.776 --> 00:19:34.826 A:middle
我指定了

00:19:34.826 --> 00:19:36.006 A:middle
想让顾客选择的文件类型

00:19:36.396 --> 00:19:40.666 A:middle
这是 UTTypeImage 和模式

00:19:40.966 --> 00:19:42.306 A:middle
我在使用输入因为我

00:19:42.306 --> 00:19:44.896 A:middle
想把粒子图像嵌入到

00:19:44.896 --> 00:19:45.536 A:middle
我的文稿中

00:19:46.236 --> 00:19:49.316 A:middle
但是在大多数情况下 你将使用的是打开

00:19:51.536 --> 00:19:54.256 A:middle
你设置你的文稿 picker.delegate

00:19:54.796 --> 00:19:56.056 A:middle
然后将其呈现出来

00:19:57.406 --> 00:19:59.986 A:middle
当文稿选取器被调用

00:19:59.986 --> 00:20:02.796 A:middle
文件被选中

00:19:59.986 --> 00:20:02.796 A:middle
文件被选中

00:20:02.796 --> 00:20:03.976 A:middle
你又返回到了原来的界面

00:20:04.046 --> 00:20:07.436 A:middle
所以 我们需要用这种方法完成 document.Picker

00:20:08.136 --> 00:20:10.516 A:middle
我不知道你注意到没有 但是

00:20:10.986 --> 00:20:14.136 A:middle
我没有设置一种属性来

00:20:14.446 --> 00:20:16.416 A:middle
选择文件夹

00:20:17.716 --> 00:20:20.006 A:middle
所以 我将要检查

00:20:20.006 --> 00:20:22.046 A:middle
这儿只有一个 URL

00:20:24.296 --> 00:20:27.016 A:middle
找到第一个 URL

00:20:27.076 --> 00:20:28.306 A:middle
从那创建一个图像

00:20:29.296 --> 00:20:31.756 A:middle
在我们的粒子系统中设置它

00:20:31.756 --> 00:20:32.976 A:middle
这也许是[ 音质不清晰 ]

00:20:34.396 --> 00:20:36.156 A:middle
让我们再运行一次

00:20:37.836 --> 00:20:39.796 A:middle
它启动我的 App 并且会

00:20:39.796 --> 00:20:40.976 A:middle
迅速打开我的模拟器

00:20:47.776 --> 00:20:48.566 A:middle
所以 我现在到这了

00:20:48.636 --> 00:20:49.976 A:middle
我在模拟器里

00:20:50.026 --> 00:20:51.076 A:middle
我可以打开我的文件

00:20:51.076 --> 00:20:52.716 A:middle
在我的导航栏中

00:20:52.716 --> 00:20:55.426 A:middle
我有了这个新的选择 图像按钮

00:20:55.426 --> 00:20:58.236 A:middle
我可以轻点它 然后我的文稿

00:20:58.236 --> 00:20:59.446 A:middle
选取器就出来了

00:20:59.446 --> 00:21:01.136 A:middle
正如你所看到的 再一次 我们

00:20:59.446 --> 00:21:01.136 A:middle
正如你所看到的 再一次 我们

00:21:01.166 --> 00:21:02.296 A:middle
在文件 App 中有了所有的图像

00:21:02.296 --> 00:21:03.926 A:middle
我们可以搜索我们的文件 你有标签

00:21:04.256 --> 00:21:06.476 A:middle
你可以浏览

00:21:06.476 --> 00:21:07.696 A:middle
所有这些都是免费的

00:21:09.266 --> 00:21:12.146 A:middle
现在 我的粒子图像

00:21:12.146 --> 00:21:13.066 A:middle
分享到了

00:21:13.066 --> 00:21:14.576 A:middle
iCloud 所以它们出现在

00:21:14.576 --> 00:21:15.536 A:middle
［ 音质不清晰 ］

00:21:15.536 --> 00:21:18.166 A:middle
再一次 使用这个小星星的图像

00:21:18.866 --> 00:21:21.976 A:middle
选择它 我的粒子就变成了小星星

00:21:22.516 --> 00:21:28.616 A:middle
［ 掌声 ］

00:21:29.116 --> 00:21:30.126 A:middle
这个很简单

00:21:30.736 --> 00:21:32.646 A:middle
当你回来工作时

00:21:32.646 --> 00:21:33.816 A:middle
你将能够立刻添加

00:21:33.816 --> 00:21:36.796 A:middle
一个文稿选取器到你的 App 中

00:21:37.386 --> 00:21:39.836 A:middle
它没有很多代码

00:21:39.836 --> 00:21:41.806 A:middle
也不依赖任何

00:21:41.806 --> 00:21:42.736 A:middle
第三方资料库

00:21:43.576 --> 00:21:45.416 A:middle
你的顾客可以很简单地访问

00:21:45.416 --> 00:21:47.916 A:middle
他们的文件 不管文件存储在哪儿

00:21:48.446 --> 00:21:51.116 A:middle
现在 你注意到

00:21:51.116 --> 00:21:53.536 A:middle
在演示中 我们再一次提到了文件类型

00:21:53.866 --> 00:21:55.596 A:middle
你们当中的很多人可能

00:21:55.596 --> 00:21:56.866 A:middle
不知道文件类型是什么

00:21:57.246 --> 00:22:01.296 A:middle
让我们谈一谈文件类型

00:21:57.246 --> 00:22:01.296 A:middle
让我们谈一谈文件类型

00:22:02.186 --> 00:22:04.126 A:middle
文件类型可以让系统

00:22:04.126 --> 00:22:05.706 A:middle
识别 你的 App 知道如何处理

00:22:05.706 --> 00:22:07.516 A:middle
哪种文件

00:22:08.036 --> 00:22:12.176 A:middle
它们很重要因为

00:22:12.366 --> 00:22:16.376 A:middle
当在文件 App 中选择文件时

00:22:16.376 --> 00:22:17.916 A:middle
它们让 iOS 打开你的 App

00:22:19.096 --> 00:22:21.456 A:middle
它们也会让它在

00:22:21.596 --> 00:22:22.406 A:middle
分享表单中显示你的 App

00:22:23.016 --> 00:22:26.436 A:middle
最后它允许 iOS

00:22:26.436 --> 00:22:27.976 A:middle
为你的文稿选择合适的图标

00:22:29.126 --> 00:22:30.626 A:middle
所以 如果我想正确配置我的类型

00:22:30.626 --> 00:22:32.336 A:middle
如果我想

00:22:32.336 --> 00:22:35.406 A:middle
进行扩展 我将在浏览

00:22:35.406 --> 00:22:37.426 A:middle
粒子文件时在文件 App 中看到这个

00:22:37.906 --> 00:22:40.606 A:middle
如果我没有 我将看到的

00:22:40.606 --> 00:22:42.456 A:middle
是这个 不太美观

00:22:42.456 --> 00:22:44.236 A:middle
我的客户也不能

00:22:44.236 --> 00:22:46.056 A:middle
从文件 App 中打开我的文件

00:22:47.256 --> 00:22:48.856 A:middle
所以 让我们一起设置这个

00:22:51.376 --> 00:22:55.036 A:middle
当你想设置文稿类型 这有两个步骤

00:22:55.966 --> 00:22:57.376 A:middle
首先你需要声明类型

00:22:57.376 --> 00:22:58.986 A:middle
如果不是已被 iOS

00:22:58.986 --> 00:23:00.936 A:middle
声明过的 接下来你需要

00:22:58.986 --> 00:23:00.936 A:middle
声明过的 接下来你需要

00:23:00.936 --> 00:23:04.216 A:middle
确认 告诉 iOS 你可以

00:23:04.216 --> 00:23:06.486 A:middle
浏览或者编辑这种文件类型

00:23:07.136 --> 00:23:10.326 A:middle
首先开始声明类型

00:23:10.836 --> 00:23:13.056 A:middle
第一个问题是你需要

00:23:13.056 --> 00:23:15.616 A:middle
问问自己 你需要声明它吗

00:23:16.486 --> 00:23:19.146 A:middle
因为在多数情况下 你将

00:23:19.146 --> 00:23:20.666 A:middle
处理普通的文件类型

00:23:21.176 --> 00:23:23.316 A:middle
比如视频 图像 PDF

00:23:23.366 --> 00:23:24.896 A:middle
展示和电子表格

00:23:25.966 --> 00:23:28.226 A:middle
如果是这样 iOS

00:23:28.226 --> 00:23:30.416 A:middle
很可能已为你声明了类型

00:23:31.266 --> 00:23:32.626 A:middle
想要知道是否属实

00:23:32.626 --> 00:23:35.056 A:middle
你可以在这个短的

00:23:35.056 --> 00:23:37.846 A:middle
URL 中查看文件

00:23:40.536 --> 00:23:42.996 A:middle
如果是这样 很好 你

00:23:42.996 --> 00:23:45.386 A:middle
不需要再做任何事

00:23:45.386 --> 00:23:47.746 A:middle
你可以立即确认类型了

00:23:50.496 --> 00:23:53.276 A:middle
另一种常见的情况是

00:23:53.276 --> 00:23:55.326 A:middle
当你写入一个 App 它定义

00:23:55.446 --> 00:23:56.756 A:middle
它自己的文件格式

00:23:57.856 --> 00:23:58.996 A:middle
你创造了自己的文件

00:23:58.996 --> 00:24:01.546 A:middle
格式 你定义它的类型

00:23:58.996 --> 00:24:01.546 A:middle
格式 你定义它的类型

00:24:02.466 --> 00:24:03.716 A:middle
接下来你应该声明你的

00:24:03.716 --> 00:24:06.406 A:middle
类型 正如输出的那样 告诉

00:24:06.406 --> 00:24:08.986 A:middle
iOS 你有权力声明

00:24:08.986 --> 00:24:10.166 A:middle
这个文件类型

00:24:12.216 --> 00:24:14.316 A:middle
这就是我所在的情景

00:24:14.316 --> 00:24:17.536 A:middle
在文件 App 中 对不起

00:24:18.016 --> 00:24:18.816 A:middle
在 Particles App 中

00:24:19.236 --> 00:24:21.956 A:middle
我的 Particles 文件格式是我自己设置的

00:24:21.996 --> 00:24:25.976 A:middle
所以我可以打开 Xcode

00:24:25.976 --> 00:24:29.346 A:middle
来设置这种类型

00:24:29.536 --> 00:24:31.996 A:middle
在这个输出的 UI

00:24:31.996 --> 00:24:34.346 A:middle
部分 可以让我编辑自己的

00:24:34.346 --> 00:24:37.176 A:middle
info.plist 我指定类型标识符

00:24:37.176 --> 00:24:40.846 A:middle
这是一个我选择的字符串

00:24:41.516 --> 00:24:42.696 A:middle
所以 接下来是

00:24:42.696 --> 00:24:44.766 A:middle
一个例子 有关示例

00:24:44.766 --> 00:24:50.026 A:middle
代码 粒子 我需要

00:24:50.026 --> 00:24:51.276 A:middle
声明一系列父类型

00:24:51.276 --> 00:24:53.186 A:middle
在 Conforms To 字段中

00:24:54.396 --> 00:24:58.356 A:middle
什么是父类型

00:24:58.536 --> 00:25:01.406 A:middle
类型形成一棵树

00:24:58.536 --> 00:25:01.406 A:middle
类型形成一棵树

00:25:01.406 --> 00:25:02.946 A:middle
我们叫做［ 音质不清晰 ］树

00:25:03.906 --> 00:25:08.276 A:middle
你可以把它想成一个

00:25:08.276 --> 00:25:09.196 A:middle
［ 音质不清晰 ］比如 Swift

00:25:10.546 --> 00:25:13.856 A:middle
例如 JPEG 图像和

00:25:14.256 --> 00:25:17.556 A:middle
HEIF 图像都是图像

00:25:18.626 --> 00:25:21.116 A:middle
图像符合我们的根

00:25:21.116 --> 00:25:23.536 A:middle
类型 为客户所创建或

00:25:23.536 --> 00:25:26.156 A:middle
客户所见文稿

00:25:26.156 --> 00:25:29.976 A:middle
叫做 public.content

00:25:30.076 --> 00:25:31.416 A:middle
现在 public.content 有其他

00:25:31.416 --> 00:25:33.366 A:middle
孩子 比如像

00:25:33.366 --> 00:25:34.166 A:middle
public.spreadsheet

00:25:35.996 --> 00:25:38.666 A:middle
你可以在我之前

00:25:38.786 --> 00:25:42.586 A:middle
指出的文件中找到这一类型系列

00:25:42.586 --> 00:25:43.776 A:middle
现在 我们需要在这棵树中

00:25:43.776 --> 00:25:45.706 A:middle
为我的类型 Particle 找到一个点

00:25:46.956 --> 00:25:49.186 A:middle
因为 Particle 系统不是

00:25:49.296 --> 00:25:51.916 A:middle
一个普通的文件种类

00:25:51.916 --> 00:25:53.516 A:middle
没有任何［ 音质不清晰 ］种类

00:25:54.076 --> 00:25:55.736 A:middle
所以 我不能仅仅直接

00:25:55.736 --> 00:25:58.786 A:middle
遵照 public.content

00:25:58.876 --> 00:26:00.226 A:middle
我需要通过 public.spreadsheet

00:25:58.876 --> 00:26:00.226 A:middle
我需要通过 public.spreadsheet

00:26:00.226 --> 00:26:02.196 A:middle
或者图像直接

00:26:02.506 --> 00:26:03.786 A:middle
或间接遵照

00:26:03.786 --> 00:26:06.326 A:middle
public.content 如果

00:26:06.326 --> 00:26:07.956 A:middle
我想要我的文件在

00:26:07.956 --> 00:26:11.616 A:middle
最近项目或者搜索中出现

00:26:12.456 --> 00:26:13.766 A:middle
接下来你有了第二棵树

00:26:14.166 --> 00:26:15.446 A:middle
我们叫做物理树

00:26:16.046 --> 00:26:17.706 A:middle
它可以让 iOS 知道

00:26:17.706 --> 00:26:19.316 A:middle
文件怎样在磁盘中显示

00:26:20.216 --> 00:26:21.706 A:middle
这个就简单多了

00:26:22.036 --> 00:26:23.926 A:middle
因为你只有两种选择

00:26:25.406 --> 00:26:27.556 A:middle
多数情况下 你将为

00:26:27.556 --> 00:26:29.286 A:middle
你的文稿处理磁盘上的

00:26:29.286 --> 00:26:31.496 A:middle
单个文件

00:26:32.136 --> 00:26:35.956 A:middle
如果你需要把很多

00:26:35.956 --> 00:26:38.446 A:middle
资源聚集起来 你有

00:26:38.446 --> 00:26:40.446 A:middle
文件包 你将

00:26:40.446 --> 00:26:42.006 A:middle
使用 com.apple.package

00:26:42.466 --> 00:26:43.536 A:middle
但多数情况下 你有一个

00:26:43.536 --> 00:26:45.926 A:middle
单独的文件磁盘 它是 public.data

00:26:47.656 --> 00:26:49.146 A:middle
这是因为我现在在用

00:26:49.186 --> 00:26:52.156 A:middle
Particle 我要遵守 public.data

00:26:52.746 --> 00:26:55.936 A:middle
现在 因为这是一棵树

00:26:56.346 --> 00:26:58.666 A:middle
从物理体系结构和根类型中

00:26:58.666 --> 00:27:00.786 A:middle
迭代 .data 和 .pakage

00:26:58.666 --> 00:27:00.786 A:middle
迭代 .data 和 .pakage

00:27:00.786 --> 00:27:04.366 A:middle
这就是 public.item

00:27:04.816 --> 00:27:06.566 A:middle
但是 如果你不在乎这个

00:27:06.616 --> 00:27:08.476 A:middle
你只需要在

00:27:08.476 --> 00:27:10.546 A:middle
.data 和 .package 进行选择

00:27:11.026 --> 00:27:12.126 A:middle
因此 你有两个父母

00:27:12.726 --> 00:27:14.536 A:middle
public.data 和 public.content

00:27:15.586 --> 00:27:17.756 A:middle
所以在我的 Xcode UI 中 我将要

00:27:17.756 --> 00:27:20.266 A:middle
遵循 public.data 和

00:27:20.266 --> 00:27:21.726 A:middle
public.content 来编写

00:27:22.196 --> 00:27:26.336 A:middle
我需要做的最后一件事是

00:27:26.456 --> 00:27:28.966 A:middle
告诉 iOS 哪个文件扩展和

00:27:29.026 --> 00:27:31.786 A:middle
我的类型有联系

00:27:33.016 --> 00:27:35.046 A:middle
这就是 iOS 如何知道

00:27:35.046 --> 00:27:37.796 A:middle
Particle 文件是这种定义的类型

00:27:38.336 --> 00:27:41.326 A:middle
为此 我将 UTType

00:27:41.386 --> 00:27:45.786 A:middle
分类属性添加到我的属性中

00:27:46.776 --> 00:27:50.036 A:middle
在这个词典当中 我添加一把钥匙

00:27:50.076 --> 00:27:53.436 A:middle
叫做 public.filename-extension 和

00:27:53.436 --> 00:27:55.286 A:middle
你想与你的类型相联系的

00:27:55.286 --> 00:27:58.926 A:middle
［ 音质不清晰 ］文件拓展

00:27:59.066 --> 00:28:01.996 A:middle
我在 Particle 上有一个新项目

00:27:59.066 --> 00:28:01.996 A:middle
我在 Particle 上有一个新项目

00:28:02.656 --> 00:28:06.396 A:middle
说完这话 我们的声明

00:28:06.886 --> 00:28:07.286 A:middle
就完成了

00:28:08.856 --> 00:28:11.876 A:middle
还有一件事我没提

00:28:12.406 --> 00:28:19.056 A:middle
就是我们声明自己类型的情况

00:28:19.746 --> 00:28:21.026 A:middle
但是 你可能想使用

00:28:21.026 --> 00:28:22.926 A:middle
另一 App定义的类型

00:28:23.476 --> 00:28:26.286 A:middle
如果是这样 你也

00:28:26.286 --> 00:28:28.616 A:middle
需要声明类型以便

00:28:28.616 --> 00:28:31.596 A:middle
iOS 知道 以防 App 不安全

00:28:32.486 --> 00:28:34.486 A:middle
因为这是一个输入的

00:28:34.636 --> 00:28:39.096 A:middle
类型声明 这意味着

00:28:39.486 --> 00:28:41.856 A:middle
如果 iOS 发现一个额外的

00:28:41.856 --> 00:28:42.956 A:middle
别处的类型定义

00:28:43.006 --> 00:28:44.856 A:middle
它可能更喜欢这个定义

00:28:44.856 --> 00:28:46.366 A:middle
胜过你的定义

00:28:47.476 --> 00:28:48.826 A:middle
这也是你需要做的事

00:28:49.236 --> 00:28:50.606 A:middle
如果你想使用一个至今 iOS

00:28:50.606 --> 00:28:53.396 A:middle
还没有声明的类型

00:28:54.536 --> 00:28:55.736 A:middle
现在 不要惊慌 这个 UI

00:28:55.736 --> 00:28:58.976 A:middle
与我们刚才所做的一样

00:28:58.976 --> 00:29:02.136 A:middle
除了它是输入

00:28:58.976 --> 00:29:02.136 A:middle
除了它是输入

00:29:02.136 --> 00:29:03.946 A:middle
而不是输出

00:29:08.046 --> 00:29:09.696 A:middle
一旦你定义了类型

00:29:10.066 --> 00:29:11.846 A:middle
你可以要求支持它

00:29:12.256 --> 00:29:14.966 A:middle
这仍然在你的 info.plist 里或者 Xcode UI 里

00:29:15.596 --> 00:29:19.996 A:middle
为此 你指定

00:29:19.996 --> 00:29:21.336 A:middle
你已定义的类型标识符

00:29:21.336 --> 00:29:23.586 A:middle
你需要做的

00:29:23.836 --> 00:29:26.176 A:middle
另一件事是

00:29:26.276 --> 00:29:27.276 A:middle
定义一个等级

00:29:28.016 --> 00:29:30.596 A:middle
这让 iOS 知道

00:29:30.596 --> 00:29:32.476 A:middle
当你轻点文件时做什么

00:29:32.526 --> 00:29:35.026 A:middle
且多个 App 可以打开这个文件

00:29:36.796 --> 00:29:39.046 A:middle
为此 你有三种选择

00:29:42.316 --> 00:29:44.646 A:middle
第一种是如果是你自己的文件类型

00:29:45.716 --> 00:29:46.496 A:middle
你选择 Owner

00:29:47.026 --> 00:29:48.316 A:middle
要清楚的是

00:29:48.316 --> 00:29:50.396 A:middle
只有当你碰巧建立

00:29:50.396 --> 00:29:52.586 A:middle
自己的文件类型时才可以使用

00:29:53.896 --> 00:29:56.346 A:middle
大多数情况 你想使用

00:29:56.426 --> 00:30:00.386 A:middle
Default 如果你可以编辑

00:29:56.426 --> 00:30:00.386 A:middle
Default 如果你可以编辑

00:30:00.386 --> 00:30:02.466 A:middle
这种类型的文件 或者 Alternate 如果

00:30:02.586 --> 00:30:03.996 A:middle
你可以阅读这种类型的文件

00:30:03.996 --> 00:30:04.976 A:middle
但是不编辑它们

00:30:05.876 --> 00:30:09.786 A:middle
以及一系列的规则

00:30:09.786 --> 00:30:12.946 A:middle
在 macOS 上是不同的 如果是

00:30:12.946 --> 00:30:14.936 A:middle
是 macOS 请

00:30:14.936 --> 00:30:17.166 A:middle
看这个其他的短链接

00:30:20.616 --> 00:30:21.756 A:middle
当声明支持一个

00:30:21.756 --> 00:30:24.156 A:middle
类型 请尽可能具体化

00:30:25.086 --> 00:30:26.666 A:middle
我们刚声明支持

00:30:26.666 --> 00:30:28.076 A:middle
一个很具体的文件类型 所以是

00:30:28.076 --> 00:30:28.986 A:middle
Particle 文件类型

00:30:29.616 --> 00:30:30.656 A:middle
但你也可以声明支持

00:30:30.656 --> 00:30:32.346 A:middle
不同类别 比如任何

00:30:32.346 --> 00:30:34.206 A:middle
用 public.image 的图像

00:30:35.336 --> 00:30:37.396 A:middle
这很好 但你需要

00:30:37.396 --> 00:30:39.106 A:middle
尽可能具体地使

00:30:39.106 --> 00:30:41.826 A:middle
你的 App 准确展示出它需要展示的内容

00:30:42.926 --> 00:30:44.646 A:middle
不要声明支持

00:30:44.646 --> 00:30:46.156 A:middle
更宽泛的类型 比如

00:30:46.156 --> 00:30:48.086 A:middle
public.data 或者 public.content

00:30:49.766 --> 00:30:51.076 A:middle
因为这会使你的 App

00:30:51.076 --> 00:30:52.696 A:middle
出现在你的顾客

00:30:52.696 --> 00:30:54.596 A:middle
不希望看到它出现的地方

00:30:54.596 --> 00:30:55.946 A:middle
它会使他们困惑

00:31:00.246 --> 00:31:02.006 A:middle
所以 有了这些信息你可以做什么

00:31:02.506 --> 00:31:05.866 A:middle
首先 如果你需要

00:31:05.936 --> 00:31:07.566 A:middle
在云端中访问文件

00:31:07.906 --> 00:31:09.106 A:middle
你应该使用文稿

00:31:09.106 --> 00:31:10.336 A:middle
浏览器或文稿选取器

00:31:10.626 --> 00:31:11.676 A:middle
来获取这些文件

00:31:12.646 --> 00:31:15.216 A:middle
大多数云服务供应商已采用

00:31:15.836 --> 00:31:18.836 A:middle
我们的 API 所以如果你使用

00:31:18.836 --> 00:31:20.206 A:middle
这些 viewControllers 中的一个

00:31:20.206 --> 00:31:21.976 A:middle
你的顾客就能够访问

00:31:21.976 --> 00:31:24.186 A:middle
他们的文件 不管文件在哪儿

00:31:24.546 --> 00:31:26.136 A:middle
你不必为每个

00:31:26.136 --> 00:31:28.256 A:middle
云服务供应商写代码

00:31:29.896 --> 00:31:32.736 A:middle
如果你在 iOS 11 前写了自己

00:31:32.816 --> 00:31:35.356 A:middle
自定的文件浏览 UI

00:31:35.356 --> 00:31:38.216 A:middle
现在是时候换到

00:31:38.216 --> 00:31:39.556 A:middle
UIDocumentBrowserViewController 了

00:31:40.896 --> 00:31:42.856 A:middle
它有很多功能

00:31:43.996 --> 00:31:47.316 A:middle
它有很多功能 所以

00:31:47.316 --> 00:31:49.336 A:middle
困难的工作交给我们

00:31:49.336 --> 00:31:50.626 A:middle
为你免费提供你 App 中的

00:31:50.626 --> 00:31:51.996 A:middle
所有功能

00:31:54.196 --> 00:31:55.626 A:middle
最后 请保证你的

00:31:55.626 --> 00:31:57.226 A:middle
文稿类型在 Xcode 中得到

00:31:57.226 --> 00:31:59.276 A:middle
正确设置以便你的 App

00:31:59.276 --> 00:32:02.386 A:middle
在它需要的地方准确出现

00:31:59.276 --> 00:32:02.386 A:middle
在它需要的地方准确出现

00:32:02.386 --> 00:32:05.676 A:middle
并帮助客户找到它

00:32:05.676 --> 00:32:08.676 A:middle
说到这 我接下来要

00:32:08.676 --> 00:32:09.976 A:middle
把舞台交给我的同事 Ronny

00:32:10.516 --> 00:32:15.576 A:middle
［ 掌声 ］

00:32:16.076 --> 00:32:16.846 A:middle
&gt;&gt; 谢谢 Thomas

00:32:17.336 --> 00:32:18.136 A:middle
大家好

00:32:18.516 --> 00:32:20.026 A:middle
我是 Rony Fadel

00:32:20.026 --> 00:32:21.346 A:middle
文稿管理团队的一名

00:32:21.346 --> 00:32:22.836 A:middle
软件工程师

00:32:23.356 --> 00:32:25.306 A:middle
Thomas 已经解释了

00:32:25.306 --> 00:32:27.256 A:middle
在你的 App 中

00:32:27.486 --> 00:32:29.486 A:middle
使用文稿浏览器和文稿选取器

00:32:29.486 --> 00:32:30.946 A:middle
API 是多么简单

00:32:31.426 --> 00:32:32.826 A:middle
现在 你已使用这些

00:32:32.826 --> 00:32:34.586 A:middle
API 我们想介绍一些

00:32:34.586 --> 00:32:36.526 A:middle
最佳做法来确保

00:32:36.526 --> 00:32:38.066 A:middle
你的 App 在 iOS 生态体系中

00:32:38.126 --> 00:32:40.736 A:middle
表现良好

00:32:41.196 --> 00:32:44.856 A:middle
在你向 App Store 提交它的时候

00:32:44.856 --> 00:32:46.906 A:middle
既然我们已经完成一个

00:32:46.906 --> 00:32:48.986 A:middle
基于文稿浏览器的 App 或者

00:32:48.986 --> 00:32:51.596 A:middle
增加了选取器的支持 现在我们准备

00:32:51.596 --> 00:32:53.366 A:middle
好最后选择一些文稿

00:32:54.446 --> 00:32:56.146 A:middle
你的 App 可能想要

00:32:56.146 --> 00:32:58.816 A:middle
直接访问文件 避免

00:32:58.816 --> 00:33:00.906 A:middle
Thomas 提过的输入复制模式

00:32:58.816 --> 00:33:00.906 A:middle
Thomas 提过的输入复制模式

00:33:00.906 --> 00:33:03.236 A:middle
或者如果你

00:33:03.296 --> 00:33:04.956 A:middle
想直接编辑你的文稿

00:33:05.376 --> 00:33:06.816 A:middle
为此 你需要在

00:33:06.816 --> 00:33:08.076 A:middle
打开模式下激活选取器

00:33:09.536 --> 00:33:11.096 A:middle
在此例中

00:33:11.096 --> 00:33:13.476 A:middle
我们在 Particle App 中 我们已经

00:33:13.476 --> 00:33:15.726 A:middle
在打开模式中创建和呈现了选取器

00:33:16.366 --> 00:33:17.616 A:middle
我们想选择一个图像

00:33:17.616 --> 00:33:19.146 A:middle
文件来改变粒子

00:33:19.146 --> 00:33:19.936 A:middle
系统的图像

00:33:21.436 --> 00:33:23.936 A:middle
一旦我们选中一个文件 我们

00:33:23.936 --> 00:33:26.686 A:middle
调用两个委托方法中的一个

00:33:27.566 --> 00:33:29.616 A:middle
第一 如果我们在

00:33:29.616 --> 00:33:32.126 A:middle
浏览器中选择文稿或者

00:33:32.346 --> 00:33:34.216 A:middle
第二 如果我们

00:33:34.216 --> 00:33:36.326 A:middle
在选取器中选择 就像我们的示例

00:33:36.326 --> 00:33:40.716 A:middle
我们在这看到了文稿

00:33:40.936 --> 00:33:43.466 A:middle
我们看到的实际是这个文稿选取器

00:33:43.466 --> 00:33:46.956 A:middle
为我们刚刚选择 URL 为我们的 App 服务

00:33:48.066 --> 00:33:50.036 A:middle
如果我们想直接

00:33:50.036 --> 00:33:52.536 A:middle
访问文稿 我们冒着

00:33:52.536 --> 00:33:53.976 A:middle
权限错误的风险

00:33:55.356 --> 00:33:57.546 A:middle
让我们试着理解这种情况发生的原因

00:33:58.546 --> 00:34:00.376 A:middle
你也许知道 你在 iOS 的

00:33:58.546 --> 00:34:00.376 A:middle
你也许知道 你在 iOS 的

00:34:00.506 --> 00:34:01.966 A:middle
App 是沙箱

00:34:02.816 --> 00:34:04.666 A:middle
这个沙箱 App 是一个安全

00:34:04.666 --> 00:34:07.286 A:middle
功能 然而每个 App 在

00:34:07.356 --> 00:34:09.426 A:middle
它自己的 App 容器中都可以

00:34:09.426 --> 00:34:12.126 A:middle
不受限地进行访问

00:34:12.126 --> 00:34:14.896 A:middle
默认情况下 在其他容器内

00:34:14.896 --> 00:34:16.775 A:middle
访问文件

00:34:17.085 --> 00:34:18.735 A:middle
也就是在其他 App 容器

00:34:18.735 --> 00:34:20.196 A:middle
和云服务容器内

00:34:21.466 --> 00:34:23.636 A:middle
因此 这个安全功能

00:34:23.906 --> 00:34:25.585 A:middle
可保证其他 App 和

00:34:25.585 --> 00:34:27.426 A:middle
进程不能

00:34:27.426 --> 00:34:29.036 A:middle
偷窥你的 App

00:34:29.036 --> 00:34:31.016 A:middle
容器 访问你的文件

00:34:31.356 --> 00:34:33.166 A:middle
而且要确保如果

00:34:33.166 --> 00:34:35.076 A:middle
他们想访问 访问

00:34:35.076 --> 00:34:37.815 A:middle
这些文稿 需要

00:34:37.906 --> 00:34:39.126 A:middle
用户许可

00:34:40.636 --> 00:34:43.916 A:middle
所以 既然从其他容器内

00:34:43.916 --> 00:34:45.656 A:middle
访问文件受限

00:34:46.106 --> 00:34:48.065 A:middle
你的 App 怎么获取

00:34:48.065 --> 00:34:50.485 A:middle
这些你的顾客已经挑选好的文件呢

00:34:51.585 --> 00:34:53.666 A:middle
我们必须要做的是扩展 App

00:34:53.666 --> 00:34:56.065 A:middle
沙箱使它包含这些文稿

00:34:56.775 --> 00:34:59.246 A:middle
再一次回到 URL 通过

00:34:59.246 --> 00:35:00.266 A:middle
浏览器或选取器返回

00:34:59.246 --> 00:35:00.266 A:middle
浏览器或选取器返回

00:35:01.716 --> 00:35:03.896 A:middle
这个 URL 有一个附加的

00:35:03.896 --> 00:35:06.026 A:middle
安全范围资源

00:35:06.326 --> 00:35:07.676 A:middle
你可以认为这个资源

00:35:07.676 --> 00:35:11.246 A:middle
是一个系统赠予你的令牌

00:35:11.306 --> 00:35:13.126 A:middle
获得这个令牌可以允许

00:35:13.126 --> 00:35:15.936 A:middle
你的 App 访问此文稿

00:35:16.356 --> 00:35:19.446 A:middle
我们可以用

00:35:19.446 --> 00:35:21.646 A:middle
下面的 URL API 来访问文件

00:35:22.846 --> 00:35:23.666 A:middle
当我们调用

00:35:23.836 --> 00:35:25.826 A:middle
startAccessingSecurityScopedResource

00:35:25.826 --> 00:35:28.576 A:middle
你的 App 就可以访问

00:35:28.576 --> 00:35:30.206 A:middle
这个文稿 你也可以

00:35:30.206 --> 00:35:32.166 A:middle
开始展示或者编辑此文稿

00:35:32.896 --> 00:35:34.386 A:middle
一旦你用完

00:35:34.386 --> 00:35:36.796 A:middle
这个文稿 你应该在 URL 上调用

00:35:36.796 --> 00:35:38.806 A:middle
stopAccessingSecurityScopedResource

00:35:38.806 --> 00:35:42.856 A:middle
API 正如你所见

00:35:42.856 --> 00:35:45.196 A:middle
该文件访问权限受限

00:35:47.676 --> 00:35:50.546 A:middle
这有一个简单的秘诀来

00:35:50.546 --> 00:35:51.866 A:middle
保证你和

00:35:51.866 --> 00:35:54.596 A:middle
沙箱文稿总可以成功交互

00:35:55.136 --> 00:35:57.556 A:middle
我们快速看一下这个例子中

00:35:57.626 --> 00:35:58.716 A:middle
我们调用的地方

00:35:59.996 --> 00:36:01.586 A:middle
首先 我们在 URL 上

00:35:59.996 --> 00:36:01.586 A:middle
首先 我们在 URL 上

00:36:01.586 --> 00:36:03.716 A:middle
调用 startAccessing

00:36:04.256 --> 00:36:05.706 A:middle
然后我们可以开始

00:36:05.706 --> 00:36:06.376 A:middle
和这个文稿互动

00:36:07.386 --> 00:36:09.036 A:middle
你注意到在这个 Defer 代码块中

00:36:09.036 --> 00:36:10.856 A:middle
一旦我们用完该文件

00:36:10.856 --> 00:36:12.886 A:middle
我们会调用 stopAccessing

00:36:14.546 --> 00:36:16.576 A:middle
你注意到这些调用是

00:36:16.576 --> 00:36:19.476 A:middle
平衡的 如果 startAccessing

00:36:19.476 --> 00:36:21.946 A:middle
返回 true 值

00:36:21.946 --> 00:36:25.116 A:middle
我们只调用 stopAccessing

00:36:25.336 --> 00:36:27.166 A:middle
我们尽可能使资源

00:36:27.166 --> 00:36:29.426 A:middle
访问时间短 因为当

00:36:29.426 --> 00:36:30.826 A:middle
我们调用 startAccessing

00:36:30.826 --> 00:36:33.196 A:middle
我们消耗有限的系统

00:36:33.196 --> 00:36:35.266 A:middle
资源 为你的 App 进行保留

00:36:35.806 --> 00:36:37.276 A:middle
所以一旦我们用完这个文稿

00:36:37.276 --> 00:36:40.696 A:middle
我们需要放弃这些资源来确保

00:36:40.696 --> 00:36:43.066 A:middle
我们可以在进程中

00:36:43.066 --> 00:36:45.496 A:middle
访问文件

00:36:47.376 --> 00:36:49.116 A:middle
如果你确定这个

00:36:49.116 --> 00:36:50.906 A:middle
文稿存在于你的

00:36:50.906 --> 00:36:52.626 A:middle
App 容器中 你不需要

00:36:52.626 --> 00:36:53.436 A:middle
调用这些

00:36:54.206 --> 00:36:56.376 A:middle
但是如有疑问

00:36:56.376 --> 00:36:57.036 A:middle
可以调用这些

00:36:57.736 --> 00:36:59.196 A:middle
如果它们不被需要

00:36:59.366 --> 00:37:01.126 A:middle
它们就是无操作指令

00:36:59.366 --> 00:37:01.126 A:middle
它们就是无操作指令

00:37:03.176 --> 00:37:05.336 A:middle
很好 现在我们知道如何

00:37:05.336 --> 00:37:06.626 A:middle
访问我们的文件

00:37:06.766 --> 00:37:08.816 A:middle
我们可以继续选择

00:37:08.816 --> 00:37:10.396 A:middle
文稿 像我们示例中的

00:37:10.396 --> 00:37:11.386 A:middle
粒子图像

00:37:11.666 --> 00:37:14.466 A:middle
开始访问

00:37:14.466 --> 00:37:16.316 A:middle
你可以看到 云

00:37:16.316 --> 00:37:17.726 A:middle
服务管理着这个

00:37:17.726 --> 00:37:19.706 A:middle
文稿 其他 App 也

00:37:20.046 --> 00:37:21.606 A:middle
可以访问这个文件

00:37:21.746 --> 00:37:23.716 A:middle
有时候和你的 App

00:37:23.716 --> 00:37:24.966 A:middle
同时运行

00:37:25.236 --> 00:37:26.746 A:middle
我们在这里需要的是一个

00:37:26.746 --> 00:37:29.046 A:middle
全系统机制来

00:37:29.046 --> 00:37:30.396 A:middle
确保访问这个文件

00:37:30.396 --> 00:37:32.166 A:middle
总是协调的

00:37:32.656 --> 00:37:34.326 A:middle
这样的话各项进程之间

00:37:34.326 --> 00:37:35.666 A:middle
不会互相干扰

00:37:36.076 --> 00:37:39.466 A:middle
访问 读取 编写这个文稿

00:37:40.916 --> 00:37:43.806 A:middle
在 iOS 上 这个机制叫做

00:37:43.986 --> 00:37:46.076 A:middle
文件协调性

00:37:46.076 --> 00:37:48.956 A:middle
通过 NSFileCoordinator 和

00:37:49.046 --> 00:37:50.486 A:middle
NSFilePresenter API 来展现

00:37:51.616 --> 00:37:53.316 A:middle
它充当全系统的

00:37:53.486 --> 00:37:55.166 A:middle
多阅读器／单独写

00:37:55.166 --> 00:37:58.546 A:middle
锁 也是

00:37:58.546 --> 00:38:00.506 A:middle
你的 App 指导系统

00:37:58.546 --> 00:38:00.506 A:middle
你的 App 指导系统

00:38:00.586 --> 00:38:02.576 A:middle
下载本地不可用文稿

00:38:02.576 --> 00:38:03.886 A:middle
的一种方式

00:38:04.146 --> 00:38:05.856 A:middle
因为你知道

00:38:05.856 --> 00:38:07.306 A:middle
这些文件许多都可以放入

00:38:07.306 --> 00:38:09.136 A:middle
云端 而不是在设备里

00:38:10.896 --> 00:38:12.566 A:middle
所以 你可能发现自己

00:38:12.566 --> 00:38:14.496 A:middle
写很多样板文件和

00:38:14.496 --> 00:38:16.056 A:middle
易于出错的代码来处理

00:38:16.056 --> 00:38:18.756 A:middle
沙箱 来处理文件协调性

00:38:19.846 --> 00:38:21.556 A:middle
如果你只是

00:38:21.976 --> 00:38:23.456 A:middle
对展示和编辑你的

00:38:23.456 --> 00:38:25.936 A:middle
文件感兴趣 解决方法就更容易

00:38:26.176 --> 00:38:27.986 A:middle
在 iOS 上 它以 UIDocument 的

00:38:27.986 --> 00:38:29.376 A:middle
形式出现

00:38:30.346 --> 00:38:32.006 A:middle
UIDocument 自从 iOS 5

00:38:32.006 --> 00:38:32.956 A:middle
就开始有了

00:38:33.946 --> 00:38:36.016 A:middle
建议使用

00:38:36.016 --> 00:38:38.246 A:middle
当你的 App 展示和编辑文稿时

00:38:39.256 --> 00:38:40.946 A:middle
它为你处理沙箱

00:38:41.256 --> 00:38:44.466 A:middle
所以没必要调动 stopAccessing

00:38:45.336 --> 00:38:46.696 A:middle
它也为你处理

00:38:46.696 --> 00:38:47.736 A:middle
文件协调性

00:38:47.986 --> 00:38:49.246 A:middle
所以 你不需要

00:38:49.286 --> 00:38:50.896 A:middle
手动协调这些文件的

00:38:50.896 --> 00:38:51.706 A:middle
访问权限

00:38:53.256 --> 00:38:55.646 A:middle
想要获取更多关于文件

00:38:55.646 --> 00:38:58.186 A:middle
协调和 UIDocument 的消息

00:38:58.186 --> 00:38:59.386 A:middle
我们邀请你回去看

00:38:59.386 --> 00:39:02.176 A:middle
2015 年的全球开发人员大会

00:38:59.386 --> 00:39:02.176 A:middle
2015 年的全球开发人员大会

00:39:02.176 --> 00:39:06.056 A:middle
建立基于文稿的 App

00:39:06.056 --> 00:39:09.526 A:middle
大会中详细包含了这些主题

00:39:10.036 --> 00:39:11.976 A:middle
好 我们现在可以访问

00:39:11.976 --> 00:39:13.466 A:middle
文件 我们确定

00:39:13.466 --> 00:39:15.586 A:middle
读写处于一致状态

00:39:16.446 --> 00:39:18.026 A:middle
我们可以编辑我们的粒子系统

00:39:18.316 --> 00:39:19.526 A:middle
现在我们要做的是

00:39:19.526 --> 00:39:21.106 A:middle
只用一秒钟切换 App

00:39:21.106 --> 00:39:22.716 A:middle
查看网页上的全球开发人员大会

00:39:22.716 --> 00:39:25.566 A:middle
再跳转到我们的 App 中

00:39:26.136 --> 00:39:28.526 A:middle
正如你所看到的

00:39:28.526 --> 00:39:30.236 A:middle
我们现在在编辑器中 但是我们

00:39:30.236 --> 00:39:31.576 A:middle
回到刚刚的浏览器中

00:39:32.366 --> 00:39:34.016 A:middle
你的顾客总是期待

00:39:34.016 --> 00:39:35.576 A:middle
回到刚刚他们

00:39:35.576 --> 00:39:38.726 A:middle
使用你 App 时所在的地方

00:39:39.076 --> 00:39:40.426 A:middle
让我们尝试理解一下

00:39:40.426 --> 00:39:42.166 A:middle
之前的示例发生了什么

00:39:42.976 --> 00:39:45.796 A:middle
这是我们 App 的生命周期图表

00:39:47.196 --> 00:39:48.586 A:middle
当我们编辑 App

00:39:48.846 --> 00:39:49.946 A:middle
粒子系统时 我们被带到前台

00:39:49.946 --> 00:39:52.436 A:middle
当我们从 App Switcher 转到 Safari 时

00:39:52.806 --> 00:39:57.726 A:middle
我们被带到后台

00:39:59.096 --> 00:40:00.816 A:middle
系统暂停了我们的 App

00:39:59.096 --> 00:40:00.816 A:middle
系统暂停了我们的 App

00:40:00.816 --> 00:40:01.906 A:middle
当它在后台的时候

00:40:02.716 --> 00:40:04.486 A:middle
事实证明在这个时候

00:40:04.716 --> 00:40:06.236 A:middle
我们的系统遭受内存

00:40:06.236 --> 00:40:08.126 A:middle
压力 所以系统

00:40:08.586 --> 00:40:09.566 A:middle
终止了我们的 App

00:40:10.776 --> 00:40:12.866 A:middle
当我们使用 App Switcher 来

00:40:12.866 --> 00:40:14.866 A:middle
转换到我们的 App 中 我们的 App

00:40:14.866 --> 00:40:15.546 A:middle
开始重新启动

00:40:16.246 --> 00:40:18.046 A:middle
我们在这并没有做成功的是

00:40:18.046 --> 00:40:19.176 A:middle
恢复 UI 状态

00:40:19.726 --> 00:40:21.196 A:middle
这个时间是

00:40:21.196 --> 00:40:22.956 A:middle
恢复 UI 状态的最佳时机

00:40:22.956 --> 00:40:24.736 A:middle
把我们的顾客带到他们原来所在的地方

00:40:26.206 --> 00:40:28.736 A:middle
所以 我们怎样实现状态的 恢复呢

00:40:29.136 --> 00:40:31.266 A:middle
一个简单的方法是

00:40:31.266 --> 00:40:32.686 A:middle
存留我们从

00:40:32.726 --> 00:40:34.146 A:middle
文稿浏览器或文稿选取器

00:40:34.146 --> 00:40:35.726 A:middle
中获取的 URL

00:40:36.166 --> 00:40:37.856 A:middle
然后在 App 重启时恢复它

00:40:39.246 --> 00:40:40.846 A:middle
但这并不管用 因为

00:40:40.846 --> 00:40:41.586 A:middle
以下两个原因

00:40:42.236 --> 00:40:44.856 A:middle
第一 URL 指向的文稿

00:40:44.926 --> 00:40:47.306 A:middle
很有可能已被移动或者重命名

00:40:47.586 --> 00:40:48.826 A:middle
所以 App 重启时

00:40:48.826 --> 00:40:50.406 A:middle
我们链接也中断了

00:40:51.266 --> 00:40:53.286 A:middle
第二 附在我们 URL 中的

00:40:53.286 --> 00:40:55.436 A:middle
安全范围资源

00:40:55.436 --> 00:40:59.166 A:middle
在 URL 起作用时不可编码

00:40:59.866 --> 00:41:01.446 A:middle
所以 我们重启我们的

00:40:59.866 --> 00:41:01.446 A:middle
所以 我们重启我们的

00:41:01.446 --> 00:41:03.886 A:middle
App 我们不能访问

00:41:03.886 --> 00:41:05.986 A:middle
该文稿 即使这个

00:41:05.986 --> 00:41:07.646 A:middle
文件没有移动也没有改名

00:41:08.076 --> 00:41:12.026 A:middle
正确的解决方式是使用一个

00:41:12.026 --> 00:41:13.886 A:middle
安全范围书签

00:41:13.886 --> 00:41:15.176 A:middle
我们可以从 URL 中获取

00:41:15.556 --> 00:41:17.376 A:middle
正如你所看到的 这个

00:41:17.376 --> 00:41:18.886 A:middle
书签可以正确地查阅

00:41:18.886 --> 00:41:20.906 A:middle
文稿 即使它

00:41:20.906 --> 00:41:21.966 A:middle
被移动或重命名

00:41:27.316 --> 00:41:29.206 A:middle
为了保持这个安全范围

00:41:29.206 --> 00:41:31.326 A:middle
书签  我们必须首先

00:41:31.326 --> 00:41:33.166 A:middle
从 URL 中获取

00:41:33.166 --> 00:41:35.356 A:middle
在 URL 上使用 bookmarkData API

00:41:35.676 --> 00:41:37.566 A:middle
让它在磁盘继续存在

00:41:38.636 --> 00:41:40.596 A:middle
一旦重启我们的 App 我们

00:41:40.596 --> 00:41:42.386 A:middle
可以还原原来的 URL

00:41:42.736 --> 00:41:47.546 A:middle
调用 URL 产生的 bookmarkData

00:41:47.746 --> 00:41:49.636 A:middle
好的 既然我们做好了

00:41:49.636 --> 00:41:51.036 A:middle
所有准备来保存和

00:41:51.036 --> 00:41:53.076 A:middle
还原 UI 状态 让我们快速跳转到

00:41:53.076 --> 00:41:53.926 A:middle
一个示例中看看工作中的它

00:42:02.046 --> 00:42:04.296 A:middle
所以 我们来到了

00:42:04.366 --> 00:42:07.266 A:middle
模拟器中 运行 Particle App

00:42:07.266 --> 00:42:08.736 A:middle
就像之前看到的那样

00:42:10.286 --> 00:42:11.556 A:middle
我们接下来要做的是

00:42:11.556 --> 00:42:13.056 A:middle
带着我们的 App 来到后台

00:42:13.546 --> 00:42:14.606 A:middle
现在 我们将要

00:42:14.606 --> 00:42:15.966 A:middle
模拟一个现实

00:42:15.966 --> 00:42:17.596 A:middle
系统正在关闭我们的 App

00:42:17.636 --> 00:42:18.976 A:middle
在 Xcode 中关闭它

00:42:23.056 --> 00:42:25.596 A:middle
如果我们重启我们的 App 我们

00:42:25.596 --> 00:42:27.336 A:middle
看到我们跳到了浏览器中

00:42:28.086 --> 00:42:29.276 A:middle
所以 现在我们将要做的

00:42:29.276 --> 00:42:31.646 A:middle
是完成状态的保存

00:42:31.686 --> 00:42:33.336 A:middle
和还原 来回到

00:42:33.336 --> 00:42:34.456 A:middle
我们原来所在的地方

00:42:35.776 --> 00:42:37.536 A:middle
所以 我将移动到 Xcode 中

00:42:38.086 --> 00:42:39.716 A:middle
首先 在我们的 App

00:42:39.716 --> 00:42:41.096 A:middle
委托中 我们要向我们的

00:42:41.096 --> 00:42:42.546 A:middle
App 声明我们对

00:42:42.546 --> 00:42:44.706 A:middle
状态保存和恢复感兴趣

00:42:45.206 --> 00:42:48.936 A:middle
为了做到上述这些首先

00:42:48.936 --> 00:42:49.946 A:middle
在 App shouldSaveApplicationState 中

00:42:49.946 --> 00:42:51.746 A:middle
返回一个真值 也在

00:42:52.466 --> 00:42:54.306 A:middle
App shouldRestoreApplicationState 中

00:42:54.306 --> 00:42:55.896 A:middle
返回真值

00:42:57.716 --> 00:42:59.536 A:middle
第二点 我们要到我们的

00:42:59.536 --> 00:43:01.406 A:middle
Storyboard 中 给我们的

00:42:59.536 --> 00:43:01.406 A:middle
Storyboard 中 给我们的

00:43:01.406 --> 00:43:02.886 A:middle
DocumentBrowserViewController

00:43:02.886 --> 00:43:05.296 A:middle
子类一个恢复身份

00:43:05.296 --> 00:43:08.926 A:middle
以便系统可以恢复它

00:43:09.846 --> 00:43:11.366 A:middle
在这个例子中 我们将

00:43:11.366 --> 00:43:16.306 A:middle
只使用 Storyboard ID

00:43:16.566 --> 00:43:18.326 A:middle
接下来 我们将要完成

00:43:18.376 --> 00:43:19.716 A:middle
状态的保存和

00:43:19.716 --> 00:43:21.256 A:middle
还原 在这个

00:43:21.256 --> 00:43:22.726 A:middle
documentBrowserViewController

00:43:22.726 --> 00:43:23.316 A:middle
子类别中

00:43:25.996 --> 00:43:28.846 A:middle
首先 我通过完成

00:43:28.846 --> 00:43:30.166 A:middle
encodeRestorableState 来开始

00:43:31.436 --> 00:43:35.036 A:middle
我们来到这个 editorViewController

00:43:35.086 --> 00:43:36.856 A:middle
如果它存在 从它当中

00:43:36.856 --> 00:43:39.366 A:middle
获取文稿 URL

00:43:39.736 --> 00:43:40.716 A:middle
一旦我们有了 URL

00:43:40.716 --> 00:43:42.856 A:middle
我把这个弄大一点

00:43:43.376 --> 00:43:45.976 A:middle
一旦我们有了这个URL 我们开始

00:43:45.976 --> 00:43:47.276 A:middle
访问它来扩展我们的

00:43:47.276 --> 00:43:49.176 A:middle
沙箱 像之前描述的那样

00:43:50.626 --> 00:43:52.596 A:middle
在这个 Defer 代码块中 我们停止

00:43:52.596 --> 00:43:58.886 A:middle
访问 一旦我们结束使用

00:43:59.836 --> 00:44:01.606 A:middle
如果我们可以访问这个

00:43:59.836 --> 00:44:01.606 A:middle
如果我们可以访问这个

00:44:01.606 --> 00:44:04.826 A:middle
文稿 我们从这个文稿中

00:44:04.826 --> 00:44:06.666 A:middle
简单创立一个 bookmarkData 代码块

00:44:06.666 --> 00:44:08.076 A:middle
然后进行编码

00:44:08.576 --> 00:44:12.556 A:middle
最后 我们不要忘记调用 Super

00:44:13.816 --> 00:44:16.116 A:middle
好啦 既然我们知道了怎样

00:44:16.116 --> 00:44:17.506 A:middle
对我们的恢复状态进行编码

00:44:17.846 --> 00:44:20.486 A:middle
我们将进行恢复状态的解码

00:44:21.146 --> 00:44:23.916 A:middle
为此 我们开始执行

00:44:23.916 --> 00:44:25.126 A:middle
decodeRestorableState

00:44:25.686 --> 00:44:27.266 A:middle
我们将反着来

00:44:28.036 --> 00:44:29.506 A:middle
所以 首先我们从编码器中

00:44:29.506 --> 00:44:30.896 A:middle
获取 bookmarkData

00:44:31.526 --> 00:44:34.396 A:middle
如果它存在 建立

00:44:34.396 --> 00:44:36.166 A:middle
文件 URL 调用

00:44:36.166 --> 00:44:38.346 A:middle
resolvingBookmarkData

00:44:38.886 --> 00:44:42.556 A:middle
我们在 URL 中

00:44:42.556 --> 00:44:45.506 A:middle
展示这个文件

00:44:45.506 --> 00:44:47.956 A:middle
最后 我们

00:44:47.956 --> 00:44:49.106 A:middle
不要忘记调用 Super

00:44:50.496 --> 00:44:51.916 A:middle
好的 所以 让我们运行我们的 App 吧

00:44:57.646 --> 00:44:59.156 A:middle
我们的 App 将要

00:44:59.156 --> 00:45:00.686 A:middle
在模拟器中启动

00:44:59.156 --> 00:45:00.686 A:middle
在模拟器中启动

00:45:02.116 --> 00:45:03.916 A:middle
正如你所见 我们可以开始

00:45:04.786 --> 00:45:05.726 A:middle
使用我们的文稿了

00:45:06.616 --> 00:45:09.556 A:middle
再一次 把我们的 App 放到后台去

00:45:09.886 --> 00:45:11.886 A:middle
模仿系统关闭我们的 App

00:45:16.156 --> 00:45:18.186 A:middle
接下来我们要重启我们的

00:45:18.886 --> 00:45:19.926 A:middle
App 正如你在这所见

00:45:20.246 --> 00:45:20.976 A:middle
我们回到了编辑器中

00:45:21.516 --> 00:45:28.546 A:middle
［ 掌声 ］

00:45:29.046 --> 00:45:31.046 A:middle
了不起 我们现在可以访问

00:45:31.046 --> 00:45:32.936 A:middle
文稿 读写文稿

00:45:32.936 --> 00:45:34.306 A:middle
不必害怕数据

00:45:34.306 --> 00:45:36.336 A:middle
损毁 我们甚至可以

00:45:36.336 --> 00:45:37.776 A:middle
恢复状态 把我们的

00:45:37.776 --> 00:45:39.406 A:middle
顾客带到他们一开始所在的地方

00:45:39.716 --> 00:45:40.886 A:middle
当他们在用我们的 App 时所在的地方

00:45:41.386 --> 00:45:44.946 A:middle
即使我们的 App 在后台被关闭

00:45:45.286 --> 00:45:47.246 A:middle
所以 如果你打开文件

00:45:47.706 --> 00:45:48.936 A:middle
我们在弹出菜单中

00:45:48.936 --> 00:45:50.956 A:middle
点击分享 在你的 App

00:45:50.956 --> 00:45:52.976 A:middle
可以处理的文件中 你会注意到

00:45:52.976 --> 00:45:55.136 A:middle
我们的 App 现在在分享表单中可以获得

00:45:56.096 --> 00:45:58.726 A:middle
然而 它显示复制

00:45:58.906 --> 00:45:59.926 A:middle
而不是打开

00:46:00.856 --> 00:46:03.106 A:middle
这就意味着一旦我们

00:46:03.106 --> 00:46:04.726 A:middle
在分享表单轻点我们的 App 图标

00:46:04.726 --> 00:46:06.456 A:middle
系统就会

00:46:06.456 --> 00:46:09.096 A:middle
复制这个文稿 复制到

00:46:09.096 --> 00:46:10.986 A:middle
我们的 App 中

00:46:10.986 --> 00:46:12.596 A:middle
这意味着

00:46:12.596 --> 00:46:14.326 A:middle
客户将开始编辑

00:46:14.326 --> 00:46:15.616 A:middle
这个文稿的副本

00:46:17.096 --> 00:46:19.056 A:middle
为了让你的客户打开

00:46:19.056 --> 00:46:20.816 A:middle
和编辑原来的文件

00:46:21.756 --> 00:46:23.696 A:middle
我们希望在你的 App 中访问

00:46:23.696 --> 00:46:26.206 A:middle
的文稿 你需要使用

00:46:26.206 --> 00:46:28.106 A:middle
就地打开的功能

00:46:28.636 --> 00:46:32.066 A:middle
如果你使用就地打开

00:46:32.456 --> 00:46:34.276 A:middle
你将在你的 App 分享表单里

00:46:34.536 --> 00:46:35.856 A:middle
看到打开而不是

00:46:35.856 --> 00:46:38.576 A:middle
在之前的复制

00:46:38.826 --> 00:46:41.076 A:middle
使用就地打开很简单

00:46:41.816 --> 00:46:43.676 A:middle
如果你使用基于文稿的

00:46:43.676 --> 00:46:45.586 A:middle
App Xcode 模板 你将

00:46:45.586 --> 00:46:47.656 A:middle
可以免费获得 仿佛

00:46:47.656 --> 00:46:49.856 A:middle
就地打开这是默认的

00:46:50.876 --> 00:46:52.966 A:middle
否则  你需要添加这个

00:46:52.966 --> 00:46:55.026 A:middle
LSSupportsOpeningDocumentInPlace

00:46:55.026 --> 00:46:57.756 A:middle
到你的 info.plist 中

00:46:57.756 --> 00:46:58.806 A:middle
一旦你向系统声明

00:46:58.806 --> 00:47:00.956 A:middle
你的 App 在处理

00:46:58.806 --> 00:47:00.956 A:middle
你的 App 在处理

00:47:00.956 --> 00:47:03.056 A:middle
就地打开 我们必须

00:47:03.056 --> 00:47:05.076 A:middle
使用下面的 UI App 委托方法

00:47:05.076 --> 00:47:06.356 A:middle
来访问文件

00:47:08.076 --> 00:47:09.876 A:middle
再一次 如果你的 App 是

00:47:09.876 --> 00:47:12.996 A:middle
基于文稿浏览器 通常是用这种

00:47:12.996 --> 00:47:14.646 A:middle
方法 你要在

00:47:14.646 --> 00:47:16.646 A:middle
documentBrowserViewController 中

00:47:16.646 --> 00:47:18.166 A:middle
调用 revealDocument

00:47:19.376 --> 00:47:21.016 A:middle
一旦你用这个方法

00:47:21.016 --> 00:47:22.596 A:middle
调用完成处理程序

00:47:22.596 --> 00:47:23.686 A:middle
你将在完成处理程序中

00:47:23.686 --> 00:47:24.476 A:middle
展示该文件

00:47:25.126 --> 00:47:26.926 A:middle
在 Xcode 模板中

00:47:26.926 --> 00:47:27.676 A:middle
早已为你完成

00:47:28.016 --> 00:47:31.246 A:middle
我们可以在分享表单中

00:47:31.466 --> 00:47:32.806 A:middle
轻点 App 图标

00:47:32.806 --> 00:47:34.506 A:middle
直接进入我们的 App

00:47:34.506 --> 00:47:36.176 A:middle
正如你在这所见的 我们在

00:47:36.246 --> 00:47:38.266 A:middle
UI 中报告进度 因为这个

00:47:38.266 --> 00:47:41.116 A:middle
文稿可以放到云端中

00:47:41.276 --> 00:47:42.866 A:middle
既然下载需要

00:47:42.866 --> 00:47:44.926 A:middle
一会儿 我们也支持

00:47:44.926 --> 00:47:46.626 A:middle
用户取消 所以我们可以

00:47:46.666 --> 00:47:48.096 A:middle
取消打开这个文稿

00:47:48.096 --> 00:47:51.116 A:middle
然后跳回到浏览器中

00:47:51.596 --> 00:47:52.946 A:middle
这是你如何在你的 App 中

00:47:52.996 --> 00:47:56.186 A:middle
实现进度支持

00:47:56.456 --> 00:47:57.216 A:middle
如果你调用

00:47:57.216 --> 00:47:58.666 A:middle
documentBrowserViewController

00:47:58.666 --> 00:48:00.896 A:middle
revealDocument API 而这是之前已经

00:47:58.666 --> 00:48:00.896 A:middle
revealDocument API 而这是之前已经

00:48:00.896 --> 00:48:02.736 A:middle
描述过的 你可以

00:48:02.736 --> 00:48:03.886 A:middle
免费得到那个 UI

00:48:04.216 --> 00:48:06.436 A:middle
所以 你将在浏览器图标

00:48:06.526 --> 00:48:08.426 A:middle
的顶部看到一个载入的 UI

00:48:09.556 --> 00:48:11.646 A:middle
否则 你可能选择

00:48:11.646 --> 00:48:13.366 A:middle
展示你自己的进程 UI

00:48:14.336 --> 00:48:16.376 A:middle
如果你的 App 使用 UIDocument 你

00:48:16.376 --> 00:48:17.906 A:middle
应该知道 UIDocument

00:48:18.256 --> 00:48:20.116 A:middle
遵循 progressReporting

00:48:20.876 --> 00:48:22.506 A:middle
这样 展示你自己的

00:48:22.506 --> 00:48:24.796 A:middle
进度 UI 你可以简单设置

00:48:24.796 --> 00:48:26.786 A:middle
访问进程属性来展示

00:48:26.786 --> 00:48:30.326 A:middle
你自己的进度

00:48:30.706 --> 00:48:32.306 A:middle
好的 我们的 App 很了不起

00:48:32.416 --> 00:48:36.566 A:middle
我们也已经准备好了

00:48:36.846 --> 00:48:38.946 A:middle
所以 今天带走什么

00:48:38.946 --> 00:48:41.126 A:middle
会使你的 App 在

00:48:41.126 --> 00:48:43.466 A:middle
管理 iOS 文稿时更出色

00:48:45.036 --> 00:48:47.636 A:middle
在展示和编辑文稿时

00:48:47.636 --> 00:48:49.396 A:middle
使用 UIDocument 因为它

00:48:49.536 --> 00:48:51.396 A:middle
消除很多样板文件

00:48:51.396 --> 00:48:52.436 A:middle
和易于出错的代码

00:48:54.786 --> 00:48:56.276 A:middle
然而 如果你早已

00:48:56.346 --> 00:48:57.586 A:middle
使用文件编码

00:48:57.586 --> 00:48:59.866 A:middle
不使用 UIDocument

00:48:59.866 --> 00:49:01.436 A:middle
而是使用 start- 和 stopAccessing

00:48:59.866 --> 00:49:01.436 A:middle
而是使用 start- 和 stopAccessing

00:49:01.436 --> 00:49:03.696 A:middle
是最好的做法来确保

00:49:03.696 --> 00:49:05.036 A:middle
你和沙箱文稿

00:49:05.036 --> 00:49:07.726 A:middle
或者沙箱 App 的沙箱技术

00:49:08.356 --> 00:49:09.576 A:middle
成功交互

00:49:11.096 --> 00:49:13.456 A:middle
也要协调好各种

00:49:13.456 --> 00:49:15.346 A:middle
文稿的访问来确保

00:49:15.346 --> 00:49:19.656 A:middle
你可以持续地读写它们

00:49:19.826 --> 00:49:21.476 A:middle
实现状态恢复可以

00:49:21.476 --> 00:49:22.986 A:middle
把你的顾客带到

00:49:22.986 --> 00:49:24.396 A:middle
他们使用你的

00:49:24.396 --> 00:49:26.186 A:middle
App 时所在的位置 即使

00:49:26.186 --> 00:49:29.086 A:middle
你的 App 在后台被关闭了

00:49:29.086 --> 00:49:31.166 A:middle
使用就地打开以便

00:49:31.306 --> 00:49:32.876 A:middle
你的顾客总是编辑

00:49:32.876 --> 00:49:34.926 A:middle
原始文件 而

00:49:34.926 --> 00:49:37.366 A:middle
不需要开始复制

00:49:37.366 --> 00:49:40.346 A:middle
这个文件报告进程

00:49:40.466 --> 00:49:43.356 A:middle
特别是当大多数文稿在云端

00:49:43.356 --> 00:49:45.116 A:middle
而在本地不可用时

00:49:46.816 --> 00:49:49.136 A:middle
所以 我们今天都涉及了什么

00:49:49.936 --> 00:49:51.996 A:middle
我们向你展示了使用

00:49:52.116 --> 00:49:53.866 A:middle
文稿浏览器和

00:49:53.866 --> 00:49:55.116 A:middle
文稿选取器 API 是多么简单

00:49:55.686 --> 00:49:58.836 A:middle
今天在你的 App 中试一下吧

00:49:59.016 --> 00:50:02.026 A:middle
我们学到了一些最佳做法

00:49:59.016 --> 00:50:02.026 A:middle
我们学到了一些最佳做法

00:50:02.166 --> 00:50:03.486 A:middle
以便我们的 App 在

00:50:03.486 --> 00:50:05.266 A:middle
管理文稿方面表现卓越

00:50:06.326 --> 00:50:09.296 A:middle
对你们云服务供应商来说

00:50:09.296 --> 00:50:10.406 A:middle
我们讨论了新的 Siri 的

00:50:10.406 --> 00:50:12.456 A:middle
捷径 以及他们怎样允许

00:50:12.456 --> 00:50:15.276 A:middle
你的 App 对不起 你的文稿

00:50:15.686 --> 00:50:17.866 A:middle
通过系统可以

00:50:17.866 --> 00:50:20.296 A:middle
频繁地被顾客访问

00:50:20.816 --> 00:50:23.486 A:middle
我们谈论了

00:50:23.486 --> 00:50:25.206 A:middle
fileProvider 验证工具

00:50:26.466 --> 00:50:28.296 A:middle
并且关于怎样

00:50:28.296 --> 00:50:29.616 A:middle
在你的 fileProviderUI 扩展中实现

00:50:29.616 --> 00:50:31.016 A:middle
有效的身份验证给出

00:50:31.016 --> 00:50:32.736 A:middle
指导意见

00:50:34.126 --> 00:50:36.056 A:middle
更多关于这个会议的

00:50:36.056 --> 00:50:39.356 A:middle
消息 请查看在下面 URL 中的会议网站

00:50:40.016 --> 00:50:41.606 A:middle
确保查看今年的

00:50:41.606 --> 00:50:43.826 A:middle
介绍 Siri 捷径会议

00:50:44.386 --> 00:50:45.606 A:middle
谢谢大家的到来

00:50:45.946 --> 00:50:47.976 A:middle
下午愉快 实验室见啦 谢谢

00:50:48.516 --> 00:50:51.500 A:middle
［ 掌声 ］
