WEBVTT

00:00:19.636 --> 00:00:20.386 A:middle
&gt;&gt; 早上好

00:00:21.029 --> 00:00:23.029 A:middle
[掌声]

00:00:23.042 --> 00:00:25.042 A:middle
[掌声]

00:00:25.056 --> 00:00:25.386 A:middle
谢谢

00:00:26.066 --> 00:00:27.156 A:middle
我是 Chris Dreesen

00:00:27.396 --> 00:00:28.766 A:middle
这里是“Touch Bar Fundamentals（Touch Bar 基础）”

00:00:29.136 --> 00:00:30.646 A:middle
如果你还不知道

00:00:30.646 --> 00:00:32.235 A:middle
什么是 Touch Bar  那我真的不确定你为什么

00:00:32.235 --> 00:00:33.336 A:middle
会在这儿出现 但是我对你的到来

00:00:33.336 --> 00:00:33.656 A:middle
感到非常开心

00:00:34.286 --> 00:00:36.876 A:middle
或许我们中的绝大多数人都

00:00:36.876 --> 00:00:38.776 A:middle
对 Touch Bar 有所了解  但是

00:00:38.776 --> 00:00:39.596 A:middle
可能还没有机会去

00:00:39.596 --> 00:00:40.296 A:middle
真正使用它

00:00:40.296 --> 00:00:42.426 A:middle
所以 让我来为大家介绍一下

00:00:42.806 --> 00:00:44.346 A:middle
现在我们这里有一张 MacBook Pro

00:00:44.346 --> 00:00:45.856 A:middle
的图片 在你们熟悉的

00:00:45.856 --> 00:00:47.586 A:middle
功能键的位置 我们有一个

00:00:47.586 --> 00:00:48.566 A:middle
叫做 Touch Bar 的

00:00:48.606 --> 00:00:48.846 A:middle
东西

00:00:49.146 --> 00:00:50.816 A:middle
这是一个交互式输入

00:00:50.816 --> 00:00:51.796 A:middle
和显示的设备

00:00:52.226 --> 00:00:53.596 A:middle
让我带领大家来

00:00:53.596 --> 00:00:53.996 A:middle
熟悉它

00:00:53.996 --> 00:00:56.686 A:middle
在触摸条左边有我们每个人

00:00:56.686 --> 00:00:58.216 A:middle
都非常熟悉的

00:00:58.216 --> 00:00:58.896 A:middle
Escape 键

00:00:59.226 --> 00:01:00.026 A:middle
在右边

00:00:59.226 --> 00:01:00.026 A:middle
在右边

00:01:00.026 --> 00:01:01.136 A:middle
有一个叫做 Control Strip 的东西

00:01:01.586 --> 00:01:02.756 A:middle
如果你愿意

00:01:02.756 --> 00:01:04.086 A:middle
你可以展开

00:01:04.086 --> 00:01:04.446 A:middle
Control Strip

00:01:04.796 --> 00:01:05.886 A:middle
这样 你将会得到和

00:01:05.886 --> 00:01:07.406 A:middle
以前的功能键一样的

00:01:07.406 --> 00:01:07.766 A:middle
功能

00:01:08.206 --> 00:01:09.276 A:middle
然后你可以和原来一样

00:01:09.276 --> 00:01:10.566 A:middle
把它们当成按钮来

00:01:11.286 --> 00:01:12.246 A:middle
使用

00:01:12.646 --> 00:01:14.366 A:middle
不过 你其实不必

00:01:14.616 --> 00:01:15.006 A:middle
展开它

00:01:16.006 --> 00:01:18.556 A:middle
你可以直接

00:01:18.556 --> 00:01:20.086 A:middle
使用它的折叠

00:01:20.086 --> 00:01:20.346 A:middle
形式

00:01:20.756 --> 00:01:21.846 A:middle
当它处于折叠形式的时候

00:01:21.846 --> 00:01:22.906 A:middle
它同样有很多巧妙的功能

00:01:23.166 --> 00:01:24.706 A:middle
我们可以通过直接在

00:01:24.706 --> 00:01:26.296 A:middle
音量键上随意滑动

00:01:26.296 --> 00:01:27.376 A:middle
来调整声音大小

00:01:27.796 --> 00:01:28.886 A:middle
这里有很多

00:01:28.886 --> 00:01:30.306 A:middle
便捷的方式来调整

00:01:30.306 --> 00:01:31.346 A:middle
特定的系统功能

00:01:31.866 --> 00:01:33.586 A:middle
但是 这还不是 Touch Bar 最

00:01:33.586 --> 00:01:34.566 A:middle
有趣的部分

00:01:34.566 --> 00:01:35.866 A:middle
最有趣的部分在

00:01:35.866 --> 00:01:37.546 A:middle
Escape 键和 Control Strip 键

00:01:37.546 --> 00:01:38.126 A:middle
之间

00:01:38.426 --> 00:01:38.936 A:middle
这里是你的

00:01:38.936 --> 00:01:40.066 A:middle
应用程序内容所处的

00:01:40.066 --> 00:01:40.266 A:middle
位置

00:01:40.676 --> 00:01:41.446 A:middle
让我来向你们展示

00:01:41.446 --> 00:01:42.636 A:middle
我们的系统应用

00:01:42.636 --> 00:01:43.306 A:middle
在这里的

00:01:44.616 --> 00:01:45.696 A:middle
这里是“照片”应用

00:01:46.316 --> 00:01:47.646 A:middle
我们正在浏览

00:01:47.646 --> 00:01:48.436 A:middle
照片库

00:01:48.636 --> 00:01:50.016 A:middle
我们可以

00:01:50.016 --> 00:01:51.836 A:middle
在这里滑动浏览

00:01:51.836 --> 00:01:52.056 A:middle
照片库

00:01:52.056 --> 00:01:53.306 A:middle
这就像在 iOS 里可以直接

00:01:53.306 --> 00:01:54.586 A:middle
用我们的手指输入一样

00:01:54.586 --> 00:01:56.006 A:middle
我们将手指放在

00:01:56.006 --> 00:01:57.616 A:middle
Touch Bar 上然后它就会追踪我们的

00:01:57.616 --> 00:01:57.766 A:middle
指尖

00:01:57.886 --> 00:01:59.476 A:middle
如果我们希望能快速地进行浏览

00:01:59.476 --> 00:02:01.386 A:middle
我们可通过快速滑动

00:01:59.476 --> 00:02:01.386 A:middle
我们可通过快速滑动

00:02:01.386 --> 00:02:02.056 A:middle
来实现

00:02:02.116 --> 00:02:05.106 A:middle
如果你想编辑图片 这里

00:02:05.216 --> 00:02:07.106 A:middle
是图片剪裁和旋转

00:02:07.106 --> 00:02:07.326 A:middle
工具

00:02:07.596 --> 00:02:08.506 A:middle
在 Touch Bar 中间有一个

00:02:08.506 --> 00:02:09.326 A:middle
可以直接跟踪

00:02:09.326 --> 00:02:10.626 A:middle
你的手指的旋转控件

00:02:10.846 --> 00:02:11.996 A:middle
它很有趣 因为

00:02:11.996 --> 00:02:12.666 A:middle
这有点像直接在

00:02:12.666 --> 00:02:15.596 A:middle
桌上用手指旋转

00:02:15.906 --> 00:02:16.226 A:middle
图片

00:02:16.846 --> 00:02:19.046 A:middle
最后 图片还可以使用

00:02:19.046 --> 00:02:19.506 A:middle
滤镜

00:02:19.606 --> 00:02:21.106 A:middle
我们可以在滤镜之间

00:02:21.106 --> 00:02:21.856 A:middle
滑动

00:02:22.116 --> 00:02:23.196 A:middle
这是 Touch Bar 的一个有趣的

00:02:23.196 --> 00:02:24.736 A:middle
使用方式 因为通常我们使用

00:02:24.736 --> 00:02:25.716 A:middle
鼠标或者触控板时

00:02:25.716 --> 00:02:27.316 A:middle
我们会

00:02:27.316 --> 00:02:29.006 A:middle
先看照片 然后

00:02:29.006 --> 00:02:30.656 A:middle
看滤镜部分

00:02:30.656 --> 00:02:31.876 A:middle
再用鼠标和触控板

00:02:31.876 --> 00:02:32.946 A:middle
选择下一个滤镜

00:02:33.166 --> 00:02:34.036 A:middle
使用 Touch Bar 我们可以

00:02:34.036 --> 00:02:35.406 A:middle
只将视线放在猫

00:02:36.076 --> 00:02:36.186 A:middle
上

00:02:37.376 --> 00:02:38.926 A:middle
这里是一个 QuickTime 播放器

00:02:38.926 --> 00:02:40.546 A:middle
它在 Touch Bar 上有一个

00:02:40.546 --> 00:02:41.666 A:middle
滑动控制器

00:02:41.666 --> 00:02:43.006 A:middle
使我们能对一部电影快进或快退

00:02:43.006 --> 00:02:44.486 A:middle
简单利落

00:02:44.616 --> 00:02:45.526 A:middle
他们还提供

00:02:45.526 --> 00:02:46.776 A:middle
一个类似的剪辑功能控件

00:02:46.776 --> 00:02:48.976 A:middle
使我们能调整

00:02:48.976 --> 00:02:50.396 A:middle
我们所拍摄的电影的

00:02:50.396 --> 00:02:51.156 A:middle
开头和结尾

00:02:51.766 --> 00:02:52.866 A:middle
关于 QuickTime 播放器

00:02:52.906 --> 00:02:54.206 A:middle
我想指出的是

00:02:54.206 --> 00:02:55.176 A:middle
QuickTime 播放器没有

00:02:55.176 --> 00:02:56.756 A:middle
对此功能编写任何程序 此功能

00:02:56.756 --> 00:02:58.306 A:middle
是包括在 AVKit 和 AVplayer 视图

00:02:58.306 --> 00:02:58.896 A:middle
中

00:02:58.896 --> 00:03:00.236 A:middle
如果你已经在使用

00:02:58.896 --> 00:03:00.236 A:middle
如果你已经在使用

00:03:00.236 --> 00:03:01.446 A:middle
AVKit 那么恭喜你 你可能已经

00:03:01.446 --> 00:03:02.426 A:middle
自动获得了这项

00:03:02.706 --> 00:03:03.506 A:middle
功能

00:03:04.496 --> 00:03:06.496 A:middle
现在让我们来看看文本

00:03:06.496 --> 00:03:06.796 A:middle
编辑

00:03:07.226 --> 00:03:08.586 A:middle
在座各位应该很熟悉

00:03:08.586 --> 00:03:09.646 A:middle
iOS 上的 QuickType 了

00:03:09.886 --> 00:03:10.956 A:middle
我们已经将 QuickType

00:03:10.956 --> 00:03:12.636 A:middle
放置在了 macOS 的 Touch Bar 上

00:03:12.636 --> 00:03:14.036 A:middle
众所周知

00:03:14.036 --> 00:03:15.426 A:middle
QuickType 是一个非常好的短篇小说

00:03:15.426 --> 00:03:16.366 A:middle
写作工具

00:03:16.776 --> 00:03:18.176 A:middle
如果我们在这里写一个小故事

00:03:18.176 --> 00:03:20.456 A:middle
其实这不是

00:03:20.456 --> 00:03:21.996 A:middle
我看过的最好的

00:03:21.996 --> 00:03:22.986 A:middle
短篇小说

00:03:23.456 --> 00:03:24.856 A:middle
但是没关系 因为

00:03:24.856 --> 00:03:25.836 A:middle
Touch Bar 能为我们提供一个让其增色

00:03:25.836 --> 00:03:26.096 A:middle
的方法

00:03:26.096 --> 00:03:27.456 A:middle
我们还有表情符号选择条

00:03:28.426 --> 00:03:30.696 A:middle
我们来让它变得有趣

00:03:30.696 --> 00:03:31.026 A:middle
一点

00:03:31.026 --> 00:03:33.056 A:middle
我们可以在这里浏览表情符号

00:03:33.056 --> 00:03:34.306 A:middle
比如 我笑了 我哭了

00:03:34.306 --> 00:03:36.236 A:middle
我变成了一只青蛙 然后我很开心

00:03:36.236 --> 00:03:37.526 A:middle
因为我不再是一只青蛙了

00:03:37.826 --> 00:03:39.126 A:middle
我为我们的故事加上了一些非常好的人物情感

00:03:39.126 --> 00:03:40.826 A:middle
和喜剧效果

00:03:41.136 --> 00:03:42.076 A:middle
而这都要感谢 Touch Bar

00:03:43.286 --> 00:03:45.756 A:middle
显而易见文本编辑是一款

00:03:45.756 --> 00:03:46.806 A:middle
文本编辑工具

00:03:46.806 --> 00:03:48.626 A:middle
我们可以将 QuickType 的选项折叠起来

00:03:48.626 --> 00:03:49.766 A:middle
然后调出文本

00:03:49.766 --> 00:03:50.586 A:middle
排版控件

00:03:50.766 --> 00:03:51.916 A:middle
可能最有用的事情就是

00:03:51.916 --> 00:03:53.116 A:middle
让它加粗或者变成斜体

00:03:53.116 --> 00:03:54.636 A:middle
或者加上颜色

00:03:54.636 --> 00:03:55.856 A:middle
粉色感觉很适合故事中

00:03:55.856 --> 00:03:57.076 A:middle
我变成了青蛙然后不再是青蛙的

00:03:57.076 --> 00:03:57.656 A:middle
部分

00:03:57.996 --> 00:03:58.946 A:middle
不论如何 让我们别再说起

00:03:58.946 --> 00:03:59.516 A:middle
这个了

00:04:00.886 --> 00:04:02.406 A:middle
关于我给大家展示的

00:04:02.406 --> 00:04:03.456 A:middle
这些例子 我还想指出的是

00:04:03.456 --> 00:04:04.656 A:middle
它们都是

00:04:04.656 --> 00:04:05.356 A:middle
可以自定义的

00:04:05.356 --> 00:04:07.056 A:middle
我们有一个 Touch Bar 的

00:04:07.396 --> 00:04:08.696 A:middle
自定义面板

00:04:09.036 --> 00:04:10.286 A:middle
你可以在这上面重新编排

00:04:10.286 --> 00:04:10.406 A:middle
控件

00:04:10.646 --> 00:04:11.876 A:middle
你可以从屏幕上的自定义面板中

00:04:11.876 --> 00:04:12.876 A:middle
添加控件

00:04:12.876 --> 00:04:14.086 A:middle
也可以将控件从 Touch Bar 中

00:04:14.086 --> 00:04:14.576 A:middle
移除

00:04:14.886 --> 00:04:16.326 A:middle
这很重要

00:04:16.326 --> 00:04:17.456 A:middle
因为每个用户的使用习惯

00:04:17.456 --> 00:04:18.286 A:middle
是不一样的

00:04:18.286 --> 00:04:19.245 A:middle
有些人喜欢用

00:04:19.245 --> 00:04:20.375 A:middle
应用做不同的事

00:04:20.375 --> 00:04:21.366 A:middle
有些人则喜欢用其他方式

00:04:21.366 --> 00:04:22.396 A:middle
使用电脑

00:04:22.616 --> 00:04:24.196 A:middle
通过实现自定义

00:04:24.486 --> 00:04:25.766 A:middle
你可以给用户

00:04:25.766 --> 00:04:26.606 A:middle
他们想要的体验

00:04:27.116 --> 00:04:28.086 A:middle
接下来我将教大家

00:04:28.086 --> 00:04:29.126 A:middle
如何通过编程实现这个

00:04:29.126 --> 00:04:29.626 A:middle
功能

00:04:30.376 --> 00:04:31.526 A:middle
我们先来讲讲

00:04:31.526 --> 00:04:33.046 A:middle
这个功能的技术细节

00:04:33.926 --> 00:04:35.026 A:middle
和这些细节的

00:04:35.026 --> 00:04:35.256 A:middle
含义

00:04:35.646 --> 00:04:36.776 A:middle
Touch Bar 是一个

00:04:36.776 --> 00:04:38.406 A:middle
很绚丽的 P3 Retina 显示器

00:04:38.406 --> 00:04:40.456 A:middle
他有很棒的 P3 色域

00:04:40.766 --> 00:04:42.496 A:middle
迷人的黑色 让显示内容

00:04:42.496 --> 00:04:43.076 A:middle
对比鲜明

00:04:43.436 --> 00:04:46.276 A:middle
这也意味着

00:04:46.276 --> 00:04:47.586 A:middle
我们在应用里包含的的素材

00:04:47.586 --> 00:04:49.046 A:middle
不需要像主屏幕上

00:04:49.046 --> 00:04:50.176 A:middle
那么多

00:04:50.866 --> 00:04:52.736 A:middle
不仅如此 这还是一个多点触控的设备

00:04:52.736 --> 00:04:54.476 A:middle
这意味着我们能跟踪到

00:04:54.476 --> 00:04:55.906 A:middle
多个手指

00:04:56.276 --> 00:04:57.836 A:middle
这也为我们能制作的控件

00:04:57.836 --> 00:04:58.726 A:middle
提供了一些

00:04:58.726 --> 00:04:59.536 A:middle
新的选择

00:04:59.696 --> 00:05:01.326 A:middle
说起 Touch Bar

00:04:59.696 --> 00:05:01.326 A:middle
说起 Touch Bar

00:05:01.326 --> 00:05:02.176 A:middle
你经常听到词的将是

00:05:02.176 --> 00:05:02.996 A:middle
上下文敏感

00:05:03.556 --> 00:05:05.626 A:middle
使用户能在合适的应用中

00:05:05.676 --> 00:05:07.336 A:middle
使用功能的

00:05:07.336 --> 00:05:08.536 A:middle
其实很简单

00:05:08.536 --> 00:05:10.606 A:middle
但是它具有

00:05:10.606 --> 00:05:11.916 A:middle
处理事件的意义

00:05:11.916 --> 00:05:13.116 A:middle
因为我们的用户在使用 Touch Bar 时

00:05:13.116 --> 00:05:14.956 A:middle
应用中的上下文

00:05:14.956 --> 00:05:16.286 A:middle
可能会发生变化

00:05:16.396 --> 00:05:17.876 A:middle
而我们的控件需要对变化

00:05:18.716 --> 00:05:19.176 A:middle
进行应对

00:05:19.246 --> 00:05:20.686 A:middle
最后 我们

00:05:20.686 --> 00:05:22.726 A:middle
需要将 Touch Bar上的

00:05:22.726 --> 00:05:24.426 A:middle
按钮 符号

00:05:24.426 --> 00:05:25.946 A:middle
与物理键盘

00:05:25.946 --> 00:05:27.016 A:middle
进行对应

00:05:27.016 --> 00:05:28.136 A:middle
并且我们通过检测

00:05:28.136 --> 00:05:29.446 A:middle
环境的亮度来判断

00:05:29.446 --> 00:05:30.626 A:middle
键盘的背灯是否应该

00:05:30.626 --> 00:05:30.816 A:middle
亮起

00:05:31.126 --> 00:05:32.296 A:middle
这将影响我们如何

00:05:32.296 --> 00:05:33.336 A:middle
绘制自定义

00:05:33.336 --> 00:05:33.876 A:middle
控件

00:05:34.246 --> 00:05:35.116 A:middle
但是在本次会议里

00:05:35.116 --> 00:05:35.996 A:middle
我们不会讲到

00:05:35.996 --> 00:05:37.196 A:middle
相关内容

00:05:37.196 --> 00:05:38.316 A:middle
在今天下午的会议上

00:05:38.316 --> 00:05:39.846 A:middle
将会讲到所有这些

00:05:39.846 --> 00:05:40.616 A:middle
话题

00:05:41.876 --> 00:05:44.856 A:middle
我想 只要你听到了这里

00:05:44.856 --> 00:05:45.676 A:middle
甚至可能在这之前 你就已经

00:05:45.676 --> 00:05:46.516 A:middle
想要把

00:05:46.516 --> 00:05:47.746 A:middle
Touch Bar 支持加入到

00:05:47.746 --> 00:05:49.006 A:middle
你的应用中去了

00:05:49.006 --> 00:05:49.686 A:middle
如果你还没有的话

00:05:49.686 --> 00:05:50.896 A:middle
不过 当你设计你的 UI 时

00:05:50.896 --> 00:05:52.326 A:middle
有几点是应该

00:05:52.326 --> 00:05:53.056 A:middle
记住的

00:05:53.396 --> 00:05:54.506 A:middle
首先

00:05:54.506 --> 00:05:56.146 A:middle
Touch Bar 的第一指导原则是

00:05:56.146 --> 00:05:57.316 A:middle
它是一个输入

00:05:57.316 --> 00:05:57.716 A:middle
设备

00:05:57.716 --> 00:05:58.936 A:middle
这意味着它应该能

00:05:58.936 --> 00:05:59.516 A:middle
与用户互动

00:05:59.766 --> 00:06:00.616 A:middle
它不应该被当成显示器

00:05:59.766 --> 00:06:00.616 A:middle
它不应该被当成显示器

00:06:00.616 --> 00:06:01.416 A:middle
来使用

00:06:01.416 --> 00:06:02.696 A:middle
所以 不要加入状态指示器

00:06:02.696 --> 00:06:03.406 A:middle
或者股票 K 线图

00:06:04.046 --> 00:06:05.656 A:middle
另外一件需要记住的事是

00:06:05.656 --> 00:06:06.706 A:middle
在制作 Touch Bar UI 时

00:06:06.706 --> 00:06:09.046 A:middle
我们不希望将应用中

00:06:09.046 --> 00:06:10.396 A:middle
别的地方

00:06:10.426 --> 00:06:11.886 A:middle
都没有的功能

00:06:11.886 --> 00:06:12.906 A:middle
加到 Touch Bar 里

00:06:13.226 --> 00:06:14.746 A:middle
Touch Bar UI 可以有趣 可以存在空白

00:06:14.746 --> 00:06:16.066 A:middle
这些都很好

00:06:16.066 --> 00:06:17.216 A:middle
但这不应该成为访问功能

00:06:17.216 --> 00:06:17.876 A:middle
的唯一途径

00:06:18.326 --> 00:06:19.736 A:middle
这是有原因的

00:06:19.736 --> 00:06:21.526 A:middle
因为并非所有

00:06:21.526 --> 00:06:23.106 A:middle
用户都有 Touch Bar

00:06:23.106 --> 00:06:24.336 A:middle
如果你加入了只在

00:06:24.336 --> 00:06:25.306 A:middle
Touch Bar 上可以使用的功能

00:06:25.306 --> 00:06:26.546 A:middle
那么很多用户都会失去使用这个功能

00:06:26.546 --> 00:06:27.216 A:middle
的机会

00:06:27.866 --> 00:06:30.476 A:middle
最后 这几乎可以说是 Touch Bar

00:06:30.476 --> 00:06:31.616 A:middle
作为输入设备的

00:06:31.616 --> 00:06:32.476 A:middle
一个副作用

00:06:32.866 --> 00:06:34.206 A:middle
当我们想要在 Touch Bar 上创造

00:06:34.206 --> 00:06:35.386 A:middle
漂亮的 UI 时

00:06:35.386 --> 00:06:36.486 A:middle
他们不应该喧宾

00:06:36.486 --> 00:06:36.966 A:middle
夺主

00:06:37.206 --> 00:06:38.476 A:middle
用户在主屏幕上的工作内容

00:06:38.476 --> 00:06:40.226 A:middle
应该永远都是

00:06:40.226 --> 00:06:41.316 A:middle
他们的焦点

00:06:41.316 --> 00:06:42.256 A:middle
Touch Bar 不应该使人

00:06:42.256 --> 00:06:42.826 A:middle
分心

00:06:43.806 --> 00:06:45.506 A:middle
说完了这些 我们

00:06:45.506 --> 00:06:46.436 A:middle
将要讲到

00:06:46.436 --> 00:06:48.016 A:middle
能让你在应用中使用

00:06:48.016 --> 00:06:48.706 A:middle
Touch Bar 的核心

00:06:48.706 --> 00:06:49.336 A:middle
类

00:06:49.626 --> 00:06:50.666 A:middle
我们将讲到响应器

00:06:50.666 --> 00:06:52.006 A:middle
将如何变化 以配合发现

00:06:52.006 --> 00:06:53.266 A:middle
应该显示何种

00:06:53.266 --> 00:06:54.736 A:middle
上下文敏感

00:06:54.736 --> 00:06:55.336 A:middle
功能

00:06:55.336 --> 00:06:56.666 A:middle
然后 我们将

00:06:56.666 --> 00:06:58.136 A:middle
深入探讨

00:06:58.136 --> 00:06:59.666 A:middle
其中一门核心类

00:06:59.666 --> 00:07:00.756 A:middle
并向大家展示它能做什么

00:06:59.666 --> 00:07:00.756 A:middle
并向大家展示它能做什么

00:07:01.646 --> 00:07:02.356 A:middle
让我们从类

00:07:02.356 --> 00:07:02.816 A:middle
开始

00:07:03.596 --> 00:07:05.436 A:middle
第一节课当然是关于

00:07:05.506 --> 00:07:06.296 A:middle
NSTouchBarItem 的

00:07:06.786 --> 00:07:08.096 A:middle
与它相配合的还有 NSTouchBar

00:07:08.096 --> 00:07:08.886 A:middle
和 NSResponder

00:07:09.206 --> 00:07:10.486 A:middle
让我们详细了解

00:07:10.856 --> 00:07:11.106 A:middle
一下

00:07:11.106 --> 00:07:12.466 A:middle
这是我做的一个

00:07:12.466 --> 00:07:13.306 A:middle
“邮件”应用 Touch Bar 的实体模型

00:07:13.306 --> 00:07:14.546 A:middle
所有我标记高亮的部分

00:07:14.546 --> 00:07:16.486 A:middle
要么是一个 NSView 要么是

00:07:16.486 --> 00:07:17.426 A:middle
NSControl 要么就是 NSButton

00:07:17.426 --> 00:07:18.386 A:middle
这都是大家很熟悉的

00:07:18.386 --> 00:07:19.826 A:middle
因为 Touch Bar 使用的也是

00:07:20.116 --> 00:07:21.646 A:middle
我们已经在

00:07:21.646 --> 00:07:23.216 A:middle
我们的 Cocoa App 中

00:07:23.216 --> 00:07:24.636 A:middle
用过很久的

00:07:25.806 --> 00:07:26.456 A:middle
视图功能

00:07:26.456 --> 00:07:27.556 A:middle
有一些事是 Touch Bar 能做到

00:07:27.556 --> 00:07:28.936 A:middle
但是视图目前

00:07:28.936 --> 00:07:29.776 A:middle
做不到的

00:07:30.036 --> 00:07:31.346 A:middle
所以我们需要一些解决

00:07:31.346 --> 00:07:31.556 A:middle
方法

00:07:31.556 --> 00:07:32.296 A:middle
这也是这个

00:07:32.296 --> 00:07:33.396 A:middle
NSTouchBarItem 类的目的

00:07:33.396 --> 00:07:35.186 A:middle
它将一个 视图 结合到了

00:07:35.226 --> 00:07:35.446 A:middle
Touch Bar 中

00:07:36.186 --> 00:07:37.786 A:middle
NSTouchBarItem 是一个非常基础的

00:07:37.786 --> 00:07:38.596 A:middle
类

00:07:38.656 --> 00:07:40.726 A:middle
它是一个子类

00:07:40.726 --> 00:07:41.956 A:middle
你们可能也

00:07:41.956 --> 00:07:43.036 A:middle
不会真的用到

00:07:43.036 --> 00:07:43.716 A:middle
它

00:07:43.716 --> 00:07:45.286 A:middle
因为 AppKit 包含了

00:07:45.286 --> 00:07:46.896 A:middle
大约 6 个 Touch Bar 子类

00:07:46.896 --> 00:07:48.106 A:middle
可以满足

00:07:48.106 --> 00:07:49.626 A:middle
你们的很多

00:07:49.626 --> 00:07:49.896 A:middle
需求

00:07:50.266 --> 00:07:51.976 A:middle
最后 NSTouchBarItem 类的

00:07:51.976 --> 00:07:52.886 A:middle
一个最重要的功能是

00:07:52.886 --> 00:07:54.866 A:middle
他有一个能

00:07:54.866 --> 00:07:56.566 A:middle
唯一标识

00:07:56.566 --> 00:07:57.776 A:middle
NSTouchBar 实例里的

00:07:57.776 --> 00:07:59.216 A:middle
项和功能的

00:07:59.276 --> 00:08:00.296 A:middle
标识符

00:07:59.276 --> 00:08:00.296 A:middle
标识符

00:08:01.066 --> 00:08:03.016 A:middle
让我们来说说 NSTouchBar

00:08:03.016 --> 00:08:03.686 A:middle
本身

00:08:03.836 --> 00:08:05.446 A:middle
最重要的是它有

00:08:05.446 --> 00:08:06.936 A:middle
一个用于标识项的

00:08:06.936 --> 00:08:08.486 A:middle
标识符

00:08:08.486 --> 00:08:08.876 A:middle
数组

00:08:08.876 --> 00:08:10.286 A:middle
这对解决哪些功能

00:08:10.406 --> 00:08:12.056 A:middle
要用在 Touch Bar 中

00:08:12.056 --> 00:08:13.026 A:middle
用于显示的视图中

00:08:13.026 --> 00:08:14.206 A:middle
是十分重要的

00:08:14.676 --> 00:08:15.736 A:middle
我们来快速的看一个

00:08:15.736 --> 00:08:16.306 A:middle
代码片段

00:08:17.106 --> 00:08:18.556 A:middle
这里我们将要为

00:08:18.556 --> 00:08:19.376 A:middle
一条鲨鱼和一个海龟

00:08:19.376 --> 00:08:21.046 A:middle
声明一些

00:08:21.046 --> 00:08:21.366 A:middle
标识符

00:08:21.876 --> 00:08:23.026 A:middle
通常我们在为代码

00:08:23.026 --> 00:08:24.736 A:middle
命名标识符时 我们建议使用

00:08:24.736 --> 00:08:26.496 A:middle
反向域名解析 但是

00:08:26.496 --> 00:08:27.276 A:middle
这样会更加

00:08:27.276 --> 00:08:27.686 A:middle
清晰

00:08:27.776 --> 00:08:30.306 A:middle
一旦我们有了这些标识符

00:08:30.306 --> 00:08:31.886 A:middle
我们将

00:08:31.886 --> 00:08:33.155 A:middle
实例化一个新的

00:08:33.155 --> 00:08:34.546 A:middle
NSTouchBar 然后

00:08:34.546 --> 00:08:35.856 A:middle
将项标识符数组设为

00:08:35.856 --> 00:08:36.096 A:middle
默认值

00:08:36.506 --> 00:08:38.206 A:middle
这样可以让 AppKit 知道

00:08:38.206 --> 00:08:39.546 A:middle
我们把什么语义功能

00:08:39.546 --> 00:08:40.986 A:middle
放到了 Touch Bar 里

00:08:41.466 --> 00:08:43.015 A:middle
我们现在要讲的是

00:08:43.015 --> 00:08:44.426 A:middle
AppKit 如何解决这个问题

00:08:44.866 --> 00:08:46.096 A:middle
我们有两个方法能

00:08:46.096 --> 00:08:46.386 A:middle
进行查找

00:08:46.386 --> 00:08:47.446 A:middle
我们有两种方法能够

00:08:47.446 --> 00:08:48.696 A:middle
从项标识符里找出

00:08:48.696 --> 00:08:49.346 A:middle
NSTouchBarItem

00:08:49.756 --> 00:08:51.256 A:middle
第一种是一个叫做 templateItems 的

00:08:51.296 --> 00:08:52.356 A:middle
NSTouchBar

00:08:52.356 --> 00:08:52.726 A:middle
属性

00:08:53.086 --> 00:08:54.496 A:middle
这只是一个项的集合

00:08:54.936 --> 00:08:56.176 A:middle
如果我们回头看看代码片段

00:08:56.176 --> 00:08:57.436 A:middle
这与我们之前编写的代码

00:08:57.436 --> 00:08:59.386 A:middle
完全相同

00:08:59.386 --> 00:09:00.096 A:middle
然后我们做一些添加

00:08:59.386 --> 00:09:00.096 A:middle
然后我们做一些添加

00:09:00.516 --> 00:09:02.226 A:middle
这里我给鲨鱼

00:09:02.226 --> 00:09:04.536 A:middle
和海龟分别用了一个

00:09:04.536 --> 00:09:05.346 A:middle
NSCustomTouchBar

00:09:05.346 --> 00:09:05.976 A:middle
的项类

00:09:05.976 --> 00:09:06.986 A:middle
这是我之前提到的

00:09:06.986 --> 00:09:07.996 A:middle
那些子类的其中一个

00:09:08.436 --> 00:09:09.726 A:middle
现在我们将项的视图

00:09:10.016 --> 00:09:12.586 A:middle
设置为“NSButton”

00:09:13.456 --> 00:09:14.516 A:middle
接下来我们来处理标题

00:09:14.516 --> 00:09:15.696 A:middle
就像鲨鱼或者海龟

00:09:15.696 --> 00:09:16.476 A:middle
表情符号那样

00:09:16.856 --> 00:09:18.216 A:middle
你会注意到我们用到的是

00:09:18.246 --> 00:09:19.596 A:middle
在 macOS10.12 里介绍到的

00:09:19.596 --> 00:09:22.116 A:middle
NSButton 简便构造方法

00:09:22.566 --> 00:09:23.866 A:middle
十分重要 因为

00:09:23.866 --> 00:09:24.966 A:middle
这些简便构造方法

00:09:24.966 --> 00:09:26.326 A:middle
可以使 NSButton 变成外观敏感的

00:09:26.326 --> 00:09:27.946 A:middle
从而能使用

00:09:27.946 --> 00:09:29.246 A:middle
正确的样式和字体

00:09:29.616 --> 00:09:30.896 A:middle
如果我们直接构建 NSButton

00:09:30.896 --> 00:09:32.466 A:middle
我们可能不会得到这个

00:09:32.466 --> 00:09:33.036 A:middle
功能

00:09:33.036 --> 00:09:34.166 A:middle
这可以大大节省时间

00:09:34.756 --> 00:09:36.676 A:middle
最后在项目实例化后

00:09:36.676 --> 00:09:37.976 A:middle
我们要

00:09:37.976 --> 00:09:39.116 A:middle
将它们添加到

00:09:39.116 --> 00:09:39.976 A:middle
templateItems 集合里

00:09:40.586 --> 00:09:41.596 A:middle
如果我们做完了

00:09:41.596 --> 00:09:42.416 A:middle
所有步骤 我们将在

00:09:42.416 --> 00:09:43.316 A:middle
屏幕底部的 Touch Bar 上看到

00:09:43.316 --> 00:09:44.766 A:middle
鲨鱼按钮和

00:09:44.766 --> 00:09:45.576 A:middle
海龟按钮

00:09:47.036 --> 00:09:48.186 A:middle
我想要提到一件事是

00:09:48.416 --> 00:09:50.426 A:middle
如果你将代码拷贝粘贴到

00:09:50.426 --> 00:09:52.366 A:middle
Swift Playground 里 XCode 将

00:09:52.366 --> 00:09:54.296 A:middle
对我们创建的

00:09:54.296 --> 00:09:55.976 A:middle
Touch Bar 项及

00:09:56.006 --> 00:09:57.216 A:middle
Touch bar 本身

00:09:57.216 --> 00:09:58.406 A:middle
进行预览

00:09:58.406 --> 00:09:59.756 A:middle
这是一种能快速

00:09:59.756 --> 00:10:01.006 A:middle
建立你的 Touch Bar UI 原型的

00:09:59.756 --> 00:10:01.006 A:middle
建立你的 Touch Bar UI 原型的

00:10:01.006 --> 00:10:01.816 A:middle
有效方式

00:10:03.046 --> 00:10:03.946 A:middle
好了  templateItems 的内容就这么多

00:10:04.386 --> 00:10:06.036 A:middle
现在我们来看看

00:10:06.036 --> 00:10:08.056 A:middle
我们能用委托干些什么

00:10:08.056 --> 00:10:10.066 A:middle
在 NSTouchBarDelegate 协议里

00:10:10.066 --> 00:10:11.476 A:middle
有一个单独的委托

00:10:11.476 --> 00:10:11.986 A:middle
方法

00:10:11.986 --> 00:10:12.776 A:middle
那就是 Touch Bar 的

00:10:12.776 --> 00:10:14.076 A:middle
makeItemForIdentifier

00:10:14.976 --> 00:10:16.426 A:middle
它非常简单

00:10:16.556 --> 00:10:17.566 A:middle
如果我们看看这里的代码

00:10:17.566 --> 00:10:19.076 A:middle
会发现它和 templateItems

00:10:19.076 --> 00:10:20.106 A:middle
的情况一模一样

00:10:20.106 --> 00:10:20.966 A:middle
不同之处在于我们

00:10:20.966 --> 00:10:21.986 A:middle
将它放在一个 Switch 语句里

00:10:21.986 --> 00:10:23.786 A:middle
当 AppKit 要查找一个

00:10:23.786 --> 00:10:25.276 A:middle
特殊的标识符时

00:10:25.276 --> 00:10:27.366 A:middle
我们能有条件地

00:10:27.366 --> 00:10:28.616 A:middle
创建一个新项

00:10:29.596 --> 00:10:31.906 A:middle
AppKit 会缓存这个方法的

00:10:31.906 --> 00:10:32.266 A:middle
结果

00:10:32.556 --> 00:10:33.806 A:middle
所以 你完全可以将它看作一个

00:10:33.806 --> 00:10:35.106 A:middle
工厂 每次都创建一个

00:10:35.106 --> 00:10:35.896 A:middle
新的实例

00:10:35.896 --> 00:10:36.856 A:middle
除非在其他地方有用

00:10:36.856 --> 00:10:38.096 A:middle
否则你无须自己

00:10:38.096 --> 00:10:39.346 A:middle
保留一个反向指针

00:10:40.536 --> 00:10:43.236 A:middle
我要讲的另一个重点是

00:10:43.236 --> 00:10:44.646 A:middle
我已经提到了一些

00:10:44.646 --> 00:10:46.806 A:middle
关于自定义的内容

00:10:47.196 --> 00:10:48.346 A:middle
现在就让我们来

00:10:48.346 --> 00:10:49.146 A:middle
对我做的 Touch Bar 进行

00:10:49.146 --> 00:10:49.816 A:middle
自定义

00:10:50.626 --> 00:10:52.066 A:middle
这包括增加一些

00:10:52.066 --> 00:10:52.376 A:middle
东西

00:10:52.666 --> 00:10:54.226 A:middle
首先是在第一行的内容

00:10:54.226 --> 00:10:55.756 A:middle
我们在这里要把 NSApp

00:10:55.756 --> 00:10:57.156 A:middle
设置为 isAutomaticCustomize

00:10:57.386 --> 00:10:58.766 A:middle
TouchBarMenuItem

00:10:58.766 --> 00:11:00.226 A:middle
Enabled

00:10:58.766 --> 00:11:00.226 A:middle
Enabled

00:11:00.906 --> 00:11:02.606 A:middle
这很拗口 但是

00:11:02.606 --> 00:11:03.636 A:middle
这是一种非常简单的

00:11:03.636 --> 00:11:04.196 A:middle
处理方法

00:11:04.196 --> 00:11:05.506 A:middle
如果你将它设置为真

00:11:05.876 --> 00:11:07.126 A:middle
NSApp 将为你

00:11:07.126 --> 00:11:08.496 A:middle
自动生成一个目录项

00:11:08.496 --> 00:11:10.276 A:middle
可以用于展示

00:11:10.276 --> 00:11:11.306 A:middle
和隐藏自定义

00:11:11.306 --> 00:11:11.626 A:middle
面板

00:11:12.156 --> 00:11:13.306 A:middle
你不需要用到它

00:11:13.346 --> 00:11:14.786 A:middle
NSApp 有一种

00:11:14.786 --> 00:11:16.296 A:middle
方法能明确的展示和隐藏它

00:11:16.296 --> 00:11:17.236 A:middle
如果你希望多一些控制

00:11:17.236 --> 00:11:18.896 A:middle
你可以将它加入你的

00:11:19.746 --> 00:11:20.666 A:middle
目录项

00:11:20.666 --> 00:11:21.546 A:middle
讲完了这些

00:11:21.866 --> 00:11:23.106 A:middle
我们来看幻灯片

00:11:23.106 --> 00:11:24.626 A:middle
底部的这行代码 我们在这里设置

00:11:24.626 --> 00:11:26.026 A:middle
自定义的标识符

00:11:26.456 --> 00:11:27.826 A:middle
在这种情况下

00:11:27.826 --> 00:11:29.246 A:middle
我来编写一个海洋生物的

00:11:29.246 --> 00:11:29.836 A:middle
标识符

00:11:30.486 --> 00:11:32.166 A:middle
设置它是很重要的

00:11:32.166 --> 00:11:33.566 A:middle
因为这是个令牌

00:11:33.606 --> 00:11:35.076 A:middle
能使 Touch Bar 的配置在

00:11:35.076 --> 00:11:36.446 A:middle
应用程序的开始

00:11:36.446 --> 00:11:37.936 A:middle
或者系统的重启时

00:11:37.936 --> 00:11:38.926 A:middle
得以持续

00:11:39.736 --> 00:11:41.246 A:middle
启用自定义的

00:11:41.246 --> 00:11:42.576 A:middle
另一个重要步骤是

00:11:42.576 --> 00:11:43.376 A:middle
设置 customization

00:11:43.376 --> 00:11:44.686 A:middle
AllowedItemIdentifier

00:11:44.686 --> 00:11:45.526 A:middle
的数组

00:11:45.916 --> 00:11:47.076 A:middle
我们现在重新设置

00:11:47.076 --> 00:11:48.076 A:middle
我们的鲨鱼和

00:11:48.076 --> 00:11:48.576 A:middle
海龟

00:11:48.976 --> 00:11:50.306 A:middle
这个设置能让

00:11:50.306 --> 00:11:51.466 A:middle
自定义面板知道

00:11:51.466 --> 00:11:52.686 A:middle
哪些项可以被添加 哪些要被

00:11:52.686 --> 00:11:53.046 A:middle
移除

00:11:53.706 --> 00:11:54.676 A:middle
如果我们做完了所有这些

00:11:54.676 --> 00:11:55.976 A:middle
我们可以打开自定义面板

00:11:55.976 --> 00:11:57.586 A:middle
我们将看到

00:11:57.586 --> 00:11:59.186 A:middle
defaultItemIdentifiers 数组被

00:11:59.186 --> 00:12:00.366 A:middle
转化成为

00:11:59.186 --> 00:12:00.366 A:middle
转化成为

00:12:00.366 --> 00:12:01.326 A:middle
左边的

00:12:01.326 --> 00:12:01.736 A:middle
一组项

00:12:01.776 --> 00:12:03.036 A:middle
被允许的项标识符

00:12:03.036 --> 00:12:04.686 A:middle
中的个别项

00:12:04.686 --> 00:12:05.516 A:middle
将显示在右边

00:12:06.236 --> 00:12:07.176 A:middle
这是个很乏味的

00:12:07.176 --> 00:12:08.336 A:middle
自定义面板 我们来

00:12:08.336 --> 00:12:09.286 A:middle
使它有变得有趣一些

00:12:10.186 --> 00:12:11.926 A:middle
这里有一整个动物园的

00:12:11.926 --> 00:12:12.576 A:middle
海洋动物

00:12:13.326 --> 00:12:15.806 A:middle
我想说的是

00:12:15.806 --> 00:12:16.866 A:middle
在创建项模板的时候

00:12:16.926 --> 00:12:18.406 A:middle
你需要决定你要

00:12:18.406 --> 00:12:19.496 A:middle
将它设置在 Touch Bar 上

00:12:19.496 --> 00:12:20.766 A:middle
还是使用

00:12:20.816 --> 00:12:22.696 A:middle
默认的委托

00:12:22.796 --> 00:12:24.196 A:middle
只显示鲨鱼和海龟

00:12:24.196 --> 00:12:25.126 A:middle
这时他就会起作用

00:12:25.326 --> 00:12:26.026 A:middle
在很多应用中

00:12:26.026 --> 00:12:27.266 A:middle
你的 Touch Bar 上的

00:12:27.266 --> 00:12:28.456 A:middle
默认功能只是

00:12:28.736 --> 00:12:30.416 A:middle
你在自定义时

00:12:30.416 --> 00:12:31.706 A:middle
可添加的所有功能

00:12:31.706 --> 00:12:32.796 A:middle
中的很小一

00:12:32.796 --> 00:12:33.656 A:middle
部分

00:12:34.716 --> 00:12:36.626 A:middle
通过使用委托

00:12:36.626 --> 00:12:37.776 A:middle
不使用自定义面板的用户

00:12:37.776 --> 00:12:38.836 A:middle
就不会浪费 CPU 时间

00:12:38.836 --> 00:12:43.106 A:middle
创建新项

00:12:43.626 --> 00:12:44.946 A:middle
另一件需要注意的事是

00:12:44.946 --> 00:12:46.596 A:middle
在某些情况下

00:12:46.596 --> 00:12:47.426 A:middle
你可能想要创建

00:12:47.426 --> 00:12:48.376 A:middle
一个 Touch Bar UI

00:12:48.376 --> 00:12:49.556 A:middle
其中的有些功能

00:12:49.556 --> 00:12:50.886 A:middle
你希望它一直存在

00:12:50.886 --> 00:12:51.896 A:middle
不希望用户在自定义区

00:12:51.896 --> 00:12:53.646 A:middle
移除它

00:12:53.646 --> 00:12:54.876 A:middle
如果你遇到这样的问题

00:12:54.876 --> 00:12:56.086 A:middle
你可以设置自定义

00:12:56.086 --> 00:12:57.666 A:middle
所需的项标识符数组

00:12:58.216 --> 00:12:59.706 A:middle
这样的情况下 显然

00:12:59.706 --> 00:13:00.936 A:middle
海龟对我们的应用功能

00:12:59.706 --> 00:13:00.936 A:middle
海龟对我们的应用功能

00:13:00.936 --> 00:13:02.006 A:middle
很关键

00:13:02.006 --> 00:13:02.926 A:middle
所以 我们要避免它

00:13:02.926 --> 00:13:03.586 A:middle
被移除

00:13:03.626 --> 00:13:07.196 A:middle
好了 这基本涵盖了怎样

00:13:07.196 --> 00:13:09.156 A:middle
制作 NSTouchBar 实例

00:13:09.156 --> 00:13:11.206 A:middle
以及怎么通过

00:13:11.206 --> 00:13:12.306 A:middle
模板项和委托方法

00:13:12.306 --> 00:13:13.846 A:middle
使用用项标识符来帮助项目

00:13:13.846 --> 00:13:14.266 A:middle
查找

00:13:14.636 --> 00:13:15.826 A:middle
有一样东西我们漏掉了

00:13:15.826 --> 00:13:17.596 A:middle
那就是 App

00:13:17.596 --> 00:13:18.786 A:middle
如何能够找到 NSTouchBar

00:13:18.786 --> 00:13:19.396 A:middle
的实例

00:13:19.396 --> 00:13:21.286 A:middle
这里很重要的一个部分是

00:13:21.286 --> 00:13:22.626 A:middle
NSTouchBarProvider 协议

00:13:23.436 --> 00:13:24.786 A:middle
这是一个很简单的

00:13:24.786 --> 00:13:25.256 A:middle
协议

00:13:25.496 --> 00:13:26.976 A:middle
它揭示了 Touch Bar 的一个

00:13:26.976 --> 00:13:28.886 A:middle
只读属性

00:13:28.886 --> 00:13:30.846 A:middle
NSResponder 创新性的

00:13:30.846 --> 00:13:31.866 A:middle
执行了这个

00:13:31.866 --> 00:13:32.346 A:middle
协议

00:13:32.346 --> 00:13:33.256 A:middle
这个我们一会儿将会

00:13:33.256 --> 00:13:33.636 A:middle
谈到

00:13:34.006 --> 00:13:35.556 A:middle
有时候将 Touch Bar 加到

00:13:35.556 --> 00:13:36.676 A:middle
你的应用委托

00:13:36.676 --> 00:13:38.386 A:middle
或者窗口委托是

00:13:38.386 --> 00:13:38.976 A:middle
有用的

00:13:38.976 --> 00:13:40.156 A:middle
它们中任何一个都

00:13:40.156 --> 00:13:41.656 A:middle
不是 NSResponder 的子类

00:13:41.966 --> 00:13:43.016 A:middle
让我们来看看

00:13:43.016 --> 00:13:44.016 A:middle
你将如何执行这个

00:13:44.016 --> 00:13:44.486 A:middle
协议

00:13:45.436 --> 00:13:47.256 A:middle
这起来和很多其他的代码一样

00:13:47.256 --> 00:13:48.486 A:middle
但是我们只是用到了 Touch Bar 的属性中

00:13:48.486 --> 00:13:50.586 A:middle
的 Swift 延迟

00:13:50.586 --> 00:13:51.396 A:middle
变量

00:13:51.986 --> 00:13:53.216 A:middle
当 Touch Bar 第一次被访问时

00:13:53.216 --> 00:13:54.556 A:middle
Swift 就会开始

00:13:54.556 --> 00:13:55.576 A:middle
运行代码块

00:13:55.576 --> 00:13:56.966 A:middle
并实例化

00:13:56.996 --> 00:13:57.196 A:middle
Touch Bar

00:13:57.416 --> 00:13:58.696 A:middle
也就是我们在上一张幻灯片里看到的

00:13:58.696 --> 00:13:59.886 A:middle
在 Touch Bar 和别的地方创建项

00:13:59.886 --> 00:14:00.786 A:middle
的那些代码

00:13:59.886 --> 00:14:00.786 A:middle
的那些代码

00:14:02.176 --> 00:14:03.936 A:middle
还需要提及的是

00:14:03.936 --> 00:14:05.706 A:middle
AppKit Key 值可以监测

00:14:05.706 --> 00:14:06.296 A:middle
这个属性

00:14:06.296 --> 00:14:07.606 A:middle
如果你需要

00:14:07.756 --> 00:14:08.706 A:middle
完全移除 Touch Bar

00:14:08.706 --> 00:14:09.876 A:middle
我们将注意到

00:14:09.876 --> 00:14:10.526 A:middle
这个改变

00:14:11.706 --> 00:14:13.756 A:middle
让我们看看 NSResponder

00:14:13.756 --> 00:14:14.926 A:middle
如何执行它

00:14:14.926 --> 00:14:16.426 A:middle
首先 它表明 touchBar 属性

00:14:16.426 --> 00:14:17.456 A:middle
是一个可读写的属性

00:14:17.456 --> 00:14:18.906 A:middle
而不是只读的

00:14:19.226 --> 00:14:20.596 A:middle
它的重要性在于你可以

00:14:20.596 --> 00:14:22.076 A:middle
在你应用的不同部分设置

00:14:22.186 --> 00:14:24.286 A:middle
NSTouchBar

00:14:24.286 --> 00:14:24.946 A:middle
实例

00:14:24.946 --> 00:14:26.086 A:middle
你可以在响应器的窗口

00:14:26.086 --> 00:14:26.596 A:middle
上看到

00:14:26.596 --> 00:14:27.856 A:middle
就像视图 视图控制器

00:14:27.856 --> 00:14:28.696 A:middle
和窗口控制器那样

00:14:29.176 --> 00:14:31.086 A:middle
这非常简单 因为

00:14:31.086 --> 00:14:32.076 A:middle
你不用为每个

00:14:32.076 --> 00:14:33.306 A:middle
控件创建

00:14:33.306 --> 00:14:34.056 A:middle
子类

00:14:34.746 --> 00:14:36.636 A:middle
如果你为控件或

00:14:36.636 --> 00:14:37.676 A:middle
任何 NSResponder 创建了子类

00:14:37.766 --> 00:14:39.826 A:middle
NSResponder 同样会

00:14:39.826 --> 00:14:41.136 A:middle
暴露 makeTouchBar()

00:14:41.136 --> 00:14:41.476 A:middle
方法

00:14:42.506 --> 00:14:43.536 A:middle
所以 makeTouchBar() 是非常

00:14:43.536 --> 00:14:43.886 A:middle
简单的

00:14:44.456 --> 00:14:45.956 A:middle
touchBar 属性第一次

00:14:45.956 --> 00:14:47.296 A:middle
接入 NSResponder 时

00:14:47.326 --> 00:14:48.996 A:middle
它将调用 makeTouchBar() 并

00:14:49.276 --> 00:14:50.976 A:middle
运行此

00:14:50.976 --> 00:14:51.316 A:middle
代码

00:14:51.316 --> 00:14:52.416 A:middle
这时我们只用返回一个新的

00:14:52.416 --> 00:14:53.216 A:middle
Touch Bar 给它

00:14:53.606 --> 00:14:55.286 A:middle
很多系统控件和

00:14:55.286 --> 00:14:56.606 A:middle
系统框架都使用这种方法

00:14:56.606 --> 00:14:58.316 A:middle
暴露他们的

00:14:58.316 --> 00:14:59.976 A:middle
功能

00:15:00.656 --> 00:15:02.436 A:middle
就像我提到的那样 NSResponder

00:15:02.436 --> 00:15:03.586 A:middle
有一个读写属性

00:15:03.586 --> 00:15:04.556 A:middle
大家可以对它进行

00:15:04.556 --> 00:15:05.106 A:middle
设置

00:15:05.106 --> 00:15:06.186 A:middle
其中一个很重要的

00:15:06.186 --> 00:15:07.346 A:middle
受众就是

00:15:07.346 --> 00:15:08.096 A:middle
Interface Builder

00:15:08.906 --> 00:15:10.026 A:middle
让我来向大家展示如何通过

00:15:10.026 --> 00:15:11.196 A:middle
Interface Builder 创建一个

00:15:11.196 --> 00:15:11.496 A:middle
Touch Bar UI

00:15:11.956 --> 00:15:13.646 A:middle
如果我们从

00:15:13.646 --> 00:15:14.616 A:middle
Story Board 开始

00:15:14.616 --> 00:15:16.136 A:middle
我们可以看到一个窗口控制器

00:15:16.136 --> 00:15:17.616 A:middle
然后我们可以通过过滤对象库

00:15:17.996 --> 00:15:19.546 A:middle
来展示 Touch Bar 控件

00:15:20.166 --> 00:15:22.106 A:middle
所以如果我们检查对象库

00:15:22.106 --> 00:15:23.316 A:middle
这里有一个 NSTouchBar 的实例

00:15:23.316 --> 00:15:24.746 A:middle
我们可以将它拖到

00:15:24.746 --> 00:15:25.876 A:middle
窗口控制器上

00:15:26.336 --> 00:15:27.506 A:middle
现在我们得到了一个空的

00:15:27.506 --> 00:15:29.066 A:middle
Touch Bar

00:15:29.066 --> 00:15:31.026 A:middle
回到对象库

00:15:31.026 --> 00:15:32.426 A:middle
我们可以看到一打打的

00:15:32.476 --> 00:15:33.856 A:middle
预配置的控件

00:15:33.856 --> 00:15:35.486 A:middle
和 Touch Bar 项

00:15:35.526 --> 00:15:36.836 A:middle
我们可以把它拖到

00:15:36.836 --> 00:15:37.376 A:middle
Touch Bar 里

00:15:37.626 --> 00:15:40.896 A:middle
从现在起 我们

00:15:40.896 --> 00:15:42.776 A:middle
就可以用 ID 连接或者捆绑来

00:15:42.776 --> 00:15:43.636 A:middle
写这些项了

00:15:43.886 --> 00:15:45.626 A:middle
其实 不写一行代码

00:15:45.626 --> 00:15:47.056 A:middle
就使 Touch Bar 应用

00:15:47.056 --> 00:15:48.336 A:middle
能进行完美的工作

00:15:48.526 --> 00:15:49.646 A:middle
和使用是非常

00:15:49.646 --> 00:15:50.806 A:middle
可能的

00:15:51.556 --> 00:15:53.606 A:middle
我们讲完了创建

00:15:53.606 --> 00:15:54.906 A:middle
NSTouchBarItem 实例

00:15:55.236 --> 00:15:56.506 A:middle
现在让我们来看 它将如何适应

00:15:56.506 --> 00:15:57.886 A:middle
大的响应器链 以及我们

00:15:57.886 --> 00:15:59.506 A:middle
如何发现所有的 Touch Bar

00:15:59.506 --> 00:16:01.826 A:middle
个体实例

00:15:59.506 --> 00:16:01.826 A:middle
个体实例

00:16:01.826 --> 00:16:03.766 A:middle
一个刷新控件

00:16:03.766 --> 00:16:05.266 A:middle
一个响应器链是由

00:16:05.266 --> 00:16:06.516 A:middle
NSResponder 类的实例组成的

00:16:06.836 --> 00:16:08.036 A:middle
NSResponder 类中最重要

00:16:08.036 --> 00:16:09.336 A:middle
的属性就是它的

00:16:09.336 --> 00:16:11.416 A:middle
下一个响应器的

00:16:11.416 --> 00:16:12.776 A:middle
属性

00:16:13.266 --> 00:16:14.546 A:middle
这指向了另一个

00:16:14.546 --> 00:16:15.056 A:middle
响应器

00:16:15.406 --> 00:16:16.396 A:middle
这意味着给定一个响应器

00:16:16.396 --> 00:16:17.956 A:middle
我们就能链接

00:16:17.956 --> 00:16:20.246 A:middle
整条响应器链并使其能

00:16:20.246 --> 00:16:21.936 A:middle
处理事件

00:16:21.936 --> 00:16:23.256 A:middle
行动和别的东西

00:16:23.656 --> 00:16:26.386 A:middle
AppKit 用很多不同的

00:16:26.486 --> 00:16:28.196 A:middle
响应器作为链条的锚

00:16:28.196 --> 00:16:29.276 A:middle
来处理键盘事件

00:16:29.276 --> 00:16:31.256 A:middle
对行为和点击的测试

00:16:31.256 --> 00:16:32.846 A:middle
以及常规的鼠标事件。

00:16:32.846 --> 00:16:34.316 A:middle
我们来讲讲

00:16:34.316 --> 00:16:35.226 A:middle
键盘事件如何工作

00:16:35.226 --> 00:16:36.376 A:middle
因为 Touch Bar 是键盘的

00:16:36.376 --> 00:16:36.786 A:middle
一部分

00:16:37.596 --> 00:16:38.846 A:middle
系统将交给我们

00:16:38.846 --> 00:16:39.886 A:middle
一个 NSEvent 事件

00:16:39.886 --> 00:16:41.296 A:middle
随后这个事件

00:16:41.296 --> 00:16:42.376 A:middle
将返回 NSApplication

00:16:43.006 --> 00:16:44.236 A:middle
NSApplication 将告知我们

00:16:44.236 --> 00:16:45.236 A:middle
要对键盘事件

00:16:45.236 --> 00:16:45.796 A:middle
做什么

00:16:46.446 --> 00:16:48.246 A:middle
大多数 NSApplication 会问

00:16:48.246 --> 00:16:49.346 A:middle
我是否有主

00:16:49.346 --> 00:16:49.756 A:middle
窗口

00:16:49.906 --> 00:16:51.796 A:middle
好的 这就是一个键盘

00:16:51.796 --> 00:16:51.936 A:middle
事件

00:16:52.926 --> 00:16:54.266 A:middle
同时 主窗口也会有

00:16:54.266 --> 00:16:55.256 A:middle
同样的问题

00:16:55.256 --> 00:16:56.426 A:middle
我要对键盘事件

00:16:57.186 --> 00:16:57.506 A:middle
做什么

00:16:57.506 --> 00:16:59.616 A:middle
每一个 NSWindow 都有

00:16:59.616 --> 00:17:01.086 A:middle
一个叫做第一响应器的属性

00:16:59.616 --> 00:17:01.086 A:middle
一个叫做第一响应器的属性

00:17:01.086 --> 00:17:03.186 A:middle
它能指出键盘事件在

00:17:03.186 --> 00:17:04.356 A:middle
响应器链条的

00:17:04.356 --> 00:17:05.616 A:middle
什么位置开始启动

00:17:05.616 --> 00:17:05.925 A:middle
等等 

00:17:06.165 --> 00:17:06.965 A:middle
所以 主窗口

00:17:06.965 --> 00:17:07.996 A:middle
会说 好的

00:17:07.996 --> 00:17:08.915 A:middle
我们来将它发送到我的第一响应器

00:17:08.915 --> 00:17:11.465 A:middle
就像它在按下和释放键盘

00:17:11.465 --> 00:17:12.326 A:middle
方法里一样

00:17:13.236 --> 00:17:14.516 A:middle
这很有趣

00:17:14.516 --> 00:17:16.965 A:middle
第一响应器是我们锚定响应链

00:17:16.965 --> 00:17:17.846 A:middle
的位置 是我们将要

00:17:17.846 --> 00:17:19.096 A:middle
像响应器方法那样

00:17:19.096 --> 00:17:19.906 A:middle
处理它的地方

00:17:19.906 --> 00:17:21.126 A:middle
而不仅仅是

00:17:21.126 --> 00:17:22.106 A:middle
通用路由事件

00:17:22.106 --> 00:17:23.276 A:middle
它将作出一个决定

00:17:23.276 --> 00:17:24.976 A:middle
我是在按下键盘的时候

00:17:24.976 --> 00:17:27.076 A:middle
处理事件 还是调用父类

00:17:27.076 --> 00:17:28.256 A:middle
然后让它传递给下一个

00:17:28.256 --> 00:17:28.756 A:middle
响应器

00:17:29.456 --> 00:17:30.596 A:middle
我们假设它传递到了

00:17:30.596 --> 00:17:31.296 A:middle
下一个响应器

00:17:31.296 --> 00:17:33.196 A:middle
一般来说 第一个响应是一个视图

00:17:33.196 --> 00:17:34.496 A:middle
第二个响应器

00:17:34.496 --> 00:17:35.266 A:middle
是一个父视图

00:17:35.786 --> 00:17:37.206 A:middle
它会作出同样的选择

00:17:37.576 --> 00:17:39.046 A:middle
目前 视图和

00:17:39.046 --> 00:17:40.256 A:middle
视图控制器一般

00:17:40.256 --> 00:17:40.876 A:middle
是在响应器链

00:17:40.876 --> 00:17:41.156 A:middle
里面的

00:17:41.426 --> 00:17:42.976 A:middle
所以 将它传递给视图控制器

00:17:42.976 --> 00:17:44.216 A:middle
同样会使 Handler

00:17:44.216 --> 00:17:45.276 A:middle
调用父类

00:17:45.356 --> 00:17:46.156 A:middle
它不会处理它

00:17:46.426 --> 00:17:48.146 A:middle
它可能会回到

00:17:48.146 --> 00:17:49.016 A:middle
最初引起

00:17:49.016 --> 00:17:50.526 A:middle
路由事件

00:17:50.526 --> 00:17:51.246 A:middle
的窗口

00:17:51.546 --> 00:17:52.336 A:middle
从而 它作为

00:17:52.336 --> 00:17:53.416 A:middle
响应器链条的一部分

00:17:53.416 --> 00:17:54.636 A:middle
可以决定是处理

00:17:54.636 --> 00:17:55.336 A:middle
还是传递它

00:17:55.646 --> 00:17:56.676 A:middle
这能将它滤回

00:17:56.676 --> 00:17:57.936 A:middle
应用

00:17:58.626 --> 00:17:59.436 A:middle
这就是我们处理键盘

00:17:59.436 --> 00:18:00.156 A:middle
事件的方法

00:17:59.436 --> 00:18:00.156 A:middle
事件的方法

00:18:00.536 --> 00:18:01.316 A:middle
Touch Bar 是键盘的

00:18:01.316 --> 00:18:01.716 A:middle
一部分

00:18:01.946 --> 00:18:03.156 A:middle
这也表明 这些是我们可以

00:18:03.156 --> 00:18:04.606 A:middle
添加

00:18:04.606 --> 00:18:05.766 A:middle
NSTouchBar 实例的位置

00:18:06.246 --> 00:18:07.886 A:middle
我们以

00:18:07.886 --> 00:18:08.976 A:middle
与在响应器链里的路由

00:18:08.976 --> 00:18:10.256 A:middle
键盘事件相同的顺序

00:18:10.256 --> 00:18:10.996 A:middle
来查找它们

00:18:11.926 --> 00:18:13.616 A:middle
所以 你应该问的问题是

00:18:13.616 --> 00:18:15.276 A:middle
嘿 我注意到你有

00:18:15.276 --> 00:18:16.836 A:middle
5 个 NSTouchBar

00:18:16.836 --> 00:18:17.076 A:middle
实例

00:18:17.326 --> 00:18:18.966 A:middle
你要如何将它们

00:18:18.966 --> 00:18:20.216 A:middle
放在设备上的 Touch Bar 上

00:18:20.686 --> 00:18:21.926 A:middle
我马上会讲到这个

00:18:21.926 --> 00:18:22.546 A:middle
问题

00:18:22.926 --> 00:18:25.036 A:middle
但是首先 我想谈谈

00:18:25.036 --> 00:18:26.006 A:middle
视图和视图

00:18:26.006 --> 00:18:26.576 A:middle
控制器

00:18:27.386 --> 00:18:28.276 A:middle
你可能会在某个时候需要

00:18:28.276 --> 00:18:29.466 A:middle
将 Touch Bar 加到视图控制器上

00:18:29.466 --> 00:18:31.216 A:middle
来制作你的

00:18:31.436 --> 00:18:32.376 A:middle
应用程序

00:18:32.956 --> 00:18:34.046 A:middle
你会运行并测试

00:18:34.046 --> 00:18:34.786 A:middle
然后你会发现

00:18:34.786 --> 00:18:35.816 A:middle
Touch Bar 完全没有显示

00:18:35.816 --> 00:18:37.016 A:middle
这时你会想

00:18:37.016 --> 00:18:38.206 A:middle
我猜我的视图控制器不在

00:18:38.206 --> 00:18:39.186 A:middle
响应器链上

00:18:39.356 --> 00:18:40.356 A:middle
你会去查看你的视图控制器

00:18:40.356 --> 00:18:41.466 A:middle
你会发现下一个响应器

00:18:41.466 --> 00:18:42.846 A:middle
确实就是你的

00:18:42.846 --> 00:18:43.866 A:middle
视图控制器

00:18:44.376 --> 00:18:45.926 A:middle
这里发生的事是

00:18:46.376 --> 00:18:48.786 A:middle
当特定的响应器链

00:18:48.786 --> 00:18:50.216 A:middle
被正确的设置，

00:18:50.216 --> 00:18:51.226 A:middle
它不是在窗口的第一响应器

00:18:51.226 --> 00:18:52.246 A:middle
里被锚定

00:18:52.806 --> 00:18:54.326 A:middle
那通常是因为

00:18:54.326 --> 00:18:55.506 A:middle
窗口的第一响应器

00:18:55.506 --> 00:18:56.906 A:middle
必须对 acceptsFirstResponder 方法

00:18:56.906 --> 00:18:58.426 A:middle
返回真

00:18:58.876 --> 00:18:59.736 A:middle
如果你在这种情况下结束

00:18:59.736 --> 00:19:00.946 A:middle
很容易让你的第一响应器

00:18:59.736 --> 00:19:00.946 A:middle
很容易让你的第一响应器

00:19:00.946 --> 00:19:02.456 A:middle
去继承 NSView 或第一响应器

00:19:02.456 --> 00:19:03.926 A:middle
将要接受的内容并

00:19:03.926 --> 00:19:06.236 A:middle
做出一个锚定在

00:19:06.236 --> 00:19:07.506 A:middle
第一响应器里的

00:19:07.506 --> 00:19:08.316 A:middle
有效的响应器链

00:19:09.396 --> 00:19:10.956 A:middle
让我们回到

00:19:10.956 --> 00:19:11.736 A:middle
如何在这里处理多个

00:19:11.736 --> 00:19:13.006 A:middle
NSTouchBar 实例

00:19:13.326 --> 00:19:15.296 A:middle
最简单的是记住

00:19:15.296 --> 00:19:17.196 A:middle
如果一个 NSTouchBar

00:19:17.226 --> 00:19:18.856 A:middle
距离第一响应器

00:19:18.856 --> 00:19:20.026 A:middle
很近 也就是离

00:19:20.026 --> 00:19:22.506 A:middle
键盘输入很近 它的 Touch Bar

00:19:22.506 --> 00:19:23.556 A:middle
将会胜利并

00:19:23.556 --> 00:19:24.126 A:middle
取代其他

00:19:24.726 --> 00:19:26.286 A:middle
回忆一下我之前提到的

00:19:26.286 --> 00:19:27.486 A:middle
AVKit 和其他系统框架

00:19:27.486 --> 00:19:28.646 A:middle
能提供支持

00:19:28.646 --> 00:19:29.876 A:middle
你可能

00:19:29.876 --> 00:19:30.886 A:middle
会认为它们

00:19:30.886 --> 00:19:32.096 A:middle
会为距离第一响应器

00:19:32.096 --> 00:19:33.006 A:middle
更近的 NS View

00:19:33.006 --> 00:19:34.576 A:middle
提供支持

00:19:34.946 --> 00:19:36.266 A:middle
而不是为你的窗口控制器或者

00:19:36.266 --> 00:19:37.556 A:middle
应用程序委托

00:19:38.256 --> 00:19:39.996 A:middle
所以我们需要能

00:19:40.276 --> 00:19:41.556 A:middle
在多个 NSTouchBar 实例中分享

00:19:41.556 --> 00:19:43.096 A:middle
Touch Bar 设备的方法

00:19:43.096 --> 00:19:44.266 A:middle
我们有这样的方法

00:19:44.756 --> 00:19:45.856 A:middle
那就是用

00:19:45.856 --> 00:19:47.136 A:middle
一个叫做 otherItemsProxy 的

00:19:47.356 --> 00:19:48.646 A:middle
特殊的项标识符来完善它

00:19:49.426 --> 00:19:50.586 A:middle
我称它为特殊项

00:19:50.586 --> 00:19:52.116 A:middle
标识符因为

00:19:52.116 --> 00:19:53.176 A:middle
你不用为它创建

00:19:53.176 --> 00:19:53.406 A:middle
任何项

00:19:53.406 --> 00:19:54.316 A:middle
你不用将它放到你的

00:19:54.316 --> 00:19:55.786 A:middle
模板项组里

00:19:55.786 --> 00:19:57.596 A:middle
你不必在委托里

00:19:57.746 --> 00:19:58.866 A:middle
操作标识符 然后为标识符

00:19:58.866 --> 00:19:59.936 A:middle
创建项

00:20:01.166 --> 00:20:02.146 A:middle
但当你将代理服务器

00:20:02.146 --> 00:20:03.956 A:middle
添加到

00:20:03.956 --> 00:20:05.196 A:middle
你的默认项标识符组里

00:20:05.246 --> 00:20:07.926 A:middle
当 AppKit 从响应器链里

00:20:08.006 --> 00:20:09.226 A:middle
收到 NSTouchBar 时

00:20:09.226 --> 00:20:10.636 A:middle
它将用

00:20:10.636 --> 00:20:12.566 A:middle
距离第一响应器

00:20:12.566 --> 00:20:14.186 A:middle
更近的项来代替

00:20:14.186 --> 00:20:15.286 A:middle
otherItemsProxy

00:20:16.406 --> 00:20:17.716 A:middle
我们来用实际操作来了解

00:20:17.716 --> 00:20:17.986 A:middle
一下

00:20:17.986 --> 00:20:18.976 A:middle
这里是一个“邮件”的例子

00:20:19.396 --> 00:20:20.556 A:middle
我的光标

00:20:20.556 --> 00:20:21.346 A:middle
在收件人栏

00:20:21.346 --> 00:20:22.796 A:middle
收件人栏可以

00:20:22.796 --> 00:20:24.386 A:middle
为我要向谁发送邮件

00:20:24.386 --> 00:20:25.446 A:middle
提供建议

00:20:25.786 --> 00:20:27.716 A:middle
我在 Touch Bar

00:20:27.716 --> 00:20:29.016 A:middle
应用部分的左侧

00:20:29.016 --> 00:20:29.896 A:middle
有一个发送按钮

00:20:30.766 --> 00:20:32.026 A:middle
如果我将我的光标

00:20:32.026 --> 00:20:34.886 A:middle
移到窗口中的

00:20:34.886 --> 00:20:36.416 A:middle
组合视图 我将有

00:20:36.416 --> 00:20:37.346 A:middle
很多文本排版控件

00:20:37.346 --> 00:20:38.446 A:middle
和一个表情符号选择器

00:20:38.486 --> 00:20:39.576 A:middle
但是我仍然有那个发送

00:20:39.576 --> 00:20:39.856 A:middle
按钮

00:20:40.596 --> 00:20:42.246 A:middle
这个过程分解开来就是

00:20:42.246 --> 00:20:44.726 A:middle
组织邮件的窗口控制器

00:20:44.726 --> 00:20:46.806 A:middle
有一个带有发送键

00:20:46.806 --> 00:20:47.776 A:middle
和 otherItemsProxy 的

00:20:47.776 --> 00:20:48.796 A:middle
Touch Bar

00:20:50.036 --> 00:20:51.566 A:middle
然后收件人栏

00:20:51.626 --> 00:20:52.696 A:middle
会提供候选人

00:20:52.696 --> 00:20:53.936 A:middle
收件人域和第一响应器

00:20:53.936 --> 00:20:54.816 A:middle
距离很近

00:20:54.816 --> 00:20:55.916 A:middle
所以它会先

00:20:55.916 --> 00:20:57.416 A:middle
执行

00:20:57.766 --> 00:20:58.776 A:middle
但是窗口控制器

00:20:58.776 --> 00:21:00.506 A:middle
包括 otherItemsProxy

00:20:58.776 --> 00:21:00.506 A:middle
包括 otherItemsProxy

00:21:00.816 --> 00:21:01.926 A:middle
意味着我们可以合并这两个

00:21:01.926 --> 00:21:03.606 A:middle
Touch Bar

00:21:03.726 --> 00:21:05.146 A:middle
同样的 对于组合视图

00:21:05.146 --> 00:21:06.956 A:middle
窗口控制器

00:21:06.956 --> 00:21:08.446 A:middle
是完全相同的实例

00:21:09.076 --> 00:21:11.276 A:middle
只不过响应器链锚定在

00:21:11.276 --> 00:21:12.436 A:middle
第一响应器

00:21:12.706 --> 00:21:15.026 A:middle
包括在窗口控制器之前

00:21:15.316 --> 00:21:16.386 A:middle
的组合视图

00:21:17.176 --> 00:21:18.556 A:middle
需要提到的是

00:21:18.626 --> 00:21:19.486 A:middle
这和自定义功能

00:21:19.486 --> 00:21:20.936 A:middle
是完全兼容的

00:21:20.986 --> 00:21:22.636 A:middle
就像你期待的那样

00:21:22.756 --> 00:21:24.106 A:middle
我们用 otherItemsProxy

00:21:24.476 --> 00:21:25.346 A:middle
来创建项目的默认设置

00:21:25.676 --> 00:21:26.786 A:middle
我们从合适的

00:21:26.786 --> 00:21:28.066 A:middle
Touch Bar 里聚合

00:21:28.066 --> 00:21:28.646 A:middle
被允许项

00:21:28.946 --> 00:21:30.336 A:middle
所以我们看到 我们可以

00:21:30.336 --> 00:21:31.436 A:middle
在邮件里自定义发送键

00:21:31.436 --> 00:21:32.296 A:middle
尽管是用

00:21:32.296 --> 00:21:34.176 A:middle
不同的响应器

00:21:34.176 --> 00:21:35.096 A:middle
而不是排版控件

00:21:36.966 --> 00:21:39.406 A:middle
你可能会想 诶

00:21:39.406 --> 00:21:40.636 A:middle
otherItemsProxy 听起来

00:21:40.636 --> 00:21:41.926 A:middle
是个很适合

00:21:41.926 --> 00:21:42.926 A:middle
Touch Bar 的东西

00:21:42.926 --> 00:21:44.036 A:middle
你可能是对的 但是

00:21:44.036 --> 00:21:45.216 A:middle
有些时候

00:21:45.216 --> 00:21:46.146 A:middle
你应该忽略它

00:21:46.526 --> 00:21:48.346 A:middle
我们回到邮件

00:21:48.346 --> 00:21:49.796 A:middle
关掉所有窗口

00:21:49.796 --> 00:21:50.846 A:middle
我们会看到有

00:21:50.846 --> 00:21:52.006 A:middle
一个新的视图窗口出现在

00:21:52.006 --> 00:21:52.476 A:middle
Touch Bar 里

00:21:53.076 --> 00:21:54.336 A:middle
这是由应用提供的

00:21:54.336 --> 00:21:56.006 A:middle
但它省略了

00:21:56.006 --> 00:21:56.896 A:middle
otherItemsProxy

00:21:57.296 --> 00:21:59.216 A:middle
当我们调出

00:21:59.216 --> 00:22:00.526 A:middle
一个有 Touch Bar 的窗口

00:21:59.216 --> 00:22:00.526 A:middle
一个有 Touch Bar 的窗口

00:22:00.526 --> 00:22:02.046 A:middle
它会距离

00:22:02.046 --> 00:22:03.336 A:middle
第一响应器近

00:22:03.336 --> 00:22:05.336 A:middle
Touch Bar 里没有

00:22:05.336 --> 00:22:06.846 A:middle
otherItemsProxy 意味着

00:22:06.846 --> 00:22:07.996 A:middle
它被完全替代了

00:22:09.446 --> 00:22:10.776 A:middle
另一种我想讲到的

00:22:10.776 --> 00:22:11.946 A:middle
特殊项标识符

00:22:11.946 --> 00:22:13.176 A:middle
则是间距

00:22:13.606 --> 00:22:15.236 A:middle
这里 我们已经制作了

00:22:15.236 --> 00:22:16.526 A:middle
一个仿制的 Touch Bar

00:22:16.526 --> 00:22:17.956 A:middle
我们有一个鲨鱼和

00:22:18.456 --> 00:22:20.546 A:middle
一个天使鱼项

00:22:20.546 --> 00:22:21.546 A:middle
天使鱼可能不想

00:22:21.546 --> 00:22:22.456 A:middle
太靠近鲨鱼

00:22:22.456 --> 00:22:24.016 A:middle
谢天谢地 鲨鱼面朝

00:22:24.016 --> 00:22:25.046 A:middle
错误的方向

00:22:25.046 --> 00:22:26.356 A:middle
所以鱼可能还不在菜单里

00:22:26.966 --> 00:22:28.446 A:middle
但是我们能给

00:22:28.446 --> 00:22:29.366 A:middle
天使鱼一点呼吸空间

00:22:29.366 --> 00:22:30.716 A:middle
我们可以在

00:22:30.716 --> 00:22:32.006 A:middle
鲨鱼和天使鱼之间

00:22:32.006 --> 00:22:33.666 A:middle
的默认项标识符组里

00:22:33.666 --> 00:22:35.166 A:middle
加入一个

00:22:35.166 --> 00:22:36.246 A:middle
固定间距的

00:22:36.246 --> 00:22:36.866 A:middle
小项标识符

00:22:37.296 --> 00:22:38.646 A:middle
我们不一定用小的

00:22:38.646 --> 00:22:40.236 A:middle
我们也可以用大的

00:22:40.236 --> 00:22:41.066 A:middle
来给它更多

00:22:41.066 --> 00:22:42.126 A:middle
间距

00:22:42.206 --> 00:22:43.786 A:middle
这比对你的间距

00:22:43.786 --> 00:22:44.996 A:middle
进行硬编码有用

00:22:44.996 --> 00:22:46.206 A:middle
因为

00:22:46.206 --> 00:22:47.626 A:middle
我们系统定义的值

00:22:47.626 --> 00:22:48.506 A:middle
会随着一次次发布而改变

00:22:48.506 --> 00:22:50.506 A:middle
这会使你的 App 和

00:22:50.506 --> 00:22:51.836 A:middle
系统里别的 App 看起来

00:22:51.836 --> 00:22:52.356 A:middle
非常相似

00:22:52.986 --> 00:22:54.406 A:middle
不过我们不需要用

00:22:54.406 --> 00:22:55.356 A:middle
固定间距来阻止它

00:22:55.356 --> 00:22:57.096 A:middle
我们同样有自动调整间距的标识符

00:22:57.246 --> 00:22:58.286 A:middle
有趣的是 自动调整间距

00:22:58.286 --> 00:22:59.256 A:middle
会将

00:22:59.256 --> 00:23:00.786 A:middle
邻近的项

00:22:59.256 --> 00:23:00.786 A:middle
邻近的项

00:23:00.786 --> 00:23:02.326 A:middle
能推多远就

00:23:02.326 --> 00:23:03.956 A:middle
推多远

00:23:03.956 --> 00:23:05.676 A:middle
在这种情况下

00:23:05.676 --> 00:23:06.916 A:middle
天使鱼可能觉得自动调整

00:23:06.916 --> 00:23:08.016 A:middle
它和鲨鱼之间的间距更

00:23:08.016 --> 00:23:08.526 A:middle
舒服一些

00:23:09.246 --> 00:23:11.006 A:middle
你可能认为你可以

00:23:11.006 --> 00:23:12.656 A:middle
将自动调整间距放在项的两侧

00:23:12.656 --> 00:23:13.606 A:middle
使项目居中

00:23:13.906 --> 00:23:15.286 A:middle
你有充分的理由

00:23:15.286 --> 00:23:15.606 A:middle
这样想

00:23:16.126 --> 00:23:17.206 A:middle
如果要这样做

00:23:17.376 --> 00:23:18.446 A:middle
比如我们这样

00:23:18.446 --> 00:23:19.476 A:middle
处理一下紫色圆圈

00:23:19.616 --> 00:23:21.496 A:middle
我们在它的左右两边

00:23:21.496 --> 00:23:22.396 A:middle
放置可调整的间距

00:23:22.766 --> 00:23:23.886 A:middle
你可能会使圆圈在

00:23:23.886 --> 00:23:24.986 A:middle
Touch Bar 应用程序区里居中

00:23:24.986 --> 00:23:26.276 A:middle
这可能是你

00:23:26.276 --> 00:23:26.966 A:middle
想做的

00:23:27.286 --> 00:23:28.416 A:middle
但是你可能同样

00:23:28.416 --> 00:23:29.626 A:middle
希望使这个项在真正的设备上

00:23:29.626 --> 00:23:31.286 A:middle
也居中 但并它不在

00:23:31.286 --> 00:23:31.646 A:middle
那里

00:23:31.646 --> 00:23:34.566 A:middle
我们稍微有些偏右了

00:23:34.566 --> 00:23:36.136 A:middle
所以我们可以通过用

00:23:36.136 --> 00:23:37.556 A:middle
一个叫主要项标识符的

00:23:37.556 --> 00:23:38.726 A:middle
NSTouchBar 属性来解决它

00:23:39.686 --> 00:23:41.376 A:middle
我们可以将

00:23:41.376 --> 00:23:41.816 A:middle
Touch Bar 的

00:23:41.816 --> 00:23:43.116 A:middle
主要项标识符设置成

00:23:43.116 --> 00:23:44.676 A:middle
任何可视项的标识符

00:23:45.076 --> 00:23:47.106 A:middle
它就会将此项

00:23:47.106 --> 00:23:48.656 A:middle
置于设备

00:23:48.656 --> 00:23:49.656 A:middle
的中间位置

00:23:50.186 --> 00:23:51.896 A:middle
当我们看这个例子时

00:23:51.896 --> 00:23:53.456 A:middle
这里所有的代码都是

00:23:53.456 --> 00:23:54.176 A:middle
我们在前一张幻灯片里看到过的

00:23:54.176 --> 00:23:55.986 A:middle
除了我们被设置过的

00:23:55.986 --> 00:23:56.686 A:middle
主要项标识符的

00:23:56.686 --> 00:23:57.776 A:middle
最后一行

00:23:58.186 --> 00:23:59.306 A:middle
通过设置鲨鱼标识符

00:23:59.306 --> 00:24:01.016 A:middle
我们将鲨鱼放到

00:23:59.306 --> 00:24:01.016 A:middle
我们将鲨鱼放到

00:24:01.016 --> 00:24:02.296 A:middle
Touch Bar 的中间

00:24:02.296 --> 00:24:03.966 A:middle
然后就像我们在别处做的一样

00:24:03.966 --> 00:24:05.256 A:middle
将项从左到右

00:24:05.256 --> 00:24:05.946 A:middle
摆放

00:24:06.506 --> 00:24:07.456 A:middle
如果我们要改用海龟

00:24:07.456 --> 00:24:09.356 A:middle
鲨鱼像之前一样

00:24:09.356 --> 00:24:10.296 A:middle
被放在左边

00:24:10.296 --> 00:24:11.376 A:middle
然后海龟会被

00:24:11.376 --> 00:24:12.266 A:middle
放在设备的中间

00:24:13.076 --> 00:24:14.356 A:middle
这在自动设置间距和

00:24:14.356 --> 00:24:16.056 A:middle
某些其他情况

00:24:16.056 --> 00:24:16.346 A:middle
表现得很好

00:24:16.346 --> 00:24:17.246 A:middle
所以你可以用它来制作

00:24:17.246 --> 00:24:17.796 A:middle
一些小的设备

00:24:17.976 --> 00:24:19.076 A:middle
还有其他种类的

00:24:19.236 --> 00:24:20.796 A:middle
能修改主要项标识符

00:24:21.136 --> 00:24:22.656 A:middle
行为的 NSTouchBar

00:24:22.656 --> 00:24:23.816 A:middle
子项

00:24:24.156 --> 00:24:25.576 A:middle
接下来 John 将为大家

00:24:25.896 --> 00:24:27.846 A:middle
深入地讲解

00:24:27.846 --> 00:24:29.626 A:middle
NSTouchBar 项

00:24:30.396 --> 00:24:31.336 A:middle
欢迎 John Tegtmeyer

00:24:32.516 --> 00:24:35.856 A:middle
[掌声]

00:24:36.356 --> 00:24:38.186 A:middle
Chris 向我们介绍了

00:24:38.186 --> 00:24:39.866 A:middle
NSTouchBar API 以及它如何

00:24:39.866 --> 00:24:41.726 A:middle
通过连接响应器链

00:24:41.726 --> 00:24:43.186 A:middle
让我们为用户提供

00:24:43.186 --> 00:24:44.806 A:middle
上下文敏感控件

00:24:45.316 --> 00:24:46.546 A:middle
他也提到了

00:24:46.586 --> 00:24:48.196 A:middle
NSTouchBar 项目对象

00:24:48.196 --> 00:24:50.026 A:middle
是环绕 Touch Bar 里所有

00:24:50.026 --> 00:24:50.626 A:middle
视图的

00:24:51.346 --> 00:24:52.486 A:middle
现在 AppKit

00:24:52.486 --> 00:24:54.096 A:middle
提供项的许多子项

00:24:54.096 --> 00:24:54.956 A:middle
他们都能提供一些

00:24:54.956 --> 00:24:56.536 A:middle
非常特殊的 很酷的功能

00:24:56.796 --> 00:24:57.776 A:middle
现在我来为大家深入的

00:24:57.776 --> 00:24:58.986 A:middle
讲解一下这些项

00:24:59.686 --> 00:25:01.996 A:middle
NSTouchBar 项是我们

00:24:59.686 --> 00:25:01.996 A:middle
NSTouchBar 项是我们

00:25:01.996 --> 00:25:02.946 A:middle
今天谈论的所有东西的

00:25:02.946 --> 00:25:03.426 A:middle
基本项

00:25:03.826 --> 00:25:04.976 A:middle
这代表它的设置

00:25:04.976 --> 00:25:05.996 A:middle
会被子项所

00:25:05.996 --> 00:25:06.736 A:middle
继承

00:25:07.256 --> 00:25:08.266 A:middle
所有 Touch Bar 项都有的

00:25:08.266 --> 00:25:09.596 A:middle
东西就是唯一

00:25:09.596 --> 00:25:10.346 A:middle
标识符

00:25:11.116 --> 00:25:13.806 A:middle
这就是 NSTouchBar 用来

00:25:13.806 --> 00:25:14.696 A:middle
通过模板项数组

00:25:14.696 --> 00:25:15.956 A:middle
或委托来查找项的

00:25:15.956 --> 00:25:17.896 A:middle
东西

00:25:18.666 --> 00:25:20.216 A:middle
项也有视图或者视图

00:25:20.216 --> 00:25:20.716 A:middle
控制器

00:25:20.996 --> 00:25:21.736 A:middle
这也是实际上会

00:25:21.736 --> 00:25:23.056 A:middle
展示给用户的东西

00:25:23.316 --> 00:25:24.246 A:middle
如果你在使用视图

00:25:24.246 --> 00:25:25.236 A:middle
控制器 这是延迟

00:25:25.236 --> 00:25:27.336 A:middle
加载视图的

00:25:27.336 --> 00:25:27.836 A:middle
好机会

00:25:28.736 --> 00:25:30.066 A:middle
我们同样有自定义

00:25:30.066 --> 00:25:30.436 A:middle
标签

00:25:30.436 --> 00:25:31.736 A:middle
这是显示在

00:25:31.736 --> 00:25:33.146 A:middle
自定义 UI 上的

00:25:33.146 --> 00:25:33.626 A:middle
字符串

00:25:33.916 --> 00:25:35.156 A:middle
它定义了你的控件能

00:25:35.156 --> 00:25:35.926 A:middle
做什么

00:25:36.796 --> 00:25:38.396 A:middle
我希望你们注意到了

00:25:38.396 --> 00:25:39.466 A:middle
在这里我们没有的是

00:25:39.466 --> 00:25:41.246 A:middle
明确的最小或最大的

00:25:41.276 --> 00:25:41.736 A:middle
属性

00:25:42.276 --> 00:25:43.756 A:middle
这是因为 不同于

00:25:43.756 --> 00:25:46.016 A:middle
工具栏项确实具有这些

00:25:46.016 --> 00:25:47.926 A:middle
明确的属性

00:25:47.926 --> 00:25:49.336 A:middle
NSTouchBarItem 的度量

00:25:49.336 --> 00:25:50.366 A:middle
是有限制的

00:25:50.776 --> 00:25:51.956 A:middle
这意味着 如果你

00:25:51.956 --> 00:25:53.666 A:middle
使用一个有 intrinsicContentSize 的

00:25:53.666 --> 00:25:54.956 A:middle
类似 NSButton 的东西

00:25:54.956 --> 00:25:56.526 A:middle
它将自动调整大小

00:25:56.526 --> 00:25:58.166 A:middle
以适应标题和

00:25:58.166 --> 00:25:58.626 A:middle
图像

00:25:59.196 --> 00:26:00.356 A:middle
你也可以选择使用

00:25:59.196 --> 00:26:00.356 A:middle
你也可以选择使用

00:26:00.356 --> 00:26:01.796 A:middle
不等式约束去设置

00:26:01.846 --> 00:26:03.456 A:middle
最大及最小尺寸

00:26:03.836 --> 00:26:04.996 A:middle
AppKit 将基于

00:26:04.996 --> 00:26:06.726 A:middle
应用程序区可用的距离

00:26:06.726 --> 00:26:07.996 A:middle
来自动调整视图

00:26:07.996 --> 00:26:09.026 A:middle
大小

00:26:09.286 --> 00:26:10.596 A:middle
你可以在今天晚些时候的

00:26:10.596 --> 00:26:11.986 A:middle
“Advanced Touch Bar（Touch Bar 进阶）”演讲上听到

00:26:11.986 --> 00:26:13.636 A:middle
更多关于项目大小的

00:26:15.256 --> 00:26:15.386 A:middle
内容

00:26:15.576 --> 00:26:17.496 A:middle
现在 就像我之前提到的一样

00:26:17.606 --> 00:26:20.156 A:middle
AppKit 提供了很多的

00:26:20.156 --> 00:26:20.646 A:middle
项子类

00:26:21.276 --> 00:26:22.296 A:middle
我们将逐个进行

00:26:22.296 --> 00:26:22.576 A:middle
讲解

00:26:22.576 --> 00:26:23.486 A:middle
我们将谈到

00:26:23.486 --> 00:26:25.326 A:middle
Touch Bar 自定义项 弹窗

00:26:25.326 --> 00:26:27.436 A:middle
滑动条 组项 以及在最后会提到的

00:26:27.436 --> 00:26:28.736 A:middle
几个额外的话题

00:26:28.976 --> 00:26:30.306 A:middle
好的 让我们从 Touch Bar 的

00:26:30.306 --> 00:26:31.306 A:middle
自定义项开始

00:26:31.886 --> 00:26:34.256 A:middle
现在自定义项为我们

00:26:34.316 --> 00:26:35.666 A:middle
刚才提到的所有基类上

00:26:35.666 --> 00:26:36.566 A:middle
的东西提供了重写

00:26:36.566 --> 00:26:37.236 A:middle
属性

00:26:37.346 --> 00:26:38.526 A:middle
这意味着你可以简单地

00:26:38.526 --> 00:26:39.816 A:middle
对视图控制器的视图进行设置

00:26:39.816 --> 00:26:40.916 A:middle
而不是子类化你的

00:26:40.916 --> 00:26:41.286 A:middle
项

00:26:41.886 --> 00:26:43.066 A:middle
如果你想展示一个按钮

00:26:43.066 --> 00:26:44.196 A:middle
或者一个分段选择控件

00:26:44.196 --> 00:26:45.356 A:middle
或者任何你熟悉的

00:26:45.356 --> 00:26:46.376 A:middle
AppKit 或者

00:26:47.096 --> 00:26:48.426 A:middle
自定义容器视图

00:26:48.426 --> 00:26:49.876 A:middle
你都可以使用

00:26:49.876 --> 00:26:50.736 A:middle
它

00:26:52.296 --> 00:26:53.566 A:middle
这也是使用 10.12 中

00:26:53.566 --> 00:26:54.716 A:middle
引入的便利

00:26:54.716 --> 00:26:56.016 A:middle
构造函数的

00:26:56.016 --> 00:26:57.126 A:middle
好机会

00:26:57.596 --> 00:26:58.226 A:middle
让我们来看看

00:26:59.206 --> 00:27:00.556 A:middle
在这个例子里

00:26:59.206 --> 00:27:00.556 A:middle
在这个例子里

00:27:00.556 --> 00:27:01.696 A:middle
我们将为 Touch Bar 创建一个简单的

00:27:01.696 --> 00:27:01.916 A:middle
按钮

00:27:02.356 --> 00:27:04.376 A:middle
我们通过创建

00:27:04.376 --> 00:27:05.506 A:middle
自定义 Touch Bar 项以

00:27:05.506 --> 00:27:07.026 A:middle
提供唯一标识符来实现

00:27:07.026 --> 00:27:08.486 A:middle
我们将会用之前看到的

00:27:08.486 --> 00:27:10.166 A:middle
title: target: action: 格式构造函数

00:27:10.166 --> 00:27:11.636 A:middle
来将项的视图

00:27:11.636 --> 00:27:13.006 A:middle
设置为 NSButton

00:27:13.696 --> 00:27:15.156 A:middle
就像 Chris 提到的

00:27:15.156 --> 00:27:16.616 A:middle
这将把正确的字体和

00:27:16.616 --> 00:27:17.606 A:middle
正确的外观赋值给这个

00:27:17.606 --> 00:27:17.886 A:middle
按钮

00:27:17.886 --> 00:27:18.966 A:middle
我们用两行简单的代码

00:27:18.966 --> 00:27:20.256 A:middle
为 Touch Bar 创建了

00:27:20.256 --> 00:27:21.736 A:middle
一个漂亮的按钮

00:27:22.656 --> 00:27:23.846 A:middle
这对更加复杂的控件也

00:27:23.846 --> 00:27:24.936 A:middle
适用

00:27:25.336 --> 00:27:26.826 A:middle
在这里 这是一个

00:27:26.826 --> 00:27:27.806 A:middle
分段控制器

00:27:28.096 --> 00:27:29.356 A:middle
分段控制器同时有一个

00:27:29.356 --> 00:27:30.416 A:middle
便利构造器

00:27:30.766 --> 00:27:32.306 A:middle
同样用两行代码

00:27:32.306 --> 00:27:34.376 A:middle
我为了看起来更清晰所以将它间隔开

00:27:34.376 --> 00:27:35.416 A:middle
为 Touch Bar 创建了一个

00:27:35.416 --> 00:27:36.776 A:middle
有正确外观

00:27:36.776 --> 00:27:39.656 A:middle
和字体的美观

00:27:39.656 --> 00:27:39.916 A:middle
控件

00:27:40.056 --> 00:27:41.636 A:middle
下面 我们来谈谈弹出框

00:27:42.386 --> 00:27:43.596 A:middle
弹出框项很酷

00:27:43.596 --> 00:27:44.756 A:middle
因为它能在用户要求的时候

00:27:44.806 --> 00:27:46.776 A:middle
为用户提供

00:27:46.776 --> 00:27:49.166 A:middle
更多内容

00:27:49.606 --> 00:27:50.916 A:middle
弹出框分两个部分

00:27:51.496 --> 00:27:52.396 A:middle
第一部分是折叠形式

00:27:52.396 --> 00:27:53.486 A:middle
是当弹出框关闭时

00:27:53.486 --> 00:27:55.066 A:middle
展示给用户的

00:27:55.066 --> 00:27:56.226 A:middle
视图

00:27:56.806 --> 00:27:57.876 A:middle
第二部分是

00:27:57.876 --> 00:27:59.266 A:middle
弹出框的 NSTouchBar

00:27:59.266 --> 00:28:00.166 A:middle
当弹出框打开的时候

00:27:59.266 --> 00:28:00.166 A:middle
当弹出框打开的时候

00:28:00.166 --> 00:28:01.316 A:middle
它会接管

00:28:01.316 --> 00:28:02.276 A:middle
应用程序区

00:28:02.276 --> 00:28:03.646 A:middle
这让你能够使用

00:28:03.646 --> 00:28:03.856 A:middle
principalItemIdentifier

00:28:03.856 --> 00:28:05.916 A:middle
甚至让你能进行

00:28:05.916 --> 00:28:07.076 A:middle
自定义

00:28:08.386 --> 00:28:09.576 A:middle
让我们多谈谈

00:28:09.576 --> 00:28:10.366 A:middle
折叠形式

00:28:11.826 --> 00:28:13.056 A:middle
AppKit 将给你提供一个默认值

00:28:13.056 --> 00:28:14.816 A:middle
你能通过折叠形式的

00:28:14.816 --> 00:28:15.946 A:middle
图像或者标签

00:28:15.946 --> 00:28:17.826 A:middle
属性来进行

00:28:17.826 --> 00:28:18.806 A:middle
自定义

00:28:19.116 --> 00:28:20.176 A:middle
你可以在弹出框队列

00:28:20.176 --> 00:28:21.596 A:middle
和排版控件里

00:28:21.596 --> 00:28:22.766 A:middle
看到这种

00:28:22.766 --> 00:28:23.326 A:middle
例子

00:28:23.976 --> 00:28:25.686 A:middle
你也可以选择

00:28:25.686 --> 00:28:26.826 A:middle
使用更加自定义的东西

00:28:27.206 --> 00:28:28.896 A:middle
“邮件”选择使用分段

00:28:28.896 --> 00:28:29.406 A:middle
控制器

00:28:29.406 --> 00:28:30.826 A:middle
如果你点击这个控件的主要部分

00:28:30.826 --> 00:28:31.656 A:middle
它马上将

00:28:31.656 --> 00:28:33.516 A:middle
消息移动到建议的

00:28:33.606 --> 00:28:35.696 A:middle
邮箱里

00:28:36.446 --> 00:28:37.546 A:middle
但是如果你点击箭头 它

00:28:37.546 --> 00:28:38.556 A:middle
将出现一个有

00:28:38.556 --> 00:28:39.716 A:middle
额外建议的弹出框

00:28:40.336 --> 00:28:41.566 A:middle
这其实非常容易做到

00:28:41.566 --> 00:28:43.756 A:middle
你只需要给折叠形式

00:28:43.756 --> 00:28:44.846 A:middle
提供你的视图

00:28:44.846 --> 00:28:46.536 A:middle
然后使用显示弹出框

00:28:46.536 --> 00:28:47.746 A:middle
和隐藏弹出框

00:28:47.746 --> 00:28:48.856 A:middle
的方法

00:28:50.066 --> 00:28:51.446 A:middle
弹出框也有两个

00:28:51.446 --> 00:28:52.406 A:middle
交互模型

00:28:52.746 --> 00:28:53.826 A:middle
第一个是触摸并显示

00:28:54.636 --> 00:28:55.896 A:middle
当用户点击折叠形式时

00:28:55.936 --> 00:28:58.176 A:middle
会用到这个

00:28:58.476 --> 00:29:00.776 A:middle
弹出框被打开

00:28:58.476 --> 00:29:00.776 A:middle
弹出框被打开

00:29:00.776 --> 00:29:02.456 A:middle
它的粘性让你能做出

00:29:02.766 --> 00:29:04.136 A:middle
多种选择

00:29:04.766 --> 00:29:05.956 A:middle
它只在用户点击关闭

00:29:05.956 --> 00:29:06.946 A:middle
按钮的时候才会关闭

00:29:07.776 --> 00:29:08.996 A:middle
第二个交互模型是

00:29:08.996 --> 00:29:09.706 A:middle
按住并保持

00:29:10.046 --> 00:29:11.126 A:middle
它在用户按住并保持

00:29:11.126 --> 00:29:12.356 A:middle
折叠形式的时候

00:29:12.356 --> 00:29:13.136 A:middle
会用到

00:29:13.436 --> 00:29:14.826 A:middle
弹出框可直接通过

00:29:14.826 --> 00:29:16.246 A:middle
用户的手指打开

00:29:16.536 --> 00:29:17.736 A:middle
并立即开始追踪

00:29:17.736 --> 00:29:18.286 A:middle
他们的输入

00:29:18.696 --> 00:29:19.816 A:middle
当用户做出选择

00:29:19.816 --> 00:29:21.186 A:middle
并抬起手指时

00:29:21.186 --> 00:29:21.596 A:middle
它就关闭了

00:29:21.906 --> 00:29:23.646 A:middle
你可能会注意到

00:29:23.646 --> 00:29:25.226 A:middle
在这两个例子里

00:29:25.226 --> 00:29:26.006 A:middle
弹出框其实显示的是

00:29:26.006 --> 00:29:26.476 A:middle
不同的内容

00:29:27.316 --> 00:29:29.026 A:middle
触摸并显示展示了多个控件

00:29:29.026 --> 00:29:30.256 A:middle
而按住并保持

00:29:30.256 --> 00:29:31.656 A:middle
则展示了单个的分段

00:29:31.656 --> 00:29:32.036 A:middle
控制器

00:29:32.356 --> 00:29:33.196 A:middle
这是因为触摸并显示

00:29:33.196 --> 00:29:34.596 A:middle
从始至终都在追踪

00:29:34.596 --> 00:29:35.776 A:middle
用户的手指

00:29:36.076 --> 00:29:37.446 A:middle
所以 我们最好将

00:29:37.446 --> 00:29:39.216 A:middle
这种交互留给单一的

00:29:39.216 --> 00:29:39.736 A:middle
控件

00:29:39.916 --> 00:29:40.886 A:middle
在这里可以是一个分段

00:29:40.886 --> 00:29:42.036 A:middle
控制器 或者是一个

00:29:42.036 --> 00:29:42.886 A:middle
滑块

00:29:43.996 --> 00:29:46.286 A:middle
这很容易实现

00:29:46.516 --> 00:29:47.566 A:middle
原因是弹出框其实有两个

00:29:47.566 --> 00:29:49.176 A:middle
不同的 NSTouchBar 属性

00:29:49.456 --> 00:29:50.546 A:middle
一个是给触摸并显示的弹出框

00:29:50.546 --> 00:29:51.926 A:middle
另一个是给

00:29:51.926 --> 00:29:52.616 A:middle
按下并保留的

00:29:53.746 --> 00:29:55.786 A:middle
如果你不为按下并保留模型

00:29:55.786 --> 00:29:57.176 A:middle
提供一个 NSTouchBar

00:29:57.176 --> 00:29:58.346 A:middle
按下并保留模型

00:29:58.346 --> 00:29:58.976 A:middle
就不会被启用

00:29:59.636 --> 00:30:01.616 A:middle
这两个属性同时提供

00:29:59.636 --> 00:30:01.616 A:middle
这两个属性同时提供

00:30:01.616 --> 00:30:03.146 A:middle
相同的 NSTouchBar

00:30:03.146 --> 00:30:03.986 A:middle
并且工作的很好

00:30:03.986 --> 00:30:04.886 A:middle
是有可能的

00:30:05.266 --> 00:30:06.366 A:middle
但是就像我提到的 按下并保留模型

00:30:06.366 --> 00:30:08.226 A:middle
最好是留给

00:30:08.456 --> 00:30:10.146 A:middle
类似分段控制器或者

00:30:10.146 --> 00:30:12.676 A:middle
滑动模块这样的

00:30:12.676 --> 00:30:12.946 A:middle
单一项

00:30:14.416 --> 00:30:15.826 A:middle
我们来说说

00:30:15.826 --> 00:30:16.536 A:middle
滑动模块

00:30:17.246 --> 00:30:18.106 A:middle
现在你可能在想

00:30:18.106 --> 00:30:19.046 A:middle
滑动模块和有 NSSlider 作为

00:30:19.046 --> 00:30:20.416 A:middle
视图的自定义

00:30:20.466 --> 00:30:21.986 A:middle
Touch Bar 有什么

00:30:21.986 --> 00:30:22.296 A:middle
区别

00:30:22.866 --> 00:30:23.936 A:middle
我来为大家解释

00:30:24.916 --> 00:30:25.946 A:middle
滑动模块有几个不同的

00:30:25.946 --> 00:30:26.576 A:middle
地方

00:30:26.676 --> 00:30:27.976 A:middle
首先 我们有滑块本身

00:30:28.506 --> 00:30:29.646 A:middle
其次 我们有这些新的值的配件

00:30:29.646 --> 00:30:30.996 A:middle
它们是一些

00:30:30.996 --> 00:30:32.176 A:middle
很难处理的图片

00:30:32.176 --> 00:30:34.026 A:middle
你可以点击它们以

00:30:34.026 --> 00:30:35.256 A:middle
增加或减少你滑块

00:30:35.256 --> 00:30:35.756 A:middle
的值

00:30:36.416 --> 00:30:37.386 A:middle
我们还有个标签

00:30:38.276 --> 00:30:39.556 A:middle
这能让用户

00:30:39.556 --> 00:30:41.656 A:middle
更清楚这个滑块

00:30:41.656 --> 00:30:42.526 A:middle
实际上控制的是什么

00:30:42.726 --> 00:30:43.696 A:middle
而且如果你的 UI 里有

00:30:43.696 --> 00:30:45.206 A:middle
多个滑块 这将十分

00:30:45.586 --> 00:30:45.676 A:middle
有用

00:30:46.196 --> 00:30:47.896 A:middle
就像我提到的 这为

00:30:47.896 --> 00:30:49.126 A:middle
按住并保留弹出框提供了

00:30:49.126 --> 00:30:49.696 A:middle
很好的内容

00:30:49.976 --> 00:30:50.636 A:middle
这是因为对

00:30:50.636 --> 00:30:51.906 A:middle
用户手指立即进行处理

00:30:51.906 --> 00:30:53.416 A:middle
即使触摸

00:30:53.416 --> 00:30:54.846 A:middle
不发生在滑块的

00:30:54.846 --> 00:30:55.426 A:middle
旋钮上

00:30:55.906 --> 00:30:56.726 A:middle
这意味着用户可以

00:30:56.726 --> 00:30:57.906 A:middle
立刻开始与之交互

00:30:57.906 --> 00:30:59.086 A:middle
而不用

00:30:59.086 --> 00:31:00.306 A:middle
四处寻找旋钮来与

00:30:59.086 --> 00:31:00.306 A:middle
四处寻找旋钮来与

00:31:00.306 --> 00:31:01.346 A:middle
滑块进行交互

00:31:01.886 --> 00:31:04.026 A:middle
我们来看看这在

00:31:04.026 --> 00:31:04.986 A:middle
代码上是什么

00:31:04.986 --> 00:31:05.166 A:middle
样子的

00:31:05.926 --> 00:31:06.846 A:middle
首先 我们要创建项

00:31:06.846 --> 00:31:07.616 A:middle
本身

00:31:07.796 --> 00:31:08.866 A:middle
我们要提供一个唯一

00:31:08.866 --> 00:31:09.546 A:middle
标识符

00:31:10.346 --> 00:31:11.366 A:middle
接下来 我们要为它

00:31:11.366 --> 00:31:13.046 A:middle
赋最大和最小值的配件

00:31:13.046 --> 00:31:14.056 A:middle
我们还要用 AppKit

00:31:14.056 --> 00:31:15.756 A:middle
提供的图片

00:31:16.336 --> 00:31:17.166 A:middle
最后 我们要

00:31:17.166 --> 00:31:18.476 A:middle
赋给他一个标签 因为我们可能

00:31:18.476 --> 00:31:19.836 A:middle
想在 UI 上有多个滑块

00:31:19.836 --> 00:31:21.966 A:middle
但是你会注意到

00:31:21.966 --> 00:31:23.006 A:middle
滑块可能会占据

00:31:23.006 --> 00:31:24.516 A:middle
整个应用区域

00:31:24.516 --> 00:31:25.776 A:middle
因为滑块没有

00:31:25.776 --> 00:31:27.166 A:middle
固有内容

00:31:27.166 --> 00:31:27.476 A:middle
大小

00:31:27.526 --> 00:31:28.446 A:middle
他们很高兴在应用区域

00:31:28.446 --> 00:31:29.786 A:middle
里占据任何

00:31:29.786 --> 00:31:30.786 A:middle
大小

00:31:31.546 --> 00:31:33.416 A:middle
你可以通过

00:31:33.416 --> 00:31:34.966 A:middle
对滑块添加一个约束来改变它

00:31:34.966 --> 00:31:36.606 A:middle
AppKit 将检查并

00:31:36.606 --> 00:31:38.316 A:middle
自动的重置它的

00:31:38.316 --> 00:31:39.226 A:middle
大小

00:31:39.586 --> 00:31:40.546 A:middle
但是要注意 我们是

00:31:40.546 --> 00:31:42.036 A:middle
在滑块本身上做这些事

00:31:42.036 --> 00:31:43.866 A:middle
而不是滑块项的视图上

00:31:43.866 --> 00:31:45.086 A:middle
因为我们在这里有个标签

00:31:45.416 --> 00:31:47.096 A:middle
如果我们改变位置

00:31:47.226 --> 00:31:48.186 A:middle
这段字符串的长度会被改变

00:31:48.186 --> 00:31:49.996 A:middle
我们不想引起

00:31:50.526 --> 00:31:51.676 A:middle
文本剪切

00:31:52.396 --> 00:31:53.326 A:middle
下面 我们来谈谈

00:31:53.326 --> 00:31:54.006 A:middle
NSGroupTouchBarItem

00:31:54.726 --> 00:31:56.086 A:middle
数据组项很简单

00:31:56.086 --> 00:31:57.286 A:middle
因为它让你将多个

00:31:57.286 --> 00:31:58.706 A:middle
Touch Bar 项组合成一个

00:31:58.706 --> 00:32:00.176 A:middle
单一的 NSTouchBarItem 实例

00:31:58.706 --> 00:32:00.176 A:middle
单一的 NSTouchBarItem 实例

00:32:00.576 --> 00:32:01.686 A:middle
这是因为它与弹出框很像

00:32:01.686 --> 00:32:03.216 A:middle
都能提供它的

00:32:03.346 --> 00:32:04.696 A:middle
NSTouchBar 属性

00:32:05.426 --> 00:32:06.386 A:middle
在我上方的排版控件

00:32:06.386 --> 00:32:07.686 A:middle
就是这样的一个例子

00:32:08.036 --> 00:32:08.966 A:middle
他们被组合成了一个

00:32:08.966 --> 00:32:10.886 A:middle
单一的 NSTouchBarItem

00:32:11.426 --> 00:32:12.736 A:middle
有很多原因可能让你做这件事

00:32:12.736 --> 00:32:13.976 A:middle
我将对每一个

00:32:13.976 --> 00:32:14.966 A:middle
进行讲解

00:32:15.766 --> 00:32:17.286 A:middle
当居中多个项时

00:32:17.586 --> 00:32:18.446 A:middle
你可以对自定义

00:32:18.446 --> 00:32:19.826 A:middle
和定位目的使用

00:32:19.826 --> 00:32:21.296 A:middle
一些技巧

00:32:22.236 --> 00:32:23.266 A:middle
如果你记得几分钟前

00:32:23.266 --> 00:32:24.176 A:middle
Chris 讲到的

00:32:24.176 --> 00:32:24.436 A:middle
principalItemIdentifier

00:32:24.436 --> 00:32:26.236 A:middle
你会回忆起

00:32:26.236 --> 00:32:27.566 A:middle
单一的项标识符

00:32:27.566 --> 00:32:28.866 A:middle
其实是作为主要项

00:32:28.866 --> 00:32:29.576 A:middle
提供的

00:32:29.576 --> 00:32:32.276 A:middle
那么如果你想像 FaceTime 一样

00:32:32.276 --> 00:32:34.146 A:middle
将多个项一起居中

00:32:34.146 --> 00:32:35.336 A:middle
会发生什么

00:32:36.026 --> 00:32:37.396 A:middle
你可以将这些项

00:32:37.476 --> 00:32:39.006 A:middle
组合成单个的 Touch Bar 组合项

00:32:39.006 --> 00:32:40.426 A:middle
然后将项的标识符

00:32:40.426 --> 00:32:42.126 A:middle
提供为主要项

00:32:42.126 --> 00:32:42.746 A:middle
标识符

00:32:43.026 --> 00:32:45.776 A:middle
你也可以在自定义里

00:32:45.776 --> 00:32:47.266 A:middle
使用一些技巧

00:32:47.516 --> 00:32:48.886 A:middle
如果你像我们这里做的一样

00:32:48.886 --> 00:32:50.506 A:middle
是一个非自定义的组

00:32:50.506 --> 00:32:51.766 A:middle
你会注意到这些项已经

00:32:51.766 --> 00:32:52.766 A:middle
被聚合到一起

00:32:53.116 --> 00:32:54.666 A:middle
这意味着当用户

00:32:54.666 --> 00:32:56.536 A:middle
将这些按钮

00:32:56.536 --> 00:32:58.156 A:middle
拖拽到 Touch Bar 里的时候

00:32:58.156 --> 00:32:59.126 A:middle
这三个将聚合在一起

00:32:59.856 --> 00:33:00.936 A:middle
这里有一个单个的

00:32:59.856 --> 00:33:00.936 A:middle
这里有一个单个的

00:33:00.936 --> 00:33:02.516 A:middle
自定义标签将这些控件

00:33:02.516 --> 00:33:04.046 A:middle
描述为播放

00:33:04.456 --> 00:33:05.776 A:middle
控件

00:33:06.986 --> 00:33:08.696 A:middle
如果你选择将你的组

00:33:08.696 --> 00:33:09.936 A:middle
进行自定义

00:33:09.936 --> 00:33:11.276 A:middle
你还将获得一些很酷的

00:33:11.276 --> 00:33:11.726 A:middle
行为

00:33:12.296 --> 00:33:13.606 A:middle
在这个例子里 我们有

00:33:13.606 --> 00:33:14.716 A:middle
两个 Touch Bar 项的组

00:33:15.136 --> 00:33:16.456 A:middle
他们都可以进行

00:33:16.456 --> 00:33:16.926 A:middle
自定义

00:33:17.376 --> 00:33:18.906 A:middle
他们一个包含一组

00:33:18.906 --> 00:33:19.726 A:middle
海洋动物

00:33:19.726 --> 00:33:21.066 A:middle
另一组是农场里的动物

00:33:22.096 --> 00:33:23.406 A:middle
如果我开始自定义

00:33:23.406 --> 00:33:24.706 A:middle
你会注意到我可以自由的

00:33:24.706 --> 00:33:26.146 A:middle
重新排序这些项

00:33:26.146 --> 00:33:27.426 A:middle
无论我在他们的组里怎么选择

00:33:28.656 --> 00:33:30.666 A:middle
如果我尝试 拿出一个

00:33:30.806 --> 00:33:32.846 A:middle
海洋动物然后

00:33:32.846 --> 00:33:34.496 A:middle
将它放到农场动物里

00:33:34.496 --> 00:33:35.716 A:middle
它将回跳到原来的地方

00:33:35.896 --> 00:33:36.996 A:middle
因为这是在

00:33:36.996 --> 00:33:38.186 A:middle
从组里移除项

00:33:38.186 --> 00:33:39.076 A:middle
这是不被支持的

00:33:41.926 --> 00:33:43.176 A:middle
GroupTouchBarItem 对本地化

00:33:43.176 --> 00:33:44.256 A:middle
也有非常酷的

00:33:44.256 --> 00:33:45.096 A:middle
作用

00:33:45.526 --> 00:33:46.776 A:middle
现在 我很确定你的应用

00:33:46.776 --> 00:33:47.976 A:middle
有很多的用户

00:33:47.976 --> 00:33:49.176 A:middle
有些用户的母语是

00:33:49.176 --> 00:33:51.246 A:middle
从右往左阅读的

00:33:51.246 --> 00:33:52.866 A:middle
希伯来语或者阿拉伯语

00:33:53.396 --> 00:33:54.686 A:middle
我敢肯定你的应用

00:33:54.686 --> 00:33:55.826 A:middle
已经为这些用户

00:33:55.826 --> 00:33:57.106 A:middle
准确地调换了书写方向

00:33:57.326 --> 00:33:58.556 A:middle
我们希望 Touch Bar 也能反映

00:33:58.556 --> 00:33:59.126 A:middle
出来

00:34:00.116 --> 00:34:01.376 A:middle
一个很好的例子是

00:34:01.376 --> 00:34:02.206 A:middle
FaceTime 的 UI

00:34:02.356 --> 00:34:04.236 A:middle
FaceTime 选择展示全屏

00:34:04.236 --> 00:34:06.466 A:middle
静音键既在屏幕上

00:34:06.466 --> 00:34:07.436 A:middle
又在 Touch bar

00:34:07.436 --> 00:34:07.966 A:middle
上

00:34:08.255 --> 00:34:09.376 A:middle
你会注意到这些键的

00:34:09.376 --> 00:34:10.326 A:middle
顺序是对应的

00:34:11.146 --> 00:34:12.335 A:middle
如果你将语言换成阿拉伯语

00:34:12.335 --> 00:34:14.456 A:middle
你会发现

00:34:14.456 --> 00:34:15.596 A:middle
屏幕上的按钮

00:34:15.826 --> 00:34:17.366 A:middle
键的顺序已经反转

00:34:17.366 --> 00:34:17.815 A:middle
过来了

00:34:18.106 --> 00:34:19.376 A:middle
我们对 Touch Bar 也要

00:34:19.376 --> 00:34:21.476 A:middle
保持同样的对应顺序

00:34:22.536 --> 00:34:23.626 A:middle
但是需要注意

00:34:23.626 --> 00:34:25.216 A:middle
不是所有东西都能反转

00:34:25.275 --> 00:34:26.326 A:middle
退出键和控制条

00:34:26.326 --> 00:34:27.666 A:middle
要保持不动 无论是从左到右

00:34:27.666 --> 00:34:28.545 A:middle
还是从右到左

00:34:28.545 --> 00:34:29.085 A:middle
阅读

00:34:29.565 --> 00:34:30.876 A:middle
只有特殊的项组

00:34:30.876 --> 00:34:32.795 A:middle
才有可能反转

00:34:32.916 --> 00:34:34.596 A:middle
比如中央控制器

00:34:34.596 --> 00:34:35.596 A:middle
我们可以反转以符合

00:34:35.596 --> 00:34:36.706 A:middle
屏幕上的 UI

00:34:37.116 --> 00:34:38.396 A:middle
打进电话的图片

00:34:38.396 --> 00:34:39.456 A:middle
和标签也是可以

00:34:39.456 --> 00:34:39.846 A:middle
反转的

00:34:40.306 --> 00:34:41.565 A:middle
但是项的位置并没有

00:34:41.565 --> 00:34:42.616 A:middle
移动到 Touch Bar 的

00:34:42.616 --> 00:34:43.396 A:middle
另外一边

00:34:44.505 --> 00:34:46.275 A:middle
使用 10.13 里的 GroupTouchBarItem

00:34:46.275 --> 00:34:47.876 A:middle
的新用户组界面布局方向属性

00:34:47.876 --> 00:34:49.216 A:middle
可以很轻松的实现

00:34:49.216 --> 00:34:50.536 A:middle
这一点

00:34:50.976 --> 00:34:51.906 A:middle
你可以设置它去反映

00:34:51.906 --> 00:34:53.525 A:middle
NSApp 用户界面

00:34:53.525 --> 00:34:54.246 A:middle
布局方向

00:34:55.806 --> 00:34:56.676 A:middle
现在 我相信你们意识到

00:34:56.676 --> 00:34:57.936 A:middle
语言不只是从左到右或者

00:34:57.936 --> 00:34:58.846 A:middle
从右到左

00:34:58.846 --> 00:34:59.816 A:middle
它也有长度有变化的

00:34:59.816 --> 00:35:00.356 A:middle
字符串

00:34:59.816 --> 00:35:00.356 A:middle
字符串

00:35:00.356 --> 00:35:01.396 A:middle
这是你在设计

00:35:01.396 --> 00:35:02.776 A:middle
你的 UI 时要重点

00:35:02.776 --> 00:35:02.866 A:middle
记住的

00:35:03.646 --> 00:35:04.786 A:middle
在这个例子里

00:35:04.786 --> 00:35:05.806 A:middle
我有一个我最爱的海洋生物

00:35:05.806 --> 00:35:06.256 A:middle
的清单

00:35:06.626 --> 00:35:08.406 A:middle
我用英文和德文运行

00:35:08.406 --> 00:35:09.576 A:middle
同一个 App

00:35:10.186 --> 00:35:11.716 A:middle
用英文时 我可以匹配

00:35:11.716 --> 00:35:12.246 A:middle
6 个项

00:35:12.246 --> 00:35:13.756 A:middle
用德文我只能匹配 5 个

00:35:14.236 --> 00:35:15.366 A:middle
这是因为鲨鱼项

00:35:15.366 --> 00:35:16.636 A:middle
没有足够的空间去

00:35:16.636 --> 00:35:17.926 A:middle
匹配 Touch Bar

00:35:17.926 --> 00:35:18.986 A:middle
所以它在用户面前是隐藏的

00:35:19.316 --> 00:35:20.486 A:middle
这对德文用户来说是

00:35:20.486 --> 00:35:21.346 A:middle
很不幸的

00:35:22.186 --> 00:35:23.946 A:middle
现在 你可能试图用

00:35:23.946 --> 00:35:25.176 A:middle
约束来解决这个问题

00:35:25.176 --> 00:35:26.426 A:middle
将每个键都设置为一样

00:35:26.426 --> 00:35:26.726 A:middle
宽

00:35:26.726 --> 00:35:28.126 A:middle
但是这不是一个好的解决办法

00:35:28.126 --> 00:35:29.766 A:middle
因为在我们变换位置的时候

00:35:29.766 --> 00:35:31.716 A:middle
我们基本上一定会

00:35:31.716 --> 00:35:32.566 A:middle
引起它们其中

00:35:32.566 --> 00:35:33.556 A:middle
一个的反转

00:35:34.516 --> 00:35:35.876 A:middle
现在 事实上

00:35:35.876 --> 00:35:36.936 A:middle
从 10.13 开始 GroupTouchBarItem 有一个

00:35:36.936 --> 00:35:38.276 A:middle
能自动处理这个问题

00:35:38.276 --> 00:35:39.086 A:middle
的方法

00:35:39.386 --> 00:35:40.456 A:middle
我鼓励你们去参加

00:35:40.456 --> 00:35:41.546 A:middle
今天晚些时候召开的叫做

00:35:41.546 --> 00:35:43.116 A:middle
“Advanced Touch Bar（Touch Bar 进阶）”的演讲

00:35:43.116 --> 00:35:44.446 A:middle
它将深入探讨到底是怎么做的

00:35:46.126 --> 00:35:48.096 A:middle
现在 我们有几个额外的话题

00:35:48.096 --> 00:35:49.056 A:middle
它们将包括在文档中

00:35:49.056 --> 00:35:50.416 A:middle
但我还是要进行

00:35:50.416 --> 00:35:51.146 A:middle
简要的介绍

00:35:51.606 --> 00:35:52.716 A:middle
首先要提到的是

00:35:52.716 --> 00:35:54.006 A:middle
ColorPickerTouchBarItem

00:35:54.476 --> 00:35:55.896 A:middle
它让用户可以直接

00:35:55.896 --> 00:35:56.826 A:middle
在 Touch Bar 上

00:35:56.826 --> 00:35:57.486 A:middle
选择颜色

00:35:57.916 --> 00:35:59.016 A:middle
他们可以选择他们

00:35:59.016 --> 00:35:59.636 A:middle
想要的颜色

00:35:59.996 --> 00:36:00.946 A:middle
他们甚至可以改变颜色模型

00:35:59.996 --> 00:36:00.946 A:middle
他们甚至可以改变颜色模型

00:36:00.946 --> 00:36:02.416 A:middle
并且你的文档可以对

00:36:02.416 --> 00:36:03.756 A:middle
颜色模型支持的

00:36:03.756 --> 00:36:04.346 A:middle
加以约束

00:36:04.986 --> 00:36:06.366 A:middle
用户也可以使用

00:36:06.366 --> 00:36:07.296 A:middle
他们最爱的色板

00:36:07.296 --> 00:36:07.956 A:middle
这真的是很好的

00:36:07.956 --> 00:36:08.666 A:middle
体验

00:36:10.036 --> 00:36:10.816 A:middle
我们还有分享服务

00:36:10.816 --> 00:36:11.846 A:middle
拾取器

00:36:12.306 --> 00:36:13.646 A:middle
这将是你能通过邮件

00:36:13.646 --> 00:36:15.426 A:middle
信息 AirDrop 甚至是

00:36:15.426 --> 00:36:16.856 A:middle
第三方保险的服务

00:36:16.856 --> 00:36:17.726 A:middle
共享文件

00:36:17.726 --> 00:36:18.566 A:middle
这些都是通过同一个

00:36:18.566 --> 00:36:20.096 A:middle
分享表完成的

00:36:20.096 --> 00:36:20.676 A:middle
服务

00:36:22.066 --> 00:36:22.856 A:middle
最后 我们有一个 NSScrubber

00:36:22.896 --> 00:36:24.066 A:middle
它其实是一个视图

00:36:24.066 --> 00:36:25.156 A:middle
而不是一个项

00:36:25.186 --> 00:36:26.146 A:middle
它可以是 Touch Bar 项的

00:36:26.146 --> 00:36:26.886 A:middle
视图

00:36:27.536 --> 00:36:28.256 A:middle
这就和我们刚才说到的

00:36:28.256 --> 00:36:29.746 A:middle
日历里的时间轴

00:36:30.076 --> 00:36:32.236 A:middle
Safari 的标签页

00:36:32.236 --> 00:36:33.546 A:middle
色板里的

00:36:33.546 --> 00:36:34.416 A:middle
颜色选择器

00:36:34.416 --> 00:36:34.676 A:middle
一样

00:36:35.506 --> 00:36:36.836 A:middle
这是一个多功能的

00:36:36.836 --> 00:36:37.746 A:middle
可变的控件

00:36:37.746 --> 00:36:39.296 A:middle
它是特别为 Touch Bar

00:36:39.296 --> 00:36:40.086 A:middle
设计的

00:36:40.426 --> 00:36:41.836 A:middle
你可以在之前的演讲中

00:36:41.836 --> 00:36:42.926 A:middle
了解到更多更深的

00:36:42.926 --> 00:36:44.856 A:middle
关于如何使用这个

00:36:44.856 --> 00:36:45.626 A:middle
控件的内容

00:36:47.286 --> 00:36:48.616 A:middle
好了 我们今天已经讲到了

00:36:48.616 --> 00:36:49.436 A:middle
很多内容

00:36:49.766 --> 00:36:51.106 A:middle
我们讲了 NSTouchBar API

00:36:51.106 --> 00:36:52.726 A:middle
它如何连接响应器链

00:36:52.726 --> 00:36:54.486 A:middle
你如何向用户提供

00:36:54.486 --> 00:36:55.886 A:middle
上下文敏感

00:36:55.886 --> 00:36:57.136 A:middle
的控件

00:36:57.376 --> 00:36:58.106 A:middle
我们讲到 NSTouchBarItem

00:36:58.106 --> 00:36:59.696 A:middle
和所有 AppKit

00:36:59.696 --> 00:37:01.036 A:middle
提供的子类以及

00:36:59.696 --> 00:37:01.036 A:middle
提供的子类以及

00:37:01.036 --> 00:37:02.386 A:middle
它们独一无二的功能

00:37:02.566 --> 00:37:04.096 A:middle
所以 今天你知道得足够多了

00:37:04.096 --> 00:37:04.986 A:middle
已经可以在你的应用程序中

00:37:04.986 --> 00:37:06.096 A:middle
采用 Touch Bar 技术了

00:37:06.826 --> 00:37:08.036 A:middle
你在采用的时候

00:37:08.036 --> 00:37:08.976 A:middle
你绝对应该让你的用户

00:37:08.976 --> 00:37:10.426 A:middle
能够进行自定义

00:37:10.426 --> 00:37:11.886 A:middle
使你的用户得到他们

00:37:11.886 --> 00:37:12.646 A:middle
想要的体验

00:37:12.646 --> 00:37:14.056 A:middle
一定记得在设计你的 UI 时

00:37:14.056 --> 00:37:15.806 A:middle
进行本地化 这样

00:37:15.806 --> 00:37:17.646 A:middle
你的用户才会获得

00:37:17.646 --> 00:37:18.536 A:middle
好的体验

00:37:19.106 --> 00:37:20.576 A:middle
要想了解更多信息

00:37:20.576 --> 00:37:21.776 A:middle
你可以登录我们的开发者网站

00:37:21.776 --> 00:37:24.276 A:middle
我们有一些你可能会

00:37:24.276 --> 00:37:25.216 A:middle
感兴趣的相关会议

00:37:25.626 --> 00:37:26.556 A:middle
“Choosing the Right Cocoa Container View

00:37:26.556 --> 00:37:27.776 A:middle
（选择正确的 Cocoa 视图容器）”

00:37:28.026 --> 00:37:28.966 A:middle
可以解决当你想将堆栈视图

00:37:28.966 --> 00:37:30.586 A:middle
换成网格视图的问题

00:37:30.586 --> 00:37:31.866 A:middle
这很重要 因为你可以将

00:37:31.866 --> 00:37:32.806 A:middle
这些视图容器中的一个

00:37:32.806 --> 00:37:34.356 A:middle
用作 TouchBarItem 的

00:37:34.356 --> 00:37:36.366 A:middle
内容视图

00:37:37.196 --> 00:37:38.366 A:middle
还有我们提到过很多次的

00:37:38.366 --> 00:37:39.406 A:middle
“Avanced Touch Bar（Touch Bar 进阶）”演讲

00:37:39.406 --> 00:37:40.916 A:middle
这个视频里介绍了

00:37:40.916 --> 00:37:42.396 A:middle
很多 Touch Bar 的

00:37:42.436 --> 00:37:42.886 A:middle
额外功能

00:37:43.186 --> 00:37:44.356 A:middle
感谢大家

00:37:44.356 --> 00:37:45.016 A:middle
今天的到来

00:37:45.016 --> 00:37:45.846 A:middle
请享受接下来

00:37:45.846 --> 00:37:46.346 A:middle
的会议

00:37:47.016 --> 00:37:48.398 A:middle
[掌声]
