WEBVTT

00:00:26.516 --> 00:00:31.136 A:middle
[掌声]

00:00:31.636 --> 00:00:32.356 A:middle
&gt;&gt; 好的

00:00:32.356 --> 00:00:33.956 A:middle
大家晚上好

00:00:34.196 --> 00:00:35.066 A:middle
我的名字是 Eugene

00:00:35.286 --> 00:00:37.206 A:middle
我是 Messages 团队的工程师

00:00:37.206 --> 00:00:39.616 A:middle
今晚我很高兴能来这里

00:00:39.616 --> 00:00:40.986 A:middle
与大家聊聊

00:00:40.986 --> 00:00:43.496 A:middle
iMessage 各类应用的

00:00:43.496 --> 00:00:43.916 A:middle
新功能

00:00:45.016 --> 00:00:45.766 A:middle
我们就直奔主题吧

00:00:46.076 --> 00:00:47.776 A:middle
今晚我们计划向大家介绍

00:00:47.776 --> 00:00:48.726 A:middle
几项内容

00:00:49.216 --> 00:00:51.366 A:middle
首先 我们想向大家稍微炫耀一下

00:00:51.366 --> 00:00:52.546 A:middle
iOS 11 中 iMessage App 领域的

00:00:52.646 --> 00:00:54.686 A:middle
新功能

00:00:54.726 --> 00:00:55.646 A:middle
除了大家在 Keynote 里看到的以外

00:00:55.646 --> 00:00:56.826 A:middle
还有一些其他内容

00:00:58.196 --> 00:00:59.556 A:middle
然后我们会向大家展示

00:00:59.556 --> 00:01:00.956 A:middle
我们非常出色的

00:00:59.556 --> 00:01:00.956 A:middle
我们非常出色的

00:01:00.956 --> 00:01:02.286 A:middle
全新 Direct Send API

00:01:03.176 --> 00:01:06.896 A:middle
在此之后 我的同事 Jay 和 Stephen

00:01:06.896 --> 00:01:07.946 A:middle
会上台来

00:01:07.946 --> 00:01:09.846 A:middle
跟大家聊聊

00:01:09.846 --> 00:01:11.246 A:middle
我们全新的 Live Message Layouts

00:01:12.226 --> 00:01:13.386 A:middle
最后 我们会跟大家分享

00:01:13.386 --> 00:01:15.246 A:middle
几个关于 iMessage 各类应用的

00:01:15.246 --> 00:01:17.276 A:middle
最佳操作技巧

00:01:17.276 --> 00:01:17.966 A:middle
并结束今天的会议

00:01:21.136 --> 00:01:22.536 A:middle
今年我们要讨论的很多功能

00:01:22.536 --> 00:01:24.336 A:middle
都是依据我们去年

00:01:24.336 --> 00:01:26.036 A:middle
使用 iOS 10

00:01:26.036 --> 00:01:27.796 A:middle
并推出 Message 框架

00:01:27.796 --> 00:01:29.576 A:middle
而建立的基础原则

00:01:29.576 --> 00:01:29.996 A:middle
之上

00:01:30.526 --> 00:01:31.806 A:middle
如果大家需要总体回顾一下

00:01:31.806 --> 00:01:32.966 A:middle
Message 框架

00:01:32.966 --> 00:01:34.246 A:middle
或是 iMessage 的各类应用

00:01:34.246 --> 00:01:36.906 A:middle
我们强烈建议大家去看看

00:01:36.906 --> 00:01:39.026 A:middle
我们去年的会议

00:01:39.106 --> 00:01:41.356 A:middle
“iMessage Apps and Stickers”第二场

00:01:41.386 --> 00:01:43.516 A:middle
通过开发者门户网站

00:01:43.516 --> 00:01:43.896 A:middle
就可以观看

00:01:44.286 --> 00:01:45.706 A:middle
如果大家需要的话

00:01:45.706 --> 00:01:46.306 A:middle
可以回顾一下

00:01:46.306 --> 00:01:49.816 A:middle
现在我们就来深入了解一下

00:01:49.816 --> 00:01:50.206 A:middle
这些炫酷的功能

00:01:50.556 --> 00:01:52.176 A:middle
Message 应用领域里有哪些

00:01:52.176 --> 00:01:52.556 A:middle
新功能

00:01:52.746 --> 00:01:54.646 A:middle
就像大家在周一看到的那样

00:01:54.816 --> 00:01:56.756 A:middle
我们对 iOS 11 里 Message 应用的用户界面

00:01:57.006 --> 00:01:59.436 A:middle
进行了一些升级

00:02:00.036 --> 00:02:01.986 A:middle
我在周一刚看到

00:02:01.986 --> 00:02:03.636 A:middle
当用户在键入对话时

00:02:04.206 --> 00:02:06.436 A:middle
所有 App 图标

00:02:06.476 --> 00:02:07.766 A:middle
都被放在了屏幕底部

00:02:07.766 --> 00:02:09.006 A:middle
这就使得用户在

00:02:09.006 --> 00:02:10.356 A:middle
键入对话时

00:02:10.356 --> 00:02:12.296 A:middle
能够更方便地启动

00:02:12.296 --> 00:02:13.056 A:middle
启动应用程序

00:02:13.596 --> 00:02:18.166 A:middle
与 iOS 10 的情况一样

00:02:18.166 --> 00:02:19.196 A:middle
你的应用程序基本上

00:02:19.196 --> 00:02:21.246 A:middle
存在于键盘区域

00:02:21.246 --> 00:02:22.596 A:middle
但是我们在屏幕下方也放置了

00:02:22.596 --> 00:02:23.086 A:middle
应用图标

00:02:24.336 --> 00:02:26.786 A:middle
现在用户可以

00:02:26.786 --> 00:02:28.736 A:middle
左右滚动应用列表

00:02:29.276 --> 00:02:30.666 A:middle
快速找到他们

00:02:30.666 --> 00:02:31.266 A:middle
想要启动的应用

00:02:32.526 --> 00:02:33.566 A:middle
我们还把这条区域

00:02:33.566 --> 00:02:34.766 A:middle
分割成了两块

00:02:34.766 --> 00:02:35.426 A:middle
大家可以从大屏幕上看到

00:02:36.146 --> 00:02:37.856 A:middle
左边区域是

00:02:37.856 --> 00:02:39.686 A:middle
用户偏好的应用区域

00:02:39.766 --> 00:02:41.286 A:middle
它是由用户进行排序的

00:02:41.286 --> 00:02:43.466 A:middle
右边区域是

00:02:43.466 --> 00:02:45.076 A:middle
最近使用过的应用程序

00:02:46.276 --> 00:02:48.946 A:middle
这样用户可以重新整理一番

00:02:48.946 --> 00:02:50.186 A:middle
从最近使用区域里拿出来一部分应用

00:02:50.186 --> 00:02:51.436 A:middle
放进偏好应用区域

00:02:51.436 --> 00:02:53.616 A:middle
这样使用起来更方便

00:02:53.616 --> 00:02:55.286 A:middle
在键入对话时

00:02:55.286 --> 00:02:56.346 A:middle
也更容易接入

00:02:56.536 --> 00:02:57.746 A:middle
我们认为对于用户来说

00:02:58.016 --> 00:02:59.156 A:middle
这是一种很棒的键入对话方式

00:02:59.156 --> 00:03:00.726 A:middle
只要轻点一下

00:02:59.156 --> 00:03:00.726 A:middle
只要轻点一下

00:03:00.726 --> 00:03:02.926 A:middle
自己想要使用的 App

00:03:02.926 --> 00:03:04.226 A:middle
就可以马上使用它

00:03:04.846 --> 00:03:07.956 A:middle
今年还有

00:03:07.956 --> 00:03:10.216 A:middle
一个很酷的改变

00:03:10.216 --> 00:03:11.956 A:middle
是有关我们对 App 安装的处理方法

00:03:12.476 --> 00:03:14.676 A:middle
现在 在 iOS 11 里

00:03:14.676 --> 00:03:16.146 A:middle
如果你从 iMessage App Store

00:03:16.146 --> 00:03:18.366 A:middle
或是从我们原来的 App Store 里

00:03:18.366 --> 00:03:20.096 A:middle
下载一个应用

00:03:20.096 --> 00:03:22.216 A:middle
我们在默认状态下启用你的 App

00:03:22.216 --> 00:03:24.036 A:middle
以及 Message

00:03:24.036 --> 00:03:24.246 A:middle
应用抽屉

00:03:25.036 --> 00:03:25.696 A:middle
除此之外

00:03:26.516 --> 00:03:28.896 A:middle
[掌声]

00:03:29.396 --> 00:03:30.626 A:middle
除此之外  我们还会

00:03:30.626 --> 00:03:32.396 A:middle
把你的应用图标

00:03:32.396 --> 00:03:34.186 A:middle
归整排列到最近使用的应用

00:03:34.186 --> 00:03:35.916 A:middle
的最前面 这样用户就可以

00:03:35.916 --> 00:03:37.876 A:middle
更快找到  并且即刻启动

00:03:37.876 --> 00:03:39.356 A:middle
这个应用

00:03:39.596 --> 00:03:41.236 A:middle
以上就是我们对

00:03:41.286 --> 00:03:42.846 A:middle
Messages App 用户界面做出的

00:03:42.846 --> 00:03:43.296 A:middle
几个改变

00:03:43.406 --> 00:03:45.366 A:middle
在座很多人已经用到了

00:03:45.696 --> 00:03:50.226 A:middle
下面将为大家奉上我们全新的

00:03:50.226 --> 00:03:51.856 A:middle
Direct Send API

00:03:51.976 --> 00:03:53.256 A:middle
我们非常兴奋

00:03:53.256 --> 00:03:53.926 A:middle
想和大家一起分享

00:03:54.486 --> 00:03:58.656 A:middle
在 iOS 10 里  从 Message 应用

00:03:58.656 --> 00:03:59.706 A:middle
向外分享内容的唯一办法

00:03:59.706 --> 00:04:01.666 A:middle
就是调用一个 Insert API

00:03:59.706 --> 00:04:01.666 A:middle
就是调用一个 Insert API

00:04:01.666 --> 00:04:03.816 A:middle
这个 API 将把你的信息

00:04:03.816 --> 00:04:07.346 A:middle
放入 Message 输入视图

00:04:07.346 --> 00:04:08.066 A:middle
里面

00:04:08.846 --> 00:04:09.806 A:middle
虽然这个方法

00:04:09.806 --> 00:04:11.466 A:middle
对于很多应用程序都很好用

00:04:11.466 --> 00:04:12.956 A:middle
但对于有些用户体验来说 比如这个游戏

00:04:13.396 --> 00:04:14.656 A:middle
用户所说的话将使得

00:04:14.656 --> 00:04:16.856 A:middle
这个游戏朝着下一个逻辑步骤发展

00:04:16.995 --> 00:04:18.606 A:middle
情况很可能就是

00:04:18.745 --> 00:04:19.896 A:middle
信息确实被发送

00:04:19.966 --> 00:04:21.266 A:middle
而且被添加到输入视图

00:04:21.266 --> 00:04:23.156 A:middle
有些像是额外地

00:04:23.156 --> 00:04:23.496 A:middle
点击了一次

00:04:23.616 --> 00:04:25.536 A:middle
所以 今年我们想着

00:04:25.536 --> 00:04:26.776 A:middle
怎么能让它简单一点

00:04:26.776 --> 00:04:28.386 A:middle
如何能够让用户体验

00:04:28.386 --> 00:04:29.096 A:middle
提升一下

00:04:29.596 --> 00:04:32.656 A:middle
在以前的正常情况下

00:04:32.656 --> 00:04:34.196 A:middle
你会把消息从自己的应用程序里

00:04:34.326 --> 00:04:35.206 A:middle
直接插入 Messages 的输入视图

00:04:35.206 --> 00:04:37.196 A:middle
在 iOS 11 里 你可以直接发送

00:04:37.286 --> 00:04:38.066 A:middle
任何这一类的消息

00:04:39.106 --> 00:04:39.906 A:middle
这是如何实现的呢？

00:04:40.456 --> 00:04:44.076 A:middle
在 iOS 10 中 我们引进了

00:04:44.076 --> 00:04:46.006 A:middle
MS Conversation 它定义了

00:04:46.006 --> 00:04:47.336 A:middle
定义了以下的 Insert API

00:04:47.726 --> 00:04:49.966 A:middle
insertMessage insertSticker

00:04:50.506 --> 00:04:53.046 A:middle
insertText 还有 insertAttachment

00:04:53.086 --> 00:04:54.086 A:middle
insertAttachment 它们能支持我们任何

00:04:54.086 --> 00:04:55.316 A:middle
标准化的 Messages 附件

00:04:55.316 --> 00:04:55.556 A:middle
类型

00:04:56.856 --> 00:04:58.876 A:middle
iOS 11 里有一个很简单的

00:04:59.456 --> 00:05:01.836 A:middle
类比推理 API

00:04:59.456 --> 00:05:01.836 A:middle
类比推理 API

00:05:01.836 --> 00:05:04.076 A:middle
名为 Send Message Send Sticker

00:05:04.076 --> 00:05:05.886 A:middle
Send Text 和 Send Attachment

00:05:06.416 --> 00:05:07.836 A:middle
调用其中任何一个 API

00:05:07.836 --> 00:05:09.356 A:middle
都会绕过 Message 输入视图

00:05:09.356 --> 00:05:11.686 A:middle
并立即在会话中

00:05:11.686 --> 00:05:13.136 A:middle
向你发送一条

00:05:13.136 --> 00:05:13.886 A:middle
信息

00:05:14.306 --> 00:05:16.806 A:middle
非常快捷好用的 API

00:05:17.516 --> 00:05:22.076 A:middle
[掌声]

00:05:22.576 --> 00:05:24.986 A:middle
你们可能会问哪个 API

00:05:25.176 --> 00:05:27.266 A:middle
哪个项用户体验

00:05:27.426 --> 00:05:29.596 A:middle
最适合我的应用

00:05:29.596 --> 00:05:32.356 A:middle
Insert Draft 和 Send Message API

00:05:32.356 --> 00:05:34.496 A:middle
都是 iOS 11 中的一等公民

00:05:34.816 --> 00:05:35.876 A:middle
至于哪一个最适合

00:05:35.876 --> 00:05:36.646 A:middle
你的应用

00:05:36.646 --> 00:05:37.186 A:middle
这要由你来决定

00:05:37.826 --> 00:05:42.216 A:middle
所以说  Insert Draft API 仍是

00:05:42.316 --> 00:05:43.746 A:middle
在多数应用中推荐使用的 API

00:05:43.746 --> 00:05:45.596 A:middle
因为它能带来更丰富的

00:05:45.596 --> 00:05:47.346 A:middle
编写体验

00:05:47.446 --> 00:05:49.016 A:middle
例如 用户可以插入一条信息

00:05:49.016 --> 00:05:50.776 A:middle
然后 比如说 在信息末尾

00:05:50.776 --> 00:05:51.636 A:middle
增加一句评价

00:05:51.636 --> 00:05:53.766 A:middle
或是附送一个屏幕特效

00:05:53.766 --> 00:05:55.336 A:middle
或全屏动态

00:05:55.906 --> 00:05:57.546 A:middle
它真是一个很好的方法

00:05:57.546 --> 00:05:58.946 A:middle
能让你原本要发送的信息

00:05:58.946 --> 00:05:59.936 A:middle
内容更显丰富

00:06:00.146 --> 00:06:02.416 A:middle
除此之外

00:06:02.416 --> 00:06:04.576 A:middle
它让用户还有机会

00:06:04.576 --> 00:06:05.896 A:middle
更正要发送的内容

00:06:05.896 --> 00:06:06.796 A:middle
这一点非常重要

00:06:07.336 --> 00:06:10.816 A:middle
另一方面 Direct Send API

00:06:10.816 --> 00:06:13.216 A:middle
为大家提供了超级迅速和便捷的

00:06:13.216 --> 00:06:14.226 A:middle
用户体验

00:06:14.286 --> 00:06:16.496 A:middle
这非常适合类似于游戏或

00:06:16.496 --> 00:06:17.186 A:middle
我们前面看到的那些东西

00:06:18.186 --> 00:06:19.766 A:middle
在任何应用里

00:06:19.766 --> 00:06:22.676 A:middle
插入流程里包含点击输入视图按钮

00:06:22.676 --> 00:06:25.076 A:middle
这很不简单

00:06:25.076 --> 00:06:26.846 A:middle
你可能感觉这是额外增加的步骤

00:06:26.846 --> 00:06:27.766 A:middle
是你完全不需要的

00:06:29.156 --> 00:06:31.396 A:middle
但是 在使用这个 API 时

00:06:31.396 --> 00:06:32.746 A:middle
尤其重要的一点是

00:06:32.746 --> 00:06:34.036 A:middle
保持用户对你的

00:06:34.036 --> 00:06:34.716 A:middle
这个应用的信任

00:06:35.016 --> 00:06:36.656 A:middle
所以 重要的是十分明确地提示用户

00:06:36.656 --> 00:06:38.126 A:middle
究竟是要发送什么内容

00:06:38.436 --> 00:06:39.956 A:middle
同时还应当

00:06:39.956 --> 00:06:42.226 A:middle
清楚地向用户表明

00:06:42.226 --> 00:06:44.446 A:middle
你这个 App 里究竟有

00:06:44.636 --> 00:06:46.366 A:middle
什么样的用户交互或界面元素

00:06:46.366 --> 00:06:47.936 A:middle
会在你的应用里

00:06:48.126 --> 00:06:49.236 A:middle
触发发送

00:06:49.236 --> 00:06:52.066 A:middle
所以 通过 Direct Send API Message

00:06:52.066 --> 00:06:53.116 A:middle
来帮助用户大幅提升体验

00:06:53.116 --> 00:06:55.396 A:middle
就给这类 API 的使用

00:06:55.396 --> 00:06:57.286 A:middle
施加了几项要求

00:06:58.546 --> 00:07:00.596 A:middle
首先 你的应用必须是

00:06:58.546 --> 00:07:00.596 A:middle
首先 你的应用必须是

00:07:00.596 --> 00:07:02.476 A:middle
屏幕上可见的

00:07:02.516 --> 00:07:03.016 A:middle
Message 应用

00:07:03.016 --> 00:07:05.116 A:middle
大家可能知道

00:07:05.116 --> 00:07:06.776 A:middle
你们的 Message 应用扩展可能是

00:07:06.776 --> 00:07:08.396 A:middle
在 Message 的后台运行

00:07:08.396 --> 00:07:10.296 A:middle
而确实不在当前的

00:07:10.346 --> 00:07:11.336 A:middle
前台应用

00:07:11.386 --> 00:07:13.266 A:middle
所以第一项要求就是

00:07:13.266 --> 00:07:14.476 A:middle
你的应用必须可见

00:07:15.776 --> 00:07:19.186 A:middle
除此之外 对于这个功能

00:07:19.186 --> 00:07:20.776 A:middle
我们的目标用户体验是

00:07:20.776 --> 00:07:22.956 A:middle
是要让用户轻点屏幕

00:07:22.956 --> 00:07:24.206 A:middle
或与你的应用交互

00:07:24.566 --> 00:07:25.536 A:middle
然后触发发送

00:07:26.566 --> 00:07:28.696 A:middle
为了让这种操作更为便利  Message

00:07:28.696 --> 00:07:30.706 A:middle
还将探测用户

00:07:30.706 --> 00:07:32.436 A:middle
在你 App 上的交互

00:07:32.526 --> 00:07:34.656 A:middle
并在探测用户交互时

00:07:34.656 --> 00:07:36.156 A:middle
允许调用一个直接发送的

00:07:36.156 --> 00:07:36.786 A:middle
API

00:07:37.556 --> 00:07:39.116 A:middle
后续的直接发送调用将失败

00:07:39.116 --> 00:07:40.836 A:middle
直到我们探测到

00:07:40.916 --> 00:07:42.636 A:middle
另一种用户交互

00:07:42.806 --> 00:07:44.956 A:middle
某种程度上保持着一一对应

00:07:45.046 --> 00:07:46.186 A:middle
用户按下屏幕上某处

00:07:46.186 --> 00:07:47.966 A:middle
就会获准发送内容

00:07:48.896 --> 00:07:51.406 A:middle
为了帮助在座的各位开发人员

00:07:51.406 --> 00:07:52.776 A:middle
能够理解 发送 API 到底是

00:07:52.776 --> 00:07:54.806 A:middle
怎样的情形

00:07:55.016 --> 00:07:57.976 A:middle
我们要介绍两个新的 Air 代码

00:07:57.976 --> 00:07:58.346 A:middle
MSMessage Air 代码

00:07:58.346 --> 00:07:58.696 A:middle
我们现在有这两个代码

00:07:58.786 --> 00:08:00.606 A:middle
一个是 sendwithoutRecentInteraction

00:07:58.786 --> 00:08:00.606 A:middle
一个是 sendwithoutRecentInteraction

00:08:00.666 --> 00:08:02.286 A:middle
另一个是 sendwhileNotVisible

00:08:02.566 --> 00:08:04.226 A:middle
与往常一样 使用出色的 Air 处理方法

00:08:04.226 --> 00:08:06.666 A:middle
这样可以使你的应用

00:08:06.666 --> 00:08:07.596 A:middle
才能找准日期

00:08:10.046 --> 00:08:10.916 A:middle
这就是 Direct Send

00:08:11.266 --> 00:08:12.036 A:middle
非常简单

00:08:12.036 --> 00:08:13.186 A:middle
我觉得它对于

00:08:13.186 --> 00:08:14.626 A:middle
它自身适用的那些 App 来说

00:08:14.716 --> 00:08:15.626 A:middle
这将是很棒的用户体验

00:08:15.626 --> 00:08:17.146 A:middle
大家一定要考虑一下

00:08:17.146 --> 00:08:20.376 A:middle
究竟是 Insert Draft 还是 Send

00:08:20.376 --> 00:08:21.436 A:middle
最适合你的应用

00:08:21.436 --> 00:08:22.566 A:middle
我们很高兴地期盼着大家使用它

00:08:22.566 --> 00:08:26.416 A:middle
而构建的成果

00:08:26.676 --> 00:08:27.246 A:middle
好了

00:08:27.386 --> 00:08:28.846 A:middle
接下来我想邀请

00:08:28.846 --> 00:08:31.656 A:middle
Stephen 上台

00:08:31.656 --> 00:08:32.926 A:middle
介绍一下 Live Message Layouts

00:08:34.515 --> 00:08:38.916 A:middle
[掌声]

00:08:39.416 --> 00:08:40.306 A:middle
&gt;&gt; 嗨 大家好

00:08:41.086 --> 00:08:44.285 A:middle
今天 我很开心能回到台上

00:08:44.285 --> 00:08:45.436 A:middle
跟大家聊聊

00:08:45.436 --> 00:08:46.816 A:middle
Live Message Layouts

00:08:47.566 --> 00:08:50.346 A:middle
在 iOS 10 中

00:08:50.346 --> 00:08:51.346 A:middle
我们引入了 Message 框架

00:08:51.346 --> 00:08:53.046 A:middle
能让大家

00:08:53.046 --> 00:08:54.166 A:middle
把 App 体验直接带入

00:08:54.166 --> 00:08:54.616 A:middle
Message 当中

00:08:55.306 --> 00:08:58.556 A:middle
当你想要构建你的

00:08:58.556 --> 00:09:01.166 A:middle
iMessage 应用时

00:08:58.556 --> 00:09:01.166 A:middle
iMessage 应用时

00:09:01.166 --> 00:09:02.936 A:middle
你的 App 会在 Message 的

00:09:02.996 --> 00:09:04.616 A:middle
键盘区域显示 或以全屏展示

00:09:04.616 --> 00:09:05.646 A:middle
状态显示  这些可能是

00:09:05.646 --> 00:09:06.856 A:middle
你能够使用的

00:09:06.856 --> 00:09:07.886 A:middle
简洁和扩展型的

00:09:07.886 --> 00:09:08.236 A:middle
展示风格

00:09:09.296 --> 00:09:10.226 A:middle
接着 当你要发送信息时

00:09:10.226 --> 00:09:12.016 A:middle
你的 App 会使用

00:09:12.016 --> 00:09:13.856 A:middle
一个模板驱动  或者说  我们会使用

00:09:13.856 --> 00:09:15.016 A:middle
一个模板驱动布局方法

00:09:15.016 --> 00:09:16.376 A:middle
来用于你的 App 信息

00:09:16.926 --> 00:09:18.056 A:middle
现在这个模板布局有

00:09:18.056 --> 00:09:20.546 A:middle
自定义对象或选项

00:09:21.116 --> 00:09:23.296 A:middle
比如图像

00:09:23.296 --> 00:09:25.736 A:middle
和这里的文本属性

00:09:25.736 --> 00:09:27.116 A:middle
它允许你提供一些优质

00:09:27.116 --> 00:09:29.586 A:middle
而丰富的 App 信息

00:09:29.586 --> 00:09:30.546 A:middle
不过它仍然还是受制于

00:09:30.546 --> 00:09:31.276 A:middle
模板提供的内容

00:09:32.736 --> 00:09:33.996 A:middle
现在我很高兴地向大家宣布

00:09:33.996 --> 00:09:35.316 A:middle
在 iOS 11 中

00:09:35.586 --> 00:09:37.486 A:middle
大家可以用这些 liveLayout

00:09:37.486 --> 00:09:39.256 A:middle
来彻底地自定义

00:09:39.686 --> 00:09:40.566 A:middle
你的 App 信息了

00:09:41.276 --> 00:09:43.896 A:middle
这个视图其实就是

00:09:43.896 --> 00:09:45.166 A:middle
App 应用自身

00:09:45.166 --> 00:09:46.586 A:middle
在 Message 文本里

00:09:46.586 --> 00:09:47.086 A:middle
提供的

00:09:47.536 --> 00:09:50.156 A:middle
这个 App 也可以驱动一个视图

00:09:50.356 --> 00:09:53.326 A:middle
作为草稿信息

00:09:53.326 --> 00:09:55.106 A:middle
它实际上可以提供自定义视图

00:09:55.186 --> 00:09:56.426 A:middle
从而将多条信息

00:09:56.546 --> 00:09:57.456 A:middle
同时呈现在

00:09:57.456 --> 00:09:57.936 A:middle
文本里

00:09:58.446 --> 00:10:01.156 A:middle
当然 在我们支持的所有情况下

00:09:58.446 --> 00:10:01.156 A:middle
当然 在我们支持的所有情况下

00:10:01.156 --> 00:10:02.456 A:middle
你的 App 可能并不是

00:10:02.456 --> 00:10:05.126 A:middle
屏幕上唯一的 App  但我们真的

00:10:05.126 --> 00:10:06.106 A:middle
只在意你的 App

00:10:06.546 --> 00:10:07.336 A:middle
今天我们来这里就是要

00:10:07.336 --> 00:10:07.706 A:middle
跟大家探讨这一点

00:10:10.516 --> 00:10:12.136 A:middle
我想给大家快速演示一下

00:10:12.136 --> 00:10:14.536 A:middle
它在运行中是什么样的

00:10:14.536 --> 00:10:14.916 A:middle
状态

00:10:15.966 --> 00:10:18.126 A:middle
现在我手里有一个简单的 iMessage 应用

00:10:18.126 --> 00:10:20.196 A:middle
是我构建的  它名叫 Event Countdown

00:10:20.196 --> 00:10:22.196 A:middle
这只是一个简单的列表

00:10:22.196 --> 00:10:23.716 A:middle
罗列了近期要参加的活动

00:10:23.716 --> 00:10:25.586 A:middle
都是我迫切想要参加

00:10:25.586 --> 00:10:26.686 A:middle
还想通过我的 Message

00:10:26.686 --> 00:10:27.146 A:middle
与朋友分享的内容

00:10:27.846 --> 00:10:30.026 A:middle
例如 如果我轻点这里的批处理

00:10:30.026 --> 00:10:32.836 A:middle
你们会看到一个

00:10:32.836 --> 00:10:34.176 A:middle
完全自定义的信息

00:10:34.296 --> 00:10:35.316 A:middle
以草稿信息的形式呈现在

00:10:35.316 --> 00:10:35.796 A:middle
这里

00:10:36.396 --> 00:10:37.666 A:middle
它是实时更新  它拥有

00:10:37.666 --> 00:10:38.896 A:middle
出色的倒计时功能

00:10:38.896 --> 00:10:40.226 A:middle
让你对近期将要到来的活动

00:10:40.226 --> 00:10:40.566 A:middle
充满期待

00:10:40.666 --> 00:10:42.916 A:middle
我发送它的时候

00:10:42.916 --> 00:10:44.486 A:middle
同样的视图会被置入

00:10:45.176 --> 00:10:46.066 A:middle
传输另一端可以看到的

00:10:46.066 --> 00:10:46.386 A:middle
文本里

00:10:46.846 --> 00:10:49.206 A:middle
事实上 如果我们进入接收方

00:10:49.206 --> 00:10:51.616 A:middle
或许可以看看

00:10:51.616 --> 00:10:53.316 A:middle
接收方可能发送了什么

00:10:53.356 --> 00:10:56.656 A:middle
或另一边可能发送了什么

00:10:56.656 --> 00:10:58.046 A:middle
现在我有一份邀请

00:10:58.046 --> 00:10:58.476 A:middle
它来自 Eugene

00:10:59.766 --> 00:11:00.976 A:middle
这是一个相似的 App 信息

00:10:59.766 --> 00:11:00.976 A:middle
这是一个相似的 App 信息

00:11:00.976 --> 00:11:02.746 A:middle
但我的 iMessage 应用已经选择

00:11:03.176 --> 00:11:04.626 A:middle
将一个完全不同的视图

00:11:04.626 --> 00:11:05.916 A:middle
呈现在接收方一侧

00:11:06.746 --> 00:11:08.296 A:middle
好 我马上要展示一个

00:11:08.296 --> 00:11:09.416 A:middle
未被接受的邀请

00:11:10.696 --> 00:11:12.396 A:middle
如果我轻点这里的 App 气泡

00:11:12.396 --> 00:11:15.286 A:middle
我就把这个事件标记为“已接受”

00:11:15.286 --> 00:11:17.536 A:middle
现在它切换到了

00:11:17.536 --> 00:11:19.106 A:middle
实时倒计时模式

00:11:19.686 --> 00:11:21.596 A:middle
在这种情况下

00:11:21.596 --> 00:11:23.406 A:middle
我甚至不用启动 iMessage 应用

00:11:23.406 --> 00:11:24.946 A:middle
就能完成所有这些操作

00:11:24.946 --> 00:11:28.556 A:middle
现在右上方有一个

00:11:28.556 --> 00:11:29.556 A:middle
小的 infoButton

00:11:30.426 --> 00:11:31.796 A:middle
并不是所有的体验

00:11:31.796 --> 00:11:33.136 A:middle
都适合用来塞进 App 信息

00:11:33.136 --> 00:11:33.836 A:middle
里面的

00:11:35.276 --> 00:11:37.156 A:middle
轻点这个 infoButton

00:11:37.156 --> 00:11:39.136 A:middle
我就可以真正发出请求

00:11:39.136 --> 00:11:40.196 A:middle
让我的 App 以一种

00:11:40.196 --> 00:11:42.326 A:middle
不同的展示风格来显示

00:11:42.326 --> 00:11:44.126 A:middle
这样可以看到我更多的活动信息

00:11:46.676 --> 00:11:48.396 A:middle
我希望大家能在这里看到

00:11:48.446 --> 00:11:49.666 A:middle
通过 Live Message Layouts

00:11:49.666 --> 00:11:51.526 A:middle
你就可以构建

00:11:51.526 --> 00:11:53.166 A:middle
真正精彩的用户体验

00:11:53.166 --> 00:11:54.616 A:middle
交互和内容实时更新让它完满

00:11:54.616 --> 00:11:56.536 A:middle
而且操作起来确实

00:11:56.876 --> 00:11:56.946 A:middle
很简单

00:12:02.176 --> 00:12:03.116 A:middle
那么我们来谈谈它的

00:12:03.116 --> 00:12:03.386 A:middle
工作原理

00:12:04.116 --> 00:12:07.366 A:middle
当 iMessage 应用

00:12:07.366 --> 00:12:08.726 A:middle
以简洁的展示风格而呈现时

00:12:08.776 --> 00:12:10.526 A:middle
我们用一则实例进行了

00:12:10.526 --> 00:12:12.726 A:middle
具体说明  这个例子是

00:12:12.766 --> 00:12:14.086 A:middle
MSMessage App 视图控制器的子类

00:12:14.166 --> 00:12:15.926 A:middle
我们把它配置为

00:12:15.926 --> 00:12:17.376 A:middle
简洁型展示风格

00:12:17.376 --> 00:12:20.456 A:middle
当带有一个 liveLayout 的 App 消息

00:12:20.456 --> 00:12:22.106 A:middle
出现在屏幕时

00:12:22.816 --> 00:12:24.716 A:middle
我们会提供同一基本类的

00:12:24.716 --> 00:12:26.746 A:middle
另一个具体实例

00:12:27.536 --> 00:12:28.286 A:middle
并将其配置为

00:12:28.286 --> 00:12:29.736 A:middle
文本展示风格

00:12:30.316 --> 00:12:33.736 A:middle
实际上 对于文本里

00:12:33.736 --> 00:12:35.156 A:middle
展示的每一条信息

00:12:36.036 --> 00:12:37.696 A:middle
我们都会从同一分类中

00:12:37.966 --> 00:12:40.026 A:middle
举出新的实例

00:12:40.026 --> 00:12:41.256 A:middle
然后再把它配置为

00:12:41.256 --> 00:12:41.566 A:middle
文本展示风格

00:12:42.536 --> 00:12:44.006 A:middle
这些实例

00:12:44.526 --> 00:12:46.196 A:middle
以及它们展现在屏幕上的

00:12:46.196 --> 00:12:48.066 A:middle
某条 App 信息之间

00:12:48.066 --> 00:12:51.346 A:middle
存在着严格的逐一对应关系

00:12:51.586 --> 00:12:53.316 A:middle
以上就是关于 Live Message Layouts

00:12:53.316 --> 00:12:54.246 A:middle
一个快速的概述

00:12:55.036 --> 00:12:56.326 A:middle
接下来我要带领大家了解更多

00:12:56.326 --> 00:12:57.726 A:middle
关于 API 以及如何启用它的内容

00:12:57.726 --> 00:12:59.096 A:middle
现在我想邀请 Jay 上台

00:13:00.516 --> 00:13:04.500 A:middle
[掌声]

00:13:11.316 --> 00:13:12.316 A:middle
谢谢 Stephen 的介绍

00:13:12.316 --> 00:13:12.956 A:middle
非常感谢

00:13:13.356 --> 00:13:15.216 A:middle
我是 Jay

00:13:15.216 --> 00:13:16.546 A:middle
我想为大家介绍

00:13:16.546 --> 00:13:18.506 A:middle
我们给 Live Message Layout

00:13:18.506 --> 00:13:19.156 A:middle
添加的这些新 API

00:13:19.216 --> 00:13:21.706 A:middle
那么我们就开始吧

00:13:26.046 --> 00:13:27.266 A:middle
在座各位可能有人很清楚

00:13:27.826 --> 00:13:29.116 A:middle
你们可以用

00:13:29.116 --> 00:13:30.196 A:middle
MSMessageLayout

00:13:30.256 --> 00:13:31.246 A:middle
自定义你的 App 气泡

00:13:32.296 --> 00:13:34.416 A:middle
如果使用当前的 MSMessage

00:13:34.416 --> 00:13:35.916 A:middle
模板布局  你只能对有限的

00:13:35.916 --> 00:13:37.296 A:middle
几组外观进行自定义

00:13:37.296 --> 00:13:39.896 A:middle
例如标题

00:13:39.896 --> 00:13:40.366 A:middle
还有图像

00:13:40.936 --> 00:13:44.716 A:middle
在 iOS 11 中

00:13:44.716 --> 00:13:47.056 A:middle
为了支持气泡的完全自定义功能

00:13:47.236 --> 00:13:48.166 A:middle
我们添加了新的子类

00:13:49.996 --> 00:13:51.876 A:middle
MSMessageLiveLayout

00:13:51.876 --> 00:13:54.676 A:middle
让我们来快速地

00:13:54.676 --> 00:13:54.876 A:middle
看一下

00:13:58.756 --> 00:14:00.676 A:middle
大家可以看到  这里

00:13:58.756 --> 00:14:00.676 A:middle
大家可以看到  这里

00:14:00.676 --> 00:14:02.486 A:middle
要填写的东西并不多

00:14:02.486 --> 00:14:03.676 A:middle
不像模板布局要求的

00:14:03.676 --> 00:14:04.056 A:middle
那么多

00:14:05.546 --> 00:14:08.546 A:middle
这是因为现在

00:14:08.576 --> 00:14:10.536 A:middle
你可以充分表明

00:14:10.766 --> 00:14:11.846 A:middle
你希望呈现怎样的 App 气泡

00:14:11.846 --> 00:14:12.906 A:middle
外观

00:14:13.716 --> 00:14:15.606 A:middle
尽管大家可能注意到了

00:14:15.676 --> 00:14:17.076 A:middle
这里有一个属性 它的名称是

00:14:17.076 --> 00:14:20.866 A:middle
Alternate Layout

00:14:22.996 --> 00:14:23.096 A:middle
可这又是什么呢

00:14:23.306 --> 00:14:24.266 A:middle
现在会有一些实例

00:14:24.266 --> 00:14:26.826 A:middle
在这些例子里  你的 App 气泡

00:14:26.826 --> 00:14:28.086 A:middle
在接收设备上

00:14:28.086 --> 00:14:29.056 A:middle
不受支持

00:14:30.026 --> 00:14:32.336 A:middle
原因可能是  接收设备并没有安装

00:14:32.336 --> 00:14:34.666 A:middle
你的 Extension

00:14:34.666 --> 00:14:35.796 A:middle
或它们只是运行在

00:14:35.866 --> 00:14:39.566 A:middle
旧的 Apple iOS 版本 iOS macOS

00:14:39.566 --> 00:14:40.406 A:middle
或 watchOS 上

00:14:41.636 --> 00:14:45.156 A:middle
在这些场景里

00:14:45.216 --> 00:14:48.366 A:middle
它们会将这个模板布局看作是

00:14:48.626 --> 00:14:51.166 A:middle
一个备选表达法

00:14:51.356 --> 00:14:52.456 A:middle
如果它们能真正

00:14:52.456 --> 00:14:54.856 A:middle
支持它们的 Extension

00:14:54.856 --> 00:14:56.866 A:middle
就会在右侧看见气泡

00:14:57.576 --> 00:15:01.716 A:middle
那么我们如何使用这个 API 呢？

00:14:57.576 --> 00:15:01.716 A:middle
那么我们如何使用这个 API 呢？

00:15:01.946 --> 00:15:04.016 A:middle
其实这跟你在 iOS 10 中的操作

00:15:04.016 --> 00:15:04.836 A:middle
很相似

00:15:05.716 --> 00:15:07.696 A:middle
首先 要创建模板

00:15:07.696 --> 00:15:08.096 A:middle
布局

00:15:09.316 --> 00:15:10.336 A:middle
然后用模板布局

00:15:10.776 --> 00:15:11.486 A:middle
去创建

00:15:11.606 --> 00:15:12.216 A:middle
liveLayout

00:15:12.806 --> 00:15:17.496 A:middle
有了 liveLayout

00:15:17.756 --> 00:15:19.576 A:middle
比如说  有一条信息 然后发送

00:15:19.736 --> 00:15:21.616 A:middle
这跟我们在 iOS 10 里的操作

00:15:21.616 --> 00:15:25.706 A:middle
很相似

00:15:25.896 --> 00:15:28.216 A:middle
这就是关于

00:15:28.396 --> 00:15:29.556 A:middle
MSMessageLiveLayout 的内容

00:15:30.466 --> 00:15:31.796 A:middle
我们把一些新的功能增添到了

00:15:31.916 --> 00:15:33.446 A:middle
MSMessagesAppViewController

00:15:33.446 --> 00:15:36.806 A:middle
大家有人可能很清楚

00:15:36.806 --> 00:15:42.236 A:middle
这是扩展点中的

00:15:42.276 --> 00:15:43.406 A:middle
主要类

00:15:44.386 --> 00:15:45.726 A:middle
通过配置这个

00:15:45.726 --> 00:15:47.486 A:middle
视图控制器

00:15:47.486 --> 00:15:49.436 A:middle
你就能够自定义

00:15:49.916 --> 00:15:51.696 A:middle
App 键盘区域

00:15:51.696 --> 00:15:52.356 A:middle
在简洁模式下的外观

00:15:52.896 --> 00:15:56.056 A:middle
文本里的气泡

00:15:56.056 --> 00:15:57.016 A:middle
也受视图控制器的支持

00:15:57.016 --> 00:16:00.516 A:middle
其实它们

00:15:57.016 --> 00:16:00.516 A:middle
其实它们

00:16:00.746 --> 00:16:03.026 A:middle
有同样的类

00:16:03.216 --> 00:16:04.746 A:middle
好了 那么这意味着什么呢

00:16:06.026 --> 00:16:08.716 A:middle
这意味着

00:16:08.716 --> 00:16:12.386 A:middle
在底部的这个视图

00:16:12.386 --> 00:16:14.186 A:middle
和在顶部的那个视图

00:16:14.186 --> 00:16:14.766 A:middle
来自于同一个类

00:16:16.186 --> 00:16:18.306 A:middle
为了区分这二者

00:16:18.306 --> 00:16:19.896 A:middle
我们添加了新的

00:16:19.896 --> 00:16:23.366 A:middle
展示风格文本

00:16:24.756 --> 00:16:26.836 A:middle
一旦需要对这些

00:16:26.836 --> 00:16:27.676 A:middle
视图控制器进行配置时

00:16:27.676 --> 00:16:30.476 A:middle
你可以将

00:16:30.476 --> 00:16:32.716 A:middle
presentationStyle

00:16:33.626 --> 00:16:35.946 A:middle
和 selectedMessage 结合起来使用

00:16:36.246 --> 00:16:37.506 A:middle
从而决定你想展示在

00:16:37.506 --> 00:16:38.116 A:middle
视图控制器中的内容

00:16:39.656 --> 00:16:41.696 A:middle
你可以遵循一个

00:16:41.696 --> 00:16:43.636 A:middle
很简单的模式

00:16:43.636 --> 00:16:45.016 A:middle
那就是在某种程度上遵循 Python 的工厂模式

00:16:45.016 --> 00:16:49.386 A:middle
你可以根据这些属性的状态而决定

00:16:49.476 --> 00:16:50.266 A:middle
在这一模式中

00:16:50.266 --> 00:16:52.586 A:middle
返回适当的

00:16:52.586 --> 00:16:53.546 A:middle
子视图控制器

00:16:53.546 --> 00:16:54.856 A:middle
所以  你会将一个控制器用于文本风格

00:16:54.856 --> 00:16:58.916 A:middle
另一个用于简洁模式

00:17:00.066 --> 00:17:01.486 A:middle
如果你已经遵循了

00:17:01.486 --> 00:17:05.156 A:middle
一个相似的模式并进行编码

00:17:05.156 --> 00:17:05.955 A:middle
看起来就会像这样

00:17:07.165 --> 00:17:10.016 A:middle
对于简洁的风格

00:17:10.016 --> 00:17:10.806 A:middle
我们有一个辅助方法

00:17:11.806 --> 00:17:14.106 A:middle
那就是 presentSummaryViewController

00:17:14.106 --> 00:17:16.106 A:middle
有了这个辅助方法

00:17:16.106 --> 00:17:16.986 A:middle
你就可以创建正确的

00:17:16.986 --> 00:17:18.965 A:middle
子视图控制器

00:17:18.965 --> 00:17:20.136 A:middle
并恰当地配置视图控制器

00:17:20.726 --> 00:17:24.126 A:middle
至于扩展风格

00:17:24.126 --> 00:17:25.646 A:middle
你会获得另一个辅助方法

00:17:26.596 --> 00:17:28.226 A:middle
即 presentDetailViewController

00:17:28.465 --> 00:17:29.796 A:middle
它的功能与你

00:17:29.796 --> 00:17:31.666 A:middle
在简洁风格中的操作

00:17:31.666 --> 00:17:31.986 A:middle
十分相似

00:17:33.126 --> 00:17:34.886 A:middle
为了处理文本风格的另一种情况

00:17:34.886 --> 00:17:36.256 A:middle
我们还有另外的一种

00:17:37.676 --> 00:17:39.536 A:middle
辅助方法

00:17:39.536 --> 00:17:40.286 A:middle
它是按照

00:17:40.686 --> 00:17:42.016 A:middle
presentTranscriptViewController 来进行的

00:17:47.096 --> 00:17:47.956 A:middle
以上就是关于

00:17:47.956 --> 00:17:50.596 A:middle
展示风格的介绍

00:17:50.596 --> 00:17:51.716 A:middle
其实我们还要分享另一项内容

00:17:51.716 --> 00:17:53.406 A:middle
然后再跟大家聊一聊

00:17:53.406 --> 00:17:53.966 A:middle
实时气泡

00:17:54.506 --> 00:17:56.616 A:middle
我们现在要谈的  就是调整尺寸

00:17:58.066 --> 00:17:59.376 A:middle
现在 视图控制器

00:17:59.376 --> 00:18:01.556 A:middle
本意是要用于文本

00:17:59.376 --> 00:18:01.556 A:middle
本意是要用于文本

00:18:02.046 --> 00:18:04.006 A:middle
它将遵照一项新的协议

00:18:04.006 --> 00:18:07.076 A:middle
协议名为

00:18:07.076 --> 00:18:07.846 A:middle
MSMessagesAppTranscriptPresentation

00:18:08.806 --> 00:18:10.436 A:middle
它有一个方法

00:18:11.146 --> 00:18:12.226 A:middle
叫做 ContentSizeThatFits

00:18:12.766 --> 00:18:16.796 A:middle
在这个功能里

00:18:17.366 --> 00:18:19.096 A:middle
会返回一个最能代表

00:18:19.096 --> 00:18:19.796 A:middle
你文本内视图的尺寸

00:18:21.096 --> 00:18:24.276 A:middle
为了解释清楚  我们来

00:18:25.216 --> 00:18:25.536 A:middle
举个例子

00:18:25.536 --> 00:18:30.206 A:middle
现在 我们想让尺寸

00:18:30.286 --> 00:18:32.066 A:middle
能一直完美地契合所有的 subView

00:18:32.286 --> 00:18:34.236 A:middle
不会被剪切  或是有

00:18:34.236 --> 00:18:35.586 A:middle
多余的底边  以及其他类似

00:18:36.266 --> 00:18:36.366 A:middle
情况

00:18:37.126 --> 00:18:39.746 A:middle
关于这个具体样例

00:18:39.746 --> 00:18:42.936 A:middle
我们设有地图视图、计时器

00:18:43.516 --> 00:18:43.676 A:middle
还有按钮

00:18:43.836 --> 00:18:45.246 A:middle
我们决定只关注

00:18:45.246 --> 00:18:47.676 A:middle
地图视图的大小

00:18:47.706 --> 00:18:49.986 A:middle
或计时器的变化

00:18:50.146 --> 00:18:52.956 A:middle
但我们想让按钮

00:18:52.956 --> 00:18:55.006 A:middle
根据系统字体做出

00:18:55.006 --> 00:18:55.416 A:middle
相应调整

00:18:56.586 --> 00:18:57.976 A:middle
我们来给

00:18:57.976 --> 00:19:02.556 A:middle
地图视图和计时器

00:18:57.976 --> 00:19:02.556 A:middle
地图视图和计时器

00:19:02.556 --> 00:19:04.626 A:middle
一个静态数字 217

00:19:04.626 --> 00:19:08.156 A:middle
这里的行高就会成为

00:19:08.216 --> 00:19:09.936 A:middle
按钮的尺寸

00:19:09.936 --> 00:19:11.906 A:middle
并将系统字体考虑在内

00:19:12.476 --> 00:19:15.246 A:middle
把这两个数字输入

00:19:15.296 --> 00:19:17.726 A:middle
我们会得到正确的尺寸

00:19:17.726 --> 00:19:19.436 A:middle
或正确的行高  其中包含了

00:19:19.496 --> 00:19:23.136 A:middle
我们视图中所有的 subView

00:19:23.356 --> 00:19:26.426 A:middle
根据这个配置

00:19:26.426 --> 00:19:29.016 A:middle
我觉得高度应是

00:19:29.056 --> 00:19:29.456 A:middle
235 点

00:19:30.046 --> 00:19:33.786 A:middle
请大家记住

00:19:33.786 --> 00:19:34.846 A:middle
如果文本尺寸

00:19:35.386 --> 00:19:37.386 A:middle
场所和系统字体

00:19:37.756 --> 00:19:39.996 A:middle
出现了变化

00:19:39.996 --> 00:19:42.386 A:middle
这个功能将会再次被调用

00:19:43.416 --> 00:19:45.216 A:middle
在上述情况下  这些功能

00:19:45.216 --> 00:19:47.026 A:middle
将被再次调用  从而生成新的

00:19:48.006 --> 00:19:48.146 A:middle
尺寸

00:19:48.936 --> 00:19:51.176 A:middle
这里举一个系统字体

00:19:51.176 --> 00:19:52.176 A:middle
发生改变的例子

00:19:52.226 --> 00:19:54.046 A:middle
大家可以看到

00:19:54.046 --> 00:19:54.876 A:middle
现在字体变大了一点

00:19:55.546 --> 00:19:59.136 A:middle
这种情况 我们刚刚说过了

00:19:59.136 --> 00:20:00.656 A:middle
我们关心的并不是地图视图

00:19:59.136 --> 00:20:00.656 A:middle
我们关心的并不是地图视图

00:20:00.656 --> 00:20:02.236 A:middle
或计时器的时长变化

00:20:02.236 --> 00:20:03.666 A:middle
那么我们就看一下

00:20:03.666 --> 00:20:04.746 A:middle
同样的 217

00:20:06.036 --> 00:20:07.226 A:middle
然而  因为我们给按钮

00:20:07.226 --> 00:20:09.636 A:middle
使用的是动态字体

00:20:09.636 --> 00:20:11.196 A:middle
它便自动选择了一个尺寸

00:20:12.306 --> 00:20:14.756 A:middle
有了这个配置  你就可以

00:20:14.756 --> 00:20:16.866 A:middle
妥当地返回 244

00:20:18.476 --> 00:20:20.726 A:middle
我们会接受这个值

00:20:20.726 --> 00:20:21.586 A:middle
并相应地调整你的视图尺寸

00:20:25.616 --> 00:20:27.906 A:middle
说了这么多

00:20:28.416 --> 00:20:30.416 A:middle
我想用一个

00:20:30.416 --> 00:20:32.196 A:middle
快速的编码演示

00:20:32.196 --> 00:20:33.056 A:middle
来总结我刚才说的这些

00:20:33.826 --> 00:20:35.246 A:middle
我知道你们当中有许多人

00:20:35.246 --> 00:20:37.626 A:middle
非常期待参加聚会

00:20:37.756 --> 00:20:40.226 A:middle
所以我们会创建一个样品 App

00:20:40.226 --> 00:20:42.736 A:middle
用来显示聚会的倒数

00:20:42.736 --> 00:20:43.766 A:middle
计时器

00:20:53.046 --> 00:20:53.556 A:middle
好了 真不错

00:20:54.176 --> 00:20:58.216 A:middle
这是我们很棒的 Xcode

00:20:58.396 --> 00:21:01.226 A:middle
这是我现在放在

00:20:58.396 --> 00:21:01.226 A:middle
这是我现在放在

00:21:01.226 --> 00:21:02.416 A:middle
桌子上的设备

00:21:03.836 --> 00:21:05.786 A:middle
在这个演示中 我要展示

00:21:05.786 --> 00:21:07.796 A:middle
如何扩展现有的 iMessage 应用

00:21:07.876 --> 00:21:10.136 A:middle
并开始使用我们的

00:21:10.136 --> 00:21:11.256 A:middle
LiveMessageLayout

00:21:12.606 --> 00:21:14.226 A:middle
如果你停留在 iMessage 应用

00:21:14.386 --> 00:21:15.386 A:middle
它的界面就会呈现出

00:21:15.426 --> 00:21:15.896 A:middle
这个样子

00:21:17.166 --> 00:21:18.156 A:middle
那么  当你有一个 App

00:21:18.156 --> 00:21:20.616 A:middle
处于简洁模式

00:21:20.616 --> 00:21:22.736 A:middle
你尝试发送时

00:21:22.736 --> 00:21:24.066 A:middle
它会显示一个模板布局

00:21:24.956 --> 00:21:26.726 A:middle
我们不如开始采用

00:21:26.896 --> 00:21:27.836 A:middle
LiveLayout

00:21:27.836 --> 00:21:29.436 A:middle
而不是展架上的

00:21:29.436 --> 00:21:29.936 A:middle
templateLayout

00:21:29.936 --> 00:21:33.226 A:middle
让我们进入代码部分

00:21:33.866 --> 00:21:36.916 A:middle
我现在

00:21:36.916 --> 00:21:40.166 A:middle
在 MSMessagesAppViewController 的

00:21:41.836 --> 00:21:41.966 A:middle
子类

00:21:42.156 --> 00:21:43.816 A:middle
在这个代码的某处

00:21:43.816 --> 00:21:45.106 A:middle
可能将要创建一个

00:21:45.106 --> 00:21:45.536 A:middle
模板布局

00:21:45.576 --> 00:21:51.786 A:middle
我们来找找看

00:21:52.006 --> 00:21:55.416 A:middle
找到了 我们有这个辅助功能

00:21:55.416 --> 00:21:56.796 A:middle
叫作 sendMessage

00:21:57.256 --> 00:21:58.386 A:middle
看来我们要创建

00:21:58.386 --> 00:22:01.686 A:middle
信息 对它进行配置

00:21:58.386 --> 00:22:01.686 A:middle
信息 对它进行配置

00:22:01.816 --> 00:22:04.536 A:middle
创建一个 templateLayout

00:22:04.536 --> 00:22:06.196 A:middle
然后再将布局放入信息

00:22:06.686 --> 00:22:08.096 A:middle
现在我们将它插入

00:22:08.096 --> 00:22:08.696 A:middle
对话

00:22:10.066 --> 00:22:11.866 A:middle
我觉得这个地方很适合

00:22:11.906 --> 00:22:13.696 A:middle
启用我们的 liveLayout

00:22:13.906 --> 00:22:14.526 A:middle
对象

00:22:15.666 --> 00:22:17.776 A:middle
接下来我要继续

00:22:24.476 --> 00:22:25.496 A:middle
创建一个 liveLayout

00:22:25.496 --> 00:22:27.496 A:middle
这里是模板布局

00:22:27.496 --> 00:22:31.016 A:middle
接下来我们可以把它设置为

00:22:31.016 --> 00:22:33.006 A:middle
Message 布局属性

00:22:34.526 --> 00:22:37.296 A:middle
看一下 好了

00:22:38.016 --> 00:22:41.646 A:middle
在改动之后

00:22:41.646 --> 00:22:42.496 A:middle
大家应该能看到一个 liveLayout

00:22:42.496 --> 00:22:44.746 A:middle
这肯定是一个 liveLayout

00:22:44.746 --> 00:22:47.486 A:middle
但看起来有些

00:22:47.486 --> 00:22:48.596 A:middle
不太对劲

00:22:48.966 --> 00:22:50.086 A:middle
这个看起来其实很像

00:22:50.086 --> 00:22:52.466 A:middle
刚才在简洁模式中看到的

00:22:52.466 --> 00:22:52.736 A:middle
那样

00:22:53.696 --> 00:22:54.386 A:middle
哪里出问题了呢

00:22:55.846 --> 00:22:56.906 A:middle
我们返回到代码

00:22:58.406 --> 00:22:59.806 A:middle
试着找一找

00:22:59.806 --> 00:23:02.176 A:middle
大家在简洁模式中见到过

00:22:59.806 --> 00:23:02.176 A:middle
大家在简洁模式中见到过

00:23:02.176 --> 00:23:03.906 A:middle
我们实际创建

00:23:03.906 --> 00:23:04.916 A:middle
这个表视图控制器的地方

00:23:06.286 --> 00:23:08.816 A:middle
现在有一个地方

00:23:08.816 --> 00:23:10.936 A:middle
需要马上查看一下

00:23:10.936 --> 00:23:13.426 A:middle
我要进入 willBecomeActive  好

00:23:13.606 --> 00:23:15.516 A:middle
我看到了 updatePresentation

00:23:15.866 --> 00:23:16.916 A:middle
看看它在做什么

00:23:18.476 --> 00:23:19.236 A:middle
噢我看到了

00:23:19.296 --> 00:23:20.236 A:middle
presentViewController

00:23:20.826 --> 00:23:26.776 A:middle
这个看起来像是问题所在

00:23:26.776 --> 00:23:27.246 A:middle
就是这里

00:23:28.256 --> 00:23:30.226 A:middle
对于所有未展开的内容

00:23:30.226 --> 00:23:31.886 A:middle
我们都会创建一个

00:23:31.886 --> 00:23:33.866 A:middle
表格视图控制器

00:23:33.866 --> 00:23:36.256 A:middle
正如先前提到的

00:23:36.256 --> 00:23:37.466 A:middle
同一个视图控制器分类

00:23:37.466 --> 00:23:39.256 A:middle
可以用来支持文本型 简洁型和

00:23:39.256 --> 00:23:41.396 A:middle
扩展型风格 在这个案例中

00:23:41.396 --> 00:23:43.826 A:middle
我们需要处理的是文本风格

00:23:43.826 --> 00:23:44.936 A:middle
而现在 文本却并不支持这个代码

00:23:45.556 --> 00:23:47.556 A:middle
我要让这个代码

00:23:47.556 --> 00:23:48.076 A:middle
保持原样

00:23:48.076 --> 00:23:49.166 A:middle
我要创建一个新函数

00:23:49.266 --> 00:23:51.726 A:middle
这样 它们可以开始

00:23:51.726 --> 00:23:53.626 A:middle
处理这个文本的案例

00:23:53.666 --> 00:23:55.056 A:middle
所以我现在有了这个

00:23:57.756 --> 00:24:03.426 A:middle
presentTranscriptView

00:23:57.756 --> 00:24:03.426 A:middle
presentTranscriptView

00:24:03.426 --> 00:24:04.956 A:middle
也有了代码 我必须要知道

00:24:05.096 --> 00:24:07.046 A:middle
它是否要发给我 或是否有待发送

00:24:07.126 --> 00:24:09.076 A:middle
因为我要决定

00:24:09.136 --> 00:24:10.576 A:middle
我是否需要显示

00:24:10.576 --> 00:24:11.086 A:middle
邀请按钮

00:24:12.496 --> 00:24:13.456 A:middle
那么  我现在既然有了这个

00:24:13.456 --> 00:24:18.006 A:middle
transcriptView

00:24:18.006 --> 00:24:20.356 A:middle
就可以继续用 Auto Layout Magic

00:24:20.746 --> 00:24:21.616 A:middle
把它添加到一个 subView 里

00:24:22.196 --> 00:24:25.766 A:middle
然后  我要在某个地方调用这个方法

00:24:25.766 --> 00:24:26.746 A:middle
所以 我打算回到

00:24:26.746 --> 00:24:27.926 A:middle
updatePresentation

00:24:28.766 --> 00:24:29.266 A:middle
它就在这里

00:24:29.916 --> 00:24:37.206 A:middle
我可以在这里开始

00:24:37.206 --> 00:24:38.926 A:middle
给文本配置

00:24:38.926 --> 00:24:39.496 A:middle
这个 viewController

00:24:41.576 --> 00:24:43.936 A:middle
TranscriptView 事件 对话

00:24:45.416 --> 00:24:48.016 A:middle
还有其他所有内容

00:24:48.016 --> 00:24:50.456 A:middle
我现在准备做

00:24:50.456 --> 00:24:52.596 A:middle
我们为了支持简洁和扩展模式

00:24:52.596 --> 00:24:54.426 A:middle
而一直在做的事情

00:24:55.176 --> 00:24:57.666 A:middle
很好 我们来看看

00:24:57.666 --> 00:24:59.386 A:middle
经过这次改动  会变成什么样

00:25:00.086 --> 00:25:01.556 A:middle
在这次改动过后

00:25:01.556 --> 00:25:03.076 A:middle
你应该一直能看到事件详情

00:25:03.076 --> 00:25:03.636 A:middle
出现在 App 的气泡框里

00:25:04.226 --> 00:25:07.676 A:middle
所以事情办成了

00:25:07.976 --> 00:25:13.216 A:middle
我现在回到我们的设备

00:25:13.376 --> 00:25:14.846 A:middle
好的 停

00:25:21.226 --> 00:25:22.866 A:middle
很好 我现在看到了一些东西

00:25:23.606 --> 00:25:27.306 A:middle
但它有点儿大

00:25:27.306 --> 00:25:28.196 A:middle
我不知道地图视图去了哪里

00:25:28.786 --> 00:25:31.376 A:middle
但我们已经达成目的

00:25:38.486 --> 00:25:39.936 A:middle
你可以看到 这里有一块

00:25:39.936 --> 00:25:41.936 A:middle
看起来很别扭的蓝色区域

00:25:42.346 --> 00:25:43.976 A:middle
它比我预想的要

00:25:43.976 --> 00:25:44.566 A:middle
大很多

00:25:44.776 --> 00:25:47.696 A:middle
所以哪里又出问题了

00:25:47.696 --> 00:25:49.706 A:middle
可能是我们没有执行

00:25:49.706 --> 00:25:52.516 A:middle
符合这个 liveLayout 接受条件里

00:25:52.516 --> 00:25:53.766 A:middle
最后一部分的内容尺寸

00:25:54.866 --> 00:25:56.206 A:middle
所以我要赶快

00:25:57.286 --> 00:25:58.286 A:middle
执行这个内容尺寸

00:26:02.596 --> 00:26:04.836 A:middle
根据本次演示 根据幻灯片内容

00:26:04.836 --> 00:26:07.606 A:middle
你原本想要把高度设置为 217

00:26:07.606 --> 00:26:14.666 A:middle
至于标题按钮

00:26:14.666 --> 00:26:16.326 A:middle
你想将其设置为动态的

00:26:16.326 --> 00:26:18.346 A:middle
它先从 transcriptView.titleFont

00:26:21.456 --> 00:26:26.216 A:middle
然后从 lineHeight

00:26:26.216 --> 00:26:26.996 A:middle
获取而来

00:26:31.956 --> 00:26:33.456 A:middle
我们想把宽度尽可能地设置为

00:26:33.456 --> 00:26:35.426 A:middle
最大宽度

00:26:35.426 --> 00:26:37.796 A:middle
即路径和尺寸的参数上限

00:26:37.796 --> 00:26:39.466 A:middle
所以我们可以直接返回

00:26:39.466 --> 00:26:39.886 A:middle
确切的值

00:26:40.366 --> 00:26:45.866 A:middle
然后是高度

00:26:46.566 --> 00:26:47.636 A:middle
我们可以添加这两个值

00:26:48.306 --> 00:26:53.286 A:middle
这个尺寸刚好可以

00:26:53.286 --> 00:26:54.346 A:middle
返回两条信息

00:26:55.496 --> 00:26:56.376 A:middle
那么我们来看看现在

00:26:56.376 --> 00:26:56.566 A:middle
成什么样了

00:27:03.156 --> 00:27:03.396 A:middle
好了

00:27:13.556 --> 00:27:14.496 A:middle
它加载好了

00:27:14.496 --> 00:27:15.476 A:middle
好多了

00:27:17.296 --> 00:27:20.286 A:middle
这就是我们在演示中看到的

00:27:20.776 --> 00:27:22.816 A:middle
精巧的小尺寸 有事件

00:27:23.396 --> 00:27:24.756 A:middle
还有计时器

00:27:24.846 --> 00:27:26.426 A:middle
我们离聚会开始

00:27:26.426 --> 00:27:27.616 A:middle
只有一小时二十分钟了

00:27:28.106 --> 00:27:28.646 A:middle
请大家再坚持一下

00:27:29.266 --> 00:27:33.276 A:middle
我现在要把这个发送出去

00:27:33.496 --> 00:27:34.066 A:middle
发送

00:27:34.306 --> 00:27:36.666 A:middle
这是在一个实时文本

00:27:36.666 --> 00:27:37.386 A:middle
计时器正在运行

00:27:38.436 --> 00:27:40.356 A:middle
以上就是关于如何使用 Live Message Layout 的

00:27:40.356 --> 00:27:42.696 A:middle
快速演示的内容

00:27:43.256 --> 00:27:44.656 A:middle
我们再来讲讲

00:27:44.656 --> 00:27:45.806 A:middle
viewControlLifecycle 里的

00:27:45.806 --> 00:27:46.876 A:middle
交互情况

00:27:47.606 --> 00:27:48.686 A:middle
我很愿意邀请 Stephen

00:27:48.686 --> 00:27:50.596 A:middle
回到台上来

00:27:50.596 --> 00:27:51.046 A:middle
讲讲这一点

00:27:52.516 --> 00:27:56.500 A:middle
[掌声]

00:28:03.216 --> 00:28:04.736 A:middle
谢谢 Jay

00:28:08.476 --> 00:28:09.336 A:middle
好的

00:28:10.536 --> 00:28:14.786 A:middle
现在我们已经

00:28:14.786 --> 00:28:15.976 A:middle
简单地了解过

00:28:15.976 --> 00:28:17.686 A:middle
这个新 API 使用时的状况

00:28:17.846 --> 00:28:19.166 A:middle
以及在 iMessage 应用里使用

00:28:19.166 --> 00:28:19.906 A:middle
Live Message Layout 是什么情况

00:28:20.846 --> 00:28:22.266 A:middle
如果你回想一下

00:28:22.266 --> 00:28:23.186 A:middle
我在会议开始时做的演示

00:28:23.186 --> 00:28:25.106 A:middle
我们当时已经看到了一些

00:28:25.546 --> 00:28:26.926 A:middle
出现在 iMessage 应用气泡框里的

00:28:27.036 --> 00:28:27.466 A:middle
交互元素

00:28:28.956 --> 00:28:30.196 A:middle
所以我现在很想

00:28:30.196 --> 00:28:32.226 A:middle
回到 Xcode 来说明

00:28:32.946 --> 00:28:33.046 A:middle
这一点

00:28:34.196 --> 00:28:35.656 A:middle
回到我的设备上

00:28:37.256 --> 00:28:38.436 A:middle
我们要回到 Xcode 上

00:28:38.436 --> 00:28:39.286 A:middle
回到我们之前离开的位置

00:28:39.956 --> 00:28:42.186 A:middle
我要让我的设备

00:28:42.186 --> 00:28:45.276 A:middle
进入演示准备状态

00:28:45.276 --> 00:28:45.796 A:middle
很好

00:28:46.416 --> 00:28:49.056 A:middle
好了 我们要做的第一件事就在这里

00:28:49.056 --> 00:28:50.656 A:middle
现在我们有了这个

00:28:50.696 --> 00:28:52.576 A:middle
EventCountdownTranscriptView

00:28:52.576 --> 00:28:53.416 A:middle
这个视图

00:28:53.416 --> 00:28:55.686 A:middle
嵌在这个应用信息的文本中

00:28:55.686 --> 00:28:57.926 A:middle
所以我们要

00:28:57.926 --> 00:28:59.126 A:middle
为这个视图配置一些

00:28:59.126 --> 00:28:59.636 A:middle
内部活动

00:28:59.726 --> 00:29:01.986 A:middle
我要直接开始

00:28:59.726 --> 00:29:01.986 A:middle
我要直接开始

00:29:01.986 --> 00:29:03.086 A:middle
跳到这个分类

00:29:03.166 --> 00:29:04.176 A:middle
你会发现  我有很多

00:29:04.176 --> 00:29:05.586 A:middle
已配置的属性

00:29:05.586 --> 00:29:08.046 A:middle
那么现在

00:29:08.046 --> 00:29:09.806 A:middle
在这个 setupSubview 里

00:29:09.806 --> 00:29:11.596 A:middle
我创建了一个 tapGestureRecognizer

00:29:11.596 --> 00:29:13.306 A:middle
所以当用户轻点我的视图时

00:29:13.306 --> 00:29:15.346 A:middle
userDidTap 方法

00:29:15.346 --> 00:29:15.786 A:middle
就会被调用

00:29:15.786 --> 00:29:19.286 A:middle
如果我直接跳至执行

00:29:19.786 --> 00:29:21.476 A:middle
当然这个执行

00:29:21.476 --> 00:29:22.526 A:middle
现在还是空白的

00:29:22.526 --> 00:29:23.726 A:middle
正等着我们来添加内容

00:29:24.276 --> 00:29:27.496 A:middle
我们首先要添加的

00:29:27.496 --> 00:29:29.236 A:middle
内部活动是

00:29:29.236 --> 00:29:31.126 A:middle
在应用信息显示

00:29:31.156 --> 00:29:32.726 A:middle
一项未接受邀请时开始

00:29:33.836 --> 00:29:36.996 A:middle
如果这个事件与我无关

00:29:36.996 --> 00:29:38.316 A:middle
或应用信息不是给我的

00:29:38.316 --> 00:29:40.316 A:middle
而且未被接受

00:29:40.316 --> 00:29:41.436 A:middle
然后我们想给它添加

00:29:41.686 --> 00:29:42.306 A:middle
交互元素

00:29:42.306 --> 00:29:44.446 A:middle
首先我们要做的就是

00:29:44.446 --> 00:29:48.876 A:middle
如果没有被接受

00:29:48.876 --> 00:29:51.196 A:middle
且不是给我的

00:29:51.196 --> 00:29:52.656 A:middle
我们就要把视图旗标改为

00:29:52.656 --> 00:29:54.716 A:middle
让 isAccepted 等于 True

00:29:55.016 --> 00:29:57.706 A:middle
我们要做的另一件事

00:29:57.706 --> 00:29:58.986 A:middle
是更新我现在的这个

00:29:58.986 --> 00:29:59.646 A:middle
模型

00:29:59.926 --> 00:30:02.536 A:middle
通常我会使用正确的 MVC

00:29:59.926 --> 00:30:02.536 A:middle
通常我会使用正确的 MVC

00:30:02.536 --> 00:30:04.506 A:middle
可能还会更新我的设备

00:30:04.506 --> 00:30:05.696 A:middle
以表明该事件

00:30:05.696 --> 00:30:06.606 A:middle
已更新

00:30:06.606 --> 00:30:07.746 A:middle
但为了便于演示

00:30:07.746 --> 00:30:08.446 A:middle
我会在默认配置中直接对此

00:30:08.446 --> 00:30:08.876 A:middle
进行标记

00:30:12.956 --> 00:30:14.476 A:middle
很好 我已经更新了某个状态

00:30:14.476 --> 00:30:16.726 A:middle
现在我需要更新我的视图状态

00:30:16.726 --> 00:30:19.276 A:middle
我会在这里使用

00:30:19.276 --> 00:30:22.336 A:middle
一个快速的动画块

00:30:22.566 --> 00:30:25.186 A:middle
来调用已更新的视图状态

00:30:25.186 --> 00:30:27.306 A:middle
然后我将触发一个布局

00:30:27.306 --> 00:30:27.626 A:middle
传递

00:30:28.516 --> 00:30:30.186 A:middle
现在再看这个 updateViewState

00:30:30.186 --> 00:30:31.086 A:middle
它刚在我的视图上查看了

00:30:31.086 --> 00:30:32.566 A:middle
不同的旗标和属性

00:30:32.566 --> 00:30:33.316 A:middle
并正确地配置这个

00:30:33.316 --> 00:30:33.806 A:middle
视图

00:30:34.376 --> 00:30:37.716 A:middle
所以等我们的演示设备

00:30:37.716 --> 00:30:39.166 A:middle
恢复正常 我会向大家展示

00:30:39.166 --> 00:30:39.786 A:middle
实际情况

00:30:39.786 --> 00:30:40.156 A:middle
是什么样的

00:30:40.806 --> 00:30:44.036 A:middle
很好 现在我们

00:30:44.036 --> 00:30:45.226 A:middle
在演示中

00:30:45.226 --> 00:30:47.556 A:middle
展示了未接收的邀请

00:30:47.556 --> 00:30:48.976 A:middle
我们已经准备好测试

00:30:48.976 --> 00:30:50.046 A:middle
刚刚添加的交互

00:30:50.046 --> 00:30:51.756 A:middle
大家看 当我轻点这条信息时

00:30:51.756 --> 00:30:53.986 A:middle
状态就得到了更新

00:30:53.986 --> 00:30:55.216 A:middle
我们可以看到实时的倒计时

00:30:55.216 --> 00:30:56.716 A:middle
大家可以看到

00:30:56.716 --> 00:30:58.626 A:middle
我剩下时间已经很少了

00:30:58.626 --> 00:31:00.466 A:middle
所以我最好抓紧

00:30:58.626 --> 00:31:00.466 A:middle
所以我最好抓紧

00:31:00.636 --> 00:31:01.486 A:middle
现在 我们在这里

00:31:01.486 --> 00:31:03.526 A:middle
遗漏了一样东西

00:31:03.526 --> 00:31:04.686 A:middle
就是右上角那个漂亮的 infoButton

00:31:04.686 --> 00:31:06.166 A:middle
这个按钮提供了大量

00:31:06.166 --> 00:31:07.256 A:middle
有关此事的详情

00:31:07.256 --> 00:31:08.646 A:middle
我不想也不需要把这些信息

00:31:08.646 --> 00:31:09.416 A:middle
放在我的 App 信息里

00:31:10.806 --> 00:31:12.096 A:middle
如果我回到代码

00:31:13.096 --> 00:31:14.396 A:middle
大家会看到这个 infoButton

00:31:14.666 --> 00:31:15.936 A:middle
正在等待

00:31:15.936 --> 00:31:16.526 A:middle
执行

00:31:17.276 --> 00:31:18.356 A:middle
但是在执行之前

00:31:18.356 --> 00:31:19.376 A:middle
我们要把这个 infoButton 添加到

00:31:19.376 --> 00:31:19.996 A:middle
视图层级里

00:31:20.576 --> 00:31:25.956 A:middle
在这个 setupSubViews 里你可以

00:31:25.996 --> 00:31:27.466 A:middle
看到我有这个 infoButton

00:31:27.516 --> 00:31:28.786 A:middle
它已经配置好了

00:31:29.486 --> 00:31:30.396 A:middle
还包括了我正好需要

00:31:30.396 --> 00:31:32.346 A:middle
添加为 subView 的

00:31:32.346 --> 00:31:37.396 A:middle
目标动作

00:31:37.576 --> 00:31:38.436 A:middle
我还想添加一些约束

00:31:38.436 --> 00:31:39.936 A:middle
比如使该视图布局

00:31:40.656 --> 00:31:41.026 A:middle
合理化

00:31:45.316 --> 00:31:47.956 A:middle
然后我们继续

00:31:47.956 --> 00:31:49.076 A:middle
跳至

00:31:49.076 --> 00:31:52.026 A:middle
infoButtonTapped 的执行并

00:31:52.026 --> 00:31:52.646 A:middle
调用我们的委托代理

00:31:53.256 --> 00:31:58.446 A:middle
现在这个视图的委托代理

00:31:58.446 --> 00:32:00.036 A:middle
是我们的应用视图控制器

00:31:58.446 --> 00:32:00.036 A:middle
是我们的应用视图控制器

00:32:00.036 --> 00:32:00.946 A:middle
这个应用视图控制器

00:32:00.946 --> 00:32:02.366 A:middle
是一个知道如何改变

00:32:02.366 --> 00:32:03.756 A:middle
展示风格的对象

00:32:03.756 --> 00:32:04.466 A:middle
所以我需要将其调出

00:32:05.176 --> 00:32:06.196 A:middle
你会看到  这个方法

00:32:06.196 --> 00:32:07.486 A:middle
尚未被执行

00:32:07.486 --> 00:32:07.966 A:middle
但在我的委托代理当中

00:32:07.966 --> 00:32:10.066 A:middle
所以我们要快速

00:32:10.066 --> 00:32:11.036 A:middle
跳至这个委托代理

00:32:11.036 --> 00:32:14.996 A:middle
这是一个委托协议声明

00:32:14.996 --> 00:32:17.116 A:middle
我们可以看到

00:32:17.116 --> 00:32:18.136 A:middle
这个方法尚未被定义

00:32:18.766 --> 00:32:19.536 A:middle
所以我们直接添加上去

00:32:20.026 --> 00:32:22.476 A:middle
然后我们跳转到

00:32:22.476 --> 00:32:23.346 A:middle
这个协议执行的地方

00:32:23.346 --> 00:32:26.966 A:middle
把我们刚刚添加的

00:32:26.966 --> 00:32:30.736 A:middle
新方法添加进去

00:32:30.946 --> 00:32:33.406 A:middle
现在我们所要做的就是

00:32:33.406 --> 00:32:35.766 A:middle
请求这个新的展示风格

00:32:35.766 --> 00:32:36.236 A:middle
就是这样

00:32:37.256 --> 00:32:38.466 A:middle
我这样做的时候

00:32:38.466 --> 00:32:39.746 A:middle
应用视图控制器会请求

00:32:39.746 --> 00:32:41.936 A:middle
这个新的展示风格

00:32:41.936 --> 00:32:43.506 A:middle
Message 应用会在扩展展示中

00:32:43.506 --> 00:32:45.306 A:middle
把这个新的视图控制器

00:32:45.346 --> 00:32:45.986 A:middle
充实进去

00:32:47.376 --> 00:32:49.636 A:middle
这就是刚刚

00:32:49.636 --> 00:32:50.916 A:middle
在代码中执行的同一种

00:32:51.276 --> 00:32:51.386 A:middle
东西

00:32:51.566 --> 00:32:52.616 A:middle
我们在右上角有了这个 infoButton

00:32:52.616 --> 00:32:54.646 A:middle
当你轻点这个按钮时

00:32:54.716 --> 00:32:56.716 A:middle
我们就可以得到漂亮的

00:32:56.716 --> 00:32:58.566 A:middle
扩展展示和其他额外的

00:32:59.106 --> 00:32:59.326 A:middle
内容

00:33:03.206 --> 00:33:03.626 A:middle
就是这样

00:33:03.626 --> 00:33:04.806 A:middle
我们给大家提供了

00:33:04.806 --> 00:33:05.616 A:middle
一次完整的演示--谢谢

00:33:06.516 --> 00:33:10.196 A:middle
[掌声]

00:33:10.696 --> 00:33:11.696 A:middle
通过这一次完整的演示

00:33:11.786 --> 00:33:13.236 A:middle
大家可以看到我们能够

00:33:13.236 --> 00:33:14.956 A:middle
添加完整的自定义布局

00:33:14.996 --> 00:33:16.416 A:middle
这确实可以让我们对文本的体验

00:33:16.416 --> 00:33:17.866 A:middle
变得更加丰富

00:33:17.866 --> 00:33:19.646 A:middle
包括它的内部活动和实时更新

00:33:19.646 --> 00:33:20.126 A:middle
内容

00:33:24.056 --> 00:33:25.366 A:middle
当我们想与这些

00:33:25.366 --> 00:33:28.066 A:middle
实时信息布局

00:33:28.066 --> 00:33:29.656 A:middle
进行交互时

00:33:29.656 --> 00:33:30.366 A:middle
我们只希望保持一种简单

00:33:30.656 --> 00:33:32.996 A:middle
继续使用简单的按钮触发和

00:33:32.996 --> 00:33:34.966 A:middle
轻点手势  并且让我使用

00:33:35.006 --> 00:33:35.546 A:middle
滚动视图

00:33:36.426 --> 00:33:37.616 A:middle
这个 App 信息将被

00:33:37.616 --> 00:33:39.136 A:middle
嵌入一个相当精巧的用户界面

00:33:39.136 --> 00:33:41.546 A:middle
即 Message 文本里

00:33:41.546 --> 00:33:42.836 A:middle
用户将会习惯于

00:33:42.836 --> 00:33:44.626 A:middle
这些交互方式

00:33:44.626 --> 00:33:45.706 A:middle
例如上下滚动文本

00:33:45.706 --> 00:33:46.786 A:middle
左右滚动文本

00:33:47.176 --> 00:33:48.736 A:middle
以及其他可用的手势

00:33:49.386 --> 00:33:50.366 A:middle
如果你在其中添加了过多

00:33:50.366 --> 00:33:51.956 A:middle
复杂的东西

00:33:51.956 --> 00:33:53.236 A:middle
就会让用户感觉很混乱

00:33:54.606 --> 00:33:55.346 A:middle
另外 要记住的一件事是

00:33:55.346 --> 00:33:56.326 A:middle
这些应用信息视图

00:33:56.326 --> 00:33:57.856 A:middle
并不采用键盘输入方式

00:33:57.856 --> 00:33:59.576 A:middle
如果你想要

00:33:59.576 --> 00:34:01.066 A:middle
使用键盘输入

00:33:59.576 --> 00:34:01.066 A:middle
使用键盘输入

00:34:01.066 --> 00:34:02.346 A:middle
就应该请求一个扩展展示风格

00:34:02.346 --> 00:34:04.036 A:middle
这样你的 App 就能够使用

00:34:04.036 --> 00:34:04.406 A:middle
键盘了

00:34:04.916 --> 00:34:07.576 A:middle
出于某种原因

00:34:07.576 --> 00:34:08.396 A:middle
这些实际上都是轻量级的视图

00:34:08.396 --> 00:34:09.606 A:middle
大家想一想它们的

00:34:09.606 --> 00:34:11.536 A:middle
生命周期

00:34:11.536 --> 00:34:13.096 A:middle
它们只有在用户进入对话

00:34:13.096 --> 00:34:14.505 A:middle
并进行查看时  才会充实具体

00:34:15.186 --> 00:34:15.295 A:middle
内容

00:34:15.295 --> 00:34:16.235 A:middle
只要用户离开对话

00:34:16.235 --> 00:34:17.686 A:middle
或离开这个 App

00:34:18.396 --> 00:34:20.045 A:middle
你的 iMessage 应用就会

00:34:20.045 --> 00:34:20.376 A:middle
解除使用

00:34:20.656 --> 00:34:21.656 A:middle
所以这些视图里不适合

00:34:21.656 --> 00:34:22.946 A:middle
加入 3D 游戏引擎这样的

00:34:22.946 --> 00:34:23.235 A:middle
东西

00:34:23.815 --> 00:34:27.856 A:middle
如果你确实想这么做

00:34:27.856 --> 00:34:29.226 A:middle
你应该请求

00:34:29.226 --> 00:34:30.956 A:middle
扩展展示风格

00:34:30.956 --> 00:34:32.616 A:middle
让用户参与你的

00:34:32.616 --> 00:34:33.146 A:middle
扩展交互

00:34:33.696 --> 00:34:36.585 A:middle
现在我想再说一下这个问题

00:34:36.585 --> 00:34:37.176 A:middle
因为我觉得这

00:34:37.176 --> 00:34:38.306 A:middle
很重要

00:34:38.956 --> 00:34:40.616 A:middle
当你在请求

00:34:40.616 --> 00:34:41.786 A:middle
扩展展示风格时

00:34:41.786 --> 00:34:43.196 A:middle
你的文本应用视图控制器

00:34:43.196 --> 00:34:44.626 A:middle
并没有被重新配置成

00:34:44.626 --> 00:34:46.286 A:middle
新的展示风格

00:34:46.286 --> 00:34:47.426 A:middle
而只是留在了文本里

00:34:48.636 --> 00:34:50.906 A:middle
如果没有视图控制器

00:34:50.906 --> 00:34:52.126 A:middle
是以简洁或扩展

00:34:52.126 --> 00:34:54.016 A:middle
展示的风格存在

00:34:54.016 --> 00:34:55.335 A:middle
Message 会充实一个新的对象

00:34:55.656 --> 00:34:56.835 A:middle
并对它进行相应的配置

00:34:57.136 --> 00:34:58.426 A:middle
然后在这里添加它  展示它

00:34:59.286 --> 00:35:01.176 A:middle
如果这类风格的视图控制器确实已经存在

00:34:59.286 --> 00:35:01.176 A:middle
如果这类风格的视图控制器确实已经存在

00:35:01.176 --> 00:35:02.276 A:middle
Message 会将其重新配置为

00:35:02.276 --> 00:35:03.236 A:middle
新的展示风格

00:35:03.996 --> 00:35:05.186 A:middle
这是在某个简洁或

00:35:05.186 --> 00:35:06.576 A:middle
扩展风格的视图控制器确实存在时

00:35:06.576 --> 00:35:07.166 A:middle
一种特殊的对待方法

00:35:07.166 --> 00:35:09.526 A:middle
这样一来  这个视图控制器上的选中信息

00:35:09.526 --> 00:35:11.006 A:middle
就会发生变化

00:35:11.256 --> 00:35:12.226 A:middle
你可以把

00:35:12.226 --> 00:35:13.886 A:middle
在这个视图控制器上

00:35:13.886 --> 00:35:14.456 A:middle
调回未选中的信息调回

00:35:14.996 --> 00:35:17.016 A:middle
现在这个文本应用视图控制器

00:35:17.016 --> 00:35:18.016 A:middle
按照原样留在原位

00:35:18.016 --> 00:35:20.156 A:middle
或是处于静态选中信息的状态

00:35:20.156 --> 00:35:21.466 A:middle
因为它始终

00:35:21.466 --> 00:35:23.006 A:middle
在显示这个文本中的

00:35:23.006 --> 00:35:23.516 A:middle
信息

00:35:23.936 --> 00:35:29.016 A:middle
下面我们稍微谈一谈

00:35:29.016 --> 00:35:31.976 A:middle
iMessage 应用的生命周期问题

00:35:31.976 --> 00:35:34.166 A:middle
在 iOS 10 里 这些

00:35:34.226 --> 00:35:35.546 A:middle
MSMessagesAppViewController 的方法

00:35:35.546 --> 00:35:38.596 A:middle
将专门应用于

00:35:38.596 --> 00:35:40.426 A:middle
你的扩展生命周期

00:35:40.426 --> 00:35:41.936 A:middle
因为只有一个

00:35:41.936 --> 00:35:43.136 A:middle
视图控制器的实例得以创建

00:35:43.276 --> 00:35:45.016 A:middle
它与你的 iMessage App 的

00:35:45.016 --> 00:35:46.306 A:middle
生命周期紧密结合

00:35:46.306 --> 00:35:47.396 A:middle
所以你可以依靠它来

00:35:47.396 --> 00:35:48.526 A:middle
获得扩展生命周期的

00:35:48.926 --> 00:35:49.816 A:middle
通知

00:35:51.046 --> 00:35:52.846 A:middle
然而在 iOS 11 里

00:35:52.846 --> 00:35:55.006 A:middle
我们可以为你的主要分类

00:35:55.006 --> 00:35:55.906 A:middle
充实众多例证

00:35:56.676 --> 00:35:58.336 A:middle
这些方法确实和视图控制器的

00:35:58.336 --> 00:35:59.886 A:middle
生命周期关联更大

00:35:59.886 --> 00:36:01.116 A:middle
你需要从这个角度

00:35:59.886 --> 00:36:01.116 A:middle
你需要从这个角度

00:36:01.116 --> 00:36:02.136 A:middle
来进行思考

00:36:03.536 --> 00:36:04.816 A:middle
如果你需要关注

00:36:04.816 --> 00:36:07.046 A:middle
自己的 iMessage 应用里的

00:36:07.046 --> 00:36:08.416 A:middle
扩展生命周期事件

00:36:08.416 --> 00:36:10.786 A:middle
就应该遵循与 NSExtension 相关的

00:36:10.786 --> 00:36:11.476 A:middle
通知

00:36:14.866 --> 00:36:16.586 A:middle
现在 在一个已经创建的

00:36:16.586 --> 00:36:17.616 A:middle
文本应用视图控制器的

00:36:17.616 --> 00:36:19.636 A:middle
特定实例中

00:36:19.636 --> 00:36:21.026 A:middle
生命周期方法就是这样

00:36:21.026 --> 00:36:21.226 A:middle
展开的

00:36:22.106 --> 00:36:23.266 A:middle
首先 我们把视图控制器进行初始化

00:36:23.266 --> 00:36:25.346 A:middle
再调用 viewDidLoad

00:36:25.346 --> 00:36:29.166 A:middle
然后我们调用 willBecomeActive

00:36:29.166 --> 00:36:30.046 A:middle
和 didBecomeActive

00:36:30.046 --> 00:36:31.446 A:middle
并且把对话作为

00:36:31.446 --> 00:36:32.866 A:middle
Message API 合约的一部分

00:36:33.366 --> 00:36:35.886 A:middle
然后 当你的视图控制器

00:36:35.886 --> 00:36:37.886 A:middle
被嵌入视图层级并加以显示时

00:36:37.886 --> 00:36:38.936 A:middle
视图显示方法

00:36:38.936 --> 00:36:42.036 A:middle
随即会被调用

00:36:42.166 --> 00:36:43.816 A:middle
最后 contentSizeThatFits 将会

00:36:43.816 --> 00:36:44.286 A:middle
被调用

00:36:44.906 --> 00:36:47.716 A:middle
现在 当 willBecomeActive

00:36:47.716 --> 00:36:48.516 A:middle
和 didBecomeActive

00:36:48.516 --> 00:36:49.986 A:middle
和对话一起被调用时

00:36:49.986 --> 00:36:51.246 A:middle
你将获得所需的全部信息

00:36:51.246 --> 00:36:52.516 A:middle
从而可以通过查看

00:36:52.516 --> 00:36:53.936 A:middle
视图控制器中的展示风格

00:36:53.936 --> 00:36:55.276 A:middle
和选定信息

00:36:55.326 --> 00:36:56.296 A:middle
来正确地配置

00:36:56.296 --> 00:36:56.616 A:middle
你的视图控制器

00:36:59.156 --> 00:37:00.096 A:middle
现在我们想一想

00:36:59.156 --> 00:37:00.096 A:middle
现在我们想一想

00:37:00.096 --> 00:37:01.326 A:middle
contentSizeThatFits 是

00:37:01.326 --> 00:37:03.656 A:middle
最后被调用的  原因在于

00:37:03.656 --> 00:37:05.066 A:middle
它可能会被多次调用

00:37:05.816 --> 00:37:06.686 A:middle
我们可以想一想  Message 应用程序

00:37:06.686 --> 00:37:08.416 A:middle
在一台 iPad 上 以分割视图模式

00:37:08.416 --> 00:37:08.826 A:middle
呈现出来的样子

00:37:08.826 --> 00:37:11.616 A:middle
当用户更改

00:37:11.616 --> 00:37:13.626 A:middle
Message 应用的尺寸时

00:37:13.626 --> 00:37:15.076 A:middle
Message 应用的衡量标准会改变

00:37:15.076 --> 00:37:16.006 A:middle
因此其文本也会随之

00:37:16.006 --> 00:37:16.506 A:middle
改变

00:37:17.406 --> 00:37:18.486 A:middle
然后我们

00:37:18.486 --> 00:37:20.306 A:middle
以更新的尺寸或最大的尺寸

00:37:20.306 --> 00:37:22.566 A:middle
来调用你的 contentSizeThatFits 方法

00:37:23.486 --> 00:37:25.286 A:middle
你要相应地更新

00:37:25.336 --> 00:37:26.086 A:middle
你的 App 尺寸

00:37:29.136 --> 00:37:29.986 A:middle
它当然也可以随着

00:37:29.986 --> 00:37:31.566 A:middle
动态文本尺寸更改和

00:37:31.566 --> 00:37:32.646 A:middle
区域更改而更新

00:37:32.726 --> 00:37:36.976 A:middle
最后我想说的问题是

00:37:36.976 --> 00:37:37.896 A:middle
待发送信息

00:37:38.596 --> 00:37:41.406 A:middle
请记住

00:37:41.406 --> 00:37:42.766 A:middle
你的视图控制器可以获得配置

00:37:42.766 --> 00:37:44.546 A:middle
并将呈现以某种文本展示风格

00:37:44.546 --> 00:37:46.136 A:middle
而呈现的 App 信息

00:37:46.656 --> 00:37:48.306 A:middle
既可以用于未发送信息

00:37:48.306 --> 00:37:50.106 A:middle
也可以用于已经在文本形式下

00:37:50.106 --> 00:37:50.716 A:middle
发送的信息

00:37:50.716 --> 00:37:54.486 A:middle
绝大多数时候

00:37:54.486 --> 00:37:56.186 A:middle
你要让同一个应用视图

00:37:56.186 --> 00:37:57.906 A:middle
同时保持这两种状态

00:37:57.906 --> 00:37:59.206 A:middle
因为用户确实会预览

00:37:59.206 --> 00:38:00.096 A:middle
将在这里发送的内容

00:37:59.206 --> 00:38:00.096 A:middle
将在这里发送的内容

00:38:00.496 --> 00:38:01.206 A:middle
但如果你确实需要

00:38:01.206 --> 00:38:02.596 A:middle
将两者区分开来

00:38:03.936 --> 00:38:05.636 A:middle
你可以查看 isPending 旗标

00:38:05.846 --> 00:38:06.826 A:middle
这是 MSMessage 上的一个新属性

00:38:06.966 --> 00:38:09.156 A:middle
它可以让你知道

00:38:09.156 --> 00:38:10.336 A:middle
这两种状态之间的

00:38:11.076 --> 00:38:11.226 A:middle
区别

00:38:13.336 --> 00:38:14.796 A:middle
以上就是今天为大家介绍的

00:38:14.796 --> 00:38:16.336 A:middle
Live Message Layout 的

00:38:16.336 --> 00:38:16.706 A:middle
全部内容

00:38:18.156 --> 00:38:19.276 A:middle
记住 这是以文本呈现的

00:38:19.356 --> 00:38:20.956 A:middle
各类交互性 iMessage 应用

00:38:20.956 --> 00:38:22.306 A:middle
我觉得这样做简直酷得要命

00:38:22.306 --> 00:38:23.086 A:middle
我很期待能看到大家对它

00:38:23.086 --> 00:38:23.546 A:middle
进行创建开发

00:38:24.226 --> 00:38:25.896 A:middle
我们使用的是同样的

00:38:25.896 --> 00:38:27.066 A:middle
MSMessage 应用视图控制器子类

00:38:28.346 --> 00:38:29.656 A:middle
以及新的布局

00:38:29.656 --> 00:38:31.466 A:middle
即拥有新展示风格的

00:38:31.466 --> 00:38:35.076 A:middle
MSMessagesLiveLayout

00:38:35.076 --> 00:38:36.466 A:middle
你可以以此作为工具

00:38:36.466 --> 00:38:37.476 A:middle
开发这些丰富的新体验

00:38:38.826 --> 00:38:39.916 A:middle
我真的非常期待看到

00:38:39.916 --> 00:38:41.296 A:middle
大家利用它来进行开发的成果

00:38:41.296 --> 00:38:42.026 A:middle
我认为你们会

00:38:42.026 --> 00:38:42.836 A:middle
遇到我们尚未

00:38:42.836 --> 00:38:43.286 A:middle
想明白的东西

00:38:43.836 --> 00:38:44.986 A:middle
为此 我想请

00:38:44.986 --> 00:38:46.726 A:middle
Eugene 来介绍一些

00:38:46.726 --> 00:38:47.776 A:middle
使用 Message 框架时的

00:38:47.776 --> 00:38:48.846 A:middle
最佳操作

00:38:49.516 --> 00:38:53.500 A:middle
[掌声]

00:39:02.126 --> 00:39:02.926 A:middle
&gt;&gt; 好的

00:39:03.016 --> 00:39:04.166 A:middle
谢谢 Stephen

00:39:04.466 --> 00:39:06.226 A:middle
Live Message Layout

00:39:06.226 --> 00:39:06.656 A:middle
超级激动人心

00:39:07.676 --> 00:39:08.856 A:middle
在今天讲座的最后

00:39:08.856 --> 00:39:11.156 A:middle
我们要分享几个

00:39:11.156 --> 00:39:12.966 A:middle
iMessage 应用的

00:39:12.966 --> 00:39:14.616 A:middle
最佳操作技巧

00:39:14.616 --> 00:39:15.686 A:middle
从而给大家的应用增加一点

00:39:15.686 --> 00:39:17.166 A:middle
额外的闪光点

00:39:17.166 --> 00:39:18.026 A:middle
我们认为这会让应用真正变得

00:39:18.026 --> 00:39:18.346 A:middle
很棒

00:39:18.446 --> 00:39:19.826 A:middle
所以 我们今天为大家

00:39:19.826 --> 00:39:20.616 A:middle
准备了几个小技巧

00:39:21.366 --> 00:39:23.046 A:middle
我们现在就开始吧

00:39:23.456 --> 00:39:24.276 A:middle
首先我想讲讲

00:39:24.276 --> 00:39:26.376 A:middle
iMessage 应用的

00:39:26.376 --> 00:39:27.416 A:middle
区域嵌入

00:39:27.416 --> 00:39:29.086 A:middle
看这个区域  它位于

00:39:29.086 --> 00:39:32.126 A:middle
屏幕底部

00:39:32.216 --> 00:39:35.856 A:middle
在应用条的下方

00:39:35.856 --> 00:39:37.786 A:middle
同时也位于扩展模式下的

00:39:37.786 --> 00:39:38.116 A:middle
屏幕底部

00:39:38.496 --> 00:39:40.936 A:middle
它跟同导航控制器很相似

00:39:40.936 --> 00:39:43.476 A:middle
Message UI 可以

00:39:43.546 --> 00:39:45.776 A:middle
包含你的应用所展示的区域

00:39:45.776 --> 00:39:47.106 A:middle
所以你可以

00:39:47.106 --> 00:39:48.876 A:middle
在滚动视图时

00:39:48.876 --> 00:39:50.406 A:middle
获得漂亮的模糊效果

00:39:50.436 --> 00:39:52.986 A:middle
要想确定你的应用区域嵌入

00:39:52.986 --> 00:39:54.906 A:middle
你可以查看

00:39:54.906 --> 00:39:56.436 A:middle
UIViewController 顶部及底部的

00:39:56.436 --> 00:39:58.866 A:middle
布局指南 或在 iOS 11 的新功能中

00:39:59.266 --> 00:40:02.036 A:middle
查看 UIViewsafeAreaInsets

00:39:59.266 --> 00:40:02.036 A:middle
查看 UIViewsafeAreaInsets

00:40:02.156 --> 00:40:04.096 A:middle
这些东西将会界定你的

00:40:04.096 --> 00:40:05.676 A:middle
在 Message UI 里所有未被遮蔽的

00:40:05.676 --> 00:40:07.076 A:middle
应用视图区域

00:40:07.886 --> 00:40:09.116 A:middle
当然 你也可以一直

00:40:09.116 --> 00:40:11.696 A:middle
使用 Autolayout 来添加对

00:40:11.696 --> 00:40:12.876 A:middle
UIViewController 的顶部或

00:40:12.876 --> 00:40:13.746 A:middle
底部布局指南的约束

00:40:14.596 --> 00:40:16.906 A:middle
对于连接到 iOS 10 的应用

00:40:17.126 --> 00:40:19.266 A:middle
我们将继续使用

00:40:19.266 --> 00:40:20.246 A:middle
旧版的嵌入

00:40:20.406 --> 00:40:22.106 A:middle
但有一个很好的办法可以

00:40:22.106 --> 00:40:23.766 A:middle
跟进 UI Messages 的改变

00:40:23.766 --> 00:40:25.356 A:middle
并让你的应用进行合理调整

00:40:25.356 --> 00:40:27.146 A:middle
那就是适当地

00:40:27.146 --> 00:40:28.366 A:middle
采用

00:40:28.366 --> 00:40:30.496 A:middle
UIViewsafeAreaInsets 或

00:40:30.496 --> 00:40:32.706 A:middle
UIViewController 顶部和底部的

00:40:32.706 --> 00:40:33.486 A:middle
布局指南

00:40:34.086 --> 00:40:37.756 A:middle
下面我们介绍一下信息摘要

00:40:37.756 --> 00:40:38.316 A:middle
文本

00:40:38.516 --> 00:40:41.086 A:middle
iOS 10 推出了 MSMessage

00:40:41.256 --> 00:40:42.466 A:middle
以及它名为 summaryText

00:40:42.466 --> 00:40:43.156 A:middle
的属性

00:40:43.856 --> 00:40:45.956 A:middle
在 iOS 10 里  summaryText 被用于

00:40:45.956 --> 00:40:49.166 A:middle
附有 MS Session 的信息

00:40:49.166 --> 00:40:50.076 A:middle
这是一种

00:40:50.076 --> 00:40:51.866 A:middle
基于会话的信息传递

00:40:51.866 --> 00:40:54.286 A:middle
我们将插入一个简明扼要的摘要

00:40:54.286 --> 00:40:56.226 A:middle
来内联这个信息的

00:40:56.226 --> 00:40:56.686 A:middle
文本

00:40:56.686 --> 00:40:59.636 A:middle
在 iOS 11 中 我们

00:40:59.636 --> 00:41:01.366 A:middle
将 summaryText 属性的使用

00:40:59.636 --> 00:41:01.366 A:middle
将 summaryText 属性的使用

00:41:01.626 --> 00:41:03.466 A:middle
扩展到了所有已发送的 MSMessages

00:41:03.846 --> 00:41:04.876 A:middle
那么你可以在哪里

00:41:04.876 --> 00:41:05.636 A:middle
看到 summaryText 呢

00:41:07.166 --> 00:41:08.926 A:middle
MSMessage summaryText 现在将

00:41:08.926 --> 00:41:10.606 A:middle
用于对话列表预览

00:41:10.606 --> 00:41:12.446 A:middle
以及通知中心等领域

00:41:12.626 --> 00:41:14.156 A:middle
这样你就可以

00:41:14.156 --> 00:41:15.726 A:middle
把语境提供给

00:41:15.726 --> 00:41:16.996 A:middle
你应用程序的

00:41:16.996 --> 00:41:17.746 A:middle
信息通知

00:41:17.956 --> 00:41:19.186 A:middle
所以这是一个很好的方式

00:41:19.336 --> 00:41:20.926 A:middle
用户可以快速浏览

00:41:20.926 --> 00:41:22.556 A:middle
你在应用信息中

00:41:22.556 --> 00:41:23.306 A:middle
发送的内容

00:41:23.786 --> 00:41:26.416 A:middle
以上就是 iOS 11 中的 summaryText

00:41:26.446 --> 00:41:27.846 A:middle
和每一个单项内容  MSMessages

00:41:28.386 --> 00:41:32.876 A:middle
接下来介绍的是贴纸

00:41:32.876 --> 00:41:34.016 A:middle
自从 iOS 10 引入贴纸包后

00:41:34.016 --> 00:41:36.346 A:middle
我们见证了

00:41:36.466 --> 00:41:37.426 A:middle
无数贴纸的发布

00:41:37.426 --> 00:41:38.656 A:middle
我特别喜欢贴纸

00:41:38.656 --> 00:41:39.466 A:middle
每周都会下载一批新的

00:41:39.876 --> 00:41:41.496 A:middle
密切关注那些超赞的

00:41:41.496 --> 00:41:42.106 A:middle
贴纸包作品

00:41:42.106 --> 00:41:42.486 A:middle
我们喜爱它

00:41:43.556 --> 00:41:44.876 A:middle
我们想分享几条技巧

00:41:44.956 --> 00:41:46.516 A:middle
让大家的贴纸包

00:41:46.626 --> 00:41:48.446 A:middle
使用起来更快速 发送更便捷

00:41:49.056 --> 00:41:50.996 A:middle
总的来说

00:41:50.996 --> 00:41:52.176 A:middle
贴纸包的运行是

00:41:52.176 --> 00:41:53.336 A:middle
关于贴纸文件大小的函数

00:41:53.846 --> 00:41:55.326 A:middle
这个函数

00:41:55.326 --> 00:41:57.486 A:middle
是关于你的贴纸

00:41:57.486 --> 00:41:59.366 A:middle
像素大小以及帧率的

00:41:59.366 --> 00:42:00.106 A:middle
函数

00:41:59.366 --> 00:42:00.106 A:middle
函数

00:42:00.616 --> 00:42:01.716 A:middle
有一个非常好的资源

00:42:01.716 --> 00:42:03.436 A:middle
可以用来参考

00:42:03.436 --> 00:42:04.696 A:middle
它就是 Messages Human Interface Guidelines

00:42:04.696 --> 00:42:05.606 A:middle
这个可以在开发者门户网站获取

00:42:05.606 --> 00:42:07.346 A:middle
这个指南将会告诉你

00:42:07.346 --> 00:42:08.926 A:middle
我们所支持的

00:42:08.926 --> 00:42:11.246 A:middle
目标贴纸的尺寸

00:42:11.246 --> 00:42:12.506 A:middle
包括大中小尺寸的贴纸

00:42:13.226 --> 00:42:15.156 A:middle
另外 还有贴纸的

00:42:15.156 --> 00:42:15.956 A:middle
帧率也要考虑到

00:42:16.566 --> 00:42:18.616 A:middle
具有较高帧率

00:42:18.766 --> 00:42:20.726 A:middle
或循环时间较长的贴纸

00:42:20.726 --> 00:42:22.556 A:middle
会产生较大的内存开销

00:42:22.556 --> 00:42:23.566 A:middle
对贴纸应用的运行也会

00:42:23.566 --> 00:42:24.636 A:middle
产生负面影响

00:42:24.636 --> 00:42:26.016 A:middle
并对发送时间

00:42:26.016 --> 00:42:27.916 A:middle
产生负面影响

00:42:28.426 --> 00:42:30.106 A:middle
因此 为了快速发送贴纸

00:42:30.106 --> 00:42:31.506 A:middle
快速启动贴纸应用

00:42:31.506 --> 00:42:33.056 A:middle
请确保你的

00:42:33.056 --> 00:42:35.476 A:middle
贴纸尺寸正确

00:42:35.606 --> 00:42:37.346 A:middle
并使用短时间的循环  或是较低的

00:42:37.416 --> 00:42:37.866 A:middle
帧率

00:42:38.426 --> 00:42:40.066 A:middle
我非常期待见到

00:42:40.066 --> 00:42:40.966 A:middle
大家在 iOS 11 中设计的

00:42:40.966 --> 00:42:45.626 A:middle
新贴纸包

00:42:45.736 --> 00:42:47.956 A:middle
我们最后要讲的是

00:42:47.996 --> 00:42:49.926 A:middle
MFMessageComposeViewController

00:42:50.286 --> 00:42:52.116 A:middle
MFMessageComposeViewController 是

00:42:52.436 --> 00:42:54.216 A:middle
Message 的 Share Sheet

00:42:54.216 --> 00:42:55.646 A:middle
从你的父级应用程序里

00:42:55.646 --> 00:42:56.376 A:middle
即可调用

00:42:57.426 --> 00:42:58.906 A:middle
在 iOS 10 中 我们在 Share Sheet

00:42:58.906 --> 00:43:00.256 A:middle
添加了新属性

00:42:58.906 --> 00:43:00.256 A:middle
添加了新属性

00:43:00.546 --> 00:43:01.956 A:middle
它名为 Message

00:43:02.146 --> 00:43:04.036 A:middle
可以预先应用 MSMessage

00:43:04.086 --> 00:43:04.636 A:middle
实例

00:43:05.366 --> 00:43:06.806 A:middle
如果你已经有

00:43:06.986 --> 00:43:09.036 A:middle
一个 iMessage 应用

00:43:09.036 --> 00:43:10.746 A:middle
你的父级伴随 App 其实可以

00:43:10.746 --> 00:43:12.486 A:middle
发送同样的应用汽球框

00:43:12.816 --> 00:43:14.206 A:middle
或者是一个模板布局

00:43:14.206 --> 00:43:16.126 A:middle
或者是 liveLayout 你都可以

00:43:16.126 --> 00:43:17.246 A:middle
在 Message 应用里发送

00:43:17.246 --> 00:43:18.376 A:middle
这样你就会得到非常不错

00:43:18.376 --> 00:43:19.916 A:middle
而且连贯一致的分享体验

00:43:20.326 --> 00:43:21.756 A:middle
在你的父级应用

00:43:21.946 --> 00:43:22.996 A:middle
和 iMessage 应用之间进行分享

00:43:24.856 --> 00:43:26.676 A:middle
接收到的 App 汽球框

00:43:26.996 --> 00:43:28.646 A:middle
要么能够在

00:43:28.646 --> 00:43:30.766 A:middle
你的 iMessage 应用里打开

00:43:30.806 --> 00:43:32.146 A:middle
要么能够通过 open URL 命令

00:43:32.146 --> 00:43:34.666 A:middle
将用户弹至其父级应用

00:43:34.666 --> 00:43:35.126 A:middle
程序

00:43:35.406 --> 00:43:37.496 A:middle
所以一定要关注

00:43:37.496 --> 00:43:39.096 A:middle
MFMessageComposeViewController 中的

00:43:39.346 --> 00:43:41.106 A:middle
Message 属性

00:43:41.696 --> 00:43:44.286 A:middle
以上就是我们总结的

00:43:44.286 --> 00:43:44.736 A:middle
一些小技巧

00:43:44.736 --> 00:43:46.036 A:middle
有几件事

00:43:46.036 --> 00:43:46.936 A:middle
需要大家牢记在心

00:43:47.846 --> 00:43:48.916 A:middle
注意查看布局边距

00:43:49.466 --> 00:43:50.906 A:middle
在 iOS 11 的所有 MSMessage 上

00:43:50.906 --> 00:43:52.356 A:middle
设置 summaryText

00:43:53.016 --> 00:43:55.116 A:middle
注意贴纸的尺寸和帧率

00:43:55.116 --> 00:43:56.666 A:middle
以便让贴纸包更快速

00:43:56.666 --> 00:43:57.716 A:middle
同时也要继续设计

00:43:57.716 --> 00:43:58.226 A:middle
那些超赞的贴纸噢

00:43:58.996 --> 00:44:01.556 A:middle
最后 大家现在可以从

00:43:58.996 --> 00:44:01.556 A:middle
最后 大家现在可以从

00:44:01.806 --> 00:44:03.246 A:middle
MFMessageComposeViewController

00:44:03.246 --> 00:44:04.756 A:middle
发送 App 汽球框了

00:44:04.756 --> 00:44:06.186 A:middle
一定要试试这个

00:44:06.186 --> 00:44:07.646 A:middle
从而感受到连贯一致的用户体验

00:44:07.736 --> 00:44:11.286 A:middle
我们今天都了解到哪些事情了呢

00:44:11.646 --> 00:44:13.076 A:middle
我们了解到

00:44:13.076 --> 00:44:14.206 A:middle
MSMessages App UI 的一些新特性

00:44:15.016 --> 00:44:16.966 A:middle
我们了解到 Direct Send API

00:44:16.966 --> 00:44:17.866 A:middle
可以在你的 iMessage 应用里

00:44:17.866 --> 00:44:18.936 A:middle
进行超赞的全新设置

00:44:20.546 --> 00:44:22.216 A:middle
Stephen 和 Jay 带着大家

00:44:22.456 --> 00:44:23.516 A:middle
了解到了 Live Message Layout

00:44:23.516 --> 00:44:25.126 A:middle
我极其期待看到

00:44:25.126 --> 00:44:25.786 A:middle
大家的相关开发成果

00:44:26.566 --> 00:44:28.446 A:middle
最后是几条

00:44:28.486 --> 00:44:32.126 A:middle
最佳操作技巧

00:44:32.256 --> 00:44:33.326 A:middle
如果大家想了解更多信息

00:44:33.706 --> 00:44:36.106 A:middle
可以访问我们会议的网页

00:44:36.106 --> 00:44:36.896 A:middle
就是这个网址

00:44:38.236 --> 00:44:39.526 A:middle
除此之外  我们还有

00:44:39.526 --> 00:44:40.556 A:middle
几场相关会议

00:44:40.556 --> 00:44:41.316 A:middle
将在明天进行

00:44:41.596 --> 00:44:44.426 A:middle
上午 10:00 的一场 就在这个会议厅

00:44:44.426 --> 00:44:46.136 A:middle
主题是“介绍 Business Chat”

00:44:46.136 --> 00:44:47.116 A:middle
我觉得大家

00:44:47.286 --> 00:44:48.666 A:middle
可能都对它极度地

00:44:49.236 --> 00:44:49.626 A:middle
感兴趣

00:44:49.626 --> 00:44:50.936 A:middle
另外 在今年的会议中

00:44:50.936 --> 00:44:52.076 A:middle
我们非常荣幸地请来了

00:44:52.076 --> 00:44:53.756 A:middle
我们 Message 应用的 HI 设计者

00:44:53.756 --> 00:44:56.016 A:middle
明天上午 11:00 在行政宴会厅

00:44:56.016 --> 00:44:57.876 A:middle
他将简短地演示一下

00:44:57.876 --> 00:44:58.256 A:middle
设计过程

00:44:58.996 --> 00:45:00.076 A:middle
谢谢大家的参与

00:44:58.996 --> 00:45:00.076 A:middle
谢谢大家的参与

00:45:00.346 --> 00:45:01.626 A:middle
祝大家聚会愉快

00:45:02.156 --> 00:45:02.436 A:middle
谢谢
