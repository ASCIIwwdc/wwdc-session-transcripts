WEBVTT

00:00:25.066 --> 00:00:30.226 A:middle
&gt;&gt; 大家好 我们都喜欢 Apple 的音乐

00:00:31.036 --> 00:00:32.375 A:middle
正如 Tim 昨天在

00:00:32.375 --> 00:00:34.666 A:middle
Keynote 里面提到的那样

00:00:34.666 --> 00:00:35.466 A:middle
它是我们 DNA 中最基本的组成部分

00:00:36.356 --> 00:00:38.306 A:middle
我也叫 Tim 今天我在这里

00:00:38.306 --> 00:00:40.166 A:middle
要向大家介绍的是

00:00:40.166 --> 00:00:43.426 A:middle
MusicKit

00:00:43.426 --> 00:00:45.526 A:middle
有了它 大家就可以流式播放

00:00:45.526 --> 00:00:46.816 A:middle
Apple Music 上的内容

00:00:48.206 --> 00:00:49.616 A:middle
通过 MusicKit  你可以

00:00:49.616 --> 00:00:55.126 A:middle
访问艺人 专辑 歌曲

00:00:55.126 --> 00:01:00.686 A:middle
歌单 活动

00:00:55.126 --> 00:01:00.686 A:middle
歌单 活动

00:01:00.686 --> 00:01:01.396 A:middle
以及音乐向导

00:01:02.346 --> 00:01:04.316 A:middle
我们还提供

00:01:04.316 --> 00:01:09.856 A:middle
探索性操作 比如搜索和

00:01:09.856 --> 00:01:13.386 A:middle
图表 如果用户

00:01:13.386 --> 00:01:14.386 A:middle
对你的 App 进行了授权

00:01:15.246 --> 00:01:16.856 A:middle
那么我们还会提供个性化推荐

00:01:16.856 --> 00:01:18.256 A:middle
这些推荐

00:01:18.256 --> 00:01:18.976 A:middle
都是根据用户的品味和活动而量身打造的

00:01:24.156 --> 00:01:28.006 A:middle
MusicKit 实际上是两样东西

00:01:28.796 --> 00:01:33.076 A:middle
一方面 它是 iOS SDK 里客户端 API 的

00:01:34.026 --> 00:01:39.086 A:middle
一个集合 另一方面 它还是一套网页

00:01:39.086 --> 00:01:40.776 A:middle
服务 为顾客提供

00:01:40.776 --> 00:01:41.726 A:middle
个性化以及目录式的

00:01:41.726 --> 00:01:41.976 A:middle
内容

00:01:47.266 --> 00:01:49.076 A:middle
我将会讲一讲有关网页

00:01:49.076 --> 00:01:51.366 A:middle
服务的部分 我们将这一部分称作

00:01:51.806 --> 00:01:52.866 A:middle
Apple Music API

00:01:52.906 --> 00:01:57.246 A:middle
这些是

00:01:57.246 --> 00:01:58.036 A:middle
我要讨论的主题

00:01:58.666 --> 00:02:00.006 A:middle
我会讲一下如何

00:01:58.666 --> 00:02:00.006 A:middle
我会讲一下如何

00:02:00.006 --> 00:02:02.316 A:middle
排版请求 如何

00:02:02.316 --> 00:02:03.626 A:middle
通过资源和关系来

00:02:03.626 --> 00:02:05.346 A:middle
展现内容

00:02:06.586 --> 00:02:08.026 A:middle
以及一些和限制和分页相关

00:02:08.026 --> 00:02:08.866 A:middle
的细节

00:02:10.086 --> 00:02:11.376 A:middle
我的同事 Joel 会做一个

00:02:11.376 --> 00:02:11.946 A:middle
简单的演示

00:02:13.416 --> 00:02:14.516 A:middle
我还会谈及个性化

00:02:14.516 --> 00:02:17.786 A:middle
服务 最后讲一讲

00:02:17.786 --> 00:02:19.246 A:middle
如何访问 Apple

00:02:19.246 --> 00:02:22.696 A:middle
Music API

00:02:22.926 --> 00:02:24.716 A:middle
要讲网页服务 API 的话

00:02:24.896 --> 00:02:26.616 A:middle
就必须要

00:02:26.616 --> 00:02:28.986 A:middle
讲一讲 URL 结构

00:02:29.916 --> 00:02:32.316 A:middle
Apple Music API 只支持

00:02:32.316 --> 00:02:35.016 A:middle
安全的 HTTPS Scheme

00:02:35.016 --> 00:02:36.146 A:middle
而且它是由

00:02:36.146 --> 00:02:39.126 A:middle
api.music.apple.com 托管的

00:02:40.286 --> 00:02:42.226 A:middle
URL 路径的第一个元素是

00:02:42.226 --> 00:02:44.166 A:middle
版本

00:02:44.696 --> 00:02:46.596 A:middle
当前版本是 V1

00:02:47.286 --> 00:02:48.606 A:middle
如果我们作出了显著的

00:02:48.606 --> 00:02:49.776 A:middle
改进 或者修复了

00:02:49.776 --> 00:02:50.706 A:middle
向后不兼容的问题 我们将会替换

00:02:50.736 --> 00:02:50.976 A:middle
当前的版本

00:02:56.216 --> 00:02:57.376 A:middle
URL 路径的第二个部分是

00:02:57.376 --> 00:02:59.506 A:middle
目录 它会指示

00:02:59.506 --> 00:03:00.796 A:middle
这是 Apple 乐流

00:02:59.506 --> 00:03:00.796 A:middle
这是 Apple 乐流

00:03:00.796 --> 00:03:04.006 A:middle
内容目录

00:03:04.006 --> 00:03:08.406 A:middle
但是要注意的是 并不是世界上所有区域或地区

00:03:08.406 --> 00:03:10.316 A:middle
都会提供全部的内容

00:03:10.316 --> 00:03:12.516 A:middle
因此我们将会在路径中

00:03:12.516 --> 00:03:13.546 A:middle
引入一个概念

00:03:13.546 --> 00:03:15.106 A:middle
叫做“店面”

00:03:16.146 --> 00:03:18.406 A:middle
“店面”

00:03:18.406 --> 00:03:20.676 A:middle
会将目录调整到提供内容的区域或地区

00:03:20.676 --> 00:03:22.576 A:middle
这样一来

00:03:22.576 --> 00:03:24.196 A:middle
你就可以向你的用户提供相关的

00:03:24.196 --> 00:03:24.976 A:middle
和可以播放的音乐了

00:03:30.796 --> 00:03:33.266 A:middle
下一个部分是 API

00:03:33.536 --> 00:03:34.926 A:middle
这一部分会指示

00:03:34.926 --> 00:03:36.186 A:middle
你想要请求的资源 或是

00:03:36.186 --> 00:03:37.196 A:middle
你想要执行的

00:03:37.196 --> 00:03:37.746 A:middle
操作

00:03:39.076 --> 00:03:41.366 A:middle
最后 我们有一系列

00:03:41.366 --> 00:03:43.396 A:middle
参数 你可以用它来

00:03:43.396 --> 00:03:45.886 A:middle
过滤和拓展请求

00:03:49.526 --> 00:03:51.406 A:middle
我们的 API 是本地化的

00:03:52.566 --> 00:03:54.476 A:middle
我们支持很多种本地化

00:03:55.156 --> 00:03:56.896 A:middle
但是并不是所有“店面”

00:03:56.896 --> 00:03:58.276 A:middle
都支持这些本地化

00:03:59.286 --> 00:04:00.726 A:middle
我们为你提供了一个机制

00:03:59.286 --> 00:04:00.726 A:middle
我们为你提供了一个机制

00:04:00.726 --> 00:04:03.286 A:middle
可以帮助你了解哪些“店面”支持

00:04:03.286 --> 00:04:04.586 A:middle
哪些本地化

00:04:06.336 --> 00:04:08.476 A:middle
API 支持限制和

00:04:08.476 --> 00:04:09.866 A:middle
分页 稍后我会在

00:04:09.866 --> 00:04:10.906 A:middle
我的展示中详细讲一讲

00:04:10.906 --> 00:04:12.506 A:middle
这是怎么

00:04:12.506 --> 00:04:13.076 A:middle
工作的

00:04:14.276 --> 00:04:16.625 A:middle
最后

00:04:16.625 --> 00:04:18.206 A:middle
对 Apple Music API 的每个请求都

00:04:18.206 --> 00:04:18.946 A:middle
都需要开发人员令牌

00:04:25.736 --> 00:04:27.406 A:middle
数据表示对于

00:04:27.406 --> 00:04:29.136 A:middle
任何 API 来说都是很重要的

00:04:29.136 --> 00:04:29.516 A:middle
一个考量

00:04:30.926 --> 00:04:32.316 A:middle
我们依据大量经验

00:04:32.316 --> 00:04:36.036 A:middle
为大家打造的 Apple Music App

00:04:36.036 --> 00:04:38.036 A:middle
为你提供这样一个 API

00:04:38.036 --> 00:04:39.796 A:middle
它同时考量了易用性

00:04:40.246 --> 00:04:42.496 A:middle
灵活性和性能

00:04:44.346 --> 00:04:47.006 A:middle
这里是第一个

00:04:47.006 --> 00:04:48.646 A:middle
资源的表示

00:04:48.646 --> 00:04:50.166 A:middle
我们将其称为“身份”形式

00:04:50.946 --> 00:04:53.776 A:middle
它包含 ID Type

00:04:53.776 --> 00:04:57.446 A:middle
和 Href

00:04:57.446 --> 00:04:58.806 A:middle
Href 是指目录中的位置

00:04:58.806 --> 00:05:00.026 A:middle
也就是你可以

00:04:58.806 --> 00:05:00.026 A:middle
也就是你可以

00:05:00.026 --> 00:05:00.676 A:middle
找到这一内容地方

00:05:01.836 --> 00:05:03.266 A:middle
这对于展示来说

00:05:03.266 --> 00:05:05.576 A:middle
不是很有帮助 这也是为什么我们

00:05:05.576 --> 00:05:07.206 A:middle
还有这一种类型 这是一个

00:05:07.206 --> 00:05:08.086 A:middle
“属性”形式

00:05:08.616 --> 00:05:11.206 A:middle
它包含了身份

00:05:11.206 --> 00:05:12.696 A:middle
和属性列表

00:05:12.696 --> 00:05:14.236 A:middle
你可以用它们展示

00:05:14.236 --> 00:05:15.576 A:middle
内容的相关信息

00:05:16.176 --> 00:05:17.236 A:middle
包括

00:05:17.236 --> 00:05:19.406 A:middle
插图 名字和

00:05:19.406 --> 00:05:21.276 A:middle
描述 如果内容

00:05:21.276 --> 00:05:23.036 A:middle
是可以播放的 还会有一个

00:05:23.036 --> 00:05:24.166 A:middle
属性叫做播放

00:05:24.166 --> 00:05:24.826 A:middle
参数

00:05:27.076 --> 00:05:29.006 A:middle
最后 我们还有一个“默认”

00:05:29.006 --> 00:05:29.356 A:middle
形式

00:05:29.536 --> 00:05:31.816 A:middle
如果你向 Apple Music API

00:05:31.816 --> 00:05:33.436 A:middle
要一个合集

00:05:33.436 --> 00:05:34.736 A:middle
这就是你会默认得到的

00:05:34.736 --> 00:05:35.006 A:middle
东西

00:05:35.526 --> 00:05:36.536 A:middle
它是一种体现属性和

00:05:36.536 --> 00:05:37.516 A:middle
关系的形式

00:05:38.236 --> 00:05:39.526 A:middle
是需要展示的

00:05:39.526 --> 00:05:41.746 A:middle
所有属性以及

00:05:41.746 --> 00:05:43.486 A:middle
内容合集

00:05:43.486 --> 00:05:44.846 A:middle
它与某一具体的资源

00:05:44.846 --> 00:05:45.456 A:middle
相关

00:05:45.996 --> 00:05:49.086 A:middle
我们来讨论一下

00:05:49.086 --> 00:05:49.946 A:middle
关系

00:05:51.756 --> 00:05:53.366 A:middle
这是一张专辑资源

00:05:54.536 --> 00:05:56.116 A:middle
它有三种关系

00:05:57.586 --> 00:05:59.126 A:middle
第一个是和

00:05:59.126 --> 00:05:59.716 A:middle
曲目的关系

00:06:00.166 --> 00:06:01.446 A:middle
即这张专辑

00:06:01.446 --> 00:06:02.686 A:middle
的歌曲和

00:06:02.686 --> 00:06:03.046 A:middle
音乐视频

00:06:04.376 --> 00:06:06.726 A:middle
第二个是和艺人的关系 当然

00:06:06.796 --> 00:06:08.156 A:middle
是指

00:06:08.526 --> 00:06:10.296 A:middle
创作歌曲 专辑

00:06:11.606 --> 00:06:12.296 A:middle
和类型的艺人

00:06:12.996 --> 00:06:14.736 A:middle
类型是指

00:06:15.136 --> 00:06:16.626 A:middle
这张专辑所属的

00:06:16.626 --> 00:06:16.796 A:middle
类别

00:06:17.476 --> 00:06:18.896 A:middle
这些关系

00:06:18.896 --> 00:06:19.756 A:middle
都属于不同种类

00:06:20.976 --> 00:06:23.706 A:middle
第一种和曲目的关系是

00:06:23.706 --> 00:06:25.206 A:middle
属性包含关系

00:06:26.236 --> 00:06:27.646 A:middle
这是指 如果你想要这张

00:06:27.646 --> 00:06:29.656 A:middle
专辑 它将会返回

00:06:29.656 --> 00:06:31.546 A:middle
所有曲目和它们的

00:06:31.546 --> 00:06:32.576 A:middle
所有属性

00:06:32.866 --> 00:06:34.636 A:middle
这意味着 如果你想要

00:06:34.636 --> 00:06:36.056 A:middle
一张专辑 你可以获得

00:06:36.056 --> 00:06:37.496 A:middle
专辑所有歌曲和属性的

00:06:37.496 --> 00:06:38.126 A:middle
数据

00:06:39.526 --> 00:06:41.796 A:middle
第二个种类 艺人

00:06:41.796 --> 00:06:42.706 A:middle
仅仅是一种标识符

00:06:42.906 --> 00:06:44.416 A:middle
它意味着只会返回

00:06:44.416 --> 00:06:46.746 A:middle
标识符形式 定位

00:06:46.746 --> 00:06:48.116 A:middle
和类型 以及在目录中的

00:06:48.116 --> 00:06:49.416 A:middle
位置

00:06:50.396 --> 00:06:52.876 A:middle
最后是默认

00:06:52.876 --> 00:06:53.536 A:middle
不显示

00:06:54.236 --> 00:06:56.006 A:middle
这一部分不会展示在

00:06:56.006 --> 00:06:58.136 A:middle
默认表示中 虽然

00:06:58.136 --> 00:06:59.606 A:middle
这种关系依旧存在

00:07:00.526 --> 00:07:01.326 A:middle
那么我们来看看这是怎么

00:07:01.326 --> 00:07:01.806 A:middle
操作的

00:07:03.226 --> 00:07:05.586 A:middle
这里是一张专辑的 URL

00:07:06.676 --> 00:07:08.366 A:middle
你可以看到在一个 JSON

00:07:08.396 --> 00:07:10.616 A:middle
响应中 曲目中有

00:07:10.616 --> 00:07:14.266 A:middle
一些不显示的属性 艺人是以

00:07:14.266 --> 00:07:15.316 A:middle
标识符的形式存在

00:07:16.216 --> 00:07:17.426 A:middle
那么 当我想要

00:07:17.426 --> 00:07:19.086 A:middle
单次调用并获得

00:07:19.086 --> 00:07:22.006 A:middle
艺人属性时要怎么办

00:07:22.006 --> 00:07:23.216 A:middle
我只需要添加一条 Query

00:07:23.216 --> 00:07:26.176 A:middle
参数 包含并具体说明

00:07:26.176 --> 00:07:27.406 A:middle
关系的名称

00:07:27.686 --> 00:07:28.926 A:middle
这个关系正是符合我想要的

00:07:28.926 --> 00:07:29.826 A:middle
属性的

00:07:31.456 --> 00:07:33.596 A:middle
而且你可以看到我们在这里

00:07:33.596 --> 00:07:34.806 A:middle
省略了艺人的

00:07:34.806 --> 00:07:36.216 A:middle
属性 以及

00:07:36.216 --> 00:07:37.816 A:middle
曲目的属性

00:07:39.066 --> 00:07:40.146 A:middle
你可以看到在这一响应中

00:07:40.146 --> 00:07:41.426 A:middle
不包含类型

00:07:42.026 --> 00:07:43.016 A:middle
那么我们要如何包含

00:07:43.016 --> 00:07:44.386 A:middle
类型的属性呢

00:07:45.726 --> 00:07:47.356 A:middle
你只需要添加类型到

00:07:47.356 --> 00:07:51.076 A:middle
包含的 Query 参数

00:07:51.076 --> 00:07:52.526 A:middle
你可以看到类型在

00:07:52.526 --> 00:07:54.566 A:middle
属性格式中不显示

00:07:55.086 --> 00:07:57.466 A:middle
这就是有关

00:07:57.466 --> 00:07:58.656 A:middle
资源和关系的一些介绍

00:07:58.656 --> 00:08:00.126 A:middle
下面我要讲讲

00:07:58.656 --> 00:08:00.126 A:middle
下面我要讲讲

00:08:00.126 --> 00:08:01.226 A:middle
限制和分页

00:08:02.556 --> 00:08:04.056 A:middle
这里我有一个

00:08:04.056 --> 00:08:05.276 A:middle
针对某一专辑曲目资源的

00:08:05.276 --> 00:08:05.566 A:middle
请求

00:08:05.846 --> 00:08:07.776 A:middle
它会给我一个

00:08:08.946 --> 00:08:11.416 A:middle
此张专辑歌曲的合集

00:08:12.076 --> 00:08:13.566 A:middle
这张专辑刚好有 9 首歌

00:08:14.566 --> 00:08:15.996 A:middle
如果我想要限制

00:08:15.996 --> 00:08:17.336 A:middle
我所获得得曲目数量

00:08:17.816 --> 00:08:19.746 A:middle
我仅需要添加

00:08:19.746 --> 00:08:22.916 A:middle
Query 参数 比如我

00:08:22.916 --> 00:08:24.276 A:middle
想将页码限制为 2

00:08:25.676 --> 00:08:27.026 A:middle
它就会展示给我

00:08:27.026 --> 00:08:30.236 A:middle
此张专辑的前两首歌 然后它有一个

00:08:30.236 --> 00:08:35.096 A:middle
Next 键

00:08:35.096 --> 00:08:36.876 A:middle
来指示剩余

00:08:36.876 --> 00:08:37.716 A:middle
曲目的位置

00:08:39.296 --> 00:08:44.096 A:middle
如果我继续追踪这个 Next 键的链接

00:08:44.265 --> 00:08:46.446 A:middle
我将会看到这张专辑剩下的曲目

00:08:46.446 --> 00:08:48.036 A:middle
从第 3 首到

00:08:48.036 --> 00:08:48.346 A:middle
第 9 首

00:08:49.776 --> 00:08:51.516 A:middle
如果我想要实现

00:08:51.516 --> 00:08:55.556 A:middle
页数限制为 2 我只再次需要添加

00:08:55.556 --> 00:08:57.076 A:middle
limit ＝ 2

00:08:57.726 --> 00:08:59.726 A:middle
它会向我展示第 3 和第 4 首歌

00:09:01.086 --> 00:09:03.376 A:middle
它会再一次出现 Next 的提示 和一个

00:09:03.376 --> 00:09:04.006 A:middle
URL  来指示

00:09:04.006 --> 00:09:04.976 A:middle
剩余部分专辑的数据的位置

00:09:09.236 --> 00:09:10.566 A:middle
那么这在

00:09:10.566 --> 00:09:10.976 A:middle
操作中是怎么样的呢

00:09:11.736 --> 00:09:12.466 A:middle
就像这样

00:09:12.546 --> 00:09:14.446 A:middle
你可以看到 Next

00:09:14.446 --> 00:09:16.626 A:middle
这一提示是

00:09:16.626 --> 00:09:17.826 A:middle
这些曲目数据合集的

00:09:17.826 --> 00:09:19.806 A:middle
“兄弟”

00:09:21.126 --> 00:09:22.226 A:middle
我已经讲了一些关于资源的

00:09:22.656 --> 00:09:24.956 A:middle
内容

00:09:25.046 --> 00:09:27.916 A:middle
关系和分页的一些问题

00:09:28.306 --> 00:09:31.986 A:middle
下面我们来看一个操作

00:09:33.476 --> 00:09:35.756 A:middle
我们的绝大多数操作获得的是

00:09:35.756 --> 00:09:38.416 A:middle
一个资源合集

00:09:38.416 --> 00:09:39.726 A:middle
这个合集是根据它们的种类分组

00:09:39.726 --> 00:09:40.256 A:middle
得来的

00:09:40.756 --> 00:09:43.346 A:middle
例如 搜索 Khalid

00:09:43.526 --> 00:09:45.106 A:middle
会得到专辑

00:09:45.666 --> 00:09:47.906 A:middle
艺人 歌曲和播放列表

00:09:48.526 --> 00:09:50.146 A:middle
如果我想要限制

00:09:50.146 --> 00:09:51.656 A:middle
搜索获得的内容种类

00:09:51.656 --> 00:09:53.526 A:middle
我只需要添加

00:09:53.526 --> 00:09:55.156 A:middle
类型 Query 参数并且

00:09:55.156 --> 00:09:57.906 A:middle
详细说明我想要的

00:09:57.906 --> 00:09:58.796 A:middle
种类

00:09:59.486 --> 00:10:02.086 A:middle
这里我想要的是专辑

00:09:59.486 --> 00:10:02.086 A:middle
这里我想要的是专辑

00:10:02.086 --> 00:10:03.576 A:middle
当我调用它 我会得到一个

00:10:03.576 --> 00:10:04.666 A:middle
专辑合集

00:10:06.916 --> 00:10:08.286 A:middle
现在 我要欢迎我的

00:10:08.286 --> 00:10:09.796 A:middle
同事 Joel 来到舞台上

00:10:09.796 --> 00:10:11.636 A:middle
像我们快速演示一下 如何进行 Playground

00:10:11.636 --> 00:10:11.976 A:middle
搜索请求

00:10:12.516 --> 00:10:15.416 A:middle
[掌声]

00:10:15.916 --> 00:10:18.716 A:middle
&gt;&gt; 谢谢你 Tim

00:10:18.936 --> 00:10:20.216 A:middle
大家后 我是 Joel 下面我

00:10:20.216 --> 00:10:21.546 A:middle
要向大家展示一下

00:10:21.546 --> 00:10:23.906 A:middle
从 Apple Music 获取内容来丰富你

00:10:23.906 --> 00:10:26.046 A:middle
Swift 中的 App

00:10:26.506 --> 00:10:27.166 A:middle
是多么简单

00:10:28.876 --> 00:10:30.546 A:middle
我会先向你展示

00:10:30.546 --> 00:10:32.216 A:middle
如何从

00:10:32.216 --> 00:10:33.616 A:middle
这个目录搜索终端中获取内容

00:10:34.196 --> 00:10:35.746 A:middle
现在我门来搜一下

00:10:35.916 --> 00:10:37.206 A:middle
Khalid 的专辑

00:10:38.236 --> 00:10:40.796 A:middle
我们只需要为这个搜索请求

00:10:40.876 --> 00:10:42.616 A:middle
使用 URL 成分

00:10:42.616 --> 00:10:44.636 A:middle
构建一个 URL

00:10:44.926 --> 00:10:46.156 A:middle
很重要的一点是

00:10:46.156 --> 00:10:49.526 A:middle
包含在“店面”国家代码中的

00:10:49.526 --> 00:10:51.036 A:middle
路径中的 URL

00:10:51.526 --> 00:10:52.706 A:middle
与用户相符

00:10:54.836 --> 00:10:56.276 A:middle
然后你需要添加一些

00:10:56.276 --> 00:10:58.016 A:middle
Query 参数到这个

00:10:58.016 --> 00:11:00.116 A:middle
请求中 我们可以

00:10:58.016 --> 00:11:00.116 A:middle
请求中 我们可以

00:11:00.336 --> 00:11:02.166 A:middle
通过 Query 项目来做到这一点 我们

00:11:02.166 --> 00:11:04.876 A:middle
只需要将“term”改成“Khalid”

00:11:04.876 --> 00:11:05.916 A:middle
将“types”改成“2 albums”

00:11:09.646 --> 00:11:10.746 A:middle
这样 你就可以

00:11:10.746 --> 00:11:12.266 A:middle
构建一个格式完整的 URL

00:11:12.896 --> 00:11:14.406 A:middle
以及基于它的一个

00:11:14.406 --> 00:11:14.696 A:middle
URL 请求

00:11:15.766 --> 00:11:18.066 A:middle
然后 你需要在这个 URL 请求中

00:11:18.066 --> 00:11:19.856 A:middle
包含一个 HTTP 标头

00:11:19.856 --> 00:11:20.636 A:middle
这是一个

00:11:20.726 --> 00:11:23.216 A:middle
授权标头 它对于

00:11:23.216 --> 00:11:25.136 A:middle
用 Apple Music API 来验证你的 App

00:11:25.136 --> 00:11:26.186 A:middle
很有用

00:11:27.666 --> 00:11:28.786 A:middle
现在我们要使用

00:11:28.786 --> 00:11:30.936 A:middle
开发人员令牌与载体前缀

00:11:30.936 --> 00:11:32.906 A:middle
共同作为

00:11:33.166 --> 00:11:34.316 A:middle
这个 HTTP 标头值的一部分

00:11:34.786 --> 00:11:38.466 A:middle
下一步 我们可以通过

00:11:38.746 --> 00:11:42.086 A:middle
使用 URL 部分加载数据 通过这个

00:11:42.086 --> 00:11:44.336 A:middle
原始 JSON 数据 我们只需要使用

00:11:44.336 --> 00:11:46.766 A:middle
Swift 4 中的新 JSON 解码器

00:11:47.296 --> 00:11:48.956 A:middle
来解析数据

00:11:48.956 --> 00:11:50.446 A:middle
这使得将

00:11:50.446 --> 00:11:52.556 A:middle
JSON 数据转换成高度类型化的

00:11:52.866 --> 00:11:53.836 A:middle
Swift 结构变得很简单

00:11:54.156 --> 00:11:56.166 A:middle
你仅需要定义一些

00:11:56.166 --> 00:11:57.856 A:middle
遵循可编码协议的

00:11:57.856 --> 00:12:00.786 A:middle
Swift 结构 然后

00:11:57.856 --> 00:12:00.786 A:middle
Swift 结构 然后

00:12:00.996 --> 00:12:03.166 A:middle
你就可以将这些结构输送到

00:12:03.166 --> 00:12:04.046 A:middle
JSON 解码器

00:12:04.046 --> 00:12:05.356 A:middle
在这个例子中 我会将

00:12:05.356 --> 00:12:06.676 A:middle
CatalogSearchResults 结构

00:12:07.046 --> 00:12:09.116 A:middle
传递到 JSON 解码器中

00:12:09.236 --> 00:12:10.486 A:middle
通过搜索数据

00:12:10.876 --> 00:12:12.516 A:middle
我可以看一眼

00:12:12.516 --> 00:12:13.116 A:middle
结果

00:12:13.776 --> 00:12:15.246 A:middle
现在 我要寻找

00:12:15.246 --> 00:12:16.646 A:middle
这些结果中的第一张专辑

00:12:16.646 --> 00:12:18.436 A:middle
让我们来看一下

00:12:18.436 --> 00:12:21.456 A:middle
我们获得的属性

00:12:21.646 --> 00:12:23.516 A:middle
显然我们得到的是 Khalid 的

00:12:23.516 --> 00:12:26.006 A:middle
《American Teen》这张专辑 以及

00:12:26.006 --> 00:12:28.126 A:middle
其他相关属性

00:12:29.026 --> 00:12:30.506 A:middle
如你所见 我们还有

00:12:30.506 --> 00:12:31.336 A:middle
一些关于

00:12:31.336 --> 00:12:33.616 A:middle
图案的信息 它有一个

00:12:33.616 --> 00:12:35.056 A:middle
URL 但是你仔细

00:12:35.056 --> 00:12:36.696 A:middle
看一下这个 URL  就会发现它不仅仅是一个

00:12:36.696 --> 00:12:38.046 A:middle
URL 格式字符串 因为它

00:12:38.046 --> 00:12:40.506 A:middle
可以让你替换

00:12:40.556 --> 00:12:42.486 A:middle
URL 最后的宽度和高度标志

00:12:42.486 --> 00:12:44.756 A:middle
选择理想的宽度

00:12:44.756 --> 00:12:46.356 A:middle
和高度来配合

00:12:46.356 --> 00:12:48.016 A:middle
你 App 中的用户界面

00:12:48.516 --> 00:12:51.246 A:middle
所以 要想获得

00:12:51.246 --> 00:12:53.976 A:middle
这张专辑的图案 我只需要在

00:12:53.976 --> 00:12:55.726 A:middle
这个图案结构上创建一个 Helper 方法

00:12:55.726 --> 00:12:57.546 A:middle
这真的

00:12:57.546 --> 00:12:58.226 A:middle
很简单

00:12:58.366 --> 00:12:59.736 A:middle
我们将替换宽度

00:12:59.736 --> 00:13:02.536 A:middle
令牌 大括号 w 大括号

00:12:59.736 --> 00:13:02.536 A:middle
令牌 大括号 w 大括号

00:13:02.536 --> 00:13:04.606 A:middle
“with” 理想的宽度

00:13:05.056 --> 00:13:07.806 A:middle
好了 下面我们以同样的方式调整

00:13:07.806 --> 00:13:08.186 A:middle
高度

00:13:08.396 --> 00:13:10.206 A:middle
由于绝大多数

00:13:10.206 --> 00:13:11.456 A:middle
音乐内容的图案都是

00:13:11.456 --> 00:13:12.386 A:middle
正方形 所以我们只需要使用

00:13:12.386 --> 00:13:13.126 A:middle
同样的宽度和高度

00:13:13.126 --> 00:13:15.836 A:middle
这样一来你就有了一个结构完整的

00:13:15.836 --> 00:13:16.486 A:middle
URL

00:13:17.676 --> 00:13:20.366 A:middle
所以 这里 我刚刚

00:13:20.366 --> 00:13:24.156 A:middle
为这张专辑构建了一个 URL

00:13:24.156 --> 00:13:26.256 A:middle
宽 1200 像素 让我们来

00:13:26.256 --> 00:13:26.976 A:middle
看看我们得到了什么

00:13:31.446 --> 00:13:32.256 A:middle
在这里

00:13:32.326 --> 00:13:33.586 A:middle
这是一张专辑封面

00:13:33.586 --> 00:13:34.916 A:middle
Khalid 的《American Teen》

00:13:34.916 --> 00:13:35.346 A:middle
《American Teen》

00:13:35.726 --> 00:13:38.936 A:middle
所以我们看到

00:13:38.936 --> 00:13:40.246 A:middle
从 Apple Music 获取内容是多么容易

00:13:40.446 --> 00:13:41.666 A:middle
现在我要把 Tim 继续请到台上来

00:13:41.666 --> 00:13:43.246 A:middle
他会告诉你所有

00:13:43.246 --> 00:13:44.606 A:middle
关于个性化请求的东西

00:13:44.606 --> 00:13:44.806 A:middle
谢谢

00:13:45.516 --> 00:13:48.836 A:middle
[掌声]

00:13:49.336 --> 00:13:49.916 A:middle
&gt;&gt; 谢谢 Joel

00:13:50.176 --> 00:13:53.996 A:middle
那么下面我要讲一讲

00:13:53.996 --> 00:13:55.486 A:middle
关于 Apple Music API

00:13:55.756 --> 00:13:57.046 A:middle
个性化请求的问题

00:13:58.416 --> 00:13:59.446 A:middle
URL 只是有

00:13:59.446 --> 00:14:00.266 A:middle
一些不同

00:13:59.446 --> 00:14:00.266 A:middle
一些不同

00:14:00.786 --> 00:14:03.036 A:middle
在版本号后面你可以看到

00:14:03.036 --> 00:14:04.666 A:middle
所有的个性化调用都是

00:14:04.956 --> 00:14:05.806 A:middle
以“me”开始的

00:14:06.016 --> 00:14:07.416 A:middle
这里我有一个 URL  它可以

00:14:07.416 --> 00:14:08.576 A:middle
向我提供

00:14:08.576 --> 00:14:12.236 A:middle
用户账号最近播放的项目

00:14:13.876 --> 00:14:16.176 A:middle
你还可以看到

00:14:16.176 --> 00:14:18.726 A:middle
路径的“店面”部分

00:14:18.726 --> 00:14:19.136 A:middle
缺失了

00:14:19.856 --> 00:14:22.176 A:middle
那是因为用户帐号

00:14:22.276 --> 00:14:24.426 A:middle
绑定了“店面” 所以

00:14:24.426 --> 00:14:26.126 A:middle
他们只能播放

00:14:26.126 --> 00:14:27.406 A:middle
“店面”提供的内容

00:14:27.406 --> 00:14:28.866 A:middle
在这一“店面”中 他们的帐号

00:14:28.866 --> 00:14:30.266 A:middle
合法可用

00:14:31.616 --> 00:14:34.216 A:middle
那么 你需要什么来进行播放

00:14:34.386 --> 00:14:35.156 A:middle
你需要怎么样获得

00:14:35.156 --> 00:14:36.066 A:middle
个性化的数据

00:14:36.166 --> 00:14:37.976 A:middle
用户必须订阅 Apple

00:14:37.976 --> 00:14:40.396 A:middle
Music 而且

00:14:40.396 --> 00:14:41.936 A:middle
所有个性化请求的调用

00:14:41.936 --> 00:14:44.076 A:middle
都需要两样东西

00:14:44.076 --> 00:14:46.316 A:middle
开发人员标志和音乐

00:14:46.316 --> 00:14:47.906 A:middle
用户标志 Joel 会在后半部分的展示中

00:14:47.906 --> 00:14:49.036 A:middle
告诉你

00:14:49.036 --> 00:14:50.166 A:middle
如何获取它们

00:14:50.286 --> 00:14:54.196 A:middle
那么 我要怎样访问

00:14:55.926 --> 00:14:56.066 A:middle
API 呢

00:14:56.276 --> 00:14:58.426 A:middle
第一点 你必须是

00:14:58.426 --> 00:14:59.736 A:middle
Apple 开发人员计划的的成员

00:15:01.796 --> 00:15:03.786 A:middle
第二点 你需要一个

00:15:03.786 --> 00:15:06.286 A:middle
MusicKit 密钥

00:15:06.516 --> 00:15:07.916 A:middle
你可以在

00:15:07.916 --> 00:15:09.646 A:middle
Apple 开发人员门户网站的帐户部分

00:15:09.646 --> 00:15:11.266 A:middle
找到 MusicKit 密钥

00:15:11.266 --> 00:15:13.386 A:middle
位于 Certificates and Identities（凭证和身份）

00:15:13.386 --> 00:15:13.656 A:middle
部分

00:15:13.656 --> 00:15:15.766 A:middle
一旦你有了这个 MusicKit 密钥

00:15:15.766 --> 00:15:17.766 A:middle
就可以用它来签署

00:15:17.856 --> 00:15:18.846 A:middle
开发人员令牌

00:15:19.366 --> 00:15:21.196 A:middle
开发人员令牌以 JSON

00:15:21.196 --> 00:15:23.726 A:middle
网页令牌形式存在

00:15:23.726 --> 00:15:26.716 A:middle
和 APNS 令牌很像 而且

00:15:26.716 --> 00:15:29.116 A:middle
正如我前面提到的

00:15:29.116 --> 00:15:30.746 A:middle
对于所有 Apple Music API 请求的标头来说

00:15:30.746 --> 00:15:33.136 A:middle
它都是必要的

00:15:35.526 --> 00:15:37.436 A:middle
这里是一个关于安全性的提醒

00:15:38.356 --> 00:15:39.876 A:middle
请保证你 MusicKit 密钥

00:15:39.876 --> 00:15:40.286 A:middle
的安全

00:15:40.766 --> 00:15:42.656 A:middle
不要将它嵌入

00:15:42.656 --> 00:15:44.096 A:middle
你应用的二进制文件中

00:15:44.546 --> 00:15:46.166 A:middle
我们建议你

00:15:46.166 --> 00:15:47.936 A:middle
动态生成自己的

00:15:47.936 --> 00:15:50.216 A:middle
开发人员令牌 最好是在

00:15:50.216 --> 00:15:51.286 A:middle
一个

00:15:51.286 --> 00:15:52.376 A:middle
你既能控制又有

00:15:52.376 --> 00:15:52.976 A:middle
访问权限的服务器上进行

00:15:57.336 --> 00:15:59.576 A:middle
我想说一些关于开发人员令牌格式的

00:15:59.626 --> 00:16:00.596 A:middle
注意事项

00:15:59.626 --> 00:16:00.596 A:middle
注意事项

00:16:01.996 --> 00:16:03.696 A:middle
开发人员标志有两部分

00:16:05.206 --> 00:16:08.356 A:middle
必要的标头 也就是

00:16:08.356 --> 00:16:09.356 A:middle
加密算法

00:16:09.706 --> 00:16:11.876 A:middle
我们仅支持 ES256 作为我们的

00:16:11.876 --> 00:16:13.536 A:middle
编码算法 以及

00:16:13.536 --> 00:16:14.426 A:middle
一个密钥标识符

00:16:14.796 --> 00:16:16.506 A:middle
当你下载你的 MusicKit

00:16:16.506 --> 00:16:18.166 A:middle
密钥时 你可以

00:16:18.166 --> 00:16:19.706 A:middle
在下载的某一部分找到它

00:16:21.576 --> 00:16:23.616 A:middle
第二部分是一些必要的

00:16:23.616 --> 00:16:24.226 A:middle
声明

00:16:24.286 --> 00:16:26.016 A:middle
我们有三条必要的声明

00:16:26.306 --> 00:16:30.046 A:middle
一个发行人 ID 也就是团队

00:16:30.046 --> 00:16:31.296 A:middle
ID 你可以在

00:16:31.296 --> 00:16:32.736 A:middle
Apple 开发人员门户网站的“Membership（会员）”部分

00:16:32.736 --> 00:16:33.526 A:middle
找到它

00:16:34.556 --> 00:16:36.076 A:middle
第二个是

00:16:36.076 --> 00:16:37.796 A:middle
这个开发人员令牌的发行时间 它是

00:16:37.796 --> 00:16:41.606 A:middle
UNIX 格式的 第三个是

00:16:41.606 --> 00:16:42.596 A:middle
有效日期

00:16:44.726 --> 00:16:46.906 A:middle
只能生成

00:16:46.906 --> 00:16:49.366 A:middle
从即日起 6 个月失效的令牌

00:16:50.766 --> 00:16:53.936 A:middle
那么 我会把

00:16:53.936 --> 00:16:54.476 A:middle
接下来的

00:16:54.476 --> 00:16:55.506 A:middle
展示交给我的同事

00:16:55.506 --> 00:16:56.166 A:middle
Joel 他会告诉你

00:16:56.166 --> 00:16:57.566 A:middle
如何在 iOS 系统上使用

00:16:57.566 --> 00:16:57.976 A:middle
MusicKit

00:16:58.516 --> 00:17:02.476 A:middle
[掌声]

00:16:58.516 --> 00:17:02.476 A:middle
[掌声]

00:17:02.976 --> 00:17:03.496 A:middle
&gt;&gt; 谢谢 Tim

00:17:05.675 --> 00:17:07.786 A:middle
大家好 又是我 那么我要来告诉大家

00:17:07.786 --> 00:17:09.036 A:middle
你们怎样才能

00:17:09.036 --> 00:17:10.685 A:middle
让你 iOS 系统上的 App 最大程度地利用

00:17:10.685 --> 00:17:11.796 A:middle
MusicKit

00:17:12.596 --> 00:17:14.536 A:middle
首先我会

00:17:14.536 --> 00:17:16.036 A:middle
告诉你更多关于如何

00:17:16.036 --> 00:17:17.476 A:middle
完全访问 Apple

00:17:17.476 --> 00:17:18.046 A:middle
Music API 的信息

00:17:19.195 --> 00:17:21.195 A:middle
然后我会告诉你

00:17:21.195 --> 00:17:22.296 A:middle
当我们在面对一位

00:17:22.296 --> 00:17:23.306 A:middle
现在不知道

00:17:23.306 --> 00:17:24.386 A:middle
Apple Music 订阅的存在的用户时

00:17:24.386 --> 00:17:25.046 A:middle
需要做什么

00:17:25.726 --> 00:17:26.816 A:middle
最后我会告诉你如何

00:17:26.816 --> 00:17:29.246 A:middle
使用 iOS SDK 来

00:17:29.716 --> 00:17:31.996 A:middle
启动和控制订阅

00:17:32.196 --> 00:17:33.116 A:middle
以及资料库

00:17:33.116 --> 00:17:33.636 A:middle
的播放

00:17:33.636 --> 00:17:36.726 A:middle
那么先来讲一讲如何

00:17:36.726 --> 00:17:38.156 A:middle
完全访问 Apple Music API

00:17:39.116 --> 00:17:40.876 A:middle
也许你想到的第一件事

00:17:40.876 --> 00:17:43.216 A:middle
是验证 但是

00:17:43.216 --> 00:17:45.146 A:middle
事实上 绝大多数用户

00:17:45.146 --> 00:17:46.966 A:middle
都已经在他们的 iOS 设备上注册了 iTunes

00:17:46.966 --> 00:17:48.676 A:middle
Store 帐户

00:17:48.676 --> 00:17:50.406 A:middle
因此 你

00:17:50.406 --> 00:17:51.606 A:middle
真的不需要担心

00:17:51.726 --> 00:17:53.626 A:middle
去提醒用户获得该资格

00:17:54.736 --> 00:17:56.286 A:middle
然而 鉴于在 iOS 系统上

00:17:56.286 --> 00:17:58.396 A:middle
隐私是非常重要的考量

00:17:58.396 --> 00:18:00.276 A:middle
你真的需要在我们允许你的 App

00:17:58.396 --> 00:18:00.276 A:middle
你真的需要在我们允许你的 App

00:18:00.276 --> 00:18:02.516 A:middle
访问 Apple Music 之前获得

00:18:02.516 --> 00:18:04.046 A:middle
用户的许可

00:18:05.756 --> 00:18:07.736 A:middle
这个用户许可

00:18:07.736 --> 00:18:09.206 A:middle
类似于你

00:18:09.206 --> 00:18:11.186 A:middle
在访问用户位置或

00:18:11.456 --> 00:18:13.346 A:middle
用户联系人信息时

00:18:13.346 --> 00:18:15.436 A:middle
请求许可

00:18:16.996 --> 00:18:18.706 A:middle
这对于

00:18:18.706 --> 00:18:21.036 A:middle
每一个应用

00:18:21.036 --> 00:18:22.366 A:middle
每一台 iOS 设备都是必要的

00:18:22.366 --> 00:18:24.796 A:middle
因此 如果你的 App

00:18:24.796 --> 00:18:26.066 A:middle
在同一个用户的 iPhone 和 iPad

00:18:26.066 --> 00:18:27.596 A:middle
上运行 请确保

00:18:27.596 --> 00:18:29.016 A:middle
分别请求用户许可

00:18:30.716 --> 00:18:32.666 A:middle
这就是用户许可

00:18:32.666 --> 00:18:36.306 A:middle
对话框在 Nike

00:18:36.306 --> 00:18:39.736 A:middle
Plus Run Club App 里的样子 这就是

00:18:39.806 --> 00:18:41.816 A:middle
标准的保护隐私的

00:18:41.816 --> 00:18:42.396 A:middle
用户许可对话框

00:18:43.346 --> 00:18:44.536 A:middle
一个重要的部分是

00:18:44.536 --> 00:18:46.306 A:middle
副标题

00:18:46.306 --> 00:18:47.716 A:middle
第三方 App 开发人员

00:18:47.716 --> 00:18:49.526 A:middle
须在这里通知用户

00:18:49.526 --> 00:18:51.706 A:middle
为什么要访问

00:18:51.706 --> 00:18:52.976 A:middle
用户的 Apple Music 数据

00:18:57.276 --> 00:18:59.606 A:middle
请求用户许可

00:18:59.606 --> 00:19:01.516 A:middle
对于访问

00:18:59.606 --> 00:19:01.516 A:middle
对于访问

00:19:01.516 --> 00:19:03.526 A:middle
设备资料库和

00:19:03.526 --> 00:19:04.596 A:middle
音乐用户令牌都是必需的

00:19:05.116 --> 00:19:07.346 A:middle
你可以读取你 App 当前的

00:19:07.346 --> 00:19:09.216 A:middle
授权状态

00:19:09.216 --> 00:19:10.046 A:middle
来确认你是否

00:19:10.046 --> 00:19:11.786 A:middle
已经获得该用户许可

00:19:12.356 --> 00:19:13.926 A:middle
这不会通过

00:19:13.926 --> 00:19:15.616 A:middle
刚才我展示的对话框

00:19:15.616 --> 00:19:16.096 A:middle
来通知用户

00:19:16.396 --> 00:19:17.496 A:middle
然而 你也可以直接

00:19:17.496 --> 00:19:19.996 A:middle
请求授权 这会

00:19:19.996 --> 00:19:21.826 A:middle
通知用户 除非你的

00:19:21.826 --> 00:19:23.236 A:middle
App 已经获得

00:19:24.016 --> 00:19:24.706 A:middle
授权

00:19:25.296 --> 00:19:28.336 A:middle
为了做到这一点 你可以使用一个类

00:19:28.336 --> 00:19:29.476 A:middle
和 StoreKit 框架

00:19:29.756 --> 00:19:30.156 A:middle
它叫作

00:19:30.456 --> 00:19:32.756 A:middle
SKCloudServiceController

00:19:32.756 --> 00:19:34.156 A:middle
你可以调用其中的一个

00:19:34.156 --> 00:19:35.346 A:middle
名为 RequestAuthorization

00:19:35.626 --> 00:19:36.926 A:middle
的类方法

00:19:38.106 --> 00:19:39.006 A:middle
我们会通过

00:19:39.006 --> 00:19:40.736 A:middle
一个状态码来调用你的 Completion Handler

00:19:40.736 --> 00:19:42.346 A:middle
如果你获得了授权状态码

00:19:42.546 --> 00:19:44.586 A:middle
就可以继续调用

00:19:44.586 --> 00:19:46.826 A:middle
Apple Music API

00:19:48.056 --> 00:19:49.806 A:middle
此外 你必须

00:19:49.806 --> 00:19:51.706 A:middle
在你的 Info.plist 中设置

00:19:51.706 --> 00:19:53.406 A:middle
NSAppleMusicUsage 描述字段

00:19:53.456 --> 00:19:55.476 A:middle
来填充

00:19:55.706 --> 00:19:57.136 A:middle
用户许可对话框的副标题

00:19:57.656 --> 00:20:01.156 A:middle
下一个重要的步骤是

00:19:57.656 --> 00:20:01.156 A:middle
下一个重要的步骤是

00:20:01.156 --> 00:20:03.136 A:middle
获得订阅状态

00:20:03.136 --> 00:20:04.416 A:middle
来确定用户是否

00:20:04.416 --> 00:20:05.676 A:middle
真的订阅了 Apple

00:20:05.676 --> 00:20:07.686 A:middle
Music 这对于

00:20:07.686 --> 00:20:10.086 A:middle
发布个性化请求以

00:20:10.116 --> 00:20:11.906 A:middle
获得数据 例如近期

00:20:11.906 --> 00:20:13.626 A:middle
播放或是重点循环播放

00:20:13.626 --> 00:20:14.036 A:middle
非常重要

00:20:15.046 --> 00:20:17.696 A:middle
然而 这未必是

00:20:17.756 --> 00:20:19.616 A:middle
一个简单的“是”或“否”

00:20:19.616 --> 00:20:20.166 A:middle
的问题

00:20:20.636 --> 00:20:22.016 A:middle
订阅状态有可能是

00:20:22.016 --> 00:20:24.706 A:middle
很复杂的 因为用户

00:20:24.706 --> 00:20:25.806 A:middle
成为 Apple Music 的订阅者

00:20:25.806 --> 00:20:28.096 A:middle
只是因为他们支付

00:20:28.096 --> 00:20:29.816 A:middle
每月的费用

00:20:29.816 --> 00:20:32.346 A:middle
用户也可能通过运营商而成为了

00:20:32.346 --> 00:20:33.356 A:middle
订阅者

00:20:34.606 --> 00:20:36.536 A:middle
此外 有一些用户可能

00:20:36.536 --> 00:20:37.926 A:middle
播放为 Apple Music 提供的订阅内容

00:20:37.926 --> 00:20:39.816 A:middle
而你的 App 却不能

00:20:39.816 --> 00:20:42.166 A:middle
添加内容到

00:20:42.166 --> 00:20:44.396 A:middle
那些用户的音乐资料库

00:20:45.526 --> 00:20:47.096 A:middle
这是由于 iCloud

00:20:47.096 --> 00:20:49.186 A:middle
音乐资料库的功能必须

00:20:49.186 --> 00:20:50.026 A:middle
另外启动的

00:20:51.376 --> 00:20:53.696 A:middle
最后 你很有可能

00:20:53.696 --> 00:20:54.936 A:middle
没办法建议所有的

00:20:54.936 --> 00:20:56.476 A:middle
用户成为 Apple Music

00:20:56.476 --> 00:20:58.296 A:middle
订阅者 因为我们

00:20:58.296 --> 00:20:59.756 A:middle
并不是在每一个国家都提供

00:20:59.756 --> 00:21:01.526 A:middle
Apple Music  甚至在

00:20:59.756 --> 00:21:01.526 A:middle
Apple Music  甚至在

00:21:01.526 --> 00:21:02.686 A:middle
一些我们提供 Apple Music

00:21:02.686 --> 00:21:05.146 A:middle
的国家 也会有一些设置

00:21:05.146 --> 00:21:06.936 A:middle
比如教育设置或是

00:21:06.936 --> 00:21:08.726 A:middle
企业设置 在这样的情况下

00:21:08.726 --> 00:21:09.576 A:middle
要想成为 Apple Music

00:21:09.576 --> 00:21:10.886 A:middle
的订阅者实际上是

00:21:10.886 --> 00:21:11.376 A:middle
受限制的

00:21:12.336 --> 00:21:13.716 A:middle
因此 基于这个原因 我们会展示

00:21:13.886 --> 00:21:15.356 A:middle
三个你可以询问的

00:21:15.356 --> 00:21:15.946 A:middle
独立 Capability

00:21:16.586 --> 00:21:17.866 A:middle
“音乐目录播放”

00:21:17.866 --> 00:21:20.236 A:middle
“添加到 iCloud 音乐资料库”

00:21:20.236 --> 00:21:22.436 A:middle
以及

00:21:22.606 --> 00:21:23.696 A:middle
你可以区分用户是否

00:21:23.696 --> 00:21:24.746 A:middle
“能够成为订阅者”

00:21:25.716 --> 00:21:27.416 A:middle
因此在你要采取

00:21:27.416 --> 00:21:28.836 A:middle
和 Apple Music 相关的措施之前

00:21:28.836 --> 00:21:31.536 A:middle
在你的 App 上

00:21:31.536 --> 00:21:33.086 A:middle
检查这些独立的 Capability

00:21:33.086 --> 00:21:33.716 A:middle
是很重要的

00:21:33.916 --> 00:21:35.596 A:middle
比如你想要

00:21:35.596 --> 00:21:36.936 A:middle
在你的 App 上有一个“播放”按钮

00:21:36.996 --> 00:21:38.556 A:middle
来预览来自

00:21:38.556 --> 00:21:39.896 A:middle
Apple Music 的内容 请确保

00:21:39.896 --> 00:21:41.416 A:middle
你检查了音乐目录播放

00:21:41.416 --> 00:21:41.946 A:middle
Capability

00:21:42.586 --> 00:21:44.306 A:middle
相反地 如果你想要

00:21:44.306 --> 00:21:46.296 A:middle
一个“添加”按钮来从用户的资料库

00:21:46.296 --> 00:21:48.816 A:middle
添加某一首歌到播放列表

00:21:48.816 --> 00:21:50.806 A:middle
请确保

00:21:50.806 --> 00:21:52.176 A:middle
添加到 iCloud 音乐资料库

00:21:52.406 --> 00:21:53.786 A:middle
这一 Capability 可用

00:21:54.226 --> 00:21:57.566 A:middle
获取订阅状态

00:21:57.566 --> 00:21:59.536 A:middle
信息需要用户

00:21:59.536 --> 00:22:01.986 A:middle
许可 同样你可以使用

00:21:59.536 --> 00:22:01.986 A:middle
许可 同样你可以使用

00:22:01.986 --> 00:22:03.326 A:middle
代码做到这一点

00:22:03.326 --> 00:22:04.726 A:middle
使用 SKCloudServiceController

00:22:05.396 --> 00:22:06.646 A:middle
这里我们会调用一个

00:22:06.646 --> 00:22:08.276 A:middle
叫作 requestCapabilities

00:22:08.326 --> 00:22:11.366 A:middle
的实例方法

00:22:11.366 --> 00:22:12.666 A:middle
然后

00:22:13.036 --> 00:22:14.016 A:middle
会通过一个 Capability 设置组

00:22:14.016 --> 00:22:14.896 A:middle
调用你的 Completion Handler

00:22:16.056 --> 00:22:17.186 A:middle
你可以检查

00:22:17.186 --> 00:22:19.256 A:middle
那个设置组中的

00:22:19.426 --> 00:22:20.796 A:middle
“音乐目录播放“

00:22:20.986 --> 00:22:22.356 A:middle
来检查用户是否

00:22:22.356 --> 00:22:24.646 A:middle
可以播放订阅内容 或者检查

00:22:24.646 --> 00:22:27.136 A:middle
“添加到 iCloud

00:22:27.136 --> 00:22:28.836 A:middle
音乐资料库性”来查看你的 App 是否

00:22:28.836 --> 00:22:30.336 A:middle
可以添加歌曲到该用户的

00:22:30.336 --> 00:22:31.316 A:middle
iCloud 资料库

00:22:31.776 --> 00:22:35.466 A:middle
下一步 你也许需要

00:22:35.466 --> 00:22:37.016 A:middle
知道“店面国家

00:22:37.016 --> 00:22:37.266 A:middle
代码”

00:22:37.266 --> 00:22:38.616 A:middle
这对于

00:22:38.616 --> 00:22:41.646 A:middle
向 Apple Music API

00:22:41.646 --> 00:22:43.256 A:middle
的目录端点请求允许很重要

00:22:43.256 --> 00:22:45.226 A:middle
因为 如你所见

00:22:45.226 --> 00:22:47.226 A:middle
“店面国家代码”

00:22:47.226 --> 00:22:49.306 A:middle
对那些 URL 路径来说

00:22:49.436 --> 00:22:50.376 A:middle
是很重要的部分

00:22:51.366 --> 00:22:52.576 A:middle
为了获取“店面国家

00:22:52.576 --> 00:22:54.306 A:middle
代码“ 你将可以使用

00:22:54.306 --> 00:22:55.836 A:middle
SKCloudServiceController

00:22:55.836 --> 00:22:57.296 A:middle
的另一种方法

00:22:58.136 --> 00:22:59.296 A:middle
这次叫作

00:22:59.296 --> 00:23:00.966 A:middle
requestStorefrontCountryCode

00:22:59.296 --> 00:23:00.966 A:middle
requestStorefrontCountryCode

00:23:01.876 --> 00:23:03.606 A:middle
我们将会唤醒你的 Completion

00:23:03.606 --> 00:23:05.406 A:middle
Handler 通过一个两个字母组成的

00:23:05.406 --> 00:23:07.806 A:middle
国家代码 之后你可以

00:23:07.806 --> 00:23:10.036 A:middle
用它为你的目录端点请求

00:23:10.036 --> 00:23:12.826 A:middle
构建 URL

00:23:12.826 --> 00:23:13.786 A:middle
在这个例子中 我们正试图

00:23:13.786 --> 00:23:16.316 A:middle
构建一个歌曲排行 URL

00:23:16.316 --> 00:23:18.696 A:middle
这一行与我们

00:23:18.696 --> 00:23:20.226 A:middle
在哪里使用

00:23:20.226 --> 00:23:21.496 A:middle
“店面国家代码”相关 它位于

00:23:21.496 --> 00:23:26.836 A:middle
这个 URL 路径的中间

00:23:26.836 --> 00:23:28.256 A:middle
最后 想要解锁

00:23:28.256 --> 00:23:30.416 A:middle
Apple Music API 的所有东西 你

00:23:30.416 --> 00:23:32.336 A:middle
需要获得音乐用户

00:23:32.336 --> 00:23:34.006 A:middle
令牌 这对于

00:23:34.226 --> 00:23:35.266 A:middle
为个性化内容发布请求

00:23:35.266 --> 00:23:37.406 A:middle
很重要 例如

00:23:37.596 --> 00:23:39.376 A:middle
近期播放或是重点

00:23:39.376 --> 00:23:39.976 A:middle
循环播放

00:23:40.646 --> 00:23:41.776 A:middle
这是由你的

00:23:41.776 --> 00:23:44.446 A:middle
开发人员令牌所衍生的 因为

00:23:44.446 --> 00:23:45.836 A:middle
获取音乐用户令牌是

00:23:45.836 --> 00:23:47.306 A:middle
一项比较昂贵的操作

00:23:47.726 --> 00:23:49.126 A:middle
我们建议你

00:23:49.126 --> 00:23:50.426 A:middle
一旦获取了音乐用户

00:23:50.426 --> 00:23:50.656 A:middle
令牌 就将其缓存

00:23:50.766 --> 00:23:52.636 A:middle
例如你可以通过用户

00:23:52.636 --> 00:23:54.926 A:middle
默认设置做到这一点 但是请

00:23:54.926 --> 00:23:56.326 A:middle
确保不要跨设备转移

00:23:56.326 --> 00:23:57.806 A:middle
音乐用户令牌

00:23:58.246 --> 00:24:00.606 A:middle
因为这样做的话你很有可能破坏了

00:23:58.246 --> 00:24:00.606 A:middle
因为这样做的话你很有可能破坏了

00:24:00.606 --> 00:24:03.336 A:middle
用户许可

00:24:03.556 --> 00:24:04.916 A:middle
由于你会缓存这个

00:24:04.916 --> 00:24:06.786 A:middle
音乐用户令牌 你还应该

00:24:06.786 --> 00:24:09.236 A:middle
注意你需要在什么时候

00:24:09.236 --> 00:24:10.756 A:middle
将它作废并再次获取

00:24:10.756 --> 00:24:12.256 A:middle
音乐用户令牌 而且

00:24:12.256 --> 00:24:13.336 A:middle
这是很典型的 当你何时

00:24:13.446 --> 00:24:15.466 A:middle
从 Apple Music API 的任何端点

00:24:15.466 --> 00:24:16.866 A:middle
获得一个禁止状态代码

00:24:17.006 --> 00:24:19.096 A:middle
也就是

00:24:19.096 --> 00:24:21.046 A:middle
403 HTTP 状态代码

00:24:21.446 --> 00:24:22.566 A:middle
这可能发生在很多种

00:24:22.566 --> 00:24:24.326 A:middle
情况下 例如 用户

00:24:24.566 --> 00:24:25.696 A:middle
有可能更改了

00:24:25.696 --> 00:24:27.076 A:middle
和 iTunes store 帐户相关联的密码

00:24:27.076 --> 00:24:29.626 A:middle
或者用户可能

00:24:29.626 --> 00:24:30.946 A:middle
决定取消

00:24:30.946 --> 00:24:32.476 A:middle
与你的 App 相关联的用户令牌

00:24:32.826 --> 00:24:34.736 A:middle
或者 用户令牌

00:24:34.736 --> 00:24:35.816 A:middle
可能自然过期失效

00:24:37.236 --> 00:24:38.876 A:middle
在所有的这些情况下 请确保

00:24:38.876 --> 00:24:40.656 A:middle
再一次检查过 Capability 之后再次

00:24:40.766 --> 00:24:42.816 A:middle
获取音乐用户令牌

00:24:42.816 --> 00:24:44.846 A:middle
同时为了防止活跃的

00:24:44.846 --> 00:24:45.846 A:middle
iTunes Store 帐户发生

00:24:45.846 --> 00:24:47.526 A:middle
改变

00:24:48.086 --> 00:24:50.396 A:middle
因此 为了获取音乐用户

00:24:50.396 --> 00:24:51.896 A:middle
令牌 我们将会再一次使用

00:24:52.046 --> 00:24:52.836 A:middle
StoreKit 的

00:24:52.836 --> 00:24:54.576 A:middle
SKCloudServiceController

00:24:54.576 --> 00:24:54.826 A:middle
方法

00:24:55.716 --> 00:24:57.016 A:middle
这里 我们还有其他方法

00:24:57.496 --> 00:24:58.856 A:middle
也就是 requestUserToken

00:24:58.856 --> 00:25:00.146 A:middle
和 forDeveloperToken

00:24:58.856 --> 00:25:00.146 A:middle
和 forDeveloperToken

00:25:00.386 --> 00:25:01.856 A:middle
你需要把开发人员标志

00:25:02.216 --> 00:25:03.946 A:middle
作为一个参数传递过去 然后就可以

00:25:03.946 --> 00:25:05.376 A:middle
调用我们的 Completion Handler

00:25:05.646 --> 00:25:07.116 A:middle
并且处理我们的音乐用户

00:25:07.116 --> 00:25:07.786 A:middle
令牌

00:25:08.536 --> 00:25:10.386 A:middle
然后你可以使用它来

00:25:10.776 --> 00:25:12.376 A:middle
合理填充 URL 请求中的

00:25:12.376 --> 00:25:14.576 A:middle
HTTP 标头

00:25:15.076 --> 00:25:17.586 A:middle
尤其是音乐令牌

00:25:17.876 --> 00:25:18.896 A:middle
HTTP 标头

00:25:19.246 --> 00:25:22.836 A:middle
一旦你获得了用户令牌

00:25:22.836 --> 00:25:25.636 A:middle
用户许可 你就拥有了

00:25:25.636 --> 00:25:27.346 A:middle
访问 Apple Music API 的完整权限

00:25:27.346 --> 00:25:28.986 A:middle
因而可以继续

00:25:29.326 --> 00:25:30.676 A:middle
为 App 构建很棒的

00:25:30.676 --> 00:25:32.636 A:middle
用户体验

00:25:32.636 --> 00:25:33.306 A:middle
以增加用户粘性

00:25:33.826 --> 00:25:35.066 A:middle
但是有时候你可能会

00:25:35.066 --> 00:25:36.816 A:middle
面临另一个极端的情况

00:25:37.246 --> 00:25:38.786 A:middle
那就是当用户还不是

00:25:38.786 --> 00:25:39.776 A:middle
Apple Music 的订阅者时

00:25:40.296 --> 00:25:42.956 A:middle
这样的情况发生时 你也许

00:25:43.006 --> 00:25:45.276 A:middle
想要通过展示订阅视图

00:25:45.946 --> 00:25:50.346 A:middle
来建议用户加入

00:25:50.346 --> 00:25:52.616 A:middle
Apple Music 这样的话他们就可以

00:25:52.706 --> 00:25:55.066 A:middle
参与我们的试用计划 可以

00:25:55.066 --> 00:25:57.276 A:middle
访问超过 4000 万歌曲

00:25:57.756 --> 00:25:58.826 A:middle
还可以解锁

00:25:58.826 --> 00:26:00.806 A:middle
你 App 的所有潜力

00:25:58.826 --> 00:26:00.806 A:middle
你 App 的所有潜力

00:26:01.576 --> 00:26:03.016 A:middle
此外 作为一名开发人员

00:26:03.016 --> 00:26:04.706 A:middle
这与你非常相关

00:26:04.706 --> 00:26:06.176 A:middle
因为你可以通过

00:26:06.176 --> 00:26:07.176 A:middle
增加 Apple Music

00:26:07.176 --> 00:26:08.906 A:middle
订阅者来获得回报 只需要参加

00:26:08.906 --> 00:26:09.936 A:middle
我们的“合作伙伴计划”

00:26:10.456 --> 00:26:14.496 A:middle
那么 什么时候你

00:26:14.496 --> 00:26:15.276 A:middle
才应该展示

00:26:15.276 --> 00:26:16.046 A:middle
订阅视图呢

00:26:16.456 --> 00:26:17.896 A:middle
应该是在你

00:26:17.896 --> 00:26:19.056 A:middle
发现用户

00:26:19.136 --> 00:26:20.656 A:middle
当前无法播放订阅

00:26:20.656 --> 00:26:21.176 A:middle
内容

00:26:22.136 --> 00:26:23.766 A:middle
但是用户可以成为 Apple

00:26:23.766 --> 00:26:24.596 A:middle
Music 的订阅者

00:26:25.166 --> 00:26:26.536 A:middle
在 Capability 方面

00:26:26.536 --> 00:26:28.186 A:middle
正如我们之前讨论过的

00:26:28.186 --> 00:26:28.906 A:middle
你需要确保

00:26:28.906 --> 00:26:30.686 A:middle
musicCatalogPlayback Capability

00:26:31.016 --> 00:26:33.206 A:middle
当前被禁用而

00:26:33.206 --> 00:26:35.016 A:middle
musicCatalogSubscriptionEligible

00:26:35.066 --> 00:26:36.966 A:middle
这个 Capability 被启用

00:26:37.526 --> 00:26:40.826 A:middle
注意 在很罕见

00:26:40.826 --> 00:26:42.536 A:middle
的情况下 用户在此设备上没有

00:26:42.536 --> 00:26:43.716 A:middle
一个有效的 iTunes Store

00:26:43.716 --> 00:26:46.006 A:middle
帐户 这时你将会看到

00:26:46.006 --> 00:26:47.786 A:middle
那个状态也会以

00:26:47.786 --> 00:26:49.816 A:middle
同样的方式报告 我们需要

00:26:49.816 --> 00:26:51.086 A:middle
加入一个“登录”按钮

00:26:51.086 --> 00:26:51.886 A:middle
来作为订阅视图的

00:26:51.886 --> 00:26:51.976 A:middle
一部分

00:26:56.276 --> 00:26:57.646 A:middle
订阅视图是

00:26:57.646 --> 00:27:00.376 A:middle
可配置的 也就是说你

00:26:57.646 --> 00:27:00.376 A:middle
可配置的 也就是说你

00:27:00.376 --> 00:27:01.866 A:middle
可以选择

00:27:01.866 --> 00:27:02.796 A:middle
传递给用户的主要信息

00:27:03.196 --> 00:27:04.986 A:middle
默认地 我们会让用户

00:27:04.986 --> 00:27:05.926 A:middle
订阅 Apple Music

00:27:06.676 --> 00:27:08.196 A:middle
但是通过传递一个可选的

00:27:08.196 --> 00:27:10.206 A:middle
信息标识符 你可以

00:27:10.206 --> 00:27:11.816 A:middle
选择一种更加合适的信息

00:27:12.066 --> 00:27:13.206 A:middle
这个信息基于接下来

00:27:13.206 --> 00:27:15.276 A:middle
你想要在 App 中进行的操作

00:27:16.106 --> 00:27:17.776 A:middle
所以 我们有其他

00:27:17.776 --> 00:27:18.696 A:middle
信息标识符的值

00:27:18.696 --> 00:27:21.916 A:middle
可供选择 比如“连接”

00:27:21.916 --> 00:27:23.416 A:middle
我们会让用户连接到

00:27:23.416 --> 00:27:23.956 A:middle
Apple Music

00:27:24.656 --> 00:27:27.776 A:middle
我们还有“添加音乐”

00:27:27.776 --> 00:27:29.856 A:middle
很好地提醒用户添加想要的

00:27:29.856 --> 00:27:30.286 A:middle
音乐

00:27:30.926 --> 00:27:33.306 A:middle
最后我们还有“播放音乐”

00:27:34.736 --> 00:27:36.976 A:middle
所以你要确保选择最合适的

00:27:36.976 --> 00:27:37.986 A:middle
信息标识符

00:27:37.986 --> 00:27:39.286 A:middle
以响应你想在 App 中

00:27:39.286 --> 00:27:41.106 A:middle
进行的下一步操作

00:27:41.106 --> 00:27:42.516 A:middle
这样我们就能选择

00:27:42.516 --> 00:27:43.746 A:middle
对于用户来说

00:27:43.746 --> 00:27:44.176 A:middle
最有合理的信息

00:27:44.716 --> 00:27:47.456 A:middle
你也可以将

00:27:47.456 --> 00:27:49.576 A:middle
订阅视图文本化

00:27:49.576 --> 00:27:50.866 A:middle
这可以通过高亮某一具体内容

00:27:50.866 --> 00:27:53.676 A:middle
比如一首歌 专辑

00:27:53.946 --> 00:27:55.866 A:middle
播放列表或是电台

00:27:56.346 --> 00:27:58.476 A:middle
你可以通过传递一个

00:27:58.506 --> 00:28:00.676 A:middle
iTunes 项目标识符选项来实现

00:27:58.506 --> 00:28:00.676 A:middle
iTunes 项目标识符选项来实现

00:28:01.476 --> 00:28:03.806 A:middle
它需要一个类型字符串的值

00:28:03.806 --> 00:28:05.786 A:middle
并且和 Apple Music API 资源的

00:28:05.786 --> 00:28:07.626 A:middle
JSON 表示形式中的

00:28:07.626 --> 00:28:09.246 A:middle
ID 字段

00:28:09.436 --> 00:28:10.576 A:middle
相呼应

00:28:12.756 --> 00:28:14.326 A:middle
对于这个订阅视图

00:28:14.326 --> 00:28:15.226 A:middle
你还有更多的选项

00:28:15.226 --> 00:28:15.986 A:middle
需要注意

00:28:15.986 --> 00:28:18.006 A:middle
你需要设定订阅

00:28:18.056 --> 00:28:20.126 A:middle
操作 而且你可以

00:28:20.126 --> 00:28:22.616 A:middle
传递可选的合作伙伴令牌

00:28:22.616 --> 00:28:24.016 A:middle
和营销令牌

00:28:24.016 --> 00:28:25.946 A:middle
如果你加入了

00:28:25.946 --> 00:28:26.926 A:middle
我们的“合作伙伴计划”

00:28:27.896 --> 00:28:30.546 A:middle
将这些串联在一起你就会知道

00:28:30.546 --> 00:28:31.276 A:middle
如何展示

00:28:31.276 --> 00:28:32.676 A:middle
“订阅视图”了

00:28:33.496 --> 00:28:35.996 A:middle
我们还会实例化一个

00:28:35.996 --> 00:28:37.536 A:middle
StoreKit 中的 View Controller

00:28:40.856 --> 00:28:42.526 A:middle
也就是

00:28:42.526 --> 00:28:45.096 A:middle
SKCloudServiceSetupViewController

00:28:45.096 --> 00:28:46.666 A:middle
你可以将自己设成

00:28:46.666 --> 00:28:47.416 A:middle
这个 View Controller 的委托

00:28:48.266 --> 00:28:50.146 A:middle
然后你需要构建一个

00:28:50.146 --> 00:28:52.056 A:middle
我们刚刚讨论过的选项列表

00:28:52.666 --> 00:28:53.966 A:middle
在这个例子中 我们会将

00:28:53.966 --> 00:28:56.536 A:middle
“action”设置成”subscribe” 将

00:28:56.536 --> 00:28:58.616 A:middle
“messageIdentifier”设置成“playMusic”

00:28:59.516 --> 00:29:02.466 A:middle
然后你需要调用含有 load(options:) 方法

00:28:59.516 --> 00:29:02.466 A:middle
然后你需要调用含有 load(options:) 方法

00:29:02.466 --> 00:29:04.666 A:middle
来加载所有

00:29:04.666 --> 00:29:06.186 A:middle
订阅视图里的

00:29:06.186 --> 00:29:06.346 A:middle
内容

00:29:06.346 --> 00:29:07.446 A:middle
这是因为它是一个

00:29:07.446 --> 00:29:08.966 A:middle
服务器驱动的视图需要我们

00:29:08.966 --> 00:29:10.396 A:middle
加载一定数量的

00:29:10.396 --> 00:29:10.786 A:middle
内容

00:29:12.326 --> 00:29:13.266 A:middle
由于这一过程是

00:29:13.266 --> 00:29:15.636 A:middle
异步的 我们推荐你

00:29:15.636 --> 00:29:17.416 A:middle
在 App 中展示一个下拉列表

00:29:17.416 --> 00:29:18.816 A:middle
同时我们在加载这个内容

00:29:18.816 --> 00:29:19.996 A:middle
你也可以通过使用

00:29:19.996 --> 00:29:21.496 A:middle
UIActivityIndicatorView 来这样做

00:29:22.826 --> 00:29:23.846 A:middle
一旦我们完成加载所有

00:29:23.846 --> 00:29:25.556 A:middle
内容 我们就会唤醒

00:29:25.556 --> 00:29:27.326 A:middle
完成处理器 你可以

00:29:27.326 --> 00:29:28.656 A:middle
继续展示订阅

00:29:28.656 --> 00:29:30.896 A:middle
景象如果“didSucceed Boolean”

00:29:30.896 --> 00:29:33.516 A:middle
被设定为“true” 只需要通过调用

00:29:33.516 --> 00:29:34.766 A:middle
UIKit 中的 PresentViewController

00:29:34.766 --> 00:29:35.546 A:middle
方法

00:29:36.126 --> 00:29:39.506 A:middle
这就是你如何展示

00:29:39.926 --> 00:29:40.746 A:middle
“订阅景象”

00:29:40.746 --> 00:29:41.816 A:middle
此外 如果用户

00:29:41.816 --> 00:29:43.426 A:middle
因此而决定成为订阅者

00:29:43.426 --> 00:29:44.736 A:middle
你可以

00:29:45.186 --> 00:29:46.836 A:middle
通过观察发现

00:29:46.836 --> 00:29:48.176 A:middle
性能将

00:29:48.176 --> 00:29:49.196 A:middle
SKCloudServiceController 变成了

00:29:49.196 --> 00:29:51.336 A:middle
通知 而且

00:29:51.336 --> 00:29:52.836 A:middle
你还可以通过相关代理方法

00:29:52.836 --> 00:29:54.336 A:middle
发现

00:29:54.336 --> 00:29:55.926 A:middle
订阅景象

00:29:55.926 --> 00:29:56.306 A:middle
消失了

00:29:56.856 --> 00:30:01.916 A:middle
有了它 你就拥有了所有

00:29:56.856 --> 00:30:01.916 A:middle
有了它 你就拥有了所有

00:30:01.916 --> 00:30:03.956 A:middle
你需要的标志来点击 Apple

00:30:03.956 --> 00:30:05.886 A:middle
Music API 获取 Apple Music

00:30:05.886 --> 00:30:07.316 A:middle
内容 而且你也确保了

00:30:07.316 --> 00:30:07.976 A:middle
用户是一名订阅者

00:30:08.426 --> 00:30:10.356 A:middle
那么我们就可以做一些有趣的事了

00:30:10.826 --> 00:30:12.836 A:middle
事实上就是播放

00:30:12.836 --> 00:30:14.476 A:middle
订阅或者是资料库的内容

00:30:15.436 --> 00:30:17.086 A:middle
为此 我们将要转换一下

00:30:17.086 --> 00:30:18.356 A:middle
方向 看一下

00:30:18.356 --> 00:30:19.836 A:middle
iOS SDK 里的另一个框架

00:30:19.836 --> 00:30:21.956 A:middle
也就是 MediaPlayer 框架

00:30:24.516 --> 00:30:25.716 A:middle
你会发现 MediaPlayer

00:30:25.716 --> 00:30:27.326 A:middle
框架的一个类叫作

00:30:27.476 --> 00:30:29.686 A:middle
MPMusicPlayerController

00:30:29.766 --> 00:30:32.536 A:middle
它提供两个不同的播放器

00:30:32.536 --> 00:30:34.816 A:middle
在一定使用情况下

00:30:34.846 --> 00:30:36.806 A:middle
你可以控制两种不同用例下的

00:30:36.806 --> 00:30:37.666 A:middle
音乐播放

00:30:37.896 --> 00:30:39.546 A:middle
为了强调这一点 让我们来

00:30:39.546 --> 00:30:40.866 A:middle
看一个例子

00:30:41.726 --> 00:30:43.416 A:middle
假定你在构建一个

00:30:43.416 --> 00:30:44.396 A:middle
社交网络 App

00:30:44.966 --> 00:30:45.956 A:middle
你希望你的用户

00:30:45.956 --> 00:30:47.486 A:middle
可以更简单地分享音乐

00:30:47.486 --> 00:30:49.366 A:middle
内容给他们的朋友

00:30:49.366 --> 00:30:50.356 A:middle
所以作为

00:30:50.356 --> 00:30:51.596 A:middle
收到这一内容的朋友

00:30:51.596 --> 00:30:55.336 A:middle
能够在你的 App 上预览

00:30:55.396 --> 00:30:58.206 A:middle
歌曲和专辑是很重要的

00:30:58.266 --> 00:31:00.556 A:middle
然而 你应该确保

00:30:58.266 --> 00:31:00.556 A:middle
然而 你应该确保

00:31:00.556 --> 00:31:01.776 A:middle
收到这一内容的朋友

00:31:01.776 --> 00:31:02.816 A:middle
可以享受

00:31:02.876 --> 00:31:04.226 A:middle
完整的音乐 App 功能

00:31:04.226 --> 00:31:06.336 A:middle
允许

00:31:06.336 --> 00:31:07.606 A:middle
朋友返回

00:31:07.606 --> 00:31:10.036 A:middle
音乐 App 并且也许可以把

00:31:10.036 --> 00:31:12.906 A:middle
歌曲分享给别人 通过使用 Connect 或是

00:31:12.906 --> 00:31:13.306 A:middle
AirDrop

00:31:15.176 --> 00:31:16.756 A:middle
对于这样的应用来说

00:31:16.756 --> 00:31:18.316 A:middle
systemMusicPlayer 也许是

00:31:18.316 --> 00:31:19.526 A:middle
很好的选择

00:31:20.096 --> 00:31:22.146 A:middle
然而 如果你需要

00:31:22.146 --> 00:31:23.656 A:middle
对播放体验有更多的控制

00:31:23.656 --> 00:31:25.516 A:middle
你也许会想要

00:31:25.516 --> 00:31:26.066 A:middle
看一眼

00:31:26.066 --> 00:31:27.576 A:middle
applicationQueuePlayer

00:31:27.576 --> 00:31:28.686 A:middle
健身 App 在这里可能是一个很好的

00:31:28.686 --> 00:31:29.626 A:middle
例子

00:31:30.526 --> 00:31:32.286 A:middle
你可能希望

00:31:32.286 --> 00:31:33.526 A:middle
你的用户在户外跑步时

00:31:33.526 --> 00:31:36.666 A:middle
可以播放一些

00:31:36.806 --> 00:31:40.386 A:middle
背景音乐 所以你

00:31:40.386 --> 00:31:42.226 A:middle
可能想要确保

00:31:42.346 --> 00:31:43.966 A:middle
音乐和跑步的节奏

00:31:43.966 --> 00:31:44.356 A:middle
相适应

00:31:45.496 --> 00:31:46.866 A:middle
你也许还想要在

00:31:46.916 --> 00:31:47.936 A:middle
播放列表的中间插入一首

00:31:47.936 --> 00:31:49.696 A:middle
很有力量的歌 来实现你

00:31:49.696 --> 00:31:51.246 A:middle
定制的播放控制

00:31:51.776 --> 00:31:54.416 A:middle
applicationQueuePlayer

00:31:54.416 --> 00:31:56.466 A:middle
能使你实现

00:31:57.076 --> 00:31:57.206 A:middle
这些功能

00:31:57.396 --> 00:31:58.726 A:middle
这两个播放器会

00:31:58.726 --> 00:32:00.326 A:middle
自动为你做很多事情

00:31:58.726 --> 00:32:00.326 A:middle
自动为你做很多事情

00:32:00.646 --> 00:32:02.076 A:middle
他们会确保

00:32:02.076 --> 00:32:03.286 A:middle
在锁屏时填充

00:32:03.286 --> 00:32:03.716 A:middle
控制中心

00:32:04.886 --> 00:32:06.756 A:middle
但是

00:32:06.756 --> 00:32:07.806 A:middle
根据你选择的播放器

00:32:07.806 --> 00:32:09.526 A:middle
情况也会有所不同 因为

00:32:09.526 --> 00:32:10.906 A:middle
使用 systemMusicPlayer 的音乐类 App 会通过

00:32:10.906 --> 00:32:12.046 A:middle
“正在播放” App 进行播放

00:32:12.046 --> 00:32:13.676 A:middle
然而如果你选择

00:32:13.676 --> 00:32:15.086 A:middle
applicationQueuePlayer 的话

00:32:15.086 --> 00:32:16.356 A:middle
则将会通过

00:32:16.356 --> 00:32:17.536 A:middle
你的 App 来播放

00:32:18.046 --> 00:32:20.526 A:middle
这是因为使用

00:32:20.526 --> 00:32:22.706 A:middle
systemMusicPlayer 时

00:32:22.766 --> 00:32:24.116 A:middle
你的 App 相当于一个音乐 App

00:32:24.116 --> 00:32:25.496 A:middle
的遥控器

00:32:26.306 --> 00:32:27.126 A:middle
然而 如果你使用的是

00:32:27.126 --> 00:32:29.326 A:middle
applicationQueuePlayer 你的 App

00:32:29.516 --> 00:32:31.056 A:middle
可以拥有自己的播放队列

00:32:31.266 --> 00:32:33.476 A:middle
并完全独立于

00:32:33.476 --> 00:32:34.586 A:middle
音乐 App

00:32:36.536 --> 00:32:38.166 A:middle
这两个播放器都可以使你

00:32:38.166 --> 00:32:39.506 A:middle
通过简单操作来

00:32:39.506 --> 00:32:42.106 A:middle
控制播放队列 比如

00:32:42.196 --> 00:32:43.246 A:middle
通过“Set Queue”命令

00:32:43.246 --> 00:32:44.476 A:middle
来完全取代播放队列

00:32:44.476 --> 00:32:47.126 A:middle
你还可以通过

00:32:47.126 --> 00:32:48.936 A:middle
设置内容为

00:32:49.306 --> 00:32:51.726 A:middle
“接下来播放”或“稍后播放”

00:32:51.726 --> 00:32:52.236 A:middle
来使用即将播放功能

00:32:52.726 --> 00:32:54.786 A:middle
但是通过

00:32:54.786 --> 00:32:56.696 A:middle
applicationQueuePlayer 你可以

00:32:56.696 --> 00:32:59.256 A:middle
更进一步 通过在

00:32:59.256 --> 00:33:00.416 A:middle
播放队列的中间

00:32:59.256 --> 00:33:00.416 A:middle
播放队列的中间

00:33:00.416 --> 00:33:02.856 A:middle
插入项目

00:33:02.856 --> 00:33:04.156 A:middle
而移走原本已经在播放队列中的

00:33:04.626 --> 00:33:04.816 A:middle
歌曲

00:33:06.136 --> 00:33:07.436 A:middle
为了实现

00:33:07.436 --> 00:33:08.506 A:middle
那些播放列表的操控

00:33:08.506 --> 00:33:10.686 A:middle
任务 你将要使用到的是

00:33:10.686 --> 00:33:12.136 A:middle
我们称之为“队列描述符”这一概念

00:33:12.606 --> 00:33:13.886 A:middle
依据你要处理的

00:33:13.886 --> 00:33:15.316 A:middle
内容种类

00:33:15.316 --> 00:33:16.796 A:middle
我们提供三种

00:33:16.796 --> 00:33:17.306 A:middle
队列描述符

00:33:18.366 --> 00:33:20.476 A:middle
第一种是媒体项目

00:33:20.706 --> 00:33:22.766 A:middle
队列描述符 这一种

00:33:22.766 --> 00:33:25.166 A:middle
很有用 如果你有一个

00:33:25.196 --> 00:33:26.686 A:middle
MPMediaItem 或

00:33:26.686 --> 00:33:28.676 A:middle
MPMediaItemCollection 的实例的话

00:33:28.676 --> 00:33:30.136 A:middle
你也会愿意从它开始

00:33:30.216 --> 00:33:30.386 A:middle
播放

00:33:30.766 --> 00:33:32.816 A:middle
典型情况下 你会有很多

00:33:32.816 --> 00:33:35.576 A:middle
这样的实例 通过使用 MPMediaQuery

00:33:35.726 --> 00:33:37.046 A:middle
制定设备资料库询问

00:33:37.046 --> 00:33:40.216 A:middle
或是通过展现

00:33:40.216 --> 00:33:41.516 A:middle
媒体挑选器来允许

00:33:41.516 --> 00:33:43.156 A:middle
用户挑选

00:33:43.156 --> 00:33:44.726 A:middle
他资料库里的一项内容

00:33:45.226 --> 00:33:48.786 A:middle
就目录播放来说 我么还有

00:33:48.786 --> 00:33:50.476 A:middle
商店队列描述符

00:33:50.696 --> 00:33:53.476 A:middle
使用商店队列描述符

00:33:53.476 --> 00:33:54.616 A:middle
你需要的数据是

00:33:54.616 --> 00:33:56.396 A:middle
一个商店 ID 那是和

00:33:56.396 --> 00:33:57.926 A:middle
Apple Music API 资源中的

00:33:57.926 --> 00:33:59.456 A:middle
JSON 表现形式的 ID 字段

00:33:59.456 --> 00:34:00.826 A:middle
相呼应的

00:33:59.456 --> 00:34:00.826 A:middle
相呼应的

00:34:00.826 --> 00:34:01.826 A:middle
字符串

00:34:02.956 --> 00:34:04.316 A:middle
它通常对于

00:34:04.316 --> 00:34:05.996 A:middle
目录内容很有用 比如

00:34:05.996 --> 00:34:06.946 A:middle
目录搜索

00:34:08.795 --> 00:34:10.735 A:middle
我们还有一个新的队列

00:34:10.735 --> 00:34:12.216 A:middle
描述符 就是播放

00:34:12.216 --> 00:34:13.085 A:middle
播放参数队列

00:34:13.085 --> 00:34:16.866 A:middle
描述符 它可以完成

00:34:16.946 --> 00:34:17.896 A:middle
所有商店队列描述符

00:34:17.896 --> 00:34:20.525 A:middle
可以完成的任务 而且

00:34:20.585 --> 00:34:22.196 A:middle
可以处理个性化的内容

00:34:22.386 --> 00:34:24.016 A:middle
比如最近

00:34:24.016 --> 00:34:27.275 A:middle
播放或是高度循环播放的内容

00:34:27.275 --> 00:34:28.766 A:middle
它还支持播放广播

00:34:28.766 --> 00:34:29.416 A:middle
电台

00:34:30.156 --> 00:34:31.596 A:middle
在这里 播放参数队列描述符

00:34:31.596 --> 00:34:32.966 A:middle
需要使用的数据

00:34:32.966 --> 00:34:35.226 A:middle
是与

00:34:35.226 --> 00:34:36.746 A:middle
Apple Music API 资源中的

00:34:37.216 --> 00:34:39.496 A:middle
JSON 表现形式的

00:34:39.576 --> 00:34:41.206 A:middle
播放参数字段相关的值

00:34:43.815 --> 00:34:45.216 A:middle
那么 让我们来看一看你是如何

00:34:45.216 --> 00:34:46.576 A:middle
使用这些队列描述符

00:34:46.576 --> 00:34:48.406 A:middle
来控制你 App 的

00:34:48.406 --> 00:34:48.706 A:middle
播放的

00:34:49.315 --> 00:34:50.456 A:middle
这里 我们会进行一些简单的

00:34:50.456 --> 00:34:52.166 A:middle
播放列表操纵

00:34:52.166 --> 00:34:53.646 A:middle
任务 我们会选择使用

00:34:53.646 --> 00:34:54.626 A:middle
systemMusicPlayer

00:34:56.556 --> 00:34:58.796 A:middle
两个播放器都支持简单的

00:34:58.996 --> 00:35:01.716 A:middle
播放微调 你可以进行设置它们

00:34:58.996 --> 00:35:01.716 A:middle
播放微调 你可以进行设置它们

00:35:01.716 --> 00:35:03.466 A:middle
比如都设成循环

00:35:03.466 --> 00:35:04.046 A:middle
模式

00:35:04.046 --> 00:35:05.346 A:middle
还是你还可以改变

00:35:05.346 --> 00:35:06.246 A:middle
随机模式 只要你喜欢

00:35:07.796 --> 00:35:09.776 A:middle
我们要做的第一件事就是

00:35:10.246 --> 00:35:11.456 A:middle
改变播放队列

00:35:11.456 --> 00:35:12.856 A:middle
用一个以 MPMediaItemCollection 表示的

00:35:12.856 --> 00:35:15.556 A:middle
的本地专辑

00:35:15.556 --> 00:35:16.756 A:middle
完全取代它

00:35:17.846 --> 00:35:19.376 A:middle
因为那是我们

00:35:19.376 --> 00:35:21.376 A:middle
有的数据 我们还会使用

00:35:21.376 --> 00:35:23.666 A:middle
MPMediaItem 抱歉 是

00:35:23.666 --> 00:35:24.776 A:middle
MediaItemQueueDescriptor

00:35:26.436 --> 00:35:28.106 A:middle
你还可以决定

00:35:28.176 --> 00:35:29.616 A:middle
从专辑的第 4 首歌开始听

00:35:29.616 --> 00:35:31.106 A:middle
只需要将

00:35:31.156 --> 00:35:33.496 A:middle
专辑的第 4 首歌设置在开始

00:35:33.496 --> 00:35:33.886 A:middle
选项

00:35:34.356 --> 00:35:37.816 A:middle
你还可以用它调用播放器上的

00:35:37.816 --> 00:35:38.976 A:middle
setQueue 方法

00:35:42.976 --> 00:35:45.696 A:middle
你还可以使用使用播放器的预方法

00:35:45.696 --> 00:35:47.506 A:middle
来使用即将播放功能

00:35:47.506 --> 00:35:49.476 A:middle
也就是把一首歌添加到“接下来播放”

00:35:50.586 --> 00:35:52.476 A:middle
现在 我们正试图将一首

00:35:52.476 --> 00:35:54.236 A:middle
目录歌曲添加到“接下来播放”

00:35:54.586 --> 00:35:55.806 A:middle
它通过一个“商店

00:35:55.806 --> 00:35:57.796 A:middle
ID”呈现 为此我们必须

00:35:57.836 --> 00:35:58.856 A:middle
使用商店队列

00:35:58.856 --> 00:35:59.396 A:middle
描述符

00:35:59.936 --> 00:36:04.636 A:middle
但是你还可以从

00:35:59.936 --> 00:36:04.636 A:middle
但是你还可以从

00:36:04.636 --> 00:36:06.566 A:middle
最近播放中添加歌曲 例如添加到

00:36:06.566 --> 00:36:08.676 A:middle
队列 通常它们

00:36:08.676 --> 00:36:09.976 A:middle
会通过播放

00:36:09.976 --> 00:36:11.206 A:middle
参数呈现 你可以在

00:36:11.206 --> 00:36:12.526 A:middle
Apple Music API 资源的

00:36:12.526 --> 00:36:13.756 A:middle
JSON 表现形式中找到

00:36:14.296 --> 00:36:16.206 A:middle
由于那是我们拥有的数据

00:36:16.206 --> 00:36:17.466 A:middle
我们将会使用

00:36:17.466 --> 00:36:18.536 A:middle
播放参数队列描述符

00:36:19.006 --> 00:36:22.066 A:middle
然后 在这个例子中 我们将选择

00:36:22.116 --> 00:36:23.706 A:middle
使用它和附加方法

00:36:23.926 --> 00:36:25.946 A:middle
来添加这首歌到

00:36:25.946 --> 00:36:26.826 A:middle
“稍后播放”

00:36:26.826 --> 00:36:30.536 A:middle
如果你的 App 需要

00:36:30.536 --> 00:36:31.886 A:middle
更多对于播放队列的控制

00:36:31.886 --> 00:36:34.466 A:middle
你可以转换到

00:36:34.466 --> 00:36:36.506 A:middle
applicationQueuePlayer 来解锁

00:36:36.506 --> 00:36:37.436 A:middle
更多功能

00:36:38.936 --> 00:36:40.946 A:middle
主要来说 你可以在 applicationQueuePlayer

00:36:41.456 --> 00:36:43.126 A:middle
上调用操作

00:36:43.126 --> 00:36:44.216 A:middle
队列交易方法

00:36:44.256 --> 00:36:47.246 A:middle
它需要两个闭包作为

00:36:47.246 --> 00:36:47.966 A:middle
参数

00:36:48.556 --> 00:36:49.516 A:middle
第一个是队列

00:36:49.516 --> 00:36:50.236 A:middle
交易

00:36:51.316 --> 00:36:53.456 A:middle
我们将会传递一个可变的队列

00:36:54.316 --> 00:36:55.746 A:middle
目标 它描述的是

00:36:55.746 --> 00:36:56.976 A:middle
播放对列表的当前

00:36:56.976 --> 00:36:57.196 A:middle
状态

00:36:58.116 --> 00:36:59.666 A:middle
你可以在这个可变的队列上调用

00:36:59.666 --> 00:37:00.946 A:middle
一些方法 比如

00:36:59.666 --> 00:37:00.946 A:middle
一些方法 比如

00:37:00.946 --> 00:37:02.806 A:middle
移除方法 将当前的

00:37:02.806 --> 00:37:04.956 A:middle
第 3 个项目从播放列表

00:37:04.956 --> 00:37:05.566 A:middle
移除

00:37:06.096 --> 00:37:08.556 A:middle
你还可以调用向后

00:37:08.676 --> 00:37:11.056 A:middle
插入方法 我们现在

00:37:11.056 --> 00:37:12.466 A:middle
正调用它在播放列表的

00:37:12.466 --> 00:37:14.246 A:middle
第 5 个项目后面

00:37:14.246 --> 00:37:14.796 A:middle
插入一个项目

00:37:15.796 --> 00:37:17.946 A:middle
一旦我们完成了应用

00:37:17.946 --> 00:37:19.146 A:middle
所有那些对播放列表的

00:37:19.146 --> 00:37:20.326 A:middle
修改 我们会调用

00:37:20.326 --> 00:37:22.246 A:middle
你的 Completion Handler 来

00:37:22.246 --> 00:37:22.506 A:middle
告知你

00:37:23.086 --> 00:37:26.036 A:middle
那就是所有你可以在

00:37:26.036 --> 00:37:27.236 A:middle
Apple Music 的播放队列进行操作

00:37:27.236 --> 00:37:28.966 A:middle
的一个概况

00:37:29.476 --> 00:37:30.706 A:middle
我们迫不及待地想看看

00:37:30.706 --> 00:37:32.466 A:middle
你们在你们的 App 中将会构建怎么样的

00:37:32.466 --> 00:37:32.756 A:middle
体验

00:37:33.866 --> 00:37:35.376 A:middle
接下来我们来讲一讲时间范围

00:37:35.996 --> 00:37:37.446 A:middle
你何时可以使用你 App 中的

00:37:37.446 --> 00:37:38.056 A:middle
这些 API

00:37:38.586 --> 00:37:41.326 A:middle
就现在来看 很多这些

00:37:41.326 --> 00:37:43.126 A:middle
API 在几次发布中都慢慢

00:37:43.126 --> 00:37:44.926 A:middle
释出 它们中

00:37:44.926 --> 00:37:46.956 A:middle
有很多现在都已在 iOS 10.3 可用

00:37:47.206 --> 00:37:48.866 A:middle
带有一些预告

00:37:49.546 --> 00:37:51.226 A:middle
在今年的秋天 我们会开始为

00:37:51.226 --> 00:37:53.496 A:middle
iOS 10.3 设备

00:37:53.566 --> 00:37:54.346 A:middle
生成音乐用户令牌

00:37:55.266 --> 00:37:56.696 A:middle
你将需要一个

00:37:56.696 --> 00:37:58.596 A:middle
替换方法来活的

00:37:58.596 --> 00:38:01.026 A:middle
店面国家代码 比如

00:37:58.596 --> 00:38:01.026 A:middle
店面国家代码 比如

00:38:01.026 --> 00:38:02.506 A:middle
你可以使用

00:38:02.506 --> 00:38:04.476 A:middle
当前定位的地区代码作为

00:38:04.476 --> 00:38:05.376 A:middle
一个近似值

00:38:06.616 --> 00:38:08.036 A:middle
然而 你将可以在 iOS 10.3

00:38:08.036 --> 00:38:09.516 A:middle
使用商店队列描述符

00:38:09.516 --> 00:38:11.216 A:middle
通过目录内容

00:38:11.216 --> 00:38:15.236 A:middle
来开启播放

00:38:15.446 --> 00:38:17.276 A:middle
在 iOS 11 上 通过

00:38:17.276 --> 00:38:18.726 A:middle
你现在已有的 Beta 版 你可以

00:38:18.726 --> 00:38:19.776 A:middle
做一切我们刚刚

00:38:19.776 --> 00:38:21.976 A:middle
以播放参数 队列描述符

00:38:21.976 --> 00:38:23.536 A:middle
为例子来谈论的

00:38:23.536 --> 00:38:25.116 A:middle
事情 这些会在

00:38:25.116 --> 00:38:25.826 A:middle
之后的 Beta 版中实现

00:38:26.366 --> 00:38:29.216 A:middle
由于播放参数和

00:38:29.216 --> 00:38:30.556 A:middle
队列描述符支持

00:38:30.556 --> 00:38:31.346 A:middle
商店队列

00:38:31.346 --> 00:38:32.836 A:middle
描述符支持的一切东西 此外

00:38:32.836 --> 00:38:34.026 A:middle
还包括广播电台和

00:38:34.026 --> 00:38:35.556 A:middle
个性化内容 如果你的

00:38:35.556 --> 00:38:37.176 A:middle
目标是 iOS 11 或之后的系统 那么

00:38:37.176 --> 00:38:38.646 A:middle
你真应该主要使用那一个

00:38:38.646 --> 00:38:39.376 A:middle
而不是商店队列

00:38:39.376 --> 00:38:39.846 A:middle
描述符

00:38:43.396 --> 00:38:46.256 A:middle
总结来说 Apple Music

00:38:46.306 --> 00:38:48.066 A:middle
提供海量内容

00:38:48.066 --> 00:38:50.206 A:middle
超过 4000 万首歌曲

00:38:50.486 --> 00:38:51.826 A:middle
并为你的用户提供个性化

00:38:51.826 --> 00:38:53.736 A:middle
推荐 你还可以使用

00:38:53.736 --> 00:38:55.796 A:middle
它 通过发挥它的作用来

00:38:55.796 --> 00:38:57.066 A:middle
为你的 App 创造广阔的体验

00:38:57.066 --> 00:38:58.506 A:middle
来使得的用户更加具有

00:38:58.666 --> 00:38:59.286 A:middle
参与性

00:38:59.986 --> 00:39:02.606 A:middle
为此你必须要使用

00:38:59.986 --> 00:39:02.606 A:middle
为此你必须要使用

00:39:02.906 --> 00:39:04.176 A:middle
StoreKit 框架来获取

00:39:04.176 --> 00:39:06.916 A:middle
用户许可 使用音乐

00:39:06.916 --> 00:39:09.436 A:middle
用户令牌来解锁

00:39:09.436 --> 00:39:10.936 A:middle
Apple Music API 的全部功能

00:39:12.116 --> 00:39:13.376 A:middle
你可以调用 Apple Music

00:39:13.376 --> 00:39:15.616 A:middle
API 来获取相关数据

00:39:15.966 --> 00:39:18.816 A:middle
从 JSON 进行解析 还可以使用

00:39:18.816 --> 00:39:20.676 A:middle
MediaPlayer 框架来控制

00:39:20.676 --> 00:39:22.116 A:middle
这一内容的

00:39:22.146 --> 00:39:22.586 A:middle
播放

00:39:24.536 --> 00:39:26.096 A:middle
更多有关

00:39:26.096 --> 00:39:27.586 A:middle
MusicKit 的信息 请使用这个 URL

00:39:27.586 --> 00:39:28.906 A:middle
自行查看我们的开发人员

00:39:28.906 --> 00:39:29.526 A:middle
门户网站

00:39:30.056 --> 00:39:31.266 A:middle
你还可以看到一些相关的

00:39:31.266 --> 00:39:31.766 A:middle
会议

00:39:31.766 --> 00:39:33.366 A:middle
有在这个房间进行的“What's New in Audio（音频新动态）”

00:39:33.366 --> 00:39:35.376 A:middle
会议

00:39:35.706 --> 00:39:37.016 A:middle
明天早上我们还会有

00:39:37.016 --> 00:39:37.936 A:middle
“What's New in Foundation（基建新动态）”这一会议

00:39:37.936 --> 00:39:39.156 A:middle
从中我们可以了解到

00:39:39.266 --> 00:39:40.726 A:middle
有关使用 Swift 4 中的 JSON

00:39:40.726 --> 00:39:44.256 A:middle
解码器的一切

00:39:44.256 --> 00:39:45.456 A:middle
周四 你还可以了解有关

00:39:45.456 --> 00:39:46.516 A:middle
AirPlay 2 的内容

00:39:46.516 --> 00:39:47.366 A:middle
非常感谢 希望大家享受

00:39:47.366 --> 00:39:47.976 A:middle
接下来的大会
