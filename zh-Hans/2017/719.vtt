WEBVTT

00:00:18.366 --> 00:00:19.506 A:middle
&gt;&gt; 大家好 欢迎来到

00:00:19.506 --> 00:00:20.796 A:middle
让你的 app 适用于  CarPlay

00:00:20.796 --> 00:00:21.176 A:middle
这个讲座

00:00:21.706 --> 00:00:22.916 A:middle
我的名字是  Albert

00:00:22.916 --> 00:00:24.196 A:middle
我是  CarPlay  团队中的一名工程师

00:00:25.196 --> 00:00:26.356 A:middle
今天 我们将简要介绍

00:00:26.356 --> 00:00:27.976 A:middle
app 在  CarPlay  中是怎样运行的

00:00:27.976 --> 00:00:29.576 A:middle
怎样将你的 app 与

00:00:29.576 --> 00:00:30.596 A:middle
CarPlay  平台相结合

00:00:30.596 --> 00:00:32.546 A:middle
在开发中比较规范的做法

00:00:32.546 --> 00:00:33.516 A:middle
以及常见的错误

00:00:34.866 --> 00:00:36.276 A:middle
我们来看一下 app 在  CarPlay  中是

00:00:36.276 --> 00:00:36.706 A:middle
怎样运作的

00:00:37.246 --> 00:00:39.736 A:middle
当  CarPlay  运行的时候

00:00:39.736 --> 00:00:41.276 A:middle
CarPlay  的屏幕上

00:00:41.276 --> 00:00:42.446 A:middle
会显示

00:00:42.446 --> 00:00:42.806 A:middle
一些信息

00:00:43.476 --> 00:00:44.916 A:middle
如果一个 app 给出了关于“正在播放”的元数据

00:00:44.916 --> 00:00:46.486 A:middle
以及音频播放控制

00:00:46.486 --> 00:00:48.146 A:middle
这些信息也会在

00:00:48.146 --> 00:00:49.306 A:middle
CarPlay  的主屏幕

00:00:49.306 --> 00:00:50.696 A:middle
“正在播放”的

00:00:50.696 --> 00:00:52.536 A:middle
app 中显示

00:00:53.366 --> 00:00:54.906 A:middle
音频会通过车上的

00:00:54.906 --> 00:00:56.856 A:middle
扩音器系统播放

00:00:56.856 --> 00:00:58.216 A:middle
CarPlay  支持一些

00:00:58.216 --> 00:00:59.266 A:middle
SiriKit  框架中的意图

00:01:00.276 --> 00:01:01.826 A:middle
如果用户触发了一个  CarPlay  不支持的

00:01:01.826 --> 00:01:03.116 A:middle
SiriKit  中的意图

00:01:03.116 --> 00:01:04.936 A:middle
Siri  会告诉用户

00:01:04.936 --> 00:01:06.456 A:middle
这个功能

00:01:06.456 --> 00:01:09.876 A:middle
在车中不支持

00:01:09.876 --> 00:01:11.206 A:middle
即使你的 app 不支持  CarPlay

00:01:11.206 --> 00:01:13.226 A:middle
用户也可以处在  CarPlay  系统中时

00:01:13.226 --> 00:01:14.946 A:middle
在开始驾驶前

00:01:14.946 --> 00:01:15.826 A:middle
使用你的 app

00:01:16.746 --> 00:01:17.876 A:middle
为了保证一个良好的

00:01:17.876 --> 00:01:19.336 A:middle
用户体验

00:01:19.336 --> 00:01:21.506 A:middle
除非收到请求

00:01:21.606 --> 00:01:22.876 A:middle
否则确保你的 app 不播放音频

00:01:22.876 --> 00:01:24.706 A:middle
因为你的 app 播放的音频

00:01:24.706 --> 00:01:26.526 A:middle
可能会与用户当前

00:01:26.526 --> 00:01:29.256 A:middle
想要所播放的内容交叠

00:01:29.466 --> 00:01:31.146 A:middle
在一些情况下

00:01:31.146 --> 00:01:32.646 A:middle
你的 app 可能会与其他音频

00:01:32.646 --> 00:01:33.986 A:middle
进行适当的互动

00:01:34.726 --> 00:01:36.056 A:middle
对于一些例如有声书籍这种

00:01:36.056 --> 00:01:38.526 A:middle
播放音频的 app 使用这个协议

00:01:38.526 --> 00:01:40.186 A:middle
让你的声频在其他声频

00:01:40.186 --> 00:01:41.266 A:middle
播放的时候暂停

00:01:42.226 --> 00:01:43.526 A:middle
对于不时发出指示的

00:01:43.526 --> 00:01:44.866 A:middle
导航的 app

00:01:44.866 --> 00:01:47.146 A:middle
使用这两个协议

00:01:47.146 --> 00:01:48.796 A:middle
第二个协议将会在开始你的音频对话之前

00:01:48.796 --> 00:01:50.536 A:middle
暂停标为

00:01:50.536 --> 00:01:51.956 A:middle
“spoken audio” 的音频

00:01:51.956 --> 00:01:53.246 A:middle
的播放

00:01:53.796 --> 00:01:56.336 A:middle
因为你的导航音频将会

00:01:56.336 --> 00:01:58.176 A:middle
与其他音频混合播放

00:01:58.176 --> 00:01:59.976 A:middle
将你的音频对话标为“可以混合”

00:01:59.976 --> 00:02:01.436 A:middle
以便与其他音频

00:01:59.976 --> 00:02:01.436 A:middle
以便与其他音频

00:02:01.436 --> 00:02:02.146 A:middle
互动

00:02:02.686 --> 00:02:05.816 A:middle
那些与  CarPlay

00:02:05.816 --> 00:02:07.646 A:middle
结合程度高的那些 app

00:02:07.646 --> 00:02:09.026 A:middle
会显示在  CarPlay  的

00:02:09.026 --> 00:02:09.386 A:middle
主页面

00:02:10.066 --> 00:02:11.096 A:middle
在  CarPlay  中

00:02:11.096 --> 00:02:12.506 A:middle
运行的 app

00:02:12.506 --> 00:02:14.236 A:middle
会在  CarPlay  和

00:02:14.236 --> 00:02:15.246 A:middle
iPhone  的屏幕上显示

00:02:16.216 --> 00:02:17.466 A:middle
对于没有结合  CarPlay  的 app

00:02:17.466 --> 00:02:19.326 A:middle
只有  iPhone  屏幕上

00:02:19.326 --> 00:02:20.596 A:middle
会显示这个 app

00:02:20.596 --> 00:02:22.586 A:middle
CarPlay  屏幕上

00:02:22.586 --> 00:02:23.606 A:middle
只显示主页面

00:02:24.146 --> 00:02:27.306 A:middle
有一些种类的 app

00:02:27.306 --> 00:02:28.676 A:middle
可以支持

00:02:28.676 --> 00:02:29.646 A:middle
与  CarPlay  的高度结合

00:02:30.576 --> 00:02:32.406 A:middle
这些包括音频 app 短信

00:02:32.406 --> 00:02:34.056 A:middle
语音通话以及汽车生产商的

00:02:34.056 --> 00:02:34.376 A:middle
app

00:02:35.096 --> 00:02:37.266 A:middle
音频 app 可以播放音乐 新闻

00:02:37.596 --> 00:02:39.856 A:middle
播客以及其他音频内容

00:02:39.856 --> 00:02:41.636 A:middle
并且要遵循一定的设计理念

00:02:41.636 --> 00:02:43.016 A:middle
即适合在车中使用

00:02:44.116 --> 00:02:45.636 A:middle
采用  Siri  的短信和语音通话 app

00:02:45.636 --> 00:02:47.976 A:middle
可以经过升级

00:02:47.976 --> 00:02:48.816 A:middle
适用于  CarPlay

00:02:49.836 --> 00:02:51.366 A:middle
汽车生产商的 app

00:02:51.366 --> 00:02:53.156 A:middle
可以有特定的汽车控制及显示的功能

00:02:53.496 --> 00:02:54.646 A:middle
让驾驶者使用这些功能时

00:02:54.646 --> 00:02:55.786 A:middle
不必离开  CarPlay  的环境

00:02:57.176 --> 00:02:58.396 A:middle
如果你认为你的短信 语音通话

00:02:58.456 --> 00:03:00.436 A:middle
或汽车生产商的 app

00:02:58.456 --> 00:03:00.436 A:middle
或汽车生产商的 app

00:03:00.436 --> 00:03:01.976 A:middle
有可能支持  CarPlay

00:03:01.976 --> 00:03:04.116 A:middle
请在  CarPlay

00:03:04.116 --> 00:03:05.196 A:middle
开发者页面

00:03:05.196 --> 00:03:05.936 A:middle
告诉我们

00:03:06.656 --> 00:03:08.186 A:middle
在那里你可以为你的 app

00:03:08.186 --> 00:03:09.506 A:middle
申请权限

00:03:09.506 --> 00:03:10.256 A:middle
以便与  CarPlay  结合

00:03:10.786 --> 00:03:14.436 A:middle
不要忘记一些内容和图像

00:03:14.436 --> 00:03:15.766 A:middle
需要为  CarPlay  特制

00:03:15.826 --> 00:03:17.686 A:middle
图像要  2-3  倍大

00:03:17.686 --> 00:03:20.116 A:middle
因为根据不同车的

00:03:20.236 --> 00:03:21.546 A:middle
屏幕规格

00:03:21.546 --> 00:03:23.226 A:middle
CarPlay  的屏幕有

00:03:23.606 --> 00:03:24.576 A:middle
不同的大小

00:03:24.576 --> 00:03:25.036 A:middle
和分辨率

00:03:26.096 --> 00:03:27.706 A:middle
关于图标和  CarPlay

00:03:27.706 --> 00:03:28.966 A:middle
app 设计的更多信息

00:03:29.486 --> 00:03:30.826 A:middle
请参照  iOS Human Interface Guidelines

00:03:30.826 --> 00:03:32.036 A:middle
以及

00:03:32.036 --> 00:03:33.086 A:middle
CarPlay Human Interface

00:03:33.086 --> 00:03:33.626 A:middle
Guidelines

00:03:36.056 --> 00:03:37.326 A:middle
你可以用  Xcode  中的  iOS  模拟器

00:03:37.326 --> 00:03:39.956 A:middle
测试  CarPlay  的 app

00:03:40.006 --> 00:03:41.696 A:middle
但是为达到最好的

00:03:41.696 --> 00:03:42.946 A:middle
真实的测试效果

00:03:42.946 --> 00:03:44.726 A:middle
最好连接真正的设备

00:03:44.766 --> 00:03:45.216 A:middle
在车中测试

00:03:46.236 --> 00:03:47.586 A:middle
对于播放音频的 app

00:03:47.746 --> 00:03:48.906 A:middle
模拟器在播放状态下

00:03:48.906 --> 00:03:50.336 A:middle
有一些局限

00:03:50.756 --> 00:03:52.106 A:middle
不能反映

00:03:52.106 --> 00:03:53.566 A:middle
真正的用户体验

00:03:54.696 --> 00:03:55.976 A:middle
为了用  LLDB  全面调试你的 app

00:03:55.976 --> 00:03:58.586 A:middle
Xcode  现在支持无线调试

00:03:58.586 --> 00:04:00.036 A:middle
在调试你的 app

00:03:58.586 --> 00:04:00.036 A:middle
在调试你的 app

00:04:00.186 --> 00:04:01.676 A:middle
的过程中  iPhone

00:04:01.676 --> 00:04:03.336 A:middle
可以连接在车上

00:04:03.456 --> 00:04:04.416 A:middle
或是车配件上

00:04:05.156 --> 00:04:06.786 A:middle
更多信息

00:04:06.786 --> 00:04:08.016 A:middle
请参照这一周  WWDC  中

00:04:08.016 --> 00:04:09.786 A:middle
“Xcode  9  调试程序”

00:04:09.786 --> 00:04:11.076 A:middle
这一讲座

00:04:11.656 --> 00:04:14.976 A:middle
如果你的 app

00:04:14.976 --> 00:04:17.096 A:middle
对用户数据使用数据保护

00:04:17.096 --> 00:04:18.685 A:middle
不要忘记  CarPlay  可能是在

00:04:18.685 --> 00:04:20.096 A:middle
iPhone  被密码锁住的

00:04:20.096 --> 00:04:20.796 A:middle
状态下运行

00:04:21.736 --> 00:04:22.866 A:middle
如果你的 app 有密码保护的数据

00:04:22.866 --> 00:04:24.156 A:middle
对文件

00:04:24.156 --> 00:04:25.696 A:middle
钥匙串

00:04:26.726 --> 00:04:29.696 A:middle
或  SQL  数据库使用了以下的类别

00:04:29.696 --> 00:04:31.476 A:middle
你的数据可能

00:04:31.476 --> 00:04:33.316 A:middle
在  CarPlay  中无法使用

00:04:33.316 --> 00:04:34.116 A:middle
你的 app 可能会有

00:04:34.116 --> 00:04:34.856 A:middle
异常的表现

00:04:35.546 --> 00:04:38.626 A:middle
让我们仔细的看一下

00:04:38.626 --> 00:04:39.856 A:middle
怎样让你的 app

00:04:39.856 --> 00:04:40.286 A:middle
与  CarPlay  相结合

00:04:40.846 --> 00:04:42.946 A:middle
我们重点举出了三类

00:04:42.946 --> 00:04:44.356 A:middle
支持  CarPlay  集成

00:04:44.356 --> 00:04:46.496 A:middle
音频 app

00:04:46.896 --> 00:04:48.366 A:middle
短讯和语音通话

00:04:48.366 --> 00:04:49.196 A:middle
以及汽车生产商的 app

00:04:49.726 --> 00:04:52.186 A:middle
让我们从音频 app

00:04:52.936 --> 00:04:53.036 A:middle
开始

00:04:54.446 --> 00:04:55.966 A:middle
在  CarPlay  中

00:04:55.966 --> 00:04:57.436 A:middle
音频 app 的用户界面

00:04:57.486 --> 00:04:58.756 A:middle
根据平台而优化

00:04:59.276 --> 00:05:00.696 A:middle
为用户提供一个

00:04:59.276 --> 00:05:00.696 A:middle
为用户提供一个

00:05:00.696 --> 00:05:02.146 A:middle
很容易使用的操作系统

00:05:02.146 --> 00:05:02.626 A:middle
便于获得他们想得到的内容

00:05:03.426 --> 00:05:04.876 A:middle
音频 app 的开发者

00:05:04.876 --> 00:05:06.186 A:middle
提供数据来源

00:05:06.186 --> 00:05:07.826 A:middle
和导航操作的框架

00:05:07.826 --> 00:05:09.266 A:middle
以便  CarPlay  的平台

00:05:09.266 --> 00:05:09.756 A:middle
在屏幕上显示

00:05:10.276 --> 00:05:13.056 A:middle
另外 “正在播放” 的信息

00:05:13.056 --> 00:05:14.466 A:middle
会显示给用户

00:05:14.466 --> 00:05:16.006 A:middle
相关的元数据

00:05:16.006 --> 00:05:17.916 A:middle
以及一些可以调节的操作选项

00:05:17.916 --> 00:05:19.526 A:middle
以便用户操纵播放速度 播放曲目

00:05:19.526 --> 00:05:21.416 A:middle
和其他的一些

00:05:21.416 --> 00:05:22.746 A:middle
音频 app 可能支持的

00:05:22.746 --> 00:05:23.216 A:middle
选项

00:05:25.156 --> 00:05:26.176 A:middle
app 在获得  CarPlay

00:05:26.176 --> 00:05:27.506 A:middle
的权限之后

00:05:27.506 --> 00:05:29.076 A:middle
CarPlay  必须至少实现  MP

00:05:29.226 --> 00:05:30.496 A:middle
可播放的  API

00:05:30.496 --> 00:05:32.736 A:middle
包括数据来源

00:05:32.736 --> 00:05:34.226 A:middle
和委托

00:05:34.226 --> 00:05:35.406 A:middle
这样  CarPlay  才能

00:05:35.406 --> 00:05:36.916 A:middle
获取内容

00:05:36.946 --> 00:05:37.376 A:middle
和开始播放

00:05:38.596 --> 00:05:40.386 A:middle
音频的 app 必须响应

00:05:40.496 --> 00:05:42.016 A:middle
MPRemoteCommandCenter  事件

00:05:42.566 --> 00:05:43.716 A:middle
让用户对你的内容发送指令

00:05:43.716 --> 00:05:45.136 A:middle
例如播放 暂停

00:05:45.136 --> 00:05:47.766 A:middle
或跳过曲目

00:05:48.536 --> 00:05:50.626 A:middle
最后 音频 app 必须

00:05:50.626 --> 00:05:51.256 A:middle
设定和更新

00:05:51.256 --> 00:05:52.456 A:middle
MPNowPlayingInfoCenter  字典

00:05:52.456 --> 00:05:54.066 A:middle
这其中包括

00:05:54.066 --> 00:05:55.876 A:middle
正在播放曲目的元数据

00:05:55.876 --> 00:05:57.416 A:middle
例如

00:05:57.416 --> 00:05:59.366 A:middle
艺术家名称

00:05:59.366 --> 00:05:59.646 A:middle
和时长

00:06:00.166 --> 00:06:02.786 A:middle
让我们看一下

00:06:02.786 --> 00:06:04.046 A:middle
音频 app 的

00:06:04.046 --> 00:06:04.326 A:middle
数据结构

00:06:05.186 --> 00:06:06.506 A:middle
CarPlay  会使用  NSIndexPath

00:06:06.506 --> 00:06:08.856 A:middle
根据特定的路径

00:06:08.856 --> 00:06:09.976 A:middle
来找寻内容

00:06:10.396 --> 00:06:11.606 A:middle
这与  UITableView  中

00:06:11.606 --> 00:06:13.316 A:middle
NSIndexPath  的使用

00:06:13.316 --> 00:06:14.016 A:middle
有所不同

00:06:15.006 --> 00:06:16.006 A:middle
让我们来看一个例子

00:06:16.006 --> 00:06:17.926 A:middle
这个例子中最左边的内容

00:06:17.926 --> 00:06:19.616 A:middle
是根数据项

00:06:19.806 --> 00:06:20.936 A:middle
在用户界面中

00:06:20.936 --> 00:06:22.696 A:middle
可以用单个的窗口

00:06:22.696 --> 00:06:24.246 A:middle
或者是根子表的形式来体现

00:06:24.736 --> 00:06:27.686 A:middle
这里是在整个数据结构中

00:06:27.686 --> 00:06:29.156 A:middle
每个内容的

00:06:29.156 --> 00:06:29.806 A:middle
路径

00:06:30.586 --> 00:06:32.216 A:middle
当  CarPlay  根据某个路径目录

00:06:32.216 --> 00:06:33.776 A:middle
要求某个内容的时候

00:06:34.076 --> 00:06:35.526 A:middle
音频的 app 会

00:06:35.526 --> 00:06:36.846 A:middle
遍历整个结构

00:06:36.846 --> 00:06:38.046 A:middle
来查找所需的内容

00:06:38.836 --> 00:06:40.656 A:middle
在这个例子里

00:06:40.656 --> 00:06:42.576 A:middle
我们要求第一个内容下面的第一个元素

00:06:42.576 --> 00:06:44.366 A:middle
也就是 “Running”

00:06:44.366 --> 00:06:47.636 A:middle
这个播放列表

00:06:47.846 --> 00:06:49.196 A:middle
CarPlay  还会询问某一个目录下面

00:06:49.196 --> 00:06:50.656 A:middle
包含的子元素的

00:06:50.656 --> 00:06:51.636 A:middle
数量

00:06:52.196 --> 00:06:53.776 A:middle
在这个例子里 我们询问

00:06:53.776 --> 00:06:55.056 A:middle
第二个内容下的

00:06:55.206 --> 00:06:56.826 A:middle
第三级中的

00:06:56.826 --> 00:06:58.136 A:middle
子元素数量

00:06:59.116 --> 00:07:01.336 A:middle
在这个例子中

00:06:59.116 --> 00:07:01.336 A:middle
在这个例子中

00:07:01.926 --> 00:07:01.996 A:middle
数量是 2

00:07:04.046 --> 00:07:05.356 A:middle
一些车型可能会根据车辆

00:07:05.356 --> 00:07:07.176 A:middle
是否在行驶状态

00:07:07.246 --> 00:07:08.656 A:middle
而限制屏幕上

00:07:08.656 --> 00:07:09.206 A:middle
可显示的内容

00:07:09.926 --> 00:07:11.116 A:middle
这可能会限制屏幕上

00:07:11.116 --> 00:07:13.146 A:middle
可显示的的行数

00:07:13.146 --> 00:07:14.566 A:middle
以及点击进某一个目录后

00:07:14.566 --> 00:07:15.216 A:middle
可显示的内容

00:07:16.016 --> 00:07:17.266 A:middle
你的 app 可以利用

00:07:17.266 --> 00:07:19.026 A:middle
MPPlayableContentManager

00:07:19.026 --> 00:07:19.826 A:middle
来处理这些变化

00:07:20.386 --> 00:07:23.086 A:middle
查询所显示的内容是否会受到限制

00:07:23.086 --> 00:07:24.806 A:middle
使用

00:07:24.806 --> 00:07:26.176 A:middle
DelegateCallbackContentManagerDidUpdate

00:07:26.176 --> 00:07:28.576 A:middle
来查询内容

00:07:28.576 --> 00:07:29.736 A:middle
是否会受限

00:07:30.446 --> 00:07:31.836 A:middle
用这种方法 你的 app 可以

00:07:31.836 --> 00:07:33.196 A:middle
查询环境属性

00:07:33.196 --> 00:07:34.596 A:middle
就可以知道

00:07:34.596 --> 00:07:36.476 A:middle
表格视图中

00:07:36.476 --> 00:07:37.806 A:middle
允许多少项内容

00:07:37.806 --> 00:07:39.416 A:middle
以及你的 app 最多可以

00:07:39.416 --> 00:07:39.776 A:middle
显示几层菜单

00:07:40.336 --> 00:07:42.816 A:middle
如果你的 app

00:07:42.816 --> 00:07:44.446 A:middle
更适合页面

00:07:44.506 --> 00:07:45.866 A:middle
而不是表格视图

00:07:45.866 --> 00:07:48.026 A:middle
你可以通过将

00:07:48.026 --> 00:07:49.596 A:middle
UIBrowsableContentSupportSectionBrowsing

00:07:49.596 --> 00:07:51.596 A:middle
加到的你属性列表中

00:07:51.636 --> 00:07:52.856 A:middle
来增加页面

00:07:53.746 --> 00:07:55.286 A:middle
我们推荐最多使用  4  个页面

00:07:55.286 --> 00:07:57.616 A:middle
并使用短的标题

00:07:57.616 --> 00:07:58.766 A:middle
因为视窗的空间有限

00:07:58.766 --> 00:07:59.886 A:middle
并且有些汽车的屏幕比较窄

00:07:59.886 --> 00:08:01.526 A:middle
而且在播放内容的同时

00:07:59.886 --> 00:08:01.526 A:middle
而且在播放内容的同时

00:08:01.526 --> 00:08:02.646 A:middle
还需显示

00:08:02.646 --> 00:08:04.076 A:middle
“正在播放”的

00:08:04.076 --> 00:08:04.376 A:middle
按钮

00:08:05.456 --> 00:08:06.666 A:middle
页面的图像会在

00:08:06.666 --> 00:08:08.216 A:middle
CarPlay  的屏幕上

00:08:08.216 --> 00:08:09.016 A:middle
做为模版图像显示

00:08:09.016 --> 00:08:12.096 A:middle
让我们看一下  CarPlay  中

00:08:12.096 --> 00:08:13.196 A:middle
“正在播放” 的屏幕

00:08:13.866 --> 00:08:15.566 A:middle
一些控制选项和元数据

00:08:15.616 --> 00:08:16.906 A:middle
与控制中心中显示的

00:08:16.906 --> 00:08:17.656 A:middle
是一样的

00:08:18.466 --> 00:08:20.046 A:middle
总的来说

00:08:20.046 --> 00:08:21.696 A:middle
你在控制中心中所看到的选项与数据

00:08:21.696 --> 00:08:23.186 A:middle
在  CarPlay  的 “正在播放” 屏幕中

00:08:23.186 --> 00:08:24.806 A:middle
也应该有所显示

00:08:25.876 --> 00:08:27.266 A:middle
要调出这个“正在播放”的屏幕

00:08:27.266 --> 00:08:28.766 A:middle
用户可以点击你

00:08:28.766 --> 00:08:30.356 A:middle
app 视图右上角的

00:08:30.356 --> 00:08:31.596 A:middle
“正在播放”

00:08:31.596 --> 00:08:33.486 A:middle
或通过点击  CarPlay  主页面上的

00:08:33.486 --> 00:08:34.796 A:middle
“正在播放”

00:08:34.796 --> 00:08:35.145 A:middle
app 图标

00:08:36.236 --> 00:08:37.726 A:middle
运行过程中 你的  app  的名字会显示在

00:08:37.726 --> 00:08:38.986 A:middle
“正在播放” 的屏幕

00:08:38.986 --> 00:08:42.116 A:middle
的右上方

00:08:44.116 --> 00:08:45.666 A:middle
“正在播放” 屏幕的元数据

00:08:45.666 --> 00:08:46.776 A:middle
与设置控制中心等

00:08:46.776 --> 00:08:47.336 A:middle
相同

00:08:47.956 --> 00:08:49.446 A:middle
在 MPNowPlayingInfoCenter 中

00:08:49.446 --> 00:08:51.496 A:middle
设置一个信息字典

00:08:51.496 --> 00:08:52.806 A:middle
提供尽可能多的

00:08:52.806 --> 00:08:53.436 A:middle
信息

00:08:53.966 --> 00:08:57.556 A:middle
另外 对播放指令做出回应

00:08:57.556 --> 00:08:58.866 A:middle
这样用户可以对内容做出调整

00:08:58.866 --> 00:09:00.906 A:middle
例如播放 暂停

00:08:58.866 --> 00:09:00.906 A:middle
例如播放 暂停

00:09:00.956 --> 00:09:03.986 A:middle
跳过曲目

00:09:03.986 --> 00:09:05.416 A:middle
随机播放或重复播放

00:09:05.416 --> 00:09:05.666 A:middle
歌单

00:09:06.726 --> 00:09:08.326 A:middle
这些是 CarPlay

00:09:08.326 --> 00:09:09.266 A:middle
“正在播放” 的界面

00:09:09.266 --> 00:09:10.456 A:middle
支持的指令

00:09:10.996 --> 00:09:14.466 A:middle
在新的 iSO 11 中

00:09:14.466 --> 00:09:15.936 A:middle
“正在播放” 的界面支持显示

00:09:15.936 --> 00:09:17.256 A:middle
和调整播放速度

00:09:17.916 --> 00:09:19.366 A:middle
在  CarPlay  里

00:09:19.366 --> 00:09:20.456 A:middle
要想在你的 app 中“正在播放” 的界面里

00:09:20.456 --> 00:09:23.016 A:middle
显示播放的速度

00:09:23.016 --> 00:09:24.926 A:middle
需要将  MPNowPlayingInfo PropertyDefaultPlaybackRate

00:09:24.966 --> 00:09:26.796 A:middle
加到  MP Now Playing Info Center  里

00:09:26.796 --> 00:09:28.186 A:middle
并且利用  MPRemoteCommandCenter  里

00:09:28.186 --> 00:09:29.576 A:middle
存有所支持的一系列的播放速度的数组

00:09:29.576 --> 00:09:30.596 A:middle
来对调整播放速度的指令

00:09:30.596 --> 00:09:31.676 A:middle
做出反应

00:09:32.166 --> 00:09:34.696 A:middle
这里有一个代码的例子

00:09:34.696 --> 00:09:36.006 A:middle
展示了怎样实现

00:09:36.006 --> 00:09:36.876 A:middle
调整播放速度

00:09:37.406 --> 00:09:38.806 A:middle
在这个例子中

00:09:38.806 --> 00:09:40.146 A:middle
默认的当前曲目的播放速度为 x1

00:09:40.146 --> 00:09:42.246 A:middle
支持的

00:09:42.246 --> 00:09:43.656 A:middle
播放速度有

00:09:43.656 --> 00:09:47.616 A:middle
0.5 1.0 1.5  和  2.0

00:09:48.316 --> 00:09:49.566 A:middle
若用户想要调整播放速度

00:09:49.566 --> 00:09:51.036 A:middle
当播放速度不断增加 当增加至

00:09:51.036 --> 00:09:52.796 A:middle
所支持的最快播放速度时

00:09:52.796 --> 00:09:54.156 A:middle
播放速度

00:09:54.156 --> 00:09:55.486 A:middle
会循环到

00:09:55.486 --> 00:09:56.146 A:middle
最小值

00:09:57.046 --> 00:09:58.646 A:middle
在这个例子里

00:09:58.646 --> 00:10:01.056 A:middle
播放速度会增加到 1.5

00:09:58.646 --> 00:10:01.056 A:middle
播放速度会增加到 1.5

00:10:01.056 --> 00:10:02.976 A:middle
然后到  2.0  然后回到  0.5

00:10:03.976 --> 00:10:07.176 A:middle
一些音频 app 会响应

00:10:07.176 --> 00:10:08.756 A:middle
MP  遥控指令中心中的

00:10:08.756 --> 00:10:09.396 A:middle
多项指令

00:10:10.106 --> 00:10:11.326 A:middle
根据指令的不同

00:10:11.326 --> 00:10:12.906 A:middle
运行中的  CarPlay  “正在播放”界面

00:10:12.906 --> 00:10:14.526 A:middle
将会结合响应的指令

00:10:14.526 --> 00:10:15.966 A:middle
转化为一个按钮

00:10:15.966 --> 00:10:18.186 A:middle
例如省略号

00:10:18.186 --> 00:10:19.576 A:middle
或一个菜单按钮来替代

00:10:19.576 --> 00:10:20.516 A:middle
之前的按钮

00:10:20.626 --> 00:10:25.176 A:middle
规范的做法

00:10:25.176 --> 00:10:26.536 A:middle
在调用  MP playable content data source

00:10:26.536 --> 00:10:28.096 A:middle
和 MP playable content

00:10:28.166 --> 00:10:29.386 A:middle
委托中的

00:10:29.386 --> 00:10:31.286 A:middle
完成指针之前

00:10:31.286 --> 00:10:32.726 A:middle
将要播放的内容

00:10:32.726 --> 00:10:33.466 A:middle
准备好

00:10:34.266 --> 00:10:35.576 A:middle
对于那些不用页面

00:10:35.576 --> 00:10:37.226 A:middle
只用表格视图的 app

00:10:37.756 --> 00:10:39.326 A:middle
根表格必须返回

00:10:39.326 --> 00:10:40.166 A:middle
至少一项内容

00:10:40.886 --> 00:10:42.306 A:middle
CarPlay  会显示一个

00:10:42.306 --> 00:10:44.036 A:middle
读取任务进行情况的指示

00:10:44.036 --> 00:10:45.816 A:middle
如果 app 在一定时限内

00:10:45.816 --> 00:10:46.916 A:middle
没有返回内容

00:10:46.916 --> 00:10:47.376 A:middle
就会超时

00:10:47.856 --> 00:10:49.996 A:middle
如果你的 app 需要一些初始的设置

00:10:49.996 --> 00:10:51.626 A:middle
比如登入的信息

00:10:52.066 --> 00:10:53.416 A:middle
在页面的第一行

00:10:53.416 --> 00:10:54.936 A:middle
应该提示用户

00:10:54.936 --> 00:10:56.386 A:middle
app  当前的状态

00:10:57.596 --> 00:10:58.786 A:middle
关于使用音频的  app  就是这些内容

00:10:58.786 --> 00:10:59.936 A:middle
下面  Chris Whitney  将会讨论

00:10:59.936 --> 00:11:01.196 A:middle
CarPlay  中

00:10:59.936 --> 00:11:01.196 A:middle
CarPlay  中

00:11:01.226 --> 00:11:02.326 A:middle
有关短息

00:11:02.326 --> 00:11:02.636 A:middle
和语音通话的 app

00:11:05.566 --> 00:11:06.856 A:middle
&gt;&gt; 大家好 我是  Chris Whitney

00:11:06.856 --> 00:11:08.016 A:middle
来自  CarPlay  工程师团队

00:11:08.726 --> 00:11:10.246 A:middle
Albert  谈到了关于使用音频的  app

00:11:10.366 --> 00:11:11.666 A:middle
下面我会讲解一些其他类别的

00:11:11.666 --> 00:11:13.026 A:middle
可以与  CarPlay

00:11:13.026 --> 00:11:13.906 A:middle
相结合的  app

00:11:14.776 --> 00:11:16.516 A:middle
我要讲解的第一类

00:11:16.746 --> 00:11:18.456 A:middle
是短信

00:11:18.456 --> 00:11:20.986 A:middle
以及用网络协议传输语音的打电话的 app

00:11:22.086 --> 00:11:23.706 A:middle
在 CarPlay 中  Siri  为

00:11:23.706 --> 00:11:26.036 A:middle
短信以及语音通话  app

00:11:26.036 --> 00:11:26.806 A:middle
提供接口

00:11:27.696 --> 00:11:29.296 A:middle
在主页面上

00:11:29.296 --> 00:11:31.176 A:middle
当  app  的图标被选中后

00:11:31.176 --> 00:11:32.556 A:middle
Siri  提供读信息 建立新信息

00:11:32.556 --> 00:11:34.666 A:middle
或开始语音通话

00:11:34.976 --> 00:11:36.196 A:middle
这几种选择

00:11:37.226 --> 00:11:39.506 A:middle
使用了  SiriKit  的  app  已经可以支持这些互动

00:11:39.506 --> 00:11:41.136 A:middle
但对  Siri  发出的

00:11:41.136 --> 00:11:43.216 A:middle
请求中必须包含

00:11:43.216 --> 00:11:43.806 A:middle
app  的名字

00:11:45.226 --> 00:11:46.566 A:middle
经过一些改动

00:11:47.006 --> 00:11:49.626 A:middle
短信和语音通话的  app  在  CarPlay  中

00:11:49.626 --> 00:11:50.866 A:middle
可以包含一个主页面的图标

00:11:50.866 --> 00:11:52.326 A:middle
提示

00:11:52.786 --> 00:11:54.956 A:middle
以及一个专门的

00:11:54.956 --> 00:11:55.936 A:middle
Siri  接口

00:11:56.476 --> 00:12:00.606 A:middle
这里是  CarPlay  中

00:11:56.476 --> 00:12:00.606 A:middle
这里是  CarPlay  中

00:12:00.606 --> 00:12:02.606 A:middle
支持短信和语音通信的  app

00:12:02.606 --> 00:12:03.746 A:middle
所要满足的要求

00:12:05.386 --> 00:12:07.326 A:middle
app 必须使用

00:12:07.326 --> 00:12:09.706 A:middle
SiriKit  中的短讯意图

00:12:09.706 --> 00:12:10.626 A:middle
并有专门针对

00:12:10.626 --> 00:12:11.976 A:middle
CarPlay  短讯的

00:12:11.976 --> 00:12:12.796 A:middle
授权

00:12:14.336 --> 00:12:16.906 A:middle
同样的 语音通话 app

00:12:17.136 --> 00:12:18.816 A:middle
必须使用

00:12:18.816 --> 00:12:20.776 A:middle
SiriKit  中的通话意图

00:12:20.776 --> 00:12:22.116 A:middle
并有专门针对

00:12:22.116 --> 00:12:23.656 A:middle
CarPlay  语音通讯的

00:12:23.656 --> 00:12:24.016 A:middle
授权

00:12:25.336 --> 00:12:27.046 A:middle
语音通话  app  还必须使用

00:12:27.046 --> 00:12:28.966 A:middle
CallKit 来通知

00:12:28.966 --> 00:12:30.436 A:middle
CarPlay  通话的

00:12:30.436 --> 00:12:30.756 A:middle
状态

00:12:31.426 --> 00:12:34.346 A:middle
一个  app  在  CarPlay  中

00:12:34.346 --> 00:12:36.286 A:middle
可以同时支持短信

00:12:36.286 --> 00:12:36.686 A:middle
和语音通话

00:12:38.106 --> 00:12:39.366 A:middle
让我们看一下更多

00:12:39.366 --> 00:12:43.396 A:middle
关于  SiriKit  技术要求的细节

00:12:43.546 --> 00:12:46.466 A:middle
对于短信  app

00:12:46.466 --> 00:12:47.636 A:middle
Siri  通过

00:12:47.826 --> 00:12:49.056 A:middle
INSendMessageIntent  发送信息

00:12:50.626 --> 00:12:53.146 A:middle
Siri  通过  INSearchforMessagesIntent

00:12:53.526 --> 00:12:55.296 A:middle
读取新收到的信息

00:12:55.546 --> 00:12:57.576 A:middle
并搜寻未读信息

00:12:58.506 --> 00:13:00.756 A:middle
读信息的过程完成后

00:12:58.506 --> 00:13:00.756 A:middle
读信息的过程完成后

00:13:00.756 --> 00:13:02.656 A:middle
Siri  通过调用  INSendMessageAttributeIntent

00:13:02.846 --> 00:13:04.626 A:middle
将信息标记为已读

00:13:05.666 --> 00:13:07.646 A:middle
这三个意图在  CarPlay  中

00:13:07.646 --> 00:13:09.296 A:middle
是支持一个完整的信息读取过程

00:13:09.296 --> 00:13:10.576 A:middle
所必须用到的

00:13:11.166 --> 00:13:15.626 A:middle
对于语音通话  app

00:13:15.626 --> 00:13:17.946 A:middle
Siri  通过调用  INStartAudiCallIntent

00:13:18.156 --> 00:13:20.916 A:middle
来开始通话

00:13:21.526 --> 00:13:23.466 A:middle
关于搜索 例如搜索未接来电

00:13:23.466 --> 00:13:25.336 A:middle
则通过调用

00:13:25.486 --> 00:13:27.146 A:middle
INSearchCallHistoryIntent

00:13:28.386 --> 00:13:30.046 A:middle
这些意图是在  CarPlay  中

00:13:30.046 --> 00:13:31.526 A:middle
完成一个通话流程

00:13:31.526 --> 00:13:33.546 A:middle
所必备的

00:13:34.526 --> 00:13:36.986 A:middle
关于  SirKit  的细节

00:13:36.986 --> 00:13:39.176 A:middle
请参见“SiriKit  最新更新”

00:13:39.716 --> 00:13:41.736 A:middle
以及“创造最好的

00:13:41.736 --> 00:13:42.386 A:middle
SiriKit  体验”

00:13:42.476 --> 00:13:46.956 A:middle
任何已经使用了  CallKit  的  app

00:13:46.956 --> 00:13:49.176 A:middle
都有一个  CarPlay  的接口

00:13:49.176 --> 00:13:50.886 A:middle
用来处理新来电以及

00:13:50.986 --> 00:13:51.816 A:middle
正在通话中的来电

00:13:52.836 --> 00:13:54.096 A:middle
但如果你的语音通话  app

00:13:54.476 --> 00:13:56.186 A:middle
还没有使用  CallKit

00:13:56.806 --> 00:13:58.136 A:middle
这样是结合  CarPlay

00:13:58.136 --> 00:13:59.046 A:middle
所必须的一个要求

00:14:00.016 --> 00:14:02.226 A:middle
总体来说  app  必须

00:14:02.226 --> 00:14:04.396 A:middle
在接到来电时通知  CallKit

00:14:04.396 --> 00:14:07.166 A:middle
来处理开始

00:14:07.416 --> 00:14:09.266 A:middle
接听和挂断的行为

00:14:10.446 --> 00:14:11.666 A:middle
如果该  app  的语音通话平台支持其他行为

00:14:11.666 --> 00:14:14.256 A:middle
例如无声 群组

00:14:14.256 --> 00:14:16.616 A:middle
来电等待和键盘声音

00:14:16.616 --> 00:14:18.366 A:middle
那么这些活动也应该

00:14:18.496 --> 00:14:18.976 A:middle
在  app  中实现

00:14:20.746 --> 00:14:22.236 A:middle
关于  CallKit  的更多信息

00:14:22.936 --> 00:14:24.576 A:middle
请观看  2016  WWDC

00:14:24.576 --> 00:14:26.256 A:middle
“用  CallKit  提高语音通话 app”

00:14:26.256 --> 00:14:28.216 A:middle
的视频

00:14:30.686 --> 00:14:32.426 A:middle
app  可以在  CarPlay  中

00:14:32.426 --> 00:14:34.486 A:middle
显示新信息

00:14:34.836 --> 00:14:35.726 A:middle
和未接来电的提示

00:14:36.546 --> 00:14:37.706 A:middle
在  CarPlay  中显示提示

00:14:37.706 --> 00:14:39.306 A:middle
需要一些

00:14:39.306 --> 00:14:39.746 A:middle
其他的设置

00:14:40.376 --> 00:14:42.886 A:middle
在请求提示通知授权的时候

00:14:42.886 --> 00:14:44.136 A:middle
CarPlay  必须

00:14:44.136 --> 00:14:45.936 A:middle
包含在其中

00:14:46.336 --> 00:14:48.826 A:middle
并且信息必须单独在一个提示的类别中

00:14:48.826 --> 00:14:50.976 A:middle
通过  CarPlay  选项中

00:14:50.976 --> 00:14:53.416 A:middle
允许这个选项

00:14:53.416 --> 00:14:54.666 A:middle
来实现

00:14:55.916 --> 00:14:58.206 A:middle
提示这个类别

00:14:58.206 --> 00:15:00.256 A:middle
仅限使用于信息

00:14:58.206 --> 00:15:00.256 A:middle
仅限使用于信息

00:15:00.456 --> 00:15:01.876 A:middle
不应该

00:15:01.956 --> 00:15:03.226 A:middle
用于其他

00:15:03.226 --> 00:15:03.746 A:middle
app 提示信息

00:15:04.296 --> 00:15:08.486 A:middle
提示这个类别必须指定一个

00:15:08.486 --> 00:15:11.036 A:middle
SiriKit  的意图

00:15:11.036 --> 00:15:11.956 A:middle
来处理  CarPlay  中的

00:15:11.956 --> 00:15:15.296 A:middle
对提示的选择

00:15:15.406 --> 00:15:17.286 A:middle
只满足  CarPlay  的短信

00:15:17.286 --> 00:15:18.566 A:middle
或语音通话的  app

00:15:18.566 --> 00:15:20.036 A:middle
才会被允许

00:15:20.036 --> 00:15:21.486 A:middle
请求发出

00:15:21.486 --> 00:15:22.696 A:middle
显示通知的授权

00:15:24.386 --> 00:15:26.356 A:middle
同时 用户可以使用设置选项

00:15:26.356 --> 00:15:28.466 A:middle
来禁止你的  app

00:15:28.466 --> 00:15:29.846 A:middle
在  CarPlay  中显示提示通知

00:15:31.666 --> 00:15:32.536 A:middle
让我们看一下  CarPlay  中

00:15:32.536 --> 00:15:33.726 A:middle
设置通知的

00:15:33.726 --> 00:15:33.976 A:middle
代码

00:15:36.816 --> 00:15:38.706 A:middle
首先 在请求发送提示通知的授权时

00:15:38.706 --> 00:15:39.976 A:middle
将  CarPlay  选项

00:15:40.046 --> 00:15:41.586 A:middle
包含进去

00:15:42.966 --> 00:15:45.226 A:middle
如果用户不接受提示通知

00:15:45.226 --> 00:15:47.176 A:middle
则让你的 app 恰当地禁止

00:15:47.176 --> 00:15:48.566 A:middle
与发送提示

00:15:48.616 --> 00:15:49.336 A:middle
有关的功能

00:15:50.446 --> 00:15:52.546 A:middle
接下来 建立一个新的信息类别

00:15:52.546 --> 00:15:54.566 A:middle
仅包含关于

00:15:54.566 --> 00:15:56.186 A:middle
信息的通知

00:15:56.656 --> 00:15:57.976 A:middle
关于其他功能的通知

00:15:57.976 --> 00:16:00.596 A:middle
例如新闻或游戏

00:15:57.976 --> 00:16:00.596 A:middle
例如新闻或游戏

00:16:00.816 --> 00:16:02.126 A:middle
不应该被包含在

00:16:02.126 --> 00:16:03.276 A:middle
这个通知类别中

00:16:03.756 --> 00:16:06.066 A:middle
给这个类别加一个标记

00:16:06.066 --> 00:16:08.136 A:middle
确保所有本地

00:16:08.136 --> 00:16:10.286 A:middle
或远程的

00:16:10.626 --> 00:16:12.686 A:middle
信息通知提醒

00:16:12.686 --> 00:16:13.826 A:middle
都有同样的类别标记

00:16:14.366 --> 00:16:17.906 A:middle
建立一个意图的标记

00:16:17.906 --> 00:16:19.706 A:middle
以便通知选项在

00:16:20.456 --> 00:16:21.446 A:middle
CarPlay  中被选中时

00:16:21.446 --> 00:16:22.316 A:middle
来设置  Siri  的互动

00:16:23.536 --> 00:16:24.646 A:middle
通常使用的是

00:16:24.896 --> 00:16:25.966 A:middle
INSearchForMessagesIntentIdentifier

00:16:25.966 --> 00:16:27.596 A:middle
这个意图

00:16:27.596 --> 00:16:29.386 A:middle
设置  Siri  让它搜寻这个意图

00:16:29.566 --> 00:16:31.386 A:middle
并读取与这个提示通知

00:16:31.386 --> 00:16:32.756 A:middle
对应的信息

00:16:33.276 --> 00:16:36.346 A:middle
关于开发短信和语音通话  app

00:16:36.346 --> 00:16:37.536 A:middle
有一些推荐的

00:16:37.536 --> 00:16:40.136 A:middle
对应的信息

00:16:41.006 --> 00:16:42.466 A:middle
在通知的标题或副标题中

00:16:42.466 --> 00:16:43.776 A:middle
应该只包含发送者

00:16:43.776 --> 00:16:46.066 A:middle
和群组名称

00:16:46.066 --> 00:16:47.016 A:middle
等信息

00:16:47.546 --> 00:16:49.526 A:middle
信息的内容不应该

00:16:49.526 --> 00:16:50.716 A:middle
在  CarPlay  中显示出来

00:16:51.286 --> 00:16:54.476 A:middle
读取一条信息过后

00:16:54.476 --> 00:16:55.036 A:middle
Siri 将使用

00:16:55.186 --> 00:16:57.286 A:middle
INSentMessageAttributeIntent

00:16:57.286 --> 00:16:58.376 A:middle
将信息标为已读

00:16:59.466 --> 00:17:00.346 A:middle
读取状态

00:16:59.466 --> 00:17:00.346 A:middle
读取状态

00:17:00.346 --> 00:17:02.056 A:middle
应该显示在 app 中

00:17:02.056 --> 00:17:03.646 A:middle
在之后搜索信息的活动中

00:17:03.846 --> 00:17:04.266 A:middle
也应该体现

00:17:05.126 --> 00:17:08.465 A:middle
用户可能驶入或者驶出信号覆盖的范围

00:17:08.465 --> 00:17:10.866 A:middle
所以  app  应该使用提示

00:17:10.866 --> 00:17:12.066 A:middle
来通知用户

00:17:12.066 --> 00:17:14.636 A:middle
未接来电

00:17:14.636 --> 00:17:15.996 A:middle
或者发送失败的信息

00:17:17.336 --> 00:17:18.516 A:middle
像我们之前描述的那样

00:17:18.516 --> 00:17:19.776 A:middle
这可能需要

00:17:19.776 --> 00:17:21.376 A:middle
单独设置另一个

00:17:21.376 --> 00:17:21.695 A:middle
提示类别

00:17:22.256 --> 00:17:26.906 A:middle
可以结合  CarPlay  的

00:17:26.906 --> 00:17:28.496 A:middle
最后一个类别的  app

00:17:28.496 --> 00:17:30.066 A:middle
是汽车生产商的  app

00:17:32.026 --> 00:17:33.686 A:middle
只有这类汽车生产商的  app

00:17:33.686 --> 00:17:35.006 A:middle
可以在  CarPlay  中

00:17:35.006 --> 00:17:36.746 A:middle
显示自定义

00:17:36.746 --> 00:17:37.266 A:middle
用户界面

00:17:38.176 --> 00:17:39.966 A:middle
在这个例子中

00:17:39.966 --> 00:17:41.246 A:middle
汽车生产商的  app

00:17:41.246 --> 00:17:42.436 A:middle
提供温度设置

00:17:43.016 --> 00:17:45.256 A:middle
选择收音机频道

00:17:45.256 --> 00:17:46.626 A:middle
以及呼叫公路援助的功能

00:17:47.856 --> 00:17:49.426 A:middle
在汽车生产商的  app  中提供这些功能

00:17:49.426 --> 00:17:51.866 A:middle
让用户可以不必离开  CarPlay

00:17:51.866 --> 00:17:53.136 A:middle
就可以调节车的温度

00:17:53.136 --> 00:17:55.036 A:middle
和收音机

00:17:55.556 --> 00:17:58.306 A:middle
汽车生产商的  app  可以

00:17:58.306 --> 00:17:59.366 A:middle
利用 iPhone  的

00:17:59.366 --> 00:18:00.866 A:middle
网络连接

00:17:59.366 --> 00:18:00.866 A:middle
网络连接

00:18:00.866 --> 00:18:02.896 A:middle
和强大的开发平台

00:18:02.896 --> 00:18:04.036 A:middle
带来更多汽车相关的

00:18:04.036 --> 00:18:04.606 A:middle
功能

00:18:05.176 --> 00:18:07.406 A:middle
例如 这个汽车生产商的 app

00:18:07.676 --> 00:18:09.316 A:middle
可以利用Siri

00:18:09.316 --> 00:18:11.406 A:middle
来语音控制温度和收音机

00:18:11.406 --> 00:18:11.846 A:middle
设置

00:18:15.606 --> 00:18:17.176 A:middle
汽车生产商的  app

00:18:17.176 --> 00:18:18.816 A:middle
必须由汽车制造商来制作

00:18:18.816 --> 00:18:20.496 A:middle
需要车的制造商提供信息

00:18:20.496 --> 00:18:22.046 A:middle
来控制汽车上的功能

00:18:22.546 --> 00:18:25.366 A:middle
这些  app  必须有一个特定的

00:18:25.366 --> 00:18:27.106 A:middle
CarPlay  协议的

00:18:27.106 --> 00:18:27.756 A:middle
签名授权

00:18:28.996 --> 00:18:30.826 A:middle
它们必须在  CarPlay  里

00:18:30.826 --> 00:18:31.906 A:middle
显示一个用户界面

00:18:32.896 --> 00:18:35.516 A:middle
并且只能在支持的

00:18:35.516 --> 00:18:37.186 A:middle
车型上显示

00:18:39.626 --> 00:18:40.686 A:middle
CarPlay  通过匹配

00:18:40.736 --> 00:18:42.486 A:middle
汽车的外部配件协议

00:18:42.486 --> 00:18:44.576 A:middle
与 app 的

00:18:44.576 --> 00:18:46.206 A:middle
CarPlay  协议权限

00:18:46.456 --> 00:18:48.356 A:middle
来决定某款车型

00:18:48.356 --> 00:18:50.096 A:middle
是否支持某个

00:18:50.516 --> 00:18:53.036 A:middle
汽车生产商的 app

00:18:53.036 --> 00:18:53.996 A:middle
因此 在汽车开发制造过程中

00:18:53.996 --> 00:18:55.726 A:middle
考虑可能的汽车生产商的  app

00:18:55.726 --> 00:18:58.316 A:middle
是很重要的

00:18:58.616 --> 00:18:59.946 A:middle
这样才能保证

00:18:59.946 --> 00:19:01.636 A:middle
汽车配有适当的

00:18:59.946 --> 00:19:01.636 A:middle
汽车配有适当的

00:19:01.636 --> 00:19:02.046 A:middle
协议声明

00:19:02.536 --> 00:19:05.576 A:middle
这个例子展示了  CarPlay  是怎样

00:19:05.576 --> 00:19:07.226 A:middle
将汽车与汽车生产商的 app

00:19:07.226 --> 00:19:07.646 A:middle
相匹配

00:19:08.346 --> 00:19:10.786 A:middle
这个汽车有两个协议的声明

00:19:10.786 --> 00:19:12.606 A:middle
一个是表现的协议

00:19:12.646 --> 00:19:14.186 A:middle
用来采集汽车的数据

00:19:14.186 --> 00:19:16.806 A:middle
还有一个控制温度

00:19:16.806 --> 00:19:17.486 A:middle
的协议

00:19:18.686 --> 00:19:20.506 A:middle
像这儿所显示的那样

00:19:20.506 --> 00:19:21.676 A:middle
协议的名字应该用

00:19:21.926 --> 00:19:22.766 A:middle
反向域名格式

00:19:23.416 --> 00:19:27.326 A:middle
汽车生产商希望

00:19:27.326 --> 00:19:28.446 A:middle
在一个新叫做“跑道”的  app  中

00:19:28.446 --> 00:19:30.306 A:middle
利用有关汽车

00:19:30.306 --> 00:19:33.156 A:middle
表现的数据

00:19:33.156 --> 00:19:34.426 A:middle
这个  app  是为了赛道所设计

00:19:35.556 --> 00:19:36.796 A:middle
该  app  包含了

00:19:36.826 --> 00:19:38.076 A:middle
表现协议以及授权

00:19:38.866 --> 00:19:41.706 A:middle
并且 app 和车

00:19:41.706 --> 00:19:43.166 A:middle
都支持表现协议

00:19:43.166 --> 00:19:47.126 A:middle
所以 “跑道” 将会

00:19:47.126 --> 00:19:49.886 A:middle
显示在  CarPlay  中

00:19:51.666 --> 00:19:53.796 A:middle
汽车生产商的  app

00:19:53.796 --> 00:19:54.826 A:middle
还可以支持多个协议

00:19:56.116 --> 00:19:57.896 A:middle
这个汽车生产商决定

00:19:57.896 --> 00:19:59.516 A:middle
在“跑道”这个 app 成功的基础上

00:19:59.986 --> 00:20:02.016 A:middle
开发一个新的 app

00:19:59.986 --> 00:20:02.016 A:middle
开发一个新的 app

00:20:02.016 --> 00:20:03.956 A:middle
叫做“舒适旅程”

00:20:03.956 --> 00:20:05.836 A:middle
可以根据驾驶者的喜好

00:20:05.836 --> 00:20:07.016 A:middle
很方便的

00:20:07.056 --> 00:20:08.356 A:middle
调节收音机和温度

00:20:09.686 --> 00:20:10.856 A:middle
这个  app  的授权

00:20:10.856 --> 00:20:13.406 A:middle
包括一个温度的协议

00:20:13.406 --> 00:20:14.376 A:middle
和一个新的收音机的协议

00:20:14.986 --> 00:20:17.366 A:middle
该车不支持收音机的协议

00:20:17.366 --> 00:20:19.206 A:middle
但因为车辆和  app

00:20:19.206 --> 00:20:21.366 A:middle
都支持温度协议

00:20:21.366 --> 00:20:24.266 A:middle
“舒适旅程” 这个  app

00:20:24.266 --> 00:20:25.456 A:middle
将会显示在

00:20:25.456 --> 00:20:25.816 A:middle
CarPlay  中

00:20:27.226 --> 00:20:28.986 A:middle
在汽车生产商的  app  开始运行之后

00:20:29.266 --> 00:20:30.646 A:middle
应该询问所支持的外部配件协议

00:20:30.646 --> 00:20:32.906 A:middle
并且在用户界面上

00:20:32.906 --> 00:20:34.466 A:middle
应该只显示

00:20:35.226 --> 00:20:36.486 A:middle
支持的功能

00:20:37.416 --> 00:20:39.156 A:middle
在这个例子中

00:20:39.156 --> 00:20:40.736 A:middle
“舒适旅程”这个  app

00:20:40.736 --> 00:20:42.796 A:middle
应该只显示温度控制

00:20:42.796 --> 00:20:44.576 A:middle
因为该车不支持

00:20:44.576 --> 00:20:44.976 A:middle
收音机协议

00:20:49.086 --> 00:20:50.586 A:middle
这个汽车生产商想开发另外一个  app

00:20:50.586 --> 00:20:52.926 A:middle
叫做“充电”

00:20:53.446 --> 00:20:54.456 A:middle
来显示他们的

00:20:54.456 --> 00:20:55.666 A:middle
电动车充电站

00:20:56.406 --> 00:20:58.086 A:middle
为了让这个 app 只适用于他们自己的电动车

00:20:58.086 --> 00:20:59.926 A:middle
这个汽车生产商在  app  的权限中

00:20:59.926 --> 00:21:02.476 A:middle
设定了一个

00:20:59.926 --> 00:21:02.476 A:middle
设定了一个

00:21:02.766 --> 00:21:03.836 A:middle
新的电子协议

00:21:04.446 --> 00:21:07.266 A:middle
因为这款车

00:21:07.266 --> 00:21:08.666 A:middle
不支持电子协议

00:21:09.296 --> 00:21:10.976 A:middle
“充电”这个  app

00:21:10.976 --> 00:21:12.516 A:middle
将不会显示在

00:21:13.146 --> 00:21:13.366 A:middle
CarPlay  中

00:21:16.386 --> 00:21:17.446 A:middle
开发一个汽车生产商的  app

00:21:17.686 --> 00:21:18.986 A:middle
需要与该汽车

00:21:18.986 --> 00:21:19.366 A:middle
进行信息交换

00:21:20.636 --> 00:21:22.486 A:middle
汽车生产商的  app

00:21:22.486 --> 00:21:24.216 A:middle
必须直接通过  iPhone

00:21:24.216 --> 00:21:25.956 A:middlel
使用“外部配件”框架

00:21:25.956 --> 00:21:26.816 A:middle
与车辆进行信息交换

00:21:27.876 --> 00:21:29.526 A:middle
直接通过外部配件

00:21:29.526 --> 00:21:31.516 A:middle
进行交流

00:21:31.516 --> 00:21:33.676 A:middle
提高了 app 的反应速度

00:21:33.676 --> 00:21:35.396 A:middle
并避免了

00:21:35.396 --> 00:21:36.356 A:middle
依赖网络连接

00:21:37.646 --> 00:21:38.906 A:middle
要使用外部配件框架

00:21:38.906 --> 00:21:41.326 A:middle
app  需要像之前演示的那样

00:21:41.326 --> 00:21:43.086 A:middle
定义一个自定义的协议名称

00:21:43.086 --> 00:21:45.706 A:middle
在汽车的软件中

00:21:45.706 --> 00:21:46.996 A:middle
和 app 所检测到的

00:21:46.996 --> 00:21:50.646 A:middle
配件连接事件中

00:21:50.646 --> 00:21:53.146 A:middle
应用这个协议

00:21:53.146 --> 00:21:55.296 A:middle
在建立连接的时候

00:21:55.296 --> 00:21:56.656 A:middle
初始化一个  EA  对话

00:21:56.656 --> 00:21:57.686 A:middle
来建立车中的网络传输

00:21:58.996 --> 00:22:01.036 A:middle
了解更多信息

00:21:58.996 --> 00:22:01.036 A:middle
了解更多信息

00:22:01.036 --> 00:22:02.816 A:middle
请参见外部配件编程的

00:22:03.486 --> 00:22:03.696 A:middle
话题

00:22:05.716 --> 00:22:08.046 A:middle
汽车生产商的 app 可以使用  UIKit

00:22:08.046 --> 00:22:09.576 A:middle
来在  CarPlay  的屏幕上

00:22:09.576 --> 00:22:10.296 A:middle
显示用户界面

00:22:11.396 --> 00:22:12.456 A:middle
要创立一个  CarPlay  的接口

00:22:12.456 --> 00:22:15.196 A:middle
app  需检测

00:22:15.196 --> 00:22:16.716 A:middle
UIScreen  连接事件

00:22:18.066 --> 00:22:19.146 A:middle
当屏幕建立连接时

00:22:19.266 --> 00:22:20.316 A:middle
验证连接的屏幕的

00:22:20.316 --> 00:22:22.096 A:middle
特征包含

00:22:22.096 --> 00:22:22.866 A:middle
CarPlay  的惯用语法

00:22:24.256 --> 00:22:26.106 A:middle
除了  CarPlay iOS  还支持

00:22:26.106 --> 00:22:27.396 A:middle
其他外部的显示系统

00:22:27.396 --> 00:22:29.166 A:middle
例如飞机上的

00:22:29.166 --> 00:22:29.516 A:middle
屏幕

00:22:30.746 --> 00:22:32.906 A:middle
屏幕只应该显示有  CarPlay  惯用语法的

00:22:32.906 --> 00:22:34.286 A:middle
CarPlay  内容

00:22:34.836 --> 00:22:39.636 A:middle
这个 app 在  CarPlay  屏幕上

00:22:39.636 --> 00:22:41.656 A:middle
建立了一个  UIWindow

00:22:41.656 --> 00:22:43.676 A:middle
将根视图的控制器设置为

00:22:43.676 --> 00:22:44.956 A:middle
自定义  UI  视图

00:22:46.436 --> 00:22:47.566 A:middle
控制器的子类

00:22:47.566 --> 00:22:47.956 A:middle
让我们看一下这些结合在一起是怎样的

00:22:51.856 --> 00:22:53.076 A:middle
这里是在  CarPlay  中

00:22:53.076 --> 00:22:54.356 A:middle
显示视图控制器的

00:22:54.356 --> 00:22:54.776 A:middle
代码

00:22:55.766 --> 00:22:56.856 A:middle
通常这些代码或者放在

00:22:56.856 --> 00:22:58.256 A:middle
你  UI  程序的委托中

00:22:58.256 --> 00:23:01.066 A:middle
或者放在为这些代码所建的

00:22:58.256 --> 00:23:01.066 A:middle
或者放在为这些代码所建的

00:23:01.066 --> 00:23:02.316 A:middle
一个新的类中

00:23:03.476 --> 00:23:05.366 A:middle
首先 我们加上一个新的类

00:23:05.396 --> 00:23:07.166 A:middle
来储存我们

00:23:07.916 --> 00:23:08.756 A:middle
为  CarPlay 所创建的

00:23:08.756 --> 00:23:09.506 A:middle
UIWindow

00:23:10.386 --> 00:23:12.026 A:middle
接下来我们定义一个

00:23:12.026 --> 00:23:13.856 A:middle
叫做  updateCarWindow  的实例方法

00:23:15.026 --> 00:23:16.266 A:middle
要检查是否连接了  CarPlay  的屏幕

00:23:16.266 --> 00:23:18.506 A:middle
我们检测含有  CarPlay

00:23:18.786 --> 00:23:19.896 A:middle
惯用语法的  UIScreen

00:23:21.086 --> 00:23:22.666 A:middle
如果没有含  CarPlay  惯用语法的屏幕存在

00:23:22.666 --> 00:23:24.476 A:middle
我们就取消

00:23:24.476 --> 00:23:26.016 A:middle
之前建立的任何  UIWindow

00:23:26.856 --> 00:23:27.816 A:middle
因为与  CarPlay  的连接

00:23:28.016 --> 00:23:28.646 A:middle
可能断开了

00:23:29.196 --> 00:23:32.566 A:middle
如果  CarPlay  屏幕是连接上的

00:23:33.306 --> 00:23:35.276 A:middle
则初始化一个新的  UIWindow

00:23:35.276 --> 00:23:37.586 A:middle
并建立一个自定义的

00:23:37.586 --> 00:23:39.616 A:middle
rootViewController

00:23:39.616 --> 00:23:40.656 A:middle
在其中包含要在  CarPlay  中

00:23:40.656 --> 00:23:41.106 A:middle
显示的内容

00:23:42.146 --> 00:23:43.716 A:middle
在这里我们使用

00:23:43.716 --> 00:23:45.536 A:middle
UI view controller  的一个子类

00:23:45.736 --> 00:23:46.626 A:middle
叫做  carViewController

00:23:47.676 --> 00:23:48.606 A:middle
这个类需要

00:23:48.606 --> 00:23:49.086 A:middle
被实现

00:23:49.586 --> 00:23:53.796 A:middle
你的  app  可以在连接  CarPlay

00:23:53.796 --> 00:23:54.576 A:middle
之后启动

00:23:55.446 --> 00:23:57.096 A:middle
为了处理这种情况

00:23:57.096 --> 00:23:58.986 A:middle
尽早的在你的 app 中

00:23:58.986 --> 00:24:00.856 A:middle
调用  updateCarWindow

00:23:58.986 --> 00:24:00.856 A:middle
调用  updateCarWindow

00:24:00.856 --> 00:24:02.186 A:middle
例如在完成

00:24:02.186 --> 00:24:03.016 A:middle
启动的选项里

00:24:04.376 --> 00:24:05.806 A:middle
因为  CarPlay  在你的 app 启动过后

00:24:05.806 --> 00:24:07.326 A:middle
也可以连接

00:24:07.746 --> 00:24:08.236 A:middle
检测

00:24:08.236 --> 00:24:10.086 A:middle
UIScreenDidConnect

00:24:10.086 --> 00:24:11.676 A:middle
和 UIScreenDidDisconnect

00:24:12.116 --> 00:24:14.056 A:middle
通知并调用

00:24:14.056 --> 00:24:15.846 A:middle
UpdateCarWindow

00:24:15.846 --> 00:24:17.086 A:middle
来处理这些事件

00:24:18.676 --> 00:24:19.996 A:middle
UIKit 在 CarPlay

00:24:19.996 --> 00:24:21.736 A:middle
屏幕中的表现

00:24:21.736 --> 00:24:23.776 A:middle
和在  iPhone  主屏幕中的表现

00:24:24.346 --> 00:24:25.486 A:middle
有些不同

00:24:25.686 --> 00:24:27.556 A:middle
UIButtonTypeSystem  以  CarPlay  默认的

00:24:27.556 --> 00:24:29.476 A:middle
显示风格来显示

00:24:29.476 --> 00:24:30.976 A:middle
也是推荐的创建按钮的方法

00:24:30.976 --> 00:24:32.946 A:middle
因为这样一来它的格式和表现

00:24:32.946 --> 00:24:34.856 A:middle
就会与其他

00:24:34.856 --> 00:24:36.866 A:middle
CarPlay app  保持一致

00:24:38.096 --> 00:24:38.726 A:middle
在 CarPlay 中

00:24:38.986 --> 00:24:41.116 A:middle
UITableViewController  可能会

00:24:41.116 --> 00:24:44.006 A:middle
限制表格的长度

00:24:44.006 --> 00:24:45.106 A:middle
对于有导航硬件的车来说

00:24:45.106 --> 00:24:47.186 A:middle
使用

00:24:48.096 --> 00:24:48.856 A:middle
UIFocusEnvironment

00:24:48.856 --> 00:24:50.476 A:middle
以及相关的焦点类

00:24:50.476 --> 00:24:52.546 A:middle
来处理相应的

00:24:52.546 --> 00:24:53.796 A:middle
焦点动作

00:24:54.416 --> 00:24:57.976 A:middle
注意  UIKit   提供的

00:24:57.976 --> 00:24:59.676 A:middle
所有的系统用户界面元素

00:24:59.676 --> 00:25:01.546 A:middle
并不是都可以用在汽车制造商的

00:24:59.676 --> 00:25:01.546 A:middle
并不是都可以用在汽车制造商的

00:25:02.536 --> 00:25:02.626 A:middle
app  中

00:25:05.086 --> 00:25:06.176 A:middle
有一些  SiriKit  的意图

00:25:06.176 --> 00:25:07.776 A:middle
是与汽车制造商的

00:25:07.776 --> 00:25:08.076 A:middle
app  相关的

00:25:09.396 --> 00:25:10.806 A:middle
这些意图指令

00:25:10.806 --> 00:25:11.856 A:middle
对所有  app  开放

00:25:12.346 --> 00:25:13.526 A:middle
它们并不需要连接  CarPlay

00:25:13.526 --> 00:25:15.336 A:middle
或者是参与到

00:25:15.336 --> 00:25:16.436 A:middle
一个  CarPlay  的  app  中

00:25:17.316 --> 00:25:18.956 A:middle
但是汽车生产商的  app

00:25:18.956 --> 00:25:19.916 A:middle
是利用这些意图的一个好地方

00:25:19.916 --> 00:25:22.016 A:middle
包括可以锁车

00:25:22.016 --> 00:25:23.496 A:middle
检查汽油使用情况

00:25:23.496 --> 00:25:26.436 A:middle
和按响喇叭

00:25:26.596 --> 00:25:27.826 A:middle
还有一系列的意图

00:25:28.086 --> 00:25:29.216 A:middle
需要连接  CarPlay

00:25:29.216 --> 00:25:30.766 A:middle
而且只能应用在

00:25:30.766 --> 00:25:32.246 A:middle
汽车生产商的  app  上

00:25:33.516 --> 00:25:35.176 A:middle
CarPlay  意图包括控制温度

00:25:35.176 --> 00:25:37.176 A:middle
除霜

00:25:37.176 --> 00:25:38.156 A:middle
控制座椅加热

00:25:39.136 --> 00:25:40.976 A:middle
还有控制收音机和

00:25:41.036 --> 00:25:42.756 A:middle
选择音频来源

00:25:42.786 --> 00:25:43.396 A:middle
的意图

00:25:44.026 --> 00:25:47.286 A:middle
汽车生产商  app  的设计

00:25:47.286 --> 00:25:48.176 A:middle
有一定的规范

00:25:49.176 --> 00:25:50.906 A:middle
首先 要让你的  app

00:25:50.906 --> 00:25:52.456 A:middle
在没有  CarPlay  的情况下

00:25:52.456 --> 00:25:52.916 A:middle
依然可以发挥作用

00:25:53.646 --> 00:25:55.256 A:middle
例如 当断开与  CarPlay  的连接的时候

00:25:55.256 --> 00:25:57.046 A:middle
汽车生产商的  app

00:25:57.046 --> 00:25:58.646 A:middle
可以通过连接因特网

00:25:58.646 --> 00:26:00.926 A:middle
来与汽车进行

00:25:58.646 --> 00:26:00.926 A:middle
来与汽车进行

00:26:02.206 --> 00:26:02.436 A:middle
信息交换

00:26:02.516 --> 00:26:04.026 A:middle
在设计汽车生产商  app  的时候

00:26:04.176 --> 00:26:06.456 A:middle
考虑兼容的

00:26:07.776 --> 00:26:07.876 A:middle
问题

00:26:07.876 --> 00:26:09.306 A:middle
app  的更新应该继续支持老款的车型

00:26:09.306 --> 00:26:11.396 A:middle
新的功能

00:26:11.396 --> 00:26:12.946 A:middle
不应该影响到

00:26:12.946 --> 00:26:16.916 A:middle
现有的  app  版本

00:26:17.006 --> 00:26:18.426 A:middle
简化用户界面

00:26:19.246 --> 00:26:21.146 A:middle
多数的  CarPlay  app 界面

00:26:21.146 --> 00:26:22.876 A:middle
应该只包括基本的互动元素

00:26:22.876 --> 00:26:25.396 A:middle
例如按钮

00:26:25.896 --> 00:26:28.746 A:middle
标签 表格 导航条

00:26:29.356 --> 00:26:30.676 A:middle
和页面标签

00:26:32.106 --> 00:26:33.696 A:middle
最后 如果你的汽车生产商 app

00:26:33.696 --> 00:26:34.786 A:middle
支持的车型上

00:26:34.786 --> 00:26:37.116 A:middle
有硬件的导航装置

00:26:37.116 --> 00:26:38.866 A:middle
要考虑

00:26:38.866 --> 00:26:40.686 A:middle
怎样将焦点在不同的

00:26:40.686 --> 00:26:40.976 A:middle
UI  元素中转移

00:26:44.506 --> 00:26:45.506 A:middle
我们希望你学到了

00:26:45.506 --> 00:26:47.036 A:middle
怎样将一个语音 信息

00:26:47.036 --> 00:26:49.006 A:middle
语音通话或汽车生产商的 app

00:26:49.006 --> 00:26:50.366 A:middle
结合到  CarPlay  中

00:26:51.006 --> 00:26:52.056 A:middle
关于  CarPlay  的

00:26:52.056 --> 00:26:53.126 A:middle
更多信息

00:26:53.126 --> 00:26:56.226 A:middle
请访问  developer.apple.com

00:26:56.436 --> 00:26:57.716 A:middle
你也可以

00:26:57.716 --> 00:26:58.776 A:middle
从相关的讲座中

00:26:59.456 --> 00:27:00.926 A:middle
了解更多内容

00:26:59.456 --> 00:27:00.926 A:middle
了解更多内容

00:27:00.926 --> 00:27:02.306 A:middle
“用  Xcode 9  调试程序”

00:27:02.306 --> 00:27:04.236 A:middle
可以告诉你关于

00:27:04.236 --> 00:27:05.376 A:middle
有线连接  CarPlay  调试程序的更多信息

00:27:06.266 --> 00:27:07.246 A:middle
关于 SiriKit 的更多信息

00:27:07.286 --> 00:27:09.946 A:middle
请参考“ SiriKit  最新更新”

00:27:09.946 --> 00:27:11.986 A:middle
以及 “创造最好的

00:27:11.986 --> 00:27:13.016 A:middle
SiriKit  体验”

00:27:14.266 --> 00:27:15.356 A:middle
关于  CarPlay  怎样通过无线工作

00:27:15.356 --> 00:27:16.906 A:middle
请观看“开发无线  CarPlay  系统”

00:27:16.906 --> 00:27:18.476 A:middle
的视频

00:27:19.596 --> 00:27:22.096 A:middle
WWDC 6 的视频

00:27:22.096 --> 00:27:24.026 A:middle
也包括 CallKit 和

00:27:24.026 --> 00:27:25.546 A:middle
CarPlay  系统开发的

00:27:26.296 --> 00:27:26.476 A:middle
话题
