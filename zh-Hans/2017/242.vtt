WEBVTT

00:00:07.516 --> 00:00:16.500 A:middle
[欢呼]

00:00:21.176 --> 00:00:23.500 A:middle
[掌声]

00:00:24.766 --> 00:00:25.426 A:middle
&gt;&gt; 好的 谢谢

00:00:25.956 --> 00:00:26.366 A:middle
谢谢

00:00:26.826 --> 00:00:27.696 A:middle
大家早上好

00:00:28.246 --> 00:00:29.096 A:middle
我叫 Kasia

00:00:29.286 --> 00:00:30.366 A:middle
我和我的同事

00:00:30.366 --> 00:00:31.246 A:middle
Shuchen 和 James 一起

00:00:31.556 --> 00:00:32.555 A:middle
为大家介绍在 App 中

00:00:32.555 --> 00:00:33.986 A:middle
呈现更好的输入法体验

00:00:33.986 --> 00:00:35.156 A:middle
的关键

00:00:35.246 --> 00:00:36.516 A:middle
那么 让我们来看看

00:00:36.516 --> 00:00:37.236 A:middle
我们今天要讲的内容

00:00:37.506 --> 00:00:39.246 A:middle
我们将从如何

00:00:39.436 --> 00:00:40.686 A:middle
将键盘整合到布局中

00:00:40.686 --> 00:00:41.186 A:middle
开始

00:00:41.596 --> 00:00:42.786 A:middle
然后我们会谈到

00:00:42.786 --> 00:00:44.266 A:middle
怎样创造一个更加动态

00:00:44.266 --> 00:00:45.556 A:middle
更加有趣的输入辅助

00:00:45.556 --> 00:00:45.856 A:middle
视图

00:00:46.446 --> 00:00:47.876 A:middle
我们还将讨论如何让你的 App

00:00:48.316 --> 00:00:49.816 A:middle
接触到多语言的用户群体

00:00:50.586 --> 00:00:52.056 A:middle
利用 Trait 让你的

00:00:52.056 --> 00:00:54.796 A:middle
App 的 QuickType 更智能

00:00:54.796 --> 00:00:56.026 A:middle
硬件键盘支持

00:00:56.666 --> 00:00:58.166 A:middle
创建自定义输入界面

00:00:58.686 --> 00:01:00.076 A:middle
最后 我们将给出关于

00:00:58.686 --> 00:01:00.076 A:middle
最后 我们将给出关于

00:01:00.076 --> 00:01:01.146 A:middle
键盘扩展的一些建议

00:01:01.146 --> 00:01:01.736 A:middle
和好的做法

00:01:02.346 --> 00:01:03.526 A:middle
下面我先开始谈谈

00:01:03.526 --> 00:01:04.666 A:middle
如何将键盘整合到

00:01:04.666 --> 00:01:04.965 A:middle
你的 App 的布局中

00:01:05.846 --> 00:01:06.816 A:middle
为此 我要展示一个

00:01:06.816 --> 00:01:08.286 A:middle
我们专门为这个讨论

00:01:08.286 --> 00:01:10.296 A:middle
所做的 App 的截图

00:01:10.296 --> 00:01:11.496 A:middle
这个 App 叫 CatChat

00:01:11.496 --> 00:01:12.496 A:middle
可以用它来跟你的宠物交流

00:01:13.416 --> 00:01:14.926 A:middle
不只是猫 但是对我来说

00:01:15.046 --> 00:01:16.446 A:middle
只有猫

00:01:16.446 --> 00:01:18.436 A:middle
我们也提供这个 App 的代码

00:01:18.436 --> 00:01:19.616 A:middle
作为一个例子

00:01:19.616 --> 00:01:20.146 A:middle
大家可以从我们的网站获取

00:01:20.476 --> 00:01:21.726 A:middle
但不包括猫的图片

00:01:22.696 --> 00:01:25.026 A:middle
好，那我们就从这里开始

00:01:25.026 --> 00:01:25.636 A:middle
你在后面的讨论中还会

00:01:25.636 --> 00:01:26.246 A:middle
看到很多次这个App

00:01:26.246 --> 00:01:27.786 A:middle
我们就从

00:01:27.786 --> 00:01:29.346 A:middle
应对键盘高度的变化开始

00:01:30.976 --> 00:01:32.706 A:middle
键盘有不同的尺寸

00:01:34.216 --> 00:01:35.976 A:middle
取决于用户

00:01:35.976 --> 00:01:37.326 A:middle
正在使用的语言

00:01:37.326 --> 00:01:38.446 A:middle
和他们启用的设置

00:01:39.026 --> 00:01:40.076 A:middle
你因此可能会在你使用的 App 中

00:01:40.606 --> 00:01:41.916 A:middle
看到不同高度的

00:01:41.916 --> 00:01:42.296 A:middle
键盘

00:01:42.816 --> 00:01:44.626 A:middle
英语键盘

00:01:44.626 --> 00:01:46.716 A:middle
因为有预测栏 是这样一个高度

00:01:47.266 --> 00:01:48.876 A:middle
然而波兰语键盘

00:01:48.876 --> 00:01:51.246 A:middle
就比较短，而中文的 10 键

00:01:51.246 --> 00:01:53.126 A:middle
拼音键盘 就比以上两者

00:01:53.126 --> 00:01:53.726 A:middle
都要高一些

00:01:54.716 --> 00:01:56.066 A:middle
并且有一些第三方的

00:01:56.066 --> 00:01:57.356 A:middle
键盘 很多可能你们也

00:01:57.356 --> 00:01:58.946 A:middle
写过 那些键盘就没有

00:01:58.946 --> 00:02:00.246 A:middle
一个特定的高度要求

00:01:58.946 --> 00:02:00.246 A:middle
一个特定的高度要求

00:02:01.496 --> 00:02:03.066 A:middle
所以你永远无法确保

00:02:03.066 --> 00:02:04.526 A:middle
你的用户在你的 App 中使用

00:02:04.526 --> 00:02:05.876 A:middle
一个特定的键盘高度
00:02:05.876 --> 00:02:06.846 A:middle

00:02:07.136 --> 00:02:08.216 A:middle
那么 你要怎样应对呢

00:02:09.256 --> 00:02:09.916 A:middle
我们有一系列的

00:02:09.916 --> 00:02:10.686 A:middle
通知功能

00:02:11.586 --> 00:02:13.436 A:middle
我们会通知你键盘出现

00:02:13.436 --> 00:02:15.776 A:middle
键盘隐藏和

00:02:15.776 --> 00:02:16.596 A:middle
框架改变

00:02:17.136 --> 00:02:17.756 A:middle
在每一个通知中

00:02:17.756 --> 00:02:18.896 A:middle
我们会告诉你

00:02:18.896 --> 00:02:20.206 A:middle
你将获取的键盘的

00:02:20.656 --> 00:02:21.916 A:middle
最开始与最终的框架

00:02:22.876 --> 00:02:24.756 A:middle
在我们进入如何使用

00:02:24.756 --> 00:02:25.546 A:middle
我们给你们的框架之前

00:02:25.546 --> 00:02:26.846 A:middle
我们不妨先来

00:02:26.846 --> 00:02:28.386 A:middle
看一个特殊例子

00:02:28.386 --> 00:02:29.676 A:middle
就是脱离式键盘

00:02:30.306 --> 00:02:33.106 A:middle
在 iPad 中 用户实际上可以

00:02:33.586 --> 00:02:34.786 A:middle
从屏幕底部

00:02:34.786 --> 00:02:36.216 A:middle
把键盘拉起来

00:02:36.216 --> 00:02:37.586 A:middle
并且来回移动

00:02:37.586 --> 00:02:37.946 A:middle
同时把键盘拆分

00:02:38.996 --> 00:02:41.126 A:middle
在这种情况下 你一般

00:02:41.126 --> 00:02:42.736 A:middle
不会想要你的 App 总是尝试

00:02:42.736 --> 00:02:43.986 A:middle
呆在键盘的上方

00:02:43.986 --> 00:02:44.736 A:middle
因为用户可能会把键盘

00:02:44.736 --> 00:02:45.476 A:middle
挪到屏幕的最上方

00:02:45.526 --> 00:02:46.766 A:middle
那样你的全部

00:02:46.766 --> 00:02:47.846 A:middle
内容都会消失

00:02:47.846 --> 00:02:48.146 A:middle
这可一点也不好玩

00:02:48.706 --> 00:02:50.266 A:middle
因此 当键盘从屏幕底部脱离

00:02:50.266 --> 00:02:51.596 A:middle
我们会发送给你一个

00:02:51.596 --> 00:02:53.316 A:middle
“隐藏”通知 就像我们之前

00:02:53.316 --> 00:02:54.816 A:middle
在键盘被关闭时

00:02:54.816 --> 00:02:55.396 A:middle
发送的一样

00:02:56.236 --> 00:02:58.066 A:middle
大多数情况下 你们就要

00:02:58.066 --> 00:02:58.986 A:middle
这样处理 就像

00:02:58.986 --> 00:03:00.086 A:middle
键盘被关闭时一样

00:02:58.986 --> 00:03:00.086 A:middle
键盘被关闭时一样

00:03:00.906 --> 00:03:01.956 A:middle
如果你想做的很漂亮

00:03:01.956 --> 00:03:03.436 A:middle
我们会继续发送

00:03:03.436 --> 00:03:05.016 A:middle
给你框架改变的通知

00:03:05.776 --> 00:03:07.736 A:middle
不过对于大部分人而言

00:03:07.736 --> 00:03:09.286 A:middle
你要做的是追踪

00:03:09.286 --> 00:03:10.756 A:middle
最近的一次隐藏或显示

00:03:11.576 --> 00:03:13.036 A:middle
然后相应的处理键盘问题

00:03:13.036 --> 00:03:14.896 A:middle
之后再处理任何

00:03:14.896 --> 00:03:15.636 A:middle
框架改变

00:03:16.896 --> 00:03:18.206 A:middle
所以 脱离式键盘是一种

00:03:18.206 --> 00:03:19.066 A:middle
这样的东西

00:03:19.066 --> 00:03:20.176 A:middle
我们看到这个滚动界面

00:03:20.886 --> 00:03:22.306 A:middle
然后当用户把键盘拉上去以后

00:03:22.486 --> 00:03:23.606 A:middle
这个滚动界面会补上下面的空白

00:03:23.726 --> 00:03:25.296 A:middle
当键盘脱离时 这个滚动界面

00:03:25.296 --> 00:03:26.226 A:middle
会再次占满屏幕

00:03:26.806 --> 00:03:27.856 A:middle
当用户重新把键盘放回底部时

00:03:27.856 --> 00:03:29.726 A:middle
这个界面会恢复原状

00:03:29.726 --> 00:03:30.626 A:middle
这样你就能看到整个

00:03:30.626 --> 00:03:32.376 A:middle
你与你的猫的愉快

00:03:32.376 --> 00:03:33.856 A:middle
的聊天记录

00:03:33.856 --> 00:03:34.256 A:middle
这可是件重要的事

00:03:35.166 --> 00:03:37.426 A:middle
这就大概是我要说

00:03:37.426 --> 00:03:37.846 A:middle
的特殊例子

00:03:38.586 --> 00:03:40.086 A:middle
那么 我们继续讨论

00:03:40.116 --> 00:03:41.256 A:middle
如何使用我们给你的

00:03:41.256 --> 00:03:42.456 A:middle
框架通知

00:03:43.666 --> 00:03:44.306 A:middle
首先

00:03:44.306 --> 00:03:45.616 A:middle
键盘一直是

00:03:45.616 --> 00:03:45.976 A:middle
全屏的

00:03:46.226 --> 00:03:47.626 A:middle
它一直是在全屏的

00:03:47.626 --> 00:03:48.486 A:middle
坐标空间的

00:03:49.186 --> 00:03:51.146 A:middle
因此 你要做的第一件事

00:03:51.146 --> 00:03:52.306 A:middle
当你从我们的通知中

00:03:52.306 --> 00:03:53.856 A:middle
得到一个键盘框架时

00:03:53.856 --> 00:03:55.096 A:middle
是把它从全屏坐标

00:03:55.096 --> 00:03:56.196 A:middle
转换到你的

00:03:56.196 --> 00:03:57.656 A:middle
本地坐标 然后你才能

00:03:57.656 --> 00:03:58.576 A:middle
开始处理其他

00:03:59.536 --> 00:03:59.636 A:middle
事情

00:03:59.756 --> 00:04:01.636 A:middle
由于键盘可以是全屏的

00:03:59.756 --> 00:04:01.636 A:middle
由于键盘可以是全屏的

00:04:01.636 --> 00:04:03.476 A:middle
而你的 App 可能不是

00:04:03.476 --> 00:04:04.686 A:middle
因为你知道

00:04:04.686 --> 00:04:05.516 A:middle
在很多有趣的

00:04:05.516 --> 00:04:06.626 A:middle
情况下 键盘会

00:04:06.626 --> 00:04:07.186 A:middle
上上下下地乱跑

00:04:07.506 --> 00:04:08.416 A:middle
你一定要确保

00:04:08.416 --> 00:04:09.236 A:middle
先做这件事

00:04:09.236 --> 00:04:11.126 A:middle
你不能依赖于

00:04:11.126 --> 00:04:12.836 A:middle
你所得到的框架恰好

00:04:12.836 --> 00:04:13.476 A:middle
符合你的 App 的本地框架

00:04:13.846 --> 00:04:15.076 A:middle
举个例子 想想多线程工作

00:04:16.736 --> 00:04:17.935 A:middle
然后 如果你确实使用

00:04:17.935 --> 00:04:19.086 A:middle
我们给你的框架

00:04:19.086 --> 00:04:19.836 A:middle
当你转换了它之后

00:04:19.836 --> 00:04:21.406 A:middle
以及你的

00:04:21.406 --> 00:04:24.056 A:middle
想用的界面 你就可以

00:04:24.056 --> 00:04:25.106 A:middle
得到这两者之间的

00:04:25.106 --> 00:04:26.386 A:middle
高度的区别 或者是

00:04:26.386 --> 00:04:27.806 A:middle
当键盘与你的界面重合时

00:04:27.806 --> 00:04:29.746 A:middle
它的高度 并且使用它

00:04:29.746 --> 00:04:31.586 A:middle
来使你的界面适应键盘

00:04:32.456 --> 00:04:33.446 A:middle
那么 我们来看几种

00:04:33.446 --> 00:04:34.646 A:middle
不同的界面布局

00:04:35.276 --> 00:04:36.576 A:middle
我们从不会滚动的

00:04:36.576 --> 00:04:37.206 A:middle
界面开始

00:04:38.126 --> 00:04:40.496 A:middle
静止的界面一般是

00:04:40.496 --> 00:04:41.726 A:middle
一些文字视图 或者是

00:04:41.726 --> 00:04:43.536 A:middle
一个按钮 用户不用

00:04:43.536 --> 00:04:45.206 A:middle
去移来移去就能

00:04:45.206 --> 00:04:46.866 A:middle
看到你的界面的

00:04:46.866 --> 00:04:47.136 A:middle
全部内容

00:04:47.636 --> 00:04:48.616 A:middle
但你依然会希望它

00:04:48.616 --> 00:04:49.956 A:middle
在任何键盘的情况下都看起来整洁

00:04:50.836 --> 00:04:52.226 A:middle
这种情况下 举个例子

00:04:52.446 --> 00:04:54.716 A:middle
我们有五个文本框

00:04:54.716 --> 00:04:56.046 A:middle
它们由 UI Layout Guides

00:04:56.046 --> 00:04:57.576 A:middle
绑定在一起作为空格存在

00:04:58.236 --> 00:04:59.246 A:middle
在界面的顶部

00:04:59.246 --> 00:05:01.116 A:middle
使用了安全区域边界插入

00:04:59.246 --> 00:05:01.116 A:middle
使用了安全区域边界插入

00:05:01.596 --> 00:05:03.206 A:middle
而在底部

00:05:03.206 --> 00:05:04.776 A:middle
我们等一下会谈到

00:05:05.056 --> 00:05:06.446 A:middle
这些空格会

00:05:06.476 --> 00:05:08.156 A:middle
因为不同键盘而改变大小

00:05:08.156 --> 00:05:10.446 A:middle
所以用户可以一直看到

00:05:10.446 --> 00:05:11.816 A:middle
全部的五个

00:05:12.146 --> 00:05:12.706 A:middle
文本框

00:05:13.876 --> 00:05:15.286 A:middle
那么 我们是怎么做到的呢

00:05:15.676 --> 00:05:17.046 A:middle
我们创建了一个自定义的

00:05:17.046 --> 00:05:18.676 A:middle
有高度限制的 UILayoutGuide

00:05:18.676 --> 00:05:20.446 A:middle
保存下来

00:05:20.446 --> 00:05:21.546 A:middle
方便我们以后调整

00:05:22.036 --> 00:05:25.676 A:middle
这个 Layout Guide 与

00:05:25.676 --> 00:05:27.576 A:middle
你的页面底部的

00:05:27.576 --> 00:05:28.446 A:middle
安全区域 Layout Guide 绑定

00:05:29.166 --> 00:05:31.026 A:middle
然后当键盘出现的时候

00:05:31.176 --> 00:05:32.556 A:middle
这个 Layout Guide 的顶部应该和

00:05:32.556 --> 00:05:34.316 A:middle
你希望出现在键盘上方

00:05:34.316 --> 00:05:35.636 A:middle
的空格或界面的底部

00:05:37.256 --> 00:05:37.696 A:middle
绑定

00:05:38.926 --> 00:05:40.176 A:middle
当你完成了这些

00:05:40.176 --> 00:05:41.746 A:middle
你就可以在

00:05:41.746 --> 00:05:42.656 A:middle
确定键盘可见之后完成高度转换

00:05:42.656 --> 00:05:44.626 A:middle
简单地将

00:05:44.626 --> 00:05:46.036 A:middle
你所保存的高度限制

00:05:46.366 --> 00:05:47.406 A:middle
设定到键盘高度上

00:05:48.266 --> 00:05:49.426 A:middle
如果把它放入

00:05:49.426 --> 00:05:51.256 A:middle
视图动画块 如果需要

00:05:51.256 --> 00:05:52.266 A:middle
可以加上一个调用界面

00:05:52.266 --> 00:05:53.626 A:middle
你就能在刚才看到的

00:05:53.626 --> 00:05:55.226 A:middle
不同的键盘之间 获得一个酷炫的

00:05:55.226 --> 00:05:55.746 A:middle
小动画

00:05:56.706 --> 00:05:58.516 A:middle
然而 更常见的是

00:05:58.606 --> 00:05:59.626 A:middle
滚动界面

00:06:00.356 --> 00:06:01.666 A:middle
你的布局嵌入在滚动

00:06:01.666 --> 00:06:02.956 A:middle
界面中 使得用户可以

00:06:02.956 --> 00:06:04.556 A:middle
在不同界面中移动

00:06:04.556 --> 00:06:05.336 A:middle
来看到他们想看

00:06:05.336 --> 00:06:05.646 A:middle
的内容

00:06:06.536 --> 00:06:07.446 A:middle
在我们的这个例子中 在我们的

00:06:07.526 --> 00:06:08.746 A:middle
Cat Chat App 里 我们用到了

00:06:08.746 --> 00:06:09.616 A:middle
这个会话视图控制器

00:06:10.206 --> 00:06:11.076 A:middle
我们希望确保

00:06:11.076 --> 00:06:11.936 A:middle
你能够在任何时候都可以滚动查看

00:06:11.936 --> 00:06:13.746 A:middle
整个对话

00:06:14.536 --> 00:06:16.156 A:middle
所以 我们就要保证

00:06:16.156 --> 00:06:18.086 A:middle
调整表格视图底部

00:06:18.086 --> 00:06:21.056 A:middle
使你能够看到整个的

00:06:21.056 --> 00:06:22.296 A:middle
对话内容

00:06:23.246 --> 00:06:24.226 A:middle
那么 要怎么做到呢

00:06:24.906 --> 00:06:26.276 A:middle
与刚才方法非常相似

00:06:26.276 --> 00:06:27.316 A:middle
但是不那么复杂

00:06:27.616 --> 00:06:28.326 A:middle
你只需要保证

00:06:28.326 --> 00:06:30.356 A:middle
键盘可见 然后

00:06:30.356 --> 00:06:31.666 A:middle
调整框架 得到你的合适的

00:06:31.666 --> 00:06:33.646 A:middle
高度 之后把内容

00:06:33.646 --> 00:06:34.976 A:middle
正确地插入滚动界面就可以了

00:06:35.206 --> 00:06:36.666 A:middle
这就是交叉部分的

00:06:36.666 --> 00:06:38.096 A:middle
有用之处 因为如果你的

00:06:38.096 --> 00:06:39.356 A:middle
滚动界面不会

00:06:39.356 --> 00:06:40.976 A:middle
占满整个屏幕

00:06:40.976 --> 00:06:42.256 A:middle
你只需要补上

00:06:42.256 --> 00:06:43.266 A:middle
键盘覆盖住的

00:06:43.266 --> 00:06:43.716 A:middle
那部分

00:06:44.766 --> 00:06:46.436 A:middle
最后 在你调整了

00:06:46.536 --> 00:06:48.246 A:middle
滚动插页之后

00:06:48.246 --> 00:06:49.296 A:middle
你依然需要处理

00:06:49.296 --> 00:06:49.716 A:middle
内容的滚动

00:06:50.766 --> 00:06:52.076 A:middle
在刚才的例子中 我们

00:06:52.076 --> 00:06:53.646 A:middle
实际上使用了一个 UITableViewController

00:06:53.646 --> 00:06:55.806 A:middle
它使整个过程更加容易

00:06:56.436 --> 00:06:58.026 A:middle
因为它实际上帮你设置了插入内容

00:06:58.026 --> 00:06:59.886 A:middle
而你所要做的就是

00:06:59.886 --> 00:07:01.426 A:middle
滚动内容 这样就

00:06:59.886 --> 00:07:01.426 A:middle
滚动内容 这样就

00:07:01.426 --> 00:07:01.766 A:middle
很方便了

00:07:01.766 --> 00:07:03.076 A:middle
在这个例子中 我们有一个表格视图

00:07:03.076 --> 00:07:05.256 A:middle
而我们希望最新的

00:07:05.256 --> 00:07:06.346 A:middle
部分恰好出现在

00:07:06.346 --> 00:07:06.866 A:middle
键盘上方

00:07:07.236 --> 00:07:08.416 A:middle
因此 我们把最下面的单元

00:07:08.796 --> 00:07:10.426 A:middle
滚动到我们插入的

00:07:10.426 --> 00:07:10.636 A:middle
界面的底部

00:07:11.576 --> 00:07:13.396 A:middle
这样就可以做出相应的调整

00:07:13.396 --> 00:07:14.326 A:middle
来适应界面中的键盘

00:07:14.806 --> 00:07:16.056 A:middle
现在 我们要讨论一下如何

00:07:16.056 --> 00:07:17.486 A:middle
用一个输入辅助视图

00:07:17.486 --> 00:07:18.196 A:middle
扩展键盘

00:07:19.016 --> 00:07:21.216 A:middle
输入辅助视图是一个

00:07:21.216 --> 00:07:22.386 A:middle
在键盘上方的视图

00:07:22.446 --> 00:07:24.086 A:middle
这个例子中 它是一个文本视图

00:07:24.086 --> 00:07:24.436 A:middle
和一个按钮

00:07:25.126 --> 00:07:26.356 A:middle
它也可以是一个工具栏

00:07:26.356 --> 00:07:27.356 A:middle
包括一些导航按钮

00:07:27.486 --> 00:07:28.976 A:middle
它也可以是一排按钮

00:07:29.116 --> 00:07:31.046 A:middle
它也可以是一些有趣的

00:07:31.286 --> 00:07:32.346 A:middle
小照片什么的

00:07:32.346 --> 00:07:33.526 A:middle
你可以把任何你想放的东西放上去

00:07:33.526 --> 00:07:35.056 A:middle
因为它只是一个视图而已

00:07:36.346 --> 00:07:37.576 A:middle
那么如何把它加到

00:07:37.576 --> 00:07:38.066 A:middle
键盘上呢

00:07:38.276 --> 00:07:39.506 A:middle
在我们的

00:07:39.506 --> 00:07:41.296 A:middle
对话视图控制器中

00:07:41.346 --> 00:07:42.846 A:middle
有一个输入辅助视图

00:07:43.646 --> 00:07:45.306 A:middle
想要在键盘上

00:07:45.306 --> 00:07:46.726 A:middle
显示输入辅助

00:07:46.726 --> 00:07:47.576 A:middle
视图的主视图

00:07:47.576 --> 00:07:48.396 A:middle
控制器

00:07:49.226 --> 00:07:50.146 A:middle
然后 我们通过在

00:07:50.146 --> 00:07:51.836 A:middle
我们的对话视图控制器中

00:07:51.836 --> 00:07:53.116 A:middle
让 canBecomeFirstResponder

00:07:53.116 --> 00:07:54.896 A:middle
返回真 以使它成为响应链

00:07:54.896 --> 00:07:55.526 A:middle
的一部分

00:07:56.446 --> 00:07:58.566 A:middle
然后 使用一个自定义视图

00:07:58.566 --> 00:08:00.116 A:middle
或一个自定义视图控制器

00:07:58.566 --> 00:08:00.116 A:middle
或一个自定义视图控制器

00:08:00.116 --> 00:08:01.376 A:middle
取决于你想对这个视图做

00:08:01.376 --> 00:08:03.276 A:middle
什么操作

00:08:03.276 --> 00:08:04.506 A:middle
你覆盖掉相应的部分

00:08:04.506 --> 00:08:06.006 A:middle
如果你使用视图

00:08:06.006 --> 00:08:06.676 A:middle
就覆盖 inputAccessoryView

00:08:07.106 --> 00:08:08.536 A:middle
如果你使用视图控制器

00:08:08.686 --> 00:08:09.226 A:middle
就覆盖

00:08:09.226 --> 00:08:09.666 A:middle
inputAccessoryViewController

00:08:10.346 --> 00:08:12.926 A:middle
这样你所添加的输入辅助视图

00:08:12.926 --> 00:08:15.416 A:middle
会被列入

00:08:15.416 --> 00:08:16.886 A:middle
框架更改通知的考虑范围

00:08:17.306 --> 00:08:18.886 A:middle
如果这个输入辅助视图的高度

00:08:18.886 --> 00:08:20.846 A:middle
有所改变 你就会收到

00:08:20.846 --> 00:08:22.086 A:middle
一个框架

00:08:22.086 --> 00:08:23.056 A:middle
更改通知

00:08:23.416 --> 00:08:24.716 A:middle
这样 你就可以在

00:08:24.716 --> 00:08:27.566 A:middle
这个键盘所在的 App 中处理它

00:08:27.956 --> 00:08:29.026 A:middle
我们下面来聊一聊关于如何创造一个

00:08:29.026 --> 00:08:30.586 A:middle
动态的高度可变的

00:08:30.586 --> 00:08:31.716 A:middle
输入辅助视图 因为这是

00:08:31.716 --> 00:08:32.566 A:middle
很多人都想知道如何

00:08:32.566 --> 00:08:33.905 A:middle
去做的一件事

00:08:34.446 --> 00:08:35.996 A:middle
当你这样做的时候

00:08:35.996 --> 00:08:37.275 A:middle
这就会像一个可以自己调节大小的

00:08:37.275 --> 00:08:38.546 A:middle
表格视图 在其中你可以

00:08:38.546 --> 00:08:39.635 A:middle
应付任何种类的

00:08:39.635 --> 00:08:41.456 A:middle
可能变换大小的视图 并用它来

00:08:41.456 --> 00:08:43.186 A:middle
定义视图的高度

00:08:43.236 --> 00:08:44.526 A:middle
你可以将这种方法用于

00:08:44.526 --> 00:08:45.706 A:middle
多种视图 但在这个例子中

00:08:45.706 --> 00:08:48.856 A:middle
我们将用一个 UI 文本界面来展示

00:08:48.856 --> 00:08:50.186 A:middle
要怎么做

00:08:50.646 --> 00:08:52.226 A:middle
如果可以的话

00:08:52.226 --> 00:08:54.246 A:middle
你可以把它固定在

00:08:55.316 --> 00:08:57.226 A:middle
内容界面的顶部或者底部

00:08:57.226 --> 00:08:57.736 A:middle
并且留出一些空间

00:08:58.296 --> 00:08:59.116 A:middle
如果中间还有其他界面的话

00:08:59.116 --> 00:09:00.446 A:middle
只要高度被定义好了

00:08:59.116 --> 00:09:00.446 A:middle
只要高度被定义好了

00:09:00.446 --> 00:09:01.596 A:middle
其实没有太大问题

00:09:01.596 --> 00:09:02.616 A:middle
它与可以自动调整大小的

00:09:02.616 --> 00:09:04.036 A:middle
表格视图单元很相似

00:09:04.666 --> 00:09:07.716 A:middle
此时 你需要使用

00:09:07.716 --> 00:09:09.216 A:middle
或是定义你的成长视图的

00:09:09.216 --> 00:09:10.826 A:middle
intrinsicContentSize 这样

00:09:10.916 --> 00:09:12.296 A:middle
你的输入辅助视图才会知道

00:09:12.296 --> 00:09:14.776 A:middle
它需要什么高度

00:09:14.996 --> 00:09:16.486 A:middle
在文本视图中

00:09:16.876 --> 00:09:18.016 A:middle
为了使它有自己的

00:09:18.016 --> 00:09:19.466 A:middle
intrinsicContentSize 而使得

00:09:19.466 --> 00:09:21.366 A:middle
你不用再去定义

00:09:21.366 --> 00:09:22.696 A:middle
你就需要告诉它的文本容器

00:09:22.696 --> 00:09:23.976 A:middle
让它的高度跟着

00:09:23.976 --> 00:09:24.546 A:middle
文本视图而变化

00:09:25.316 --> 00:09:26.976 A:middle
同时你还需要禁用

00:09:26.976 --> 00:09:27.586 A:middle
滚动

00:09:28.146 --> 00:09:29.646 A:middle
这样 文本视图就会依据

00:09:29.646 --> 00:09:30.516 A:middle
视图中文本的多少而

00:09:30.516 --> 00:09:32.966 A:middle
定义它自己的内在的

00:09:32.966 --> 00:09:34.486 A:middle
intrinsicContentSize

00:09:34.486 --> 00:09:36.266 A:middle
你就会得到像这样

00:09:37.556 --> 00:09:37.796 A:middle
的情况

00:09:37.796 --> 00:09:39.546 A:middle
所以 这是你

00:09:39.546 --> 00:09:40.616 A:middle
可能实际上需要

00:09:40.616 --> 00:09:42.396 A:middle
在输入辅助界面覆盖

00:09:42.396 --> 00:09:43.686 A:middle
intrinsicContentSize 的几种情形之一

00:09:44.406 --> 00:09:45.826 A:middle
为了完成这样的效果

00:09:45.826 --> 00:09:47.056 A:middle
你恐怕不想

00:09:47.056 --> 00:09:48.026 A:middle
把它弄的太过复杂

00:09:48.026 --> 00:09:50.036 A:middle
其实它并没有那么难

00:09:50.036 --> 00:09:51.636 A:middle
当键盘可见时 抓取它的边界值

00:09:51.636 --> 00:09:52.556 A:middle
这将是你的原始

00:09:52.556 --> 00:09:53.526 A:middle
边界 然后我们会确保

00:09:53.526 --> 00:09:54.526 A:middle
你的宽度值是正确的

00:09:55.156 --> 00:09:56.086 A:middle
而这个宽度值已经

00:09:56.086 --> 00:09:56.626 A:middle
由系统给出了

00:09:57.466 --> 00:09:58.886 A:middle
对我来说 我一般习惯

00:09:58.886 --> 00:10:00.086 A:middle
确保视图有一个

00:09:58.886 --> 00:10:00.086 A:middle
确保视图有一个

00:10:00.086 --> 00:10:02.276 A:middle
最小高度 所以我先把它设置为

00:10:02.276 --> 00:10:03.376 A:middle
一个最小高度值

00:10:03.376 --> 00:10:05.126 A:middle
以防万一 一切其他

00:10:05.126 --> 00:10:06.686 A:middle
可能出现的情况都是“万一”

00:10:07.236 --> 00:10:09.676 A:middle
然后 如果我的扩展视图的

00:10:09.676 --> 00:10:11.096 A:middle
高度是正确的 我就用

00:10:11.096 --> 00:10:12.496 A:middle
这个高度加上

00:10:12.496 --> 00:10:14.126 A:middle
我之前定义的 kVerticalPadding

00:10:14.126 --> 00:10:15.126 A:middle
来定义视图的

00:10:15.126 --> 00:10:15.416 A:middle
新高度

00:10:16.216 --> 00:10:17.496 A:middle
我同时会有一个最大高度

00:10:17.496 --> 00:10:18.606 A:middle
因为我每次

00:10:18.606 --> 00:10:19.886 A:middle
实际上给我的猫说的话

00:10:19.886 --> 00:10:20.376 A:middle
就那么多

00:10:20.886 --> 00:10:22.066 A:middle
猫不会有很长的集中注意力

00:10:22.066 --> 00:10:22.526 A:middle
的时间

00:10:23.206 --> 00:10:26.126 A:middle
所以 在某个时刻 我会停止

00:10:26.126 --> 00:10:27.556 A:middle
在那个时候 你只需要返回

00:10:27.866 --> 00:10:29.346 A:middle
你的新的 intrinsicContentSize

00:10:29.576 --> 00:10:31.136 A:middle
而你的输入辅助视图

00:10:31.136 --> 00:10:31.576 A:middle
将会随之变化

00:10:33.086 --> 00:10:35.646 A:middle
好的 那么我们已经讨论过了

00:10:35.646 --> 00:10:36.786 A:middle
如何将键盘整合到

00:10:36.786 --> 00:10:38.326 A:middle
你的布局中 以及如何添加

00:10:38.326 --> 00:10:39.836 A:middle
一个动态的输入辅助视图

00:10:40.576 --> 00:10:41.976 A:middle
现在 我们有了一个我可以用来

00:10:41.976 --> 00:10:44.076 A:middle
跟我的猫聊天的 App  并且我可以

00:10:44.076 --> 00:10:45.226 A:middle
一次说好几句话

00:10:45.226 --> 00:10:46.216 A:middle
这很棒

00:10:46.866 --> 00:10:47.996 A:middle
我的猫不需要很多很多词

00:10:47.996 --> 00:10:50.216 A:middle
它对我的要求也

00:10:50.216 --> 00:10:50.836 A:middle
非常明确

00:10:51.436 --> 00:10:52.756 A:middle
但是有很多很酷的事情

00:10:52.756 --> 00:10:54.546 A:middle
可以让我们把这个 App

00:10:54.546 --> 00:10:56.216 A:middle
变得更有趣

00:10:56.736 --> 00:10:57.696 A:middle
现在让我把话筒

00:10:57.696 --> 00:10:58.666 A:middle
给 Shuchen 她将会

00:10:58.666 --> 00:10:59.846 A:middle
告诉你们如何

00:10:59.846 --> 00:11:00.976 A:middle
使你们的 App 变的更赞

00:10:59.846 --> 00:11:00.976 A:middle
使你们的 App 变的更赞

00:11:01.516 --> 00:11:09.676 A:middle
[掌声]

00:11:10.176 --> 00:11:12.276 A:middle
&gt;&gt; 大家好

00:11:12.276 --> 00:11:14.676 A:middle
在 iOS 中 我们提供了很多

00:11:14.756 --> 00:11:17.146 A:middle
有趣的产品让你可以

00:11:17.146 --> 00:11:18.776 A:middle
提升用户的文本

00:11:18.776 --> 00:11:19.356 A:middle
输入体验

00:11:19.926 --> 00:11:20.916 A:middle
我叫 Shuchen Li

00:11:21.536 --> 00:11:23.256 A:middle
我将谈到它们其中的一些

00:11:23.726 --> 00:11:26.056 A:middle
我希望在这之后你们可以

00:11:26.326 --> 00:11:28.526 A:middle
运用它们 为你的 App 带来

00:11:28.526 --> 00:11:29.666 A:middle
更赞的使用体验

00:11:30.226 --> 00:11:31.766 A:middle
那我们就开始吧

00:11:33.496 --> 00:11:35.106 A:middle
首先 请允许我问

00:11:35.106 --> 00:11:35.576 A:middle
一个问题

00:11:35.636 --> 00:11:37.766 A:middle
在座的有谁会说

00:11:37.766 --> 00:11:37.956 A:middle
多种语言

00:11:38.566 --> 00:11:39.356 A:middle
哦 我看到有一些

00:11:40.246 --> 00:11:43.666 A:middle
我也是 你们是否遇到过

00:11:43.666 --> 00:11:45.816 A:middle
这样的情形 就是需要

00:11:45.816 --> 00:11:46.536 A:middle
一直切换键盘

00:11:48.136 --> 00:11:49.276 A:middle
我看到这边有一个

00:11:49.276 --> 00:11:50.786 A:middle
这边也有几个人

00:11:51.656 --> 00:11:53.696 A:middle
很好 我也很头疼这个问题

00:11:53.696 --> 00:11:56.446 A:middle
我跟我的上司交谈需要用

00:11:56.566 --> 00:11:57.236 A:middle
一种键盘

00:11:57.666 --> 00:11:58.846 A:middle
我跟我妈妈交流需要用

00:11:58.846 --> 00:11:59.256 A:middle
另外一种键盘

00:11:59.336 --> 00:12:00.776 A:middle
我不得不一直在

00:11:59.336 --> 00:12:00.776 A:middle
我不得不一直在

00:12:00.776 --> 00:12:00.996 A:middle
两者之间切换

00:12:01.636 --> 00:12:04.226 A:middle
如果你的 App 知道你应该用

00:12:04.226 --> 00:12:04.996 A:middle
哪个键盘会怎么样呢

00:12:05.706 --> 00:12:07.176 A:middle
如果当你的键盘出现时

00:12:07.356 --> 00:12:08.706 A:middle
它就是你想要的

00:12:09.236 --> 00:12:09.306 A:middle
那个键盘呢

00:12:10.036 --> 00:12:12.546 A:middle
实际上 你可能听说过

00:12:12.976 --> 00:12:14.626 A:middle
在我们的“信息” App 中

00:12:14.626 --> 00:12:14.866 A:middle
它就可以为你这样做

00:12:14.866 --> 00:12:17.786 A:middle
我跟 John 交流时

00:12:17.786 --> 00:12:18.156 A:middle
使用英文键盘

00:12:19.196 --> 00:12:21.346 A:middle
我跟 Vivian 交流时用的是

00:12:21.346 --> 00:12:22.076 A:middle
中文键盘

00:12:23.066 --> 00:12:24.216 A:middle
而“信息”知道我要用的是

00:12:24.216 --> 00:12:24.646 A:middle
哪种键盘

00:12:25.616 --> 00:12:27.816 A:middle
这是如何做到的

00:12:28.026 --> 00:12:32.676 A:middle
在 iOS 中 我们可以把

00:12:32.676 --> 00:12:34.626 A:middle
一个特殊的标识符 叫做

00:12:34.626 --> 00:12:37.086 A:middle
文本输入上下文标识符 和你的

00:12:37.086 --> 00:12:38.216 A:middle
文本视图联系在一起

00:12:38.406 --> 00:12:40.106 A:middle
事实上 我们可以把它和

00:12:40.316 --> 00:12:41.846 A:middle
所有你的 UI 响应器联系起来

00:12:42.196 --> 00:12:43.816 A:middle
也就是说你也可以对

00:12:43.816 --> 00:12:47.216 A:middle
你的视图控制器这样做

00:12:48.736 --> 00:12:50.576 A:middle
这样 当我们看到你

00:12:50.576 --> 00:12:52.906 A:middle
设定了一个标识符时

00:12:53.146 --> 00:12:54.816 A:middle
不管你是否是一个响应器

00:12:54.816 --> 00:12:56.116 A:middle
我们都会把它

00:12:56.116 --> 00:12:58.076 A:middle
自动跟用户选择的键盘联系起来

00:12:58.076 --> 00:13:00.406 A:middle
然后把它保存为

00:12:58.076 --> 00:13:00.406 A:middle
然后把它保存为

00:13:00.406 --> 00:13:01.926 A:middle
用户默认设置

00:13:02.466 --> 00:13:04.306 A:middle
下次 当你是一个

00:13:04.306 --> 00:13:05.606 A:middle
响应器的时候 或成为首次

00:13:05.606 --> 00:13:07.566 A:middle
响应器的时候 这个键盘将会被

00:13:07.566 --> 00:13:08.606 A:middle
自动检索出来

00:13:09.366 --> 00:13:10.966 A:middle
听起来很复杂

00:13:11.736 --> 00:13:13.336 A:middle
其实你所要担心的唯一的事情

00:13:13.336 --> 00:13:15.046 A:middle
就是去找到一个好的

00:13:15.046 --> 00:13:15.596 A:middle
唯一标识符

00:13:16.456 --> 00:13:17.196 A:middle
什么算是好的

00:13:17.196 --> 00:13:17.846 A:middle
唯一标识符呢

00:13:18.116 --> 00:13:21.076 A:middle
比方说 你的用户 ID

00:13:21.076 --> 00:13:23.116 A:middle
对话 ID  群 ID

00:13:23.716 --> 00:13:28.776 A:middle
都是很好的例子

00:13:28.826 --> 00:13:31.726 A:middle
那么 你或许会问 我把这些

00:13:31.826 --> 00:13:33.626 A:middle
唯一标识符放哪呢

00:13:33.916 --> 00:13:35.476 A:middle
正如你提到的 没错 我可以在

00:13:35.476 --> 00:13:36.606 A:middle
任何 UI 响应器中定义它

00:13:36.606 --> 00:13:37.926 A:middle
我能在任何地方定义它吗

00:13:37.926 --> 00:13:38.636 A:middle
答案是不

00:13:39.426 --> 00:13:40.626 A:middle
那么 让我们看看我们要怎么放置它

00:13:41.406 --> 00:13:43.976 A:middle
让我们回忆一下 CatChat App

00:13:44.196 --> 00:13:45.516 A:middle
当我们拉出键盘时

00:13:46.236 --> 00:13:48.036 A:middle
文本视图成为了

00:13:48.036 --> 00:13:48.486 A:middle
第一个响应器

00:13:49.176 --> 00:13:50.546 A:middle
然后在响应链中的下一环

00:13:50.546 --> 00:13:52.576 A:middle
就是我们的

00:13:52.576 --> 00:13:53.926 A:middle
对话视图控制器

00:13:54.726 --> 00:13:56.086 A:middle
然后是导航

00:13:56.086 --> 00:13:56.486 A:middle
控制器

00:13:57.036 --> 00:14:02.806 A:middle
于是 在 iOS 中 当我们为你的

00:13:57.036 --> 00:14:02.806 A:middle
于是 在 iOS 中 当我们为你的

00:14:02.806 --> 00:14:05.106 A:middle
响应器寻找唯一标识符时

00:14:05.106 --> 00:14:07.186 A:middle
我们会搜索

00:14:07.186 --> 00:14:08.956 A:middle
响应链来寻找

00:14:08.956 --> 00:14:10.546 A:middle
其中的第一环

00:14:10.946 --> 00:14:13.466 A:middle
在我们的这个 App 中 我们在

00:14:13.466 --> 00:14:14.546 A:middle
对话视图控制器中控制

00:14:14.546 --> 00:14:15.606 A:middle
全部的对话

00:14:16.186 --> 00:14:16.896 A:middle
所以我们把标识符放在那里

00:14:17.816 --> 00:14:19.966 A:middle
这样 你就不必

00:14:20.146 --> 00:14:22.206 A:middle
想办法把你的标识符

00:14:22.206 --> 00:14:24.646 A:middle
传给你的文本界面或其他

00:14:24.646 --> 00:14:25.956 A:middle
你希望传到

00:14:25.956 --> 00:14:26.636 A:middle
的地方

00:14:27.136 --> 00:14:28.296 A:middle
你只要把它放在

00:14:28.296 --> 00:14:29.526 A:middle
你处理所有对话的地方

00:14:30.646 --> 00:14:31.666 A:middle
我们来看看如何把这些

00:14:31.666 --> 00:14:32.376 A:middle
翻译成代码

00:14:32.886 --> 00:14:35.916 A:middle
在我们的对话视图控制器中

00:14:35.916 --> 00:14:37.856 A:middle
我们把 Guider

00:14:37.856 --> 00:14:39.446 A:middle
重写成了

00:14:39.446 --> 00:14:40.456 A:middle
textInputContextIdentifier

00:14:41.016 --> 00:14:41.966 A:middle
你可以看到这个方法

00:14:41.966 --> 00:14:42.586 A:middle
非常简单

00:14:42.916 --> 00:14:44.116 A:middle
它就会返回一个

00:14:44.116 --> 00:14:44.676 A:middle
唯一标识符

00:14:45.386 --> 00:14:48.076 A:middle
在我们的这个例子中 我们返回

00:14:48.076 --> 00:14:49.606 A:middle
收件人 ID

00:14:51.016 --> 00:14:53.716 A:middle
现在 Kasia 会为你们展示

00:14:53.716 --> 00:14:55.786 A:middle
一个 Demo 来看看我们是如何让我们的

00:14:55.886 --> 00:14:56.796 A:middle
App 拥有记忆的

00:14:57.366 --> 00:14:57.706 A:middle
Kasia

00:14:58.516 --> 00:15:03.306 A:middle
[掌声]

00:14:58.516 --> 00:15:03.306 A:middle
[掌声]

00:15:03.806 --> 00:15:04.686 A:middle
&gt;&gt; 你们可能不记得我了

00:15:04.836 --> 00:15:05.646 A:middle
离我上次见到你们已经

00:15:05.696 --> 00:15:06.196 A:middle
有一段时间了

00:15:06.726 --> 00:15:09.246 A:middle
但 Kasia 还是在搞键盘

00:15:09.726 --> 00:15:13.896 A:middle
好的 首先 这是我们的

00:15:13.896 --> 00:15:15.006 A:middle
CatChat App 就是我们

00:15:15.006 --> 00:15:15.746 A:middle
今天看到的那个

00:15:16.416 --> 00:15:18.006 A:middle
我有一些宠物

00:15:18.006 --> 00:15:19.116 A:middle
它们说不一样的语言

00:15:19.416 --> 00:15:20.786 A:middle
这是我的 Misiu

00:15:21.236 --> 00:15:22.316 A:middle
它说波兰语

00:15:22.316 --> 00:15:23.186 A:middle
实际上我小时候听说

00:15:23.186 --> 00:15:24.336 A:middle
所有的猫说的

00:15:24.336 --> 00:15:24.796 A:middle
都是波兰语

00:15:24.796 --> 00:15:25.876 A:middle
所以 对它们说

00:15:25.876 --> 00:15:26.736 A:middle
波兰语很重要

00:15:27.556 --> 00:15:29.256 A:middle
但是 作为一个英语母语的人

00:15:29.256 --> 00:15:30.666 A:middle
我的默认键盘是英语

00:15:31.196 --> 00:15:32.116 A:middle
如果我直接把它换成

00:15:32.116 --> 00:15:34.486 A:middle
波兰语键盘然后说“你好”

00:15:35.186 --> 00:15:36.306 A:middle
然后看看会发生什么

00:15:36.536 --> 00:15:42.666 A:middle
然后你看 它今天

00:15:42.666 --> 00:15:43.106 A:middle
过得怎么样

00:15:43.106 --> 00:15:44.876 A:middle
这是我在说“嘿 今天过得

00:15:44.876 --> 00:15:45.256 A:middle
怎么样”

00:15:45.566 --> 00:15:46.796 A:middle
它说要吃的

00:15:47.516 --> 00:15:48.466 A:middle
这很让我惊讶

00:15:49.476 --> 00:15:51.226 A:middle
那么 我们来看看

00:15:51.486 --> 00:15:53.106 A:middle
Shuchen 的狗 Jiwang

00:15:54.546 --> 00:15:56.166 A:middle
Jiwang 想现在出去

00:15:56.166 --> 00:15:57.496 A:middle
遛弯 但我

00:15:57.496 --> 00:15:58.366 A:middle
现在没空

00:15:58.816 --> 00:16:01.056 A:middle
然而 它说中文 所以

00:15:58.816 --> 00:16:01.056 A:middle
然而 它说中文 所以

00:16:01.056 --> 00:16:01.966 A:middle
我要把键盘再次

00:16:01.966 --> 00:16:03.206 A:middle
更换成中文拼音

00:16:03.206 --> 00:16:05.426 A:middle
然后说“我现在

00:16:05.426 --> 00:16:05.976 A:middle
没有时间

00:16:06.676 --> 00:16:07.346 A:middle
请耐心等待“

00:16:08.326 --> 00:16:10.146 A:middle
狗狗的回复

00:16:10.506 --> 00:16:11.946 A:middle
有时候会比猫

00:16:11.946 --> 00:16:12.826 A:middle
友善一点

00:16:13.236 --> 00:16:14.916 A:middle
所以 现在 这是我第一次

00:16:14.916 --> 00:16:16.086 A:middle
使用这个 App 同时跟它们

00:16:16.086 --> 00:16:16.426 A:middle
两个交谈

00:16:16.926 --> 00:16:18.106 A:middle
如果我回到与 Misiu 的

00:16:18.106 --> 00:16:19.686 A:middle
对话 波兰语

00:16:19.686 --> 00:16:20.586 A:middle
键盘还在

00:16:20.966 --> 00:16:23.156 A:middle
如果我回到这里 我还会

00:16:23.156 --> 00:16:24.996 A:middle
看到中文键盘

00:16:25.326 --> 00:16:26.076 A:middle
所以 我就不用一直

00:16:26.136 --> 00:16:27.726 A:middle
切换键盘 取决于

00:16:27.726 --> 00:16:28.886 A:middle
我在进行的是什么对话

00:16:29.306 --> 00:16:30.516 A:middle
要实现这一点

00:16:30.516 --> 00:16:32.356 A:middle
要做的事 就是

00:16:32.566 --> 00:16:35.526 A:middle
设置 textInputContextIdentifier

00:16:35.526 --> 00:16:37.316 A:middle
正如 Shuchen 说的

00:16:37.316 --> 00:16:39.336 A:middle
把它联系到每个对话的

00:16:39.336 --> 00:16:40.116 A:middle
唯一 ID

00:16:40.516 --> 00:16:42.546 A:middle
如果我现在切换语言

00:16:42.546 --> 00:16:43.416 A:middle
我的 App 无须知道我在用的

00:16:43.416 --> 00:16:44.156 A:middle
是什么语言

00:16:44.476 --> 00:16:45.426 A:middle
它只需要知道这是

00:16:45.426 --> 00:16:47.166 A:middle
哪一个对话

00:16:47.166 --> 00:16:49.146 A:middle
而我们会为你设置好

00:16:49.146 --> 00:16:50.226 A:middle
正确的键盘

00:16:50.586 --> 00:16:50.653 A:middle
就是这样

00:16:51.016 --> 00:16:53.000 A:middle
[掌声]

00:16:59.426 --> 00:17:02.336 A:middle
好的 有请 Shuchen

00:16:59.426 --> 00:17:02.336 A:middle
好的 有请 Shuchen

00:17:03.776 --> 00:17:05.185 A:middle
&gt;&gt; 谢谢 Kasia

00:17:06.116 --> 00:17:07.205 A:middle
相当实用的功能 对吧

00:17:07.376 --> 00:17:08.915 A:middle
它会省却你

00:17:08.915 --> 00:17:09.736 A:middle
不少的麻烦

00:17:09.736 --> 00:17:10.205 A:middle
我相信这一点

00:17:10.205 --> 00:17:14.046 A:middle
所以 在整个过程中

00:17:14.046 --> 00:17:16.136 A:middle
你可能也注意到 你不需要

00:17:16.136 --> 00:17:17.736 A:middle
关心用户选择的

00:17:17.736 --> 00:17:18.546 A:middle
是什么键盘

00:17:18.945 --> 00:17:19.675 A:middle
你不需要知道

00:17:20.116 --> 00:17:21.266 A:middle
你需要担心的唯一一件事就是

00:17:21.266 --> 00:17:23.116 A:middle
你的唯一标识符

00:17:23.175 --> 00:17:24.616 A:middle
是否设置好了

00:17:24.616 --> 00:17:26.516 A:middle
现在你也许要问 如果你

00:17:26.516 --> 00:17:28.316 A:middle
想要知道用户在用的是什么语言

00:17:28.386 --> 00:17:29.216 A:middle
怎么办

00:17:30.106 --> 00:17:31.836 A:middle
如果你想为一个特定的语言

00:17:31.836 --> 00:17:33.986 A:middle
开发一个特别的

00:17:33.986 --> 00:17:34.466 A:middle
功能呢

00:17:35.536 --> 00:17:37.616 A:middle
现在你可能需要查看

00:17:37.616 --> 00:17:38.496 A:middle
UITextInputMode

00:17:39.136 --> 00:17:40.896 A:middle
在 UITextInputMode 中 你可以

00:17:40.896 --> 00:17:42.726 A:middle
轻松找到用户的

00:17:42.726 --> 00:17:43.756 A:middle
主要语言

00:17:44.956 --> 00:17:47.156 A:middle
这样 你就可以

00:17:47.156 --> 00:17:48.516 A:middle
比如 开发你自己的语言的

00:17:48.516 --> 00:17:52.456 A:middle
拼写检查器 或者

00:17:52.456 --> 00:17:54.136 A:middle
你可以针对你希望 App

00:17:54.136 --> 00:17:55.236 A:middle
能够支持的某种语言

00:17:55.236 --> 00:17:56.846 A:middle
开发其他特别的功能

00:17:56.846 --> 00:17:57.886 A:middle
或者我们以后

00:17:57.886 --> 00:17:59.536 A:middle
有可能会支持的

00:17:59.706 --> 00:18:01.316 A:middle
语言

00:17:59.706 --> 00:18:01.316 A:middle
语言

00:18:02.146 --> 00:18:05.936 A:middle
下一步 我们已经为

00:18:05.936 --> 00:18:08.916 A:middle
准确快速输入文本而

00:18:09.376 --> 00:18:10.726 A:middle
做出了很多努力

00:18:11.646 --> 00:18:13.286 A:middle
我们可以通过

00:18:13.286 --> 00:18:14.786 A:middle
语境滚动预测而使其进一步

00:18:16.516 --> 00:18:19.516 A:middle
同时 我们把用户的个性化信息

00:18:19.666 --> 00:18:21.506 A:middle
考虑进来

00:18:23.016 --> 00:18:25.806 A:middle
在 iOS 4 中 我们推出了

00:18:26.046 --> 00:18:26.626 A:middle
不同种类的键盘

00:18:27.566 --> 00:18:29.626 A:middle
有了不同种类的键盘

00:18:29.626 --> 00:18:31.786 A:middle
比如电子邮件键盘

00:18:31.786 --> 00:18:32.216 A:middle
和 URL 键盘

00:18:32.216 --> 00:18:33.436 A:middle
如果你在输入一个邮件

00:18:33.646 --> 00:18:36.116 A:middle
地址 就会有 @ 和 .com 按钮

00:18:36.116 --> 00:18:38.186 A:middle
使输入更简便

00:18:39.536 --> 00:18:42.586 A:middle
去年 我们介绍了

00:18:43.306 --> 00:18:43.956 A:middle
UITextContentTypes

00:18:44.416 --> 00:18:48.136 A:middle
UITextContentTypes 是一个

00:18:48.336 --> 00:18:49.706 A:middle
你可以设置在你的

00:18:49.706 --> 00:18:49.926 A:middle
文本界面中的标签

00:18:50.516 --> 00:18:55.056 A:middle
它会通过这些标签提供

00:18:55.056 --> 00:18:58.906 A:middle
各种语境预测

00:18:58.906 --> 00:19:02.166 A:middle
我们来看一个例子

00:18:58.906 --> 00:19:02.166 A:middle
我们来看一个例子

00:19:02.166 --> 00:19:04.986 A:middle
现在  John 想把他的猫

00:19:04.986 --> 00:19:07.606 A:middle
Penny 加入我们的

00:19:07.606 --> 00:19:07.806 A:middle
CatChat App

00:19:08.246 --> 00:19:09.906 A:middle
这个是 John Appleseed 的猫

00:19:10.636 --> 00:19:12.996 A:middle
从视频中 你可以看到

00:19:13.056 --> 00:19:14.736 A:middle
实际上 John 根本没有用

00:19:14.736 --> 00:19:15.766 A:middle
任何字母按钮打字

00:19:16.456 --> 00:19:18.426 A:middle
他只在用 QuickType

00:19:18.426 --> 00:19:18.816 A:middle
栏打字

00:19:19.616 --> 00:19:21.986 A:middle
所有的信息都输入了

00:19:23.316 --> 00:19:24.926 A:middle
现在 John 想要给猫

00:19:24.926 --> 00:19:26.056 A:middle
输入 地址

00:19:27.026 --> 00:19:28.556 A:middle
这是 John Appleseed 的猫

00:19:28.806 --> 00:19:30.416 A:middle
它就住在 它应该

00:19:30.416 --> 00:19:31.686 A:middle
住在一个 Apple Store

00:19:32.486 --> 00:19:33.046 A:middle
哪一个

00:19:33.776 --> 00:19:35.056 A:middle
Los Gatos 那个

00:19:41.696 --> 00:19:42.926 A:middle
如果有人不知道的话

00:19:42.926 --> 00:19:44.256 A:middle
Los Gatos 在西班牙语中

00:19:44.256 --> 00:19:44.726 A:middle
是“猫”的意思

00:19:46.436 --> 00:19:48.006 A:middle
于是 我们可以看到 John 打开了

00:19:49.136 --> 00:19:50.806 A:middle
地图 搜索 Apple Store

00:19:52.036 --> 00:19:53.246 A:middle
查看地址

00:19:54.056 --> 00:19:55.216 A:middle
然后回到我们的

00:19:55.216 --> 00:19:55.856 A:middle
CatChat App

00:19:57.176 --> 00:19:59.186 A:middle
然后你就看到 哈

00:19:59.646 --> 00:20:00.356 A:middle
地址神奇

00:19:59.646 --> 00:20:00.356 A:middle
地址神奇

00:20:01.206 --> 00:20:01.786 A:middle
地出现了

00:20:01.786 --> 00:20:03.836 A:middle
通过用 QuickType 栏

00:20:03.836 --> 00:20:06.866 A:middle
输入 你可以 谢谢

00:20:07.796 --> 00:20:08.806 A:middle
如果我用 Quick Type 栏输入

00:20:09.226 --> 00:20:11.196 A:middle
就可以直接

00:20:11.336 --> 00:20:11.816 A:middle
输入整个地址

00:20:12.626 --> 00:20:15.856 A:middle
如果你仔细看 你可以看到

00:20:16.226 --> 00:20:16.836 A:middle
它的来源

00:20:17.276 --> 00:20:18.716 A:middle
在这个例子中 它来自于“地图”

00:20:21.276 --> 00:20:24.886 A:middle
在 iOS 中 我们会整体提取

00:20:24.986 --> 00:20:27.226 A:middle
所有的用户信息和

00:20:27.226 --> 00:20:29.796 A:middle
用户活动 并加上

00:20:29.796 --> 00:20:32.036 A:middle
数据来源 来提高

00:20:32.036 --> 00:20:33.286 A:middle
用户体验

00:20:34.436 --> 00:20:36.436 A:middle
比如说 我们的个性化键盘

00:20:36.436 --> 00:20:38.966 A:middle
可以提取姓名

00:20:38.966 --> 00:20:41.106 A:middle
来构建键盘

00:20:41.106 --> 00:20:42.766 A:middle
的个性化词库

00:20:44.956 --> 00:20:47.966 A:middle
另外 还有一件事

00:20:47.966 --> 00:20:48.446 A:middle
我想谈谈

00:20:48.996 --> 00:20:52.046 A:middle
在这个整个过程中 你的 App

00:20:52.046 --> 00:20:54.086 A:middle
并不只是一个被动的接收者

00:20:54.986 --> 00:20:57.146 A:middle
你的 App 可以是一个贡献者

00:20:58.326 --> 00:20:59.826 A:middle
你的 App 可以通过

00:20:59.826 --> 00:21:02.426 A:middle
NSUserActivity API

00:20:59.826 --> 00:21:02.426 A:middle
NSUserActivity API

00:21:02.426 --> 00:21:04.366 A:middle
共享 App 活动

00:21:05.176 --> 00:21:08.316 A:middle
比如 如果你在

00:21:08.396 --> 00:21:09.406 A:middle
Yelp 上浏览你喜欢的餐厅

00:21:09.406 --> 00:21:12.946 A:middle
地址就会被

00:21:13.146 --> 00:21:14.626 A:middle
显示在 QuickType 栏上

00:21:14.906 --> 00:21:16.746 A:middle
如果你正确设置了标签的话

00:21:17.286 --> 00:21:19.316 A:middle
这是否激起了你的兴趣

00:21:20.366 --> 00:21:22.606 A:middle
如果你想了解更多

00:21:22.606 --> 00:21:24.686 A:middle
不要忘记看去年的视频

00:21:24.776 --> 00:21:27.066 A:middle
叫做“Increase

00:21:27.066 --> 00:21:29.516 A:middle
Usage of Your App Through

00:21:29.796 --> 00:21:31.836 A:middle
Proactive Suggestion”

00:21:33.586 --> 00:21:35.856 A:middle
今年 我们让它

00:21:36.456 --> 00:21:36.596 A:middle
更进一步

00:21:37.166 --> 00:21:38.726 A:middle
我们为用户名和密码

00:21:38.726 --> 00:21:39.896 A:middle
增加了一些新的标签

00:21:40.366 --> 00:21:43.726 A:middle
如果你正确标记了你的登录框的话

00:21:43.726 --> 00:21:45.696 A:middle
我们会自动地

00:21:45.696 --> 00:21:48.306 A:middle
为你的 App 建议

00:21:48.576 --> 00:21:49.956 A:middle
用户名和密码

00:21:49.956 --> 00:21:52.136 A:middle
当然 会帮你填好

00:21:54.536 --> 00:21:56.186 A:middle
唯一你所要做的是

00:21:56.396 --> 00:21:58.286 A:middle
如果你正确的设置了标签

00:21:58.786 --> 00:22:01.366 A:middle
这个 API 只有一行 非常简单

00:21:58.786 --> 00:22:01.366 A:middle
这个 API 只有一行 非常简单

00:22:01.366 --> 00:22:03.546 A:middle
它可以确保

00:22:03.546 --> 00:22:05.376 A:middle
一些 QuickType

00:22:05.376 --> 00:22:06.596 A:middle
建议能被显示出来

00:22:07.616 --> 00:22:10.186 A:middle
不过这并不是

00:22:10.186 --> 00:22:10.496 A:middle
全部

00:22:10.966 --> 00:22:12.776 A:middle
如果你想确保

00:22:12.776 --> 00:22:15.026 A:middle
你的信息在你的 App 中

00:22:15.026 --> 00:22:17.746 A:middle
正确显示

00:22:17.746 --> 00:22:18.916 A:middle
因为你可能有一个网页

00:22:18.916 --> 00:22:21.186 A:middle
关联在你的 App 上

00:22:21.186 --> 00:22:22.616 A:middle
你可以查看“Introducing

00:22:22.616 --> 00:22:23.836 A:middle
Password Auto Fill for App”

00:22:24.126 --> 00:22:24.496 A:middle
的视频

00:22:24.916 --> 00:22:29.446 A:middle
下一步 我们要谈到一些

00:22:29.446 --> 00:22:30.206 A:middle
新的智能

00:22:30.256 --> 00:22:33.856 A:middle
今年 我们为文本视图提出了

00:22:33.856 --> 00:22:37.996 A:middle
一些新的智能

00:22:38.236 --> 00:22:40.126 A:middle
首先是 SmartQuote

00:22:41.176 --> 00:22:43.426 A:middle
这些是打字机式的引号

00:22:44.516 --> 00:22:47.146 A:middle
它们是直的

00:22:48.406 --> 00:22:49.846 A:middle
一些人不喜欢

00:22:49.846 --> 00:22:51.776 A:middle
我也不喜欢

00:22:53.436 --> 00:22:55.186 A:middle
这些是印刷式引号

00:22:55.666 --> 00:22:56.136 A:middle
我很喜欢

00:22:56.206 --> 00:22:57.736 A:middle
它们是弯的

00:22:58.326 --> 00:22:59.136 A:middle
更清晰

00:22:59.866 --> 00:23:01.096 A:middle
并且它们实际上

00:22:59.866 --> 00:23:01.096 A:middle
并且它们实际上

00:23:01.096 --> 00:23:02.746 A:middle
在语法上更正确

00:23:02.746 --> 00:23:03.556 A:middle
从语言的角度来说

00:23:04.076 --> 00:23:06.246 A:middle
今年 iOS 将

00:23:06.386 --> 00:23:09.386 A:middle
自动地把你的

00:23:09.386 --> 00:23:11.456 A:middle
打字机式的引号变成

00:23:11.766 --> 00:23:12.976 A:middle
印刷式引号

00:23:13.516 --> 00:23:19.986 A:middle
[掌声]

00:23:20.486 --> 00:23:21.846 A:middle
下一步是什么

00:23:22.396 --> 00:23:23.936 A:middle
当你在打字打到一半时

00:23:23.936 --> 00:23:26.956 A:middle
有时候你在想

00:23:26.956 --> 00:23:28.876 A:middle
“好吧 一个连字符 一个短破折号

00:23:28.876 --> 00:23:30.286 A:middle
再来一个长破折号”

00:23:30.286 --> 00:23:30.466 A:middle
这样要怎么做

00:23:31.266 --> 00:23:33.336 A:middle
从今年开始 我们可以用一个破折号输入

00:23:33.336 --> 00:23:34.386 A:middle
一个连字符

00:23:35.026 --> 00:23:36.476 A:middle
我们会自动把

00:23:36.476 --> 00:23:38.246 A:middle
两个破折号转换成一个短破折号

00:23:39.566 --> 00:23:41.336 A:middle
然后三个破折号转换成

00:23:41.336 --> 00:23:41.976 A:middle
一个长破折号

00:23:42.516 --> 00:23:46.606 A:middle
[掌声]

00:23:47.106 --> 00:23:49.916 A:middle
并且 我们提出了

00:23:49.916 --> 00:23:51.036 A:middle
Smart Insertion 和 Smart Deletion

00:23:51.576 --> 00:23:53.886 A:middle
如果你之前使用过标签

00:23:54.826 --> 00:23:57.036 A:middle
你需要插入或者删除

00:23:57.036 --> 00:23:59.206 A:middle
一个段落或者一个短语 你就会知道

00:23:59.206 --> 00:23:59.946 A:middle
我在说什么

00:24:00.366 --> 00:24:01.846 A:middle
就更不必提

00:24:01.846 --> 00:24:02.826 A:middle
标点符号带来的麻烦了

00:24:03.206 --> 00:24:06.196 A:middle
所以 举个例子 在我们的例子中

00:24:06.536 --> 00:24:08.136 A:middle
Vivian 想带 Jiwang

00:24:08.136 --> 00:24:10.946 A:middle
去参加聚会 但当时

00:24:11.066 --> 00:24:12.206 A:middle
Jiwang 病了

00:24:12.536 --> 00:24:14.836 A:middle
所以我需要去掉它

00:24:15.316 --> 00:24:18.006 A:middle
在这个过程中

00:24:18.046 --> 00:24:19.636 A:middle
你不得不面对一个空格

00:24:19.856 --> 00:24:20.506 A:middle
这是个问题

00:24:21.346 --> 00:24:22.086 A:middle
是个麻烦

00:24:23.596 --> 00:24:26.446 A:middle
从今天开始

00:24:26.446 --> 00:24:27.546 A:middle
我们会替你解决这些

00:24:28.166 --> 00:24:29.246 A:middle
使用 Smart Insertion 和

00:24:29.246 --> 00:24:30.866 A:middle
Deletion 我们会替你处理所有

00:24:30.866 --> 00:24:32.826 A:middle
字前和字后

00:24:32.826 --> 00:24:33.660 A:middle
的空格

00:24:35.516 --> 00:24:38.206 A:middle
[掌声]

00:24:38.706 --> 00:24:40.836 A:middle
同时 我想说 所有的这些

00:24:40.886 --> 00:24:41.976 A:middle
我们提出的智能

00:24:41.976 --> 00:24:43.106 A:middle
包括我今天说的

00:24:43.326 --> 00:24:44.426 A:middle
都是默认设置的

00:24:45.496 --> 00:24:47.786 A:middle
但我希望你们知道

00:24:47.786 --> 00:24:50.836 A:middle
那些智能文本输入功能

00:24:51.216 --> 00:24:52.426 A:middle
它们有三个值

00:24:52.736 --> 00:24:54.316 A:middle
它们有“yes” “no”

00:24:54.316 --> 00:24:54.986 A:middle
以及“default”

00:24:55.866 --> 00:24:57.246 A:middle
我们为你们全部设置了

00:24:57.246 --> 00:24:58.916 A:middle
默认值

00:25:00.236 --> 00:25:01.936 A:middle
我们会为你们自动

00:25:01.936 --> 00:25:02.866 A:middle
做好正确的选择

00:25:03.156 --> 00:25:07.256 A:middle
比如说 你有一个文本框

00:25:07.336 --> 00:25:09.086 A:middle
你把 securedTextEntry

00:25:09.086 --> 00:25:10.066 A:middle
设置成“是”

00:25:10.736 --> 00:25:12.076 A:middle
它可能是一个

00:25:12.076 --> 00:25:12.386 A:middle
密码栏

00:25:12.626 --> 00:25:14.956 A:middle
这种情况下 如果你把

00:25:14.956 --> 00:25:17.756 A:middle
智能功能设为默认 我们会

00:25:17.756 --> 00:25:20.326 A:middle
自动禁用 SmartQuote

00:25:20.326 --> 00:25:21.346 A:middle
转换器

00:25:21.456 --> 00:25:22.876 A:middle
因为我们认为那可能

00:25:22.876 --> 00:25:23.906 A:middle
是用户密码

00:25:24.046 --> 00:25:26.046 A:middle
我们不想更改用户

00:25:26.096 --> 00:25:27.976 A:middle
在密码栏里的输入

00:25:29.046 --> 00:25:31.796 A:middle
如果你回忆一下 实际上我们可以

00:25:31.796 --> 00:25:33.546 A:middle
配置自动更正

00:25:33.816 --> 00:25:34.776 A:middle
可以配置

00:25:34.776 --> 00:25:35.796 A:middle
自动大写

00:25:36.286 --> 00:25:39.006 A:middle
我们在文本输入中

00:25:39.006 --> 00:25:40.106 A:middle
有很多很好的功能

00:25:40.106 --> 00:25:40.466 A:middle
可以使用

00:25:41.436 --> 00:25:43.276 A:middle
他们全部都有

00:25:43.276 --> 00:25:43.566 A:middle
默认值

00:25:44.526 --> 00:25:46.076 A:middle
我在此想要强调的是

00:25:46.076 --> 00:25:48.616 A:middle
在你使用任何

00:25:48.616 --> 00:25:51.466 A:middle
这些功能之前 你一定要明白

00:25:51.716 --> 00:25:53.036 A:middle
你的标签会是什么

00:25:54.136 --> 00:25:56.256 A:middle
也要明白你期待

00:25:56.556 --> 00:25:57.786 A:middle
用户会输入什么样的

00:25:57.786 --> 00:25:58.166 A:middle
标签

00:25:58.806 --> 00:26:00.876 A:middle
现在让我再问一个问题

00:25:58.806 --> 00:26:00.876 A:middle
现在让我再问一个问题

00:26:00.876 --> 00:26:04.096 A:middle
有谁为了 WWDC 飞到圣何塞的

00:26:04.096 --> 00:26:05.306 A:middle
好的 欢迎

00:26:06.456 --> 00:26:10.166 A:middle
我也是 其实这次我是开玩笑的

00:26:10.376 --> 00:26:12.986 A:middle
如果你需要一个文本输入框

00:26:12.986 --> 00:26:17.366 A:middle
只采用航班号作为输入

00:26:17.366 --> 00:26:18.776 A:middle
这种情况下 你可能需要

00:26:18.946 --> 00:26:21.916 A:middle
禁用自动更正并且

00:26:21.916 --> 00:26:24.706 A:middle
把自动大写功能

00:26:24.706 --> 00:26:25.096 A:middle
设成“否”

00:26:25.566 --> 00:26:27.416 A:middle
是这样吧 因为这样才有意义

00:26:28.156 --> 00:26:29.806 A:middle
所以 你必须要清楚的

00:26:29.806 --> 00:26:34.396 A:middle
了解文本 再去设置

00:26:34.396 --> 00:26:35.126 A:middle
这些功能

00:26:35.126 --> 00:26:36.796 A:middle
不是说就在这个标签上

00:26:36.796 --> 00:26:38.086 A:middle
打字 想“好的 就设成是”

00:26:38.086 --> 00:26:39.496 A:middle
或者“否”

00:26:39.926 --> 00:26:41.746 A:middle
你必须充分理解它

00:26:43.556 --> 00:26:44.636 A:middle
这是我的观点

00:26:45.056 --> 00:26:50.336 A:middle
下面 在处理文本时 你现在可以

00:26:50.336 --> 00:26:52.116 A:middle
忽略标记文本

00:26:53.006 --> 00:26:54.696 A:middle
两大语言

00:26:54.696 --> 00:26:55.016 A:middle
中文和日文

00:26:55.136 --> 00:26:57.316 A:middle
都使用标记文本

00:26:57.316 --> 00:26:58.676 A:middle
标记文本语言

00:26:58.676 --> 00:27:00.526 A:middle
把标记文本变成最终文本

00:26:58.676 --> 00:27:00.526 A:middle
把标记文本变成最终文本

00:27:00.526 --> 00:27:01.996 A:middle
是通过选字实现的

00:27:02.546 --> 00:27:05.796 A:middle
在 iOS 中 实际上你可以很方便的

00:27:05.796 --> 00:27:07.826 A:middle
在 UITextInput 中访问

00:27:07.826 --> 00:27:08.216 A:middle
标记文本

00:27:08.906 --> 00:27:10.876 A:middle
你可以直接使用

00:27:11.676 --> 00:27:11.886 A:middle
标记文本

00:27:12.536 --> 00:27:14.466 A:middle
我们的系统中就有一个这样的例子

00:27:14.896 --> 00:27:15.786 A:middle
就是 Spotlight

00:27:16.806 --> 00:27:20.076 A:middle
在 Spotlight 中 当用户输入

00:27:20.076 --> 00:27:22.506 A:middle
中文时 举个例子

00:27:22.506 --> 00:27:24.036 A:middle
在用户选字之前

00:27:25.406 --> 00:27:27.096 A:middle
Spotlight 引擎就已经开始

00:27:27.096 --> 00:27:28.566 A:middle
向你推荐搜索结果了

00:27:29.216 --> 00:27:30.756 A:middle
你在你的 App 中也可以实现

00:27:31.156 --> 00:27:33.296 A:middle
只需要通过将标记文本

00:27:33.296 --> 00:27:34.546 A:middle
从 UITextInput 中提取出来即可

00:27:36.106 --> 00:27:37.576 A:middle
这样 用户就不需要

00:27:37.576 --> 00:27:39.136 A:middle
为选字而

00:27:39.136 --> 00:27:39.616 A:middle
烦恼了

00:27:39.856 --> 00:27:41.506 A:middle
用户可以有更多时间

00:27:41.506 --> 00:27:43.466 A:middle
来享受使用你的 App

00:27:43.866 --> 00:27:46.156 A:middle
我不会过多赘述关于

00:27:46.156 --> 00:27:48.106 A:middle
国际化的内容 但是

00:27:48.106 --> 00:27:49.956 A:middle
如果你感兴趣的话

00:27:49.956 --> 00:27:51.806 A:middle
请看去年的“Internationalization Best

00:27:51.806 --> 00:27:52.886 A:middle
Practices”视频

00:27:53.366 --> 00:27:57.286 A:middle
最后 硬件

00:27:57.286 --> 00:27:57.706 A:middle
键盘

00:27:58.726 --> 00:28:00.156 A:middle
我相信每个人都使用

00:27:58.726 --> 00:28:00.156 A:middle
我相信每个人都使用

00:28:00.156 --> 00:28:02.016 A:middle
硬件键盘 我也相信你们都

00:28:02.016 --> 00:28:03.736 A:middle
喜欢键盘快捷键

00:28:03.876 --> 00:28:05.326 A:middle
比如 Command C  Command V

00:28:05.696 --> 00:28:06.616 A:middle
你们最喜欢的可能是

00:28:06.616 --> 00:28:07.256 A:middle
Command Z

00:28:07.416 --> 00:28:11.306 A:middle
通过推出 Smart Keyboard

00:28:11.306 --> 00:28:11.876 A:middle
我们把快捷键带入了 iOS

00:28:12.396 --> 00:28:17.206 A:middle
这样 如果有 iPad App 的话

00:28:17.206 --> 00:28:21.066 A:middle
你可以在 iOS 中

00:28:21.066 --> 00:28:23.646 A:middle
为你的用户定制快捷键

00:28:23.906 --> 00:28:25.286 A:middle
那么我们来看一下 这是如何做到的

00:28:25.286 --> 00:28:27.676 A:middle
我们就直接说代码吧

00:28:28.096 --> 00:28:29.256 A:middle
非常直接

00:28:29.256 --> 00:28:29.666 A:middle
也非常简单

00:28:30.796 --> 00:28:32.876 A:middle
同样的 在 UI 响应器中 你可以

00:28:32.876 --> 00:28:34.086 A:middle
重写 KeyCommand

00:28:34.646 --> 00:28:38.116 A:middle
KeyCommand 会返回一系列的

00:28:38.116 --> 00:28:38.636 A:middle
关键命令

00:28:38.636 --> 00:28:39.966 A:middle
这就意味着你可以

00:28:40.096 --> 00:28:42.746 A:middle
同时为你的 App 定制

00:28:42.746 --> 00:28:43.976 A:middle
一些快捷键

00:28:44.736 --> 00:28:46.736 A:middle
定义一个 KeyCommand 是

00:28:46.736 --> 00:28:47.576 A:middle
清晰明了的

00:28:48.506 --> 00:28:49.386 A:middle
设定一个 input

00:28:50.156 --> 00:28:51.156 A:middle
设定你的 modifier

00:28:52.166 --> 00:28:53.326 A:middle
你把你的 selector 放在这里

00:28:54.036 --> 00:28:55.236 A:middle
然后给它取一个名称

00:28:56.006 --> 00:28:57.266 A:middle
不要忘了本地化

00:28:57.266 --> 00:28:58.316 A:middle
这个名称

00:28:59.276 --> 00:29:01.736 A:middle
这是我们的第二个快捷键

00:28:59.276 --> 00:29:01.736 A:middle
这是我们的第二个快捷键

00:29:02.286 --> 00:29:06.946 A:middle
现在 按下 Command 键

00:29:07.236 --> 00:29:10.316 A:middle
它就会显示你的

00:29:10.316 --> 00:29:12.066 A:middle
键盘快捷键 然后

00:29:12.066 --> 00:29:14.196 A:middle
你就可以在我们的 CatChat App 中看到

00:29:14.196 --> 00:29:16.516 A:middle
我们用 Command Up

00:29:16.516 --> 00:29:18.886 A:middle
和 Command Down

00:29:20.716 --> 00:29:21.066 A:middle
来切换对话

00:29:21.066 --> 00:29:21.826 A:middle
现在我们回顾一下

00:29:22.386 --> 00:29:23.216 A:middle
我们刚才讨论了

00:29:23.216 --> 00:29:24.716 A:middle
关于多语言的问题及如何

00:29:24.716 --> 00:29:25.836 A:middle
让你的 App 拥有记忆

00:29:26.346 --> 00:29:29.336 A:middle
还有怎样

00:29:29.606 --> 00:29:31.356 A:middle
最大程度的利用语境来

00:29:31.356 --> 00:29:33.766 A:middle
提高预测

00:29:33.766 --> 00:29:35.376 A:middle
就是通过 Text Content Type

00:29:35.906 --> 00:29:36.976 A:middle
给你的文本框加个标签

00:29:37.836 --> 00:29:39.556 A:middle
我们还谈到了新的

00:29:40.156 --> 00:29:41.506 A:middle
文本输入智能

00:29:42.426 --> 00:29:44.156 A:middle
我们也提到了

00:29:44.486 --> 00:29:45.026 A:middle
标记文本

00:29:45.846 --> 00:29:47.836 A:middle
最后 还有一个

00:29:47.836 --> 00:29:48.996 A:middle
键盘快捷键功能 你们或许会

00:29:48.996 --> 00:29:49.446 A:middle
感兴趣

00:29:50.656 --> 00:29:51.276 A:middle
多多尝试它们

00:29:51.896 --> 00:29:55.506 A:middle
现在 请 James 来谈谈

00:29:55.506 --> 00:29:57.856 A:middle
如何创建自定义

00:29:57.926 --> 00:29:58.576 A:middle
输入界面

00:29:58.996 --> 00:29:59.306 A:middle
James

00:30:00.516 --> 00:30:05.566 A:middle
[掌声]

00:30:06.066 --> 00:30:06.806 A:middle
&gt;&gt; 谢谢 Shuchen

00:30:07.266 --> 00:30:08.376 A:middle
我很紧张 我的意思是

00:30:08.446 --> 00:30:09.876 A:middle
我很兴奋 能够跟你们讨论

00:30:09.876 --> 00:30:11.676 A:middle
创建自定义输入界面

00:30:12.426 --> 00:30:14.946 A:middle
Shuchen 已经简要提及了一个

00:30:14.946 --> 00:30:16.726 A:middle
UI 响应器的属性 叫做

00:30:16.726 --> 00:30:18.266 A:middle
Keyboard Type 它允许你

00:30:18.266 --> 00:30:20.586 A:middle
访问很多内置的

00:30:20.586 --> 00:30:22.156 A:middle
iOS键盘 并用于

00:30:22.156 --> 00:30:24.506 A:middle
特殊的输入 比如说

00:30:24.506 --> 00:30:25.956 A:middle
用数字键盘输入数字

00:30:25.956 --> 00:30:27.676 A:middle
或者用

00:30:27.676 --> 00:30:29.006 A:middle
电话号码键盘输入电话号码

00:30:29.006 --> 00:30:30.916 A:middle
还有一个特殊的键盘

00:30:30.916 --> 00:30:32.366 A:middle
专门输入 URL 和址

00:30:32.366 --> 00:30:32.936 A:middle
电子邮件地

00:30:33.566 --> 00:30:34.766 A:middle
然而有时候 这可能还是

00:30:34.766 --> 00:30:36.286 A:middle
不能满足你的 App 的需要

00:30:36.646 --> 00:30:38.066 A:middle
你可能希望用到一些

00:30:38.066 --> 00:30:39.136 A:middle
系统键盘还

00:30:39.136 --> 00:30:39.376 A:middle
不能提供的功能

00:30:40.026 --> 00:30:41.166 A:middle
我们来看一些

00:30:41.166 --> 00:30:42.000 A:middle
例子

00:30:43.066 --> 00:30:44.266 A:middle
数学是一个很好的

00:30:44.266 --> 00:30:44.786 A:middle
例子

00:30:45.156 --> 00:30:46.306 A:middle
在数学中 有很多自定义的

00:30:46.306 --> 00:30:48.076 A:middle
符号 比方说希腊字母

00:30:48.406 --> 00:30:50.106 A:middle
上标运算符

00:30:50.106 --> 00:30:51.176 A:middle
或下标运算符

00:30:51.436 --> 00:30:52.706 A:middle
要想使用系统内置键盘

00:30:52.706 --> 00:30:54.406 A:middle
来输入这些东西

00:30:54.406 --> 00:30:55.936 A:middle
可以说是很难的

00:30:56.386 --> 00:30:59.216 A:middle
Swift Playgrounds 是另一个

00:30:59.216 --> 00:30:59.866 A:middle
很好的例子

00:31:00.426 --> 00:31:01.396 A:middle
这是 Swift Playgrounds

00:31:01.396 --> 00:31:01.556 A:middle
App

00:31:01.556 --> 00:31:02.866 A:middle
它使用的是普通 QWERTY 界面

00:31:02.866 --> 00:31:04.276 A:middle
但是他们同时提供很多

00:31:04.276 --> 00:31:05.626 A:middle
其他的功能

00:31:05.626 --> 00:31:06.766 A:middle
适应在 Swift 语言中常用的

00:31:06.766 --> 00:31:07.816 A:middle
一些符号

00:31:08.806 --> 00:31:10.006 A:middle
他们还有一个很不错的

00:31:10.006 --> 00:31:11.426 A:middle
在键盘上方辅助工具栏

00:31:11.926 --> 00:31:13.186 A:middle
协助用户快速输入相关的

00:31:13.186 --> 00:31:14.376 A:middle
功能与符号

00:31:14.916 --> 00:31:19.126 A:middle
最后 Apple 的 Numbers

00:31:19.216 --> 00:31:20.316 A:middle
电子表格是又一个

00:31:20.316 --> 00:31:20.786 A:middle
很好的例子

00:31:21.206 --> 00:31:22.966 A:middle
这是一个公式输入栏

00:31:22.966 --> 00:31:24.316 A:middle
也需要有很多

00:31:24.316 --> 00:31:26.326 A:middle
自定义符号 同时他们还有

00:31:26.326 --> 00:31:27.286 A:middle
一个深灰色的

00:31:27.286 --> 00:31:28.656 A:middle
背景 因此它可以

00:31:28.656 --> 00:31:29.836 A:middle
很好地融入

00:31:29.836 --> 00:31:30.266 A:middle
系统键盘

00:31:32.856 --> 00:31:34.566 A:middle
那么让我们回到 CatChat App

00:31:34.566 --> 00:31:35.816 A:middle
这是另一个

00:31:35.816 --> 00:31:37.366 A:middle
需要自定义输入界面的

00:31:37.366 --> 00:31:38.266 A:middle
很好的例子

00:31:38.556 --> 00:31:41.186 A:middle
为什么呢 现在我们已经可以

00:31:41.186 --> 00:31:42.586 A:middle
跟我们的宠物聊天了 但是

00:31:42.586 --> 00:31:43.436 A:middle
我们的宠物却不一定可以

00:31:43.436 --> 00:31:44.066 A:middle
回复我们

00:31:45.046 --> 00:31:46.466 A:middle
那是因为 它们

00:31:46.466 --> 00:31:47.476 A:middle
在使用 QWERTY 时有

00:31:47.476 --> 00:31:47.946 A:middle
很多困难

00:31:48.016 --> 00:31:49.376 A:middle
它们的爪子都比较大

00:31:49.686 --> 00:31:50.826 A:middle
而键盘的按键非常小

00:31:51.306 --> 00:31:52.886 A:middle
这样 它们很难

00:31:52.886 --> 00:31:54.476 A:middle
按到这些按键

00:31:54.886 --> 00:31:56.416 A:middle
另外 它们的词汇量也

00:31:56.416 --> 00:31:57.366 A:middle
非常有限

00:31:57.706 --> 00:31:58.366 A:middle
这样它们其实不需要

00:31:58.366 --> 00:31:59.076 A:middle
说很多话

00:32:00.146 --> 00:32:01.666 A:middle
比方说现在我们要为

00:32:01.666 --> 00:32:02.656 A:middle
这些宠物特制一个键盘

00:32:02.656 --> 00:32:03.966 A:middle
使小猫小狗都可以用

00:32:04.966 --> 00:32:06.456 A:middle
那么我们可能需要大号的

00:32:06.456 --> 00:32:08.516 A:middle
图形按钮来代表

00:32:08.516 --> 00:32:09.926 A:middle
它们有限的词汇量

00:32:10.446 --> 00:32:12.216 A:middle
它可能看起来

00:32:12.216 --> 00:32:12.446 A:middle
是这样

00:32:13.016 --> 00:32:16.746 A:middle
这是我们的 Catchat App

00:32:16.996 --> 00:32:18.506 A:middle
它已经拥有了

00:32:18.506 --> 00:32:20.316 A:middle
Kasia 之前为我们创建的

00:32:20.316 --> 00:32:21.346 A:middle
酷炫文本界面

00:32:21.756 --> 00:32:24.476 A:middle
现在 在宠物那一边

00:32:24.476 --> 00:32:25.676 A:middle
我们有三个大号的

00:32:25.676 --> 00:32:27.426 A:middle
图形按钮 代表

00:32:27.426 --> 00:32:28.476 A:middle
它们的全部词汇

00:32:28.476 --> 00:32:29.396 A:middle
包括它们想说的话

00:32:29.396 --> 00:32:30.566 A:middle
比如“我想要食物”

00:32:30.566 --> 00:32:31.596 A:middle
“我想出去”和

00:32:31.596 --> 00:32:31.696 A:middle
“别摸我”

00:32:31.936 --> 00:32:33.106 A:middle
差不多就是这样

00:32:34.436 --> 00:32:37.016 A:middle
另一件很酷的事是

00:32:37.016 --> 00:32:38.056 A:middle
这个键盘使用起来就像

00:32:38.056 --> 00:32:39.796 A:middle
系统键盘一样

00:32:39.796 --> 00:32:40.636 A:middle
它处在屏幕

00:32:40.636 --> 00:32:41.226 A:middle
的下方

00:32:41.516 --> 00:32:42.696 A:middle
上方有一个辅助栏

00:32:42.696 --> 00:32:44.046 A:middle
就恰好在键盘上方

00:32:44.046 --> 00:32:44.656 A:middle
不管这个键盘在哪

00:32:44.656 --> 00:32:46.036 A:middle
都在键盘上方

00:32:46.306 --> 00:32:47.596 A:middle
同样 背景的滚动界面

00:32:47.596 --> 00:32:48.836 A:middle
自动地将

00:32:48.836 --> 00:32:51.286 A:middle
它的内容适应

00:32:51.326 --> 00:32:52.916 A:middle
你的自定义输入界面的大小

00:32:53.476 --> 00:32:55.526 A:middle
我们来进一步看看细节

00:32:55.526 --> 00:32:57.266 A:middle
如何构建

00:32:57.266 --> 00:32:58.196 A:middle
一个像这样的东西

00:32:59.086 --> 00:33:01.886 A:middle
对我们的 PetChat App 来说

00:32:59.086 --> 00:33:01.886 A:middle
对我们的 PetChat App 来说

00:33:01.886 --> 00:33:02.816 A:middle
要构建一个这样的东西 我们所要做的

00:33:02.816 --> 00:33:04.826 A:middle
全部事情就是

00:33:04.826 --> 00:33:05.826 A:middle
在 UIInputViewController 加入子菜单

00:33:06.296 --> 00:33:07.726 A:middle
这样 我们可以

00:33:07.726 --> 00:33:09.436 A:middle
轻而易举地获得很多东西

00:33:09.436 --> 00:33:10.936 A:middle
比如能模仿系统键盘外观的

00:33:10.936 --> 00:33:12.436 A:middle
半透明的灰色背景

00:33:13.566 --> 00:33:15.836 A:middle
但最重要的是 我们提供了

00:33:15.836 --> 00:33:17.216 A:middle
一种方法 使你可以访问到

00:33:17.216 --> 00:33:18.926 A:middle
目前用户选择的

00:33:18.926 --> 00:33:19.956 A:middle
活跃的文本框

00:33:20.586 --> 00:33:21.716 A:middle
我们通过一种叫做

00:33:21.716 --> 00:33:23.546 A:middle
textDocumentProxy 的

00:33:23.546 --> 00:33:24.036 A:middle
特别属性

00:33:24.786 --> 00:33:26.026 A:middle
现在 textDocumentProxy

00:33:26.026 --> 00:33:27.766 A:middle
允许你访问

00:33:27.766 --> 00:33:29.096 A:middle
现在用户选择的文本框的

00:33:29.096 --> 00:33:30.336 A:middle
文本输入功能

00:33:30.686 --> 00:33:31.656 A:middle
这样 这就变成了

00:33:31.656 --> 00:33:33.096 A:middle
判定这是否是一个密码栏

00:33:33.096 --> 00:33:34.736 A:middle
什么样的内容形式更好

00:33:34.736 --> 00:33:36.726 A:middle
甚至什么样的

00:33:36.726 --> 00:33:37.736 A:middle
键盘更适合的问题

00:33:37.736 --> 00:33:39.186 A:middle
这样你就可以按照你的需求进行调整

00:33:39.996 --> 00:33:41.496 A:middle
但最重要的是

00:33:41.496 --> 00:33:43.286 A:middle
textDocumentProxy 还允许你

00:33:43.286 --> 00:33:45.036 A:middle
在文本框中插入文本

00:33:45.036 --> 00:33:47.336 A:middle
通过一个非常简单的方法

00:33:47.336 --> 00:33:48.506 A:middle
叫做 InsertText 方法

00:33:48.506 --> 00:33:49.046 A:middle
只占用一个字符串而已

00:33:49.816 --> 00:33:50.716 A:middle
你还可以

00:33:50.716 --> 00:33:51.846 A:middle
用 textDocumentProxy

00:33:51.846 --> 00:33:52.526 A:middle
做一件事

00:33:52.786 --> 00:33:53.786 A:middle
你可以访问

00:33:53.786 --> 00:33:55.756 A:middle
插入点的位置 以及

00:33:55.756 --> 00:33:57.526 A:middle
它之前和

00:33:57.526 --> 00:33:58.186 A:middle
之后的文本

00:33:59.156 --> 00:33:59.576 A:middle
这非常棒

00:34:00.196 --> 00:34:01.726 A:middle
我们来看看

00:34:01.726 --> 00:34:03.406 A:middle
我们要怎样

00:34:03.406 --> 00:34:03.946 A:middle
把它放入我们

00:34:04.026 --> 00:34:04.956 A:middle
PetChat App 中让

00:34:04.956 --> 00:34:06.556 A:middle
我们回到我们的老朋友

00:34:06.556 --> 00:34:07.226 A:middle
ConversationViewController

00:34:08.466 --> 00:34:09.476 A:middle
为了让它出现在我们的

00:34:09.476 --> 00:34:10.906 A:middle
ConversationViewController 中

00:34:10.906 --> 00:34:13.116 A:middle
我们只需要把

00:34:13.116 --> 00:34:14.485 A:middle
customInputView 实例化成为

00:34:14.485 --> 00:34:14.996 A:middle
一个成员变量

00:34:15.686 --> 00:34:17.076 A:middle
然后 重写一个叫做

00:34:17.076 --> 00:34:18.226 A:middle
canBecomeFirstResponder	 的

00:34:18.226 --> 00:34:19.646 A:middle
UI 响应器方法

00:34:19.646 --> 00:34:21.485 A:middle
使它返回 True 这样它就成了

00:34:21.485 --> 00:34:22.426 A:middle
响应链的一部分

00:34:22.876 --> 00:34:25.246 A:middle
最后 我们所要做的

00:34:25.246 --> 00:34:26.556 A:middle
只是重写另一个叫做 inputView 的

00:34:26.556 --> 00:34:27.806 A:middle
UI 响应器

00:34:27.806 --> 00:34:28.076 A:middle
方法

00:34:28.076 --> 00:34:30.056 A:middle
然后只需要返回我们的自定义

00:34:30.056 --> 00:34:30.936 A:middle
输入界面样本

00:34:31.886 --> 00:34:33.106 A:middle
现在 如果你正在使用

00:34:33.106 --> 00:34:35.306 A:middle
UITextView 或 UITextField

00:34:35.565 --> 00:34:36.565 A:middle
你实际上不需要做以上的

00:34:36.565 --> 00:34:37.386 A:middle
大部分工作

00:34:37.775 --> 00:34:39.406 A:middle
UITextView 和 UITextField

00:34:39.406 --> 00:34:41.696 A:middle
输入界面属性是一个

00:34:41.696 --> 00:34:42.626 A:middle
可写的属性

00:34:42.946 --> 00:34:44.085 A:middle
所以 你所要做的只是

00:34:44.085 --> 00:34:45.946 A:middle
把你的自定义

00:34:45.946 --> 00:34:49.016 A:middle
输入视图样本赋给

00:34:49.016 --> 00:34:49.505 A:middle
输入视图属性

00:34:50.076 --> 00:34:52.686 A:middle
现在 我们的宠物已经

00:34:52.686 --> 00:34:54.456 A:middle
有办法跟我们在

00:34:54.456 --> 00:34:56.726 A:middle
PetChat App 中聊天了 但是如果它们

00:34:56.726 --> 00:34:57.596 A:middle
事实上真的想要

00:34:57.596 --> 00:34:59.026 A:middle
更进一步 开始

00:34:59.026 --> 00:35:00.126 A:middle
写推特或是

00:34:59.026 --> 00:35:00.126 A:middle
写推特或是

00:35:00.126 --> 00:35:00.526 A:middle
写个博客

00:35:00.916 --> 00:35:01.716 A:middle
我很确定它们一定有

00:35:01.716 --> 00:35:02.776 A:middle
很多有趣的事情要说

00:35:02.776 --> 00:35:06.176 A:middle
就用它们这少得可怜的词汇量

00:35:06.346 --> 00:35:07.866 A:middle
所以在 iOS 8 中 我们添加了

00:35:07.866 --> 00:35:09.426 A:middle
创建自定义键盘扩展的能力

00:35:09.426 --> 00:35:10.866 A:middle
这样它可以

00:35:10.866 --> 00:35:12.126 A:middle
在系统中的任何地方运行

00:35:12.126 --> 00:35:13.076 A:middle
事实上 这是我们第一次

00:35:13.076 --> 00:35:14.486 A:middle
在 WWDC 讨论这个问题

00:35:15.796 --> 00:35:18.086 A:middle
那么 我们的自定义

00:35:18.086 --> 00:35:19.216 A:middle
键盘扩展可能会

00:35:19.216 --> 00:35:20.366 A:middle
像这个样子在“信息”中

00:35:20.366 --> 00:35:20.896 A:middle
运行

00:35:21.406 --> 00:35:23.486 A:middle
这样 你的宠物就可以

00:35:23.486 --> 00:35:25.456 A:middle
在任何地方聊天 或者在

00:35:25.456 --> 00:35:26.476 A:middle
Twitter 上打字 或是写个博客

00:35:26.476 --> 00:35:26.856 A:middle
什么的

00:35:27.636 --> 00:35:29.456 A:middle
因此 实际上很容易

00:35:29.456 --> 00:35:31.216 A:middle
从一个输入视图到

00:35:31.216 --> 00:35:32.216 A:middle
自定义键盘扩展

00:35:32.216 --> 00:35:33.536 A:middle
我要给你们一个

00:35:33.536 --> 00:35:34.756 A:middle
Demo 来展示你们要具体

00:35:34.756 --> 00:35:35.126 A:middle
怎么做

00:35:35.626 --> 00:35:36.456 A:middle
我们来看到这个电脑

00:35:39.526 --> 00:35:41.556 A:middle
这就是我们的自定义

00:35:42.866 --> 00:35:44.396 A:middle
输入视图控制器

00:35:44.446 --> 00:35:45.476 A:middle
我不会说太多关于

00:35:45.476 --> 00:35:46.506 A:middle
它是如何构建起来的

00:35:46.506 --> 00:35:47.946 A:middle
我们的示例代码已经

00:35:47.946 --> 00:35:48.936 A:middle
上传到了网上

00:35:49.106 --> 00:35:50.186 A:middle
你可以下载全部代码

00:35:50.186 --> 00:35:51.196 A:middle
如果你想进一步

00:35:51.196 --> 00:35:51.636 A:middle
了解的话

00:35:52.916 --> 00:35:54.666 A:middle
那么我们就开始

00:35:54.666 --> 00:35:55.796 A:middle
生成然后运行这些代码

00:35:55.796 --> 00:35:57.006 A:middle
来看看它在

00:35:57.526 --> 00:36:00.446 A:middle
我们的 App 中是什么样子

00:35:57.526 --> 00:36:00.446 A:middle
我们的 App 中是什么样子

00:36:00.716 --> 00:36:01.896 A:middle
构建 运行

00:36:15.116 --> 00:36:16.476 A:middle
好了 这就是我们的

00:36:16.476 --> 00:36:17.656 A:middle
自定义输入界面在我们的

00:36:17.656 --> 00:36:17.746 A:middle
App 中运行的样子

00:36:17.746 --> 00:36:18.996 A:middle
这样 我要开始装作

00:36:18.996 --> 00:36:20.596 A:middle
我是一只宠物 然后开始

00:36:20.596 --> 00:36:21.356 A:middle
说我的感受

00:36:21.356 --> 00:36:22.186 A:middle
我今天早上没吃早饭

00:36:22.186 --> 00:36:24.466 A:middle
所以我就说

00:36:24.466 --> 00:36:24.836 A:middle
这个

00:36:25.676 --> 00:36:27.166 A:middle
现在 如果我们想要

00:36:27.166 --> 00:36:28.586 A:middle
使用这个自定义输入界面并且

00:36:28.586 --> 00:36:29.516 A:middle
将它转换成一个第三方

00:36:29.516 --> 00:36:30.736 A:middle
键盘扩展

00:36:30.736 --> 00:36:31.126 A:middle
是很简单的

00:36:31.316 --> 00:36:32.306 A:middle
让我们切换到

00:36:32.306 --> 00:36:33.366 A:middle
Xcode 我会向你们展示

00:36:33.366 --> 00:36:33.836 A:middle
如何完成

00:36:33.836 --> 00:36:36.296 A:middle
首先 我需要先

00:36:36.296 --> 00:36:37.816 A:middle
把鼠标挪到左上方

00:36:37.816 --> 00:36:38.586 A:middle
点击“Project Settings”

00:36:39.206 --> 00:36:40.386 A:middle
然后我要创建一个新的

00:36:40.386 --> 00:36:42.096 A:middle
目标 点击这个加号按钮

00:36:42.096 --> 00:36:43.066 A:middle
在屏幕底部

00:36:43.606 --> 00:36:45.676 A:middle
然后我就要继续操作

00:36:45.676 --> 00:36:47.846 A:middle
选择自定义键盘

00:36:47.846 --> 00:36:49.676 A:middle
扩展模版 然后点按

00:36:49.676 --> 00:36:50.066 A:middle
“Next”

00:36:50.816 --> 00:36:51.516 A:middle
取个名称

00:36:52.636 --> 00:36:53.326 A:middle
我就叫它 Animal Keyboard

00:36:53.326 --> 00:36:53.806 A:middle
好了

00:36:55.376 --> 00:36:57.006 A:middle
好了 这样做之后 Xcode 实际上

00:36:57.006 --> 00:36:58.136 A:middle
已经自动给了我们

00:36:58.136 --> 00:36:59.586 A:middle
很多东西

00:37:00.306 --> 00:37:01.986 A:middle
比如 它完成设置后

00:37:01.986 --> 00:37:02.726 A:middle
这个扩展已经

00:37:02.726 --> 00:37:04.106 A:middle
自动的嵌入到了

00:37:04.106 --> 00:37:04.746 A:middle
你的 App 数据包里

00:37:04.746 --> 00:37:05.666 A:middle
这样你就不需要纠结

00:37:05.666 --> 00:37:07.056 A:middle
构建设置或者构建阶段

00:37:07.056 --> 00:37:07.716 A:middle
等一系列问题

00:37:08.746 --> 00:37:11.406 A:middle
它同时还给了我们一个模版

00:37:12.076 --> 00:37:13.806 A:middle
UIInputViewController

00:37:14.296 --> 00:37:15.156 A:middle
但我们其实不需要

00:37:15.156 --> 00:37:16.226 A:middle
用到它 因为我们已经

00:37:16.226 --> 00:37:16.706 A:middle
写了一个

00:37:17.036 --> 00:37:18.026 A:middle
所以我只需要

00:37:18.026 --> 00:37:18.976 A:middle
调整一些设置

00:37:18.976 --> 00:37:20.606 A:middle
保证我们的扩展

00:37:20.606 --> 00:37:22.416 A:middle
能正确装载

00:37:22.416 --> 00:37:23.506 A:middle
CustomInputViewController

00:37:23.506 --> 00:37:24.326 A:middle
而不是

00:37:24.326 --> 00:37:24.886 A:middle
模版给我们的那个

00:37:25.316 --> 00:37:27.646 A:middle
我要切换到

00:37:27.646 --> 00:37:28.516 A:middle
我们的 CustomInputViewController

00:37:28.516 --> 00:37:29.716 A:middle
然后我要

00:37:29.716 --> 00:37:31.796 A:middle
勾选这里这个复选框框

00:37:31.796 --> 00:37:33.096 A:middle
这样我们的键盘扩展就成为

00:37:33.096 --> 00:37:34.216 A:middle
那个目标的一部分了

00:37:34.816 --> 00:37:37.756 A:middle
然后 我们的键盘用到了

00:37:37.756 --> 00:37:38.966 A:middle
一些其他资源

00:37:39.216 --> 00:37:40.386 A:middle
它有一些

00:37:40.386 --> 00:37:40.966 A:middle
本地化的字符串

00:37:40.966 --> 00:37:41.976 A:middle
所以我也要把这里

00:37:41.976 --> 00:37:43.636 A:middle
切换到本地化字符串

00:37:43.636 --> 00:37:45.246 A:middle
然后勾选这个框

00:37:45.246 --> 00:37:46.136 A:middle
以确保它是那个目标的一部分

00:37:46.616 --> 00:37:47.896 A:middle
最后 它还有一些

00:37:47.896 --> 00:37:50.406 A:middle
用于图像的

00:37:50.736 --> 00:37:51.566 A:middle
内容

00:37:51.566 --> 00:37:52.736 A:middle
所以我要勾选这个框

00:37:53.276 --> 00:37:55.376 A:middle
然后我还要做

00:37:55.376 --> 00:37:55.536 A:middle
一件事

00:37:55.536 --> 00:37:56.616 A:middle
就是到 Info.plist 中

00:37:56.616 --> 00:37:58.716 A:middle
这是为

00:37:58.716 --> 00:38:00.246 A:middle
我们的自定义键盘扩展而生成的

00:37:58.716 --> 00:38:00.246 A:middle
我们的自定义键盘扩展而生成的

00:38:00.246 --> 00:38:01.716 A:middle
然后把它的

00:38:01.716 --> 00:38:03.016 A:middle
主要类改成我们

00:38:03.016 --> 00:38:04.696 A:middle
之前创建的那个键盘 而不是

00:38:04.696 --> 00:38:05.656 A:middle
模版给出的那个

00:38:11.026 --> 00:38:12.046 A:middle
这样就差不多了

00:38:12.046 --> 00:38:14.486 A:middle
现在我要切换回到

00:38:14.486 --> 00:38:16.576 A:middle
App目标 然后构建

00:38:16.576 --> 00:38:16.976 A:middle
并运行

00:38:22.956 --> 00:38:24.086 A:middle
好了 现在这个 App 已经

00:38:24.086 --> 00:38:25.316 A:middle
安装在系统里了

00:38:25.316 --> 00:38:26.986 A:middle
扩展也跟它一起安装好了

00:38:27.656 --> 00:38:30.186 A:middle
现在我们得

00:38:30.186 --> 00:38:31.816 A:middle
在系统设置里开启自定义

00:38:31.816 --> 00:38:33.426 A:middle
键盘扩展

00:38:33.426 --> 00:38:34.726 A:middle
过去这是一个很

00:38:34.726 --> 00:38:35.926 A:middle
复杂费解的

00:38:35.926 --> 00:38:36.256 A:middle
过程

00:38:36.446 --> 00:38:38.276 A:middle
但在新的 iOS 11 里

00:38:38.276 --> 00:38:39.586 A:middle
我们为用户简化了

00:38:39.586 --> 00:38:40.856 A:middle
开启你的

00:38:40.856 --> 00:38:41.916 A:middle
自定义键盘扩展的方式

00:38:42.106 --> 00:38:42.826 A:middle
那么我要向你们展示

00:38:42.826 --> 00:38:43.616 A:middle
它现在是如何工作的

00:38:43.616 --> 00:38:46.086 A:middle
让我回到

00:38:46.086 --> 00:38:46.896 A:middle
“设置”

00:38:48.426 --> 00:38:50.166 A:middle
现在你要开启

00:38:50.166 --> 00:38:51.826 A:middle
允许你的用户

00:38:51.826 --> 00:38:52.976 A:middle
来开启你的自定义键盘

00:38:52.976 --> 00:38:54.966 A:middle
你所要做的就是给你的 App

00:38:54.966 --> 00:38:56.076 A:middle
提供一个“设置”包

00:38:56.396 --> 00:38:57.396 A:middle
它可以是空的 它也可以

00:38:57.396 --> 00:38:58.586 A:middle
包含你的一些设置

00:38:59.116 --> 00:39:01.666 A:middle
我们现在有个新的选项

00:38:59.116 --> 00:39:01.666 A:middle
我们现在有个新的选项

00:39:01.736 --> 00:39:02.856 A:middle
就在这里

00:39:02.856 --> 00:39:04.036 A:middle
在 Siri 和搜索下面叫做

00:39:04.036 --> 00:39:04.676 A:middle
“键盘”

00:39:05.096 --> 00:39:06.836 A:middle
点击这里

00:39:06.836 --> 00:39:08.146 A:middle
用户要做的所有事情就只是

00:39:08.146 --> 00:39:09.546 A:middle
滑动这个滑块

00:39:09.546 --> 00:39:10.626 A:middle
现在键盘就被激活了

00:39:11.516 --> 00:39:15.446 A:middle
[掌声]

00:39:15.946 --> 00:39:17.346 A:middle
我很确定你们这些第三方

00:39:17.346 --> 00:39:18.276 A:middle
键盘开发者会

00:39:18.276 --> 00:39:18.986 A:middle
爱上它的

00:39:19.046 --> 00:39:20.416 A:middle
现在 我切换到

00:39:20.416 --> 00:39:21.356 A:middle
“信息”

00:39:21.906 --> 00:39:26.106 A:middle
然后我要切换到我们的

00:39:26.106 --> 00:39:27.406 A:middle
自定义键盘扩展

00:39:28.226 --> 00:39:28.796 A:middle
好了

00:39:28.856 --> 00:39:30.026 A:middle
现在我们使它在整个系统中

00:39:30.026 --> 00:39:30.516 A:middle
运行了

00:39:31.116 --> 00:39:32.176 A:middle
现在我想

00:39:32.176 --> 00:39:33.906 A:middle
说说我现在对这个

00:39:33.906 --> 00:39:34.656 A:middle
Demo 的感觉

00:39:35.076 --> 00:39:38.056 A:middle
我要做的就是这样

00:39:38.936 --> 00:39:39.696 A:middle
让我们再回到

00:39:39.696 --> 00:39:39.976 A:middle
幻灯片

00:39:40.516 --> 00:39:44.756 A:middle
[鼓掌]

00:39:45.256 --> 00:39:48.146 A:middle
谢谢 这是我个人

00:39:48.146 --> 00:39:49.616 A:middle
推荐的方式来

00:39:49.616 --> 00:39:51.136 A:middle
开发第三方

00:39:51.136 --> 00:39:51.726 A:middle
键盘

00:39:51.796 --> 00:39:53.516 A:middle
也很容易先在

00:39:53.516 --> 00:39:55.116 A:middle
你的 App 中测试

00:39:55.116 --> 00:39:56.286 A:middle
作为一个自定义输入界面

00:39:56.526 --> 00:39:58.126 A:middle
然后 正如你所见

00:39:58.126 --> 00:39:59.476 A:middle
从一个自定义输入界面到一个

00:39:59.476 --> 00:40:00.576 A:middle
自定义键盘扩展是很容易的

00:39:59.476 --> 00:40:00.576 A:middle
自定义键盘扩展是很容易的

00:40:00.576 --> 00:40:00.916 A:middle
一件事

00:40:01.066 --> 00:40:06.286 A:middle
这真的是一个很好的方法

00:40:06.526 --> 00:40:08.136 A:middle
我们来快速的回顾一下

00:40:08.136 --> 00:40:09.516 A:middle
如何把一个自定义输入界面转换成

00:40:09.516 --> 00:40:10.776 A:middle
一个键盘扩展

00:40:11.136 --> 00:40:12.616 A:middle
我们只需要创建一个新的目标

00:40:12.686 --> 00:40:14.406 A:middle
然后我们使用了自定义键盘

00:40:14.406 --> 00:40:15.506 A:middle
扩展模版

00:40:16.706 --> 00:40:17.886 A:middle
你可以选择使用系统提供的

00:40:17.886 --> 00:40:19.116 A:middle
UIInputViewController

00:40:19.116 --> 00:40:21.166 A:middle
子类 或者修改

00:40:21.166 --> 00:40:23.036 A:middle
使它能够运行你

00:40:23.036 --> 00:40:23.316 A:middle
自己的键盘

00:40:24.146 --> 00:40:25.206 A:middle
最后我展示了一个

00:40:25.206 --> 00:40:27.396 A:middle
酷炫的新的用户快捷键 或者说

00:40:27.396 --> 00:40:28.526 A:middle
一个酷炫的让你的用户

00:40:28.526 --> 00:40:29.736 A:middle
在你的设置包里

00:40:29.736 --> 00:40:30.566 A:middle
快速激活你的键盘的方式

00:40:31.456 --> 00:40:33.506 A:middle
但这并不是全部

00:40:33.776 --> 00:40:35.036 A:middle
我们在 iOS 11 中有很多新的 API

00:40:35.036 --> 00:40:37.636 A:middle
我想跟你们分享

00:40:37.636 --> 00:40:41.236 A:middle
它们

00:40:41.416 --> 00:40:42.816 A:middle
现在你可以快速访问

00:40:42.816 --> 00:40:44.446 A:middle
现在用户所选择的

00:40:44.446 --> 00:40:46.066 A:middle
文本 这十分有用

00:40:46.066 --> 00:40:47.416 A:middle
如果你想要你的

00:40:47.416 --> 00:40:49.386 A:middle
自动完成引擎进行

00:40:49.386 --> 00:40:51.016 A:middle
反校正

00:40:51.326 --> 00:40:52.486 A:middle
或者在用户选择的

00:40:52.486 --> 00:40:54.346 A:middle
文本周边提供一些

00:40:54.406 --> 00:40:56.506 A:middle
很酷的背景的话

00:40:56.506 --> 00:40:57.576 A:middle
我们也提供了这个

00:40:57.576 --> 00:40:58.906 A:middle
叫做 documentIdentifier

00:40:58.906 --> 00:41:00.546 A:middle
句柄的新功能

00:40:58.906 --> 00:41:00.546 A:middle
句柄的新功能

00:41:00.546 --> 00:41:03.156 A:middle
它是一个 UUID 能够准确地把

00:41:03.196 --> 00:41:04.446 A:middle
一个文本栏和下一个区分开来

00:41:05.356 --> 00:41:06.846 A:middle
现在 这对很多事情

00:41:06.846 --> 00:41:08.076 A:middle
都非常有帮助

00:41:08.076 --> 00:41:09.626 A:middle
其中一个就是

00:41:09.626 --> 00:41:11.306 A:middle
重置你的键盘的状态

00:41:11.306 --> 00:41:12.876 A:middle
当用户切换

00:41:12.876 --> 00:41:14.676 A:middle
文本框时 这样你就能够

00:41:14.676 --> 00:41:15.836 A:middle
清空你的预测 如果你

00:41:15.836 --> 00:41:17.806 A:middle
让预测显示出来的话 或者

00:41:17.806 --> 00:41:19.486 A:middle
切换回字母键盘

00:41:19.486 --> 00:41:20.496 A:middle
如果用户之前切换到了

00:41:20.496 --> 00:41:21.656 A:middle
数字键盘的话

00:41:21.656 --> 00:41:22.000 A:middle
诸如此类

00:41:24.176 --> 00:41:25.416 A:middle
最后 我们还增加了一项功能

00:41:25.416 --> 00:41:26.596 A:middle
让你可以询问用户

00:41:26.596 --> 00:41:27.816 A:middle
是否同意了

00:41:27.816 --> 00:41:29.126 A:middle
你的扩展完全访问权限

00:41:29.296 --> 00:41:30.416 A:middle
等一下我会谈到

00:41:30.416 --> 00:41:31.446 A:middle
完全访问权限是什么意思

00:41:31.446 --> 00:41:32.316 A:middle
以防你们有人不熟悉

00:41:33.496 --> 00:41:34.476 A:middle
但是首先 我想谈谈

00:41:34.476 --> 00:41:35.756 A:middle
一些其他的 鲜为人知的

00:41:35.756 --> 00:41:37.036 A:middle
第三方键盘 API

00:41:37.036 --> 00:41:37.836 A:middle
你们可能也不知道

00:41:39.216 --> 00:41:40.986 A:middle
在 iOS 10 中

00:41:40.986 --> 00:41:41.886 A:middle
你们可以在键盘中

00:41:41.886 --> 00:41:43.446 A:middle
嵌入 System Globe

00:41:43.776 --> 00:41:45.536 A:middle
Menu

00:41:45.916 --> 00:41:47.146 A:middle
这很方便 可以允许

00:41:47.146 --> 00:41:48.466 A:middle
你的用户快速地

00:41:48.466 --> 00:41:49.896 A:middle
在他们所选择的所有键盘中

00:41:49.896 --> 00:41:50.646 A:middle
自由切换

00:41:50.646 --> 00:41:51.856 A:middle
这比起我们之前只能选

00:41:51.856 --> 00:41:52.726 A:middle
下一个键盘

00:41:52.726 --> 00:41:53.156 A:middle
强多了

00:41:54.246 --> 00:41:54.786 A:middle
谢谢

00:41:55.516 --> 00:41:58.516 A:middle
[掌声]

00:41:59.016 --> 00:42:00.326 A:middle
你也可以个性化你的

00:41:59.016 --> 00:42:00.326 A:middle
你也可以个性化你的

00:42:00.326 --> 00:42:01.276 A:middle
自动补全结果

00:42:01.276 --> 00:42:02.066 A:middle
使用我们称为

00:42:02.066 --> 00:42:03.356 A:middle
Supplementary Lexicon 的功能

00:42:03.666 --> 00:42:05.066 A:middle
Supplementary Lexicon 本质上就是

00:42:05.066 --> 00:42:06.646 A:middle
一串单词

00:42:06.646 --> 00:42:07.836 A:middle
包含了一部分的

00:42:07.836 --> 00:42:09.606 A:middle
用户的通讯录 允许你

00:42:09.606 --> 00:42:11.446 A:middle
自动补全姓名和其他一些

00:42:11.446 --> 00:42:13.546 A:middle
用户在他们

00:42:13.546 --> 00:42:15.156 A:middle
正在输入的文本中想

00:42:15.156 --> 00:42:15.496 A:middle
参考的内容

00:42:16.546 --> 00:42:17.836 A:middle
最后 跟一些

00:42:17.836 --> 00:42:19.136 A:middle
我们在 iOS 11 中添加的多语言支持

00:42:19.136 --> 00:42:21.386 A:middle
联系起来 就是 Shuchen 刚刚

00:42:21.386 --> 00:42:22.766 A:middle
谈到的那些

00:42:22.766 --> 00:42:24.166 A:middle
你的键盘可以结合我谈到的那些文档标识符

00:42:24.166 --> 00:42:25.486 A:middle
句柄的功能

00:42:25.486 --> 00:42:26.856 A:middle
作为一个多语言

00:42:26.856 --> 00:42:27.706 A:middle
的提示

00:42:27.706 --> 00:42:29.516 A:middle
这样 如果你的

00:42:29.516 --> 00:42:31.416 A:middle
键盘支持 多种语言

00:42:32.076 --> 00:42:33.306 A:middle
你也能够

00:42:33.306 --> 00:42:34.536 A:middle
使它像系统键盘一样

00:42:34.536 --> 00:42:34.966 A:middle
再需要的时候切换

00:42:35.526 --> 00:42:39.046 A:middle
最后 我们要谈

00:42:39.046 --> 00:42:40.466 A:middle
第三方键盘扩展

00:42:40.466 --> 00:42:41.746 A:middle
就必须要谈隐私和

00:42:41.746 --> 00:42:42.556 A:middle
用户信任

00:42:43.186 --> 00:42:45.936 A:middle
保护隐私是

00:42:45.936 --> 00:42:48.416 A:middle
iOS 用户通常会

00:42:48.416 --> 00:42:48.846 A:middle
期待的标准特点

00:42:49.966 --> 00:42:51.846 A:middle
他们也清楚

00:42:51.846 --> 00:42:52.926 A:middle
他们每一次的按键都是

00:42:52.926 --> 00:42:54.046 A:middle
通过你的扩展实现的

00:42:54.546 --> 00:42:55.426 A:middle
所以 如果你要对

00:42:55.426 --> 00:42:56.786 A:middle
这些按键做什么的话 比如说

00:42:56.886 --> 00:42:58.286 A:middle
对它们进行备份 或者

00:42:58.536 --> 00:43:00.056 A:middle
分析它们的话

00:42:58.536 --> 00:43:00.056 A:middle
分析它们的话

00:43:00.056 --> 00:43:01.066 A:middle
你应该确保你通知到了

00:43:01.066 --> 00:43:02.716 A:middle
用户 然后对

00:43:02.716 --> 00:43:03.866 A:middle
收到的数据进行匿名处理

00:43:03.866 --> 00:43:04.836 A:middle
如果你要备份的话

00:43:05.856 --> 00:43:07.826 A:middle
最后 尽管大部分的 App

00:43:07.976 --> 00:43:09.836 A:middle
都不需要 但你

00:43:10.346 --> 00:43:12.226 A:middle
可以询问用户是否

00:43:12.226 --> 00:43:14.046 A:middle
给予你的扩展完全访问权限

00:43:14.276 --> 00:43:15.666 A:middle
包括访问系统中一些

00:43:15.666 --> 00:43:16.786 A:middle
较低层的部分

00:43:17.266 --> 00:43:18.826 A:middle
我们来谈谈到底

00:43:18.826 --> 00:43:20.106 A:middle
完全访问权限是什么意思

00:43:20.646 --> 00:43:23.076 A:middle
首先

00:43:23.076 --> 00:43:24.576 A:middle
事实上不要求完全访问权限

00:43:24.576 --> 00:43:26.076 A:middle
是有意义的

00:43:26.356 --> 00:43:27.626 A:middle
这就是我们最初创建了

00:43:27.626 --> 00:43:28.636 A:middle
这个完全访问权限滑块的原因

00:43:28.716 --> 00:43:30.126 A:middle
对你们来说 这并不是一个障碍

00:43:30.906 --> 00:43:32.586 A:middle
相反 Apple 的用户都是

00:43:32.586 --> 00:43:33.816 A:middle
非常注重隐私的

00:43:34.606 --> 00:43:35.946 A:middle
另外 你们的键盘已经

00:43:35.946 --> 00:43:36.896 A:middle
提供了很多很棒的

00:43:36.896 --> 00:43:37.806 A:middle
功能 一打开就可以用到

00:43:37.806 --> 00:43:39.676 A:middle
即使没有完全访问权限

00:43:39.826 --> 00:43:40.776 A:middle
所以 允许完全访问权限应当只是

00:43:40.776 --> 00:43:42.146 A:middle
对于你现在的功能

00:43:42.146 --> 00:43:42.696 A:middle
的一个补充

00:43:43.066 --> 00:43:44.396 A:middle
你可能需要用到

00:43:44.396 --> 00:43:46.476 A:middle
完全访问权限的一个例子

00:43:46.636 --> 00:43:47.826 A:middle
是与你的主要 App

00:43:47.826 --> 00:43:48.086 A:middle
沟通

00:43:48.866 --> 00:43:49.646 A:middle
如果你需要在

00:43:49.646 --> 00:43:51.376 A:middle
你的主要 App 和

00:43:51.376 --> 00:43:52.346 A:middle
你的自定义键盘扩展之间构建一个桥梁

00:43:52.346 --> 00:43:53.736 A:middle
如果你想访问

00:43:53.736 --> 00:43:54.796 A:middle
一个数据库或者

00:43:54.796 --> 00:43:55.786 A:middle
你之前存储的内容的话

00:43:56.046 --> 00:43:57.256 A:middle
你需要为此请求

00:43:57.256 --> 00:43:57.906 A:middle
完全访问权限

00:43:59.046 --> 00:44:00.296 A:middle
如果你想访问

00:43:59.046 --> 00:44:00.296 A:middle
如果你想访问

00:44:00.666 --> 00:44:02.236 A:middle
如果你想为你的用户

00:44:02.236 --> 00:44:03.776 A:middle
提供一个 GIF 图库

00:44:03.776 --> 00:44:05.636 A:middle
举个例子 那么你

00:44:05.636 --> 00:44:07.936 A:middle
需要请求完全访问权限

00:44:07.936 --> 00:44:09.596 A:middle
来获得在 iOS 上访问网络堆栈

00:44:09.596 --> 00:44:10.336 A:middle
的权限

00:44:12.016 --> 00:44:14.026 A:middle
对于当前位置

00:44:14.026 --> 00:44:15.456 A:middle
如果你想要丰富你的

00:44:15.456 --> 00:44:17.266 A:middle
自动补全功能

00:44:17.266 --> 00:44:18.836 A:middle
通过提供用户在正在输入的文本中

00:44:18.836 --> 00:44:20.776 A:middle
所可能用到的位置的话

00:44:20.776 --> 00:44:22.486 A:middle
你需要为获得当前位置

00:44:22.486 --> 00:44:24.006 A:middle
请求完全访问

00:44:24.006 --> 00:44:24.926 A:middle
权限

00:44:25.106 --> 00:44:26.346 A:middle
并且你还需要让

00:44:26.346 --> 00:44:29.096 A:middle
用户允许你的主要 App

00:44:29.096 --> 00:44:30.176 A:middle
访问当前位置

00:44:30.326 --> 00:44:31.136 A:middle
因此 请牢记这一点

00:44:31.706 --> 00:44:34.576 A:middle
对于通讯录

00:44:34.576 --> 00:44:35.906 A:middle
大部分的 App 其实并不需要用到它

00:44:35.906 --> 00:44:37.206 A:middle
因为我刚才说过的

00:44:37.206 --> 00:44:39.046 A:middle
Supplementary Lexicon 功能

00:44:39.276 --> 00:44:40.766 A:middle
所以你并不需要

00:44:40.766 --> 00:44:41.746 A:middle
完全访问权限

00:44:41.746 --> 00:44:41.986 A:middle
来获得通讯录

00:44:42.366 --> 00:44:43.446 A:middle
但是 如果你想要访问

00:44:43.446 --> 00:44:44.666 A:middle
通讯录的更多信息

00:44:44.666 --> 00:44:46.516 A:middle
比如备注部分 或者昵称

00:44:46.516 --> 00:44:47.246 A:middle
等等

00:44:47.496 --> 00:44:48.446 A:middle
那么你就需要完全访问权限

00:44:48.446 --> 00:44:49.886 A:middle
来取得了

00:44:50.066 --> 00:44:51.326 A:middle
最后 确保你的

00:44:51.326 --> 00:44:52.726 A:middle
键盘在没有完全访问权限的情况下

00:44:52.726 --> 00:44:53.996 A:middle
也可以工作

00:44:54.386 --> 00:44:55.676 A:middle
正如我说的

00:44:55.676 --> 00:44:57.416 A:middle
不请求完全访问权限也是很有意义的

00:44:58.746 --> 00:44:59.996 A:middle
另外 如果你的 App

00:44:59.996 --> 00:45:01.406 A:middle
不能做到这点 它可能不会被

00:44:59.996 --> 00:45:01.406 A:middle
不能做到这点 它可能不会被

00:45:01.406 --> 00:45:01.756 A:middle
允许上架

00:45:02.096 --> 00:45:03.036 A:middle
如果想了解更多信息 请看 App Store

00:45:03.036 --> 00:45:04.266 A:middle
Guidelines 关于此问题的规定

00:45:06.256 --> 00:45:07.876 A:middle
那么在我今天 不对 今晚告别你们之前

00:45:07.876 --> 00:45:09.376 A:middle
我们进行一个快速的回顾

00:45:09.376 --> 00:45:09.756 A:middle
抱歉

00:45:09.756 --> 00:45:11.886 A:middle
我又说错了

00:45:12.246 --> 00:45:13.606 A:middle
Kasia 向你们展示了如何

00:45:13.606 --> 00:45:14.476 A:middle
在考虑到键盘的情况下

00:45:14.476 --> 00:45:15.756 A:middle
设计你的 App 以及键盘

00:45:15.756 --> 00:45:16.266 A:middle
需要避免的问题

00:45:17.066 --> 00:45:18.086 A:middle
事实上我们不会说

00:45:18.086 --> 00:45:18.556 A:middle
“避免”

00:45:18.556 --> 00:45:19.906 A:middle
我们会说“拥抱你的键盘”

00:45:20.266 --> 00:45:21.426 A:middle
别试图避免

00:45:22.076 --> 00:45:23.316 A:middle
Shuchen 提到了很多

00:45:23.316 --> 00:45:24.686 A:middle
先进的功能来提高

00:45:24.686 --> 00:45:26.126 A:middle
用户体验 用一些

00:45:26.126 --> 00:45:27.506 A:middle
内置的系统键盘

00:45:27.556 --> 00:45:28.406 A:middle
你们可以从中选择

00:45:28.926 --> 00:45:31.446 A:middle
如果那还是不够

00:45:31.446 --> 00:45:32.636 A:middle
我们展示了如何创建

00:45:32.636 --> 00:45:33.936 A:middle
自定义键盘扩展和

00:45:33.936 --> 00:45:35.576 A:middle
自定义输入界面

00:45:35.576 --> 00:45:36.426 A:middle
以及如果将一个自定义输入界面转化成

00:45:36.426 --> 00:45:37.506 A:middle
键盘扩展 这实际上

00:45:37.506 --> 00:45:38.426 A:middle
比你们想象的要

00:45:38.426 --> 00:45:38.646 A:middle
简单很多

00:45:40.156 --> 00:45:41.606 A:middle
最后 记得要点赞 评论

00:45:41.606 --> 00:45:43.406 A:middle
和订阅 或者查看

00:45:43.706 --> 00:45:46.096 A:middle
我们的示例页面或 App

00:45:46.216 --> 00:45:48.816 A:middle
WWDC 17 第 242 节

00:45:49.116 --> 00:45:50.936 A:middle
今天你们所看到的所有代码

00:45:51.166 --> 00:45:52.366 A:middle
都在那里

00:45:52.726 --> 00:45:54.306 A:middle
你们今天所看到的所有示例代码

00:45:54.306 --> 00:45:55.216 A:middle
都在那里

00:45:55.506 --> 00:45:56.226 A:middle
记得去查看

00:45:56.516 --> 00:45:59.006 A:middle
有一些相关的会议视频

00:45:59.006 --> 00:46:00.566 A:middle
“The Password Autofill for Apps”

00:45:59.006 --> 00:46:00.566 A:middle
“The Password Autofill for Apps”

00:46:00.566 --> 00:46:01.366 A:middle
绝对是值得

00:46:01.366 --> 00:46:01.906 A:middle
看看的

00:46:02.266 --> 00:46:03.406 A:middle
“Mysteries of Auto Layout”

00:46:03.406 --> 00:46:05.476 A:middle
对避免键盘

00:46:05.476 --> 00:46:06.836 A:middle
或者应该说拥抱键盘 也是很有用的

00:46:07.666 --> 00:46:07.976 A:middle
谢谢
