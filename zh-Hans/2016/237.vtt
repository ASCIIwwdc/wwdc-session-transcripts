WEBVTT

00:00:19.419 --> 00:00:26.426
<c.magenta>CareKit开发入门</c>

00:00:35.502 --> 00:00:37.237
<c.magenta>谢谢 大家下午好</c>

00:00:37.304 --> 00:00:39.606
<c.magenta>欢迎来到</c>
<c.magenta>“CareKit开发入门”演讲</c>

00:00:39.673 --> 00:00:41.775
<c.magenta>我叫Umer</c>
<c.magenta>CareKit团队工程师</c>

00:00:43.210 --> 00:00:45.712
<c.magenta>今天的日程包括</c>
<c.magenta>讲述CareKit的故事</c>

00:00:45.779 --> 00:00:46.813
<c.magenta>以及它的由来</c>

00:00:47.281 --> 00:00:48.482
<c.magenta>介绍其中一个应用</c>

00:00:48.549 --> 00:00:51.451
<c.magenta>分析它如何使用CareKit</c>
<c.magenta>来提升就医体验</c>

00:00:52.286 --> 00:00:55.455
<c.magenta>了解CareKit架构</c>
<c.magenta>并以此创建一个应用</c>

00:00:55.923 --> 00:00:58.725
<c.magenta>演示一个定制的CareKit应用</c>

00:00:59.326 --> 00:01:02.629
<c.magenta>最后 Apple和开发者社区</c>

00:00:59.326 --> 00:01:02.629
<c.magenta>最后 Apple和开发者社区</c>

00:01:02.696 --> 00:01:04.565
<c.magenta>如何同心协力</c>
<c.magenta>使它更上一个新的台阶</c>

00:01:07.000 --> 00:01:09.870
<c.magenta>在介绍CareKit之前</c>
<c.magenta>先看看它的由来</c>

00:01:12.239 --> 00:01:14.408
<c.magenta>大家可能熟悉ResearchKit</c>

00:01:14.608 --> 00:01:16.543
<c.magenta>它是我们去年发布的框架</c>

00:01:16.610 --> 00:01:19.246
<c.magenta>帮助医疗机构和研究人员</c>

00:01:19.313 --> 00:01:22.783
<c.magenta>在iPhone上进行大规模的研究</c>

00:01:24.885 --> 00:01:27.888
<c.magenta>如果有兴趣 可以参看今早的演讲</c>

00:01:27.955 --> 00:01:29.356
<c.magenta>ResearchKit新特性</c>

00:01:29.423 --> 00:01:31.124
<c.magenta>由Bunny Laden和</c>
<c.magenta>Yuen Xiou主持</c>

00:01:31.491 --> 00:01:33.093
<c.magenta>以及去年ResearchKit演讲</c>

00:01:33.160 --> 00:01:35.495
<c.magenta>由John Roll主持</c>
<c.magenta>“使用ResearchKit创建应用”</c>

00:01:38.498 --> 00:01:39.833
<c.magenta>在ResearchKit发布后的过去一年里</c>

00:01:39.900 --> 00:01:42.503
<c.magenta>我们收到了很多请求</c>
<c.magenta>希望对患者进行研究</c>

00:01:42.569 --> 00:01:45.606
<c.magenta>或者查看他们提供的医学数据</c>

00:01:45.939 --> 00:01:48.509
<c.magenta>我们开始头脑风暴</c>
<c.magenta>以病人为中心的模块</c>

00:01:49.076 --> 00:01:52.713
<c.magenta>随后我们发现</c>
<c.magenta>这些模块的应用范围</c>

00:01:52.779 --> 00:01:54.848
<c.magenta>远高于医学研究</c>

00:01:55.682 --> 00:01:59.853
<c.magenta>所以在ResearchKit基础上</c>
<c.magenta>进化出了新框架 CareKit</c>

00:02:02.756 --> 00:02:06.360
<c.magenta>CareKit是一个开源框架</c>
<c.magenta>协助医疗机构开发应用</c>

00:02:06.426 --> 00:02:09.329
<c.magenta>来帮助病人恢复治疗</c>

00:02:09.830 --> 00:02:12.332
<c.magenta>CareKit有益于</c>
<c.magenta>各种慢性和急性病治疗</c>

00:02:13.467 --> 00:02:16.270
<c.magenta>一个很好的慢性病的例子是精神疾病</c>

00:02:16.537 --> 00:02:18.438
<c.magenta>它的用药追踪极其有效</c>

00:02:18.672 --> 00:02:21.608
<c.magenta>对于抑郁和焦虑的评估</c>

00:02:21.675 --> 00:02:22.643
<c.magenta>也能做到及时反馈</c>

00:02:23.143 --> 00:02:25.612
<c.magenta>还能监督日常活动</c>

00:02:25.679 --> 00:02:29.750
<c.magenta>它能做到互助小组和入院治疗以外的</c>
<c.magenta>几乎一切事情</c>

00:02:32.186 --> 00:02:34.821
<c.magenta>另外一个例子是手术治疗</c>

00:02:34.888 --> 00:02:38.225
<c.magenta>其中最重要的是术后恢复</c>

00:02:38.692 --> 00:02:40.127
<c.magenta>我们仔细思考这个用例</c>

00:02:40.194 --> 00:02:43.096
<c.magenta>回想一下现有的就医体验</c>

00:02:46.600 --> 00:02:49.136
<c.magenta>如今 如果你离开医院或者医生</c>

00:02:49.203 --> 00:02:51.205
<c.magenta>可能会收到这样一张纸</c>

00:02:51.271 --> 00:02:53.907
<c.magenta>列举了你的术后恢复活动</c>

00:02:54.007 --> 00:02:56.210
<c.magenta>它包含了许多详细的指导说明</c>

00:02:56.276 --> 00:02:57.845
<c.magenta>随着时间推移而改变</c>

00:02:58.645 --> 00:03:01.048
<c.magenta>这方面的监管十分糟糕</c>

00:02:58.645 --> 00:03:01.048
<c.magenta>这方面的监管十分糟糕</c>

00:03:01.114 --> 00:03:03.217
<c.magenta>患者经常会陷入困惑</c>

00:03:04.251 --> 00:03:05.385
<c.magenta>由于这些计划并非动态</c>

00:03:05.452 --> 00:03:08.188
<c.magenta>因此它们不能根据情况主动调整</c>

00:03:08.255 --> 00:03:10.924
<c.magenta>最终可能导致患者再次入院</c>

00:03:11.825 --> 00:03:14.094
<c.magenta>CareKit的推出</c>
<c.magenta>就是为了解决这个问题</c>

00:03:14.161 --> 00:03:16.330
<c.magenta>拿起这一张纸</c>

00:03:16.797 --> 00:03:18.832
<c.magenta>把它变成Care Card</c>

00:03:19.933 --> 00:03:23.337
<c.magenta>Care Card</c>
<c.magenta>允许病人查看完整的治疗计划</c>

00:03:23.504 --> 00:03:26.306
<c.magenta>互动性强 动态更新</c>

00:03:26.373 --> 00:03:28.642
<c.magenta>它能实时地反馈病人的康复进展</c>

00:03:29.810 --> 00:03:31.478
<c.magenta>在开发这个模块的过程中</c>

00:03:31.545 --> 00:03:33.447
<c.magenta>我们发现了一个全新的世界</c>

00:03:33.514 --> 00:03:35.115
<c.magenta>因为iPhone提供了无限可能性</c>

00:03:35.282 --> 00:03:39.386
<c.magenta>我们又创建了另外三个模块</c>
<c.magenta>来提升病人的护理体验</c>

00:03:41.421 --> 00:03:43.023
<c.magenta>症状与测量追踪器</c>

00:03:43.090 --> 00:03:45.292
<c.magenta>记录了各种主观和客观的测量数据</c>

00:03:46.560 --> 00:03:49.296
<c.magenta>Insights概览页</c>
<c.magenta>显示了各种应用数据</c>

00:03:49.363 --> 00:03:52.199
<c.magenta>帮助病人掌握病情恢复进展</c>

00:03:53.967 --> 00:03:55.969
<c.magenta>以及连接模块 用来实现</c>

00:03:56.036 --> 00:03:58.505
<c.magenta>与家庭成员和护理团队之间的交流沟通</c>

00:04:01.175 --> 00:04:04.478
<c.magenta>我们来看看它们是如何协作</c>
<c.magenta>来提高就医体验的</c>

00:04:04.845 --> 00:04:07.314
<c.magenta>德克萨斯医疗中心是</c>
<c.magenta>CareKit早期合作伙伴</c>

00:04:07.915 --> 00:04:09.016
<c.magenta>他们运用了这些模块</c>

00:04:09.082 --> 00:04:11.351
<c.magenta>打造了一份独特的就医体验</c>

00:04:11.418 --> 00:04:13.053
<c.magenta>来看看这些模块的实际运行</c>

00:04:14.154 --> 00:04:15.923
<c.magenta>首先 你会看到一个欢迎界面</c>

00:04:15.989 --> 00:04:18.257
<c.magenta>你能创建登录账户</c>

00:04:19.059 --> 00:04:21.195
<c.magenta>我们的病人</c>
<c.magenta>John Appleseed已注册</c>

00:04:21.261 --> 00:04:22.529
<c.magenta>完成了应用配置</c>

00:04:23.864 --> 00:04:27.434
<c.magenta>John起床后收到一条提醒</c>
<c.magenta>他需要量体重</c>

00:04:29.069 --> 00:04:31.271
<c.magenta>他使用密码进入应用</c>

00:04:33.140 --> 00:04:35.175
<c.magenta>在智能秤上量完体重</c>

00:04:35.442 --> 00:04:37.177
<c.magenta>体重值被传入HealthKit</c>

00:04:37.744 --> 00:04:40.914
<c.magenta>CareKit会自动提取数据</c>

00:04:41.715 --> 00:04:43.150
<c.magenta>CareKit轻易完成</c>

00:04:43.217 --> 00:04:46.119
<c.magenta>因为它与HealthKit无缝衔接</c>

00:04:48.722 --> 00:04:50.991
<c.magenta>记录体重后</c>
<c.magenta>John进入Care Card</c>

00:04:51.058 --> 00:04:54.461
<c.magenta>查看今天的待办事项</c>

00:04:55.229 --> 00:04:58.098
<c.magenta>Care Card和</c>
<c.magenta>症状与测量追踪器</c>

00:04:58.165 --> 00:04:59.333
<c.magenta>正在自动更新内容</c>

00:04:59.399 --> 00:05:02.336
<c.magenta>从德克萨斯医疗中心的</c>
<c.magenta>ERM健康系统里提取</c>

00:04:59.399 --> 00:05:02.336
<c.magenta>从德克萨斯医疗中心的</c>
<c.magenta>ERM健康系统里提取</c>

00:05:04.705 --> 00:05:08.141
<c.magenta>John不太记得其活动之一 短走</c>
<c.magenta>的具体要求</c>

00:05:08.208 --> 00:05:09.676
<c.magenta>他点击进入那一栏</c>

00:05:09.743 --> 00:05:12.079
<c.magenta>开始浏览这项活动的说明</c>

00:05:14.948 --> 00:05:18.385
<c.magenta>John完成了第一项运动</c>
<c.magenta>接下来服用第一份药物</c>

00:05:22.489 --> 00:05:24.191
<c.magenta>他点击进入了评估卡</c>

00:05:24.258 --> 00:05:26.527
<c.magenta>查看今天需要完成的评估种类</c>

00:05:26.894 --> 00:05:28.395
<c.magenta>在症状与测量追踪器里</c>

00:05:28.462 --> 00:05:30.964
<c.magenta>他想记录下自己的术后疼痛症状</c>

00:05:31.565 --> 00:05:33.534
<c.magenta>以及一些感染的迹象</c>

00:05:34.101 --> 00:05:37.871
<c.magenta>他首先进入疼痛评估 输入了疼痛指数</c>

00:05:41.708 --> 00:05:43.977
<c.magenta>接着拍一张感染区域的照片</c>

00:05:44.044 --> 00:05:45.245
<c.magenta>上传到应用</c>

00:05:45.312 --> 00:05:47.681
<c.magenta>这一切直接在症状与测量追踪器内完成</c>

00:05:47.748 --> 00:05:49.750
<c.magenta>数据被传送到医院</c>

00:05:56.823 --> 00:05:59.159
<c.magenta>最后 他要完成一些起立行走</c>

00:05:59.593 --> 00:06:01.528
<c.magenta>当他四处走动的时候</c>

00:05:59.593 --> 00:06:01.528
<c.magenta>当他四处走动的时候</c>

00:06:01.595 --> 00:06:04.264
<c.magenta>iPhone的传感器会记录步数</c>

00:06:04.565 --> 00:06:06.433
<c.magenta>当他完成行走后</c>

00:06:06.500 --> 00:06:08.735
<c.magenta>数据会被直接传给医院</c>

00:06:13.707 --> 00:06:15.909
<c.magenta>John想打开Insights界面</c>

00:06:15.976 --> 00:06:17.811
<c.magenta>看一看过去几周的数据</c>

00:06:18.111 --> 00:06:20.347
<c.magenta>他可以看到本周的信息提示和图表</c>

00:06:20.647 --> 00:06:24.184
<c.magenta>这样视觉化的数据呈现方式</c>
<c.magenta>更加便于用户使用</c>

00:06:24.852 --> 00:06:26.954
<c.magenta>接着他切换到上一周</c>

00:06:27.454 --> 00:06:29.823
<c.magenta>对比这两周的表现</c>

00:06:34.795 --> 00:06:37.231
<c.magenta>同时他依然担心可能受到感染</c>

00:06:37.297 --> 00:06:39.166
<c.magenta>尽管已经上报过了</c>

00:06:39.233 --> 00:06:41.602
<c.magenta>他还是决定给护理人员发一条信息</c>

00:06:43.470 --> 00:06:44.938
<c.magenta>他开始创建信息</c>

00:06:45.005 --> 00:06:47.441
<c.magenta>他决定发邮件给</c>
<c.magenta>Paul Cashman医生</c>

00:06:48.275 --> 00:06:51.011
<c.magenta>他不需要再上传一次照片</c>

00:06:51.078 --> 00:06:53.280
<c.magenta>因它已被发送给Cashman医生了</c>

00:06:53.347 --> 00:06:54.948
<c.magenta>通过之前的感染评估</c>

00:06:59.553 --> 00:07:01.755
<c.magenta>当天的晚些时候</c>
<c.magenta>他收到了回复邮件</c>

00:06:59.553 --> 00:07:01.755
<c.magenta>当天的晚些时候</c>
<c.magenta>他收到了回复邮件</c>

00:07:01.822 --> 00:07:03.524
<c.magenta>医疗团队成员</c>
<c.magenta>Paul Cashman医生</c>

00:07:03.590 --> 00:07:04.858
<c.magenta>他重新进入应用</c>

00:07:04.925 --> 00:07:07.561
<c.magenta>阅读医生的信息</c>

00:07:09.229 --> 00:07:13.133
<c.magenta>德克萨斯医疗中心就是这样使用</c>
<c.magenta>CareKit创建出一个应用</c>

00:07:13.200 --> 00:07:16.537
<c.magenta>打造了闭环的就医体验</c>

00:07:23.076 --> 00:07:26.647
<c.magenta>谢谢</c>
<c.magenta>我们来看看创建类似应用需要的步骤</c>

00:07:27.814 --> 00:07:30.551
<c.magenta>这是四种前端模块 我们已经见过了</c>

00:07:31.218 --> 00:07:32.920
<c.magenta>再加上两个后台的模块</c>

00:07:32.986 --> 00:07:35.055
<c.magenta>Care Plan Store和</c>
<c.magenta>Document Exporter</c>

00:07:35.689 --> 00:07:38.959
<c.magenta>我们先从Care Plan Store</c>
<c.magenta>开始介绍</c>

00:07:40.360 --> 00:07:42.796
<c.magenta>Care Plan Store</c>
<c.magenta>由活动和事件组成</c>

00:07:43.430 --> 00:07:46.033
<c.magenta>我们先解释活动和事件的含义</c>

00:07:46.867 --> 00:07:49.203
<c.magenta>然后创建一个活动</c>
<c.magenta>添加到store里</c>

00:07:49.636 --> 00:07:52.005
<c.magenta>寻找活动和事件的关系</c>

00:07:52.072 --> 00:07:53.807
<c.magenta>最后把它们集成到UI里面</c>

00:07:55.509 --> 00:07:57.244
<c.magenta>若仔细看这张Care Card</c>

00:07:57.477 --> 00:08:00.347
<c.magenta>我们可以想象出活动和事件的含义</c>

00:07:57.477 --> 00:08:00.347
<c.magenta>我们可以想象出活动和事件的含义</c>

00:08:01.014 --> 00:08:02.482
<c.magenta>以ibuprofen为例</c>

00:08:03.150 --> 00:08:05.686
<c.magenta>Ibuprofen 200mg</c>
<c.magenta>是一个活动</c>

00:08:05.752 --> 00:08:08.288
<c.magenta>下面的圆圈代表事件</c>

00:08:10.657 --> 00:08:13.994
<c.magenta>活动和事件一起构成了</c>
<c.magenta>Care Plan Store</c>

00:08:16.296 --> 00:08:17.464
<c.magenta>这是一次活动</c>

00:08:17.531 --> 00:08:19.433
<c.magenta>我们创建这个ibuprofen活动</c>

00:08:19.733 --> 00:08:22.002
<c.magenta>先创建一个标识符</c>

00:08:22.069 --> 00:08:24.238
<c.magenta>这里使用的是</c>
<c.magenta>ibuprofenMedication</c>

00:08:24.571 --> 00:08:27.541
<c.magenta>它能独特地标识出这个活动</c>

00:08:28.542 --> 00:08:31.111
<c.magenta>接着创建群组标识符</c>
<c.magenta>来标识不同的活动</c>

00:08:31.178 --> 00:08:33.280
<c.magenta>方便以后在后台被调用</c>

00:08:34.481 --> 00:08:35.982
<c.magenta>标题是Ibuprofen</c>

00:08:36.049 --> 00:08:37.518
<c.magenta>内容是200 mg</c>

00:08:37.851 --> 00:08:39.385
<c.magenta>这些属性直接面向用户</c>

00:08:39.453 --> 00:08:41.855
<c.magenta>请确保它们的准确性</c>

00:08:43.624 --> 00:08:46.660
<c.magenta>tintColor可以是任何UI颜色</c>
<c.magenta>我们选择蓝色</c>

00:08:47.027 --> 00:08:48.529
<c.magenta>除了选择填充色</c>

00:08:48.595 --> 00:08:51.465
<c.magenta>CareKit还提供其它自定义选项</c>

00:08:51.532 --> 00:08:53.133
<c.magenta>我们稍后会讨论到</c>

00:08:54.535 --> 00:08:57.571
<c.magenta>我最关心两个属性</c>
<c.magenta>类型和时刻表</c>

00:08:58.305 --> 00:09:01.675
<c.magenta>类型决定了活动的类型</c>

00:08:58.305 --> 00:09:01.675
<c.magenta>类型决定了活动的类型</c>

00:09:01.875 --> 00:09:04.211
<c.magenta>举个例子</c>
<c.magenta>我们有干涉</c>

00:09:04.278 --> 00:09:05.646
<c.magenta>它属于Care Card模块</c>

00:09:06.413 --> 00:09:09.249
<c.magenta>还有评估</c>
<c.magenta>它显示在症状与测量追踪器下</c>

00:09:11.185 --> 00:09:12.986
<c.magenta>因为我们创建的是一个服药活动</c>

00:09:13.053 --> 00:09:14.288
<c.magenta>它属于Care Card模块</c>

00:09:14.354 --> 00:09:16.356
<c.magenta>所以 活动类型是</c>
<c.magenta>干涉</c>

00:09:18.725 --> 00:09:20.360
<c.magenta>接下来看一看时刻表</c>

00:09:20.594 --> 00:09:24.498
<c.magenta>时刻表决定了</c>
<c.magenta>活动发生的频率和时间</c>

00:09:25.666 --> 00:09:29.136
<c.magenta>有三种方法定义时刻表</c>

00:09:29.336 --> 00:09:31.672
<c.magenta>每天的日程</c>
<c.magenta>每周的日程</c>

00:09:31.738 --> 00:09:33.473
<c.magenta>你还可以创建自定义的日程</c>

00:09:34.007 --> 00:09:35.275
<c.magenta>你可以定义频率</c>

00:09:35.342 --> 00:09:38.111
<c.magenta>来指定每天的活动次数</c>

00:09:38.812 --> 00:09:40.948
<c.magenta>听起来有点麻烦</c>
<c.magenta>其实很简单</c>

00:09:41.014 --> 00:09:42.082
<c.magenta>我们来简化它</c>

00:09:43.016 --> 00:09:45.052
<c.magenta>我们来给活动定义一个日程</c>

00:09:46.854 --> 00:09:47.955
<c.magenta>这是一个周计划</c>

00:09:48.021 --> 00:09:52.326
<c.magenta>我们希望病人在周一 周三 周五服药</c>

00:09:53.327 --> 00:09:55.329
<c.magenta>再定义一个频率</c>

00:09:55.529 --> 00:09:56.697
<c.magenta>周一服用四次</c>

00:09:56.763 --> 00:09:58.932
<c.magenta>周三两次 周五四次</c>

00:10:00.033 --> 00:10:03.370
<c.magenta>综合起来</c>
<c.magenta>就组成了活动的一个日程对象</c>

00:10:04.571 --> 00:10:07.841
<c.magenta>现在这项完整活动可被添加给</c>
<c.magenta>Care Plan Store</c>

00:10:08.876 --> 00:10:11.178
<c.magenta>接下来我们学习如何使用代码</c>
<c.magenta>创建Care Plan Store</c>

00:10:11.245 --> 00:10:12.679
<c.magenta>在把这项活动添加进去之前</c>

00:10:12.846 --> 00:10:15.115
<c.magenta>我们快速学习一下事件的定义</c>

00:10:15.582 --> 00:10:19.386
<c.magenta>事件不是由开发者直接初始化的</c>

00:10:19.453 --> 00:10:21.855
<c.magenta>其实它是由Care Plan Store</c>
<c.magenta>自动创建的</c>

00:10:22.222 --> 00:10:24.224
<c.magenta>为了深入了解创建的过程</c>

00:10:24.291 --> 00:10:26.193
<c.magenta>我们回到刚才的日程</c>

00:10:26.894 --> 00:10:30.397
<c.magenta>一个日程对象会根据自定义的频率</c>
<c.magenta>生成不同的事件</c>

00:10:30.464 --> 00:10:35.169
<c.magenta>举个例子 我们有四次事件在星期一</c>

00:10:35.235 --> 00:10:37.204
<c.magenta>因此 有四次事件在6月20日</c>

00:10:37.437 --> 00:10:40.574
<c.magenta>两次事件在星期三</c>
<c.magenta>所以两次事件在6月22日</c>

00:10:40.641 --> 00:10:42.376
<c.magenta>以此类推</c>

00:10:42.442 --> 00:10:44.645
<c.magenta>要停止事件的继续生成</c>

00:10:44.711 --> 00:10:46.046
<c.magenta>需要定义截止日期</c>

00:10:46.113 --> 00:10:47.781
<c.magenta>一旦为活动定义了截止日期</c>

00:10:47.848 --> 00:10:50.150
<c.magenta>Care Plan Store</c>
<c.magenta>会停止生成事件</c>

00:10:51.885 --> 00:10:53.720
<c.magenta>即使开发者没有直接创建事件</c>

00:10:53.787 --> 00:10:55.722
<c.magenta>他也提供了很多有用信息</c>

00:10:55.923 --> 00:10:58.525
<c.magenta>从事件对象你可以得到具体日期</c>

00:10:58.692 --> 00:11:00.928
<c.magenta>可以看到事件的状态 比如初始状态</c>

00:10:58.692 --> 00:11:00.928
<c.magenta>可以看到事件的状态 比如初始状态</c>

00:11:00.994 --> 00:11:04.498
<c.magenta>代表用户还没有调用它</c>
<c.magenta>它可能被完成了 也可能没有</c>

00:11:05.232 --> 00:11:08.035
<c.magenta>结果对象包含了完成的状态</c>

00:11:08.101 --> 00:11:10.204
<c.magenta>它是什么时候被完成的</c>

00:11:10.270 --> 00:11:12.606
<c.magenta>以及其它相关的信息</c>

00:11:12.973 --> 00:11:16.210
<c.magenta>还有这个指针 它指向了这次事件</c>

00:11:17.945 --> 00:11:20.247
<c.magenta>在Care Plan Store里</c>
<c.magenta>活动生成事件</c>

00:11:20.314 --> 00:11:23.917
<c.magenta>组合在一起</c>
<c.magenta>构成Care Plan Store</c>

00:11:23.984 --> 00:11:25.752
<c.magenta>我们来看看具体的代码</c>

00:11:26.920 --> 00:11:29.489
<c.magenta>创建Care Plan Store</c>
<c.magenta>步骤非常简单</c>

00:11:29.556 --> 00:11:30.691
<c.magenta>先定义一个变量</c>

00:11:30.757 --> 00:11:34.661
<c.magenta>我的变量是myCarePlanStore</c>
<c.magenta>类型是OCKCarePlanStore</c>

00:11:35.429 --> 00:11:37.497
<c.magenta>再定义一个永久的URL链接</c>

00:11:37.564 --> 00:11:40.467
<c.magenta>在这里我使用了应用的文档目录</c>

00:11:42.336 --> 00:11:44.371
<c.magenta>再使用URL进行初始化</c>

00:11:44.438 --> 00:11:46.440
<c.magenta>就得到了可用的</c>
<c.magenta>Care Plan Store</c>

00:11:48.942 --> 00:11:52.179
<c.magenta>现在我们把刚创建的</c>
<c.magenta>ibuprofen活动添加进去</c>

00:11:52.479 --> 00:11:53.981
<c.magenta>首先创建一个日程对象</c>

00:11:54.047 --> 00:11:57.050
<c.magenta>设定开始日期为今年年初</c>

00:11:57.217 --> 00:11:58.619
<c.magenta>然后使用一个周日程</c>

00:11:58.685 --> 00:12:00.954
<c.magenta>我们可以用数组来记录事件的频率</c>

00:11:58.685 --> 00:12:00.954
<c.magenta>我们可以用数组来记录事件的频率</c>

00:12:01.021 --> 00:12:02.689
<c.magenta>也就是每天发生的次数</c>

00:12:02.956 --> 00:12:04.791
<c.magenta>举个例子</c>
<c.magenta>我们的数组从周日开始</c>

00:12:04.858 --> 00:12:08.695
<c.magenta>周日为0 周一为4 周二为0</c>

00:12:09.096 --> 00:12:10.364
<c.magenta>以此类推</c>

00:12:12.399 --> 00:12:15.435
<c.magenta>定义好了日程对象</c>
<c.magenta>就可以初始化care plan活动</c>

00:12:15.969 --> 00:12:17.671
<c.magenta>再定义一个标识符</c>
<c.magenta>一个群组标识符</c>

00:12:17.738 --> 00:12:19.573
<c.magenta>以及其它所有的参数</c>

00:12:19.640 --> 00:12:23.177
<c.magenta>其中两个参数我们尚未讨论</c>
<c.magenta>instructions和imageURL</c>

00:12:23.443 --> 00:12:25.646
<c.magenta>它们被用来描述活动的细节</c>

00:12:25.712 --> 00:12:28.415
<c.magenta>如 当John Appleseed</c>
<c.magenta>点击“短走”</c>

00:12:28.482 --> 00:12:30.417
<c.magenta>他可以看到具体的说明</c>

00:12:30.484 --> 00:12:33.887
<c.magenta>我们也需额外信息描述</c>
<c.magenta>ibuprofen及图片说明</c>

00:12:33.954 --> 00:12:36.456
<c.magenta>等下在Care Card里</c>
<c.magenta>就能看到其具体模样</c>

00:12:37.658 --> 00:12:39.826
<c.magenta>要把这个活动添加到</c>
<c.magenta>Care Plan Store</c>

00:12:39.893 --> 00:12:42.396
<c.magenta>我们只需调用一个添加函数</c>
<c.magenta>然后传递创建好的活动</c>

00:12:42.462 --> 00:12:45.766
<c.magenta>最后使用completionHandler</c>
<c.magenta>处理异常情况</c>

00:12:47.901 --> 00:12:51.004
<c.magenta>以上即如何创建Care Plan Store</c>
<c.magenta>及如何向它添加活动</c>

00:12:51.271 --> 00:12:54.541
<c.magenta>我们来看看如何把它们的数据</c>
<c.magenta>呈现在Care Card上</c>

00:12:56.343 --> 00:12:58.712
<c.magenta>创建Care Plan Store</c>
<c.magenta>和添加活动是最难的部分</c>

00:12:58.779 --> 00:13:01.815
<c.magenta>呈现在Care Card上</c>
<c.magenta>相对简单和直接很多</c>

00:12:58.779 --> 00:13:01.815
<c.magenta>呈现在Care Card上</c>
<c.magenta>相对简单和直接很多</c>

00:13:03.483 --> 00:13:06.987
<c.magenta>这就是我们添加的活动</c>
<c.magenta>注意它的活动类型</c>

00:13:07.054 --> 00:13:09.456
<c.magenta>它属于干涉</c>
<c.magenta>因我们已把它设置成干涉</c>

00:13:09.523 --> 00:13:12.192
<c.magenta>Care Plan Store自动</c>
<c.magenta>将它显示在Care Card上</c>

00:13:13.193 --> 00:13:14.628
<c.magenta>要创建一个Care Card</c>

00:13:14.695 --> 00:13:18.065
<c.magenta>需要先初始化CareCardViewController</c>
<c.magenta>使用carePlanStore对象</c>

00:13:18.999 --> 00:13:20.934
<c.magenta>把它内嵌到NavigationController</c>

00:13:21.001 --> 00:13:24.371
<c.magenta>这一步很必要 因为它能提供</c>
<c.magenta>barButtonItem</c>

00:13:24.438 --> 00:13:26.073
<c.magenta>用来操控日历</c>

00:13:26.139 --> 00:13:29.443
<c.magenta>以及将信息推送到导航堆栈上</c>

00:13:30.377 --> 00:13:31.645
<c.magenta>现在可以直接将其显示</c>

00:13:32.045 --> 00:13:33.947
<c.magenta>也可以把它内嵌到</c>
<c.magenta>tabBarController</c>

00:13:34.114 --> 00:13:37.351
<c.magenta>仅仅三行代码</c>
<c.magenta>我们就生成了一个Care Card</c>

00:13:44.791 --> 00:13:47.160
<c.magenta>这里你能看到</c>
<c.magenta>我们拥有ibuprofen活动</c>

00:13:47.227 --> 00:13:49.162
<c.magenta>和其它建好的一些活动</c>

00:13:49.863 --> 00:13:52.065
<c.magenta>我们看看这个UI的其它部分</c>

00:13:52.132 --> 00:13:53.600
<c.magenta>了解它们的具体作用</c>

00:13:54.268 --> 00:13:56.737
<c.magenta>headerView</c>
<c.magenta>显示了本周活动的预览</c>

00:13:56.803 --> 00:13:59.239
<c.magenta>你可以左右滑动切换到另一周</c>

00:13:59.406 --> 00:14:02.109
<c.magenta>你可以选择特定日期查看当天的细节</c>

00:13:59.406 --> 00:14:02.109
<c.magenta>你可以选择特定日期查看当天的细节</c>

00:14:02.543 --> 00:14:05.179
<c.magenta>心型图案是由程序自动计算和更新的</c>

00:14:05.245 --> 00:14:07.347
<c.magenta>根据Care Plan Store</c>
<c.magenta>现有信息</c>

00:14:08.148 --> 00:14:10.551
<c.magenta>心型图案和填充颜色都可以定制</c>

00:14:10.817 --> 00:14:13.954
<c.magenta>你可以选择更适合的图片</c>

00:14:14.021 --> 00:14:16.690
<c.magenta>也可以改变填充色来搭配自定义图片</c>

00:14:16.757 --> 00:14:20.093
<c.magenta>等会儿我们将展示一个自定义的</c>
<c.magenta>Care Card</c>

00:14:22.429 --> 00:14:23.964
<c.magenta>标头下面是治疗方案</c>

00:14:24.031 --> 00:14:27.267
<c.magenta>它包含了当天要完成的干预治疗</c>

00:14:27.734 --> 00:14:31.171
<c.magenta>每次从Care Plan Store里</c>
<c.magenta>添加或删除活动</c>

00:14:31.238 --> 00:14:32.840
<c.magenta>这个UI也会自动更新</c>

00:14:32.906 --> 00:14:35.609
<c.magenta>开发者不需要额外的工作</c>

00:14:37.778 --> 00:14:39.980
<c.magenta>这是我们刚添加的</c>
<c.magenta>ibuprofen活动</c>

00:14:40.547 --> 00:14:42.015
<c.magenta>点击这一栏</c>

00:14:42.082 --> 00:14:45.352
<c.magenta>你将进入详细信息页</c>
<c.magenta>包括具体的用法说明</c>

00:14:45.652 --> 00:14:47.120
<c.magenta>以及药物的图片</c>

00:14:47.187 --> 00:14:50.257
<c.magenta>方便用户把它和其他药物区分开来</c>

00:14:53.827 --> 00:14:55.896
<c.magenta>我们看一种不同的干预治疗</c>

00:14:56.196 --> 00:14:58.665
<c.magenta>这个项目要求病人起立行走</c>

00:14:59.132 --> 00:15:02.269
<c.magenta>点击进去</c>
<c.magenta>用户就可以自行完成病情报告</c>

00:14:59.132 --> 00:15:02.269
<c.magenta>点击进去</c>
<c.magenta>用户就可以自行完成病情报告</c>

00:15:03.537 --> 00:15:07.007
<c.magenta>也可以通过Apple Watch</c>
<c.magenta>的传感器自动更新</c>

00:15:07.674 --> 00:15:09.276
<c.magenta>这正好引出下一点</c>

00:15:09.343 --> 00:15:10.978
<c.magenta>我们如何更新这些事件？</c>

00:15:11.912 --> 00:15:14.715
<c.magenta>有多种方法</c>
<c.magenta>其中之一 用户自主报告</c>

00:15:14.781 --> 00:15:16.049
<c.magenta>比如服药追踪</c>

00:15:16.116 --> 00:15:18.285
<c.magenta>患者可以报告服药状态</c>

00:15:18.819 --> 00:15:21.722
<c.magenta>他们可以在完成任务后</c>
<c.magenta>将其标注为完成</c>

00:15:21.788 --> 00:15:23.624
<c.magenta>如ResearchKit活动任务</c>

00:15:24.725 --> 00:15:27.761
<c.magenta>还可以通过设备的传感器自动更新</c>

00:15:27.828 --> 00:15:30.731
<c.magenta>比如Apple Watch或</c>
<c.magenta>iPhone的HealthKit</c>

00:15:32.766 --> 00:15:33.867
<c.magenta>这就是Care Card</c>

00:15:33.967 --> 00:15:35.302
<c.magenta>它是一个互动的治疗计划</c>

00:15:35.369 --> 00:15:38.338
<c.magenta>使用Care Plan Store</c>
<c.magenta>规划活动和事件</c>

00:15:38.405 --> 00:15:41.141
<c.magenta>帮助用户实时监控每日病情进展</c>

00:15:43.343 --> 00:15:44.611
<c.magenta>就如Care Card一样</c>

00:15:45.045 --> 00:15:47.848
<c.magenta>“症状与测量追踪器”也使用了</c>
<c.magenta>Care Plan Store</c>

00:15:47.915 --> 00:15:50.484
<c.magenta>来记录主观和客观的病情测量数据</c>

00:15:51.618 --> 00:15:53.320
<c.magenta>添加评估的过程</c>

00:15:53.387 --> 00:15:57.291
<c.magenta>和添加ibuprofen活动的过程</c>
<c.magenta>十分相似</c>

00:15:57.591 --> 00:16:01.728
<c.magenta>如果添加一个后背的痛感调查</c>

00:15:57.591 --> 00:16:01.728
<c.magenta>如果添加一个后背的痛感调查</c>

00:16:02.362 --> 00:16:04.598
<c.magenta>它的代码和创建这个几乎一样</c>

00:16:04.665 --> 00:16:07.434
<c.magenta>假设它已被加入了</c>
<c.magenta>Care Plan Store</c>

00:16:08.168 --> 00:16:10.204
<c.magenta>我们来看看如何创建症状追踪器</c>

00:16:10.270 --> 00:16:11.805
<c.magenta>来展示这个评估</c>

00:16:12.539 --> 00:16:15.442
<c.magenta>像Care Card一样</c>
<c.magenta>先初始化symptomTrackerViewController</c>

00:16:15.509 --> 00:16:16.944
<c.magenta>使用Care Plan Store</c>
<c.magenta>对象</c>

00:16:17.411 --> 00:16:20.280
<c.magenta>这里可以使用代理函数</c>
<c.magenta>我等下会讲到</c>

00:16:20.480 --> 00:16:22.816
<c.magenta>然后把它内嵌到</c>
<c.magenta>NavigationController</c>

00:16:23.283 --> 00:16:25.819
<c.magenta>然后把它展示出来</c>
<c.magenta>效果就像这样</c>

00:16:27.187 --> 00:16:28.622
<c.magenta>如果我们分解这个UI</c>

00:16:29.556 --> 00:16:32.559
<c.magenta>headerView包含了</c>
<c.magenta>和Care Card一样的导航模式</c>

00:16:32.626 --> 00:16:34.628
<c.magenta>你可以左右滑动来切换至另一周</c>

00:16:34.695 --> 00:16:36.964
<c.magenta>选择具体日期 来显示当日详细信息</c>

00:16:37.631 --> 00:16:39.633
<c.magenta>当我们正在完成当天的评估时</c>

00:16:39.700 --> 00:16:42.135
<c.magenta>这个环形的图表 可以显示当前的进展</c>

00:16:42.202 --> 00:16:44.471
<c.magenta>一旦全部完成 图表会自动打勾</c>

00:16:44.538 --> 00:16:46.907
<c.magenta>这表示当天的评估已经全部完成</c>

00:16:47.307 --> 00:16:50.944
<c.magenta>图表和勾号的颜色都是可以自定义的</c>

00:16:52.746 --> 00:16:55.916
<c.magenta>在这下面 是今天待完成的评估列表</c>

00:16:55.983 --> 00:16:58.719
<c.magenta>评估多种多样</c>
<c.magenta>我们来看看其中一些</c>

00:16:59.686 --> 00:17:00.754
<c.magenta>这是一个痛感调查</c>

00:16:59.686 --> 00:17:00.754
<c.magenta>这是一个痛感调查</c>

00:17:00.821 --> 00:17:03.290
<c.magenta>要实现它 我们可调用</c>
<c.magenta>ResearchKit的调查模块</c>

00:17:03.357 --> 00:17:05.259
<c.magenta>来呈现出精心设计的调查表</c>

00:17:06.359 --> 00:17:07.528
<c.magenta>它们也可以是活动任务</c>

00:17:08.028 --> 00:17:10.664
<c.magenta>你可以进行点击测验</c>
<c.magenta>或者创建自定义活动</c>

00:17:10.731 --> 00:17:12.999
<c.magenta>使用ResearchKit</c>
<c.magenta>如“运动范围”</c>

00:17:14.367 --> 00:17:17.003
<c.magenta>它也可是自主报告的</c>
<c.magenta>你可为客户展示viewController</c>

00:17:17.069 --> 00:17:19.306
<c.magenta>就像德克萨斯医疗中心应用所做的一样</c>

00:17:19.373 --> 00:17:22.709
<c.magenta>请求用户拍摄感染图片并传回医院</c>

00:17:23.676 --> 00:17:26.280
<c.magenta>传回的也可以是任何类型数据</c>
<c.magenta>如HealthKit或Bluetooth设备</c>

00:17:26.346 --> 00:17:28.415
<c.magenta>在德克萨斯医疗中心应用里</c>

00:17:28.482 --> 00:17:30.517
<c.magenta>John使用了智能体重计</c>

00:17:30.584 --> 00:17:32.753
<c.magenta>自动上传了数据</c>
<c.magenta>更新CareKit应用</c>

00:17:34.788 --> 00:17:35.923
<c.magenta>代理函数就在这里派上了用场</c>

00:17:35.989 --> 00:17:37.658
<c.magenta>为了更好地展示评估结果</c>

00:17:37.724 --> 00:17:39.760
<c.magenta>我们需要实现症状追踪器的代理功能</c>

00:17:39.826 --> 00:17:40.994
<c.magenta>为开发者提供回调函数</c>

00:17:41.061 --> 00:17:43.864
<c.magenta>每当用户点击评估栏时被调用</c>

00:17:44.198 --> 00:17:47.067
<c.magenta>这个回调函数会返回一个评估事件</c>

00:17:47.134 --> 00:17:50.604
<c.magenta>你可决定使用哪个视图控制器</c>
<c.magenta>呈现这个事件</c>

00:17:53.073 --> 00:17:55.976
<c.magenta>如果你想显示一个痛感调查事件</c>

00:17:56.043 --> 00:17:58.979
<c.magenta>首先你需要使用它的数据计算疼痛数值</c>

00:18:00.414 --> 00:18:01.982
<c.magenta>然后创建一个结果对象</c>

00:18:02.049 --> 00:18:06.220
<c.magenta>记下它的数值和单位</c>

00:18:06.286 --> 00:18:10.224
<c.magenta>如果你要添加其它额外信息</c>
<c.magenta>你还必须更新userInfo目录</c>

00:18:11.225 --> 00:18:13.493
<c.magenta>在Care Plan Store里</c>
<c.magenta>更新这项事件</c>

00:18:13.560 --> 00:18:15.896
<c.magenta>以及它的结果对象 事件的当前状态</c>

00:18:15.963 --> 00:18:18.465
<c.magenta>最后使用completionHandler</c>
<c.magenta>处理异常情况</c>

00:18:20.167 --> 00:18:21.735
<c.magenta>汇总所有的信息</c>

00:18:22.035 --> 00:18:24.538
<c.magenta>你最后看到的就是</c>
<c.magenta>症状与测量追踪器</c>

00:18:30.277 --> 00:18:32.412
<c.magenta>Insights概览页能调用</c>
<c.magenta>Care Plan Store数据</c>

00:18:32.479 --> 00:18:33.680
<c.magenta>生成信息和图表</c>

00:18:34.248 --> 00:18:38.018
<c.magenta>方便用户更好地理解数据</c>

00:18:38.352 --> 00:18:41.989
<c.magenta>为了让开发者更容易生成它们</c>

00:18:42.055 --> 00:18:43.657
<c.magenta>我们推出了insight部件</c>

00:18:43.724 --> 00:18:46.193
<c.magenta>能导入它们到Insights概览页</c>

00:18:46.260 --> 00:18:49.129
<c.magenta>它们包括各种信息</c>
<c.magenta>比如提示和警告</c>

00:18:49.563 --> 00:18:50.664
<c.magenta>它们也可以是图表</c>

00:18:50.731 --> 00:18:53.133
<c.magenta>如从CareKit引进的分组条形表</c>

00:18:53.200 --> 00:18:54.334
<c.magenta>以及各种自定义的图表</c>

00:18:54.401 --> 00:18:56.403
<c.magenta>比如 ResearchKit的图表</c>

00:18:56.470 --> 00:18:59.006
<c.magenta>能够轻易地被转换成</c>
<c.magenta>我们需要的图表对象</c>

00:19:01.108 --> 00:19:03.343
<c.magenta>我们看看这个概览页里</c>
<c.magenta>包括的insight部件</c>

00:19:04.545 --> 00:19:06.813
<c.magenta>这是一个用药追踪的信息部件</c>

00:19:06.880 --> 00:19:09.349
<c.magenta>信息部件能鼓励用户完成治疗任务</c>

00:19:09.416 --> 00:19:11.818
<c.magenta>通过推送重要信息的方式</c>

00:19:12.186 --> 00:19:14.288
<c.magenta>这个信息部件使用</c>
<c.magenta>Care Plan Store数据</c>

00:19:14.354 --> 00:19:16.990
<c.magenta>计算出上周服用ibuprofen</c>
<c.magenta>的遵循度</c>

00:19:17.424 --> 00:19:19.693
<c.magenta>这些信息也能通过远程服务器生成</c>

00:19:19.760 --> 00:19:21.695
<c.magenta>传递到Insights概览页</c>

00:19:22.863 --> 00:19:25.732
<c.magenta>我们来看看代码</c>
<c.magenta>如何向后台store请求数据</c>

00:19:26.366 --> 00:19:28.936
<c.magenta>在这里你可以指定开始日期和截止日期</c>

00:19:29.269 --> 00:19:31.471
<c.magenta>我使用上个星期天</c>

00:19:31.538 --> 00:19:34.107
<c.magenta>和之后的星期六</c>
<c.magenta>分别作为开始和截止日期</c>

00:19:35.342 --> 00:19:37.277
<c.magenta>然后调用</c>
<c.magenta>enumerateEvents函数</c>

00:19:37.344 --> 00:19:38.378
<c.magenta>在Care Plan Store上</c>

00:19:38.445 --> 00:19:40.714
<c.magenta>标注我们想要枚举的活动</c>

00:19:40.781 --> 00:19:43.050
<c.magenta>以及枚举的日期</c>

00:19:43.417 --> 00:19:47.054
<c.magenta>随后活动的的事件</c>
<c.magenta>被返回给handler</c>

00:19:47.487 --> 00:19:50.057
<c.magenta>我们可以枚举这些事件</c>
<c.magenta>查看它们的状态</c>

00:19:50.123 --> 00:19:53.026
<c.magenta>判定它们是否被完成</c>
<c.magenta>计算执行度</c>

00:19:55.562 --> 00:19:59.333
<c.magenta>完成了执行度计算之后</c>
<c.magenta>如果想要生成一个信息部件</c>

00:20:00.367 --> 00:20:02.936
<c.magenta>在这里你需要把计算得出的执行度</c>

00:20:03.003 --> 00:20:04.638
<c.magenta>变成一条易读的信息</c>

00:20:04.705 --> 00:20:07.875
<c.magenta>方便用户理解</c>

00:20:08.909 --> 00:20:11.645
<c.magenta>你需要先初始化信息 给它添加标题</c>

00:20:11.845 --> 00:20:15.115
<c.magenta>信息内容</c>
<c.magenta>颜色 以及信息类型</c>

00:20:15.182 --> 00:20:16.650
<c.magenta>比如说 这是一条提示</c>

00:20:20.320 --> 00:20:21.788
<c.magenta>接下来 我们讲讲分组条形图</c>

00:20:21.855 --> 00:20:24.491
<c.magenta>它能在一张图表里</c>
<c.magenta>显示多组信息</c>

00:20:24.691 --> 00:20:27.828
<c.magenta>比如说 这个图表对比了</c>
<c.magenta>pain和ibuprofen</c>

00:20:27.895 --> 00:20:29.162
<c.magenta>用户可以从这些数据中</c>

00:20:29.229 --> 00:20:32.399
<c.magenta>了解病情恢复进展</c>

00:20:35.335 --> 00:20:37.371
<c.magenta>我定义一个变量</c>
<c.magenta>barChartItem</c>

00:20:37.437 --> 00:20:39.173
<c.magenta>类型是OCKInsightItem</c>

00:20:40.174 --> 00:20:43.043
<c.magenta>barChartItem</c>
<c.magenta>包括不同的图表系列</c>

00:20:43.110 --> 00:20:45.445
<c.magenta>我们已见过painSeries</c>
<c.magenta>和ibuprofenSeries</c>

00:20:45.679 --> 00:20:46.813
<c.magenta>要创建这个图表</c>

00:20:46.880 --> 00:20:50.050
<c.magenta>首先需定义painSeries</c>
<c.magenta>及初始化BarSeries</c>

00:20:50.484 --> 00:20:53.620
<c.magenta>然后指定标题、数组以及字符串组</c>

00:20:53.687 --> 00:20:54.655
<c.magenta>和图表填充色</c>

00:20:55.722 --> 00:20:58.458
<c.magenta>数组的元素数目是不受限制的</c>

00:20:58.525 --> 00:21:00.694
<c.magenta>所以你的图表可以展示</c>
<c.magenta>每周数据、月度数据</c>

00:20:58.525 --> 00:21:00.694
<c.magenta>所以你的图表可以展示</c>
<c.magenta>每周数据、月度数据</c>

00:21:00.761 --> 00:21:02.162
<c.magenta>或者任意数量的数据</c>

00:21:02.963 --> 00:21:06.166
<c.magenta>数值决定了条形图的长度</c>

00:21:06.233 --> 00:21:08.902
<c.magenta>字符串会出现在条形图的右边</c>

00:21:09.303 --> 00:21:10.838
<c.magenta>大多数时候它们的含义都不相同</c>

00:21:11.004 --> 00:21:12.906
<c.magenta>举个例子</c>
<c.magenta>在ibuprofenSeries里</c>

00:21:12.973 --> 00:21:15.242
<c.magenta>数值决定了条形图的长度</c>

00:21:15.309 --> 00:21:17.077
<c.magenta>但它们并不代表数据本身</c>

00:21:17.144 --> 00:21:19.746
<c.magenta>再举个例子</c>
<c.magenta>这些1-5-4之类的数字</c>

00:21:19.813 --> 00:21:23.784
<c.magenta>会很容易被误解成药品剂量</c>
<c.magenta>1片药 5片药 或者4片药</c>

00:21:24.151 --> 00:21:27.821
<c.magenta>标签值帮助用户知道</c>
<c.magenta>他们遵循用药量</c>

00:21:27.888 --> 00:21:30.157
<c.magenta>10%、50%以及40%</c>

00:21:31.258 --> 00:21:33.627
<c.magenta>我们已经知道想要显示哪些系列了</c>

00:21:33.694 --> 00:21:35.596
<c.magenta>需先初始化</c>
<c.magenta>一个barChartItem</c>

00:21:36.196 --> 00:21:38.432
<c.magenta>然后指定它的标题、</c>
<c.magenta>文字内容、填充颜色</c>

00:21:38.699 --> 00:21:41.268
<c.magenta>我们有两组数列</c>
<c.magenta>分别作为坐标轴标题和副标题</c>

00:21:41.335 --> 00:21:43.136
<c.magenta>显示在每组条形图的左边</c>

00:21:43.437 --> 00:21:45.739
<c.magenta>你可以注明需要显示的系列数目</c>

00:21:45.806 --> 00:21:47.441
<c.magenta>可能有1组 2组 或10组</c>

00:21:48.442 --> 00:21:50.444
<c.magenta>还有两个可选的参数需要定义</c>
<c.magenta>也就是量程</c>

00:21:50.511 --> 00:21:52.846
<c.magenta>最小量程</c>
<c.magenta>和最大量程</c>

00:21:52.913 --> 00:21:54.047
<c.magenta>如果你不注明它们</c>

00:21:54.114 --> 00:21:56.917
<c.magenta>它们会被自动生成</c>
<c.magenta>根据你提供的数据</c>

00:21:57.117 --> 00:21:59.453
<c.magenta>如果你想要注明</c>
<c.magenta>那么请小心</c>

00:21:59.520 --> 00:22:01.154
<c.magenta>不要让数据出现偏差</c>

00:21:59.520 --> 00:22:01.154
<c.magenta>不要让数据出现偏差</c>

00:22:01.588 --> 00:22:04.591
<c.magenta>举个例子 如果数据的范围从1到10</c>

00:22:04.658 --> 00:22:06.560
<c.magenta>但注明的量程是从5到10</c>

00:22:06.627 --> 00:22:09.363
<c.magenta>那么所有低于5的数字就被隐去</c>

00:22:09.429 --> 00:22:11.598
<c.magenta>数据就会失真</c>

00:22:13.467 --> 00:22:16.837
<c.magenta>终于我们建好了信息部件和图表部件</c>

00:22:17.204 --> 00:22:18.906
<c.magenta>我们创建一个Insights概览页</c>

00:22:18.972 --> 00:22:22.042
<c.magenta>首先使用这两种部件的数组</c>
<c.magenta>来初始化InsightsViewController</c>

00:22:22.109 --> 00:22:24.144
<c.magenta>指定一个标头和一个副标题</c>

00:22:24.478 --> 00:22:25.579
<c.magenta>一个标题和副标题</c>

00:22:26.246 --> 00:22:28.649
<c.magenta>接下来直接展示它</c>
<c.magenta>得到这样的</c>

00:22:35.222 --> 00:22:37.090
<c.magenta>这是创建Insights模块方法</c>

00:22:38.525 --> 00:22:39.860
<c.magenta>下一项是连接模块</c>

00:22:40.494 --> 00:22:42.262
<c.magenta>连接允许用户分享数据</c>

00:22:42.329 --> 00:22:44.164
<c.magenta>给医疗组成员或者家庭成员</c>

00:22:45.365 --> 00:22:47.501
<c.magenta>为了简化这一操作</c>

00:22:47.568 --> 00:22:49.503
<c.magenta>我们创建了CareKit联系人</c>

00:22:49.570 --> 00:22:50.838
<c.magenta>它有两种类型</c>

00:22:51.405 --> 00:22:54.041
<c.magenta>医疗组联系人</c>
<c.magenta>包括医生或护士</c>

00:22:54.274 --> 00:22:56.276
<c.magenta>或者其他医疗组成员</c>

00:22:56.643 --> 00:22:57.678
<c.magenta>还有私人联系人</c>

00:22:57.744 --> 00:22:59.847
<c.magenta>可能包括密友或者家人</c>

00:23:00.380 --> 00:23:03.383
<c.magenta>观察连接模块时你会发现</c>
<c.magenta>联系人是根据类型分组的</c>

00:23:04.151 --> 00:23:05.953
<c.magenta>医疗组成员在上面</c>

00:23:06.820 --> 00:23:08.789
<c.magenta>下面是朋友和家人</c>

00:23:09.156 --> 00:23:11.325
<c.magenta>我们来看看代码</c>
<c.magenta>怎样创建联系人群组</c>

00:23:13.160 --> 00:23:15.128
<c.magenta>要创建一个医疗联系人</c>
<c.magenta>首先定义一个变量</c>

00:23:15.195 --> 00:23:17.364
<c.magenta>类型是OCKContact的</c>
<c.magenta>PhysicianContact</c>

00:23:17.965 --> 00:23:20.334
<c.magenta>接着初始化联系人对象</c>

00:23:20.400 --> 00:23:22.102
<c.magenta>然后指定careTeam的类型</c>
<c.magenta>姓名</c>

00:23:22.369 --> 00:23:24.538
<c.magenta>他和病人的关系</c>

00:23:24.738 --> 00:23:25.639
<c.magenta>以及填充色</c>

00:23:25.939 --> 00:23:28.775
<c.magenta>接着是电话号码、信息号码</c>
<c.magenta>是CNPhoneNumber对象</c>

00:23:28.842 --> 00:23:30.143
<c.magenta>方便格式统一</c>

00:23:30.911 --> 00:23:32.446
<c.magenta>邮箱地址是字符串</c>

00:23:32.713 --> 00:23:34.948
<c.magenta>定义monogram数值</c>

00:23:35.015 --> 00:23:36.283
<c.magenta>或者指定图片</c>

00:23:36.350 --> 00:23:38.785
<c.magenta>来显示医生或者医疗成员的头像</c>

00:23:41.154 --> 00:23:44.558
<c.magenta>当所有联系人都创建完成后 请初始化</c>
<c.magenta>connectViewController</c>

00:23:44.625 --> 00:23:47.394
<c.magenta>然后把它展示出来</c>

00:23:47.528 --> 00:23:49.530
<c.magenta>但是这里你依然需要编写一个代理函数</c>

00:23:49.596 --> 00:23:51.098
<c.magenta>我们等一下会提到</c>

00:23:51.932 --> 00:23:53.100
<c.magenta>在我们呈现它之前</c>

00:23:53.166 --> 00:23:54.868
<c.magenta>需要把它内嵌到</c>
<c.magenta>NavigationController</c>

00:23:54.935 --> 00:23:57.538
<c.magenta>因为连接模块</c>
<c.magenta>同时包含主页面和详请页面</c>

00:23:59.139 --> 00:24:02.643
<c.magenta>最后的连接模块是这样的</c>
<c.magenta>包含了ConnectViewController</c>

00:23:59.139 --> 00:24:02.643
<c.magenta>最后的连接模块是这样的</c>
<c.magenta>包含了ConnectViewController</c>

00:24:03.410 --> 00:24:06.647
<c.magenta>我们看看刚创建的联系人</c>
<c.magenta>Paul Cashman医生</c>

00:24:07.080 --> 00:24:08.248
<c.magenta>如果点击这一栏</c>

00:24:08.315 --> 00:24:11.418
<c.magenta>进入详情页</c>
<c.magenta>就能得到他的详细名片</c>

00:24:11.818 --> 00:24:15.022
<c.magenta>在名片里你能看到他所有的联系方式</c>

00:24:15.088 --> 00:24:17.124
<c.magenta>告诉你怎样打电话发信息</c>

00:24:17.491 --> 00:24:19.359
<c.magenta>发短信或者邮件</c>

00:24:20.994 --> 00:24:23.997
<c.magenta>还能在下面发送报告给他</c>

00:24:24.264 --> 00:24:26.099
<c.magenta>代理在这里产生作用</c>

00:24:27.568 --> 00:24:31.538
<c.magenta>连接代理让联系人之间</c>
<c.magenta>数据共享成为可能</c>

00:24:31.605 --> 00:24:34.007
<c.magenta>举个例子</c>
<c.magenta>当用户点击分享按钮</c>

00:24:34.441 --> 00:24:35.542
<c.magenta>这个函数被调用</c>

00:24:35.976 --> 00:24:38.645
<c.magenta>你会收到一个联系人对象</c>

00:24:38.712 --> 00:24:42.282
<c.magenta>你可以决定生成哪种报告</c>
<c.magenta>然后分享报告</c>

00:24:43.116 --> 00:24:46.520
<c.magenta>创建报告和分享报告的过程非常繁琐</c>

00:24:46.587 --> 00:24:48.989
<c.magenta>看看我们是如何简化它的</c>

00:24:49.823 --> 00:24:54.394
<c.magenta>为了更方便地使用</c>
<c.magenta>连接模块分享数据</c>

00:24:54.461 --> 00:24:57.531
<c.magenta>我们推出了</c>
<c.magenta>Document Exporter</c>

00:24:58.599 --> 00:25:01.468
<c.magenta>它从Care Plan Store</c>
<c.magenta>抓取信息</c>

00:24:58.599 --> 00:25:01.468
<c.magenta>它从Care Plan Store</c>
<c.magenta>抓取信息</c>

00:25:01.535 --> 00:25:05.205
<c.magenta>甚至从其它来源</c>
<c.magenta>生成富文本PDF以供分享</c>

00:25:06.640 --> 00:25:08.509
<c.magenta>就像我们为CareKit</c>
<c.magenta>做的所有事一样</c>

00:25:08.575 --> 00:25:11.278
<c.magenta>为了简化流程</c>
<c.magenta>我们创建了CareKit文档元素</c>

00:25:11.945 --> 00:25:13.380
<c.magenta>包括页眉和页脚</c>

00:25:13.981 --> 00:25:19.353
<c.magenta>文字和段落</c>
<c.magenta>图片 图表 和表格</c>

00:25:19.887 --> 00:25:24.157
<c.magenta>汇总这些元素</c>
<c.magenta>创建一个这样的富文本PDF</c>

00:25:30.631 --> 00:25:33.300
<c.magenta>在这份PDF中</c>
<c.magenta>包含了病人的照片</c>

00:25:33.667 --> 00:25:35.602
<c.magenta>一份易读的病情进展报告</c>

00:25:35.969 --> 00:25:38.572
<c.magenta>同Insights概览页一样的图表</c>

00:25:38.639 --> 00:25:39.940
<c.magenta>现在医生也能看到了</c>

00:25:40.007 --> 00:25:42.509
<c.magenta>他们能看出病人的恢复情况</c>

00:25:43.043 --> 00:25:45.846
<c.magenta>还有一个表格</c>
<c.magenta>展示了所有的主观和客观的测量数据</c>

00:25:45.913 --> 00:25:47.781
<c.magenta>关于上一周的</c>

00:25:48.515 --> 00:25:50.517
<c.magenta>我们来看看创建这个PDF的代码</c>

00:25:50.617 --> 00:25:54.154
<c.magenta>首先定义一个DocumentElementParagraph</c>
<c.magenta>对象 只包含了文本内容</c>

00:25:54.221 --> 00:25:56.490
<c.magenta>这些文本内容也可以来自</c>
<c.magenta>Care Plan Store</c>

00:25:56.557 --> 00:25:57.658
<c.magenta>或者远程服务器</c>

00:25:59.126 --> 00:26:01.428
<c.magenta>然后定义一个</c>
<c.magenta>DocumentElementChart对象</c>

00:25:59.126 --> 00:26:01.428
<c.magenta>然后定义一个</c>
<c.magenta>DocumentElementChart对象</c>

00:26:01.495 --> 00:26:05.165
<c.magenta>它几乎使用了Insights</c>
<c.magenta>概览页同样的图表元素</c>

00:26:05.232 --> 00:26:08.168
<c.magenta>所以我们不用编写任何新代码</c>
<c.magenta>或者生成任何新图表</c>

00:26:09.269 --> 00:26:12.406
<c.magenta>这个表格包含了许多的标题栏</c>

00:26:12.673 --> 00:26:14.875
<c.magenta>以及许多的数组</c>

00:26:14.942 --> 00:26:17.678
<c.magenta>每一个数组都包含了</c>
<c.magenta>每一行将要显示的数据</c>

00:26:17.744 --> 00:26:19.680
<c.magenta>比如 一个星期的疼痛值数据</c>

00:26:19.746 --> 00:26:21.782
<c.magenta>或者 一个星期的点击测试结果</c>

00:26:23.450 --> 00:26:25.752
<c.magenta>当你拥有了创建文档的全部元素</c>

00:26:25.819 --> 00:26:28.255
<c.magenta>先初始化一个文档对象</c>
<c.magenta>给它添加一个标题</c>

00:26:28.655 --> 00:26:30.624
<c.magenta>和一个包含所有元素的数组</c>

00:26:31.658 --> 00:26:34.628
<c.magenta>把这些文档元素转换成PDF</c>
<c.magenta>非常简单直接</c>

00:26:34.695 --> 00:26:36.663
<c.magenta>只要调用</c>
<c.magenta>createPDFData方法</c>

00:26:36.864 --> 00:26:39.166
<c.magenta>使用返回到completionBlock的NSData</c>

00:26:39.233 --> 00:26:40.567
<c.magenta>最后输出到文件URL</c>

00:26:42.369 --> 00:26:44.771
<c.magenta>现在 当用户点击分享按钮</c>

00:26:45.439 --> 00:26:48.909
<c.magenta>PDF就被生成了 使用刚创建的</c>
<c.magenta>Document Exporter</c>

00:26:49.877 --> 00:26:53.046
<c.magenta>用户可以预览PDF</c>
<c.magenta>他们就能知道被分享的内容</c>

00:26:53.814 --> 00:26:56.550
<c.magenta>他们可以点击分享按钮</c>
<c.magenta>进入分享页面</c>

00:26:56.617 --> 00:26:59.052
<c.magenta>选择不同的方式来分享PDF</c>

00:27:00.554 --> 00:27:03.624
<c.magenta>这就是Document Exporter</c>
<c.magenta>它和连接模块一同协作</c>

00:27:03.690 --> 00:27:04.958
<c.magenta>实现了数据分享</c>

00:27:11.732 --> 00:27:14.701
<c.magenta>所有的模块放在一起</c>
<c.magenta>构成了CareKit框架</c>

00:27:15.302 --> 00:27:18.172
<c.magenta>Patient PAL</c>
<c.magenta>最近改变他们的就医体验</c>

00:27:18.238 --> 00:27:19.139
<c.magenta>使用CareKit</c>

00:27:19.540 --> 00:27:21.608
<c.magenta>我将为大家展示</c>
<c.magenta>他们如何利用自定义功能</c>

00:27:21.675 --> 00:27:23.177
<c.magenta>来提升用户体验</c>

00:27:23.243 --> 00:27:24.745
<c.magenta>创建干涉活动</c>
<c.magenta>和评估</c>

00:27:24.811 --> 00:27:26.613
<c.magenta>来帮助病人恢复健康</c>

00:27:27.748 --> 00:27:31.318
<c.magenta>在他们的Care Card中</c>
<c.magenta>心型图案被锻炼的小人替换</c>

00:27:31.785 --> 00:27:33.287
<c.magenta>他们应用的主要功能</c>

00:27:33.520 --> 00:27:36.123
<c.magenta>是帮助病人进行特定的锻炼</c>

00:27:36.990 --> 00:27:39.560
<c.magenta>比如说 如果你专心于髋关节伸展运动</c>

00:27:39.626 --> 00:27:40.794
<c.magenta>粉色的这一个</c>

00:27:41.195 --> 00:27:43.430
<c.magenta>需要点击剩余的圆圈来完成它</c>

00:27:43.730 --> 00:27:47.000
<c.magenta>但是在标注它为完成之前</c>
<c.magenta>我们必须完成这组锻炼</c>

00:27:49.036 --> 00:27:51.605
<c.magenta>这组锻炼任务</c>
<c.magenta>包含了一则详细的描述</c>

00:27:51.672 --> 00:27:53.507
<c.magenta>还有一个视频</c>

00:27:53.574 --> 00:27:55.742
<c.magenta>保证用户使用正确的方式锻炼</c>

00:27:56.109 --> 00:27:58.779
<c.magenta>他们甚至还帮助患者</c>
<c.magenta>记录下自己的锻炼过程</c>

00:27:58.846 --> 00:28:01.915
<c.magenta>医疗机构也能看到这些信息</c>

00:27:58.846 --> 00:28:01.915
<c.magenta>医疗机构也能看到这些信息</c>

00:28:03.183 --> 00:28:06.220
<c.magenta>点击观看视频按钮</c>
<c.magenta>会显示出内嵌的视频</c>

00:28:06.286 --> 00:28:10.123
<c.magenta>当你懂得这组锻炼后</c>
<c.magenta>点击开始</c>

00:28:10.190 --> 00:28:13.160
<c.magenta>这个过程中将会有一个活动任务</c>
<c.magenta>引领你做完每一组锻炼</c>

00:28:14.561 --> 00:28:15.796
<c.magenta>一旦完成了锻炼</c>

00:28:15.863 --> 00:28:18.699
<c.magenta>你能看到完成进展度</c>
<c.magenta>自动被更新</c>

00:28:18.765 --> 00:28:21.668
<c.magenta>这个小圆圈就被标注成完成</c>

00:28:21.735 --> 00:28:26.073
<c.magenta>在Care Card上</c>
<c.magenta>我们为每一组活动提供详尽的信息</c>

00:28:26.139 --> 00:28:28.775
<c.magenta>同时你可以编写代理函数</c>
<c.magenta>自主提供显示信息</c>

00:28:28.842 --> 00:28:30.744
<c.magenta>他们另外一项自定义</c>

00:28:30.811 --> 00:28:34.414
<c.magenta>当用户点击其中一个细节界面时</c>

00:28:34.481 --> 00:28:36.083
<c.magenta>比如说韧带拉伸页面</c>

00:28:36.683 --> 00:28:39.186
<c.magenta>会唤起一个视图控制器</c>

00:28:39.253 --> 00:28:41.488
<c.magenta>让你设置锻炼提醒</c>

00:28:41.722 --> 00:28:44.324
<c.magenta>我已经完成了两项</c>

00:28:44.391 --> 00:28:47.828
<c.magenta>第三项 我想在“晚上8点做”</c>

00:28:48.729 --> 00:28:50.631
<c.magenta>应用会给我推送提醒</c>

00:28:50.697 --> 00:28:53.400
<c.magenta>继续完成我的锻炼</c>

00:28:54.134 --> 00:28:56.303
<c.magenta>CareKit提供了高度的可塑性</c>

00:28:56.370 --> 00:28:58.438
<c.magenta>你可以定制这些模块</c>
<c.magenta>来满足你的需求</c>

00:28:58.972 --> 00:29:00.307
<c.magenta>这只是其中一部分</c>

00:28:58.972 --> 00:29:00.307
<c.magenta>这只是其中一部分</c>

00:29:02.276 --> 00:29:05.179
<c.magenta>我们来到了最后一个部分</c>
<c.magenta>CareKit的下一步计划是什么</c>

00:29:06.580 --> 00:29:09.349
<c.magenta>目前 CareKit帮助你编写</c>
<c.magenta>以患者为中心的应用</c>

00:29:10.350 --> 00:29:11.952
<c.magenta>接下来 我们将专注于</c>

00:29:12.019 --> 00:29:14.087
<c.magenta>创建应用程序和云服务器的连接</c>

00:29:14.154 --> 00:29:16.023
<c.magenta>以及把医疗信息</c>

00:29:16.089 --> 00:29:18.058
<c.magenta>从云端传递给医疗团队</c>

00:29:18.725 --> 00:29:21.395
<c.magenta>这一类架构</c>
<c.magenta>已经被运用到德克萨斯医疗中心应用</c>

00:29:21.461 --> 00:29:23.063
<c.magenta>和Patient PAL的应用上了</c>

00:29:23.397 --> 00:29:24.665
<c.magenta>我们由衷地希望</c>

00:29:24.731 --> 00:29:27.734
<c.magenta>你们在开发CareKit应用</c>
<c.magenta>并且连接到云服务器时</c>

00:29:27.801 --> 00:29:29.136
<c.magenta>你们能分享自己的经验</c>

00:29:29.203 --> 00:29:32.739
<c.magenta>回馈整个社区</c>

00:29:32.806 --> 00:29:36.076
<c.magenta>让使用类似云端解决方案的人</c>
<c.magenta>也能受益其中</c>

00:29:37.978 --> 00:29:39.213
<c.magenta>CareKit是开源项目</c>

00:29:39.680 --> 00:29:41.448
<c.magenta>它的未来取决于你</c>

00:29:45.285 --> 00:29:46.520
<c.magenta>请贡献你的力量</c>

00:29:46.587 --> 00:29:48.155
<c.magenta>你能在GitHub找到该项目</c>

00:29:48.488 --> 00:29:51.391
<c.magenta>地址是</c>
<c.magenta>github.com/carekit-apple/carekit</c>

00:29:53.060 --> 00:29:55.429
<c.magenta>如果你想帮助我们完善CareKit</c>

00:29:56.196 --> 00:29:59.366
<c.magenta>请浏览GitHub上的</c>
<c.magenta>issues部分</c>

00:29:59.700 --> 00:30:02.002
<c.magenta>你可建立新的issue</c>
<c.magenta>或者选择已经创建的</c>

00:29:59.700 --> 00:30:02.002
<c.magenta>你可建立新的issue</c>
<c.magenta>或者选择已经创建的</c>

00:30:02.870 --> 00:30:03.837
<c.magenta>进行开发</c>

00:30:03.904 --> 00:30:05.539
<c.magenta>请随时联系我们或者社区成员</c>

00:30:05.606 --> 00:30:07.774
<c.magenta>如果开发中遇到任何问题</c>

00:30:08.642 --> 00:30:10.477
<c.magenta>和我们一起审查代码</c>

00:30:10.544 --> 00:30:13.647
<c.magenta>这通常需要你、社区</c>
<c.magenta>和Apple工程师的参与</c>

00:30:14.448 --> 00:30:16.617
<c.magenta>我们的工作始于这里</c>

00:30:16.683 --> 00:30:19.386
<c.magenta>当我们收到开发审查过的功能后</c>

00:30:19.453 --> 00:30:23.056
<c.magenta>我们将接手这项功能</c>
<c.magenta>给予它更多的访问权限</c>

00:30:23.724 --> 00:30:26.460
<c.magenta>我们将使功能本地化</c>
<c.magenta>翻译成CareKit支持的所有语言</c>

00:30:27.427 --> 00:30:30.130
<c.magenta>在所有平台上</c>
<c.magenta>进行QA测试</c>

00:30:30.864 --> 00:30:33.267
<c.magenta>这个过程可能也会需要你们的帮助</c>

00:30:33.433 --> 00:30:36.170
<c.magenta>一旦这个功能可以使用</c>
<c.magenta>我们会把它并入框架</c>

00:30:36.770 --> 00:30:39.506
<c.magenta>有了CareKit</c>
<c.magenta>我们非常渴望和大家一起工作</c>

00:30:39.573 --> 00:30:41.808
<c.magenta>一起打造全新的医疗体验</c>

00:30:43.243 --> 00:30:45.012
<c.magenta>更多信息 请浏览这个URL</c>

00:30:45.078 --> 00:30:47.748
<c.magenta>包括我们网站和GitHub的链接</c>

00:30:48.148 --> 00:30:49.950
<c.magenta>以及我们的联系信息</c>

00:30:50.017 --> 00:30:51.552
<c.magenta>如果有任何技术问题</c>

00:30:51.618 --> 00:30:54.087
<c.magenta>或者有任何CareKit应用</c>
<c.magenta>的想法要分享</c>

00:30:55.756 --> 00:30:59.059
<c.magenta>请浏览这些相关演讲</c>
<c.magenta>帮你们创建自己的CareKit应用</c>

00:30:59.326 --> 00:31:00.794
<c.magenta>谢谢大家出席本场演讲</c>
