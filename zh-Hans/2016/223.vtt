WEBVTT

00:00:20.320 --> 00:00:22.589
<c.magenta>最大限度利用Search APIS</c>

00:00:22.656 --> 00:00:25.993
<c.magenta>新特性和更新扩展搜索能力</c>
<c.magenta>演讲223</c>

00:00:29.229 --> 00:00:32.131
<c.magenta>欢迎各位 我是</c>
<c.magenta>Vipul Ved Prakash</c>

00:00:32.198 --> 00:00:35.002
<c.magenta>我在Apple从事</c>
<c.magenta>Siri和Search的开发</c>

00:00:35.302 --> 00:00:38.138
<c.magenta>今天 我将和同事</c>
<c.magenta>John Hornkvist</c>

00:00:38.338 --> 00:00:40.507
<c.magenta>展示</c>
<c.magenta>Search APIs的新特性</c>

00:00:40.574 --> 00:00:42.176
<c.magenta>以及该如何最大限度地利用</c>

00:00:42.776 --> 00:00:47.347
<c.magenta>众所周知 Spotlight逐渐</c>
<c.magenta>成为了一个更强大的搜索工具</c>

00:00:47.481 --> 00:00:49.316
<c.magenta>在最近发行的一些iOS版本里</c>

00:00:49.883 --> 00:00:53.787
<c.magenta>在iOS 8里</c>
<c.magenta>我们加入了查询网络资源的功能</c>

00:00:53.854 --> 00:00:56.456
<c.magenta>例如App Store</c>
<c.magenta>Maps和Wikipedia</c>

00:00:57.291 --> 00:01:01.028
<c.magenta>之后 在iOS 9里</c>
<c.magenta>我们大幅扩大了范围</c>

00:00:57.291 --> 00:01:01.028
<c.magenta>之后 在iOS 9里</c>
<c.magenta>我们大幅扩大了范围</c>

00:01:01.094 --> 00:01:06.099
<c.magenta>加入了资源 像音乐 货币换算</c>
<c.magenta>实时体育赛事得分</c>

00:01:06.166 --> 00:01:08.135
<c.magenta>网页 还有很多很多</c>

00:01:08.569 --> 00:01:12.773
<c.magenta>或许 最主要的是</c>
<c.magenta>我们加入了简单且强大的方式</c>

00:01:13.040 --> 00:01:16.310
<c.magenta>能让我们使你们应用的内容</c>
<c.magenta>在Spotlight被搜索</c>

00:01:16.510 --> 00:01:22.082
<c.magenta>在iOS 10里 今天我们要宣布</c>
<c.magenta>这些Search APIs的扩展</c>

00:01:22.149 --> 00:01:25.319
<c.magenta>这将能让你们对应用的内容进行</c>
<c.magenta>更深层次的搜索</c>

00:01:25.752 --> 00:01:30.057
<c.magenta>我们也简化了Spotlight使用</c>
<c.magenta>也让它更容易被找到</c>

00:01:30.123 --> 00:01:33.927
<c.magenta>那让我们从看一些例子开始</c>

00:01:33.994 --> 00:01:36.129
<c.magenta>关于我们对Spotlight的改动</c>

00:01:37.998 --> 00:01:40.701
<c.magenta>Spotlight现可在</c>
<c.magenta>Notification Center里找到</c>

00:01:40.868 --> 00:01:42.903
<c.magenta>这使它可以被更快捷地打开</c>

00:01:44.571 --> 00:01:45.806
<c.magenta>让我们在这里看个例子</c>

00:01:45.873 --> 00:01:48.442
<c.magenta>用户收到了一条包含问题的信息</c>

00:01:49.443 --> 00:01:51.345
<c.magenta>这是经常有的事</c>

00:01:51.612 --> 00:01:53.714
<c.magenta>那他们想要查询并回复</c>

00:01:54.014 --> 00:01:58.952
<c.magenta>不用退出messages 来到</c>
<c.magenta>主屏幕 下拉出Spotlight</c>

00:01:59.052 --> 00:02:02.122
<c.magenta>他们只需下拉出Spotlight</c>
<c.magenta>盖过messages</c>

00:01:59.052 --> 00:02:02.122
<c.magenta>他们只需下拉出Spotlight</c>
<c.magenta>盖过messages</c>

00:02:03.423 --> 00:02:06.994
<c.magenta>进行查询 然后找到答案</c>

00:02:08.461 --> 00:02:09.830
<c.magenta>十分好用</c>

00:02:12.165 --> 00:02:15.169
<c.magenta>我们也在锁定屏幕</c>
<c.magenta>添加了Spotlight</c>

00:02:15.402 --> 00:02:17.538
<c.magenta>也添加了对快速预览结果的支持</c>

00:02:17.604 --> 00:02:19.206
<c.magenta>通过使用3D Touch</c>

00:02:19.706 --> 00:02:21.208
<c.magenta>让我们来看一下操作</c>

00:02:23.243 --> 00:02:25.546
<c.magenta>假设你们在和朋友争论</c>

00:02:25.612 --> 00:02:27.314
<c.magenta>Steph Curry在哪出生</c>

00:02:28.182 --> 00:02:29.750
<c.magenta>你们可以来到锁定屏幕</c>

00:02:31.251 --> 00:02:32.486
<c.magenta>进行搜索</c>

00:02:36.190 --> 00:02:39.393
<c.magenta>找到结果 你们现在可用</c>
<c.magenta>3D Touch预览这些结果</c>

00:02:44.598 --> 00:02:47.701
<c.magenta>找到你们想要的那个</c>
<c.magenta>在这里是Wikipedia</c>

00:02:48.535 --> 00:02:49.570
<c.magenta>真的很好用</c>

00:02:49.636 --> 00:02:51.371
<c.magenta>当然 当你们在锁屏状态时</c>

00:02:51.438 --> 00:02:55.542
<c.magenta>我们只显示从网上获取的公开信息</c>

00:02:59.046 --> 00:03:03.016
<c.magenta>另外一个我们添加的很酷的功能是</c>
<c.magenta>Spotlight查询建议</c>

00:02:59.046 --> 00:03:03.016
<c.magenta>另外一个我们添加的很酷的功能是</c>
<c.magenta>Spotlight查询建议</c>

00:03:03.083 --> 00:03:07.754
<c.magenta>它在输入问题关键词的上方</c>
<c.magenta>“快速输入”那里</c>

00:03:08.055 --> 00:03:09.256
<c.magenta>让我们看个例子</c>

00:03:09.690 --> 00:03:13.093
<c.magenta>这里用户查询班桌琴</c>
<c.magenta>通过以往的查询 我们知道</c>

00:03:13.160 --> 00:03:18.398
<c.magenta>两个常见完整输入是</c>
<c.magenta>班卓琴弦和班卓琴调音器</c>

00:03:18.532 --> 00:03:21.668
<c.magenta>所以 如果他们所要的结果</c>
<c.magenta>不在屏幕上</c>

00:03:21.869 --> 00:03:23.704
<c.magenta>他们能从中选一个 找到答案</c>

00:03:23.770 --> 00:03:28.342
<c.magenta>这可让许多查询更快</c>
<c.magenta>被Spotlight处理</c>

00:03:28.942 --> 00:03:30.277
<c.magenta>我们做了许多的改进</c>

00:03:30.644 --> 00:03:32.880
<c.magenta>我们改进了自动拼写更正</c>

00:03:32.946 --> 00:03:34.515
<c.magenta>为应用开启用例</c>

00:03:34.581 --> 00:03:38.085
<c.magenta>我们改进了对中文和日文脚本的支持</c>

00:03:38.852 --> 00:03:40.053
<c.magenta>在设备上</c>

00:03:40.120 --> 00:03:42.456
<c.magenta>总体来说 我们也提高了相关度</c>

00:03:42.523 --> 00:03:43.991
<c.magenta>所有的这些改动</c>

00:03:44.057 --> 00:03:48.128
<c.magenta>当然也适用被插入的内容</c>
<c.magenta>当使用Search APIs</c>

00:03:49.463 --> 00:03:52.232
<c.magenta>现在 让我们将注意转移到</c>
<c.magenta>Search APIs</c>

00:03:53.400 --> 00:03:58.839
<c.magenta>也许你们记得我们在iOS 9里</c>
<c.magenta>加入了三个Search APIs</c>

00:03:59.072 --> 00:04:02.843
<c.magenta>有CoreSpotlight</c>
<c.magenta>它能让你们添加用户指定的</c>

00:03:59.072 --> 00:04:02.843
<c.magenta>有CoreSpotlight</c>
<c.magenta>它能让你们添加用户指定的</c>

00:04:02.910 --> 00:04:06.813
<c.magenta>或用户创建的Spotlight</c>
<c.magenta>设备索引</c>

00:04:07.981 --> 00:04:11.318
<c.magenta>我们还加入了NSUserActivity</c>
<c.magenta>一个可搜索版本</c>

00:04:11.718 --> 00:04:16.190
<c.magenta>它能提供一个简便的途径</c>
<c.magenta>索引一切用户</c>

00:04:16.255 --> 00:04:20.194
<c.magenta>在你们应用里看过的内容</c>
<c.magenta>这样他们就能被快速搜索和找回</c>

00:04:21.128 --> 00:04:24.665
<c.magenta>最后 我们加入了</c>
<c.magenta>通用链接索引</c>

00:04:24.731 --> 00:04:28.569
<c.magenta>这是一个服务器端的索引</c>
<c.magenta>有链接组成</c>

00:04:28.635 --> 00:04:31.972
<c.magenta>这些链接是我们通过</c>
<c.magenta>爬应用网站找到的</c>

00:04:32.272 --> 00:04:34.074
<c.magenta>我们的设计让APIs和谐工作</c>

00:04:34.141 --> 00:04:37.878
<c.magenta>所以 无论结果来自设备或服务器</c>

00:04:37.945 --> 00:04:42.816
<c.magenta>它们看起来都一样</c>
<c.magenta>让你们应用的搜索成为无缝体验</c>

00:04:44.918 --> 00:04:46.320
<c.magenta>我兴奋地宣布...</c>

00:04:47.154 --> 00:04:50.891
<c.magenta>App Store有超过50,000</c>
<c.magenta>应用使用Search APIs</c>

00:04:51.625 --> 00:04:52.759
<c.magenta>这是十分惊人的</c>

00:04:58.165 --> 00:05:01.869
<c.magenta>我想那会是多么酷</c>
<c.magenta>看见Search APIs用户</c>

00:04:58.165 --> 00:05:01.869
<c.magenta>我想那会是多么酷</c>
<c.magenta>看见Search APIs用户</c>

00:05:01.935 --> 00:05:04.137
<c.magenta>改善了日常的互动</c>

00:05:04.204 --> 00:05:07.875
<c.magenta>在我们的客户和你们应用</c>
<c.magenta>还有iOS之间</c>

00:05:07.975 --> 00:05:10.844
<c.magenta>我想向你们介绍一些</c>
<c.magenta>我最喜欢的案例</c>

00:05:11.812 --> 00:05:12.980
<c.magenta>这是一个近期的例子</c>

00:05:13.046 --> 00:05:17.651
<c.magenta>我在计划一个这周末去</c>
<c.magenta>夏威夷的毛伊岛旅行</c>

00:05:17.718 --> 00:05:21.154
<c.magenta>我在过去的一个月里</c>
<c.magenta>间歇地计划着这个旅行</c>

00:05:21.688 --> 00:05:25.325
<c.magenta>有许多信息像酒店预订和票务</c>

00:05:25.392 --> 00:05:28.462
<c.magenta>那些都可以通过我的设备找到</c>
<c.magenta>我通常</c>

00:05:28.529 --> 00:05:33.800
<c.magenta>使用应用或网站或翻阅邮件来</c>
<c.magenta>寻找它们</c>

00:05:34.568 --> 00:05:36.069
<c.magenta>但有了Search APIs</c>

00:05:38.071 --> 00:05:39.840
<c.magenta>我的经历是这样的</c>

00:05:40.374 --> 00:05:43.277
<c.magenta>那个我用来做这些预定的应用</c>

00:05:43.343 --> 00:05:48.115
<c.magenta>用CoreSpotlight将主要</c>
<c.magenta>信息添到Spotlight的索引</c>

00:05:48.182 --> 00:05:50.817
<c.magenta>以至于 我能看见我的机票</c>

00:05:51.118 --> 00:05:53.954
<c.magenta>我能看见通过Hotel</c>
<c.magenta>Tonight预定的酒店</c>

00:05:54.021 --> 00:05:57.157
<c.magenta>和一些通过Open Table</c>
<c.magenta>预定的晚餐</c>

00:05:57.758 --> 00:06:00.394
<c.magenta>我可以通过触点这些结果</c>
<c.magenta>找到更多的信息</c>

00:05:57.758 --> 00:06:00.394
<c.magenta>我可以通过触点这些结果</c>
<c.magenta>找到更多的信息</c>

00:06:00.460 --> 00:06:02.196
<c.magenta>像我签到的时间...</c>

00:06:04.765 --> 00:06:06.767
<c.magenta>或是这些餐馆的地址</c>

00:06:11.338 --> 00:06:12.506
<c.magenta>你会留意到</c>

00:06:12.906 --> 00:06:15.375
<c.magenta>我有些从Pinterest上</c>
<c.magenta>搜来的结果</c>

00:06:15.442 --> 00:06:17.177
<c.magenta>我有使用Pinterest应用</c>

00:06:17.377 --> 00:06:20.047
<c.magenta>来探寻在毛伊岛能做些什么</c>

00:06:20.113 --> 00:06:22.616
<c.magenta>Pinterest使用</c>
<c.magenta>NSUserActivity</c>

00:06:23.217 --> 00:06:26.153
<c.magenta>来为我所在应用里</c>
<c.magenta>浏览过的东西建立索引</c>

00:06:28.589 --> 00:06:32.092
<c.magenta>我能触点其中一条结果</c>
<c.magenta>然后 继续我的探索</c>

00:06:36.196 --> 00:06:41.435
<c.magenta>这是一个极好的行程搜索经历</c>

00:06:41.502 --> 00:06:44.371
<c.magenta>通过我的设备找到所有</c>
<c.magenta>我知道能找到的信息</c>

00:06:44.438 --> 00:06:47.040
<c.magenta>以我们的经验 一般来说</c>

00:06:47.374 --> 00:06:52.312
<c.magenta>为用户想返回去看的内容建立索引</c>
<c.magenta>会是一个明智的选择</c>

00:06:54.047 --> 00:06:56.617
<c.magenta>另一个 我想分享的例子是</c>
<c.magenta>关于联系方式</c>

00:06:56.683 --> 00:07:01.522
<c.magenta>联系方式是最普遍的</c>
<c.magenta>Spotlight查询用例之一</c>

00:06:56.683 --> 00:07:01.522
<c.magenta>联系方式是最普遍的</c>
<c.magenta>Spotlight查询用例之一</c>

00:07:01.622 --> 00:07:03.357
<c.magenta>这里 我想搜索好兄弟Allen</c>

00:07:03.423 --> 00:07:07.794
<c.magenta>我看见了他的联系方式</c>
<c.magenta>是一个iPhone的方式</c>

00:07:07.861 --> 00:07:12.065
<c.magenta>我也看到了他的Skype资料和</c>
<c.magenta>一些对话</c>

00:07:12.132 --> 00:07:15.369
<c.magenta>在我们之间通过Yahoo</c>
<c.magenta>Mail和WhatsApp</c>

00:07:15.435 --> 00:07:18.138
<c.magenta>我能方便地返回到这些对话里</c>

00:07:21.475 --> 00:07:23.877
<c.magenta>这是很有用的 因为</c>
<c.magenta>这能提供给我</c>

00:07:23.944 --> 00:07:28.782
<c.magenta>对我的联系人有一个全方位的视角</c>

00:07:28.849 --> 00:07:32.886
<c.magenta>也能让我通过他们选择的途径交流</c>

00:07:37.925 --> 00:07:42.429
<c.magenta>现在我们看过了用户能自然地</c>
<c.magenta>应用Spotlight于</c>

00:07:42.496 --> 00:07:45.432
<c.magenta>Spotlight能本地支持的</c>
<c.magenta>所有事情</c>

00:07:45.966 --> 00:07:48.435
<c.magenta>如果你们有上述类型的内容</c>

00:07:48.602 --> 00:07:51.572
<c.magenta>利用它会是一个很棒的</c>
<c.magenta>扩大搜索范围的方式</c>

00:07:51.638 --> 00:07:54.208
<c.magenta>也能让你们的用户对应用更感兴趣</c>

00:07:58.111 --> 00:08:01.448
<c.magenta>那现在让我们来看一个</c>
<c.magenta>通用链接索引的例子</c>

00:07:58.111 --> 00:08:01.448
<c.magenta>那现在让我们来看一个</c>
<c.magenta>通用链接索引的例子</c>

00:08:01.548 --> 00:08:05.018
<c.magenta>wikiHow是一个高质量</c>
<c.magenta>关于怎么做的资源</c>

00:08:05.085 --> 00:08:09.189
<c.magenta>它有成千上万的关于各种主题的文章</c>

00:08:09.456 --> 00:08:13.093
<c.magenta>在这我查询一个重要的急救问题</c>
<c.magenta>怎样做心肺复苏</c>

00:08:13.160 --> 00:08:17.998
<c.magenta>Spotlight显示了一堆结果</c>
<c.magenta>有网页 YouTube</c>

00:08:18.198 --> 00:08:20.767
<c.magenta>还有wikiHow上的部分</c>

00:08:22.569 --> 00:08:26.240
<c.magenta>wikiHow使用通用链接</c>
<c.magenta>并且他们是一款热门应用</c>

00:08:26.306 --> 00:08:29.309
<c.magenta>所以我们在服务器上</c>
<c.magenta>对他们的文章建立了索引</c>

00:08:29.376 --> 00:08:32.279
<c.magenta>我们利用这些索引对应</c>
<c.magenta>适当的询问</c>

00:08:33.780 --> 00:08:37.183
<c.magenta>这些结果还是十分完整的</c>
<c.magenta>点击其中的一条</c>

00:08:37.251 --> 00:08:41.087
<c.magenta>我来到了这篇描述清晰的文章</c>

00:08:42.456 --> 00:08:49.196
<c.magenta>对wikiHow建立索引赋予了</c>
<c.magenta>Spotlight一个全新的功能</c>

00:08:49.263 --> 00:08:52.032
<c.magenta>这凸显出了Search APIs</c>
<c.magenta>的强大之处</c>

00:08:53.100 --> 00:08:55.402
<c.magenta>看过上面的例子 让我们来看下</c>

00:08:55.469 --> 00:08:58.939
<c.magenta>Search APIs</c>
<c.magenta>在iOS 10上有哪些新特性</c>

00:08:59.573 --> 00:09:05.112
<c.magenta>我们加入的第一个功能是</c>
<c.magenta>Continue Search in App</c>

00:08:59.573 --> 00:09:05.112
<c.magenta>我们加入的第一个功能是</c>
<c.magenta>Continue Search in App</c>

00:09:05.546 --> 00:09:07.181
<c.magenta>有许多的查询</c>

00:09:07.514 --> 00:09:12.352
<c.magenta>用户想见到更多的结果</c>
<c.magenta>或你们也许无法添加</c>

00:09:12.419 --> 00:09:15.322
<c.magenta>正确的结果至Spotlight</c>
<c.magenta>由于各种原因</c>

00:09:16.056 --> 00:09:18.992
<c.magenta>那现在应用有了一个选择</c>

00:09:19.059 --> 00:09:22.229
<c.magenta>在App Punch Out里查询</c>

00:09:22.362 --> 00:09:28.836
<c.magenta>如你们所见 在右上方的角落</c>

00:09:31.138 --> 00:09:38.078
<c.magenta>触点这里会将用户与问题一起</c>
<c.magenta>带入你们的应用</c>

00:09:38.178 --> 00:09:42.616
<c.magenta>这样就可以在应用里继续搜索</c>
<c.magenta>很酷</c>

00:09:46.453 --> 00:09:50.324
<c.magenta>我们加入的第二个特性是</c>
<c.magenta>CoreSpotlight Search API</c>

00:09:50.390 --> 00:09:52.092
<c.magenta>这个名字有点冗长 但是</c>

00:09:52.326 --> 00:09:56.430
<c.magenta>事实上就是你们能将所有的东西</c>
<c.magenta>添加至</c>

00:09:56.496 --> 00:10:01.134
<c.magenta>Spotlight的搜索索引</c>
<c.magenta>通过CoreSpotlight API</c>

00:09:56.496 --> 00:10:01.134
<c.magenta>Spotlight的搜索索引</c>
<c.magenta>通过CoreSpotlight API</c>

00:10:01.235 --> 00:10:03.837
<c.magenta>是不是很棒</c>
<c.magenta>如果可以通过这个索引</c>

00:10:03.904 --> 00:10:06.673
<c.magenta>支持应用内的搜索？</c>
<c.magenta>我认为一定是</c>

00:10:06.740 --> 00:10:10.611
<c.magenta>然而这是CoreSpotlight</c>
<c.magenta>Search API能让你做到的</c>

00:10:13.146 --> 00:10:14.448
<c.magenta>我们加入的第三个功能是</c>

00:10:14.515 --> 00:10:17.351
<c.magenta>估计深层链接受欢迎度的一个方式</c>

00:10:17.518 --> 00:10:21.054
<c.magenta>通过使用差分隐私</c>
<c.magenta>一个在keynote里提过的技术</c>

00:10:21.588 --> 00:10:24.825
<c.magenta>我们会对此做更多的讨论</c>
<c.magenta>在下面关于排序的讨论里</c>

00:10:26.460 --> 00:10:28.428
<c.magenta>最后 在众多的要求下</c>

00:10:28.495 --> 00:10:31.265
<c.magenta>我们在web markup</c>
<c.magenta>预览工具里加入了一个新特性</c>

00:10:31.632 --> 00:10:34.968
<c.magenta>它能让你们看到和检验</c>
<c.magenta>架构的结果</c>

00:10:35.269 --> 00:10:38.305
<c.magenta>在你们将其加入到</c>
<c.magenta>通用链接索引之前</c>

00:10:39.973 --> 00:10:43.377
<c.magenta>除此之外 我们还做了许多改进</c>

00:10:43.911 --> 00:10:45.913
<c.magenta>对Search APIs</c>
<c.magenta>基于你们反馈</c>

00:10:46.613 --> 00:10:50.584
<c.magenta>我将邀请John介绍这些APIs</c>

00:10:50.651 --> 00:10:52.719
<c.magenta>并更深层地讲述这些新功能</c>

00:10:55.856 --> 00:10:59.860
<c.magenta>让我们来探讨一下</c>
<c.magenta>如何利用Search APIs</c>

00:11:00.727 --> 00:11:01.962
<c.magenta>在下面的半小时里</c>

00:11:02.663 --> 00:11:05.766
<c.magenta>我将讲解一些</c>
<c.magenta>你们要为应用做的事</c>

00:11:06.166 --> 00:11:07.668
<c.magenta>为它能与Spotlight一起工作</c>

00:11:08.268 --> 00:11:11.772
<c.magenta>一些为了让你们的用户有个很棒的体验</c>
<c.magenta>而应该要做的</c>

00:11:11.939 --> 00:11:13.607
<c.magenta>和一些我们加入的新APIs</c>

00:11:13.674 --> 00:11:16.710
<c.magenta>为了让你们能更便捷地达到</c>
<c.magenta>你们想要的结果</c>

00:11:18.312 --> 00:11:21.415
<c.magenta>那大概以你们实现这个的顺序</c>

00:11:21.782 --> 00:11:25.586
<c.magenta>我来讲一下</c>
<c.magenta>关于如何把你们的内容加入到</c>

00:11:25.652 --> 00:11:28.622
<c.magenta>Spotlight的索引</c>
<c.magenta>并保持最新</c>

00:11:29.890 --> 00:11:31.525
<c.magenta>展示方式和用户体验</c>

00:11:32.860 --> 00:11:36.230
<c.magenta>在你们的应用里运行无论是恢复内容</c>

00:11:36.663 --> 00:11:38.265
<c.magenta>或是继续搜索</c>

00:11:39.132 --> 00:11:41.768
<c.magenta>之后 我将会聊一下</c>
<c.magenta>新的Search API</c>

00:11:42.603 --> 00:11:46.106
<c.magenta>在Vipul回到台上给你们一个</c>
<c.magenta>关于排序的简介之前</c>

00:11:48.375 --> 00:11:51.612
<c.magenta>我们使用了三种技术</c>
<c.magenta>它们能支持大部分的用例</c>

00:11:52.312 --> 00:11:55.015
<c.magenta>你们设备上的核心支持</c>
<c.magenta>CoreSpotlight</c>

00:11:56.116 --> 00:11:58.752
<c.magenta>用于应用历史记录的</c>
<c.magenta>NSUserActivity</c>

00:11:59.953 --> 00:12:03.957
<c.magenta>及web markup公开在线内容</c>
<c.magenta>的通用链接</c>

00:11:59.953 --> 00:12:03.957
<c.magenta>及web markup公开在线内容</c>
<c.magenta>的通用链接</c>

00:12:05.559 --> 00:12:08.295
<c.magenta>当然 你们可以将这三者一起使用</c>

00:12:09.229 --> 00:12:12.099
<c.magenta>举个例子 设想一个食谱的应用</c>

00:12:13.367 --> 00:12:16.603
<c.magenta>它提供一个能访问大量食谱的接口</c>

00:12:17.237 --> 00:12:21.675
<c.magenta>由于网站上有许多宿主</c>
<c.magenta>深层链接会是一个好的选择</c>

00:12:22.342 --> 00:12:26.180
<c.magenta>这个应用也许会有收藏功能</c>
<c.magenta>通过CoreSpotlight实现</c>

00:12:27.748 --> 00:12:31.418
<c.magenta>你们的用户会想返回至之前看过的内容</c>

00:12:31.652 --> 00:12:34.354
<c.magenta>那为了最好的体验</c>
<c.magenta>你们也可以使用应用历史</c>

00:12:34.721 --> 00:12:36.557
<c.magenta>通过NSUserActivity</c>

00:12:38.892 --> 00:12:41.929
<c.magenta>好的 在座没离开去午餐的各位</c>

00:12:42.296 --> 00:12:43.964
<c.magenta>我们跳过Search APIs简介</c>

00:12:44.031 --> 00:12:46.166
<c.magenta>直接来聊下怎样对内容建立索引</c>

00:12:46.800 --> 00:12:48.468
<c.magenta>从CoreSpotlight开始</c>

00:12:49.837 --> 00:12:53.073
<c.magenta>CoreSpotlight是</c>
<c.magenta>在iOS上用于建立索引的API</c>

00:12:53.407 --> 00:12:55.676
<c.magenta>在设备上并支持文件保护</c>

00:12:56.109 --> 00:12:58.278
<c.magenta>这样你们可以</c>
<c.magenta>对用户的私人内容建立索引</c>

00:12:59.179 --> 00:13:02.583
<c.magenta>你们的应用拥有掌控权</c>
<c.magenta>你们决定对什么添加索引</c>

00:12:59.179 --> 00:13:02.583
<c.magenta>你们的应用拥有掌控权</c>
<c.magenta>你们决定对什么添加索引</c>

00:13:04.251 --> 00:13:07.254
<c.magenta>你们可以对应用的所有内容建立索引</c>
<c.magenta>可以是收藏</c>

00:13:07.387 --> 00:13:10.557
<c.magenta>和书签 信息和邮件</c>

00:13:10.724 --> 00:13:14.428
<c.magenta>文档 图片 音乐视频 游戏关卡</c>

00:13:14.494 --> 00:13:17.431
<c.magenta>你们应用的进入点 等等</c>

00:13:19.666 --> 00:13:21.268
<c.magenta>有两个基本的操作</c>

00:13:22.603 --> 00:13:25.239
<c.magenta>第一 你们要将那些东西添加至索引</c>

00:13:26.440 --> 00:13:29.877
<c.magenta>通过创建一个</c>
<c.magenta>CSSearchableItemAttributeSet来实现</c>

00:13:30.344 --> 00:13:37.150
<c.magenta>它包含了元数据和其它的相关内容</c>

00:13:37.851 --> 00:13:38.685
<c.magenta>然后</c>

00:13:40.854 --> 00:13:41.955
<c.magenta>你们要设置至少一个属性</c>

00:13:42.022 --> 00:13:43.824
<c.magenta>这里 我们设定了</c>
<c.magenta>display name</c>

00:13:46.727 --> 00:13:49.796
<c.magenta>你们可使用AttributeSet</c>
<c.magenta>创建可搜索内容</c>

00:13:51.431 --> 00:13:54.801
<c.magenta>可使用uniqueIdentifier</c>
<c.magenta>Spotlight将会用它</c>

00:13:55.335 --> 00:13:58.372
<c.magenta>在下面的操作里</c>
<c.magenta>来识别项目内容</c>

00:13:58.438 --> 00:14:01.141
<c.magenta>当我们开启你们应用的时候</c>
<c.magenta>它也会被用到</c>

00:13:58.438 --> 00:14:01.141
<c.magenta>当我们开启你们应用的时候</c>
<c.magenta>它也会被用到</c>

00:14:02.309 --> 00:14:04.011
<c.magenta>那domainIdentifier</c>

00:14:04.478 --> 00:14:08.248
<c.magenta>它让你们能设定共享的属性</c>

00:14:08.315 --> 00:14:11.118
<c.magenta>在各种的项目之间</c>
<c.magenta>之后的删除里可以用得到</c>

00:14:12.419 --> 00:14:15.689
<c.magenta>你们指示CoreSpotlight</c>
<c.magenta>添加项目至索引</c>

00:14:16.957 --> 00:14:18.492
<c.magenta>当回调方法被调用时</c>

00:14:19.526 --> 00:14:21.762
<c.magenta>项目会被安全地提交至储存</c>

00:14:22.529 --> 00:14:24.998
<c.magenta>或 一个错误信息会被传递至</c>
<c.magenta>回调日志</c>

00:14:28.202 --> 00:14:31.572
<c.magenta>对删除项目 我们有三个APIs</c>

00:14:32.039 --> 00:14:35.008
<c.magenta>你们可以通过识别符来删除</c>
<c.magenta>一个特定的项目</c>

00:14:35.909 --> 00:14:37.878
<c.magenta>举例 如要删除一个文档</c>

00:14:41.748 --> 00:14:43.617
<c.magenta>也能删除一组项目</c>

00:14:44.084 --> 00:14:46.587
<c.magenta>通过使用之前提过的</c>
<c.magenta>domainIdentifier</c>

00:14:46.653 --> 00:14:49.456
<c.magenta>这会很有用</c>
<c.magenta>如果用户从一个账户注销</c>

00:14:49.623 --> 00:14:52.726
<c.magenta>终止订阅或是类似的</c>

00:14:54.127 --> 00:14:58.131
<c.magenta>最后 你们可以从应用里</c>
<c.magenta>删除所有的项目</c>

00:14:58.298 --> 00:15:02.236
<c.magenta>这会很有用</c>
<c.magenta>如果你们遇到像版本不匹配</c>

00:14:58.298 --> 00:15:02.236
<c.magenta>这会很有用</c>
<c.magenta>如果你们遇到像版本不匹配</c>

00:15:02.569 --> 00:15:05.138
<c.magenta>然后你们要清楚索引 重新建立</c>

00:15:05.939 --> 00:15:09.643
<c.magenta>这也会在应用被卸载时被系统调用</c>

00:15:14.114 --> 00:15:17.351
<c.magenta>那现在让我们来看一些最佳的实践和</c>
<c.magenta>一些进阶的使用</c>

00:15:17.918 --> 00:15:21.955
<c.magenta>我们将会讲一下如何注册索引代理</c>
<c.magenta>使用CoreSpotlight</c>

00:15:22.022 --> 00:15:24.358
<c.magenta>客户状态操控渐进的</c>
<c.magenta>索引建立</c>

00:15:25.392 --> 00:15:26.994
<c.magenta>一些性能问题</c>

00:15:28.095 --> 00:15:30.097
<c.magenta>和如何创建</c>
<c.magenta>CoreSpotlight扩展</c>

00:15:32.633 --> 00:15:34.468
<c.magenta>你们需要注册一个</c>
<c.magenta>索引代理</c>

00:15:34.535 --> 00:15:36.803
<c.magenta>因为这让Spotlight初始索引</c>

00:15:37.070 --> 00:15:39.540
<c.magenta>当你们的应用第一次在系统上运行时</c>

00:15:39.773 --> 00:15:41.375
<c.magenta>或在恢复备份之后</c>

00:15:41.909 --> 00:15:45.612
<c.magenta>当用户安装你们的应用时,</c>
<c.magenta>或在灾难恢复时</c>

00:15:46.647 --> 00:15:48.715
<c.magenta>这也能让Spotlight发出</c>

00:15:48.782 --> 00:15:51.084
<c.magenta>请求让你们重新对某项目建立索引</c>

00:15:52.920 --> 00:15:55.189
<c.magenta>这通常是由于</c>
<c.magenta>你们设定了一个过期日期</c>

00:15:55.255 --> 00:15:58.458
<c.magenta>Spotlight想检测项目</c>
<c.magenta>是否已真的过期</c>

00:16:00.661 --> 00:16:03.230
<c.magenta>那作为索引代理</c>
<c.magenta>需要实现</c>

00:16:03.297 --> 00:16:05.265
<c.magenta>CSSearchableIndexDelegate协议</c>

00:16:06.233 --> 00:16:07.768
<c.magenta>它有两个必要的方法</c>

00:16:09.002 --> 00:16:10.838
<c.magenta>ReindexAllSearchableItems</c>

00:16:11.305 --> 00:16:14.908
<c.magenta>当要添加任何东西至索引时</c>
<c.magenta>它就会被调用</c>

00:16:15.342 --> 00:16:18.412
<c.magenta>如果你们在自己的数据库里跟踪</c>
<c.magenta>个别项目的索引</c>

00:16:18.879 --> 00:16:22.716
<c.magenta>当接收到这个方法时</c>
<c.magenta>你们要清除索引的状态</c>

00:16:23.050 --> 00:16:25.652
<c.magenta>除非你们用客户状态</c>
<c.magenta>我们等下细说</c>

00:16:27.487 --> 00:16:31.091
<c.magenta>第二个被调用的方法是</c>
<c.magenta>使用识别符重新建立索引</c>

00:16:32.626 --> 00:16:36.196
<c.magenta>当它被调用时 你们查看</c>
<c.magenta>Spotlight正请求的项目</c>

00:16:37.231 --> 00:16:40.100
<c.magenta>然后 将它们添加至索引或删除</c>
<c.magenta>视情况而定</c>

00:16:40.534 --> 00:16:44.271
<c.magenta>对于这两个方法 你们要调用</c>
<c.magenta>acknowledgmentHandler</c>

00:16:44.338 --> 00:16:48.041
<c.magenta>仅当你们完成了或收到了最后的回调</c>
<c.magenta>对任何任务</c>

00:16:48.108 --> 00:16:49.543
<c.magenta>你们派给CoreSpotlight</c>

00:16:49.910 --> 00:16:54.548
<c.magenta>这样就能确保项目的索引被完整建立</c>

00:16:54.648 --> 00:16:56.483
<c.magenta>并在下面的流程不再被调用</c>

00:16:57.184 --> 00:17:02.689
<c.magenta>若你们不调用acknowledgmentHandler</c>
<c.magenta>那两个方法或许会被再次调用 若过早地调用</c>

00:16:57.184 --> 00:17:02.689
<c.magenta>若你们不调用acknowledgmentHandler</c>
<c.magenta>那两个方法或许会被再次调用 若过早地调用</c>

00:17:03.357 --> 00:17:05.358
<c.magenta>你们也许还未来得及完成对索引的建立</c>

00:17:07.060 --> 00:17:10.196
<c.magenta>对某些应用来说</c>
<c.magenta>我们发现会更便捷</c>

00:17:10.263 --> 00:17:13.300
<c.magenta>通过使用客户状态</c>
<c.magenta>相比较于尝试着管理</c>

00:17:13.400 --> 00:17:16.270
<c.magenta>索引建立的回调与数据库的事务</c>

00:17:19.205 --> 00:17:22.809
<c.magenta>客户状态提供了</c>
<c.magenta>一个异步的方式</c>

00:17:22.876 --> 00:17:26.012
<c.magenta>让你的项目能与</c>
<c.magenta>Spotlight里的同步</c>

00:17:27.414 --> 00:17:31.785
<c.magenta>因为是异步 你们其实是在应用一个</c>
<c.magenta>一致性模型</c>

00:17:33.687 --> 00:17:37.124
<c.magenta>但你们保持对Spotlight与</c>
<c.magenta>你们数据库之间的同步</c>

00:17:37.824 --> 00:17:39.393
<c.magenta>没有任何多余步骤</c>

00:17:41.128 --> 00:17:44.464
<c.magenta>客户状态是个opaque token</c>
<c.magenta>它被储存在Spotlight索引里</c>

00:17:44.631 --> 00:17:46.166
<c.magenta>在索引建立的同时被更新</c>

00:17:46.233 --> 00:17:48.502
<c.magenta>然后当应用被再次开启时被取回</c>

00:17:49.903 --> 00:17:52.606
<c.magenta>一般来说 最简单的实现方式是</c>

00:17:52.673 --> 00:17:54.842
<c.magenta>在你们的数据库里添加注释</c>

00:17:55.442 --> 00:17:56.910
<c.magenta>举例 次序号</c>

00:17:57.911 --> 00:18:00.914
<c.magenta>你们在Spotlight里将它</c>
<c.magenta>作为客户状态使用</c>

00:17:57.911 --> 00:18:00.914
<c.magenta>你们在Spotlight里将它</c>
<c.magenta>作为客户状态使用</c>

00:18:01.348 --> 00:18:04.451
<c.magenta>再次开启后</c>
<c.magenta>你们要检测客户状态</c>

00:18:04.852 --> 00:18:06.954
<c.magenta>如果它与你们所期望的不符</c>

00:18:07.020 --> 00:18:09.056
<c.magenta>那你们要为数据库里所有的项目</c>
<c.magenta>建立索引</c>

00:18:09.456 --> 00:18:12.426
<c.magenta>使用比你们回传至Spotlight</c>
<c.magenta>的更高次序号</c>

00:18:13.560 --> 00:18:16.063
<c.magenta>另一个方式是 通过次序号取得</c>

00:18:16.763 --> 00:18:20.567
<c.magenta>journal playback</c>
<c.magenta>的起始位置</c>

00:18:22.236 --> 00:18:23.737
<c.magenta>这会是很有用的</c>

00:18:23.971 --> 00:18:26.340
<c.magenta>让你们的内容异步保持最新</c>

00:18:27.407 --> 00:18:30.110
<c.magenta>也能确保不消耗过多的能源</c>

00:18:33.680 --> 00:18:37.117
<c.magenta>为能使用客户状态</c>
<c.magenta>你们要创建一个命名的索引实例</c>

00:18:37.651 --> 00:18:41.088
<c.magenta>这名字让我们知道</c>
<c.magenta>你们想要的客户状态</c>

00:18:41.688 --> 00:18:43.824
<c.magenta>只能获取</c>
<c.magenta>应用的客户状态</c>

00:18:43.891 --> 00:18:46.960
<c.magenta>但你们可以对多个数据库</c>
<c.magenta>建立索引</c>

00:18:47.528 --> 00:18:50.631
<c.magenta>这样的话 你们要给每个数据库</c>
<c.magenta>一个特有的名字</c>

00:18:51.598 --> 00:18:54.134
<c.magenta>有了索引后</c>
<c.magenta>你们要初始一个索引批处理</c>

00:18:54.968 --> 00:18:56.637
<c.magenta>你们像往常一样添加可查询项目</c>

00:18:57.571 --> 00:18:59.973
<c.magenta>completionHandler</c>
<c.magenta>在这里并不重要</c>

00:19:00.974 --> 00:19:04.144
<c.magenta>因为当批处理完成时</c>
<c.magenta>你们会得到一个完成信号</c>

00:19:06.013 --> 00:19:08.482
<c.magenta>你们要通过运算得到所选状态</c>

00:19:10.184 --> 00:19:11.818
<c.magenta>再将它递入Spotlight</c>

00:19:13.320 --> 00:19:15.022
<c.magenta>当你们完成了批处理后</c>

00:19:16.356 --> 00:19:20.961
<c.magenta>这里你们需要留意</c>
<c.magenta>completionHandler</c>

00:19:23.630 --> 00:19:26.133
<c.magenta>你们应用下次开启时</c>
<c.magenta>你们获取客户状态</c>

00:19:27.000 --> 00:19:30.037
<c.magenta>你们要决定需要执行哪些操作</c>

00:19:30.804 --> 00:19:33.073
<c.magenta>让Spotlight才能和</c>
<c.magenta>你们当前状态同步</c>

00:19:34.241 --> 00:19:37.211
<c.magenta>由于客户状态是</c>
<c.magenta>与批处理一起储存于索引</c>

00:19:37.611 --> 00:19:38.879
<c.magenta>因此确保了完整性</c>

00:19:39.179 --> 00:19:41.648
<c.magenta>你们可以重演每一个需要的操作</c>

00:19:42.049 --> 00:19:43.684
<c.magenta>使两者同步</c>

00:19:44.585 --> 00:19:45.953
<c.magenta>当你们的应用下次被开启时</c>

00:19:46.053 --> 00:19:48.288
<c.magenta>你们会使用同一个名字</c>
<c.magenta>创建一个索引实例</c>

00:19:49.089 --> 00:19:52.326
<c.magenta>你们会取得客户状态</c>
<c.magenta>这就是一个异步的调用</c>

00:19:53.227 --> 00:19:55.896
<c.magenta>你们要在回调里处理所有的错误</c>

00:19:57.097 --> 00:20:00.100
<c.magenta>还要检查你们取回的状态</c>
<c.magenta>是否是你们想要的</c>

00:19:57.097 --> 00:20:00.100
<c.magenta>还要检查你们取回的状态</c>
<c.magenta>是否是你们想要的</c>

00:20:00.601 --> 00:20:04.137
<c.magenta>如果不是 你们调用这方法 使其同步</c>

00:20:05.138 --> 00:20:07.174
<c.magenta>现在让我们来看下性能问题</c>

00:20:07.541 --> 00:20:09.610
<c.magenta>Spotlight处理速度很快</c>

00:20:09.977 --> 00:20:12.045
<c.magenta>所以要在你们那端将开销最小化</c>

00:20:12.179 --> 00:20:15.115
<c.magenta>来确保应用能跟得上</c>

00:20:16.216 --> 00:20:19.186
<c.magenta>你们要优化任何对</c>
<c.magenta>文件或数据库的访问</c>

00:20:20.454 --> 00:20:23.423
<c.magenta>并留意内存使用情况</c>

00:20:24.625 --> 00:20:27.227
<c.magenta>注意对CoreSpotlight</c>
<c.magenta>每次调用都有一定成本</c>

00:20:27.928 --> 00:20:31.565
<c.magenta>所以 可能时 尽量成批传递</c>
<c.magenta>避免单个传递</c>

00:20:32.900 --> 00:20:36.136
<c.magenta>只是十个一小批</c>

00:20:36.370 --> 00:20:39.540
<c.magenta>也会减少一个数量级的IPC开销</c>

00:20:42.009 --> 00:20:45.612
<c.magenta>由于你们的应用会在用户使用的同时</c>
<c.magenta>建立索引</c>

00:20:45.979 --> 00:20:48.148
<c.magenta>确保你们不会阻塞主线程</c>

00:20:49.316 --> 00:20:54.188
<c.magenta>最后 避免干扰在使用后台线程的UI</c>

00:20:55.756 --> 00:20:58.258
<c.magenta>好 让我们看下</c>
<c.magenta>CoreSpotlight扩展</c>

00:20:58.859 --> 00:21:01.662
<c.magenta>扩展能在你们的应用不运行的情况下</c>
<c.magenta>建立索引</c>

00:20:58.859 --> 00:21:01.662
<c.magenta>扩展能在你们的应用不运行的情况下</c>
<c.magenta>建立索引</c>

00:21:03.430 --> 00:21:04.698
<c.magenta>这能让你们赶上进度</c>

00:21:05.866 --> 00:21:09.236
<c.magenta>在使用备份进行灾难恢复之后</c>

00:21:09.903 --> 00:21:12.139
<c.magenta>或你们的图标过期时</c>

00:21:12.206 --> 00:21:14.174
<c.magenta>Spotlight能使用你们的扩展</c>

00:21:14.508 --> 00:21:17.144
<c.magenta>不用使用你们的应用</c>

00:21:17.244 --> 00:21:19.613
<c.magenta>这很好 因为那时你们的应用</c>
<c.magenta>可能没在运行</c>

00:21:21.315 --> 00:21:24.384
<c.magenta>扩展的接口与</c>
<c.magenta>索引代理相同</c>

00:21:24.985 --> 00:21:29.923
<c.magenta>若你们能构建你们的代码让索引代理</c>
<c.magenta>成为独立的部分</c>

00:21:30.190 --> 00:21:33.660
<c.magenta>那实现扩展也是十分容易的</c>

00:21:35.662 --> 00:21:37.764
<c.magenta>让项目能被你们的扩展访问</c>

00:21:37.831 --> 00:21:39.533
<c.magenta>你们可使用share.groups</c>

00:21:39.766 --> 00:21:41.468
<c.magenta>要获得更多相关信息</c>

00:21:41.535 --> 00:21:45.005
<c.magenta>看一下去年</c>
<c.magenta>“应用扩展最佳实践”的演讲</c>

00:21:45.906 --> 00:21:48.208
<c.magenta>下面让我们来看下</c>
<c.magenta>如何保持项目为最新</c>

00:21:48.675 --> 00:21:51.044
<c.magenta>如我之前所提到的</c>
<c.magenta>你们能用过期日期</c>

00:21:51.845 --> 00:21:54.481
<c.magenta>来预防旧内容堆积在索引里</c>

00:21:55.115 --> 00:21:59.686
<c.magenta>CoreSpotlight会在</c>
<c.magenta>将近过期日期时调出你们的应用</c>

00:22:00.521 --> 00:22:03.290
<c.magenta>你们可以更新过期日期</c>
<c.magenta>或更新项目的数据</c>

00:22:03.357 --> 00:22:04.324
<c.magenta>如果有需要</c>

00:22:05.392 --> 00:22:07.594
<c.magenta>若你们要将新内容</c>
<c.magenta>加至Spotlight</c>

00:22:08.495 --> 00:22:10.030
<c.magenta>你们可以使用后台获取</c>

00:22:10.464 --> 00:22:13.133
<c.magenta>这能让你们的应用在后台打开</c>

00:22:14.234 --> 00:22:18.005
<c.magenta>让你们添加内容并建立索引</c>

00:22:18.972 --> 00:22:19.806
<c.magenta>最后</c>

00:22:21.408 --> 00:22:25.646
<c.magenta>若你们采用非常规或非高频率的更新推送模型</c>

00:22:25.913 --> 00:22:28.382
<c.magenta>你们可以使用静默推送</c>

00:22:29.449 --> 00:22:32.819
<c.magenta>让你们的服务器来告诉你们必要的更新</c>

00:22:34.021 --> 00:22:35.689
<c.magenta>想了解跟多关于后台获取</c>

00:22:35.756 --> 00:22:37.291
<c.magenta>和静默推送</c>

00:22:37.791 --> 00:22:41.562
<c.magenta>可以看下“多任务的新特性”演讲</c>

00:22:41.628 --> 00:22:43.430
<c.magenta>2013年的 WWDC</c>

00:22:44.665 --> 00:22:47.034
<c.magenta>这就是CoreSpotlight</c>
<c.magenta>索引的所有内容</c>

00:22:47.568 --> 00:22:50.404
<c.magenta>下面我们聊下应用历史</c>
<c.magenta>与NSUserActivity</c>

00:22:52.840 --> 00:22:56.243
<c.magenta>NSUserActivity</c>
<c.magenta>在iOS 8里为Handoff添加</c>

00:22:56.710 --> 00:23:00.380
<c.magenta>他让你们能创建应用当前状态的</c>
<c.magenta>一个代表</c>

00:22:56.710 --> 00:23:00.380
<c.magenta>他让你们能创建应用当前状态的</c>
<c.magenta>一个代表</c>

00:23:00.614 --> 00:23:02.282
<c.magenta>可以被递入另一个设备</c>

00:23:02.349 --> 00:23:06.119
<c.magenta>iOS 9后存于Spotlight</c>
<c.magenta>索引里支持应用历史</c>

00:23:09.523 --> 00:23:13.160
<c.magenta>当用户浏览你们的应用时</c>
<c.magenta>你们提交活动</c>

00:23:13.760 --> 00:23:17.130
<c.magenta>为了用户可能会记得并想返回去的内容</c>

00:23:19.299 --> 00:23:22.936
<c.magenta>那你们应该问自己</c>
<c.magenta>什么时候用户活动</c>

00:23:23.003 --> 00:23:26.974
<c.magenta>应该有索引 简单的说</c>
<c.magenta>就是用户是否会返回到这</c>

00:23:27.508 --> 00:23:30.110
<c.magenta>若相同项目通过</c>
<c.magenta>CoreSpotlight有索引</c>

00:23:30.611 --> 00:23:32.379
<c.magenta>那答案基本上时肯定的</c>

00:23:34.381 --> 00:23:38.085
<c.magenta>2014年的“采用切换”演讲</c>
<c.magenta>有许多相关的信息</c>

00:23:38.151 --> 00:23:40.153
<c.magenta>关于如何使用</c>
<c.magenta>NSUserActivity</c>

00:23:42.456 --> 00:23:44.691
<c.magenta>为了让搜索能使用</c>
<c.magenta>NSUserActivity</c>

00:23:44.791 --> 00:23:47.794
<c.magenta>你要标记它为可查询</c>
<c.magenta>并为元数据添加索引</c>

00:23:47.861 --> 00:23:49.930
<c.magenta>通过使用</c>
<c.magenta>CSSearchableItemAttributeSet</c>

00:23:52.366 --> 00:23:53.634
<c.magenta>你们标记它为可查询</c>

00:23:53.967 --> 00:23:56.470
<c.magenta>通过设定eligibleForSearch属性为真</c>

00:23:58.972 --> 00:24:02.209
<c.magenta>你们也可标记NSUserActivity</c>
<c.magenta>让它能建立公开索引</c>

00:23:58.972 --> 00:24:02.209
<c.magenta>你们也可标记NSUserActivity</c>
<c.magenta>让它能建立公开索引</c>

00:24:02.276 --> 00:24:04.378
<c.magenta>让它成为网上索引的候选</c>

00:24:04.645 --> 00:24:06.313
<c.magenta>Vipul会等一下来细谈</c>

00:24:07.147 --> 00:24:09.983
<c.magenta>完成后 它将作为搜索结果显示在</c>
<c.magenta>Spotlight Search里</c>

00:24:10.050 --> 00:24:12.953
<c.magenta>你们的应用可以返回到用户的活动</c>

00:24:13.287 --> 00:24:15.022
<c.magenta>当用户在Spotlight里选择它</c>

00:24:22.296 --> 00:24:25.199
<c.magenta>你们的用户只需记得一个关键词</c>

00:24:26.733 --> 00:24:28.802
<c.magenta>从他们之前所见的</c>
<c.magenta>这就能将他们带回到</c>

00:24:28.869 --> 00:24:30.470
<c.magenta>你们应用里的内容</c>

00:24:33.941 --> 00:24:38.745
<c.magenta>好的 就如我所说的 你们可使用</c>
<c.magenta>CoreSpotlight和NSUserActivity</c>

00:24:38.812 --> 00:24:40.480
<c.magenta>对一样的内容</c>

00:24:42.950 --> 00:24:45.252
<c.magenta>区别在于</c>
<c.magenta>NSUserActivity显示</c>

00:24:45.352 --> 00:24:47.855
<c.magenta>用户在你们的应用里做了些什么</c>

00:24:48.255 --> 00:24:51.124
<c.magenta>CoreSpotlight是指</c>
<c.magenta>你的应用有些什么</c>

00:24:51.959 --> 00:24:55.429
<c.magenta>所以若你们同时使用两者</c>
<c.magenta>可关联NSUserActivity</c>

00:24:55.495 --> 00:24:57.831
<c.magenta>与CSSearchableItem</c>
<c.magenta>对相同的内容</c>

00:24:58.198 --> 00:25:01.168
<c.magenta>为排序提供帮助</c>
<c.magenta>并防止重复的结果</c>

00:24:58.198 --> 00:25:01.168
<c.magenta>为排序提供帮助</c>
<c.magenta>并防止重复的结果</c>

00:25:02.202 --> 00:25:05.405
<c.magenta>这能通过设定</c>
<c.magenta>relatedUniqueIdentifier属性来达成</c>

00:25:06.340 --> 00:25:08.942
<c.magenta>它在AttributeSet里</c>
<c.magenta>将它设定成uniqueIdentifier</c>

00:25:09.009 --> 00:25:11.378
<c.magenta>对应你想关联的</c>
<c.magenta>CSSearchableItem</c>

00:25:12.913 --> 00:25:15.682
<c.magenta>这会把NSUserActivity</c>
<c.magenta>的生存周期</c>

00:25:16.083 --> 00:25:17.384
<c.magenta>与CSSearchableItem</c>
<c.magenta>联系在一起</c>

00:25:17.718 --> 00:25:20.654
<c.magenta>为保护你们</c>
<c.magenta>防止数据被遗留在设备上</c>

00:25:20.888 --> 00:25:23.557
<c.magenta>在用户删除了私人的内容之后</c>

00:25:26.093 --> 00:25:30.831
<c.magenta>不过 不是所有数据都是私人的</c>
<c.magenta>都由用户所管理</c>

00:25:31.698 --> 00:25:34.968
<c.magenta>举例 我们之前提到的食谱应用里</c>

00:25:35.269 --> 00:25:37.371
<c.magenta>你们或许想关联</c>
<c.magenta>NSUserActivity</c>

00:25:38.105 --> 00:25:41.775
<c.magenta>与一个可能CSSearchableItem</c>
<c.magenta>一个当前不存在的项目</c>

00:25:43.443 --> 00:25:46.079
<c.magenta>用户可能在将来把其作为收藏</c>

00:25:47.748 --> 00:25:50.050
<c.magenta>如果你们用了relatedUniqueIdentifier</c>

00:25:50.117 --> 00:25:55.055
<c.magenta>CoreSpotlight会在你们添加</c>
<c.magenta>NSUserActivity时立即将其删除</c>

00:25:55.923 --> 00:25:57.891
<c.magenta>因为 它所关联的项目当前不存在</c>

00:25:58.692 --> 00:26:01.161
<c.magenta>为了解决这个问题</c>
<c.magenta>我们加入了一个新的属性</c>

00:25:58.692 --> 00:26:01.161
<c.magenta>为了解决这个问题</c>
<c.magenta>我们加入了一个新的属性</c>

00:26:01.395 --> 00:26:06.366
<c.magenta>weakRelatedUniqueIdentifier</c>
<c.magenta>它让你们能弱绑定CSSearchableItem</c>

00:26:07.835 --> 00:26:10.437
<c.magenta>它能在CSSearchableItem之前存在</c>

00:26:10.504 --> 00:26:12.940
<c.magenta>并会一直存在</c>
<c.magenta>直至CSSearchableItem被删除</c>

00:26:14.174 --> 00:26:16.543
<c.magenta>至于relatedUniqueIdentifier</c>

00:26:16.610 --> 00:26:19.279
<c.magenta>你们只要在AttributeSet</c>
<c.magenta>设定这个属性</c>

00:26:19.346 --> 00:26:20.848
<c.magenta>给NSUserActivity</c>

00:26:23.550 --> 00:26:28.589
<c.magenta>缺点是当</c>
<c.magenta>CSSearchableItem被删除后</c>

00:26:29.189 --> 00:26:31.325
<c.magenta>NSUserActivity</c>
<c.magenta>会继续存在</c>

00:26:31.825 --> 00:26:35.829
<c.magenta>所以 如果你们担心</c>
<c.magenta>可查询项目的生存期</c>

00:26:35.896 --> 00:26:37.397
<c.magenta>或NSUserActivity</c>

00:26:37.464 --> 00:26:41.435
<c.magenta>那你们要自己删除</c>
<c.magenta>NSUserActivity</c>

00:26:42.236 --> 00:26:44.705
<c.magenta>有幸的是 在iOS 10里</c>

00:26:45.205 --> 00:26:46.473
<c.magenta>我们让这成为了可能</c>

00:26:47.674 --> 00:26:50.377
<c.magenta>我们添加了domainIdentifiers</c>
<c.magenta>至NSUserActivities</c>

00:26:51.612 --> 00:26:54.548
<c.magenta>这是CSSearchableItemAttributeSet的一部分</c>

00:26:55.883 --> 00:26:59.987
<c.magenta>它能让你们通过domainIdentifier</c>
<c.magenta>删除NSUserActivities</c>

00:27:00.087 --> 00:27:02.222
<c.magenta>就像对CSSearchableItem一样</c>

00:27:03.323 --> 00:27:06.426
<c.magenta>如果你们同时使用CSSearchableItems</c>
<c.magenta>和NSUserActivities</c>

00:27:06.493 --> 00:27:09.596
<c.magenta>使用相同的domainIdentifier会是一个</c>
<c.magenta>明智的选择</c>

00:27:10.898 --> 00:27:14.868
<c.magenta>这就是如何在iOS 10里</c>
<c.magenta>通过NSUserActivity建立索引</c>

00:27:15.335 --> 00:27:18.906
<c.magenta>下面 让我们来聊下通用链接</c>
<c.magenta>与web markup</c>

00:27:20.774 --> 00:27:25.245
<c.magenta>驱动你们应用的内容也许是在网上的</c>
<c.magenta>而不是在本地应用的内部</c>

00:27:26.313 --> 00:27:28.682
<c.magenta>如这些是公开内容</c>
<c.magenta>你们可使用web markup</c>

00:27:28.749 --> 00:27:31.785
<c.magenta>让它们通过通用链接索引</c>
<c.magenta>在Spotlight里成为可查询的</c>

00:27:33.220 --> 00:27:35.522
<c.magenta>这很适合网站上的内容</c>

00:27:35.589 --> 00:27:36.790
<c.magenta>和应用内部的</c>

00:27:36.957 --> 00:27:40.727
<c.magenta>也是一个好的解决方法</c>
<c.magenta>当项目内容太大 无法储存在设备上时</c>

00:27:41.762 --> 00:27:43.830
<c.magenta>由于 你们的内容在网上</c>

00:27:44.331 --> 00:27:47.768
<c.magenta>没有应用的用户也可以看到结果</c>

00:27:48.869 --> 00:27:53.807
<c.magenta>这能让你们招揽更多的用户</c>
<c.magenta>增进应用的安装</c>

00:27:54.875 --> 00:27:59.146
<c.magenta>结果可同时在Spotlight</c>
<c.magenta>和Safari里显示</c>

00:27:59.346 --> 00:28:01.782
<c.magenta>让你们的内容可以</c>
<c.magenta>让更多的用户看到</c>

00:27:59.346 --> 00:28:01.782
<c.magenta>让你们的内容可以</c>
<c.magenta>让更多的用户看到</c>

00:28:04.518 --> 00:28:08.422
<c.magenta>那要实现</c>
<c.magenta>通用链接索引</c>

00:28:08.822 --> 00:28:10.190
<c.magenta>你们要允许索引</c>

00:28:10.858 --> 00:28:14.161
<c.magenta>要让Applebot能调用</c>
<c.magenta>你们网站的文本</c>

00:28:15.229 --> 00:28:16.997
<c.magenta>还要让Apple Note</c>
<c.magenta>能进入网站</c>

00:28:17.064 --> 00:28:20.434
<c.magenta>在提交应用至App Store时</c>
<c.magenta>指定调用的URL</c>

00:28:22.970 --> 00:28:26.006
<c.magenta>对于深层链接 强烈建议</c>
<c.magenta>用通用链接</c>

00:28:26.373 --> 00:28:28.675
<c.magenta>这里你们需要实现</c>
<c.magenta>双重身份验证</c>

00:28:28.742 --> 00:28:30.110
<c.magenta>在网站端和在应用端</c>

00:28:31.411 --> 00:28:34.314
<c.magenta>在你们的应用代理里实现</c>
<c.magenta>continueUserActivity方法</c>

00:28:34.414 --> 00:28:37.851
<c.magenta>为确保当用户选择了结果时</c>
<c.magenta>你们的应用会处理深层链接</c>

00:28:39.586 --> 00:28:42.222
<c.magenta>使用schema.org和</c>
<c.magenta>Open Graph标记你们的内容</c>

00:28:42.723 --> 00:28:45.259
<c.magenta>这能让你们的内容被丰富多样地展现</c>

00:28:46.627 --> 00:28:48.662
<c.magenta>利用Search API验证工具</c>

00:28:49.630 --> 00:28:52.966
<c.magenta>来检查深层链接、标记</c>
<c.magenta>标题、描述 等等</c>

00:28:55.068 --> 00:28:58.572
<c.magenta>去看下2015年的</c>
<c.magenta>“引入Search APIs”演讲</c>

00:28:59.006 --> 00:29:02.342
<c.magenta>和关于通用链接</c>
<c.magenta>的开发者文档</c>

00:28:59.006 --> 00:29:02.342
<c.magenta>和关于通用链接</c>
<c.magenta>的开发者文档</c>

00:29:04.678 --> 00:29:08.182
<c.magenta>这些就是我们当前支持的构架</c>

00:29:08.248 --> 00:29:09.783
<c.magenta>我们打算在将来加入更多</c>

00:29:11.251 --> 00:29:13.887
<c.magenta>留意交互计算</c>
<c.magenta>和总体评级</c>

00:29:13.954 --> 00:29:17.057
<c.magenta>这些对应用的搜索结果排序</c>
<c.magenta>会是十分有用的</c>

00:29:18.759 --> 00:29:20.260
<c.magenta>Apple提供了一个测试工具</c>

00:29:21.728 --> 00:29:23.997
<c.magenta>在search.developer.apple.com</c>

00:29:24.464 --> 00:29:28.302
<c.magenta>如果你们的应用使用深层链接</c>
<c.magenta>应该去看一下</c>

00:29:30.237 --> 00:29:32.906
<c.magenta>它现在可以将你们的结果</c>
<c.magenta>可视化地显示</c>

00:29:32.973 --> 00:29:35.175
<c.magenta>包括对schema.org</c>
<c.magenta>标记的支持</c>

00:29:37.044 --> 00:29:38.912
<c.magenta>从验证工具里所得的内容</c>

00:29:39.079 --> 00:29:42.482
<c.magenta>能帮助你们可视化</c>
<c.magenta>那些通过Applebot爬网程序</c>

00:29:42.883 --> 00:29:46.186
<c.magenta>建立过索引的内容</c>
<c.magenta>包括标题、描述、标记和URL</c>

00:29:47.421 --> 00:29:50.991
<c.magenta>现在你们看过如何通过这三个APIs</c>
<c.magenta>对内容建立索引</c>

00:29:51.191 --> 00:29:54.094
<c.magenta>很有可能你们会想将它们一起使用</c>

00:29:55.562 --> 00:29:57.064
<c.magenta>即使是对相同的内容</c>

00:30:00.968 --> 00:30:04.137
<c.magenta>那当使用多个APIs时 要牢记的是</c>

00:30:04.204 --> 00:30:08.408
<c.magenta>在所有APIs里</c>
<c.magenta>关联代表同一内容的项目</c>

00:30:09.109 --> 00:30:12.145
<c.magenta>通过设定与NSUserActivity</c>
<c.magenta>相关的uniqueIdentifier</c>

00:30:12.212 --> 00:30:14.548
<c.magenta>为CoreSpotlight</c>
<c.magenta>的uniqueIdentifier</c>

00:30:15.048 --> 00:30:20.087
<c.magenta>CoreSpotlight内容的URL</c>
<c.magenta>和NSUserActivity的网页URL</c>

00:30:21.021 --> 00:30:22.523
<c.magenta>为网页URL</c>

00:30:22.589 --> 00:30:26.493
<c.magenta>你们告诉Spotlight</c>
<c.magenta>所有索引里的纪录代表同一个项目</c>

00:30:27.461 --> 00:30:29.530
<c.magenta>这能让你们的查询不会重复</c>

00:30:30.297 --> 00:30:32.999
<c.magenta>这也帮助了项目的排序</c>

00:30:35.569 --> 00:30:39.239
<c.magenta>好的  现在我们看了如何将内容</c>
<c.magenta>添加至索引的三个方法</c>

00:30:40.274 --> 00:30:42.276
<c.magenta>CoreSpotlight对应内容</c>

00:30:43.043 --> 00:30:45.379
<c.magenta>NSUserActivity</c>
<c.magenta>对应用历史</c>

00:30:46.079 --> 00:30:48.048
<c.magenta>通用链接</c>
<c.magenta>与web markup</c>

00:30:48.115 --> 00:30:50.851
<c.magenta>对应网上公开的内容</c>

00:30:53.020 --> 00:30:56.490
<c.magenta>下面让我们聊下</c>
<c.magenta>怎样向用户展示这些信息</c>

00:30:59.893 --> 00:31:03.397
<c.magenta>要在Spotlight里有好的展现</c>
<c.magenta>你需要一组好的缩略图</c>

00:30:59.893 --> 00:31:03.397
<c.magenta>要在Spotlight里有好的展现</c>
<c.magenta>你需要一组好的缩略图</c>

00:31:03.931 --> 00:31:06.333
<c.magenta>默认下Spotlight会</c>
<c.magenta>使用你们应用图标</c>

00:31:07.234 --> 00:31:09.770
<c.magenta>这会让结果乍一看很难区分</c>

00:31:10.637 --> 00:31:13.473
<c.magenta>这不碍事 如果你们只有一个结果</c>

00:31:13.540 --> 00:31:16.710
<c.magenta>但如果有多个结果</c>
<c.magenta>那感觉会是十分不同的</c>

00:31:18.111 --> 00:31:21.481
<c.magenta>与缩略图一样重要</c>
<c.magenta>或许更重要的是标题</c>

00:31:21.615 --> 00:31:23.917
<c.magenta>一个好的标题不只是看起来舒服</c>

00:31:23.984 --> 00:31:26.320
<c.magenta>它也是经常被用户用来搜索的</c>

00:31:28.088 --> 00:31:29.990
<c.magenta>在缩略图和标题之后</c>

00:31:30.858 --> 00:31:33.827
<c.magenta>你们要设置其它的</c>
<c.magenta>适合你们内容的字段</c>

00:31:34.294 --> 00:31:38.465
<c.magenta>提供描述信息会是一个好主意</c>
<c.magenta>像评分 评价</c>

00:31:38.932 --> 00:31:41.368
<c.magenta>日期相关项目的日期属性</c>

00:31:41.435 --> 00:31:47.674
<c.magenta>比如 旅程预定 日期 提醒 事件</c>
<c.magenta>还有很多</c>

00:31:49.543 --> 00:31:52.246
<c.magenta>对于文档 一般的元数据</c>

00:31:52.646 --> 00:31:55.716
<c.magenta>比如 文档大小和页数</c>
<c.magenta>都是很有帮助的</c>

00:31:57.451 --> 00:32:00.020
<c.magenta>如果你们设定了适合内容的类型</c>

00:31:57.451 --> 00:32:00.020
<c.magenta>如果你们设定了适合内容的类型</c>

00:32:00.087 --> 00:32:02.556
<c.magenta>Spotlight可以更好的工作</c>

00:32:03.257 --> 00:32:04.591
<c.magenta>让我们来看些例子</c>

00:32:07.127 --> 00:32:11.064
<c.magenta>Hotel Tonight应用</c>
<c.magenta>很好地利用了缩略图</c>

00:32:11.131 --> 00:32:13.267
<c.magenta>显示了容易识别的地标</c>

00:32:13.367 --> 00:32:15.802
<c.magenta>同时还有标题和有用的描述</c>

00:32:20.374 --> 00:32:22.976
<c.magenta>你们可以使用web markup</c>
<c.magenta>取得相同的效果</c>

00:32:23.043 --> 00:32:26.780
<c.magenta>通过设定og:image og:title</c>
<c.magenta>和og:description</c>

00:32:29.316 --> 00:32:32.486
<c.magenta>Open Table使用</c>
<c.magenta>标题描述 评级</c>

00:32:32.553 --> 00:32:36.657
<c.magenta>与评价相关的属性</c>
<c.magenta>用户能得到很有用的信息</c>

00:32:36.890 --> 00:32:39.393
<c.magenta>让他们在进入应用前</c>
<c.magenta>有适合的选择</c>

00:32:41.295 --> 00:32:43.730
<c.magenta>通过让属性</c>
<c.magenta>能在web markup里获取</c>

00:32:43.964 --> 00:32:47.434
<c.magenta>你们确保了用户会得到一个</c>
<c.magenta>一致的体验</c>

00:32:47.768 --> 00:32:50.304
<c.magenta>无论他们的结果是从</c>
<c.magenta>爬网程序</c>

00:32:51.371 --> 00:32:53.006
<c.magenta>或本地设备的索引得到的</c>

00:32:57.845 --> 00:33:01.248
<c.magenta>一个好的用户体验不仅是关于</c>
<c.magenta>外在的展现</c>

00:32:57.845 --> 00:33:01.248
<c.magenta>一个好的用户体验不仅是关于</c>
<c.magenta>外在的展现</c>

00:33:01.315 --> 00:33:04.151
<c.magenta>也与可搜索的数据有关</c>

00:33:05.085 --> 00:33:09.022
<c.magenta>设定让用户能看懂和记住的属性</c>

00:33:09.289 --> 00:33:11.358
<c.magenta>让你们的内容能很快地被找到</c>

00:33:12.759 --> 00:33:16.930
<c.magenta>相反 在元数据里设定了</c>
<c.magenta>误导性的属性</c>

00:33:17.364 --> 00:33:19.099
<c.magenta>或太多的内容和关键词</c>

00:33:19.166 --> 00:33:22.236
<c.magenta>字典里的词</c>
<c.magenta>会导致你们的结果频繁的呈现</c>

00:33:22.603 --> 00:33:25.105
<c.magenta>但极少会被选中</c>
<c.magenta>这会让你的用户不爽</c>

00:33:25.372 --> 00:33:27.708
<c.magenta>这对排序会有强烈的负面影响</c>

00:33:30.043 --> 00:33:32.713
<c.magenta>另一个好的用户体验的方面</c>

00:33:33.146 --> 00:33:36.183
<c.magenta>是能获取结果重要的部分</c>

00:33:36.250 --> 00:33:37.885
<c.magenta>利用最少的步骤</c>

00:33:38.385 --> 00:33:39.887
<c.magenta>允许快速方式</c>

00:33:41.588 --> 00:33:45.626
<c.magenta>像路线和通话是能让</c>
<c.magenta>你们的用户受益的</c>

00:33:46.393 --> 00:33:47.227
<c.magenta>最后</c>

00:33:49.096 --> 00:33:50.631
<c.magenta>当用户选择了一个项目</c>

00:33:50.697 --> 00:33:54.268
<c.magenta>你们要尽可能快地开启</c>

00:33:54.334 --> 00:33:58.172
<c.magenta>不能有间隙感或多步加载</c>
<c.magenta>阻碍用户</c>

00:33:58.906 --> 00:34:00.207
<c.magenta>让我们来看些例子</c>

00:33:58.906 --> 00:34:00.207
<c.magenta>让我们来看些例子</c>

00:34:02.676 --> 00:34:05.345
<c.magenta>Redfin应用</c>
<c.magenta>提供了一些吸引人的结果</c>

00:34:05.812 --> 00:34:09.416
<c.magenta>通过设定经纬度和允许导航</c>

00:34:09.783 --> 00:34:13.387
<c.magenta>应用让用户能直接到Maps查看地产</c>

00:34:13.853 --> 00:34:18.625
<c.magenta>相似的 这还有个很好的call</c>
<c.magenta>action result的用例</c>

00:34:19.525 --> 00:34:22.763
<c.magenta>你们可以通过设定电话号码属性</c>
<c.magenta>取得相同的结果</c>

00:34:22.829 --> 00:34:25.899
<c.magenta>同样也支持Spotlight的</c>
<c.magenta>phone call属性</c>

00:34:26.333 --> 00:34:27.501
<c.magenta>看着这些结果</c>

00:34:28.034 --> 00:34:30.571
<c.magenta>已经对地点熟悉了的用户</c>

00:34:30.637 --> 00:34:33.407
<c.magenta>可以立刻打电话预约</c>

00:34:34.842 --> 00:34:37.411
<c.magenta>你们可以通过web markup</c>
<c.magenta>取得相同的结果</c>

00:34:37.878 --> 00:34:40.581
<c.magenta>通过利用邮寄地址和电话号码</c>

00:34:42.516 --> 00:34:45.252
<c.magenta>下面让我们来聊下</c>
<c.magenta>开启你们的应用</c>

00:34:49.322 --> 00:34:51.158
<c.magenta>对于CoreSpotlight</c>
<c.magenta>和应用历史</c>

00:34:51.225 --> 00:34:53.560
<c.magenta>我们使用NSUserActivity</c>
<c.magenta>来恢复状态</c>

00:34:54.661 --> 00:34:57.564
<c.magenta>你们的应用代理会</c>
<c.magenta>与continueUserActivity一起被调用</c>

00:34:57.965 --> 00:35:00.334
<c.magenta>你们检测NSUserActivity</c>
<c.magenta>的活动类型</c>

00:34:57.965 --> 00:35:00.334
<c.magenta>你们检测NSUserActivity</c>
<c.magenta>的活动类型</c>

00:35:00.834 --> 00:35:02.836
<c.magenta>和用户信息字典 如果必要</c>

00:35:03.470 --> 00:35:07.107
<c.magenta>如果你们的应用是由于用户</c>
<c.magenta>在Spotlight里选择了CSSearchableItem而启动</c>

00:35:07.174 --> 00:35:10.477
<c.magenta>那活动类型会是</c>
<c.magenta>CSSearchableItemActionType</c>

00:35:10.677 --> 00:35:13.914
<c.magenta>然后你们从用户信息字典里取得识别符</c>

00:35:14.214 --> 00:35:16.750
<c.magenta>通过使用</c>
<c.magenta>CSSearchableItemActivityIdentifier</c>

00:35:17.618 --> 00:35:19.720
<c.magenta>2014年“引入切换”的演讲</c>

00:35:19.786 --> 00:35:23.924
<c.magenta>更深层讲解了如何开启</c>
<c.magenta>NSUserActivity审阅和活动类型</c>

00:35:24.758 --> 00:35:28.662
<c.magenta>对通用链接</c>
<c.magenta>同样我们使用NSUserActivity</c>

00:35:29.530 --> 00:35:32.499
<c.magenta>那样你们的应用代理可和</c>
<c.magenta>continueUserActivity一起被调用</c>

00:35:33.033 --> 00:35:36.603
<c.magenta>同样 你们检测NSUserActivity的活动类型</c>

00:35:36.870 --> 00:35:40.541
<c.magenta>它会是</c>
<c.magenta>NSUserActivityTypeBrowsingWeb</c>

00:35:41.542 --> 00:35:46.747
<c.magenta>你们解析URL</c>
<c.magenta>然后 将用户带到URL所指的地方</c>

00:35:47.447 --> 00:35:48.515
<c.magenta>这就是开启</c>

00:35:49.683 --> 00:35:51.251
<c.magenta>现在让我们来看个新特性</c>

00:35:54.154 --> 00:35:57.791
<c.magenta>在iOS 10里</c>
<c.magenta>我们添加了一个功能</c>

00:35:58.225 --> 00:36:00.894
<c.magenta>能让用户直接在你们的应用里继续搜索</c>

00:35:58.225 --> 00:36:00.894
<c.magenta>能让用户直接在你们的应用里继续搜索</c>

00:36:03.664 --> 00:36:05.799
<c.magenta>让Spotlight显示人性化结果</c>

00:36:07.568 --> 00:36:11.572
<c.magenta>是一种直观的体现 你们应选择使用</c>
<c.magenta>Spotlight Search continuation</c>

00:36:11.638 --> 00:36:14.074
<c.magenta>那样用户就可以直接打开你们的应用</c>

00:36:14.141 --> 00:36:16.944
<c.magenta>如果你们已经支持了搜索</c>
<c.magenta>那对它的采用就更简单了</c>

00:36:18.312 --> 00:36:21.648
<c.magenta>它能让你们使用定制的搜索接口</c>

00:36:22.249 --> 00:36:24.785
<c.magenta>它已经广泛被我们内部的应用采用了</c>

00:36:26.119 --> 00:36:29.256
<c.magenta>这是另一个增加互动性的方式</c>

00:36:29.323 --> 00:36:30.557
<c.magenta>与你们的应用</c>

00:36:30.624 --> 00:36:33.460
<c.magenta>用户直接被从Spotlight</c>

00:36:33.694 --> 00:36:36.763
<c.magenta>带入了你们已有的搜索体验</c>

00:36:46.306 --> 00:36:47.140
<c.magenta>现在——</c>

00:36:52.412 --> 00:36:53.247
<c.magenta>谢谢</c>

00:36:54.381 --> 00:36:56.216
<c.magenta>为这能在你们的应用里被支持</c>

00:36:57.184 --> 00:36:59.319
<c.magenta>你们要在info.plist里</c>
<c.magenta>添加一个关键值</c>

00:37:01.288 --> 00:37:03.290
<c.magenta>声明你们支持这个功能</c>

00:37:06.760 --> 00:37:09.429
<c.magenta>你们应用的代理将被调用</c>
<c.magenta>有一个新活动类型</c>

00:37:09.630 --> 00:37:11.832
<c.magenta>CSQueryContinuationActionType</c>

00:37:12.466 --> 00:37:15.969
<c.magenta>然后新的查询字符串</c>
<c.magenta>被递入用户信息</c>

00:37:16.036 --> 00:37:17.671
<c.magenta>与CSSearchQueryString</c>
<c.magenta>关键值一起</c>

00:37:17.971 --> 00:37:20.974
<c.magenta>至此 你们可以执行</c>
<c.magenta>你们自己的搜索UI</c>

00:37:21.074 --> 00:37:24.645
<c.magenta>利用相同的查询字符串</c>
<c.magenta>让用户在你们应用里继续搜索</c>

00:37:25.379 --> 00:37:27.514
<c.magenta>为避免困惑</c>
<c.magenta>通常是一个好主意</c>

00:37:27.581 --> 00:37:31.218
<c.magenta>确保你们的搜索结果</c>
<c.magenta>与Spotlight的大概一致</c>

00:37:31.618 --> 00:37:33.854
<c.magenta>由于Spotlight</c>
<c.magenta>是基于前缀搜索</c>

00:37:34.054 --> 00:37:36.156
<c.magenta>我们建议你们使用</c>
<c.magenta>相似的规则</c>

00:37:36.723 --> 00:37:38.659
<c.magenta>如果你们无法支持前缀搜索</c>

00:37:38.792 --> 00:37:41.662
<c.magenta>考虑将用户带至一个完成接口</c>

00:37:44.665 --> 00:37:46.967
<c.magenta>另一个确保与</c>
<c.magenta>Spotlight一致的方式</c>

00:37:47.034 --> 00:37:49.136
<c.magenta>是利用CoreSpotlight</c>
<c.magenta>的Search API</c>

00:37:49.503 --> 00:37:52.172
<c.magenta>我们有许多内部应用使用这个方式</c>

00:37:57.711 --> 00:38:03.283
<c.magenta>CoreSpotlight Search API</c>
<c.magenta>让你们能便捷地实现对你们数据的搜索</c>

00:37:57.711 --> 00:38:03.283
<c.magenta>CoreSpotlight Search API</c>
<c.magenta>让你们能便捷地实现对你们数据的搜索</c>

00:38:03.717 --> 00:38:05.686
<c.magenta>它利用你们已经提供给</c>

00:38:05.752 --> 00:38:07.621
<c.magenta>CoreSpotlight的数据</c>
<c.magenta>支持Spotlight Search</c>

00:38:11.058 --> 00:38:13.293
<c.magenta>全美一致</c>

00:38:14.862 --> 00:38:16.897
<c.magenta>它已经被我们许多内部的应用使用</c>

00:38:16.964 --> 00:38:18.699
<c.magenta>包括Mail</c>
<c.magenta>Messages和Notes</c>

00:38:19.466 --> 00:38:24.338
<c.magenta>它避免了开销</c>
<c.magenta>你们不用管理一个额外的索引</c>

00:38:24.838 --> 00:38:28.108
<c.magenta>因为它与Spotlight</c>
<c.magenta>使用同一个索引</c>

00:38:29.510 --> 00:38:32.179
<c.magenta>这个索引提供了全套的</c>
<c.magenta>对元数据和内容的搜索</c>

00:38:33.514 --> 00:38:35.816
<c.magenta>如果你们所有的内容都在设备上</c>

00:38:35.883 --> 00:38:38.285
<c.magenta>CoreSpotlight是</c>
<c.magenta>对于搜索的完全解决方案</c>

00:38:38.819 --> 00:38:42.489
<c.magenta>如果你们有设备上和</c>
<c.magenta>网上内容的混合</c>

00:38:42.689 --> 00:38:44.825
<c.magenta>你们可以合并查询和合并单元</c>

00:38:44.992 --> 00:38:47.294
<c.magenta>通过设备上</c>
<c.magenta>CoreSpotlight获响应</c>

00:38:47.361 --> 00:38:49.530
<c.magenta>通过网上的索引获得完整性</c>

00:38:51.164 --> 00:38:53.867
<c.magenta>Mail不仅将</c>
<c.magenta>CoreSpotlight用于搜索</c>

00:38:54.368 --> 00:38:57.838
<c.magenta>还用它创建搜索建议</c>
<c.magenta>建立复杂的查询</c>

00:38:58.338 --> 00:39:01.642
<c.magenta>这是个很好利用</c>
<c.magenta>CoreSpotlight Search的方式</c>

00:38:58.338 --> 00:39:01.642
<c.magenta>这是个很好利用</c>
<c.magenta>CoreSpotlight Search的方式</c>

00:39:01.708 --> 00:39:03.577
<c.magenta>同时还能保持简洁的UI</c>

00:39:05.779 --> 00:39:09.983
<c.magenta>CoreSpotlight Search API</c>
<c.magenta>创建了你们提供给Spotlight的数据</c>

00:39:10.484 --> 00:39:13.220
<c.magenta>但你们的数据是受保护的</c>
<c.magenta>不会被其它的应用访问</c>

00:39:13.787 --> 00:39:15.956
<c.magenta>查询引擎很快并可以被扩展</c>

00:39:16.023 --> 00:39:18.225
<c.magenta>所以你们能在应用里得到很好响应</c>

00:39:18.592 --> 00:39:21.328
<c.magenta>查询语法允许复杂</c>
<c.magenta>完整的提问</c>

00:39:21.461 --> 00:39:24.131
<c.magenta>也支持范围查询</c>
<c.magenta>数字和时间日期</c>

00:39:24.331 --> 00:39:26.366
<c.magenta>还有一组强大的短消息的功能</c>

00:39:26.700 --> 00:39:30.037
<c.magenta>对于你们熟悉Mac OS上</c>
<c.magenta>元数据框架的人</c>

00:39:30.304 --> 00:39:32.039
<c.magenta>会对这个语法感到很熟悉</c>

00:39:33.740 --> 00:39:36.777
<c.magenta>简单介绍一些常见的搜索操作</c>

00:39:37.044 --> 00:39:40.547
<c.magenta>如所见 CoreSpotlight</c>
<c.magenta>支持全套搜索比较运算符</c>

00:39:40.681 --> 00:39:43.684
<c.magenta>也支持布尔运算符AND</c>
<c.magenta>OR和NOT</c>

00:39:46.787 --> 00:39:49.623
<c.magenta>此外 CoreSpotlight</c>
<c.magenta>能让你定制</c>

00:39:49.690 --> 00:39:51.458
<c.magenta>适合你们需要的字符串匹配</c>

00:39:51.825 --> 00:39:54.461
<c.magenta>如果你们要补区分大小写</c>
<c.magenta>你们可以添加标志c</c>

00:39:56.330 --> 00:39:59.867
<c.magenta>如果你们想忽略注音符号</c>
<c.magenta>像注音符</c>

00:40:00.767 --> 00:40:04.371
<c.magenta>如果它们在当前的语言里不重要</c>
<c.magenta>你们可以用标志d</c>

00:40:05.572 --> 00:40:08.075
<c.magenta>如果你们想匹配一个字段里的单词</c>

00:40:08.275 --> 00:40:10.777
<c.magenta>你们不用在字段的开始定位标记查询</c>

00:40:10.844 --> 00:40:12.513
<c.magenta>你们只需使用标志w</c>

00:40:13.080 --> 00:40:15.782
<c.magenta>这些也适用于信息内容</c>

00:40:16.483 --> 00:40:19.219
<c.magenta>如果你们想要让多个词被分开</c>
<c.magenta>一一处理</c>

00:40:20.554 --> 00:40:23.690
<c.magenta>那你们可以递入标志t</c>
<c.magenta>那样查询字符串就会被标记</c>

00:40:25.659 --> 00:40:27.027
<c.magenta>让我们来看个例子</c>

00:40:27.928 --> 00:40:31.598
<c.magenta>我们来实现一个搜索函数</c>
<c.magenta>它接收一个用户查询作为输入</c>

00:40:32.232 --> 00:40:34.501
<c.magenta>我们确保取消所有</c>
<c.magenta>正在运行的查询</c>

00:40:34.568 --> 00:40:37.471
<c.magenta>那样我们就不会有</c>
<c.magenta>多个查询在同时运行</c>

00:40:37.538 --> 00:40:39.339
<c.magenta>这会降低查询速度</c>

00:40:41.875 --> 00:40:45.546
<c.magenta>因为我们在处理用户输入</c>
<c.magenta>我们确保将查询字符串转义</c>

00:40:47.881 --> 00:40:50.984
<c.magenta>我们使用双星语法来创建一个查询</c>
<c.magenta>它会匹配</c>

00:40:51.251 --> 00:40:52.920
<c.magenta>内容或元数据</c>

00:40:53.654 --> 00:40:55.956
<c.magenta>转义的输入作为搜索字符串</c>

00:40:56.690 --> 00:40:59.259
<c.magenta>我们有cdw和t运算符</c>

00:40:59.326 --> 00:41:02.129
<c.magenta>这表示创建一个</c>
<c.magenta>不区分大小写 能本土识别的</c>

00:40:59.326 --> 00:41:02.129
<c.magenta>这表示创建一个</c>
<c.magenta>不区分大小写 能本土识别的</c>

00:41:02.296 --> 00:41:05.632
<c.magenta>不区分注音符的</c>
<c.magenta>匹配单词 标记字段的搜索</c>

00:41:06.733 --> 00:41:09.136
<c.magenta>有了查询字符串</c>
<c.magenta>我们来创建一个查询对象</c>

00:41:09.703 --> 00:41:12.406
<c.magenta>我们请求一个</c>
<c.magenta>display name</c>

00:41:13.140 --> 00:41:14.508
<c.magenta>这将会在</c>

00:41:14.575 --> 00:41:17.077
<c.magenta>返回的可查询项目的</c>
<c.magenta>AttributeSet里</c>

00:41:19.146 --> 00:41:20.981
<c.magenta>我们设定</c>
<c.magenta>foundItemsHandler</c>

00:41:21.315 --> 00:41:23.650
<c.magenta>它会接收到多批的可查询项目</c>

00:41:23.984 --> 00:41:25.719
<c.magenta>如果你们的查询无结果</c>

00:41:27.321 --> 00:41:30.290
<c.magenta>一个completionHandler</c>
<c.magenta>会被调用一次</c>

00:41:30.357 --> 00:41:33.493
<c.magenta>当有错误时或查询成功</c>

00:41:36.196 --> 00:41:37.865
<c.magenta>在我们的completionHandler里</c>

00:41:37.931 --> 00:41:40.734
<c.magenta>我们可以选择让它显示完成处理</c>
<c.magenta>或其它的</c>

00:41:42.603 --> 00:41:44.505
<c.magenta>然后就是开始查询</c>

00:41:44.938 --> 00:41:47.407
<c.magenta>CoreSpotlight有了结果</c>
<c.magenta>然后调用解决</c>

00:41:47.474 --> 00:41:49.243
<c.magenta>然后调用</c>
<c.magenta>completionHandler</c>

00:41:50.944 --> 00:41:54.214
<c.magenta>让我们来实践一下</c>
<c.magenta>我们创建了一个应用</c>

00:41:55.749 --> 00:41:57.451
<c.magenta>有一个简单的图片收集功能</c>

00:42:03.757 --> 00:42:05.859
<c.magenta>它已支持用CoreSpotlight</c>
<c.magenta>建立索引</c>

00:42:05.926 --> 00:42:07.394
<c.magenta>也已支持搜索</c>

00:42:08.762 --> 00:42:11.932
<c.magenta>那我们要做的第一件事是</c>
<c.magenta>添加支持</c>

00:42:13.100 --> 00:42:16.136
<c.magenta>Continue Search in App</c>
<c.magenta>这很简单</c>

00:42:17.538 --> 00:42:22.409
<c.magenta>我们来到应用的info.plist</c>
<c.magenta>我们准许CoreSpotlightContinuation</c>

00:42:28.715 --> 00:42:31.351
<c.magenta>完成后</c>
<c.magenta>我们来到应用的代理...</c>

00:42:33.086 --> 00:42:38.659
<c.magenta>在我们的用户活动</c>
<c.magenta>continuationHandler里</c>

00:42:40.527 --> 00:42:41.562
<c.magenta>我们添加支持...</c>

00:42:43.964 --> 00:42:45.332
<c.magenta>Continue Search in App</c>

00:42:45.666 --> 00:42:48.202
<c.magenta>如你们所见 活动类型</c>

00:42:48.569 --> 00:42:52.472
<c.magenta>是一个CSQueryContinuationActionType</c>

00:42:53.473 --> 00:42:54.975
<c.magenta>我们取得搜索的查询...</c>

00:42:56.343 --> 00:42:59.780
<c.magenta>通过查看CSSearchQueryString</c>
<c.magenta>对应的用户信息</c>

00:43:01.081 --> 00:43:04.017
<c.magenta>我们使用搜索询问激活视图控制器</c>

00:43:06.320 --> 00:43:07.821
<c.magenta>我们来看下实践</c>

00:43:18.899 --> 00:43:20.968
<c.magenta>好的</c>
<c.magenta>这里有我们的图片收集</c>

00:43:22.035 --> 00:43:23.804
<c.magenta>我们下拉出Spotlight</c>

00:43:27.174 --> 00:43:30.611
<c.magenta>搜索单词“雪”</c>

00:43:30.777 --> 00:43:32.846
<c.magenta>凑巧在这个相册里很普遍</c>

00:43:34.248 --> 00:43:39.586
<c.magenta>我们获取两个结果和</c>
<c.magenta>一个在应用里继续搜索</c>

00:43:40.354 --> 00:43:43.423
<c.magenta>点击在应用里搜索</c>
<c.magenta>我被带入了我的应用</c>

00:43:51.665 --> 00:43:54.735
<c.magenta>现在你们或许会观察到</c>
<c.magenta>我在Spotlight里有两个结果</c>

00:43:54.968 --> 00:43:56.603
<c.magenta>而在我的应用里只有一个</c>

00:43:56.937 --> 00:43:59.973
<c.magenta>这是因为我没使用</c>
<c.magenta>CoreSpotlight Search</c>

00:44:02.009 --> 00:44:05.279
<c.magenta>这个搜索只是一个简单的前缀搜索</c>

00:44:06.079 --> 00:44:07.514
<c.magenta>那让我们来修复它</c>

00:44:13.921 --> 00:44:15.155
<c.magenta>在我们的视图控制器里</c>

00:44:18.992 --> 00:44:20.127
<c.magenta>我们有一个搜索方法</c>

00:44:23.797 --> 00:44:27.568
<c.magenta>我将删除这个简单</c>
<c.magenta>对搜索的实现</c>

00:44:27.734 --> 00:44:28.902
<c.magenta>我们现有的</c>

00:44:31.805 --> 00:44:33.607
<c.magenta>然后开始实现</c>
<c.magenta>CoreSpotlight</c>

00:44:35.209 --> 00:44:36.743
<c.magenta>首先 我们想要添加一个变量</c>

00:44:42.783 --> 00:44:45.886
<c.magenta>一个能储存现有搜索查询的</c>
<c.magenta>查询对象</c>

00:44:49.423 --> 00:44:51.792
<c.magenta>我们要取消正在运行的查询</c>

00:44:55.562 --> 00:44:56.930
<c.magenta>将查询字符串转义</c>

00:45:02.135 --> 00:45:02.970
<c.magenta>然后创建——</c>

00:45:12.379 --> 00:45:19.152
<c.magenta>一个查询对象 当然</c>
<c.magenta>是创建一个查询字符串  失误</c>

00:45:22.656 --> 00:45:25.692
<c.magenta>好的  那现在我们有了</c>
<c.magenta>一个查询字符串 一个查询对象</c>

00:45:27.027 --> 00:45:29.096
<c.magenta>然后我们要设定</c>
<c.magenta>foundItemsHandler</c>

00:45:34.201 --> 00:45:38.071
<c.magenta>foundItemsHandler</c>
<c.magenta>创建displayables</c>

00:45:40.707 --> 00:45:43.710
<c.magenta>然后添加它们至</c>
<c.magenta>我们的结果列表</c>

00:45:44.278 --> 00:45:47.114
<c.magenta>现在 由于查询取回了</c>
<c.magenta>CSSearchableItems</c>

00:45:47.614 --> 00:45:52.319
<c.magenta>我要实现一个能接收</c>
<c.magenta>CSSearchableItems的一个配适器</c>

00:45:52.386 --> 00:45:55.088
<c.magenta>创建一些能被显示的东西</c>

00:45:55.789 --> 00:45:57.658
<c.magenta>让我们来看下</c>

00:46:01.461 --> 00:46:03.864
<c.magenta>我称之为懒图的对象</c>

00:46:05.265 --> 00:46:07.701
<c.magenta>它能获取数据</c>

00:46:07.801 --> 00:46:12.806
<c.magenta>那些通过我们的查询得到的</c>
<c.magenta>并适当的时候能使用它们</c>

00:46:13.607 --> 00:46:17.644
<c.magenta>当不充足时</c>
<c.magenta>它回到数据库</c>

00:46:18.712 --> 00:46:22.316
<c.magenta>获取对应识别符的图片对象</c>

00:46:22.950 --> 00:46:25.886
<c.magenta>储存起来为将来使用</c>
<c.magenta>然后返回它</c>

00:46:25.953 --> 00:46:28.055
<c.magenta>那让它能连同返回所有其它的属性</c>

00:46:28.255 --> 00:46:30.123
<c.magenta>那些无法从数据库里获得的</c>

00:46:31.658 --> 00:46:35.095
<c.magenta>通过使用懒图对象</c>
<c.magenta>我们确保可以显示我们的结果</c>

00:46:35.162 --> 00:46:37.130
<c.magenta>省去要回到数据库的步骤</c>

00:46:37.764 --> 00:46:39.366
<c.magenta>这样对性能有利</c>

00:46:39.800 --> 00:46:42.669
<c.magenta>让我们来实现</c>
<c.magenta>completionHandler</c>

00:46:44.471 --> 00:46:46.974
<c.magenta>completionHandler</c>
<c.magenta>里 我们对结果进行排序</c>

00:46:48.141 --> 00:46:49.543
<c.magenta>进入主队列</c>

00:46:52.346 --> 00:46:57.150
<c.magenta>使结果变为可显示的</c>
<c.magenta>然后调用我们的表视图更新</c>

00:46:58.552 --> 00:47:01.188
<c.magenta>之后 剩下的就是调用start</c>

00:46:58.552 --> 00:47:01.188
<c.magenta>之后 剩下的就是调用start</c>

00:47:05.759 --> 00:47:07.427
<c.magenta>让我们来看下</c>

00:47:20.307 --> 00:47:21.141
<c.magenta>好的</c>

00:47:23.710 --> 00:47:26.046
<c.magenta>现在因为这是在使用</c>
<c.magenta>CoreSpotlight Search</c>

00:47:26.113 --> 00:47:28.815
<c.magenta>而且我的查询的条件很宽松</c>

00:47:29.149 --> 00:47:33.053
<c.magenta>我应该能输入任何在这里看见的词</c>
<c.magenta>比如 河</c>

00:47:34.388 --> 00:47:37.958
<c.magenta>我找到了所有在元数据或在内容里</c>
<c.magenta>包含河的</c>

00:47:39.693 --> 00:47:43.430
<c.magenta>好 通过CoreSpotlight</c>
<c.magenta>实现搜索 就这么简单</c>

00:47:44.831 --> 00:47:48.902
<c.magenta>下面 我想请Vipul回到台上</c>
<c.magenta>来聊一下排序</c>

00:47:56.009 --> 00:47:59.947
<c.magenta>谢谢John 刚才是一个对</c>
<c.magenta>Search APIs很精彩的简介</c>

00:48:00.247 --> 00:48:03.550
<c.magenta>在你们思考如何在应用里</c>
<c.magenta>实现这些APIs时</c>

00:48:04.785 --> 00:48:07.154
<c.magenta>了解Spotlight</c>
<c.magenta>如何对结果排序的会很有帮助</c>

00:48:07.221 --> 00:48:10.057
<c.magenta>还有你们怎样正面影响排序</c>

00:48:10.657 --> 00:48:13.327
<c.magenta>那让我么来看下</c>
<c.magenta>Spotlight里的排序</c>

00:48:14.461 --> 00:48:17.064
<c.magenta>Spotlight的主要目的守则</c>

00:48:17.164 --> 00:48:20.400
<c.magenta>是依次显示你们查询的最佳结果</c>

00:48:20.467 --> 00:48:23.570
<c.magenta>这个顺序由一组因素决定</c>

00:48:23.971 --> 00:48:28.408
<c.magenta>两个主要因素</c>
<c.magenta>engagement ratio和content popularity</c>

00:48:28.642 --> 00:48:30.511
<c.magenta>然我先来聊下</c>
<c.magenta>engagement ratio</c>

00:48:31.578 --> 00:48:36.083
<c.magenta>Engagement ratio</c>
<c.magenta>其实是对频率的衡量结果通过你们的应用</c>

00:48:36.750 --> 00:48:39.253
<c.magenta>被用户选择的次数 当它们被展现时</c>

00:48:39.686 --> 00:48:44.191
<c.magenta>Spotlight里有三类</c>
<c.magenta>engagement ratios</c>

00:48:44.258 --> 00:48:47.261
<c.magenta>一个在设备上 两个在服务器上</c>

00:48:47.995 --> 00:48:52.165
<c.magenta>在设备上</c>
<c.magenta>engagement ratio测量</c>

00:48:52.232 --> 00:48:55.202
<c.magenta>用户个人与你们应用的互动</c>

00:48:56.236 --> 00:48:59.773
<c.magenta>服务器对每个查询都有一个</c>
<c.magenta>engagement ratio</c>

00:48:59.840 --> 00:49:02.276
<c.magenta>这是基于每一个查询</c>

00:48:59.840 --> 00:49:02.276
<c.magenta>这是基于每一个查询</c>

00:49:02.342 --> 00:49:04.578
<c.magenta>对曾经显示过的结果</c>

00:49:04.645 --> 00:49:10.851
<c.magenta>通过使用Spotlight可让结果</c>
<c.magenta>提升或降低排序 对应某个查询</c>

00:49:11.285 --> 00:49:13.287
<c.magenta>最后 还有一个global</c>
<c.magenta>engagement ratio</c>

00:49:13.353 --> 00:49:16.857
<c.magenta>它是基于所有用户的</c>
<c.magenta>所有互动</c>

00:49:17.891 --> 00:49:19.726
<c.magenta>曾经与你们应用发生过的</c>

00:49:20.093 --> 00:49:24.364
<c.magenta>没可用查询级别engagement</c>
<c.magenta>ratio时 它会被调用</c>

00:49:25.799 --> 00:49:27.100
<c.magenta>一些要紧的事</c>

00:49:27.167 --> 00:49:32.539
<c.magenta>第一 你们不会得到处罚</c>
<c.magenta>如果某个查询结果</c>

00:49:32.606 --> 00:49:34.208
<c.magenta>没有显示给用户</c>

00:49:34.274 --> 00:49:37.144
<c.magenta>它们可以说是在分割线以下</c>
<c.magenta>键盘的下面</c>

00:49:37.845 --> 00:49:43.784
<c.magenta>这里最佳的实践</c>
<c.magenta>其实是使用关键词 标题和描述</c>

00:49:44.051 --> 00:49:48.422
<c.magenta>那些能清楚地形容你们</c>
<c.magenta>建立索引的内容</c>

00:49:48.488 --> 00:49:50.858
<c.magenta>也能将用户带至相同的内容</c>

00:49:54.394 --> 00:49:55.662
<c.magenta>第二个重要的事是</c>

00:49:56.430 --> 00:50:01.068
<c.magenta>content popularity</c>
<c.magenta>一般来说 更受欢迎的内容</c>

00:49:56.430 --> 00:50:01.068
<c.magenta>content popularity</c>
<c.magenta>一般来说 更受欢迎的内容</c>

00:50:01.301 --> 00:50:02.436
<c.magenta>趋向于被排得更高</c>

00:50:03.170 --> 00:50:07.140
<c.magenta>Spotlight能通过三个方式来</c>
<c.magenta>了解受欢迎度</c>

00:50:07.574 --> 00:50:09.142
<c.magenta>如果你们使用</c>
<c.magenta>通用链接</c>

00:50:09.276 --> 00:50:12.813
<c.magenta>它们会自动地去查看</c>
<c.magenta>网站结构</c>

00:50:12.880 --> 00:50:15.082
<c.magenta>然后得到你们网站的声誉</c>

00:50:15.215 --> 00:50:16.617
<c.magenta>这里 你们不用做任何事</c>

00:50:16.683 --> 00:50:18.886
<c.magenta>你们只要实现</c>
<c.magenta>通用链接</c>

00:50:20.254 --> 00:50:23.123
<c.magenta>如果一个项目有关联的</c>
<c.magenta>NSUserActivity</c>

00:50:23.190 --> 00:50:27.528
<c.magenta>Spotlight能跟踪用户</c>
<c.magenta>在设备上查阅此项目的频率</c>

00:50:27.594 --> 00:50:29.162
<c.magenta>然后在排序里使用</c>

00:50:30.163 --> 00:50:34.468
<c.magenta>若你们同时使用通用链接</c>
<c.magenta>和公开的NSUserActivities</c>

00:50:34.635 --> 00:50:38.772
<c.magenta>那些被允许公进行开索引的</c>
<c.magenta>iOS 10现在能估计</c>

00:50:38.972 --> 00:50:42.242
<c.magenta>整个iOS用户群</c>

00:50:42.309 --> 00:50:45.546
<c.magenta>在你们的应用里查看一个链接的频率</c>
<c.magenta>这会被用于排序</c>

00:50:45.712 --> 00:50:48.815
<c.magenta>这是为了新的差分隐私条款所建立的</c>

00:50:49.416 --> 00:50:50.884
<c.magenta>让我向你们展示下</c>

00:50:52.119 --> 00:50:55.689
<c.magenta>这个例子里 Yelp采用了</c>
<c.magenta>NSUserActivities</c>

00:50:55.756 --> 00:50:59.092
<c.magenta>被允许进行公开索引</c>
<c.magenta>和使用通用链接</c>

00:50:59.159 --> 00:51:01.628
<c.magenta>当用户在Yelp里遇到一个</c>
<c.magenta>深层链接</c>

00:50:59.159 --> 00:51:01.628
<c.magenta>当用户在Yelp里遇到一个</c>
<c.magenta>深层链接</c>

00:51:01.929 --> 00:51:04.965
<c.magenta>iOS计算机哈希添加一些干扰</c>

00:51:05.098 --> 00:51:08.669
<c.magenta>之后获取一个碎片</c>
<c.magenta>传送至Apple的服务器</c>

00:51:09.069 --> 00:51:13.740
<c.magenta>单独的碎片是没用处的</c>
<c.magenta>它不包含任何的信息</c>

00:51:14.141 --> 00:51:17.644
<c.magenta>可一旦成千的用户报告了很多的碎片</c>

00:51:17.711 --> 00:51:23.250
<c.magenta>Apple的服务器能找回</c>
<c.magenta>被看了成千次的哈希</c>

00:51:24.918 --> 00:51:29.456
<c.magenta>不用知道哪些用户</c>
<c.magenta>报告了哪些碎片</c>

00:51:29.990 --> 00:51:34.161
<c.magenta>这提供了一个方式用于决定</c>
<c.magenta>如用户的总体行为</c>

00:51:34.228 --> 00:51:38.932
<c.magenta>不用对任何用户的独立行为</c>
<c.magenta>作任何的的分析</c>

00:51:39.600 --> 00:51:42.236
<c.magenta>当受欢迎的深层链接</c>
<c.magenta>被这样的方式发现后</c>

00:51:42.302 --> 00:51:46.039
<c.magenta>它们在Spotlight里的</c>
<c.magenta>排名会上升 这很酷</c>

00:51:48.342 --> 00:51:51.945
<c.magenta>那让我们很快地看一下</c>
<c.magenta>排序的最佳实践</c>

00:51:53.080 --> 00:51:55.549
<c.magenta>John展示了许多最佳实践</c>

00:51:55.616 --> 00:51:58.719
<c.magenta>对通过CoreSpotlight</c>
<c.magenta>给你们应用内容建立索引</c>

00:51:58.785 --> 00:52:02.523
<c.magenta>你们应该遵循这些 因为它们会提供</c>
<c.magenta>一个一致的搜索体验</c>

00:51:58.785 --> 00:52:02.523
<c.magenta>你们应该遵循这些 因为它们会提供</c>
<c.magenta>一个一致的搜索体验</c>

00:52:02.589 --> 00:52:06.660
<c.magenta>为你们应用的内容</c>
<c.magenta>之后用户会去到Spotlight</c>

00:52:06.727 --> 00:52:10.631
<c.magenta>搜索你们应用里的东西</c>
<c.magenta>这将会影响到engagement ratios</c>

00:52:12.199 --> 00:52:16.837
<c.magenta>如果你们有应用的内容 允许Apple</c>
<c.magenta>对它们通过通用链接建立索引</c>

00:52:17.604 --> 00:52:21.842
<c.magenta>这样能暴露你们的应用给潜在的用户</c>

00:52:23.443 --> 00:52:26.413
<c.magenta>你们现知道content</c>
<c.magenta>popularity很重要 那就关联</c>

00:52:27.047 --> 00:52:31.318
<c.magenta>通用链接和CoreSpotlight</c>
<c.magenta>的项目至NSUserActivities</c>

00:52:31.785 --> 00:52:37.858
<c.magenta>我们今年添加了weakRelatedUniqueIdentifier</c>
<c.magenta>来帮助你们更容易地达成这个</c>

00:52:38.959 --> 00:52:42.029
<c.magenta>我重复这个 因为很重要</c>

00:52:42.095 --> 00:52:46.867
<c.magenta>你们所建立索引的项目的</c>
<c.magenta>标题、描述和关键词</c>

00:52:46.934 --> 00:52:50.571
<c.magenta>是与深层链接相关的</c>

00:52:51.071 --> 00:52:52.439
<c.magenta>留意你们的表现方式</c>

00:52:52.506 --> 00:52:57.444
<c.magenta>我们知道表现合理的链接会有更高的</c>
<c.magenta>engagement rates</c>

00:52:57.778 --> 00:53:01.448
<c.magenta>最后 在适当的时候实现</c>
<c.magenta>Continue Search in App</c>

00:52:57.778 --> 00:53:01.448
<c.magenta>最后 在适当的时候实现</c>
<c.magenta>Continue Search in App</c>

00:53:01.615 --> 00:53:05.118
<c.magenta>它让用户能在你们的应用里</c>
<c.magenta>完成搜索任务</c>

00:53:08.388 --> 00:53:10.424
<c.magenta>结论 关键的几点</c>

00:53:10.724 --> 00:53:13.660
<c.magenta>Spotlight是iOS里</c>
<c.magenta>一个全新的万能搜索工具</c>

00:53:13.727 --> 00:53:16.997
<c.magenta>在iOS 10里</c>
<c.magenta>我们让它变得更实用 更方便被使用</c>

00:53:17.264 --> 00:53:21.969
<c.magenta>越来越多的用户期望</c>
<c.magenta>一个优质的应用</c>

00:53:22.035 --> 00:53:23.837
<c.magenta>能通过Spotlight进行搜索</c>

00:53:23.904 --> 00:53:27.307
<c.magenta>所以 如果你们还没采用这些APIs</c>

00:53:27.374 --> 00:53:29.443
<c.magenta>我们建议你们考虑采用</c>

00:53:29.510 --> 00:53:32.813
<c.magenta>为配合iOS 10的大众发行</c>

00:53:33.080 --> 00:53:35.516
<c.magenta>若你们已实现了</c>
<c.magenta>Search APIs</c>

00:53:35.582 --> 00:53:38.619
<c.magenta>我们建议采用新的规则</c>

00:53:38.685 --> 00:53:40.120
<c.magenta>那些我们今天所介绍的</c>

00:53:43.290 --> 00:53:45.125
<c.magenta>一些相关的讲座</c>
<c.magenta>优秀的讲座</c>

00:53:45.192 --> 00:53:46.960
<c.magenta>明天“前摄的建议”的演讲</c>

00:53:47.327 --> 00:53:53.200
<c.magenta>在座的你们都应该去</c>
<c.magenta>因为你们在搜索里所做的</c>

00:53:53.267 --> 00:53:56.503
<c.magenta>能直接被应用到“前摄的建议”里</c>

00:53:56.570 --> 00:53:59.439
<c.magenta>我们昨天也有个</c>
<c.magenta>SiriKit APIs的精彩演讲</c>

00:53:59.506 --> 00:54:01.675
<c.magenta>你们可以在会议的网站上找到它</c>

00:53:59.506 --> 00:54:01.675
<c.magenta>你们可以在会议的网站上找到它</c>

00:54:01.909 --> 00:54:04.478
<c.magenta>我们也推荐星期三关于</c>
<c.magenta>隐私的演讲</c>

00:54:04.545 --> 00:54:06.813
<c.magenta>那会对差分隐私进行更细致的讨论</c>

00:54:07.447 --> 00:54:10.651
<c.magenta>像其它的讲座一样 这个讲座会</c>
<c.magenta>被上传 参见第一个URL</c>

00:54:10.717 --> 00:54:13.887
<c.magenta>我们也会上传所有</c>
<c.magenta>Search API的相关文档</c>

00:54:13.987 --> 00:54:16.323
<c.magenta>至search.developer.apple.com</c>

00:54:16.690 --> 00:54:17.791
<c.magenta>这就是我们的所有内容</c>

00:54:18.058 --> 00:54:19.493
<c.magenta>祝大家在余下的</c>
<c.magenta>WWDC 中过得愉快</c>
